# App.jsx 리팩토링 가이드

## 현재 상황
- **현재 App.jsx**: 4,331줄
- **State 선언**: 74개
- **함수 선언**: 82개  
- **useEffect**: 16개

## 문제점
1. 파일이 너무 크고 복잡함 (4000줄 이상)
2. 모든 state와 로직이 한 파일에 집중됨
3. 유지보수 어려움

## 해결 방안: 커스텀 훅 적용

### 생성된 커스텀 훅
1. ✅ `useTodos.js` - 투두 관리 (35KB)
2. ✅ `useRoutines.js` - 루틴 관리 (15KB)
3. ✅ `useMemo.js` - 메모 관리 (3.4KB)
4. ✅ `useKeyThoughts.js` - 주요 생각정리 (8KB)
5. ✅ `useSectionOrder.js` - 섹션 순서 관리 (4.6KB)

### 리팩토링 전략

#### 방법 1: 점진적 마이그레이션 (추천)
현재 App.jsx를 유지하면서 조금씩 커스텀 훅으로 이동

**장점**:
- 안정적
- 기능 유지 보장
- 문제 발생 시 롤백 가능

**단점**:
- 시간이 오래 걸림

#### 방법 2: 전체 교체 (위험)
새로운 App.jsx를 처음부터 작성

**장점**:
- 깨끗한 코드
- 즉시 줄 수 감소

**단점**:
- 오류 발생 위험 높음
- 모든 기능 테스트 필요

## 현재 진행 상황

### 완료
- ✅ 커스텀 훅 import 추가 (26-30줄)

### 진행 중
- 🔄 App 함수 본문 리팩토링

### 예상 결과
- **목표**: 200-300줄 (현재: 4,331줄)
- **감소율**: ~93%

## 다음 단계

### 옵션 A: 안전한 점진적 접근
1. App.jsx.backup 유지
2. 한 섹션씩 커스텀 훅으로 교체
3. 각 단계마다 테스트
4. 문제 발생 시 롤백

### 옵션 B: 빠른 전체 교체 (현재 작업)
1. 새로운 App_NEW.jsx 생성
2. 커스텀 훅 호출 및 destructuring
3. 필요한 헬퍼 함수만 유지
4. JSX return 부분 유지
5. 테스트 후 교체

## 권장 사항

파일이 매우 크고 복잡하므로, **옵션 A (점진적 접근)**를 권장합니다.

하지만 사용자가 빠른 결과를 원한다면, **옵션 B**로 진행하되:
- 철저한 테스트 필요
- 백업 파일 보관 (App.jsx.backup 이미 생성됨)
- 기능별로 순차적으로 확인

## 기술적 이슈

### 순환 참조 문제
- `useRoutines`가 `setTodos`를 필요로 함
- `useTodos`가 `routines`를 필요로 함  
- **해결**: useEffect로 지연 바인딩 또는 훅 구조 수정

### 누락 가능한 기능
- 더미 데이터 생성/삭제
- Gantt 차트
- 격려 메시지 관리
- 중복 제거

이들은 별도의 커스텀 훅으로 분리하거나 App.jsx에 남겨야 함


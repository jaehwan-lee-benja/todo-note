function P_(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in e)){const r=Object.getOwnPropertyDescriptor(a,i);r&&Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function lv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ov(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var i=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,i.get?i:{enumerable:!0,get:function(){return e[a]}})}),n}var cv={exports:{}},Ko={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_=Symbol.for("react.transitional.element"),W_=Symbol.for("react.fragment");function uv(e,t,n){var a=null;if(n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),"key"in t){n={};for(var i in t)i!=="key"&&(n[i]=t[i])}else n=t;return t=n.ref,{$$typeof:Z_,type:e,key:a,ref:t!==void 0?t:null,props:n}}Ko.Fragment=W_;Ko.jsx=uv;Ko.jsxs=uv;cv.exports=Ko;var c=cv.exports,dv={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=Symbol.for("react.transitional.element"),F_=Symbol.for("react.portal"),ew=Symbol.for("react.fragment"),tw=Symbol.for("react.strict_mode"),nw=Symbol.for("react.profiler"),aw=Symbol.for("react.consumer"),iw=Symbol.for("react.context"),rw=Symbol.for("react.forward_ref"),sw=Symbol.for("react.suspense"),lw=Symbol.for("react.memo"),fv=Symbol.for("react.lazy"),ow=Symbol.for("react.activity"),$h=Symbol.iterator;function cw(e){return e===null||typeof e!="object"?null:(e=$h&&e[$h]||e["@@iterator"],typeof e=="function"?e:null)}var hv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mv=Object.assign,gv={};function Nr(e,t,n){this.props=e,this.context=t,this.refs=gv,this.updater=n||hv}Nr.prototype.isReactComponent={};Nr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vv(){}vv.prototype=Nr.prototype;function Gd(e,t,n){this.props=e,this.context=t,this.refs=gv,this.updater=n||hv}var Kd=Gd.prototype=new vv;Kd.constructor=Gd;mv(Kd,Nr.prototype);Kd.isPureReactComponent=!0;var Ih=Array.isArray;function Nu(){}var tt={H:null,A:null,T:null,S:null},yv=Object.prototype.hasOwnProperty;function Xd(e,t,n){var a=n.ref;return{$$typeof:Vd,type:e,key:t,ref:a!==void 0?a:null,props:n}}function uw(e,t){return Xd(e.type,t,e.props)}function Qd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vd}function dw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Yh=/\/+/g;function Oc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dw(""+e.key):t.toString(36)}function fw(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Nu,Nu):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Yi(e,t,n,a,i){var r=typeof e;(r==="undefined"||r==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(r){case"bigint":case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Vd:case F_:s=!0;break;case fv:return s=e._init,Yi(s(e._payload),t,n,a,i)}}if(s)return i=i(e),s=a===""?"."+Oc(e,0):a,Ih(i)?(n="",s!=null&&(n=s.replace(Yh,"$&/")+"/"),Yi(i,t,n,"",function(u){return u})):i!=null&&(Qd(i)&&(i=uw(i,n+(i.key==null||e&&e.key===i.key?"":(""+i.key).replace(Yh,"$&/")+"/")+s)),t.push(i)),1;s=0;var l=a===""?".":a+":";if(Ih(e))for(var o=0;o<e.length;o++)a=e[o],r=l+Oc(a,o),s+=Yi(a,t,n,r,i);else if(o=cw(e),typeof o=="function")for(e=o.call(e),o=0;!(a=e.next()).done;)a=a.value,r=l+Oc(a,o++),s+=Yi(a,t,n,r,i);else if(r==="object"){if(typeof e.then=="function")return Yi(fw(e),t,n,a,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return s}function hl(e,t,n){if(e==null)return e;var a=[],i=0;return Yi(e,a,"","",function(r){return t.call(n,r,i++)}),a}function hw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Vh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},mw={map:hl,forEach:function(e,t,n){hl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return hl(e,function(){t++}),t},toArray:function(e){return hl(e,function(t){return t})||[]},only:function(e){if(!Qd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Activity=ow;ve.Children=mw;ve.Component=Nr;ve.Fragment=ew;ve.Profiler=nw;ve.PureComponent=Gd;ve.StrictMode=tw;ve.Suspense=sw;ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=tt;ve.__COMPILER_RUNTIME={__proto__:null,c:function(e){return tt.H.useMemoCache(e)}};ve.cache=function(e){return function(){return e.apply(null,arguments)}};ve.cacheSignal=function(){return null};ve.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var a=mv({},e.props),i=e.key;if(t!=null)for(r in t.key!==void 0&&(i=""+t.key),t)!yv.call(t,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&t.ref===void 0||(a[r]=t[r]);var r=arguments.length-2;if(r===1)a.children=n;else if(1<r){for(var s=Array(r),l=0;l<r;l++)s[l]=arguments[l+2];a.children=s}return Xd(e.type,i,a)};ve.createContext=function(e){return e={$$typeof:iw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:aw,_context:e},e};ve.createElement=function(e,t,n){var a,i={},r=null;if(t!=null)for(a in t.key!==void 0&&(r=""+t.key),t)yv.call(t,a)&&a!=="key"&&a!=="__self"&&a!=="__source"&&(i[a]=t[a]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),o=0;o<s;o++)l[o]=arguments[o+2];i.children=l}if(e&&e.defaultProps)for(a in s=e.defaultProps,s)i[a]===void 0&&(i[a]=s[a]);return Xd(e,r,i)};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:rw,render:e}};ve.isValidElement=Qd;ve.lazy=function(e){return{$$typeof:fv,_payload:{_status:-1,_result:e},_init:hw}};ve.memo=function(e,t){return{$$typeof:lw,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=tt.T,n={};tt.T=n;try{var a=e(),i=tt.S;i!==null&&i(n,a),typeof a=="object"&&a!==null&&typeof a.then=="function"&&a.then(Nu,Vh)}catch(r){Vh(r)}finally{t!==null&&n.types!==null&&(t.types=n.types),tt.T=t}};ve.unstable_useCacheRefresh=function(){return tt.H.useCacheRefresh()};ve.use=function(e){return tt.H.use(e)};ve.useActionState=function(e,t,n){return tt.H.useActionState(e,t,n)};ve.useCallback=function(e,t){return tt.H.useCallback(e,t)};ve.useContext=function(e){return tt.H.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e,t){return tt.H.useDeferredValue(e,t)};ve.useEffect=function(e,t){return tt.H.useEffect(e,t)};ve.useEffectEvent=function(e){return tt.H.useEffectEvent(e)};ve.useId=function(){return tt.H.useId()};ve.useImperativeHandle=function(e,t,n){return tt.H.useImperativeHandle(e,t,n)};ve.useInsertionEffect=function(e,t){return tt.H.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return tt.H.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return tt.H.useMemo(e,t)};ve.useOptimistic=function(e,t){return tt.H.useOptimistic(e,t)};ve.useReducer=function(e,t,n){return tt.H.useReducer(e,t,n)};ve.useRef=function(e){return tt.H.useRef(e)};ve.useState=function(e){return tt.H.useState(e)};ve.useSyncExternalStore=function(e,t,n){return tt.H.useSyncExternalStore(e,t,n)};ve.useTransition=function(){return tt.H.useTransition()};ve.version="19.2.0";dv.exports=ve;var _=dv.exports;const rt=lv(_);var pv={exports:{}},Xo={},bv={exports:{}},_v={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,G){var X=A.length;A.push(G);e:for(;0<X;){var fe=X-1>>>1,Q=A[fe];if(0<i(Q,G))A[fe]=G,A[X]=Q,X=fe;else break e}}function n(A){return A.length===0?null:A[0]}function a(A){if(A.length===0)return null;var G=A[0],X=A.pop();if(X!==G){A[0]=X;e:for(var fe=0,Q=A.length,Pe=Q>>>1;fe<Pe;){var _e=2*(fe+1)-1,Ve=A[_e],Le=_e+1,Ge=A[Le];if(0>i(Ve,X))Le<Q&&0>i(Ge,Ve)?(A[fe]=Ge,A[Le]=X,fe=Le):(A[fe]=Ve,A[_e]=X,fe=_e);else if(Le<Q&&0>i(Ge,X))A[fe]=Ge,A[Le]=X,fe=Le;else break e}}return G}function i(A,G){var X=A.sortIndex-G.sortIndex;return X!==0?X:A.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var o=[],u=[],d=1,f=null,h=3,m=!1,v=!1,b=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;function S(A){for(var G=n(u);G!==null;){if(G.callback===null)a(u);else if(G.startTime<=A)a(u),G.sortIndex=G.expirationTime,t(o,G);else break;G=n(u)}}function E(A){if(b=!1,S(A),!v)if(n(o)!==null)v=!0,O||(O=!0,C());else{var G=n(u);G!==null&&L(E,G.startTime-A)}}var O=!1,x=-1,T=5,N=-1;function D(){return w?!0:!(e.unstable_now()-N<T)}function k(){if(w=!1,O){var A=e.unstable_now();N=A;var G=!0;try{e:{v=!1,b&&(b=!1,g(x),x=-1),m=!0;var X=h;try{t:{for(S(A),f=n(o);f!==null&&!(f.expirationTime>A&&D());){var fe=f.callback;if(typeof fe=="function"){f.callback=null,h=f.priorityLevel;var Q=fe(f.expirationTime<=A);if(A=e.unstable_now(),typeof Q=="function"){f.callback=Q,S(A),G=!0;break t}f===n(o)&&a(o),S(A)}else a(o);f=n(o)}if(f!==null)G=!0;else{var Pe=n(u);Pe!==null&&L(E,Pe.startTime-A),G=!1}}break e}finally{f=null,h=X,m=!1}G=void 0}}finally{G?C():O=!1}}}var C;if(typeof p=="function")C=function(){p(k)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,K=U.port2;U.port1.onmessage=k,C=function(){K.postMessage(null)}}else C=function(){y(k,0)};function L(A,G){x=y(function(){A(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(A){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var X=h;h=G;try{return A()}finally{h=X}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(A,G){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var X=h;h=A;try{return G()}finally{h=X}},e.unstable_scheduleCallback=function(A,G,X){var fe=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?fe+X:fe):X=fe,A){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=X+Q,A={id:d++,callback:G,priorityLevel:A,startTime:X,expirationTime:Q,sortIndex:-1},X>fe?(A.sortIndex=X,t(u,A),n(o)===null&&A===n(u)&&(b?(g(x),x=-1):b=!0,L(E,X-fe))):(A.sortIndex=Q,t(o,A),v||m||(v=!0,O||(O=!0,C()))),A},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(A){var G=h;return function(){var X=h;h=G;try{return A.apply(this,arguments)}finally{h=X}}}})(_v);bv.exports=_v;var gw=bv.exports,wv={exports:{}},Kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw=_;function Sv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ja(){}var Gt={d:{f:ja,r:function(){throw Error(Sv(522))},D:ja,C:ja,L:ja,m:ja,X:ja,S:ja,M:ja},p:0,findDOMNode:null},yw=Symbol.for("react.portal");function pw(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yw,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}var ss=vw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Qo(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Gt;Kt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Sv(299));return pw(e,t,null,n)};Kt.flushSync=function(e){var t=ss.T,n=Gt.p;try{if(ss.T=null,Gt.p=2,e)return e()}finally{ss.T=t,Gt.p=n,Gt.d.f()}};Kt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Gt.d.C(e,t))};Kt.prefetchDNS=function(e){typeof e=="string"&&Gt.d.D(e)};Kt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,a=Qo(n,t.crossOrigin),i=typeof t.integrity=="string"?t.integrity:void 0,r=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Gt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:a,integrity:i,fetchPriority:r}):n==="script"&&Gt.d.X(e,{crossOrigin:a,integrity:i,fetchPriority:r,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Kt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Qo(t.as,t.crossOrigin);Gt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Gt.d.M(e)};Kt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,a=Qo(n,t.crossOrigin);Gt.d.L(e,n,{crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Kt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Qo(t.as,t.crossOrigin);Gt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Gt.d.m(e)};Kt.requestFormReset=function(e){Gt.d.r(e)};Kt.unstable_batchedUpdates=function(e,t){return e(t)};Kt.useFormState=function(e,t,n){return ss.H.useFormState(e,t,n)};Kt.useFormStatus=function(){return ss.H.useHostTransitionStatus()};Kt.version="19.2.0";function xv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xv)}catch(e){console.error(e)}}xv(),wv.exports=Kt;var yi=wv.exports;const Cu=lv(yi);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Et=gw,Ev=_,bw=yi;function R(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Tv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function jv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ov(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gh(e){if(Gs(e)!==e)throw Error(R(188))}function _w(e){var t=e.alternate;if(!t){if(t=Gs(e),t===null)throw Error(R(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(a=i.return,a!==null){n=a;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return Gh(i),e;if(r===a)return Gh(i),t;r=r.sibling}throw Error(R(188))}if(n.return!==a.return)n=i,a=r;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,a=r;break}if(l===a){s=!0,a=i,n=r;break}l=l.sibling}if(!s){for(l=r.child;l;){if(l===n){s=!0,n=r,a=i;break}if(l===a){s=!0,a=r,n=i;break}l=l.sibling}if(!s)throw Error(R(189))}}if(n.alternate!==a)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?e:t}function Dv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Dv(e),t!==null)return t;e=e.sibling}return null}var nt=Object.assign,ww=Symbol.for("react.element"),ml=Symbol.for("react.transitional.element"),Fr=Symbol.for("react.portal"),Qi=Symbol.for("react.fragment"),Nv=Symbol.for("react.strict_mode"),Au=Symbol.for("react.profiler"),Cv=Symbol.for("react.consumer"),ha=Symbol.for("react.context"),Jd=Symbol.for("react.forward_ref"),Ru=Symbol.for("react.suspense"),Mu=Symbol.for("react.suspense_list"),Pd=Symbol.for("react.memo"),Da=Symbol.for("react.lazy"),ku=Symbol.for("react.activity"),Sw=Symbol.for("react.memo_cache_sentinel"),Kh=Symbol.iterator;function Kr(e){return e===null||typeof e!="object"?null:(e=Kh&&e[Kh]||e["@@iterator"],typeof e=="function"?e:null)}var xw=Symbol.for("react.client.reference");function Uu(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===xw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qi:return"Fragment";case Au:return"Profiler";case Nv:return"StrictMode";case Ru:return"Suspense";case Mu:return"SuspenseList";case ku:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Fr:return"Portal";case ha:return e.displayName||"Context";case Cv:return(e._context.displayName||"Context")+".Consumer";case Jd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pd:return t=e.displayName||null,t!==null?t:Uu(e.type)||"Memo";case Da:t=e._payload,e=e._init;try{return Uu(e(t))}catch{}}return null}var es=Array.isArray,ue=Ev.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ze=bw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bi={pending:!1,data:null,method:null,action:null},zu=[],Ji=-1;function Fn(e){return{current:e}}function Nt(e){0>Ji||(e.current=zu[Ji],zu[Ji]=null,Ji--)}function Je(e,t){Ji++,zu[Ji]=e.current,e.current=t}var Wn=Fn(null),js=Fn(null),$a=Fn(null),io=Fn(null);function ro(e,t){switch(Je($a,t),Je(js,e),Je(Wn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Wm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Wm(t),e=Pp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Nt(Wn),Je(Wn,e)}function gr(){Nt(Wn),Nt(js),Nt($a)}function Lu(e){e.memoizedState!==null&&Je(io,e);var t=Wn.current,n=Pp(t,e.type);t!==n&&(Je(js,e),Je(Wn,n))}function so(e){js.current===e&&(Nt(Wn),Nt(js)),io.current===e&&(Nt(io),Ls._currentValue=bi)}var Dc,Xh;function ui(e){if(Dc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Dc=t&&t[1]||"",Xh=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dc+e+Xh}var Nc=!1;function Cc(e,t){if(!e||Nc)return"";Nc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(m){var h=m}Reflect.construct(e,[],f)}else{try{f.call()}catch(m){h=m}e.call(f.prototype)}}else{try{throw Error()}catch(m){h=m}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(m){if(m&&h&&typeof m.stack=="string")return[m.stack,h.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=a.DetermineComponentFrameRoot(),s=r[0],l=r[1];if(s&&l){var o=s.split(`
`),u=l.split(`
`);for(i=a=0;a<o.length&&!o[a].includes("DetermineComponentFrameRoot");)a++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(a===o.length||i===u.length)for(a=o.length-1,i=u.length-1;1<=a&&0<=i&&o[a]!==u[i];)i--;for(;1<=a&&0<=i;a--,i--)if(o[a]!==u[i]){if(a!==1||i!==1)do if(a--,i--,0>i||o[a]!==u[i]){var d=`
`+o[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=a&&0<=i);break}}}finally{Nc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ui(n):""}function Ew(e,t){switch(e.tag){case 26:case 27:case 5:return ui(e.type);case 16:return ui("Lazy");case 13:return e.child!==t&&t!==null?ui("Suspense Fallback"):ui("Suspense");case 19:return ui("SuspenseList");case 0:case 15:return Cc(e.type,!1);case 11:return Cc(e.type.render,!1);case 1:return Cc(e.type,!0);case 31:return ui("Activity");default:return""}}function Qh(e){try{var t="",n=null;do t+=Ew(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Bu=Object.prototype.hasOwnProperty,Zd=Et.unstable_scheduleCallback,Ac=Et.unstable_cancelCallback,Tw=Et.unstable_shouldYield,jw=Et.unstable_requestPaint,hn=Et.unstable_now,Ow=Et.unstable_getCurrentPriorityLevel,Av=Et.unstable_ImmediatePriority,Rv=Et.unstable_UserBlockingPriority,lo=Et.unstable_NormalPriority,Dw=Et.unstable_LowPriority,Mv=Et.unstable_IdlePriority,Nw=Et.log,Cw=Et.unstable_setDisableYieldValue,Ks=null,mn=null;function za(e){if(typeof Nw=="function"&&Cw(e),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(Ks,e)}catch{}}var gn=Math.clz32?Math.clz32:Mw,Aw=Math.log,Rw=Math.LN2;function Mw(e){return e>>>=0,e===0?32:31-(Aw(e)/Rw|0)|0}var gl=256,vl=262144,yl=4194304;function di(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Jo(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var l=a&134217727;return l!==0?(a=l&~r,a!==0?i=di(a):(s&=l,s!==0?i=di(s):n||(n=l&~e,n!==0&&(i=di(n))))):(l=a&~r,l!==0?i=di(l):s!==0?i=di(s):n||(n=a&~e,n!==0&&(i=di(n)))),i===0?0:t!==0&&t!==i&&!(t&r)&&(r=i&-i,n=t&-t,r>=n||r===32&&(n&4194048)!==0)?t:i}function Xs(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function kw(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kv(){var e=yl;return yl<<=1,!(yl&62914560)&&(yl=4194304),e}function Rc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qs(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Uw(e,t,n,a,i,r){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,u=e.hiddenUpdates;for(n=s&~n;0<n;){var d=31-gn(n),f=1<<d;l[d]=0,o[d]=-1;var h=u[d];if(h!==null)for(u[d]=null,d=0;d<h.length;d++){var m=h[d];m!==null&&(m.lane&=-536870913)}n&=~f}a!==0&&Uv(e,a,0),r!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=r&~(s&~t))}function Uv(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-gn(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function zv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-gn(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}function Lv(e,t){var n=t&-t;return n=n&42?1:Wd(n),n&(e.suspendedLanes|t)?0:n}function Wd(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fd(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Bv(){var e=ze.p;return e!==0?e:(e=window.event,e===void 0?32:l0(e.type))}function Jh(e,t){var n=ze.p;try{return ze.p=e,t()}finally{ze.p=n}}var ti=Math.random().toString(36).slice(2),Ut="__reactFiber$"+ti,nn="__reactProps$"+ti,Cr="__reactContainer$"+ti,Hu="__reactEvents$"+ti,zw="__reactListeners$"+ti,Lw="__reactHandles$"+ti,Ph="__reactResources$"+ti,Js="__reactMarker$"+ti;function ef(e){delete e[Ut],delete e[nn],delete e[Hu],delete e[zw],delete e[Lw]}function Pi(e){var t=e[Ut];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cr]||n[Ut]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ag(e);e!==null;){if(n=e[Ut])return n;e=ag(e)}return t}e=n,n=e.parentNode}return null}function Ar(e){if(e=e[Ut]||e[Cr]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ts(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(R(33))}function sr(e){var t=e[Ph];return t||(t=e[Ph]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Dt(e){e[Js]=!0}var Hv=new Set,qv={};function Ni(e,t){vr(e,t),vr(e+"Capture",t)}function vr(e,t){for(qv[e]=t,e=0;e<t.length;e++)Hv.add(t[e])}var Bw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zh={},Wh={};function Hw(e){return Bu.call(Wh,e)?!0:Bu.call(Zh,e)?!1:Bw.test(e)?Wh[e]=!0:(Zh[e]=!0,!1)}function $l(e,t,n){if(Hw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function pl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ia(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function En(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $v(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qw(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var i=a.get,r=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,r.call(this,s)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qu(e){if(!e._valueTracker){var t=$v(e)?"checked":"value";e._valueTracker=qw(e,t,""+e[t])}}function Iv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=$v(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function oo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var $w=/[\n"\\]/g;function On(e){return e.replace($w,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function $u(e,t,n,a,i,r,s,l){e.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?e.type=s:e.removeAttribute("type"),t!=null?s==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+En(t)):e.value!==""+En(t)&&(e.value=""+En(t)):s!=="submit"&&s!=="reset"||e.removeAttribute("value"),t!=null?Iu(e,s,En(t)):n!=null?Iu(e,s,En(n)):a!=null&&e.removeAttribute("value"),i==null&&r!=null&&(e.defaultChecked=!!r),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+En(l):e.removeAttribute("name")}function Yv(e,t,n,a,i,r,s,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){qu(e);return}n=n!=null?""+En(n):"",t=t!=null?""+En(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}a=a??i,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=l?e.checked:!!a,e.defaultChecked=!!a,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.name=s),qu(e)}function Iu(e,t,n){t==="number"&&oo(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function lr(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+En(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,a&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Vv(e,t,n){if(t!=null&&(t=""+En(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+En(n):""}function Gv(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(R(92));if(es(a)){if(1<a.length)throw Error(R(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=En(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),qu(e)}function yr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Iw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fh(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Iw.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Kv(e,t,n){if(t!=null&&typeof t!="object")throw Error(R(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var i in t)a=t[i],t.hasOwnProperty(i)&&n[i]!==a&&Fh(e,i,a)}else for(var r in t)t.hasOwnProperty(r)&&Fh(e,r,t[r])}function tf(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Il(e){return Vw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ma(){}var Yu=null;function nf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zi=null,or=null;function em(e){var t=Ar(e);if(t&&(e=t.stateNode)){var n=e[nn]||null;e:switch(e=t.stateNode,t.type){case"input":if($u(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+On(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=a[nn]||null;if(!i)throw Error(R(90));$u(a,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Iv(a)}break e;case"textarea":Vv(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&lr(e,!!n.multiple,t,!1)}}}var Mc=!1;function Xv(e,t,n){if(Mc)return e(t,n);Mc=!0;try{var a=e(t);return a}finally{if(Mc=!1,(Zi!==null||or!==null)&&(lc(),Zi&&(t=Zi,e=or,or=Zi=null,em(t),e)))for(t=0;t<e.length;t++)em(e[t])}}function Os(e,t){var n=e.stateNode;if(n===null)return null;var a=n[nn]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(R(231,t,typeof n));return n}var ba=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vu=!1;if(ba)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){Vu=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{Vu=!1}var La=null,af=null,Yl=null;function Qv(){if(Yl)return Yl;var e,t=af,n=t.length,a,i="value"in La?La.value:La.textContent,r=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(a=1;a<=s&&t[n-a]===i[r-a];a++);return Yl=i.slice(e,1<a?1-a:void 0)}function Vl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bl(){return!0}function tm(){return!1}function an(e){function t(n,a,i,r,s){this._reactName=n,this._targetInst=i,this.type=a,this.nativeEvent=r,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?bl:tm,this.isPropagationStopped=tm,this}return nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),t}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Po=an(Ci),Ps=nt({},Ci,{view:0,detail:0}),Gw=an(Ps),kc,Uc,Qr,Zo=nt({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?(kc=e.screenX-Qr.screenX,Uc=e.screenY-Qr.screenY):Uc=kc=0,Qr=e),kc)},movementY:function(e){return"movementY"in e?e.movementY:Uc}}),nm=an(Zo),Kw=nt({},Zo,{dataTransfer:0}),Xw=an(Kw),Qw=nt({},Ps,{relatedTarget:0}),zc=an(Qw),Jw=nt({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),Pw=an(Jw),Zw=nt({},Ci,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ww=an(Zw),Fw=nt({},Ci,{data:0}),am=an(Fw),eS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nS[e])?!!t[e]:!1}function rf(){return aS}var iS=nt({},Ps,{key:function(e){if(e.key){var t=eS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rf,charCode:function(e){return e.type==="keypress"?Vl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rS=an(iS),sS=nt({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),im=an(sS),lS=nt({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rf}),oS=an(lS),cS=nt({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),uS=an(cS),dS=nt({},Zo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fS=an(dS),hS=nt({},Ci,{newState:0,oldState:0}),mS=an(hS),gS=[9,13,27,32],sf=ba&&"CompositionEvent"in window,ls=null;ba&&"documentMode"in document&&(ls=document.documentMode);var vS=ba&&"TextEvent"in window&&!ls,Jv=ba&&(!sf||ls&&8<ls&&11>=ls),rm=" ",sm=!1;function Pv(e,t){switch(e){case"keyup":return gS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wi=!1;function yS(e,t){switch(e){case"compositionend":return Zv(t);case"keypress":return t.which!==32?null:(sm=!0,rm);case"textInput":return e=t.data,e===rm&&sm?null:e;default:return null}}function pS(e,t){if(Wi)return e==="compositionend"||!sf&&Pv(e,t)?(e=Qv(),Yl=af=La=null,Wi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Jv&&t.locale!=="ko"?null:t.data;default:return null}}var bS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bS[e.type]:t==="textarea"}function Wv(e,t,n,a){Zi?or?or.push(a):or=[a]:Zi=a,t=Oo(t,"onChange"),0<t.length&&(n=new Po("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var os=null,Ds=null;function _S(e){Xp(e,0)}function Wo(e){var t=ts(e);if(Iv(t))return e}function om(e,t){if(e==="change")return t}var Fv=!1;if(ba){var Lc;if(ba){var Bc="oninput"in document;if(!Bc){var cm=document.createElement("div");cm.setAttribute("oninput","return;"),Bc=typeof cm.oninput=="function"}Lc=Bc}else Lc=!1;Fv=Lc&&(!document.documentMode||9<document.documentMode)}function um(){os&&(os.detachEvent("onpropertychange",ey),Ds=os=null)}function ey(e){if(e.propertyName==="value"&&Wo(Ds)){var t=[];Wv(t,Ds,e,nf(e)),Xv(_S,t)}}function wS(e,t,n){e==="focusin"?(um(),os=t,Ds=n,os.attachEvent("onpropertychange",ey)):e==="focusout"&&um()}function SS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wo(Ds)}function xS(e,t){if(e==="click")return Wo(t)}function ES(e,t){if(e==="input"||e==="change")return Wo(t)}function TS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yn=typeof Object.is=="function"?Object.is:TS;function Ns(e,t){if(yn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!Bu.call(t,i)||!yn(e[i],t[i]))return!1}return!0}function dm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fm(e,t){var n=dm(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dm(n)}}function ty(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ty(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ny(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=oo(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=oo(e.document)}return t}function lf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var jS=ba&&"documentMode"in document&&11>=document.documentMode,Fi=null,Gu=null,cs=null,Ku=!1;function hm(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ku||Fi==null||Fi!==oo(a)||(a=Fi,"selectionStart"in a&&lf(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),cs&&Ns(cs,a)||(cs=a,a=Oo(Gu,"onSelect"),0<a.length&&(t=new Po("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=Fi)))}function li(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var er={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},Hc={},ay={};ba&&(ay=document.createElement("div").style,"AnimationEvent"in window||(delete er.animationend.animation,delete er.animationiteration.animation,delete er.animationstart.animation),"TransitionEvent"in window||delete er.transitionend.transition);function Ai(e){if(Hc[e])return Hc[e];if(!er[e])return e;var t=er[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ay)return Hc[e]=t[n];return e}var iy=Ai("animationend"),ry=Ai("animationiteration"),sy=Ai("animationstart"),OS=Ai("transitionrun"),DS=Ai("transitionstart"),NS=Ai("transitioncancel"),ly=Ai("transitionend"),oy=new Map,Xu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xu.push("scrollEnd");function Yn(e,t){oy.set(e,t),Ni(t,[e])}var co=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Sn=[],tr=0,of=0;function Fo(){for(var e=tr,t=of=tr=0;t<e;){var n=Sn[t];Sn[t++]=null;var a=Sn[t];Sn[t++]=null;var i=Sn[t];Sn[t++]=null;var r=Sn[t];if(Sn[t++]=null,a!==null&&i!==null){var s=a.pending;s===null?i.next=i:(i.next=s.next,s.next=i),a.pending=i}r!==0&&cy(n,i,r)}}function ec(e,t,n,a){Sn[tr++]=e,Sn[tr++]=t,Sn[tr++]=n,Sn[tr++]=a,of|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function cf(e,t,n,a){return ec(e,t,n,a),uo(e)}function Ri(e,t){return ec(e,null,null,t),uo(e)}function cy(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var i=!1,r=e.return;r!==null;)r.childLanes|=n,a=r.alternate,a!==null&&(a.childLanes|=n),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(i=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,i&&t!==null&&(i=31-gn(n),e=r.hiddenUpdates,a=e[i],a===null?e[i]=[t]:a.push(t),t.lane=n|536870912),r):null}function uo(e){if(50<ps)throw ps=0,md=null,Error(R(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var nr={};function CS(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(e,t,n,a){return new CS(e,t,n,a)}function uf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function va(e,t){var n=e.alternate;return n===null?(n=cn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function uy(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Gl(e,t,n,a,i,r){var s=0;if(a=e,typeof e=="function")uf(e)&&(s=1);else if(typeof e=="string")s=Ux(e,n,Wn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ku:return e=cn(31,n,t,i),e.elementType=ku,e.lanes=r,e;case Qi:return _i(n.children,i,r,t);case Nv:s=8,i|=24;break;case Au:return e=cn(12,n,t,i|2),e.elementType=Au,e.lanes=r,e;case Ru:return e=cn(13,n,t,i),e.elementType=Ru,e.lanes=r,e;case Mu:return e=cn(19,n,t,i),e.elementType=Mu,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ha:s=10;break e;case Cv:s=9;break e;case Jd:s=11;break e;case Pd:s=14;break e;case Da:s=16,a=null;break e}s=29,n=Error(R(130,e===null?"null":typeof e,"")),a=null}return t=cn(s,n,t,i),t.elementType=e,t.type=a,t.lanes=r,t}function _i(e,t,n,a){return e=cn(7,e,a,t),e.lanes=n,e}function qc(e,t,n){return e=cn(6,e,null,t),e.lanes=n,e}function dy(e){var t=cn(18,null,null,0);return t.stateNode=e,t}function $c(e,t,n){return t=cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var mm=new WeakMap;function Dn(e,t){if(typeof e=="object"&&e!==null){var n=mm.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Qh(t)},mm.set(e,t),t)}return{value:e,source:t,stack:Qh(t)}}var ar=[],ir=0,fo=null,Cs=0,Tn=[],jn=0,Pa=null,Jn=1,Pn="";function da(e,t){ar[ir++]=Cs,ar[ir++]=fo,fo=e,Cs=t}function fy(e,t,n){Tn[jn++]=Jn,Tn[jn++]=Pn,Tn[jn++]=Pa,Pa=e;var a=Jn;e=Pn;var i=32-gn(a)-1;a&=~(1<<i),n+=1;var r=32-gn(t)+i;if(30<r){var s=i-i%5;r=(a&(1<<s)-1).toString(32),a>>=s,i-=s,Jn=1<<32-gn(t)+i|n<<i|a,Pn=r+e}else Jn=1<<r|n<<i|a,Pn=e}function df(e){e.return!==null&&(da(e,1),fy(e,1,0))}function ff(e){for(;e===fo;)fo=ar[--ir],ar[ir]=null,Cs=ar[--ir],ar[ir]=null;for(;e===Pa;)Pa=Tn[--jn],Tn[jn]=null,Pn=Tn[--jn],Tn[jn]=null,Jn=Tn[--jn],Tn[jn]=null}function hy(e,t){Tn[jn++]=Jn,Tn[jn++]=Pn,Tn[jn++]=Pa,Jn=t.id,Pn=t.overflow,Pa=e}var zt=null,et=null,Re=!1,Ia=null,Nn=!1,Qu=Error(R(519));function Za(e){var t=Error(R(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw As(Dn(t,e)),Qu}function gm(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Ut]=e,t[nn]=a,n){case"dialog":Te("cancel",t),Te("close",t);break;case"iframe":case"object":case"embed":Te("load",t);break;case"video":case"audio":for(n=0;n<Us.length;n++)Te(Us[n],t);break;case"source":Te("error",t);break;case"img":case"image":case"link":Te("error",t),Te("load",t);break;case"details":Te("toggle",t);break;case"input":Te("invalid",t),Yv(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Te("invalid",t);break;case"textarea":Te("invalid",t),Gv(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||Jp(t.textContent,n)?(a.popover!=null&&(Te("beforetoggle",t),Te("toggle",t)),a.onScroll!=null&&Te("scroll",t),a.onScrollEnd!=null&&Te("scrollend",t),a.onClick!=null&&(t.onclick=ma),t=!0):t=!1,t||Za(e,!0)}function vm(e){for(zt=e.return;zt;)switch(zt.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:zt=zt.return}}function zi(e){if(e!==zt)return!1;if(!Re)return vm(e),Re=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||bd(e.type,e.memoizedProps)),n=!n),n&&et&&Za(e),vm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));et=ng(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));et=ng(e)}else t===27?(t=et,ni(e.type)?(e=xd,xd=null,et=e):et=t):et=zt?An(e.stateNode.nextSibling):null;return!0}function Ei(){et=zt=null,Re=!1}function Ic(){var e=Ia;return e!==null&&(en===null?en=e:en.push.apply(en,e),Ia=null),e}function As(e){Ia===null?Ia=[e]:Ia.push(e)}var Ju=Fn(null),Mi=null,ga=null;function Aa(e,t,n){Je(Ju,t._currentValue),t._currentValue=n}function ya(e){e._currentValue=Ju.current,Nt(Ju)}function Pu(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Zu(e,t,n,a){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var r=i.dependencies;if(r!==null){var s=i.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=i;for(var o=0;o<t.length;o++)if(l.context===t[o]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Pu(r.return,n,e),a||(s=null);break e}r=l.next}}else if(i.tag===18){if(s=i.return,s===null)throw Error(R(341));s.lanes|=n,r=s.alternate,r!==null&&(r.lanes|=n),Pu(s,n,e),s=null}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}}function Rr(e,t,n,a){e=null;for(var i=t,r=!1;i!==null;){if(!r){if(i.flags&524288)r=!0;else if(i.flags&262144)break}if(i.tag===10){var s=i.alternate;if(s===null)throw Error(R(387));if(s=s.memoizedProps,s!==null){var l=i.type;yn(i.pendingProps.value,s.value)||(e!==null?e.push(l):e=[l])}}else if(i===io.current){if(s=i.alternate,s===null)throw Error(R(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Ls):e=[Ls])}i=i.return}e!==null&&Zu(t,e,n,a),t.flags|=262144}function ho(e){for(e=e.firstContext;e!==null;){if(!yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ti(e){Mi=e,ga=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Lt(e){return my(Mi,e)}function _l(e,t){return Mi===null&&Ti(e),my(e,t)}function my(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ga===null){if(e===null)throw Error(R(308));ga=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ga=ga.next=t;return n}var AS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},RS=Et.unstable_scheduleCallback,MS=Et.unstable_NormalPriority,pt={$$typeof:ha,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hf(){return{controller:new AS,data:new Map,refCount:0}}function Zs(e){e.refCount--,e.refCount===0&&RS(MS,function(){e.controller.abort()})}var us=null,Wu=0,pr=0,cr=null;function kS(e,t){if(us===null){var n=us=[];Wu=0,pr=Bf(),cr={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Wu++,t.then(ym,ym),t}function ym(){if(--Wu===0&&us!==null){cr!==null&&(cr.status="fulfilled");var e=us;us=null,pr=0,cr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function US(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var i=0;i<n.length;i++)(0,n[i])(t)},function(i){for(a.status="rejected",a.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),a}var pm=ue.S;ue.S=function(e,t){Dp=hn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&kS(e,t),pm!==null&&pm(e,t)};var wi=Fn(null);function mf(){var e=wi.current;return e!==null?e:Xe.pooledCache}function Kl(e,t){t===null?Je(wi,wi.current):Je(wi,t.pool)}function gy(){var e=mf();return e===null?null:{parent:pt._currentValue,pool:e}}var Mr=Error(R(460)),gf=Error(R(474)),tc=Error(R(542)),mo={then:function(){}};function bm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function vy(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ma,ma),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,wm(e),e;default:if(typeof t.status=="string")t.then(ma,ma);else{if(e=Xe,e!==null&&100<e.shellSuspendCounter)throw Error(R(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=a}},function(a){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,wm(e),e}throw Si=t,Mr}}function fi(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Si=n,Mr):n}}var Si=null;function _m(){if(Si===null)throw Error(R(459));var e=Si;return Si=null,e}function wm(e){if(e===Mr||e===tc)throw Error(R(483))}var ur=null,Rs=0;function wl(e){var t=Rs;return Rs+=1,ur===null&&(ur=[]),vy(ur,e,t)}function Jr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Sl(e,t){throw t.$$typeof===ww?Error(R(525)):(e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function yy(e){function t(y,g){if(e){var p=y.deletions;p===null?(y.deletions=[g],y.flags|=16):p.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function a(y){for(var g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(y,g){return y=va(y,g),y.index=0,y.sibling=null,y}function r(y,g,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<g?(y.flags|=67108866,g):p):(y.flags|=67108866,g)):(y.flags|=1048576,g)}function s(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function l(y,g,p,S){return g===null||g.tag!==6?(g=qc(p,y.mode,S),g.return=y,g):(g=i(g,p),g.return=y,g)}function o(y,g,p,S){var E=p.type;return E===Qi?d(y,g,p.props.children,S,p.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Da&&fi(E)===g.type)?(g=i(g,p.props),Jr(g,p),g.return=y,g):(g=Gl(p.type,p.key,p.props,null,y.mode,S),Jr(g,p),g.return=y,g)}function u(y,g,p,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==p.containerInfo||g.stateNode.implementation!==p.implementation?(g=$c(p,y.mode,S),g.return=y,g):(g=i(g,p.children||[]),g.return=y,g)}function d(y,g,p,S,E){return g===null||g.tag!==7?(g=_i(p,y.mode,S,E),g.return=y,g):(g=i(g,p),g.return=y,g)}function f(y,g,p){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=qc(""+g,y.mode,p),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ml:return p=Gl(g.type,g.key,g.props,null,y.mode,p),Jr(p,g),p.return=y,p;case Fr:return g=$c(g,y.mode,p),g.return=y,g;case Da:return g=fi(g),f(y,g,p)}if(es(g)||Kr(g))return g=_i(g,y.mode,p,null),g.return=y,g;if(typeof g.then=="function")return f(y,wl(g),p);if(g.$$typeof===ha)return f(y,_l(y,g),p);Sl(y,g)}return null}function h(y,g,p,S){var E=g!==null?g.key:null;if(typeof p=="string"&&p!==""||typeof p=="number"||typeof p=="bigint")return E!==null?null:l(y,g,""+p,S);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ml:return p.key===E?o(y,g,p,S):null;case Fr:return p.key===E?u(y,g,p,S):null;case Da:return p=fi(p),h(y,g,p,S)}if(es(p)||Kr(p))return E!==null?null:d(y,g,p,S,null);if(typeof p.then=="function")return h(y,g,wl(p),S);if(p.$$typeof===ha)return h(y,g,_l(y,p),S);Sl(y,p)}return null}function m(y,g,p,S,E){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return y=y.get(p)||null,l(g,y,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ml:return y=y.get(S.key===null?p:S.key)||null,o(g,y,S,E);case Fr:return y=y.get(S.key===null?p:S.key)||null,u(g,y,S,E);case Da:return S=fi(S),m(y,g,p,S,E)}if(es(S)||Kr(S))return y=y.get(p)||null,d(g,y,S,E,null);if(typeof S.then=="function")return m(y,g,p,wl(S),E);if(S.$$typeof===ha)return m(y,g,p,_l(g,S),E);Sl(g,S)}return null}function v(y,g,p,S){for(var E=null,O=null,x=g,T=g=0,N=null;x!==null&&T<p.length;T++){x.index>T?(N=x,x=null):N=x.sibling;var D=h(y,x,p[T],S);if(D===null){x===null&&(x=N);break}e&&x&&D.alternate===null&&t(y,x),g=r(D,g,T),O===null?E=D:O.sibling=D,O=D,x=N}if(T===p.length)return n(y,x),Re&&da(y,T),E;if(x===null){for(;T<p.length;T++)x=f(y,p[T],S),x!==null&&(g=r(x,g,T),O===null?E=x:O.sibling=x,O=x);return Re&&da(y,T),E}for(x=a(x);T<p.length;T++)N=m(x,y,T,p[T],S),N!==null&&(e&&N.alternate!==null&&x.delete(N.key===null?T:N.key),g=r(N,g,T),O===null?E=N:O.sibling=N,O=N);return e&&x.forEach(function(k){return t(y,k)}),Re&&da(y,T),E}function b(y,g,p,S){if(p==null)throw Error(R(151));for(var E=null,O=null,x=g,T=g=0,N=null,D=p.next();x!==null&&!D.done;T++,D=p.next()){x.index>T?(N=x,x=null):N=x.sibling;var k=h(y,x,D.value,S);if(k===null){x===null&&(x=N);break}e&&x&&k.alternate===null&&t(y,x),g=r(k,g,T),O===null?E=k:O.sibling=k,O=k,x=N}if(D.done)return n(y,x),Re&&da(y,T),E;if(x===null){for(;!D.done;T++,D=p.next())D=f(y,D.value,S),D!==null&&(g=r(D,g,T),O===null?E=D:O.sibling=D,O=D);return Re&&da(y,T),E}for(x=a(x);!D.done;T++,D=p.next())D=m(x,y,T,D.value,S),D!==null&&(e&&D.alternate!==null&&x.delete(D.key===null?T:D.key),g=r(D,g,T),O===null?E=D:O.sibling=D,O=D);return e&&x.forEach(function(C){return t(y,C)}),Re&&da(y,T),E}function w(y,g,p,S){if(typeof p=="object"&&p!==null&&p.type===Qi&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case ml:e:{for(var E=p.key;g!==null;){if(g.key===E){if(E=p.type,E===Qi){if(g.tag===7){n(y,g.sibling),S=i(g,p.props.children),S.return=y,y=S;break e}}else if(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Da&&fi(E)===g.type){n(y,g.sibling),S=i(g,p.props),Jr(S,p),S.return=y,y=S;break e}n(y,g);break}else t(y,g);g=g.sibling}p.type===Qi?(S=_i(p.props.children,y.mode,S,p.key),S.return=y,y=S):(S=Gl(p.type,p.key,p.props,null,y.mode,S),Jr(S,p),S.return=y,y=S)}return s(y);case Fr:e:{for(E=p.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===p.containerInfo&&g.stateNode.implementation===p.implementation){n(y,g.sibling),S=i(g,p.children||[]),S.return=y,y=S;break e}else{n(y,g);break}else t(y,g);g=g.sibling}S=$c(p,y.mode,S),S.return=y,y=S}return s(y);case Da:return p=fi(p),w(y,g,p,S)}if(es(p))return v(y,g,p,S);if(Kr(p)){if(E=Kr(p),typeof E!="function")throw Error(R(150));return p=E.call(p),b(y,g,p,S)}if(typeof p.then=="function")return w(y,g,wl(p),S);if(p.$$typeof===ha)return w(y,g,_l(y,p),S);Sl(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"||typeof p=="bigint"?(p=""+p,g!==null&&g.tag===6?(n(y,g.sibling),S=i(g,p),S.return=y,y=S):(n(y,g),S=qc(p,y.mode,S),S.return=y,y=S),s(y)):n(y,g)}return function(y,g,p,S){try{Rs=0;var E=w(y,g,p,S);return ur=null,E}catch(x){if(x===Mr||x===tc)throw x;var O=cn(29,x,null,y.mode);return O.lanes=S,O.return=y,O}finally{}}}var ji=yy(!0),py=yy(!1),Na=!1;function vf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ya(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Va(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Ue&2){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,t=uo(e),cy(e,null,n),t}return ec(e,a,t,n),uo(e)}function ds(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,zv(e,n)}}function Yc(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?i=r=s:r=r.next=s,n=n.next}while(n!==null);r===null?i=r=t:r=r.next=t}else i=r=t;n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ed=!1;function fs(){if(ed){var e=cr;if(e!==null)throw e}}function hs(e,t,n,a){ed=!1;var i=e.updateQueue;Na=!1;var r=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var o=l,u=o.next;o.next=null,s===null?r=u:s.next=u,s=o;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==s&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=o))}if(r!==null){var f=i.baseState;s=0,d=u=o=null,l=r;do{var h=l.lane&-536870913,m=h!==l.lane;if(m?(Ne&h)===h:(a&h)===h){h!==0&&h===pr&&(ed=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var v=e,b=l;h=t;var w=n;switch(b.tag){case 1:if(v=b.payload,typeof v=="function"){f=v.call(w,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,h=typeof v=="function"?v.call(w,f,h):v,h==null)break e;f=nt({},f,h);break e;case 2:Na=!0}}h=l.callback,h!==null&&(e.flags|=64,m&&(e.flags|=8192),m=i.callbacks,m===null?i.callbacks=[h]:m.push(h))}else m={lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,o=f):d=d.next=m,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);d===null&&(o=f),i.baseState=o,i.firstBaseUpdate=u,i.lastBaseUpdate=d,r===null&&(i.shared.lanes=0),Fa|=s,e.lanes=s,e.memoizedState=f}}function by(e,t){if(typeof e!="function")throw Error(R(191,e));e.call(t)}function _y(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)by(n[e],t)}var br=Fn(null),go=Fn(0);function Sm(e,t){e=xa,Je(go,e),Je(br,t),xa=e|t.baseLanes}function td(){Je(go,xa),Je(br,br.current)}function yf(){xa=go.current,Nt(br),Nt(go)}var pn=Fn(null),Cn=null;function Ra(e){var t=e.alternate;Je(dt,dt.current&1),Je(pn,e),Cn===null&&(t===null||br.current!==null||t.memoizedState!==null)&&(Cn=e)}function nd(e){Je(dt,dt.current),Je(pn,e),Cn===null&&(Cn=e)}function wy(e){e.tag===22?(Je(dt,dt.current),Je(pn,e),Cn===null&&(Cn=e)):Ma()}function Ma(){Je(dt,dt.current),Je(pn,pn.current)}function on(e){Nt(pn),Cn===e&&(Cn=null),Nt(dt)}var dt=Fn(0);function vo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||wd(n)||Sd(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _a=0,ye=null,Ye=null,vt=null,yo=!1,dr=!1,Oi=!1,po=0,Ms=0,fr=null,zS=0;function lt(){throw Error(R(321))}function pf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!yn(e[n],t[n]))return!1;return!0}function bf(e,t,n,a,i,r){return _a=r,ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ue.H=e===null||e.memoizedState===null?Wy:Cf,Oi=!1,r=n(a,i),Oi=!1,dr&&(r=xy(t,n,a,i)),Sy(e),r}function Sy(e){ue.H=ks;var t=Ye!==null&&Ye.next!==null;if(_a=0,vt=Ye=ye=null,yo=!1,Ms=0,fr=null,t)throw Error(R(300));e===null||bt||(e=e.dependencies,e!==null&&ho(e)&&(bt=!0))}function xy(e,t,n,a){ye=e;var i=0;do{if(dr&&(fr=null),Ms=0,dr=!1,25<=i)throw Error(R(301));if(i+=1,vt=Ye=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}ue.H=Fy,r=t(n,a)}while(dr);return r}function LS(){var e=ue.H,t=e.useState()[0];return t=typeof t.then=="function"?Ws(t):t,e=e.useState()[0],(Ye!==null?Ye.memoizedState:null)!==e&&(ye.flags|=1024),t}function _f(){var e=po!==0;return po=0,e}function wf(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Sf(e){if(yo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}yo=!1}_a=0,vt=Ye=ye=null,dr=!1,Ms=po=0,fr=null}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?ye.memoizedState=vt=e:vt=vt.next=e,vt}function ft(){if(Ye===null){var e=ye.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=vt===null?ye.memoizedState:vt.next;if(t!==null)vt=t,Ye=e;else{if(e===null)throw ye.alternate===null?Error(R(467)):Error(R(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},vt===null?ye.memoizedState=vt=e:vt=vt.next=e}return vt}function nc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ws(e){var t=Ms;return Ms+=1,fr===null&&(fr=[]),e=vy(fr,e,t),t=ye,(vt===null?t.memoizedState:vt.next)===null&&(t=t.alternate,ue.H=t===null||t.memoizedState===null?Wy:Cf),e}function ac(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ws(e);if(e.$$typeof===ha)return Lt(e)}throw Error(R(438,String(e)))}function xf(e){var t=null,n=ye.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=ye.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=nc(),ye.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=Sw;return t.index++,n}function wa(e,t){return typeof t=="function"?t(e):t}function Xl(e){var t=ft();return Ef(t,Ye,e)}function Ef(e,t,n){var a=e.queue;if(a===null)throw Error(R(311));a.lastRenderedReducer=n;var i=e.baseQueue,r=a.pending;if(r!==null){if(i!==null){var s=i.next;i.next=r.next,r.next=s}t.baseQueue=i=r,a.pending=null}if(r=e.baseState,i===null)e.memoizedState=r;else{t=i.next;var l=s=null,o=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(Ne&f)===f:(_a&f)===f){var h=u.revertLane;if(h===0)o!==null&&(o=o.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===pr&&(d=!0);else if((_a&h)===h){u=u.next,h===pr&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(l=o=f,s=r):o=o.next=f,ye.lanes|=h,Fa|=h;f=u.action,Oi&&n(r,f),r=u.hasEagerState?u.eagerState:n(r,f)}else h={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(l=o=h,s=r):o=o.next=h,ye.lanes|=f,Fa|=f;u=u.next}while(u!==null&&u!==t);if(o===null?s=r:o.next=l,!yn(r,e.memoizedState)&&(bt=!0,d&&(n=cr,n!==null)))throw n;e.memoizedState=r,e.baseState=s,e.baseQueue=o,a.lastRenderedState=r}return i===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Vc(e){var t=ft(),n=t.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,r=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do r=e(r,s.action),s=s.next;while(s!==i);yn(r,t.memoizedState)||(bt=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),n.lastRenderedState=r}return[r,a]}function Ey(e,t,n){var a=ye,i=ft(),r=Re;if(r){if(n===void 0)throw Error(R(407));n=n()}else n=t();var s=!yn((Ye||i).memoizedState,n);if(s&&(i.memoizedState=n,bt=!0),i=i.queue,Tf(Oy.bind(null,a,i,e),[e]),i.getSnapshot!==t||s||vt!==null&&vt.memoizedState.tag&1){if(a.flags|=2048,_r(9,{destroy:void 0},jy.bind(null,a,i,n,t),null),Xe===null)throw Error(R(349));r||_a&127||Ty(a,t,n)}return n}function Ty(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ye.updateQueue,t===null?(t=nc(),ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function jy(e,t,n,a){t.value=n,t.getSnapshot=a,Dy(t)&&Ny(e)}function Oy(e,t,n){return n(function(){Dy(t)&&Ny(e)})}function Dy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!yn(e,n)}catch{return!0}}function Ny(e){var t=Ri(e,2);t!==null&&tn(t,e,2)}function ad(e){var t=Yt();if(typeof e=="function"){var n=e;if(e=n(),Oi){za(!0);try{n()}finally{za(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t}function Cy(e,t,n,a){return e.baseState=n,Ef(e,Ye,typeof a=="function"?a:wa)}function BS(e,t,n,a,i){if(rc(e))throw Error(R(485));if(e=t.action,e!==null){var r={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){r.listeners.push(s)}};ue.T!==null?n(!0):r.isTransition=!1,a(r),n=t.pending,n===null?(r.next=t.pending=r,Ay(t,r)):(r.next=n.next,t.pending=n.next=r)}}function Ay(e,t){var n=t.action,a=t.payload,i=e.state;if(t.isTransition){var r=ue.T,s={};ue.T=s;try{var l=n(i,a),o=ue.S;o!==null&&o(s,l),xm(e,t,l)}catch(u){id(e,t,u)}finally{r!==null&&s.types!==null&&(r.types=s.types),ue.T=r}}else try{r=n(i,a),xm(e,t,r)}catch(u){id(e,t,u)}}function xm(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Em(e,t,a)},function(a){return id(e,t,a)}):Em(e,t,n)}function Em(e,t,n){t.status="fulfilled",t.value=n,Ry(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ay(e,n)))}function id(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,Ry(t),t=t.next;while(t!==a)}e.action=null}function Ry(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function My(e,t){return t}function Tm(e,t){if(Re){var n=Xe.formState;if(n!==null){e:{var a=ye;if(Re){if(et){t:{for(var i=et,r=Nn;i.nodeType!==8;){if(!r){i=null;break t}if(i=An(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){et=An(i.nextSibling),a=i.data==="F!";break e}}Za(a)}a=!1}a&&(t=n[0])}}return n=Yt(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:My,lastRenderedState:t},n.queue=a,n=Jy.bind(null,ye,a),a.dispatch=n,a=ad(!1),r=Nf.bind(null,ye,!1,a.queue),a=Yt(),i={state:t,dispatch:null,action:e,pending:null},a.queue=i,n=BS.bind(null,ye,i,r,n),i.dispatch=n,a.memoizedState=e,[t,n,!1]}function jm(e){var t=ft();return ky(t,Ye,e)}function ky(e,t,n){if(t=Ef(e,t,My)[0],e=Xl(wa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Ws(t)}catch(s){throw s===Mr?tc:s}else a=t;t=ft();var i=t.queue,r=i.dispatch;return n!==t.memoizedState&&(ye.flags|=2048,_r(9,{destroy:void 0},HS.bind(null,i,n),null)),[a,r,e]}function HS(e,t){e.action=t}function Om(e){var t=ft(),n=Ye;if(n!==null)return ky(t,n,e);ft(),t=t.memoizedState,n=ft();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function _r(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=ye.updateQueue,t===null&&(t=nc(),ye.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Uy(){return ft().memoizedState}function Ql(e,t,n,a){var i=Yt();ye.flags|=e,i.memoizedState=_r(1|t,{destroy:void 0},n,a===void 0?null:a)}function ic(e,t,n,a){var i=ft();a=a===void 0?null:a;var r=i.memoizedState.inst;Ye!==null&&a!==null&&pf(a,Ye.memoizedState.deps)?i.memoizedState=_r(t,r,n,a):(ye.flags|=e,i.memoizedState=_r(1|t,r,n,a))}function Dm(e,t){Ql(8390656,8,e,t)}function Tf(e,t){ic(2048,8,e,t)}function qS(e){ye.flags|=4;var t=ye.updateQueue;if(t===null)t=nc(),ye.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function zy(e){var t=ft().memoizedState;return qS({ref:t,nextImpl:e}),function(){if(Ue&2)throw Error(R(440));return t.impl.apply(void 0,arguments)}}function Ly(e,t){return ic(4,2,e,t)}function By(e,t){return ic(4,4,e,t)}function Hy(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qy(e,t,n){n=n!=null?n.concat([e]):null,ic(4,4,Hy.bind(null,t,e),n)}function jf(){}function $y(e,t){var n=ft();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&pf(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Iy(e,t){var n=ft();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&pf(t,a[1]))return a[0];if(a=e(),Oi){za(!0);try{e()}finally{za(!1)}}return n.memoizedState=[a,t],a}function Of(e,t,n){return n===void 0||_a&1073741824&&!(Ne&261930)?e.memoizedState=t:(e.memoizedState=n,e=Cp(),ye.lanes|=e,Fa|=e,n)}function Yy(e,t,n,a){return yn(n,t)?n:br.current!==null?(e=Of(e,n,a),yn(e,t)||(bt=!0),e):!(_a&42)||_a&1073741824&&!(Ne&261930)?(bt=!0,e.memoizedState=n):(e=Cp(),ye.lanes|=e,Fa|=e,t)}function Vy(e,t,n,a,i){var r=ze.p;ze.p=r!==0&&8>r?r:8;var s=ue.T,l={};ue.T=l,Nf(e,!1,t,n);try{var o=i(),u=ue.S;if(u!==null&&u(l,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=US(o,a);ms(e,t,d,vn(e))}else ms(e,t,a,vn(e))}catch(f){ms(e,t,{then:function(){},status:"rejected",reason:f},vn())}finally{ze.p=r,s!==null&&l.types!==null&&(s.types=l.types),ue.T=s}}function $S(){}function rd(e,t,n,a){if(e.tag!==5)throw Error(R(476));var i=Gy(e).queue;Vy(e,i,t,bi,n===null?$S:function(){return Ky(e),n(a)})}function Gy(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:bi,baseState:bi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:bi},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ky(e){var t=Gy(e);t.next===null&&(t=e.alternate.memoizedState),ms(e,t.next.queue,{},vn())}function Df(){return Lt(Ls)}function Xy(){return ft().memoizedState}function Qy(){return ft().memoizedState}function IS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=vn();e=Ya(n);var a=Va(t,e,n);a!==null&&(tn(a,t,n),ds(a,t,n)),t={cache:hf()},e.payload=t;return}t=t.return}}function YS(e,t,n){var a=vn();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},rc(e)?Py(t,n):(n=cf(e,t,n,a),n!==null&&(tn(n,e,a),Zy(n,t,a)))}function Jy(e,t,n){var a=vn();ms(e,t,n,a)}function ms(e,t,n,a){var i={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(rc(e))Py(t,i);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var s=t.lastRenderedState,l=r(s,n);if(i.hasEagerState=!0,i.eagerState=l,yn(l,s))return ec(e,t,i,0),Xe===null&&Fo(),!1}catch{}finally{}if(n=cf(e,t,i,a),n!==null)return tn(n,e,a),Zy(n,t,a),!0}return!1}function Nf(e,t,n,a){if(a={lane:2,revertLane:Bf(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},rc(e)){if(t)throw Error(R(479))}else t=cf(e,n,a,2),t!==null&&tn(t,e,2)}function rc(e){var t=e.alternate;return e===ye||t!==null&&t===ye}function Py(e,t){dr=yo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zy(e,t,n){if(n&4194048){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,zv(e,n)}}var ks={readContext:Lt,use:ac,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt};ks.useEffectEvent=lt;var Wy={readContext:Lt,use:ac,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:Lt,useEffect:Dm,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ql(4194308,4,Hy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ql(4194308,4,e,t)},useInsertionEffect:function(e,t){Ql(4,2,e,t)},useMemo:function(e,t){var n=Yt();t=t===void 0?null:t;var a=e();if(Oi){za(!0);try{e()}finally{za(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=Yt();if(n!==void 0){var i=n(t);if(Oi){za(!0);try{n(t)}finally{za(!1)}}}else i=t;return a.memoizedState=a.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=YS.bind(null,ye,e),[a.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:function(e){e=ad(e);var t=e.queue,n=Jy.bind(null,ye,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:jf,useDeferredValue:function(e,t){var n=Yt();return Of(n,e,t)},useTransition:function(){var e=ad(!1);return e=Vy.bind(null,ye,e.queue,!0,!1),Yt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=ye,i=Yt();if(Re){if(n===void 0)throw Error(R(407));n=n()}else{if(n=t(),Xe===null)throw Error(R(349));Ne&127||Ty(a,t,n)}i.memoizedState=n;var r={value:n,getSnapshot:t};return i.queue=r,Dm(Oy.bind(null,a,r,e),[e]),a.flags|=2048,_r(9,{destroy:void 0},jy.bind(null,a,r,n,t),null),n},useId:function(){var e=Yt(),t=Xe.identifierPrefix;if(Re){var n=Pn,a=Jn;n=(a&~(1<<32-gn(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=po++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=zS++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Df,useFormState:Tm,useActionState:Tm,useOptimistic:function(e){var t=Yt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Nf.bind(null,ye,!0,n),n.dispatch=t,[e,t]},useMemoCache:xf,useCacheRefresh:function(){return Yt().memoizedState=IS.bind(null,ye)},useEffectEvent:function(e){var t=Yt(),n={impl:e};return t.memoizedState=n,function(){if(Ue&2)throw Error(R(440));return n.impl.apply(void 0,arguments)}}},Cf={readContext:Lt,use:ac,useCallback:$y,useContext:Lt,useEffect:Tf,useImperativeHandle:qy,useInsertionEffect:Ly,useLayoutEffect:By,useMemo:Iy,useReducer:Xl,useRef:Uy,useState:function(){return Xl(wa)},useDebugValue:jf,useDeferredValue:function(e,t){var n=ft();return Yy(n,Ye.memoizedState,e,t)},useTransition:function(){var e=Xl(wa)[0],t=ft().memoizedState;return[typeof e=="boolean"?e:Ws(e),t]},useSyncExternalStore:Ey,useId:Xy,useHostTransitionStatus:Df,useFormState:jm,useActionState:jm,useOptimistic:function(e,t){var n=ft();return Cy(n,Ye,e,t)},useMemoCache:xf,useCacheRefresh:Qy};Cf.useEffectEvent=zy;var Fy={readContext:Lt,use:ac,useCallback:$y,useContext:Lt,useEffect:Tf,useImperativeHandle:qy,useInsertionEffect:Ly,useLayoutEffect:By,useMemo:Iy,useReducer:Vc,useRef:Uy,useState:function(){return Vc(wa)},useDebugValue:jf,useDeferredValue:function(e,t){var n=ft();return Ye===null?Of(n,e,t):Yy(n,Ye.memoizedState,e,t)},useTransition:function(){var e=Vc(wa)[0],t=ft().memoizedState;return[typeof e=="boolean"?e:Ws(e),t]},useSyncExternalStore:Ey,useId:Xy,useHostTransitionStatus:Df,useFormState:Om,useActionState:Om,useOptimistic:function(e,t){var n=ft();return Ye!==null?Cy(n,Ye,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:xf,useCacheRefresh:Qy};Fy.useEffectEvent=zy;function Gc(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:nt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var sd={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=vn(),i=Ya(a);i.payload=t,n!=null&&(i.callback=n),t=Va(e,i,a),t!==null&&(tn(t,e,a),ds(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=vn(),i=Ya(a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Va(e,i,a),t!==null&&(tn(t,e,a),ds(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=vn(),a=Ya(n);a.tag=2,t!=null&&(a.callback=t),t=Va(e,a,n),t!==null&&(tn(t,e,n),ds(t,e,n))}};function Nm(e,t,n,a,i,r,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,r,s):t.prototype&&t.prototype.isPureReactComponent?!Ns(n,a)||!Ns(i,r):!0}function Cm(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&sd.enqueueReplaceState(t,t.state,null)}function Di(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=nt({},n));for(var i in e)n[i]===void 0&&(n[i]=e[i])}return n}function ep(e){co(e)}function tp(e){console.error(e)}function np(e){co(e)}function bo(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Am(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function ld(e,t,n){return n=Ya(n),n.tag=3,n.payload={element:null},n.callback=function(){bo(e,t)},n}function ap(e){return e=Ya(e),e.tag=3,e}function ip(e,t,n,a){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=a.value;e.payload=function(){return i(r)},e.callback=function(){Am(t,n,a)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){Am(t,n,a),typeof i!="function"&&(Ga===null?Ga=new Set([this]):Ga.add(this));var l=a.stack;this.componentDidCatch(a.value,{componentStack:l!==null?l:""})})}function VS(e,t,n,a,i){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&Rr(t,n,i,!0),n=pn.current,n!==null){switch(n.tag){case 31:case 13:return Cn===null?Eo():n.alternate===null&&ot===0&&(ot=3),n.flags&=-257,n.flags|=65536,n.lanes=i,a===mo?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),nu(e,a,i)),!1;case 22:return n.flags|=65536,a===mo?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),nu(e,a,i)),!1}throw Error(R(435,n.tag))}return nu(e,a,i),Eo(),!1}if(Re)return t=pn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=i,a!==Qu&&(e=Error(R(422),{cause:a}),As(Dn(e,n)))):(a!==Qu&&(t=Error(R(423),{cause:a}),As(Dn(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,a=Dn(a,n),i=ld(e.stateNode,a,i),Yc(e,i),ot!==4&&(ot=2)),!1;var r=Error(R(520),{cause:a});if(r=Dn(r,n),ys===null?ys=[r]:ys.push(r),ot!==4&&(ot=2),t===null)return!0;a=Dn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=ld(n.stateNode,a,e),Yc(n,e),!1;case 1:if(t=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Ga===null||!Ga.has(r))))return n.flags|=65536,i&=-i,n.lanes|=i,i=ap(i),ip(i,e,n,a),Yc(n,i),!1}n=n.return}while(n!==null);return!1}var Af=Error(R(461)),bt=!1;function kt(e,t,n,a){t.child=e===null?py(t,null,n,a):ji(t,e.child,n,a)}function Rm(e,t,n,a,i){n=n.render;var r=t.ref;if("ref"in a){var s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}else s=a;return Ti(t),a=bf(e,t,n,s,r,i),l=_f(),e!==null&&!bt?(wf(e,t,i),Sa(e,t,i)):(Re&&l&&df(t),t.flags|=1,kt(e,t,a,i),t.child)}function Mm(e,t,n,a,i){if(e===null){var r=n.type;return typeof r=="function"&&!uf(r)&&r.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=r,rp(e,t,r,a,i)):(e=Gl(n.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!Rf(e,i)){var s=r.memoizedProps;if(n=n.compare,n=n!==null?n:Ns,n(s,a)&&e.ref===t.ref)return Sa(e,t,i)}return t.flags|=1,e=va(r,a),e.ref=t.ref,e.return=t,t.child=e}function rp(e,t,n,a,i){if(e!==null){var r=e.memoizedProps;if(Ns(r,a)&&e.ref===t.ref)if(bt=!1,t.pendingProps=a=r,Rf(e,i))e.flags&131072&&(bt=!0);else return t.lanes=e.lanes,Sa(e,t,i)}return od(e,t,n,a,i)}function sp(e,t,n,a){var i=a.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if(t.flags&128){if(r=r!==null?r.baseLanes|n:n,e!==null){for(a=t.child=e.child,i=0;a!==null;)i=i|a.lanes|a.childLanes,a=a.sibling;a=i&~r}else a=0,t.child=null;return km(e,t,r,n,a)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Kl(t,r!==null?r.cachePool:null),r!==null?Sm(t,r):td(),wy(t);else return a=t.lanes=536870912,km(e,t,r!==null?r.baseLanes|n:n,n,a)}else r!==null?(Kl(t,r.cachePool),Sm(t,r),Ma(),t.memoizedState=null):(e!==null&&Kl(t,null),td(),Ma());return kt(e,t,i,n),t.child}function ns(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function km(e,t,n,a,i){var r=mf();return r=r===null?null:{parent:pt._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&Kl(t,null),td(),wy(t),e!==null&&Rr(e,t,a,!0),t.childLanes=i,null}function Jl(e,t){return t=_o({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Um(e,t,n){return ji(t,e.child,null,n),e=Jl(t,t.pendingProps),e.flags|=2,on(t),t.memoizedState=null,e}function GS(e,t,n){var a=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Re){if(a.mode==="hidden")return e=Jl(t,a),t.lanes=536870912,ns(null,e);if(nd(t),(e=et)?(e=Wp(e,Nn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Pa!==null?{id:Jn,overflow:Pn}:null,retryLane:536870912,hydrationErrors:null},n=dy(e),n.return=t,t.child=n,zt=t,et=null)):e=null,e===null)throw Za(t);return t.lanes=536870912,null}return Jl(t,a)}var r=e.memoizedState;if(r!==null){var s=r.dehydrated;if(nd(t),i)if(t.flags&256)t.flags&=-257,t=Um(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(R(558));else if(bt||Rr(e,t,n,!1),i=(n&e.childLanes)!==0,bt||i){if(a=Xe,a!==null&&(s=Lv(a,n),s!==0&&s!==r.retryLane))throw r.retryLane=s,Ri(e,s),tn(a,e,s),Af;Eo(),t=Um(e,t,n)}else e=r.treeContext,et=An(s.nextSibling),zt=t,Re=!0,Ia=null,Nn=!1,e!==null&&hy(t,e),t=Jl(t,a),t.flags|=4096;return t}return e=va(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Pl(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(R(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function od(e,t,n,a,i){return Ti(t),n=bf(e,t,n,a,void 0,i),a=_f(),e!==null&&!bt?(wf(e,t,i),Sa(e,t,i)):(Re&&a&&df(t),t.flags|=1,kt(e,t,n,i),t.child)}function zm(e,t,n,a,i,r){return Ti(t),t.updateQueue=null,n=xy(t,a,n,i),Sy(e),a=_f(),e!==null&&!bt?(wf(e,t,r),Sa(e,t,r)):(Re&&a&&df(t),t.flags|=1,kt(e,t,n,r),t.child)}function Lm(e,t,n,a,i){if(Ti(t),t.stateNode===null){var r=nr,s=n.contextType;typeof s=="object"&&s!==null&&(r=Lt(s)),r=new n(a,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=sd,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=a,r.state=t.memoizedState,r.refs={},vf(t),s=n.contextType,r.context=typeof s=="object"&&s!==null?Lt(s):nr,r.state=t.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(Gc(t,n,s,a),r.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(s=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),s!==r.state&&sd.enqueueReplaceState(r,r.state,null),hs(t,a,r,i),fs(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){r=t.stateNode;var l=t.memoizedProps,o=Di(n,l);r.props=o;var u=r.context,d=n.contextType;s=nr,typeof d=="object"&&d!==null&&(s=Lt(d));var f=n.getDerivedStateFromProps;d=typeof f=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||u!==s)&&Cm(t,r,a,s),Na=!1;var h=t.memoizedState;r.state=h,hs(t,a,r,i),fs(),u=t.memoizedState,l||h!==u||Na?(typeof f=="function"&&(Gc(t,n,f,a),u=t.memoizedState),(o=Na||Nm(t,n,o,a,h,u,s))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=u),r.props=a,r.state=u,r.context=s,a=o):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{r=t.stateNode,Fu(e,t),s=t.memoizedProps,d=Di(n,s),r.props=d,f=t.pendingProps,h=r.context,u=n.contextType,o=nr,typeof u=="object"&&u!==null&&(o=Lt(u)),l=n.getDerivedStateFromProps,(u=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(s!==f||h!==o)&&Cm(t,r,a,o),Na=!1,h=t.memoizedState,r.state=h,hs(t,a,r,i),fs();var m=t.memoizedState;s!==f||h!==m||Na||e!==null&&e.dependencies!==null&&ho(e.dependencies)?(typeof l=="function"&&(Gc(t,n,l,a),m=t.memoizedState),(d=Na||Nm(t,n,d,a,h,m,o)||e!==null&&e.dependencies!==null&&ho(e.dependencies))?(u||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(a,m,o),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(a,m,o)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=m),r.props=a,r.state=m,r.context=o,a=d):(typeof r.componentDidUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return r=a,Pl(e,t),a=(t.flags&128)!==0,r||a?(r=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&a?(t.child=ji(t,e.child,null,i),t.child=ji(t,null,n,i)):kt(e,t,n,i),t.memoizedState=r.state,e=t.child):e=Sa(e,t,i),e}function Bm(e,t,n,a){return Ei(),t.flags|=256,kt(e,t,n,a),t.child}var Kc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xc(e){return{baseLanes:e,cachePool:gy()}}function Qc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=fn),e}function lp(e,t,n){var a=t.pendingProps,i=!1,r=(t.flags&128)!==0,s;if((s=r)||(s=e!==null&&e.memoizedState===null?!1:(dt.current&2)!==0),s&&(i=!0,t.flags&=-129),s=(t.flags&32)!==0,t.flags&=-33,e===null){if(Re){if(i?Ra(t):Ma(),(e=et)?(e=Wp(e,Nn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Pa!==null?{id:Jn,overflow:Pn}:null,retryLane:536870912,hydrationErrors:null},n=dy(e),n.return=t,t.child=n,zt=t,et=null)):e=null,e===null)throw Za(t);return Sd(e)?t.lanes=32:t.lanes=536870912,null}var l=a.children;return a=a.fallback,i?(Ma(),i=t.mode,l=_o({mode:"hidden",children:l},i),a=_i(a,i,n,null),l.return=t,a.return=t,l.sibling=a,t.child=l,a=t.child,a.memoizedState=Xc(n),a.childLanes=Qc(e,s,n),t.memoizedState=Kc,ns(null,a)):(Ra(t),cd(t,l))}var o=e.memoizedState;if(o!==null&&(l=o.dehydrated,l!==null)){if(r)t.flags&256?(Ra(t),t.flags&=-257,t=Jc(e,t,n)):t.memoizedState!==null?(Ma(),t.child=e.child,t.flags|=128,t=null):(Ma(),l=a.fallback,i=t.mode,a=_o({mode:"visible",children:a.children},i),l=_i(l,i,n,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,ji(t,e.child,null,n),a=t.child,a.memoizedState=Xc(n),a.childLanes=Qc(e,s,n),t.memoizedState=Kc,t=ns(null,a));else if(Ra(t),Sd(l)){if(s=l.nextSibling&&l.nextSibling.dataset,s)var u=s.dgst;s=u,a=Error(R(419)),a.stack="",a.digest=s,As({value:a,source:null,stack:null}),t=Jc(e,t,n)}else if(bt||Rr(e,t,n,!1),s=(n&e.childLanes)!==0,bt||s){if(s=Xe,s!==null&&(a=Lv(s,n),a!==0&&a!==o.retryLane))throw o.retryLane=a,Ri(e,a),tn(s,e,a),Af;wd(l)||Eo(),t=Jc(e,t,n)}else wd(l)?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,et=An(l.nextSibling),zt=t,Re=!0,Ia=null,Nn=!1,e!==null&&hy(t,e),t=cd(t,a.children),t.flags|=4096);return t}return i?(Ma(),l=a.fallback,i=t.mode,o=e.child,u=o.sibling,a=va(o,{mode:"hidden",children:a.children}),a.subtreeFlags=o.subtreeFlags&65011712,u!==null?l=va(u,l):(l=_i(l,i,n,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,ns(null,a),a=t.child,l=e.child.memoizedState,l===null?l=Xc(n):(i=l.cachePool,i!==null?(o=pt._currentValue,i=i.parent!==o?{parent:o,pool:o}:i):i=gy(),l={baseLanes:l.baseLanes|n,cachePool:i}),a.memoizedState=l,a.childLanes=Qc(e,s,n),t.memoizedState=Kc,ns(e.child,a)):(Ra(t),n=e.child,e=n.sibling,n=va(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function cd(e,t){return t=_o({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function _o(e,t){return e=cn(22,e,null,t),e.lanes=0,e}function Jc(e,t,n){return ji(t,e.child,null,n),e=cd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Hm(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Pu(e.return,t,n)}function Pc(e,t,n,a,i,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i,treeForkCount:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=a,s.tail=n,s.tailMode=i,s.treeForkCount=r)}function op(e,t,n){var a=t.pendingProps,i=a.revealOrder,r=a.tail;a=a.children;var s=dt.current,l=(s&2)!==0;if(l?(s=s&1|2,t.flags|=128):s&=1,Je(dt,s),kt(e,t,a,n),a=Re?Cs:0,!l&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hm(e,n,t);else if(e.tag===19)Hm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&vo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Pc(t,!1,i,n,r,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&vo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Pc(t,!0,n,null,r,a);break;case"together":Pc(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function Sa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fa|=t.lanes,!(n&t.childLanes))if(e!==null){if(Rr(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,n=va(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=va(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Rf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&ho(e)))}function KS(e,t,n){switch(t.tag){case 3:ro(t,t.stateNode.containerInfo),Aa(t,pt,e.memoizedState.cache),Ei();break;case 27:case 5:Lu(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:Aa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,nd(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Ra(t),t.flags|=128,null):n&t.child.childLanes?lp(e,t,n):(Ra(t),e=Sa(e,t,n),e!==null?e.sibling:null);Ra(t);break;case 19:var i=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(Rr(e,t,n,!1),a=(n&t.childLanes)!==0),i){if(a)return op(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Je(dt,dt.current),a)break;return null;case 22:return t.lanes=0,sp(e,t,n,t.pendingProps);case 24:Aa(t,pt,e.memoizedState.cache)}return Sa(e,t,n)}function cp(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)bt=!0;else{if(!Rf(e,n)&&!(t.flags&128))return bt=!1,KS(e,t,n);bt=!!(e.flags&131072)}else bt=!1,Re&&t.flags&1048576&&fy(t,Cs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=fi(t.elementType),t.type=e,typeof e=="function")uf(e)?(a=Di(e,a),t.tag=1,t=Lm(null,t,e,a,n)):(t.tag=0,t=od(null,t,e,a,n));else{if(e!=null){var i=e.$$typeof;if(i===Jd){t.tag=11,t=Rm(null,t,e,a,n);break e}else if(i===Pd){t.tag=14,t=Mm(null,t,e,a,n);break e}}throw t=Uu(e)||e,Error(R(306,t,""))}}return t;case 0:return od(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,i=Di(a,t.pendingProps),Lm(e,t,a,i,n);case 3:e:{if(ro(t,t.stateNode.containerInfo),e===null)throw Error(R(387));a=t.pendingProps;var r=t.memoizedState;i=r.element,Fu(e,t),hs(t,a,null,n);var s=t.memoizedState;if(a=s.cache,Aa(t,pt,a),a!==r.cache&&Zu(t,[pt],n,!0),fs(),a=s.element,r.isDehydrated)if(r={element:a,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=Bm(e,t,a,n);break e}else if(a!==i){i=Dn(Error(R(424)),t),As(i),t=Bm(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(et=An(e.firstChild),zt=t,Re=!0,Ia=null,Nn=!0,n=py(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ei(),a===i){t=Sa(e,t,n);break e}kt(e,t,a,n)}t=t.child}return t;case 26:return Pl(e,t),e===null?(n=rg(t.type,null,t.pendingProps,null))?t.memoizedState=n:Re||(n=t.type,e=t.pendingProps,a=Do($a.current).createElement(n),a[Ut]=t,a[nn]=e,Bt(a,n,e),Dt(a),t.stateNode=a):t.memoizedState=rg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Lu(t),e===null&&Re&&(a=t.stateNode=Fp(t.type,t.pendingProps,$a.current),zt=t,Nn=!0,i=et,ni(t.type)?(xd=i,et=An(a.firstChild)):et=i),kt(e,t,t.pendingProps.children,n),Pl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Re&&((i=a=et)&&(a=Sx(a,t.type,t.pendingProps,Nn),a!==null?(t.stateNode=a,zt=t,et=An(a.firstChild),Nn=!1,i=!0):i=!1),i||Za(t)),Lu(t),i=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,a=r.children,bd(i,r)?a=null:s!==null&&bd(i,s)&&(t.flags|=32),t.memoizedState!==null&&(i=bf(e,t,LS,null,null,n),Ls._currentValue=i),Pl(e,t),kt(e,t,a,n),t.child;case 6:return e===null&&Re&&((e=n=et)&&(n=xx(n,t.pendingProps,Nn),n!==null?(t.stateNode=n,zt=t,et=null,e=!0):e=!1),e||Za(t)),null;case 13:return lp(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ji(t,null,a,n):kt(e,t,a,n),t.child;case 11:return Rm(e,t,t.type,t.pendingProps,n);case 7:return kt(e,t,t.pendingProps,n),t.child;case 8:return kt(e,t,t.pendingProps.children,n),t.child;case 12:return kt(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Aa(t,t.type,a.value),kt(e,t,a.children,n),t.child;case 9:return i=t.type._context,a=t.pendingProps.children,Ti(t),i=Lt(i),a=a(i),t.flags|=1,kt(e,t,a,n),t.child;case 14:return Mm(e,t,t.type,t.pendingProps,n);case 15:return rp(e,t,t.type,t.pendingProps,n);case 19:return op(e,t,n);case 31:return GS(e,t,n);case 22:return sp(e,t,n,t.pendingProps);case 24:return Ti(t),a=Lt(pt),e===null?(i=mf(),i===null&&(i=Xe,r=hf(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=n),i=r),t.memoizedState={parent:a,cache:i},vf(t),Aa(t,pt,i)):(e.lanes&n&&(Fu(e,t),hs(t,null,null,n),fs()),i=e.memoizedState,r=t.memoizedState,i.parent!==a?(i={parent:a,cache:a},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Aa(t,pt,a)):(a=r.cache,Aa(t,pt,a),a!==i.cache&&Zu(t,[pt],n,!0))),kt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(R(156,t.tag))}function ra(e){e.flags|=4}function Zc(e,t,n,a,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Mp())e.flags|=8192;else throw Si=mo,gf}else e.flags&=-16777217}function qm(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!n0(t))if(Mp())e.flags|=8192;else throw Si=mo,gf}function xl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?kv():536870912,e.lanes|=t,wr|=t)}function Pr(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Fe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags&65011712,a|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function XS(e,t,n){var a=t.pendingProps;switch(ff(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return Fe(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ya(pt),gr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(zi(t)?ra(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ic())),Fe(t),null;case 26:var i=t.type,r=t.memoizedState;return e===null?(ra(t),r!==null?(Fe(t),qm(t,r)):(Fe(t),Zc(t,i,null,a,n))):r?r!==e.memoizedState?(ra(t),Fe(t),qm(t,r)):(Fe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&ra(t),Fe(t),Zc(t,i,e,a,n)),null;case 27:if(so(t),n=$a.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&ra(t);else{if(!a){if(t.stateNode===null)throw Error(R(166));return Fe(t),null}e=Wn.current,zi(t)?gm(t):(e=Fp(i,a,n),t.stateNode=e,ra(t))}return Fe(t),null;case 5:if(so(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&ra(t);else{if(!a){if(t.stateNode===null)throw Error(R(166));return Fe(t),null}if(r=Wn.current,zi(t))gm(t);else{var s=Do($a.current);switch(r){case 1:r=s.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=s.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=s.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof a.is=="string"?s.createElement("select",{is:a.is}):s.createElement("select"),a.multiple?r.multiple=!0:a.size&&(r.size=a.size);break;default:r=typeof a.is=="string"?s.createElement(i,{is:a.is}):s.createElement(i)}}r[Ut]=t,r[nn]=a;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)r.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=r;e:switch(Bt(r,i,a),i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ra(t)}}return Fe(t),Zc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&ra(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(R(166));if(e=$a.current,zi(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,i=zt,i!==null)switch(i.tag){case 27:case 5:a=i.memoizedProps}e[Ut]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Jp(e.nodeValue,n)),e||Za(t,!0)}else e=Do(e).createTextNode(a),e[Ut]=t,t.stateNode=e}return Fe(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=zi(t),n!==null){if(e===null){if(!a)throw Error(R(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(557));e[Ut]=t}else Ei(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fe(t),e=!1}else n=Ic(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(on(t),t):(on(t),null);if(t.flags&128)throw Error(R(558))}return Fe(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=zi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(R(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[Ut]=t}else Ei(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fe(t),i=!1}else i=Ic(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(on(t),t):(on(t),null)}return on(t),t.flags&128?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,i=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(i=a.alternate.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==i&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),xl(t,t.updateQueue),Fe(t),null);case 4:return gr(),e===null&&Hf(t.stateNode.containerInfo),Fe(t),null;case 10:return ya(t.type),Fe(t),null;case 19:if(Nt(dt),a=t.memoizedState,a===null)return Fe(t),null;if(i=(t.flags&128)!==0,r=a.rendering,r===null)if(i)Pr(a,!1);else{if(ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(r=vo(e),r!==null){for(t.flags|=128,Pr(a,!1),e=r.updateQueue,t.updateQueue=e,xl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)uy(n,e),n=n.sibling;return Je(dt,dt.current&1|2),Re&&da(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&hn()>So&&(t.flags|=128,i=!0,Pr(a,!1),t.lanes=4194304)}else{if(!i)if(e=vo(r),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,xl(t,e),Pr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!r.alternate&&!Re)return Fe(t),null}else 2*hn()-a.renderingStartTime>So&&n!==536870912&&(t.flags|=128,i=!0,Pr(a,!1),t.lanes=4194304);a.isBackwards?(r.sibling=t.child,t.child=r):(e=a.last,e!==null?e.sibling=r:t.child=r,a.last=r)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=hn(),e.sibling=null,n=dt.current,Je(dt,i?n&1|2:n&1),Re&&da(t,a.treeForkCount),e):(Fe(t),null);case 22:case 23:return on(t),yf(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?n&536870912&&!(t.flags&128)&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),n=t.updateQueue,n!==null&&xl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&Nt(wi),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ya(pt),Fe(t),null;case 25:return null;case 30:return null}throw Error(R(156,t.tag))}function QS(e,t){switch(ff(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ya(pt),gr(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return so(t),null;case 31:if(t.memoizedState!==null){if(on(t),t.alternate===null)throw Error(R(340));Ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(on(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));Ei()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Nt(dt),null;case 4:return gr(),null;case 10:return ya(t.type),null;case 22:case 23:return on(t),yf(),e!==null&&Nt(wi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ya(pt),null;case 25:return null;default:return null}}function up(e,t){switch(ff(t),t.tag){case 3:ya(pt),gr();break;case 26:case 27:case 5:so(t);break;case 4:gr();break;case 31:t.memoizedState!==null&&on(t);break;case 13:on(t);break;case 19:Nt(dt);break;case 10:ya(t.type);break;case 22:case 23:on(t),yf(),e!==null&&Nt(wi);break;case 24:ya(pt)}}function Fs(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&e)===e){a=void 0;var r=n.create,s=n.inst;a=r(),s.destroy=a}n=n.next}while(n!==i)}}catch(l){He(t,t.return,l)}}function Wa(e,t,n){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var r=i.next;a=r;do{if((a.tag&e)===e){var s=a.inst,l=s.destroy;if(l!==void 0){s.destroy=void 0,i=t;var o=n,u=l;try{u()}catch(d){He(i,o,d)}}}a=a.next}while(a!==r)}}catch(d){He(t,t.return,d)}}function dp(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{_y(t,n)}catch(a){He(e,e.return,a)}}}function fp(e,t,n){n.props=Di(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){He(e,t,a)}}function gs(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(i){He(e,t,i)}}function Zn(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(i){He(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){He(e,t,i)}else n.current=null}function hp(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(i){He(e,e.return,i)}}function Wc(e,t,n){try{var a=e.stateNode;vx(a,e.type,n,t),a[nn]=t}catch(i){He(e,e.return,i)}}function mp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ni(e.type)||e.tag===4}function Fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ni(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ud(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ma));else if(a!==4&&(a===27&&ni(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(ud(e,t,n),e=e.sibling;e!==null;)ud(e,t,n),e=e.sibling}function wo(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&ni(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(wo(e,t,n),e=e.sibling;e!==null;)wo(e,t,n),e=e.sibling}function gp(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Bt(t,a,n),t[Ut]=e,t[nn]=n}catch(r){He(e,e.return,r)}}var fa=!1,yt=!1,eu=!1,$m=typeof WeakSet=="function"?WeakSet:Set,jt=null;function JS(e,t){if(e=e.containerInfo,yd=Ro,e=ny(e),lf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var i=a.anchorOffset,r=a.focusNode;a=a.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var s=0,l=-1,o=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(l=s+i),f!==r||a!==0&&f.nodeType!==3||(o=s+a),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++u===i&&(l=s),h===r&&++d===a&&(o=s),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=l===-1||o===-1?null:{start:l,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(pd={focusedElem:e,selectionRange:n},Ro=!1,jt=t;jt!==null;)if(t=jt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,jt=e;else for(;jt!==null;){switch(t=jt,r=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)i=e[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&r!==null){e=void 0,n=t,i=r.memoizedProps,r=r.memoizedState,a=n.stateNode;try{var v=Di(n.type,i);e=a.getSnapshotBeforeUpdate(v,r),a.__reactInternalSnapshotBeforeUpdate=e}catch(b){He(n,n.return,b)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)_d(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":_d(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(R(163))}if(e=t.sibling,e!==null){e.return=t.return,jt=e;break}jt=t.return}}function vp(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:la(e,n),a&4&&Fs(5,n);break;case 1:if(la(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(s){He(n,n.return,s)}else{var i=Di(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){He(n,n.return,s)}}a&64&&dp(n),a&512&&gs(n,n.return);break;case 3:if(la(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{_y(e,t)}catch(s){He(n,n.return,s)}}break;case 27:t===null&&a&4&&gp(n);case 26:case 5:la(e,n),t===null&&a&4&&hp(n),a&512&&gs(n,n.return);break;case 12:la(e,n);break;case 31:la(e,n),a&4&&bp(e,n);break;case 13:la(e,n),a&4&&_p(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ix.bind(null,n),Ex(e,n))));break;case 22:if(a=n.memoizedState!==null||fa,!a){t=t!==null&&t.memoizedState!==null||yt,i=fa;var r=yt;fa=a,(yt=t)&&!r?ca(e,n,(n.subtreeFlags&8772)!==0):la(e,n),fa=i,yt=r}break;case 30:break;default:la(e,n)}}function yp(e){var t=e.alternate;t!==null&&(e.alternate=null,yp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ef(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var it=null,Ft=!1;function sa(e,t,n){for(n=n.child;n!==null;)pp(e,t,n),n=n.sibling}function pp(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Ks,n)}catch{}switch(n.tag){case 26:yt||Zn(n,t),sa(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:yt||Zn(n,t);var a=it,i=Ft;ni(n.type)&&(it=n.stateNode,Ft=!1),sa(e,t,n),bs(n.stateNode),it=a,Ft=i;break;case 5:yt||Zn(n,t);case 6:if(a=it,i=Ft,it=null,sa(e,t,n),it=a,Ft=i,it!==null)if(Ft)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(n.stateNode)}catch(r){He(n,t,r)}else try{it.removeChild(n.stateNode)}catch(r){He(n,t,r)}break;case 18:it!==null&&(Ft?(e=it,eg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Tr(e)):eg(it,n.stateNode));break;case 4:a=it,i=Ft,it=n.stateNode.containerInfo,Ft=!0,sa(e,t,n),it=a,Ft=i;break;case 0:case 11:case 14:case 15:Wa(2,n,t),yt||Wa(4,n,t),sa(e,t,n);break;case 1:yt||(Zn(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&fp(n,t,a)),sa(e,t,n);break;case 21:sa(e,t,n);break;case 22:yt=(a=yt)||n.memoizedState!==null,sa(e,t,n),yt=a;break;default:sa(e,t,n)}}function bp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Tr(e)}catch(n){He(t,t.return,n)}}}function _p(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Tr(e)}catch(n){He(t,t.return,n)}}function PS(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new $m),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new $m),t;default:throw Error(R(435,e.tag))}}function El(e,t){var n=PS(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var i=rx.bind(null,e,a);a.then(i,i)}})}function Pt(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var i=n[a],r=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 27:if(ni(l.type)){it=l.stateNode,Ft=!1;break e}break;case 5:it=l.stateNode,Ft=!1;break e;case 3:case 4:it=l.stateNode.containerInfo,Ft=!0;break e}l=l.return}if(it===null)throw Error(R(160));pp(r,s,i),it=null,Ft=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)wp(t,e),t=t.sibling}var Bn=null;function wp(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pt(t,e),Zt(e),a&4&&(Wa(3,e,e.return),Fs(3,e),Wa(5,e,e.return));break;case 1:Pt(t,e),Zt(e),a&512&&(yt||n===null||Zn(n,n.return)),a&64&&fa&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var i=Bn;if(Pt(t,e),Zt(e),a&512&&(yt||n===null||Zn(n,n.return)),a&4){var r=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(a){case"title":r=i.getElementsByTagName("title")[0],(!r||r[Js]||r[Ut]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(a),i.head.insertBefore(r,i.querySelector("head > title"))),Bt(r,a,n),r[Ut]=e,Dt(r),a=r;break e;case"link":var s=lg("link","href",i).get(a+(n.href||""));if(s){for(var l=0;l<s.length;l++)if(r=s[l],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(l,1);break t}}r=i.createElement(a),Bt(r,a,n),i.head.appendChild(r);break;case"meta":if(s=lg("meta","content",i).get(a+(n.content||""))){for(l=0;l<s.length;l++)if(r=s[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(l,1);break t}}r=i.createElement(a),Bt(r,a,n),i.head.appendChild(r);break;default:throw Error(R(468,a))}r[Ut]=e,Dt(r),a=r}e.stateNode=a}else og(i,e.type,e.stateNode);else e.stateNode=sg(i,a,e.memoizedProps);else r!==a?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,a===null?og(i,e.type,e.stateNode):sg(i,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Wc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pt(t,e),Zt(e),a&512&&(yt||n===null||Zn(n,n.return)),n!==null&&a&4&&Wc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pt(t,e),Zt(e),a&512&&(yt||n===null||Zn(n,n.return)),e.flags&32){i=e.stateNode;try{yr(i,"")}catch(v){He(e,e.return,v)}}a&4&&e.stateNode!=null&&(i=e.memoizedProps,Wc(e,i,n!==null?n.memoizedProps:i)),a&1024&&(eu=!0);break;case 6:if(Pt(t,e),Zt(e),a&4){if(e.stateNode===null)throw Error(R(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(v){He(e,e.return,v)}}break;case 3:if(Fl=null,i=Bn,Bn=No(t.containerInfo),Pt(t,e),Bn=i,Zt(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Tr(t.containerInfo)}catch(v){He(e,e.return,v)}eu&&(eu=!1,Sp(e));break;case 4:a=Bn,Bn=No(e.stateNode.containerInfo),Pt(t,e),Zt(e),Bn=a;break;case 12:Pt(t,e),Zt(e);break;case 31:Pt(t,e),Zt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,El(e,a)));break;case 13:Pt(t,e),Zt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(sc=hn()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,El(e,a)));break;case 22:i=e.memoizedState!==null;var o=n!==null&&n.memoizedState!==null,u=fa,d=yt;if(fa=u||i,yt=d||o,Pt(t,e),yt=d,fa=u,Zt(e),a&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||o||fa||yt||hi(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){o=n=t;try{if(r=o.stateNode,i)s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{l=o.stateNode;var f=o.memoizedProps.style,h=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(v){He(o,o.return,v)}}}else if(t.tag===6){if(n===null){o=t;try{o.stateNode.nodeValue=i?"":o.memoizedProps}catch(v){He(o,o.return,v)}}}else if(t.tag===18){if(n===null){o=t;try{var m=o.stateNode;i?tg(m,!0):tg(o.stateNode,!1)}catch(v){He(o,o.return,v)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,El(e,n))));break;case 19:Pt(t,e),Zt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,El(e,a)));break;case 30:break;case 21:break;default:Pt(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(mp(a)){n=a;break}a=a.return}if(n==null)throw Error(R(160));switch(n.tag){case 27:var i=n.stateNode,r=Fc(e);wo(e,r,i);break;case 5:var s=n.stateNode;n.flags&32&&(yr(s,""),n.flags&=-33);var l=Fc(e);wo(e,l,s);break;case 3:case 4:var o=n.stateNode.containerInfo,u=Fc(e);ud(e,u,o);break;default:throw Error(R(161))}}catch(d){He(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Sp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Sp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function la(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)vp(e,t.alternate,t),t=t.sibling}function hi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Wa(4,t,t.return),hi(t);break;case 1:Zn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&fp(t,t.return,n),hi(t);break;case 27:bs(t.stateNode);case 26:case 5:Zn(t,t.return),hi(t);break;case 22:t.memoizedState===null&&hi(t);break;case 30:hi(t);break;default:hi(t)}e=e.sibling}}function ca(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,i=e,r=t,s=r.flags;switch(r.tag){case 0:case 11:case 15:ca(i,r,n),Fs(4,r);break;case 1:if(ca(i,r,n),a=r,i=a.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(u){He(a,a.return,u)}if(a=r,i=a.updateQueue,i!==null){var l=a.stateNode;try{var o=i.shared.hiddenCallbacks;if(o!==null)for(i.shared.hiddenCallbacks=null,i=0;i<o.length;i++)by(o[i],l)}catch(u){He(a,a.return,u)}}n&&s&64&&dp(r),gs(r,r.return);break;case 27:gp(r);case 26:case 5:ca(i,r,n),n&&a===null&&s&4&&hp(r),gs(r,r.return);break;case 12:ca(i,r,n);break;case 31:ca(i,r,n),n&&s&4&&bp(i,r);break;case 13:ca(i,r,n),n&&s&4&&_p(i,r);break;case 22:r.memoizedState===null&&ca(i,r,n),gs(r,r.return);break;case 30:break;default:ca(i,r,n)}t=t.sibling}}function Mf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Zs(n))}function kf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Zs(e))}function kn(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xp(e,t,n,a),t=t.sibling}function xp(e,t,n,a){var i=t.flags;switch(t.tag){case 0:case 11:case 15:kn(e,t,n,a),i&2048&&Fs(9,t);break;case 1:kn(e,t,n,a);break;case 3:kn(e,t,n,a),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Zs(e)));break;case 12:if(i&2048){kn(e,t,n,a),e=t.stateNode;try{var r=t.memoizedProps,s=r.id,l=r.onPostCommit;typeof l=="function"&&l(s,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(o){He(t,t.return,o)}}else kn(e,t,n,a);break;case 31:kn(e,t,n,a);break;case 13:kn(e,t,n,a);break;case 23:break;case 22:r=t.stateNode,s=t.alternate,t.memoizedState!==null?r._visibility&2?kn(e,t,n,a):vs(e,t):r._visibility&2?kn(e,t,n,a):(r._visibility|=2,Vi(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Mf(s,t);break;case 24:kn(e,t,n,a),i&2048&&kf(t.alternate,t);break;default:kn(e,t,n,a)}}function Vi(e,t,n,a,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,s=t,l=n,o=a,u=s.flags;switch(s.tag){case 0:case 11:case 15:Vi(r,s,l,o,i),Fs(8,s);break;case 23:break;case 22:var d=s.stateNode;s.memoizedState!==null?d._visibility&2?Vi(r,s,l,o,i):vs(r,s):(d._visibility|=2,Vi(r,s,l,o,i)),i&&u&2048&&Mf(s.alternate,s);break;case 24:Vi(r,s,l,o,i),i&&u&2048&&kf(s.alternate,s);break;default:Vi(r,s,l,o,i)}t=t.sibling}}function vs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,i=a.flags;switch(a.tag){case 22:vs(n,a),i&2048&&Mf(a.alternate,a);break;case 24:vs(n,a),i&2048&&kf(a.alternate,a);break;default:vs(n,a)}t=t.sibling}}var as=8192;function Li(e,t,n){if(e.subtreeFlags&as)for(e=e.child;e!==null;)Ep(e,t,n),e=e.sibling}function Ep(e,t,n){switch(e.tag){case 26:Li(e,t,n),e.flags&as&&e.memoizedState!==null&&zx(n,Bn,e.memoizedState,e.memoizedProps);break;case 5:Li(e,t,n);break;case 3:case 4:var a=Bn;Bn=No(e.stateNode.containerInfo),Li(e,t,n),Bn=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=as,as=16777216,Li(e,t,n),as=a):Li(e,t,n));break;default:Li(e,t,n)}}function Tp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Zr(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];jt=a,Op(a,e)}Tp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)jp(e),e=e.sibling}function jp(e){switch(e.tag){case 0:case 11:case 15:Zr(e),e.flags&2048&&Wa(9,e,e.return);break;case 3:Zr(e);break;case 12:Zr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Zl(e)):Zr(e);break;default:Zr(e)}}function Zl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];jt=a,Op(a,e)}Tp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Wa(8,t,t.return),Zl(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function Op(e,t){for(;jt!==null;){var n=jt;switch(n.tag){case 0:case 11:case 15:Wa(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Zs(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,jt=a;else e:for(n=e;jt!==null;){a=jt;var i=a.sibling,r=a.return;if(yp(a),a===n){jt=null;break e}if(i!==null){i.return=r,jt=i;break e}jt=r}}}var ZS={getCacheForType:function(e){var t=Lt(pt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Lt(pt).controller.signal}},WS=typeof WeakMap=="function"?WeakMap:Map,Ue=0,Xe=null,je=null,Ne=0,Be=0,ln=null,Ba=!1,kr=!1,Uf=!1,xa=0,ot=0,Fa=0,xi=0,zf=0,fn=0,wr=0,ys=null,en=null,dd=!1,sc=0,Dp=0,So=1/0,xo=null,Ga=null,xt=0,Ka=null,Sr=null,pa=0,fd=0,hd=null,Np=null,ps=0,md=null;function vn(){return Ue&2&&Ne!==0?Ne&-Ne:ue.T!==null?Bf():Bv()}function Cp(){if(fn===0)if(!(Ne&536870912)||Re){var e=vl;vl<<=1,!(vl&3932160)&&(vl=262144),fn=e}else fn=536870912;return e=pn.current,e!==null&&(e.flags|=32),fn}function tn(e,t,n){(e===Xe&&(Be===2||Be===9)||e.cancelPendingCommit!==null)&&(xr(e,0),Ha(e,Ne,fn,!1)),Qs(e,n),(!(Ue&2)||e!==Xe)&&(e===Xe&&(!(Ue&2)&&(xi|=n),ot===4&&Ha(e,Ne,fn,!1)),ea(e))}function Ap(e,t,n){if(Ue&6)throw Error(R(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Xs(e,t),i=a?tx(e,t):tu(e,t,!0),r=a;do{if(i===0){kr&&!a&&Ha(e,t,0,!1);break}else{if(n=e.current.alternate,r&&!FS(n)){i=tu(e,t,!1),r=!1;continue}if(i===2){if(r=t,e.errorRecoveryDisabledLanes&r)var s=0;else s=e.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){t=s;e:{var l=e;i=ys;var o=l.current.memoizedState.isDehydrated;if(o&&(xr(l,s).flags|=256),s=tu(l,s,!1),s!==2){if(Uf&&!o){l.errorRecoveryDisabledLanes|=r,xi|=r,i=4;break e}r=en,en=i,r!==null&&(en===null?en=r:en.push.apply(en,r))}i=s}if(r=!1,i!==2)continue}}if(i===1){xr(e,0),Ha(e,t,0,!0);break}e:{switch(a=e,r=i,r){case 0:case 1:throw Error(R(345));case 4:if((t&4194048)!==t)break;case 6:Ha(a,t,fn,!Ba);break e;case 2:en=null;break;case 3:case 5:break;default:throw Error(R(329))}if((t&62914560)===t&&(i=sc+300-hn(),10<i)){if(Ha(a,t,fn,!Ba),Jo(a,0,!0)!==0)break e;pa=t,a.timeoutHandle=Zp(Im.bind(null,a,n,en,xo,dd,t,fn,xi,wr,Ba,r,"Throttled",-0,0),i);break e}Im(a,n,en,xo,dd,t,fn,xi,wr,Ba,r,null,-0,0)}}break}while(!0);ea(e)}function Im(e,t,n,a,i,r,s,l,o,u,d,f,h,m){if(e.timeoutHandle=-1,f=t.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ma},Ep(t,r,f);var v=(r&62914560)===r?sc-hn():(r&4194048)===r?Dp-hn():0;if(v=Lx(f,v),v!==null){pa=r,e.cancelPendingCommit=v(Vm.bind(null,e,t,r,n,a,i,s,l,o,d,f,null,h,m)),Ha(e,r,s,!u);return}}Vm(e,t,r,n,a,i,s,l,o)}function FS(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var i=n[a],r=i.getSnapshot;i=i.value;try{if(!yn(r(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ha(e,t,n,a){t&=~zf,t&=~xi,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var i=t;0<i;){var r=31-gn(i),s=1<<r;a[r]=-1,i&=~s}n!==0&&Uv(e,n,t)}function lc(){return Ue&6?!0:(el(0),!1)}function Lf(){if(je!==null){if(Be===0)var e=je.return;else e=je,ga=Mi=null,Sf(e),ur=null,Rs=0,e=je;for(;e!==null;)up(e.alternate,e),e=e.return;je=null}}function xr(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,bx(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),pa=0,Lf(),Xe=e,je=n=va(e.current,null),Ne=t,Be=0,ln=null,Ba=!1,kr=Xs(e,t),Uf=!1,wr=fn=zf=xi=Fa=ot=0,en=ys=null,dd=!1,t&8&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var i=31-gn(a),r=1<<i;t|=e[i],a&=~r}return xa=t,Fo(),n}function Rp(e,t){ye=null,ue.H=ks,t===Mr||t===tc?(t=_m(),Be=3):t===gf?(t=_m(),Be=4):Be=t===Af?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ln=t,je===null&&(ot=1,bo(e,Dn(t,e.current)))}function Mp(){var e=pn.current;return e===null?!0:(Ne&4194048)===Ne?Cn===null:(Ne&62914560)===Ne||Ne&536870912?e===Cn:!1}function kp(){var e=ue.H;return ue.H=ks,e===null?ks:e}function Up(){var e=ue.A;return ue.A=ZS,e}function Eo(){ot=4,Ba||(Ne&4194048)!==Ne&&pn.current!==null||(kr=!0),!(Fa&134217727)&&!(xi&134217727)||Xe===null||Ha(Xe,Ne,fn,!1)}function tu(e,t,n){var a=Ue;Ue|=2;var i=kp(),r=Up();(Xe!==e||Ne!==t)&&(xo=null,xr(e,t)),t=!1;var s=ot;e:do try{if(Be!==0&&je!==null){var l=je,o=ln;switch(Be){case 8:Lf(),s=6;break e;case 3:case 2:case 9:case 6:pn.current===null&&(t=!0);var u=Be;if(Be=0,ln=null,rr(e,l,o,u),n&&kr){s=0;break e}break;default:u=Be,Be=0,ln=null,rr(e,l,o,u)}}ex(),s=ot;break}catch(d){Rp(e,d)}while(!0);return t&&e.shellSuspendCounter++,ga=Mi=null,Ue=a,ue.H=i,ue.A=r,je===null&&(Xe=null,Ne=0,Fo()),s}function ex(){for(;je!==null;)zp(je)}function tx(e,t){var n=Ue;Ue|=2;var a=kp(),i=Up();Xe!==e||Ne!==t?(xo=null,So=hn()+500,xr(e,t)):kr=Xs(e,t);e:do try{if(Be!==0&&je!==null){t=je;var r=ln;t:switch(Be){case 1:Be=0,ln=null,rr(e,t,r,1);break;case 2:case 9:if(bm(r)){Be=0,ln=null,Ym(t);break}t=function(){Be!==2&&Be!==9||Xe!==e||(Be=7),ea(e)},r.then(t,t);break e;case 3:Be=7;break e;case 4:Be=5;break e;case 7:bm(r)?(Be=0,ln=null,Ym(t)):(Be=0,ln=null,rr(e,t,r,7));break;case 5:var s=null;switch(je.tag){case 26:s=je.memoizedState;case 5:case 27:var l=je;if(s?n0(s):l.stateNode.complete){Be=0,ln=null;var o=l.sibling;if(o!==null)je=o;else{var u=l.return;u!==null?(je=u,oc(u)):je=null}break t}}Be=0,ln=null,rr(e,t,r,5);break;case 6:Be=0,ln=null,rr(e,t,r,6);break;case 8:Lf(),ot=6;break e;default:throw Error(R(462))}}nx();break}catch(d){Rp(e,d)}while(!0);return ga=Mi=null,ue.H=a,ue.A=i,Ue=n,je!==null?0:(Xe=null,Ne=0,Fo(),ot)}function nx(){for(;je!==null&&!Tw();)zp(je)}function zp(e){var t=cp(e.alternate,e,xa);e.memoizedProps=e.pendingProps,t===null?oc(e):je=t}function Ym(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=zm(n,t,t.pendingProps,t.type,void 0,Ne);break;case 11:t=zm(n,t,t.pendingProps,t.type.render,t.ref,Ne);break;case 5:Sf(t);default:up(n,t),t=je=uy(t,xa),t=cp(n,t,xa)}e.memoizedProps=e.pendingProps,t===null?oc(e):je=t}function rr(e,t,n,a){ga=Mi=null,Sf(t),ur=null,Rs=0;var i=t.return;try{if(VS(e,i,t,n,Ne)){ot=1,bo(e,Dn(n,e.current)),je=null;return}}catch(r){if(i!==null)throw je=i,r;ot=1,bo(e,Dn(n,e.current)),je=null;return}t.flags&32768?(Re||a===1?e=!0:kr||Ne&536870912?e=!1:(Ba=e=!0,(a===2||a===9||a===3||a===6)&&(a=pn.current,a!==null&&a.tag===13&&(a.flags|=16384))),Lp(t,e)):oc(t)}function oc(e){var t=e;do{if(t.flags&32768){Lp(t,Ba);return}e=t.return;var n=XS(t.alternate,t,xa);if(n!==null){je=n;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);ot===0&&(ot=5)}function Lp(e,t){do{var n=QS(e.alternate,e);if(n!==null){n.flags&=32767,je=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=n}while(e!==null);ot=6,je=null}function Vm(e,t,n,a,i,r,s,l,o){e.cancelPendingCommit=null;do cc();while(xt!==0);if(Ue&6)throw Error(R(327));if(t!==null){if(t===e.current)throw Error(R(177));if(r=t.lanes|t.childLanes,r|=of,Uw(e,n,r,s,l,o),e===Xe&&(je=Xe=null,Ne=0),Sr=t,Ka=e,pa=n,fd=r,hd=i,Np=a,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,sx(lo,function(){return Ip(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,t.subtreeFlags&13878||a){a=ue.T,ue.T=null,i=ze.p,ze.p=2,s=Ue,Ue|=4;try{JS(e,t,n)}finally{Ue=s,ze.p=i,ue.T=a}}xt=1,Bp(),Hp(),qp()}}function Bp(){if(xt===1){xt=0;var e=Ka,t=Sr,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=ue.T,ue.T=null;var a=ze.p;ze.p=2;var i=Ue;Ue|=4;try{wp(t,e);var r=pd,s=ny(e.containerInfo),l=r.focusedElem,o=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&ty(l.ownerDocument.documentElement,l)){if(o!==null&&lf(l)){var u=o.start,d=o.end;if(d===void 0&&(d=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(d,l.value.length);else{var f=l.ownerDocument||document,h=f&&f.defaultView||window;if(h.getSelection){var m=h.getSelection(),v=l.textContent.length,b=Math.min(o.start,v),w=o.end===void 0?b:Math.min(o.end,v);!m.extend&&b>w&&(s=w,w=b,b=s);var y=fm(l,b),g=fm(l,w);if(y&&g&&(m.rangeCount!==1||m.anchorNode!==y.node||m.anchorOffset!==y.offset||m.focusNode!==g.node||m.focusOffset!==g.offset)){var p=f.createRange();p.setStart(y.node,y.offset),m.removeAllRanges(),b>w?(m.addRange(p),m.extend(g.node,g.offset)):(p.setEnd(g.node,g.offset),m.addRange(p))}}}}for(f=[],m=l;m=m.parentNode;)m.nodeType===1&&f.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var S=f[l];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}Ro=!!yd,pd=yd=null}finally{Ue=i,ze.p=a,ue.T=n}}e.current=t,xt=2}}function Hp(){if(xt===2){xt=0;var e=Ka,t=Sr,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=ue.T,ue.T=null;var a=ze.p;ze.p=2;var i=Ue;Ue|=4;try{vp(e,t.alternate,t)}finally{Ue=i,ze.p=a,ue.T=n}}xt=3}}function qp(){if(xt===4||xt===3){xt=0,jw();var e=Ka,t=Sr,n=pa,a=Np;t.subtreeFlags&10256||t.flags&10256?xt=5:(xt=0,Sr=Ka=null,$p(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(Ga=null),Fd(n),t=t.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Ks,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=ue.T,i=ze.p,ze.p=2,ue.T=null;try{for(var r=e.onRecoverableError,s=0;s<a.length;s++){var l=a[s];r(l.value,{componentStack:l.stack})}}finally{ue.T=t,ze.p=i}}pa&3&&cc(),ea(e),i=e.pendingLanes,n&261930&&i&42?e===md?ps++:(ps=0,md=e):ps=0,el(0)}}function $p(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Zs(t)))}function cc(){return Bp(),Hp(),qp(),Ip()}function Ip(){if(xt!==5)return!1;var e=Ka,t=fd;fd=0;var n=Fd(pa),a=ue.T,i=ze.p;try{ze.p=32>n?32:n,ue.T=null,n=hd,hd=null;var r=Ka,s=pa;if(xt=0,Sr=Ka=null,pa=0,Ue&6)throw Error(R(331));var l=Ue;if(Ue|=4,jp(r.current),xp(r,r.current,s,n),Ue=l,el(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Ks,r)}catch{}return!0}finally{ze.p=i,ue.T=a,$p(e,t)}}function Gm(e,t,n){t=Dn(n,t),t=ld(e.stateNode,t,2),e=Va(e,t,2),e!==null&&(Qs(e,2),ea(e))}function He(e,t,n){if(e.tag===3)Gm(e,e,n);else for(;t!==null;){if(t.tag===3){Gm(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ga===null||!Ga.has(a))){e=Dn(n,e),n=ap(2),a=Va(t,n,2),a!==null&&(ip(n,a,t,e),Qs(a,2),ea(a));break}}t=t.return}}function nu(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new WS;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(n)||(Uf=!0,i.add(n),e=ax.bind(null,e,t,n),t.then(e,e))}function ax(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Xe===e&&(Ne&n)===n&&(ot===4||ot===3&&(Ne&62914560)===Ne&&300>hn()-sc?!(Ue&2)&&xr(e,0):zf|=n,wr===Ne&&(wr=0)),ea(e)}function Yp(e,t){t===0&&(t=kv()),e=Ri(e,t),e!==null&&(Qs(e,t),ea(e))}function ix(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Yp(e,n)}function rx(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(R(314))}a!==null&&a.delete(t),Yp(e,n)}function sx(e,t){return Zd(e,t)}var To=null,Gi=null,gd=!1,jo=!1,au=!1,qa=0;function ea(e){e!==Gi&&e.next===null&&(Gi===null?To=Gi=e:Gi=Gi.next=e),jo=!0,gd||(gd=!0,ox())}function el(e,t){if(!au&&jo){au=!0;do for(var n=!1,a=To;a!==null;){if(e!==0){var i=a.pendingLanes;if(i===0)var r=0;else{var s=a.suspendedLanes,l=a.pingedLanes;r=(1<<31-gn(42|e)+1)-1,r&=i&~(s&~l),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,Km(a,r))}else r=Ne,r=Jo(a,a===Xe?r:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),!(r&3)||Xs(a,r)||(n=!0,Km(a,r));a=a.next}while(n);au=!1}}function lx(){Vp()}function Vp(){jo=gd=!1;var e=0;qa!==0&&px()&&(e=qa);for(var t=hn(),n=null,a=To;a!==null;){var i=a.next,r=Gp(a,t);r===0?(a.next=null,n===null?To=i:n.next=i,i===null&&(Gi=n)):(n=a,(e!==0||r&3)&&(jo=!0)),a=i}xt!==0&&xt!==5||el(e),qa!==0&&(qa=0)}function Gp(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var s=31-gn(r),l=1<<s,o=i[s];o===-1?(!(l&n)||l&a)&&(i[s]=kw(l,t)):o<=t&&(e.expiredLanes|=l),r&=~l}if(t=Xe,n=Ne,n=Jo(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Be===2||Be===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Ac(a),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Xs(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&Ac(a),Fd(n)){case 2:case 8:n=Rv;break;case 32:n=lo;break;case 268435456:n=Mv;break;default:n=lo}return a=Kp.bind(null,e),n=Zd(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&Ac(a),e.callbackPriority=2,e.callbackNode=null,2}function Kp(e,t){if(xt!==0&&xt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(cc()&&e.callbackNode!==n)return null;var a=Ne;return a=Jo(e,e===Xe?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Ap(e,a,t),Gp(e,hn()),e.callbackNode!=null&&e.callbackNode===n?Kp.bind(null,e):null)}function Km(e,t){if(cc())return null;Ap(e,t,!0)}function ox(){_x(function(){Ue&6?Zd(Av,lx):Vp()})}function Bf(){if(qa===0){var e=pr;e===0&&(e=gl,gl<<=1,!(gl&261888)&&(gl=256)),qa=e}return qa}function Xm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Il(""+e)}function Qm(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function cx(e,t,n,a,i){if(t==="submit"&&n&&n.stateNode===i){var r=Xm((i[nn]||null).action),s=a.submitter;s&&(t=(t=s[nn]||null)?Xm(t.formAction):s.getAttribute("formAction"),t!==null&&(r=t,s=null));var l=new Po("action","action",null,a,i);e.push({event:l,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(qa!==0){var o=s?Qm(i,s):new FormData(i);rd(n,{pending:!0,data:o,method:i.method,action:r},null,o)}}else typeof r=="function"&&(l.preventDefault(),o=s?Qm(i,s):new FormData(i),rd(n,{pending:!0,data:o,method:i.method,action:r},r,o))},currentTarget:i}]})}}for(var iu=0;iu<Xu.length;iu++){var ru=Xu[iu],ux=ru.toLowerCase(),dx=ru[0].toUpperCase()+ru.slice(1);Yn(ux,"on"+dx)}Yn(iy,"onAnimationEnd");Yn(ry,"onAnimationIteration");Yn(sy,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn(OS,"onTransitionRun");Yn(DS,"onTransitionStart");Yn(NS,"onTransitionCancel");Yn(ly,"onTransitionEnd");vr("onMouseEnter",["mouseout","mouseover"]);vr("onMouseLeave",["mouseout","mouseover"]);vr("onPointerEnter",["pointerout","pointerover"]);vr("onPointerLeave",["pointerout","pointerover"]);Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Us));function Xp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var s=a.length-1;0<=s;s--){var l=a[s],o=l.instance,u=l.currentTarget;if(l=l.listener,o!==r&&i.isPropagationStopped())break e;r=l,i.currentTarget=u;try{r(i)}catch(d){co(d)}i.currentTarget=null,r=o}else for(s=0;s<a.length;s++){if(l=a[s],o=l.instance,u=l.currentTarget,l=l.listener,o!==r&&i.isPropagationStopped())break e;r=l,i.currentTarget=u;try{r(i)}catch(d){co(d)}i.currentTarget=null,r=o}}}}function Te(e,t){var n=t[Hu];n===void 0&&(n=t[Hu]=new Set);var a=e+"__bubble";n.has(a)||(Qp(t,e,2,!1),n.add(a))}function su(e,t,n){var a=0;t&&(a|=4),Qp(n,e,a,t)}var Tl="_reactListening"+Math.random().toString(36).slice(2);function Hf(e){if(!e[Tl]){e[Tl]=!0,Hv.forEach(function(n){n!=="selectionchange"&&(fx.has(n)||su(n,!1,e),su(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tl]||(t[Tl]=!0,su("selectionchange",!1,t))}}function Qp(e,t,n,a){switch(l0(t)){case 2:var i=qx;break;case 8:i=$x;break;default:i=Yf}n=i.bind(null,t,n,e),i=void 0,!Vu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function lu(e,t,n,a,i){var r=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var s=a.tag;if(s===3||s===4){var l=a.stateNode.containerInfo;if(l===i)break;if(s===4)for(s=a.return;s!==null;){var o=s.tag;if((o===3||o===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;l!==null;){if(s=Pi(l),s===null)return;if(o=s.tag,o===5||o===6||o===26||o===27){a=r=s;continue e}l=l.parentNode}}a=a.return}Xv(function(){var u=r,d=nf(n),f=[];e:{var h=oy.get(e);if(h!==void 0){var m=Po,v=e;switch(e){case"keypress":if(Vl(n)===0)break e;case"keydown":case"keyup":m=rS;break;case"focusin":v="focus",m=zc;break;case"focusout":v="blur",m=zc;break;case"beforeblur":case"afterblur":m=zc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Xw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=oS;break;case iy:case ry:case sy:m=Pw;break;case ly:m=uS;break;case"scroll":case"scrollend":m=Gw;break;case"wheel":m=fS;break;case"copy":case"cut":case"paste":m=Ww;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=im;break;case"toggle":case"beforetoggle":m=mS}var b=(t&4)!==0,w=!b&&(e==="scroll"||e==="scrollend"),y=b?h!==null?h+"Capture":null:h;b=[];for(var g=u,p;g!==null;){var S=g;if(p=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||p===null||y===null||(S=Os(g,y),S!=null&&b.push(zs(g,S,p))),w)break;g=g.return}0<b.length&&(h=new m(h,v,null,n,d),f.push({event:h,listeners:b}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==Yu&&(v=n.relatedTarget||n.fromElement)&&(Pi(v)||v[Cr]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?Pi(v):null,v!==null&&(w=Gs(v),b=v.tag,v!==w||b!==5&&b!==27&&b!==6)&&(v=null)):(m=null,v=u),m!==v)){if(b=nm,S="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(b=im,S="onPointerLeave",y="onPointerEnter",g="pointer"),w=m==null?h:ts(m),p=v==null?h:ts(v),h=new b(S,g+"leave",m,n,d),h.target=w,h.relatedTarget=p,S=null,Pi(d)===u&&(b=new b(y,g+"enter",v,n,d),b.target=p,b.relatedTarget=w,S=b),w=S,m&&v)t:{for(b=hx,y=m,g=v,p=0,S=y;S;S=b(S))p++;S=0;for(var E=g;E;E=b(E))S++;for(;0<p-S;)y=b(y),p--;for(;0<S-p;)g=b(g),S--;for(;p--;){if(y===g||g!==null&&y===g.alternate){b=y;break t}y=b(y),g=b(g)}b=null}else b=null;m!==null&&Jm(f,h,m,b,!1),v!==null&&w!==null&&Jm(f,w,v,b,!0)}}e:{if(h=u?ts(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var O=om;else if(lm(h))if(Fv)O=ES;else{O=SS;var x=wS}else m=h.nodeName,!m||m.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?u&&tf(u.elementType)&&(O=om):O=xS;if(O&&(O=O(e,u))){Wv(f,O,n,d);break e}x&&x(e,h,u),e==="focusout"&&u&&h.type==="number"&&u.memoizedProps.value!=null&&Iu(h,"number",h.value)}switch(x=u?ts(u):window,e){case"focusin":(lm(x)||x.contentEditable==="true")&&(Fi=x,Gu=u,cs=null);break;case"focusout":cs=Gu=Fi=null;break;case"mousedown":Ku=!0;break;case"contextmenu":case"mouseup":case"dragend":Ku=!1,hm(f,n,d);break;case"selectionchange":if(jS)break;case"keydown":case"keyup":hm(f,n,d)}var T;if(sf)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Wi?Pv(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Jv&&n.locale!=="ko"&&(Wi||N!=="onCompositionStart"?N==="onCompositionEnd"&&Wi&&(T=Qv()):(La=d,af="value"in La?La.value:La.textContent,Wi=!0)),x=Oo(u,N),0<x.length&&(N=new am(N,e,null,n,d),f.push({event:N,listeners:x}),T?N.data=T:(T=Zv(n),T!==null&&(N.data=T)))),(T=vS?yS(e,n):pS(e,n))&&(N=Oo(u,"onBeforeInput"),0<N.length&&(x=new am("onBeforeInput","beforeinput",null,n,d),f.push({event:x,listeners:N}),x.data=T)),cx(f,e,u,n,d)}Xp(f,t)})}function zs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Oo(e,t){for(var n=t+"Capture",a=[];e!==null;){var i=e,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=Os(e,n),i!=null&&a.unshift(zs(e,i,r)),i=Os(e,t),i!=null&&a.push(zs(e,i,r))),e.tag===3)return a;e=e.return}return[]}function hx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Jm(e,t,n,a,i){for(var r=t._reactName,s=[];n!==null&&n!==a;){var l=n,o=l.alternate,u=l.stateNode;if(l=l.tag,o!==null&&o===a)break;l!==5&&l!==26&&l!==27||u===null||(o=u,i?(u=Os(n,r),u!=null&&s.unshift(zs(n,u,o))):i||(u=Os(n,r),u!=null&&s.push(zs(n,u,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var mx=/\r\n?/g,gx=/\u0000|\uFFFD/g;function Pm(e){return(typeof e=="string"?e:""+e).replace(mx,`
`).replace(gx,"")}function Jp(e,t){return t=Pm(t),Pm(e)===t}function Ie(e,t,n,a,i,r){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||yr(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&yr(e,""+a);break;case"className":pl(e,"class",a);break;case"tabIndex":pl(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":pl(e,n,a);break;case"style":Kv(e,a,r);break;case"data":if(t!=="object"){pl(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Il(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(t!=="input"&&Ie(e,t,"name",i.name,i,null),Ie(e,t,"formEncType",i.formEncType,i,null),Ie(e,t,"formMethod",i.formMethod,i,null),Ie(e,t,"formTarget",i.formTarget,i,null)):(Ie(e,t,"encType",i.encType,i,null),Ie(e,t,"method",i.method,i,null),Ie(e,t,"target",i.target,i,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Il(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=ma);break;case"onScroll":a!=null&&Te("scroll",e);break;case"onScrollEnd":a!=null&&Te("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(R(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(R(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=Il(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Te("beforetoggle",e),Te("toggle",e),$l(e,"popover",a);break;case"xlinkActuate":ia(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":ia(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":ia(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":ia(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":ia(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":ia(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":ia(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":ia(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":ia(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":$l(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Yw.get(n)||n,$l(e,n,a))}}function vd(e,t,n,a,i,r){switch(n){case"style":Kv(e,a,r);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(R(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(R(60));e.innerHTML=n}}break;case"children":typeof a=="string"?yr(e,a):(typeof a=="number"||typeof a=="bigint")&&yr(e,""+a);break;case"onScroll":a!=null&&Te("scroll",e);break;case"onScrollEnd":a!=null&&Te("scrollend",e);break;case"onClick":a!=null&&(e.onclick=ma);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qv.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),r=e[nn]||null,r=r!=null?r[n]:null,typeof r=="function"&&e.removeEventListener(t,r,i),typeof a=="function")){typeof r!="function"&&r!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,i);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):$l(e,n,a)}}}function Bt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",e),Te("load",e);var a=!1,i=!1,r;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(s!=null)switch(r){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(R(137,t));default:Ie(e,t,r,s,n,null)}}i&&Ie(e,t,"srcSet",n.srcSet,n,null),a&&Ie(e,t,"src",n.src,n,null);return;case"input":Te("invalid",e);var l=r=s=i=null,o=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var d=n[a];if(d!=null)switch(a){case"name":i=d;break;case"type":s=d;break;case"checked":o=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(R(137,t));break;default:Ie(e,t,a,d,n,null)}}Yv(e,r,l,o,u,s,i,!1);return;case"select":Te("invalid",e),a=s=r=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":a=l;default:Ie(e,t,i,l,n,null)}t=r,n=s,e.multiple=!!a,t!=null?lr(e,!!a,t,!1):n!=null&&lr(e,!!a,n,!0);return;case"textarea":Te("invalid",e),r=i=a=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":a=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(R(91));break;default:Ie(e,t,s,l,n,null)}Gv(e,a,i,r);return;case"option":for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Ie(e,t,o,a,n,null)}return;case"dialog":Te("beforetoggle",e),Te("toggle",e),Te("cancel",e),Te("close",e);break;case"iframe":case"object":Te("load",e);break;case"video":case"audio":for(a=0;a<Us.length;a++)Te(Us[a],e);break;case"image":Te("error",e),Te("load",e);break;case"details":Te("toggle",e);break;case"embed":case"source":case"link":Te("error",e),Te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(a=n[u],a!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(R(137,t));default:Ie(e,t,u,a,n,null)}return;default:if(tf(t)){for(d in n)n.hasOwnProperty(d)&&(a=n[d],a!==void 0&&vd(e,t,d,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(a=n[l],a!=null&&Ie(e,t,l,a,n,null))}function vx(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,s=null,l=null,o=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":o=f;default:a.hasOwnProperty(m)||Ie(e,t,m,null,a,f)}}for(var h in a){var m=a[h];if(f=n[h],a.hasOwnProperty(h)&&(m!=null||f!=null))switch(h){case"type":r=m;break;case"name":i=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":s=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(R(137,t));break;default:m!==f&&Ie(e,t,h,m,a,f)}}$u(e,s,l,o,u,d,r,i);return;case"select":m=s=l=h=null;for(r in n)if(o=n[r],n.hasOwnProperty(r)&&o!=null)switch(r){case"value":break;case"multiple":m=o;default:a.hasOwnProperty(r)||Ie(e,t,r,null,a,o)}for(i in a)if(r=a[i],o=n[i],a.hasOwnProperty(i)&&(r!=null||o!=null))switch(i){case"value":h=r;break;case"defaultValue":l=r;break;case"multiple":s=r;default:r!==o&&Ie(e,t,i,r,a,o)}t=l,n=s,a=m,h!=null?lr(e,!!n,h,!1):!!a!=!!n&&(t!=null?lr(e,!!n,t,!0):lr(e,!!n,n?[]:"",!1));return;case"textarea":m=h=null;for(l in n)if(i=n[l],n.hasOwnProperty(l)&&i!=null&&!a.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ie(e,t,l,null,a,i)}for(s in a)if(i=a[s],r=n[s],a.hasOwnProperty(s)&&(i!=null||r!=null))switch(s){case"value":h=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(R(91));break;default:i!==r&&Ie(e,t,s,i,a,r)}Vv(e,h,m);return;case"option":for(var v in n)if(h=n[v],n.hasOwnProperty(v)&&h!=null&&!a.hasOwnProperty(v))switch(v){case"selected":e.selected=!1;break;default:Ie(e,t,v,null,a,h)}for(o in a)if(h=a[o],m=n[o],a.hasOwnProperty(o)&&h!==m&&(h!=null||m!=null))switch(o){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ie(e,t,o,h,a,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in n)h=n[b],n.hasOwnProperty(b)&&h!=null&&!a.hasOwnProperty(b)&&Ie(e,t,b,null,a,h);for(u in a)if(h=a[u],m=n[u],a.hasOwnProperty(u)&&h!==m&&(h!=null||m!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(R(137,t));break;default:Ie(e,t,u,h,a,m)}return;default:if(tf(t)){for(var w in n)h=n[w],n.hasOwnProperty(w)&&h!==void 0&&!a.hasOwnProperty(w)&&vd(e,t,w,void 0,a,h);for(d in a)h=a[d],m=n[d],!a.hasOwnProperty(d)||h===m||h===void 0&&m===void 0||vd(e,t,d,h,a,m);return}}for(var y in n)h=n[y],n.hasOwnProperty(y)&&h!=null&&!a.hasOwnProperty(y)&&Ie(e,t,y,null,a,h);for(f in a)h=a[f],m=n[f],!a.hasOwnProperty(f)||h===m||h==null&&m==null||Ie(e,t,f,h,a,m)}function Zm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var i=n[a],r=i.transferSize,s=i.initiatorType,l=i.duration;if(r&&l&&Zm(s)){for(s=0,l=i.responseEnd,a+=1;a<n.length;a++){var o=n[a],u=o.startTime;if(u>l)break;var d=o.transferSize,f=o.initiatorType;d&&Zm(f)&&(o=o.responseEnd,s+=d*(o<l?1:(l-u)/(o-u)))}if(--a,t+=8*(r+s)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var yd=null,pd=null;function Do(e){return e.nodeType===9?e:e.ownerDocument}function Wm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ou=null;function px(){var e=window.event;return e&&e.type==="popstate"?e===ou?!1:(ou=e,!0):(ou=null,!1)}var Zp=typeof setTimeout=="function"?setTimeout:void 0,bx=typeof clearTimeout=="function"?clearTimeout:void 0,Fm=typeof Promise=="function"?Promise:void 0,_x=typeof queueMicrotask=="function"?queueMicrotask:typeof Fm<"u"?function(e){return Fm.resolve(null).then(e).catch(wx)}:Zp;function wx(e){setTimeout(function(){throw e})}function ni(e){return e==="head"}function eg(e,t){var n=t,a=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(i),Tr(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")bs(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,bs(n);for(var r=n.firstChild;r;){var s=r.nextSibling,l=r.nodeName;r[Js]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=s}}else n==="body"&&bs(e.ownerDocument.body);n=i}while(n);Tr(t)}function tg(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function _d(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":_d(n),ef(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Sx(e,t,n,a){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Js])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=An(e.nextSibling),e===null)break}return null}function xx(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=An(e.nextSibling),e===null))return null;return e}function Wp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=An(e.nextSibling),e===null))return null;return e}function wd(e){return e.data==="$?"||e.data==="$~"}function Sd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ex(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function An(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var xd=null;function ng(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return An(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function ag(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Fp(e,t,n){switch(t=Do(n),e){case"html":if(e=t.documentElement,!e)throw Error(R(452));return e;case"head":if(e=t.head,!e)throw Error(R(453));return e;case"body":if(e=t.body,!e)throw Error(R(454));return e;default:throw Error(R(451))}}function bs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ef(e)}var Rn=new Map,ig=new Set;function No(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ea=ze.d;ze.d={f:Tx,r:jx,D:Ox,C:Dx,L:Nx,m:Cx,X:Rx,S:Ax,M:Mx};function Tx(){var e=Ea.f(),t=lc();return e||t}function jx(e){var t=Ar(e);t!==null&&t.tag===5&&t.type==="form"?Ky(t):Ea.r(e)}var Ur=typeof document>"u"?null:document;function e0(e,t,n){var a=Ur;if(a&&typeof t=="string"&&t){var i=On(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),ig.has(i)||(ig.add(i),e={rel:e,crossOrigin:n,href:t},a.querySelector(i)===null&&(t=a.createElement("link"),Bt(t,"link",e),Dt(t),a.head.appendChild(t)))}}function Ox(e){Ea.D(e),e0("dns-prefetch",e,null)}function Dx(e,t){Ea.C(e,t),e0("preconnect",e,t)}function Nx(e,t,n){Ea.L(e,t,n);var a=Ur;if(a&&e&&t){var i='link[rel="preload"][as="'+On(t)+'"]';t==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+On(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+On(n.imageSizes)+'"]')):i+='[href="'+On(e)+'"]';var r=i;switch(t){case"style":r=Er(e);break;case"script":r=zr(e)}Rn.has(r)||(e=nt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Rn.set(r,e),a.querySelector(i)!==null||t==="style"&&a.querySelector(tl(r))||t==="script"&&a.querySelector(nl(r))||(t=a.createElement("link"),Bt(t,"link",e),Dt(t),a.head.appendChild(t)))}}function Cx(e,t){Ea.m(e,t);var n=Ur;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+On(a)+'"][href="'+On(e)+'"]',r=i;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=zr(e)}if(!Rn.has(r)&&(e=nt({rel:"modulepreload",href:e},t),Rn.set(r,e),n.querySelector(i)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(nl(r)))return}a=n.createElement("link"),Bt(a,"link",e),Dt(a),n.head.appendChild(a)}}}function Ax(e,t,n){Ea.S(e,t,n);var a=Ur;if(a&&e){var i=sr(a).hoistableStyles,r=Er(e);t=t||"default";var s=i.get(r);if(!s){var l={loading:0,preload:null};if(s=a.querySelector(tl(r)))l.loading=5;else{e=nt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Rn.get(r))&&qf(e,n);var o=s=a.createElement("link");Dt(o),Bt(o,"link",e),o._p=new Promise(function(u,d){o.onload=u,o.onerror=d}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Wl(s,t,a)}s={type:"stylesheet",instance:s,count:1,state:l},i.set(r,s)}}}function Rx(e,t){Ea.X(e,t);var n=Ur;if(n&&e){var a=sr(n).hoistableScripts,i=zr(e),r=a.get(i);r||(r=n.querySelector(nl(i)),r||(e=nt({src:e,async:!0},t),(t=Rn.get(i))&&$f(e,t),r=n.createElement("script"),Dt(r),Bt(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(i,r))}}function Mx(e,t){Ea.M(e,t);var n=Ur;if(n&&e){var a=sr(n).hoistableScripts,i=zr(e),r=a.get(i);r||(r=n.querySelector(nl(i)),r||(e=nt({src:e,async:!0,type:"module"},t),(t=Rn.get(i))&&$f(e,t),r=n.createElement("script"),Dt(r),Bt(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},a.set(i,r))}}function rg(e,t,n,a){var i=(i=$a.current)?No(i):null;if(!i)throw Error(R(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Er(n.href),n=sr(i).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Er(n.href);var r=sr(i).hoistableStyles,s=r.get(e);if(s||(i=i.ownerDocument||i,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,s),(r=i.querySelector(tl(e)))&&!r._p&&(s.instance=r,s.state.loading=5),Rn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Rn.set(e,n),r||kx(i,e,n,s.state))),t&&a===null)throw Error(R(528,""));return s}if(t&&a!==null)throw Error(R(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=zr(n),n=sr(i).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(R(444,e))}}function Er(e){return'href="'+On(e)+'"'}function tl(e){return'link[rel="stylesheet"]['+e+"]"}function t0(e){return nt({},e,{"data-precedence":e.precedence,precedence:null})}function kx(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Bt(t,"link",n),Dt(t),e.head.appendChild(t))}function zr(e){return'[src="'+On(e)+'"]'}function nl(e){return"script[async]"+e}function sg(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+On(n.href)+'"]');if(a)return t.instance=a,Dt(a),a;var i=nt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Dt(a),Bt(a,"style",i),Wl(a,n.precedence,e),t.instance=a;case"stylesheet":i=Er(n.href);var r=e.querySelector(tl(i));if(r)return t.state.loading|=4,t.instance=r,Dt(r),r;a=t0(n),(i=Rn.get(i))&&qf(a,i),r=(e.ownerDocument||e).createElement("link"),Dt(r);var s=r;return s._p=new Promise(function(l,o){s.onload=l,s.onerror=o}),Bt(r,"link",a),t.state.loading|=4,Wl(r,n.precedence,e),t.instance=r;case"script":return r=zr(n.src),(i=e.querySelector(nl(r)))?(t.instance=i,Dt(i),i):(a=n,(i=Rn.get(r))&&(a=nt({},n),$f(a,i)),e=e.ownerDocument||e,i=e.createElement("script"),Dt(i),Bt(i,"link",a),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(R(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(a=t.instance,t.state.loading|=4,Wl(a,n.precedence,e));return t.instance}function Wl(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=a.length?a[a.length-1]:null,r=i,s=0;s<a.length;s++){var l=a[s];if(l.dataset.precedence===t)r=l;else if(r!==i)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function qf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function $f(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Fl=null;function lg(e,t,n){if(Fl===null){var a=new Map,i=Fl=new Map;i.set(n,a)}else i=Fl,a=i.get(n),a||(a=new Map,i.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var r=n[i];if(!(r[Js]||r[Ut]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var s=r.getAttribute(t)||"";s=e+s;var l=a.get(s);l?l.push(r):a.set(s,[r])}}return a}function og(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Ux(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function n0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function zx(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=Er(a.href),r=t.querySelector(tl(i));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Co.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=r,Dt(r);return}r=t.ownerDocument||t,a=t0(a),(i=Rn.get(i))&&qf(a,i),r=r.createElement("link"),Dt(r);var s=r;s._p=new Promise(function(l,o){s.onload=l,s.onerror=o}),Bt(r,"link",a),n.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Co.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var cu=0;function Lx(e,t){return e.stylesheets&&e.count===0&&eo(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&eo(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&cu===0&&(cu=62500*yx());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&eo(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>cu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(i)}}:null}function Co(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)eo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ao=null;function eo(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ao=new Map,t.forEach(Bx,e),Ao=null,Co.call(e))}function Bx(e,t){if(!(t.state.loading&4)){var n=Ao.get(e);if(n)var a=n.get(null);else{n=new Map,Ao.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var s=i[r];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),a=s)}a&&n.set(null,a)}i=t.instance,s=i.getAttribute("data-precedence"),r=n.get(s)||a,r===a&&n.set(null,i),n.set(s,i),this.count++,a=Co.bind(this),i.addEventListener("load",a),i.addEventListener("error",a),r?r.parentNode.insertBefore(i,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Ls={$$typeof:ha,Provider:null,Consumer:null,_currentValue:bi,_currentValue2:bi,_threadCount:0};function Hx(e,t,n,a,i,r,s,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rc(0),this.hiddenUpdates=Rc(null),this.identifierPrefix=a,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function a0(e,t,n,a,i,r,s,l,o,u,d,f){return e=new Hx(e,t,n,s,o,u,d,f,l),t=1,r===!0&&(t|=24),r=cn(3,null,null,t),e.current=r,r.stateNode=e,t=hf(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:a,isDehydrated:n,cache:t},vf(r),e}function i0(e){return e?(e=nr,e):nr}function r0(e,t,n,a,i,r){i=i0(i),a.context===null?a.context=i:a.pendingContext=i,a=Ya(t),a.payload={element:n},r=r===void 0?null:r,r!==null&&(a.callback=r),n=Va(e,a,t),n!==null&&(tn(n,e,t),ds(n,e,t))}function cg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function If(e,t){cg(e,t),(e=e.alternate)&&cg(e,t)}function s0(e){if(e.tag===13||e.tag===31){var t=Ri(e,67108864);t!==null&&tn(t,e,67108864),If(e,67108864)}}function ug(e){if(e.tag===13||e.tag===31){var t=vn();t=Wd(t);var n=Ri(e,t);n!==null&&tn(n,e,t),If(e,t)}}var Ro=!0;function qx(e,t,n,a){var i=ue.T;ue.T=null;var r=ze.p;try{ze.p=2,Yf(e,t,n,a)}finally{ze.p=r,ue.T=i}}function $x(e,t,n,a){var i=ue.T;ue.T=null;var r=ze.p;try{ze.p=8,Yf(e,t,n,a)}finally{ze.p=r,ue.T=i}}function Yf(e,t,n,a){if(Ro){var i=Ed(a);if(i===null)lu(e,t,a,Mo,n),dg(e,a);else if(Yx(i,e,t,n,a))a.stopPropagation();else if(dg(e,a),t&4&&-1<Ix.indexOf(e)){for(;i!==null;){var r=Ar(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var s=di(r.pendingLanes);if(s!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;s;){var o=1<<31-gn(s);l.entanglements[1]|=o,s&=~o}ea(r),!(Ue&6)&&(So=hn()+500,el(0))}}break;case 31:case 13:l=Ri(r,2),l!==null&&tn(l,r,2),lc(),If(r,2)}if(r=Ed(a),r===null&&lu(e,t,a,Mo,n),r===i)break;i=r}i!==null&&a.stopPropagation()}else lu(e,t,a,null,n)}}function Ed(e){return e=nf(e),Vf(e)}var Mo=null;function Vf(e){if(Mo=null,e=Pi(e),e!==null){var t=Gs(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=jv(t),e!==null)return e;e=null}else if(n===31){if(e=Ov(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Mo=e,null}function l0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ow()){case Av:return 2;case Rv:return 8;case lo:case Dw:return 32;case Mv:return 268435456;default:return 32}default:return 32}}var Td=!1,Xa=null,Qa=null,Ja=null,Bs=new Map,Hs=new Map,ka=[],Ix="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dg(e,t){switch(e){case"focusin":case"focusout":Xa=null;break;case"dragenter":case"dragleave":Qa=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":Bs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hs.delete(t.pointerId)}}function Wr(e,t,n,a,i,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[i]},t!==null&&(t=Ar(t),t!==null&&s0(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Yx(e,t,n,a,i){switch(t){case"focusin":return Xa=Wr(Xa,e,t,n,a,i),!0;case"dragenter":return Qa=Wr(Qa,e,t,n,a,i),!0;case"mouseover":return Ja=Wr(Ja,e,t,n,a,i),!0;case"pointerover":var r=i.pointerId;return Bs.set(r,Wr(Bs.get(r)||null,e,t,n,a,i)),!0;case"gotpointercapture":return r=i.pointerId,Hs.set(r,Wr(Hs.get(r)||null,e,t,n,a,i)),!0}return!1}function o0(e){var t=Pi(e.target);if(t!==null){var n=Gs(t);if(n!==null){if(t=n.tag,t===13){if(t=jv(n),t!==null){e.blockedOn=t,Jh(e.priority,function(){ug(n)});return}}else if(t===31){if(t=Ov(n),t!==null){e.blockedOn=t,Jh(e.priority,function(){ug(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function to(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ed(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Yu=a,n.target.dispatchEvent(a),Yu=null}else return t=Ar(n),t!==null&&s0(t),e.blockedOn=n,!1;t.shift()}return!0}function fg(e,t,n){to(e)&&n.delete(t)}function Vx(){Td=!1,Xa!==null&&to(Xa)&&(Xa=null),Qa!==null&&to(Qa)&&(Qa=null),Ja!==null&&to(Ja)&&(Ja=null),Bs.forEach(fg),Hs.forEach(fg)}function jl(e,t){e.blockedOn===t&&(e.blockedOn=null,Td||(Td=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,Vx)))}var Ol=null;function hg(e){Ol!==e&&(Ol=e,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,function(){Ol===e&&(Ol=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],i=e[t+2];if(typeof a!="function"){if(Vf(a||n)===null)continue;break}var r=Ar(n);r!==null&&(e.splice(t,3),t-=3,rd(r,{pending:!0,data:i,method:n.method,action:a},a,i))}}))}function Tr(e){function t(o){return jl(o,e)}Xa!==null&&jl(Xa,e),Qa!==null&&jl(Qa,e),Ja!==null&&jl(Ja,e),Bs.forEach(t),Hs.forEach(t);for(var n=0;n<ka.length;n++){var a=ka[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<ka.length&&(n=ka[0],n.blockedOn===null);)o0(n),n.blockedOn===null&&ka.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var i=n[a],r=n[a+1],s=i[nn]||null;if(typeof r=="function")s||hg(n);else if(s){var l=null;if(r&&r.hasAttribute("formAction")){if(i=r,s=r[nn]||null)l=s.formAction;else if(Vf(i)!==null)continue}else l=s.action;typeof l=="function"?n[a+1]=l:(n.splice(a,3),a-=3),hg(n)}}}function c0(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(s){return i=s})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function Gf(e){this._internalRoot=e}uc.prototype.render=Gf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));var n=t.current,a=vn();r0(n,a,e,t,null,null)};uc.prototype.unmount=Gf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;r0(e.current,2,null,e,null,null),lc(),t[Cr]=null}};function uc(e){this._internalRoot=e}uc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ka.length&&t!==0&&t<ka[n].priority;n++);ka.splice(n,0,e),n===0&&o0(e)}};var mg=Ev.version;if(mg!=="19.2.0")throw Error(R(527,mg,"19.2.0"));ze.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=_w(t),e=e!==null?Dv(e):null,e=e===null?null:e.stateNode,e};var Gx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ue,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{Ks=Dl.inject(Gx),mn=Dl}catch{}}Xo.createRoot=function(e,t){if(!Tv(e))throw Error(R(299));var n=!1,a="",i=ep,r=tp,s=np;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=a0(e,1,!1,null,null,n,a,null,i,r,s,c0),e[Cr]=t.current,Hf(e),new Gf(t)};Xo.hydrateRoot=function(e,t,n){if(!Tv(e))throw Error(R(299));var a=!1,i="",r=ep,s=tp,l=np,o=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(o=n.formState)),t=a0(e,1,!0,t,n??null,a,i,o,r,s,l,c0),t.context=i0(null),n=t.current,a=vn(),a=Wd(a),i=Ya(a),i.callback=null,Va(n,i,a),n=a,t.current.lanes=n,Qs(t,n),ea(t),e[Cr]=t.current,Hf(e),new uc(t)};Xo.version="19.2.0";function u0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u0)}catch(e){console.error(e)}}u0(),pv.exports=Xo;var Kx=pv.exports,jd=function(e,t){return jd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},jd(e,t)};function d0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");jd(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ko=function(){return ko=Object.assign||function(t){for(var n,a=1,i=arguments.length;a<i;a++){n=arguments[a];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ko.apply(this,arguments)};function Lr(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n}function f0(e,t,n,a){var i=arguments.length,r=i<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,n):a,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r}function h0(e,t){return function(n,a){t(n,a,e)}}function m0(e,t,n,a,i,r){function s(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var l=a.kind,o=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?a.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,a.name):{}),f,h=!1,m=n.length-1;m>=0;m--){var v={};for(var b in a)v[b]=b==="access"?{}:a[b];for(var b in a.access)v.access[b]=a.access[b];v.addInitializer=function(y){if(h)throw new TypeError("Cannot add initializers after decoration has completed");r.push(s(y||null))};var w=(0,n[m])(l==="accessor"?{get:d.get,set:d.set}:d[o],v);if(l==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(f=s(w.get))&&(d.get=f),(f=s(w.set))&&(d.set=f),(f=s(w.init))&&i.unshift(f)}else(f=s(w))&&(l==="field"?i.unshift(f):d[o]=f)}u&&Object.defineProperty(u,a.name,d),h=!0}function g0(e,t,n){for(var a=arguments.length>2,i=0;i<t.length;i++)n=a?t[i].call(e,n):t[i].call(e);return a?n:void 0}function v0(e){return typeof e=="symbol"?e:"".concat(e)}function y0(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function p0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ne(e,t,n,a){function i(r){return r instanceof n?r:new n(function(s){s(r)})}return new(n||(n=Promise))(function(r,s){function l(d){try{u(a.next(d))}catch(f){s(f)}}function o(d){try{u(a.throw(d))}catch(f){s(f)}}function u(d){d.done?r(d.value):i(d.value).then(l,o)}u((a=a.apply(e,t||[])).next())})}function b0(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},a,i,r,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(u){return function(d){return o([u,d])}}function o(u){if(a)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(a=1,i&&(r=u[0]&2?i.return:u[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,u[1])).done)return r;switch(i=0,r&&(u=[u[0]&2,r.value]),u[0]){case 0:case 1:r=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){n.label=u[1];break}if(u[0]===6&&n.label<r[1]){n.label=r[1],r=u;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(u);break}r[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(d){u=[6,d],i=0}finally{a=r=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var dc=Object.create?function(e,t,n,a){a===void 0&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){a===void 0&&(a=n),e[a]=t[n]};function _0(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&dc(t,e,n)}function Uo(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kf(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),i,r=[],s;try{for(;(t===void 0||t-- >0)&&!(i=a.next()).done;)r.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}return r}function w0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Kf(arguments[t]));return e}function S0(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var a=Array(e),i=0,t=0;t<n;t++)for(var r=arguments[t],s=0,l=r.length;s<l;s++,i++)a[i]=r[s];return a}function x0(e,t,n){if(n||arguments.length===2)for(var a=0,i=t.length,r;a<i;a++)(r||!(a in t))&&(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function jr(e){return this instanceof jr?(this.v=e,this):new jr(e)}function E0(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(e,t||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(v){return Promise.resolve(v).then(m,f)}}function l(m,v){a[m]&&(i[m]=function(b){return new Promise(function(w,y){r.push([m,b,w,y])>1||o(m,b)})},v&&(i[m]=v(i[m])))}function o(m,v){try{u(a[m](v))}catch(b){h(r[0][3],b)}}function u(m){m.value instanceof jr?Promise.resolve(m.value.v).then(d,f):h(r[0][2],m)}function d(m){o("next",m)}function f(m){o("throw",m)}function h(m,v){m(v),r.shift(),r.length&&o(r[0][0],r[0][1])}}function T0(e){var t,n;return t={},a("next"),a("throw",function(i){throw i}),a("return"),t[Symbol.iterator]=function(){return this},t;function a(i,r){t[i]=e[i]?function(s){return(n=!n)?{value:jr(e[i](s)),done:!1}:r?r(s):s}:r}}function j0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Uo=="function"?Uo(e):e[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(r){n[r]=e[r]&&function(s){return new Promise(function(l,o){s=e[r](s),i(l,o,s.done,s.value)})}}function i(r,s,l,o){Promise.resolve(o).then(function(u){r({value:u,done:l})},s)}}function O0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Xx=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Od=function(e){return Od=Object.getOwnPropertyNames||function(t){var n=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[n.length]=a);return n},Od(e)};function D0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Od(e),a=0;a<n.length;a++)n[a]!=="default"&&dc(t,e,n[a]);return Xx(t,e),t}function N0(e){return e&&e.__esModule?e:{default:e}}function C0(e,t,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(e):a?a.value:t.get(e)}function A0(e,t,n,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function R0(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function M0(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var a,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=t[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=t[Symbol.dispose],n&&(i=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");i&&(a=function(){try{i.call(this)}catch(r){return Promise.reject(r)}}),e.stack.push({value:t,dispose:a,async:n})}else n&&e.stack.push({async:!0});return t}var Qx=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var a=new Error(n);return a.name="SuppressedError",a.error=e,a.suppressed=t,a};function k0(e){function t(r){e.error=e.hasError?new Qx(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}var n,a=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&a===1)return a=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var r=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(r).then(i,function(s){return t(s),i()})}else a|=1}catch(s){t(s)}if(a===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function U0(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,a,i,r,s){return a?t?".jsx":".js":i&&(!r||!s)?n:i+r+"."+s.toLowerCase()+"js"}):e}const Jx={__extends:d0,__assign:ko,__rest:Lr,__decorate:f0,__param:h0,__esDecorate:m0,__runInitializers:g0,__propKey:v0,__setFunctionName:y0,__metadata:p0,__awaiter:ne,__generator:b0,__createBinding:dc,__exportStar:_0,__values:Uo,__read:Kf,__spread:w0,__spreadArrays:S0,__spreadArray:x0,__await:jr,__asyncGenerator:E0,__asyncDelegator:T0,__asyncValues:j0,__makeTemplateObject:O0,__importStar:D0,__importDefault:N0,__classPrivateFieldGet:C0,__classPrivateFieldSet:A0,__classPrivateFieldIn:R0,__addDisposableResource:M0,__disposeResources:k0,__rewriteRelativeImportExtension:U0},Px=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:M0,get __assign(){return ko},__asyncDelegator:T0,__asyncGenerator:E0,__asyncValues:j0,__await:jr,__awaiter:ne,__classPrivateFieldGet:C0,__classPrivateFieldIn:R0,__classPrivateFieldSet:A0,__createBinding:dc,__decorate:f0,__disposeResources:k0,__esDecorate:m0,__exportStar:_0,__extends:d0,__generator:b0,__importDefault:N0,__importStar:D0,__makeTemplateObject:O0,__metadata:p0,__param:h0,__propKey:v0,__read:Kf,__rest:Lr,__rewriteRelativeImportExtension:U0,__runInitializers:g0,__setFunctionName:y0,__spread:w0,__spreadArray:x0,__spreadArrays:S0,__values:Uo,default:Jx},Symbol.toStringTag,{value:"Module"})),Zx="modulepreload",Wx=function(e){return"/todo-note/"+e},gg={},Br=function(t,n,a){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(o=>{if(o=Wx(o),o in gg)return;gg[o]=!0;const u=o.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Zx,u||(f.as="script"),f.crossOrigin="",f.href=o,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}function r(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return i.then(s=>{for(const l of s||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})},Fx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Br(async()=>{const{default:a}=await Promise.resolve().then(()=>ki);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)};class Xf extends Error{constructor(t,n="FunctionsError",a){super(t),this.name=n,this.context=a}}class vg extends Xf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class yg extends Xf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class pg extends Xf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Dd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Dd||(Dd={}));class eE{constructor(t,{headers:n={},customFetch:a,region:i=Dd.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=Fx(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ne(this,arguments,void 0,function*(n,a={}){var i;try{const{headers:r,method:s,body:l,signal:o}=a;let u={},{region:d}=a;d||(d=this.region);const f=new URL(`${this.url}/${n}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let h;l&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)):h=l;const m=yield this.fetch(f.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),r),body:h,signal:o}).catch(y=>{throw y.name==="AbortError"?y:new vg(y)}),v=m.headers.get("x-relay-error");if(v&&v==="true")throw new yg(m);if(!m.ok)throw new pg(m);let b=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield m.json():b==="application/octet-stream"||b==="application/pdf"?w=yield m.blob():b==="text/event-stream"?w=m:b==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(r){return r instanceof Error&&r.name==="AbortError"?{data:null,error:new vg(r)}:{data:null,error:r,response:r instanceof pg||r instanceof yg?r.context:void 0}}})}}var Vt={};const Hr=ov(Px);var Nl={},Cl={},Al={},Rl={},Ml={},tE=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Or=tE();const nE=Or.fetch,z0=Or.fetch.bind(Or),L0=Or.Headers,aE=Or.Request,iE=Or.Response,ki=Object.freeze(Object.defineProperty({__proto__:null,Headers:L0,Request:aE,Response:iE,default:z0,fetch:nE},Symbol.toStringTag,{value:"Module"})),rE=ov(ki);var kl={},bg;function B0(){if(bg)return kl;bg=1,Object.defineProperty(kl,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return kl.default=e,kl}var _g;function H0(){if(_g)return Ml;_g=1,Object.defineProperty(Ml,"__esModule",{value:!0});const e=Hr,t=e.__importDefault(rE),n=e.__importDefault(B0());class a{constructor(r){var s,l;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(s=r.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=r.signal,this.isMaybeSingle=(l=r.isMaybeSingle)!==null&&l!==void 0?l:!1,r.fetch?this.fetch=r.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,s){return this.headers=new Headers(this.headers),this.headers.set(r,s),this}then(r,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,f,h,m;let v=null,b=null,w=null,y=u.status,g=u.statusText;if(u.ok){if(this.method!=="HEAD"){const O=await u.text();O===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?b=O:b=JSON.parse(O))}const S=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),E=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");S&&E&&E.length>1&&(w=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(v={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,w=null,y=406,g="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const S=await u.text();try{v=JSON.parse(S),Array.isArray(v)&&u.status===404&&(b=[],v=null,y=200,g="OK")}catch{u.status===404&&S===""?(y=204,g="No Content"):v={message:S}}if(v&&this.isMaybeSingle&&(!((m=v==null?void 0:v.details)===null||m===void 0)&&m.includes("0 rows"))&&(v=null,y=200,g="OK"),v&&this.shouldThrowOnError)throw new n.default(v)}return{error:v,data:b,count:w,status:y,statusText:g}});return this.shouldThrowOnError||(o=o.catch(u=>{var d,f,h;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(f=u==null?void 0:u.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(h=u==null?void 0:u.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),o.then(r,s)}returns(){return this}overrideTypes(){return this}}return Ml.default=a,Ml}var wg;function q0(){if(wg)return Rl;wg=1,Object.defineProperty(Rl,"__esModule",{value:!0});const t=Hr.__importDefault(H0());class n extends t.default{select(i){let r=!1;const s=(i??"*").split("").map(l=>/\s/.test(l)&&!r?"":(l==='"'&&(r=!r),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:r=!0,nullsFirst:s,foreignTable:l,referencedTable:o=l}={}){const u=o?`${o}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${i}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:r,referencedTable:s=r}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,r,{foreignTable:s,referencedTable:l=s}={}){const o=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${i}`),this.url.searchParams.set(u,`${r-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:r=!1,settings:s=!1,buffers:l=!1,wal:o=!1,format:u="text"}={}){var d;const f=[i?"analyze":null,r?"verbose":null,s?"settings":null,l?"buffers":null,o?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Rl.default=n,Rl}var Sg;function Qf(){if(Sg)return Al;Sg=1,Object.defineProperty(Al,"__esModule",{value:!0});const t=Hr.__importDefault(q0()),n=new RegExp("[,()]");class a extends t.default{eq(r,s){return this.url.searchParams.append(r,`eq.${s}`),this}neq(r,s){return this.url.searchParams.append(r,`neq.${s}`),this}gt(r,s){return this.url.searchParams.append(r,`gt.${s}`),this}gte(r,s){return this.url.searchParams.append(r,`gte.${s}`),this}lt(r,s){return this.url.searchParams.append(r,`lt.${s}`),this}lte(r,s){return this.url.searchParams.append(r,`lte.${s}`),this}like(r,s){return this.url.searchParams.append(r,`like.${s}`),this}likeAllOf(r,s){return this.url.searchParams.append(r,`like(all).{${s.join(",")}}`),this}likeAnyOf(r,s){return this.url.searchParams.append(r,`like(any).{${s.join(",")}}`),this}ilike(r,s){return this.url.searchParams.append(r,`ilike.${s}`),this}ilikeAllOf(r,s){return this.url.searchParams.append(r,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(r,s){return this.url.searchParams.append(r,`ilike(any).{${s.join(",")}}`),this}is(r,s){return this.url.searchParams.append(r,`is.${s}`),this}in(r,s){const l=Array.from(new Set(s)).map(o=>typeof o=="string"&&n.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(r,`in.(${l})`),this}contains(r,s){return typeof s=="string"?this.url.searchParams.append(r,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(r,`cs.{${s.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(s)}`),this}containedBy(r,s){return typeof s=="string"?this.url.searchParams.append(r,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(r,`cd.{${s.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(s)}`),this}rangeGt(r,s){return this.url.searchParams.append(r,`sr.${s}`),this}rangeGte(r,s){return this.url.searchParams.append(r,`nxl.${s}`),this}rangeLt(r,s){return this.url.searchParams.append(r,`sl.${s}`),this}rangeLte(r,s){return this.url.searchParams.append(r,`nxr.${s}`),this}rangeAdjacent(r,s){return this.url.searchParams.append(r,`adj.${s}`),this}overlaps(r,s){return typeof s=="string"?this.url.searchParams.append(r,`ov.${s}`):this.url.searchParams.append(r,`ov.{${s.join(",")}}`),this}textSearch(r,s,{config:l,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(r,`${u}fts${d}.${s}`),this}match(r){return Object.entries(r).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(r,s,l){return this.url.searchParams.append(r,`not.${s}.${l}`),this}or(r,{foreignTable:s,referencedTable:l=s}={}){const o=l?`${l}.or`:"or";return this.url.searchParams.append(o,`(${r})`),this}filter(r,s,l){return this.url.searchParams.append(r,`${s}.${l}`),this}}return Al.default=a,Al}var xg;function $0(){if(xg)return Cl;xg=1,Object.defineProperty(Cl,"__esModule",{value:!0});const t=Hr.__importDefault(Qf());class n{constructor(i,{headers:r={},schema:s,fetch:l}){this.url=i,this.headers=new Headers(r),this.schema=s,this.fetch=l}select(i,r){const{head:s=!1,count:l}=r??{},o=s?"HEAD":"GET";let u=!1;const d=(i??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:r,defaultToNull:s=!0}={}){var l;const o="POST";if(r&&this.headers.append("Prefer",`count=${r}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:r,ignoreDuplicates:s=!1,count:l,defaultToNull:o=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),l&&this.headers.append("Prefer",`count=${l}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:r}={}){var s;const l="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var r;const s="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}}return Cl.default=n,Cl}var Eg;function sE(){if(Eg)return Nl;Eg=1,Object.defineProperty(Nl,"__esModule",{value:!0});const e=Hr,t=e.__importDefault($0()),n=e.__importDefault(Qf());class a{constructor(r,{headers:s={},schema:l,fetch:o}={}){this.url=r,this.headers=new Headers(s),this.schemaName=l,this.fetch=o}from(r){const s=new URL(`${this.url}/${r}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(r){return new a(this.url,{headers:this.headers,schema:r,fetch:this.fetch})}rpc(r,s={},{head:l=!1,get:o=!1,count:u}={}){var d;let f;const h=new URL(`${this.url}/rpc/${r}`);let m;l||o?(f=l?"HEAD":"GET",Object.entries(s).filter(([b,w])=>w!==void 0).map(([b,w])=>[b,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([b,w])=>{h.searchParams.append(b,w)})):(f="POST",m=s);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new n.default({method:f,url:h,headers:v,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Nl.default=a,Nl}Object.defineProperty(Vt,"__esModule",{value:!0});var I0=Vt.PostgrestError=W0=Vt.PostgrestBuilder=P0=Vt.PostgrestTransformBuilder=Q0=Vt.PostgrestFilterBuilder=K0=Vt.PostgrestQueryBuilder=V0=Vt.PostgrestClient=void 0;const qr=Hr,Y0=qr.__importDefault(sE());var V0=Vt.PostgrestClient=Y0.default;const G0=qr.__importDefault($0());var K0=Vt.PostgrestQueryBuilder=G0.default;const X0=qr.__importDefault(Qf());var Q0=Vt.PostgrestFilterBuilder=X0.default;const J0=qr.__importDefault(q0());var P0=Vt.PostgrestTransformBuilder=J0.default;const Z0=qr.__importDefault(H0());var W0=Vt.PostgrestBuilder=Z0.default;const F0=qr.__importDefault(B0());I0=Vt.PostgrestError=F0.default;var eb=Vt.default={PostgrestClient:Y0.default,PostgrestQueryBuilder:G0.default,PostgrestFilterBuilder:X0.default,PostgrestTransformBuilder:J0.default,PostgrestBuilder:Z0.default,PostgrestError:F0.default};const lE=P_({__proto__:null,get PostgrestBuilder(){return W0},get PostgrestClient(){return V0},get PostgrestError(){return I0},get PostgrestFilterBuilder(){return Q0},get PostgrestQueryBuilder(){return K0},get PostgrestTransformBuilder(){return P0},default:eb},[Vt]),{PostgrestClient:oE,PostgrestQueryBuilder:FO,PostgrestFilterBuilder:eD,PostgrestTransformBuilder:tD,PostgrestBuilder:nD,PostgrestError:aD}=eb||lE;class cE{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const a=n.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const a=this.getWebSocketConstructor();return new a(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const uE="2.78.0",dE=`realtime-js/${uE}`,fE="1.0.0",Nd=1e4,hE=1e3,mE=100;var _s;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(_s||(_s={}));var wt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(wt||(wt={}));var Hn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Hn||(Hn={}));var Cd;(function(e){e.websocket="websocket"})(Cd||(Cd={}));var gi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(gi||(gi={}));class gE{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,n,a)}_decodeBroadcast(t,n,a){const i=n.getUint8(1),r=n.getUint8(2);let s=this.HEADER_LENGTH+2;const l=a.decode(t.slice(s,s+i));s=s+i;const o=a.decode(t.slice(s,s+r));s=s+r;const u=JSON.parse(a.decode(t.slice(s,t.byteLength)));return{ref:null,topic:l,event:o,payload:u}}}class tb{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Qe||(Qe={}));const Tg=(e,t,n={})=>{var a;const i=(a=n.skipTypes)!==null&&a!==void 0?a:[];return t?Object.keys(t).reduce((r,s)=>(r[s]=vE(s,e,t,i),r),{}):{}},vE=(e,t,n,a)=>{const i=t.find(l=>l.name===e),r=i==null?void 0:i.type,s=n[e];return r&&!a.includes(r)?nb(r,s):Ad(s)},nb=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return _E(t,n)}switch(e){case Qe.bool:return yE(t);case Qe.float4:case Qe.float8:case Qe.int2:case Qe.int4:case Qe.int8:case Qe.numeric:case Qe.oid:return pE(t);case Qe.json:case Qe.jsonb:return bE(t);case Qe.timestamp:return wE(t);case Qe.abstime:case Qe.date:case Qe.daterange:case Qe.int4range:case Qe.int8range:case Qe.money:case Qe.reltime:case Qe.text:case Qe.time:case Qe.timestamptz:case Qe.timetz:case Qe.tsrange:case Qe.tstzrange:return Ad(t);default:return Ad(t)}},Ad=e=>e,yE=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},pE=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},bE=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},_E=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,a=e[n];if(e[0]==="{"&&a==="}"){let r;const s=e.slice(1,n);try{r=JSON.parse("["+s+"]")}catch{r=s?s.split(","):[]}return r.map(l=>nb(t,l))}return e},wE=e=>typeof e=="string"?e.replace(" ","T"):e,ab=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class uu{constructor(t,n,a={},i=Nd){this.channel=t,this.event=n,this.payload=a,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var a;return this._hasReceived(t)&&n((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var jg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(jg||(jg={}));class ws{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},i=>{const{onJoin:r,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ws.syncState(this.state,i,r,s),this.pendingDiffs.forEach(o=>{this.state=ws.syncDiff(this.state,o,r,s)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},i=>{const{onJoin:r,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ws.syncDiff(this.state,i,r,s),l())}),this.onJoin((i,r,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:s})}),this.onLeave((i,r,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,a,i){const r=this.cloneDeep(t),s=this.transformState(n),l={},o={};return this.map(r,(u,d)=>{s[u]||(o[u]=d)}),this.map(s,(u,d)=>{const f=r[u];if(f){const h=d.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),v=d.filter(w=>m.indexOf(w.presence_ref)<0),b=f.filter(w=>h.indexOf(w.presence_ref)<0);v.length>0&&(l[u]=v),b.length>0&&(o[u]=b)}else l[u]=d}),this.syncDiff(r,{joins:l,leaves:o},a,i)}static syncDiff(t,n,a,i){const{joins:r,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return a||(a=()=>{}),i||(i=()=>{}),this.map(r,(l,o)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(o),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}a(l,d,o)}),this.map(s,(l,o)=>{let u=t[l];if(!u)return;const d=o.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,i(l,u,o),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(a=>n(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,a)=>{const i=t[a];return"metas"in i?n[a]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):n[a]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Og;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Og||(Og={}));var Ss;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ss||(Ss={}));var ua;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ua||(ua={}));class Jf{constructor(t,n={config:{}},a){var i,r;if(this.topic=t,this.params=n,this.socket=a,this.bindings={},this.state=wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new uu(this,Hn.join,this.params,this.timeout),this.rejoinTimer=new tb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hn.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new ws(this),this.broadcastEndpointURL=ab(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((r=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||r===void 0)&&r.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var a,i,r;if(this.socket.isConnected()||this.socket.connect(),this.state==wt.closed){const{config:{broadcast:s,presence:l,private:o}}=this.params,u=(i=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(m=>m.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Ss.PRESENCE]&&this.bindings[Ss.PRESENCE].length>0||((r=this.params.config.presence)===null||r===void 0?void 0:r.enabled)===!0,f={},h={broadcast:s,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:o};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ua.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ua.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket.setAuth(),m===void 0){t==null||t(ua.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,w=(v=b==null?void 0:b.length)!==null&&v!==void 0?v:0,y=[];for(let g=0;g<w;g++){const p=b[g],{filter:{event:S,schema:E,table:O,filter:x}}=p,T=m&&m[g];if(T&&T.event===S&&T.schema===E&&T.table===O&&T.filter===x)y.push(Object.assign(Object.assign({},p),{id:T.id}));else{this.unsubscribe(),this.state=wt.errored,t==null||t(ua.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(ua.SUBSCRIBED);return}}).receive("error",m=>{this.state=wt.errored,t==null||t(ua.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ua.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,a){return this.state===wt.joined&&t===Ss.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,a)}async httpSend(t,n,a={}){var i;const r=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:r,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=a.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let o=l.statusText;try{const u=await l.json();o=u.error||u.message||o}catch{}return Promise.reject(new Error(o))}async send(t,n={}){var a,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:r,payload:s}=t,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var s,l,o;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((o=(l=(s=this.params)===null||s===void 0?void 0:s.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&r("ok"),u.receive("ok",()=>r("ok")),u.receive("error",()=>r("error")),u.receive("timeout",()=>r("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=wt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hn.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(i=>{a=new uu(this,Hn.leave,{},t),a.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wt.closed,this.bindings={}}async _fetchWithTimeout(t,n,a){const i=new AbortController,r=setTimeout(()=>i.abort(),a),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(r),s}_push(t,n,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new uu(this,t,n,a);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>mE){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,a){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,a){var i,r;const s=t.toLocaleLowerCase(),{close:l,error:o,leave:u,join:d}=Hn;if(a&&[l,o,u,d].indexOf(s)>=0&&a!==this._joinRef())return;let h=this._onMessage(s,n,a);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var v,b,w;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(b=m.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===s}).map(m=>m.callback(h,a)):(r=this.bindings[s])===null||r===void 0||r.filter(m=>{var v,b,w,y,g,p;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in m){const S=m.id,E=(v=m.filter)===null||v===void 0?void 0:v.event;return S&&((b=n.ids)===null||b===void 0?void 0:b.includes(S))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(g=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((p=n==null?void 0:n.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===s}).map(m=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:b,table:w,commit_timestamp:y,type:g,errors:p}=v;h=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:y,eventType:g,new:{},old:{},errors:p}),this._getPayloadRecords(v))}m.callback(h,a)})}_isClosed(){return this.state===wt.closed}_isJoined(){return this.state===wt.joined}_isJoining(){return this.state===wt.joining}_isLeaving(){return this.state===wt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,a){const i=t.toLocaleLowerCase(),r={type:i,filter:n,callback:a};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(t,n){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===a&&Jf.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const a in t)if(t[a]!==n[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Hn.close,{},t)}_onError(t){this._on(Hn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Tg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Tg(t.columns,t.old_record)),n}}const du=()=>{},Ul={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},SE=[1e3,2e3,5e3,1e4],xE=1e4,EE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class TE{constructor(t,n){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Nd,this.transport=null,this.heartbeatIntervalMs=Ul.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=du,this.ref=0,this.reconnectTimer=null,this.logger=du,this.conn=null,this.sendBuffer=[],this.serializer=new gE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let r;return i?r=i:typeof fetch>"u"?r=(...s)=>Br(async()=>{const{default:l}=await Promise.resolve().then(()=>ki);return{default:l}},void 0).then(({default:l})=>l(...s)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):r=fetch,(...s)=>r(...s)},!(!((a=n==null?void 0:n.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Cd.websocket}`,this.httpEndpoint=ab(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=cE.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:fE}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,a){this.logger(t,n,a)}connectionState(){switch(this.conn&&this.conn.readyState){case _s.connecting:return gi.Connecting;case _s.open:return gi.Open;case _s.closing:return gi.Closing;default:return gi.Closed}}isConnected(){return this.connectionState()===gi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const a=`realtime:${t}`,i=this.getChannels().find(r=>r.topic===a);if(i)return i;{const r=new Jf(`realtime:${t}`,n,this);return this.channels.push(r),r}}push(t){const{topic:n,event:a,payload:i,ref:r}=t,s=()=>{this.encode(t,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${n} ${a} (${r})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(hE,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ul.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:i,payload:r,ref:s}=n,l=s?`(${s})`:"",o=r.status||"";this.log("receive",`${o} ${a} ${i} ${l}`.trim(),r),this.channels.filter(u=>u._isMember(a)).forEach(u=>u._trigger(i,r,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Hn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const a=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${a}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const a=new Blob([EE],{type:"application/javascript"});n=URL.createObjectURL(a)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const i={access_token:n,version:dE};n&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(Hn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new tb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ul.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,a,i,r,s,l,o,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(a=t==null?void 0:t.timeout)!==null&&a!==void 0?a:Nd,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Ul.HEARTBEAT_INTERVAL,this.worker=(r=t==null?void 0:t.worker)!==null&&r!==void 0?r:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:du,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=t==null?void 0:t.reconnectAfterMs)!==null&&o!==void 0?o:f=>SE[f-1]||xE,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(f,h)=>h(JSON.stringify(f)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Pf extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function st(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class jE extends Pf{constructor(t,n,a){super(t),this.name="StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Rd extends Pf{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const Zf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Br(async()=>{const{default:a}=await Promise.resolve().then(()=>ki);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)},OE=()=>ne(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Br(()=>Promise.resolve().then(()=>ki),void 0)).Response:Response}),Md=e=>{if(Array.isArray(e))return e.map(n=>Md(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,a])=>{const i=n.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));t[i]=Md(a)}),t},DE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},fu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},NE=(e,t,n)=>ne(void 0,void 0,void 0,function*(){const a=yield OE();e instanceof a&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const r=e.status||500,s=(i==null?void 0:i.statusCode)||r+"";t(new jE(fu(i),r,s))}).catch(i=>{t(new Rd(fu(i),i))}):t(new Rd(fu(e),e))}),CE=(e,t,n,a)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!a?i:(DE(a)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(a)):i.body=a,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function al(e,t,n,a,i,r){return ne(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(n,CE(t,a,i,r)).then(o=>{if(!o.ok)throw o;return a!=null&&a.noResolveJson?o:o.json()}).then(o=>s(o)).catch(o=>NE(o,l,a))})})}function qs(e,t,n,a){return ne(this,void 0,void 0,function*(){return al(e,"GET",t,n,a)})}function Ln(e,t,n,a,i){return ne(this,void 0,void 0,function*(){return al(e,"POST",t,a,i,n)})}function kd(e,t,n,a,i){return ne(this,void 0,void 0,function*(){return al(e,"PUT",t,a,i,n)})}function AE(e,t,n,a){return ne(this,void 0,void 0,function*(){return al(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),a)})}function Wf(e,t,n,a,i){return ne(this,void 0,void 0,function*(){return al(e,"DELETE",t,a,i,n)})}class RE{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return ne(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(st(t))return{data:null,error:t};throw t}})}}var ib;class ME{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[ib]="BlobDownloadBuilder",this.promise=null}asStream(){return new RE(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ne(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(st(t))return{data:null,error:t};throw t}})}}ib=Symbol.toStringTag;const kE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class UE{constructor(t,n={},a,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=a,this.fetch=Zf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,a,i){return ne(this,void 0,void 0,function*(){try{let r;const s=Object.assign(Object.assign({},Dg),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const o=s.metadata;typeof Blob<"u"&&a instanceof Blob?(r=new FormData,r.append("cacheControl",s.cacheControl),o&&r.append("metadata",this.encodeMetadata(o)),r.append("",a)):typeof FormData<"u"&&a instanceof FormData?(r=a,r.append("cacheControl",s.cacheControl),o&&r.append("metadata",this.encodeMetadata(o))):(r=a,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,o&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield(t=="PUT"?kd:Ln)(this.fetch,`${this.url}/object/${d}`,r,Object.assign({headers:l},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(st(r))return{data:null,error:r};throw r}})}upload(t,n,a){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,a)})}uploadToSignedUrl(t,n,a,i){return ne(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(t),s=this._getFinalPath(r),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",n);try{let o;const u=Object.assign({upsert:Dg.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&a instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),o.append("",a)):typeof FormData<"u"&&a instanceof FormData?(o=a,o.append("cacheControl",u.cacheControl)):(o=a,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield kd(this.fetch,l.toString(),o,{headers:d});return{data:{path:r,fullPath:f.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(st(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(t,n){return ne(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const r=yield Ln(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:i}),s=new URL(this.url+r.url),l=s.searchParams.get("token");if(!l)throw new Pf("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:l},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(st(a))return{data:null,error:a};throw a}})}update(t,n,a){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,a)})}move(t,n,a){return ne(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(st(i))return{data:null,error:i};throw i}})}copy(t,n,a){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield Ln(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(st(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,a){return ne(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),r=yield Ln(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const s=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${s}`)},{data:r,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(st(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,a){return ne(this,void 0,void 0,function*(){try{const i=yield Ln(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),r=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${r}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(st(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=r?`?${r}`:"",l=this._getFinalPath(t),o=()=>qs(this.fetch,`${this.url}/${i}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new ME(o,this.shouldThrowOnError)}info(t){return ne(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const a=yield qs(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Md(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(st(a))return{data:null,error:a};throw a}})}exists(t){return ne(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield AE(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(st(a)&&a instanceof Rd){const i=a.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,n){const a=this._getFinalPath(t),i=[],r=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";r!==""&&i.push(r);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&i.push(o);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${u}`)}}}remove(t){return ne(this,void 0,void 0,function*(){try{return{data:yield Wf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}list(t,n,a){return ne(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},kE),n),{prefix:t||""});return{data:yield Ln(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},a),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(st(i))return{data:null,error:i};throw i}})}listV2(t,n){return ne(this,void 0,void 0,function*(){try{const a=Object.assign({},t);return{data:yield Ln(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(st(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const rb="2.78.0",sb={"X-Client-Info":`storage-js/${rb}`};class zE{constructor(t,n={},a,i){this.shouldThrowOnError=!1;const r=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sb),n),this.fetch=Zf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ne(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield qs(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}getBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}createBucket(t){return ne(this,arguments,void 0,function*(n,a={public:!1}){try{return{data:yield Ln(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(st(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return ne(this,void 0,void 0,function*(){try{return{data:yield kd(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(st(a))return{data:null,error:a};throw a}})}emptyBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:yield Wf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class LE{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sb),n),this.fetch=Zf(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}listBuckets(t){return ne(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const a=n.toString(),i=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`;return{data:yield qs(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:yield Wf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(st(n))return{data:null,error:n};throw n}})}}const Ff={"X-Client-Info":`storage-js/${rb}`,"Content-Type":"application/json"};class lb extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function un(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class hu extends lb{constructor(t,n,a){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class BE extends lb{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Ng;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ng||(Ng={}));const eh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Br(async()=>{const{default:a}=await Promise.resolve().then(()=>ki);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)},HE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Cg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),qE=(e,t,n)=>ne(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e.status||500,r=e;if(typeof r.json=="function")r.json().then(s=>{const l=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||i+"";t(new hu(Cg(s),i,l))}).catch(()=>{const s=i+"",l=r.statusText||`HTTP ${i} error`;t(new hu(l,i,s))});else{const s=i+"",l=r.statusText||`HTTP ${i} error`;t(new hu(l,i,s))}}else t(new BE(Cg(e),e))}),$E=(e,t,n,a)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return a?(HE(a)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(a)):i.body=a,Object.assign(Object.assign({},i),n)):i};function IE(e,t,n,a,i,r){return ne(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(n,$E(t,a,i,r)).then(o=>{if(!o.ok)throw o;if(a!=null&&a.noResolveJson)return o;const u=o.headers.get("content-type");return!u||!u.includes("application/json")?{}:o.json()}).then(o=>s(o)).catch(o=>qE(o,l,a))})})}function dn(e,t,n,a,i){return ne(this,void 0,void 0,function*(){return IE(e,"POST",t,a,i,n)})}class YE{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ff),n),this.fetch=eh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ne(this,void 0,void 0,function*(){try{return{data:(yield dn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}getIndex(t,n){return ne(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(un(a))return{data:null,error:a};throw a}})}listIndexes(t){return ne(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return ne(this,void 0,void 0,function*(){try{return{data:(yield dn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(un(a))return{data:null,error:a};throw a}})}}class VE{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ff),n),this.fetch=eh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ne(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield dn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}getVectors(t){return ne(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}listVectors(t){return ne(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield dn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}queryVectors(t){return ne(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}deleteVectors(t){return ne(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield dn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}}class GE{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ff),n),this.fetch=eh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:(yield dn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}getBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}listBuckets(){return ne(this,arguments,void 0,function*(t={}){try{return{data:yield dn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ne(this,void 0,void 0,function*(){try{return{data:(yield dn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(un(n))return{data:null,error:n};throw n}})}}class KE extends GE{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new XE(this.url,this.headers,t,this.fetch)}}class XE extends YE{constructor(t,n,a,i){super(t,n,i),this.vectorBucketName=a}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ne(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ne(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ne(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ne(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new QE(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class QE extends VE{constructor(t,n,a,i,r){super(t,n,r),this.vectorBucketName=a,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ne(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ne(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ne(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ne(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ne(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class JE extends zE{constructor(t,n={},a,i){super(t,n,a,i)}from(t){return new UE(this.url,this.headers,t,this.fetch)}get vectors(){return new KE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new LE(this.url+"/iceberg",this.headers,this.fetch)}}const PE="2.78.0";let is="";typeof Deno<"u"?is="deno":typeof document<"u"?is="web":typeof navigator<"u"&&navigator.product==="ReactNative"?is="react-native":is="node";const ZE={"X-Client-Info":`supabase-js-${is}/${PE}`},WE={headers:ZE},FE={schema:"public"},eT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tT={},nT=e=>{let t;return e?t=e:typeof fetch>"u"?t=z0:t=fetch,(...n)=>t(...n)},aT=()=>typeof Headers>"u"?L0:Headers,iT=(e,t,n)=>{const a=nT(n),i=aT();return async(r,s)=>{var l;const o=(l=await t())!==null&&l!==void 0?l:e;let u=new i(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${o}`),a(r,Object.assign(Object.assign({},s),{headers:u}))}};function rT(e){return e.endsWith("/")?e:e+"/"}function sT(e,t){var n,a;const{db:i,auth:r,realtime:s,global:l}=e,{db:o,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},o),i),auth:Object.assign(Object.assign({},u),r),realtime:Object.assign(Object.assign({},d),s),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(a=l==null?void 0:l.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function lT(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(rT(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ob="2.78.0",Ki=30*1e3,Ud=3,mu=Ud*Ki,oT="http://localhost:9999",cT="supabase.auth.token",uT={"X-Client-Info":`gotrue-js/${ob}`},zd="X-Supabase-Api-Version",cb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fT=10*60*1e3;class $s extends Error{constructor(t,n,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=a}}function re(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class hT extends $s{constructor(t,n,a){super(t,n,a),this.name="AuthApiError",this.status=n,this.code=a}}function mT(e){return re(e)&&e.name==="AuthApiError"}class vi extends $s{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ai extends $s{constructor(t,n,a,i){super(t,a,i),this.name=n,this.status=a}}class Un extends ai{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function gT(e){return re(e)&&e.name==="AuthSessionMissingError"}class Bi extends ai{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zl extends ai{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ll extends ai{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vT(e){return re(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ag extends ai{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ld extends ai{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function gu(e){return re(e)&&e.name==="AuthRetryableFetchError"}class Rg extends ai{constructor(t,n,a){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=a}}class Bd extends ai{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const zo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Mg=` 	
\r=`.split(""),yT=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Mg.length;t+=1)e[Mg[t].charCodeAt(0)]=-2;for(let t=0;t<zo.length;t+=1)e[zo[t].charCodeAt(0)]=t;return e})();function kg(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;n(zo[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;n(zo[a]),t.queuedBits-=6}}function ub(e,t,n){const a=yT[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ug(e){const t=[],n=s=>{t.push(String.fromCodePoint(s))},a={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=s=>{_T(s,a,n)};for(let s=0;s<e.length;s+=1)ub(e.charCodeAt(s),i,r);return t.join("")}function pT(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function bT(e,t){for(let n=0;n<e.length;n+=1){let a=e.charCodeAt(n);if(a>55295&&a<=56319){const i=(a-55296)*1024&65535;a=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}pT(a,t)}}function _T(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let a=1;a<6;a+=1)if(!(e>>7-a&1)){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function hr(e){const t=[],n={queue:0,queuedBits:0},a=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)ub(e.charCodeAt(i),n,a);return new Uint8Array(t)}function wT(e){const t=[];return bT(e,n=>t.push(n)),new Uint8Array(t)}function pi(e){const t=[],n={queue:0,queuedBits:0},a=i=>{t.push(i)};return e.forEach(i=>kg(i,n,a)),kg(null,n,a),t.join("")}function ST(e){return Math.round(Date.now()/1e3)+e}function xT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const It=()=>typeof window<"u"&&typeof document<"u",oi={tested:!1,writable:!1},db=()=>{if(!It())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(oi.tested)return oi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),oi.tested=!0,oi.writable=!0}catch{oi.tested=!0,oi.writable=!1}return oi.writable};function ET(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,r)=>{t[r]=i})}catch{}return n.searchParams.forEach((a,i)=>{t[i]=a}),t}const fb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Br(async()=>{const{default:a}=await Promise.resolve().then(()=>ki);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)},TT=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Xi=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ci=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Oa=async(e,t)=>{await e.removeItem(t)};class fc{constructor(){this.promise=new fc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}fc.promiseConstructor=Promise;function vu(e){const t=e.split(".");if(t.length!==3)throw new Bd("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!dT.test(t[a]))throw new Bd("JWT not in base64url format");return{header:JSON.parse(Ug(t[0])),payload:JSON.parse(Ug(t[1])),signature:hr(t[2]),raw:{header:t[0],payload:t[1]}}}async function jT(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function OT(e,t){return new Promise((a,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const s=await e(r);if(!t(r,null,s)){a(s);return}}catch(s){if(!t(r,s)){i(s);return}}})()})}function DT(e){return("0"+e.toString(16)).substr(-2)}function NT(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=n.length;let i="";for(let r=0;r<56;r++)i+=n.charAt(Math.floor(Math.random()*a));return i}return crypto.getRandomValues(t),Array.from(t,DT).join("")}async function CT(e){const n=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(a);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}async function AT(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await CT(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hi(e,t,n=!1){const a=NT();let i=a;n&&(i+="/PASSWORD_RECOVERY"),await Xi(e,`${t}-code-verifier`,i);const r=await AT(a);return[r,a===r?"plain":"s256"]}const RT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function MT(e){const t=e.headers.get(zd);if(!t||!t.match(RT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function kT(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function UT(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qi(e){if(!zT.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yu(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function LT(e,t){return new Proxy(e,{get:(n,a,i)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const r=a.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)"||r==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,a,i)}return!t.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,a,i)}})}function zg(e){return JSON.parse(JSON.stringify(e))}const mi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),BT=[502,503,504];async function Lg(e){var t;if(!TT(e))throw new Ld(mi(e),0);if(BT.includes(e.status))throw new Ld(mi(e),e.status);let n;try{n=await e.json()}catch(r){throw new vi(mi(r),r)}let a;const i=MT(e);if(i&&i.getTime()>=cb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?a=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(a=n.error_code),a){if(a==="weak_password")throw new Rg(mi(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Un}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0))throw new Rg(mi(n),e.status,n.weak_password.reasons);throw new hT(mi(n),e.status||500,a)}const HT=(e,t,n,a)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(a),Object.assign(Object.assign({},i),n))};async function ce(e,t,n,a){var i;const r=Object.assign({},a==null?void 0:a.headers);r[zd]||(r[zd]=cb["2024-01-01"].name),a!=null&&a.jwt&&(r.Authorization=`Bearer ${a.jwt}`);const s=(i=a==null?void 0:a.query)!==null&&i!==void 0?i:{};a!=null&&a.redirectTo&&(s.redirect_to=a.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",o=await qT(e,t,n+l,{headers:r,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(o):{data:Object.assign({},o),error:null}}async function qT(e,t,n,a,i,r){const s=HT(t,a,i,r);let l;try{l=await e(n,Object.assign({},s))}catch(o){throw console.error(o),new Ld(mi(o),0)}if(l.ok||await Lg(l),a!=null&&a.noResolveJson)return l;try{return await l.json()}catch(o){await Lg(o)}}function zn(e){var t;let n=null;YT(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=ST(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:a},error:null}}function Bg(e){const t=zn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ua(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function $T(e){return{data:e,error:null}}function IT(e){const{action_link:t,email_otp:n,hashed_token:a,redirect_to:i,verification_type:r}=e,s=Lr(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:a,redirect_to:i,verification_type:r},o=Object.assign({},s);return{data:{properties:l,user:o},error:null}}function Hg(e){return e}function YT(e){return e.access_token&&e.refresh_token&&e.expires_in}const pu=["global","local","others"];class VT{constructor({url:t="",headers:n={},fetch:a}){this.url=t,this.headers=n,this.fetch=fb(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=pu[0]){if(pu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pu.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(re(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,n={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ua})}catch(a){if(re(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:n}=t,a=Lr(t,["options"]),i=Object.assign(Object.assign({},a),n);return"newEmail"in a&&(i.new_email=a==null?void 0:a.newEmail,delete i.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:IT,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ua})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,a,i,r,s,l,o;try{const u={nextPage:null,lastPage:0,total:0},d=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(r=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:Hg});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return m.length>0&&(m.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=b}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(re(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){qi(t);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ua})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){qi(t);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ua})}catch(a){if(re(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,n=!1){qi(t);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ua})}catch(a){if(re(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){qi(t.userId);try{const{data:n,error:a}=await ce(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:a}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _deleteFactor(t){qi(t.userId),qi(t.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,a,i,r,s,l,o;try{const u={nextPage:null,lastPage:0,total:0},d=await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(r=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:Hg});if(d.error)throw d.error;const f=await d.json(),h=(s=d.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return m.length>0&&(m.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=b}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(re(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(re(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(t){try{return await ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}}function qg(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const $i={debug:!!(globalThis&&db()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class GT extends hb{}async function KT(e,t,n){$i.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),$i.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async i=>{if(i){$i.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{$i.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw $i.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new GT(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if($i.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function XT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function mb(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function QT(e){return parseInt(e,16)}function JT(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}function PT(e){var t;const{chainId:n,domain:a,expirationTime:i,issuedAt:r=new Date,nonce:s,notBefore:l,requestId:o,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=mb(e.address),v=d?`${d}://${a}`:a,b=e.statement?`${e.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${m}

${b}`;let y=`URI: ${f}
Version: ${h}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${r.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),o&&(y+=`
Request ID: ${o}`),u){let g=`
Resources:`;for(const p of u){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);g+=`
- ${p}`}y+=g}return`${w}
${y}`}class gt extends Error{constructor({message:t,code:n,cause:a,name:i}){var r;super(t,{cause:a}),this.__isWebAuthnError=!0,this.name=(r=i??(a instanceof Error?a.name:void 0))!==null&&r!==void 0?r:"Unknown Error",this.code=n}}class Lo extends gt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function ZT({error:e,options:t}){var n,a,i;const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new gt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=r.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new gt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((a=r.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new gt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=r.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new gt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new gt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new gt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return r.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new gt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new gt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(gb(s)){if(r.rp.id!==s)return new gt({message:`The RP ID "${r.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(r.user.id.byteLength<1||r.user.id.byteLength>64)return new gt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new gt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function WT({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new gt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new gt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(gb(a)){if(n.rpId!==a)return new gt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new gt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class FT{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const e1=new FT;function t1(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:a}=e,i=Lr(e,["challenge","user","excludeCredentials"]),r=hr(t).buffer,s=Object.assign(Object.assign({},n),{id:hr(n.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:r,user:s});if(a&&a.length>0){l.excludeCredentials=new Array(a.length);for(let o=0;o<a.length;o++){const u=a[o];l.excludeCredentials[o]=Object.assign(Object.assign({},u),{id:hr(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function n1(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,a=Lr(e,["challenge","allowCredentials"]),i=hr(t).buffer,r=Object.assign(Object.assign({},a),{challenge:i});if(n&&n.length>0){r.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const l=n[s];r.allowCredentials[s]=Object.assign(Object.assign({},l),{id:hr(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return r}function a1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:pi(new Uint8Array(e.response.attestationObject)),clientDataJSON:pi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function i1(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,a=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:pi(new Uint8Array(i.authenticatorData)),clientDataJSON:pi(new Uint8Array(i.clientDataJSON)),signature:pi(new Uint8Array(i.signature)),userHandle:i.userHandle?pi(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function gb(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function $g(){var e,t;return!!(It()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function r1(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Lo("Browser returned unexpected credential type",t)}:{data:null,error:new Lo("Empty credential response",t)}}catch(t){return{data:null,error:ZT({error:t,options:e})}}}async function s1(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Lo("Browser returned unexpected credential type",t)}:{data:null,error:new Lo("Empty credential response",t)}}catch(t){return{data:null,error:WT({error:t,options:e})}}}const l1={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},o1={userVerification:"preferred",hints:["security-key"]};function Bo(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),a={};for(const i of e)if(i)for(const r in i){const s=i[r];if(s!==void 0)if(Array.isArray(s))a[r]=s;else if(n(s))a[r]=s;else if(t(s)){const l=a[r];t(l)?a[r]=Bo(l,s):a[r]=Bo(s)}else a[r]=s}return a}function c1(e,t){return Bo(l1,e,t||{})}function u1(e,t){return Bo(o1,e,t||{})}class d1{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:a,signal:i},r){try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!s)return{data:null,error:l};const o=i??e1.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${a}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=c1(s.webauthn.credential_options.publicKey,r==null?void 0:r.create),{data:d,error:f}=await r1({publicKey:u,signal:o});return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=u1(s.webauthn.credential_options.publicKey,r==null?void 0:r.request),{data:d,error:f}=await s1(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:o}));return d?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(s){return re(s)?{data:null,error:s}:{data:null,error:new vi("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:n,webauthn:a}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:a})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:i}},r){if(!n)return{data:null,error:new $s("rpId is required for WebAuthn authentication")};try{if(!$g())return{data:null,error:new vi("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:a},signal:i},{request:r});if(!s)return{data:null,error:l};const{webauthn:o}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:o.type,rpId:n,rpOrigins:a,credential_response:o.credential_response}})}catch(s){return re(s)?{data:null,error:s}:{data:null,error:new vi("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:i},r){if(!n)return{data:null,error:new $s("rpId is required for WebAuthn registration")};try{if(!$g())return{data:null,error:new vi("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:o,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:a},signal:i},{create:r});return o?this._verify({factorId:s.id,challengeId:o.challengeId,webauthn:{rpId:n,rpOrigins:a,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:u}}catch(s){return re(s)?{data:null,error:s}:{data:null,error:new vi("Unexpected error in register",s)}}}}XT();const f1={url:oT,storageKey:cT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ig(e,t,n){return await n()}const Ii={};class Is{get jwks(){var t,n;return(n=(t=Ii[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Ii[this.storageKey]=Object.assign(Object.assign({},Ii[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Ii[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ii[this.storageKey]=Object.assign(Object.assign({},Ii[this.storageKey]),{cachedAt:t})}constructor(t){var n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Is.nextInstanceID,Is.nextInstanceID+=1,this.instanceID>0&&It()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},f1),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new VT({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=fb(i.fetch),this.lock=i.lock||Ig,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:It()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=KT:this.lock=Ig,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new d1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:db()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qg(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=qg(this.memoryStorage)),It()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ob}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=ET(window.location.href);let a="none";if(this._isImplicitGrantCallback(n)?a="implicit":await this._isPKCECallback(n)&&(a="pkce"),It()&&this.detectSessionInUrl&&a!=="none"){const{data:i,error:r}=await this._getSessionFromURL(n,a);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),vT(r)){const o=(t=r.details)===null||t===void 0?void 0:t.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:s,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",l),await this._saveSession(s),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return re(n)?{error:n}:{error:new vi("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,a,i;try{const r=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:zn}),{data:s,error:l}=r;if(l||!s)return{data:{user:null,session:null},error:l};const o=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(t){var n,a,i;try{let r;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Hi(this.storage,this.storageKey)),r=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:v},xform:zn})}else if("phone"in t){const{phone:d,password:f,options:h}=t;r=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:zn})}else throw new zl("You must provide either an email or phone number and a password");const{data:s,error:l}=r;if(l||!s)return{data:{user:null,session:null},error:l};const o=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(r){if(re(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(t){try{let n;if("email"in t){const{email:r,password:s,options:l}=t;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Bg})}else if("phone"in t){const{phone:r,password:s,options:l}=t;n=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Bg})}else throw new zl("You must provide either an email or phone number and a password");const{data:a,error:i}=n;return i?{data:{user:null,session:null},error:i}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Bi}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:i})}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,a,i,r;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=t.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,a,i,r,s,l,o,u,d,f,h;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{chain:b,wallet:w,statement:y,options:g}=t;let p;if(It())if(typeof w=="object")p=w;else{const N=window;if("ethereum"in N&&typeof N.ethereum=="object"&&"request"in N.ethereum&&typeof N.ethereum.request=="function")p=N.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=w}const S=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),E=await p.request({method:"eth_requestAccounts"}).then(N=>N).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=mb(E[0]);let x=(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!x){const N=await p.request({method:"eth_chainId"});x=QT(N)}const T={domain:S.host,address:O,statement:y,uri:S.href,version:"1",chainId:x,nonce:(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=PT(T),v=await p.request({method:"personal_sign",params:[JT(m),O]})}try{const{data:b,error:w}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:v},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:zn});if(w)throw w;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Bi}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:w})}catch(b){if(re(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(t){var n,a,i,r,s,l,o,u,d,f,h,m;let v,b;if("message"in t)v=t.message,b=t.signature;else{const{chain:w,wallet:y,statement:g,options:p}=t;let S;if(It())if(typeof y=="object")S=y;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))S=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const E=new URL((n=p==null?void 0:p.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const O=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),g?{statement:g}:null));let x;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")x=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)x=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in x&&"signature"in x&&(typeof x.signedMessage=="string"||x.signedMessage instanceof Uint8Array)&&x.signature instanceof Uint8Array)v=typeof x.signedMessage=="string"?x.signedMessage:new TextDecoder().decode(x.signedMessage),b=x.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${E.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(i=(a=p==null?void 0:p.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((r=p==null?void 0:p.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((s=p==null?void 0:p.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((f=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...p.signInWithSolana.resources.map(x=>`- ${x}`)]:[]].join(`
`);const O=await S.signMessage(new TextEncoder().encode(v),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=O}}try{const{data:w,error:y}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:pi(b)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:zn});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new Bi}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(re(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const n=await ci(this.storage,`${this.storageKey}-code-verifier`),[a,i]=(n??"").split("/");try{const{data:r,error:s}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:zn});if(await Oa(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new Bi}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:s})}catch(r){if(re(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(t){try{const{options:n,provider:a,token:i,access_token:r,nonce:s}=t,l=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:i,access_token:r,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:zn}),{data:o,error:u}=l;return u?{data:{user:null,session:null},error:u}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Bi}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:u})}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,a,i,r,s;try{if("email"in t){const{email:l,options:o}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Hi(this.storage,this.storageKey));const{error:f}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(a=o==null?void 0:o.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:o}=t,{data:u,error:d}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=o==null?void 0:o.data)!==null&&i!==void 0?i:{},create_user:(r=o==null?void 0:o.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(s=o==null?void 0:o.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new zl("You must provide either an email or phone number.")}catch(l){if(re(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,a;try{let i,r;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,r=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:s,error:l}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:zn});if(l)throw l;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,u=s.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(i){if(re(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,a,i;try{let r=null,s=null;return this.flowType==="pkce"&&([r,s]=await Hi(this.storage,this.storageKey)),await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&a!==void 0?a:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:s}),headers:this.headers,xform:$T})}catch(r){if(re(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:a}=t;if(a)throw a;if(!n)throw new Un;const{error:i}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(re(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:a,type:i,options:r}=t,{error:s}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{email:a,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in t){const{phone:a,type:i,options:r}=t,{data:s,error:l}=await ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:a,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:l}}throw new zl("You must provide either an email or phone number and a type")}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await a,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=n();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ci(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<mu:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const s=await ci(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=yu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=LT(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{session:null},error:r}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ua}):await this._useSession(async n=>{var a,i,r;const{data:s,error:l}=n;if(l)throw l;return!(!((a=s.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Un}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:Ua})})}catch(n){if(re(n))return gT(n)&&(await this._removeSession(),await Oa(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async a=>{const{data:i,error:r}=a;if(r)throw r;if(!i.session)throw new Un;const s=i.session;let l=null,o=null;this.flowType==="pkce"&&t.email!=null&&([l,o]=await Hi(this.storage,this.storageKey));const{data:u,error:d}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:o}),jwt:s.access_token,xform:Ua});if(d)throw d;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(a){if(re(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Un;const n=Date.now()/1e3;let a=n,i=!0,r=null;const{payload:s}=vu(t.access_token);if(s.exp&&(a=s.exp,i=a<=n),i){const{data:l,error:o}=await this._callRefreshToken(t.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};r=l}else{const{data:l,error:o}=await this._getUser(t.access_token);if(o)throw o;r={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-n,expires_at:a},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(n){if(re(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var a;if(!t){const{data:s,error:l}=n;if(l)throw l;t=(a=s.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new Un;const{data:i,error:r}=await this._callRefreshToken(t.refresh_token);return r?{data:{user:null,session:null},error:r}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(re(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!It())throw new Ll("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ll(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Ag("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ll("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ag("No code detected.");const{data:g,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:i,access_token:r,refresh_token:s,expires_in:l,expires_at:o,token_type:u}=t;if(!r||!l||!s||!u)throw new Ll("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;o&&(h=parseInt(o));const m=h-d;m*1e3<=Ki&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const v=h-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,d);const{data:b,error:w}=await this._getUser(r);if(w)throw w;const y={provider_token:a,provider_refresh_token:i,access_token:r,expires_in:f,expires_at:h,refresh_token:s,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(a){if(re(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ci(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var a;const{data:i,error:r}=n;if(r)return{error:r};const s=(a=i.session)===null||a===void 0?void 0:a.access_token;if(s){const{error:l}=await this.admin.signOut(s,t);if(l&&!(mT(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Oa(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=xT(),a={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async n=>{var a,i;try{const{data:{session:r},error:s}=n;if(s)throw s;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",t,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",r),console.error(r)}})}async resetPasswordForEmail(t,n={}){let a=null,i=null;this.flowType==="pkce"&&([a,i]=await Hi(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(r){if(re(r))return{data:null,error:r};throw r}}async getUserIdentities(){var t;try{const{data:n,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:a,error:i}=await this._useSession(async r=>{var s,l,o,u,d;const{data:f,error:h}=r;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return It()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(re(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var a;try{const{error:i,data:{session:r}}=n;if(i)throw i;const{options:s,provider:l,token:o,access_token:u,nonce:d}=t,f=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=r==null?void 0:r.access_token)!==null&&a!==void 0?a:void 0,body:{provider:l,id_token:o,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:zn}),{data:h,error:m}=f;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new Bi}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:m})}catch(i){if(re(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var a,i;const{data:r,error:s}=n;if(s)throw s;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(a=r.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const a=Date.now();return await OT(async i=>(i>0&&await jT(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:zn})),(i,r)=>{const s=200*Math.pow(2,i);return r&&gu(r)&&Date.now()+s-a<Ki})}catch(a){if(this._debug(n,"error",a),re(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",a),It()&&!n.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,n;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const i=await ci(this.storage,this.storageKey);if(i&&this.userStorage){let s=await ci(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await Xi(this.userStorage,this.storageKey+"-user",s)),i.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:yu()}else if(i&&!i.user&&!i.user){const s=await ci(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await Oa(this.storage,this.storageKey+"-user"),await Xi(this.storage,this.storageKey,i)):i.user=yu()}if(this._debug(a,"session from storage",i),!this._isValidSession(i)){this._debug(a,"session is not valid"),i!==null&&await this._removeSession();return}const r=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<mu;if(this._debug(a,`session has${r?"":" not"} expired with margin of ${mu}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),gu(s)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:l}=await this._getUser(i.access_token);!l&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(a,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(a,"error",i),console.error(i);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var n,a;if(!t)throw new Un;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new fc;const{data:r,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!r.session)throw new Un;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const l={data:r.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(r){if(this._debug(i,"error",r),re(r)){const s={data:null,error:r};return gu(r)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,a=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:n});const r=[],s=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(o){r.push(o)}});if(await Promise.all(s),r.length>0){for(let l=0;l<r.length;l+=1)console.error(r[l]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),a=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&n.user&&await Xi(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const r=zg(i);await Xi(this.storage,this.storageKey,r)}else{const i=zg(n);await Xi(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Oa(this.storage,this.storageKey),await Oa(this.storage,this.storageKey+"-code-verifier"),await Oa(this.storage,this.storageKey+"-user"),this.userStorage&&await Oa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&It()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ki);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:a}}=n;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((a.expires_at*1e3-t)/Ki);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ki}ms, refresh threshold is ${Ud} ticks`),i<=Ud&&await this._callRefreshToken(a.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof hb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!It()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,a){const i=[`provider=${encodeURIComponent(n)}`];if(a!=null&&a.redirectTo&&i.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&i.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[r,s]=await Hi(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(l.toString())}if(a!=null&&a.queryParams){const r=new URLSearchParams(a.queryParams);i.push(r.toString())}return a!=null&&a.skipBrowserRedirect&&i.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var a;const{data:i,error:r}=n;return r?{data:null,error:r}:await ce(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var a,i;const{data:r,error:s}=n;if(s)return{data:null,error:s};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:o,error:u}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=r==null?void 0:r.session)===null||a===void 0?void 0:a.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&o.type==="totp"&&(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:i,error:r}=n;if(r)return{data:null,error:r};const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?a1(t.webauthn.credential_response):i1(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:o}=await ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(n){if(re(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:i,error:r}=n;if(r)return{data:null,error:r};const s=await ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});if(s.error)return s;const{data:l}=s;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:t1(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:n1(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(re(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:a}=await this.getUser();if(a)return{data:null,error:a};const i={all:[],phone:[],totp:[],webauthn:[]};for(const r of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(r),r.status==="verified"&&i[r.factor_type].push(r);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:a},error:i}=await this.getSession();if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=vu(a.access_token);let s=null;r.aal&&(s=r.aal);let l=s;((n=(t=a.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=r.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;return i?{data:null,error:i}:a?await ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:a.access_token,xform:r=>({data:r,error:null})}):{data:null,error:new Un}})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async a=>{const{data:{session:i},error:r}=a;if(r)return{data:null,error:r};if(!i)return{data:null,error:new Un};const s=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&It()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(a){if(re(a))return{data:null,error:a};throw a}}async _denyAuthorization(t,n){try{return await this._useSession(async a=>{const{data:{session:i},error:r}=a;if(r)return{data:null,error:r};if(!i)return{data:null,error:new Un};const s=await ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&It()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(a){if(re(a))return{data:null,error:a};throw a}}async fetchJwk(t,n={keys:[]}){let a=n.keys.find(l=>l.kid===t);if(a)return a;const i=Date.now();if(a=this.jwks.keys.find(l=>l.kid===t),a&&this.jwks_cached_at+fT>i)return a;const{data:r,error:s}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=i,a=r.keys.find(l=>l.kid===t),!a)?null:a}async getClaims(t,n={}){try{let a=t;if(!a){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};a=m.session.access_token}const{header:i,payload:r,signature:s,raw:{header:l,payload:o}}=vu(a);n!=null&&n.allowExpired||kT(r.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(a);if(m)throw m;return{data:{claims:r,header:i,signature:s},error:null}}const d=UT(i.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,s,wT(`${l}.${o}`)))throw new Bd("Invalid JWT signature");return{data:{claims:r,header:i,signature:s},error:null}}catch(a){if(re(a))return{data:null,error:a};throw a}}}Is.nextInstanceID=0;const h1=Is;class m1 extends h1{constructor(t){super(t)}}class g1{constructor(t,n,a){var i,r,s;this.supabaseUrl=t,this.supabaseKey=n;const l=lT(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const o=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:FE,realtime:tT,auth:Object.assign(Object.assign({},eT),{storageKey:o}),global:WE},d=sT(a??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=d.global.headers)!==null&&r!==void 0?r:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=d.auth)!==null&&s!==void 0?s:{},this.headers,d.global.fetch),this.fetch=iT(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new oE(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new JE(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new eE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,a)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:a}=await this.auth.getSession();return(n=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:r,storageKey:s,flowType:l,lock:o,debug:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new m1({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:r,flowType:l,lock:o,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new TE(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,a)=>{this._handleTokenChanged(n,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,n,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const v1=(e,t,n)=>new g1(e,t,n);function y1(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}y1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const p1="https://vqpubtahhvtkftafdlrp.supabase.co",b1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZxcHVidGFoaHZ0a2Z0YWZkbHJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMjQ2NjUsImV4cCI6MjA3NzgwMDY2NX0.o2905IF2CWRJ-krYtA6MnL7_KALlNiwD211Sw-of7mI",de=v1(p1,b1);function _1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _.useMemo(()=>a=>{t.forEach(i=>i(a))},t)}const hc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $r(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function th(e){return"nodeType"in e}function Xt(e){var t,n;return e?$r(e)?e:th(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function nh(e){const{Document:t}=Xt(e);return e instanceof t}function il(e){return $r(e)?!1:e instanceof Xt(e).HTMLElement}function vb(e){return e instanceof Xt(e).SVGElement}function Ir(e){return e?$r(e)?e.document:th(e)?nh(e)?e:il(e)||vb(e)?e.ownerDocument:document:document:document}const $n=hc?_.useLayoutEffect:_.useEffect;function mc(e){const t=_.useRef(e);return $n(()=>{t.current=e}),_.useCallback(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t.current==null?void 0:t.current(...a)},[])}function w1(){const e=_.useRef(null),t=_.useCallback((a,i)=>{e.current=setInterval(a,i)},[]),n=_.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ys(e,t){t===void 0&&(t=[e]);const n=_.useRef(e);return $n(()=>{n.current!==e&&(n.current=e)},t),n}function rl(e,t){const n=_.useRef();return _.useMemo(()=>{const a=e(n.current);return n.current=a,a},[...t])}function Ho(e){const t=mc(e),n=_.useRef(null),a=_.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,a]}function qo(e){const t=_.useRef();return _.useEffect(()=>{t.current=e},[e]),t.current}let bu={};function sl(e,t){return _.useMemo(()=>{if(t)return t;const n=bu[e]==null?0:bu[e]+1;return bu[e]=n,e+"-"+n},[e,t])}function yb(e){return function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((r,s)=>{const l=Object.entries(s);for(const[o,u]of l){const d=r[o];d!=null&&(r[o]=d+e*u)}return r},{...t})}}const mr=yb(1),Vs=yb(-1);function S1(e){return"clientX"in e&&"clientY"in e}function gc(e){if(!e)return!1;const{KeyboardEvent:t}=Xt(e.target);return t&&e instanceof t}function x1(e){if(!e)return!1;const{TouchEvent:t}=Xt(e.target);return t&&e instanceof t}function $o(e){if(x1(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return S1(e)?{x:e.clientX,y:e.clientY}:null}const ei=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[ei.Translate.toString(e),ei.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:a}=e;return t+" "+n+"ms "+a}}}),Yg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function E1(e){return e.matches(Yg)?e:e.querySelector(Yg)}const T1={display:"none"};function j1(e){let{id:t,value:n}=e;return rt.createElement("div",{id:t,style:T1},n)}function O1(e){let{id:t,announcement:n,ariaLiveType:a="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return rt.createElement("div",{id:t,style:i,role:"status","aria-live":a,"aria-atomic":!0},n)}function D1(){const[e,t]=_.useState("");return{announce:_.useCallback(a=>{a!=null&&t(a)},[]),announcement:e}}const pb=_.createContext(null);function N1(e){const t=_.useContext(pb);_.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function C1(){const[e]=_.useState(()=>new Set),t=_.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[_.useCallback(a=>{let{type:i,event:r}=a;e.forEach(s=>{var l;return(l=s[i])==null?void 0:l.call(s,r)})},[e]),t]}const A1={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},R1={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function M1(e){let{announcements:t=R1,container:n,hiddenTextDescribedById:a,screenReaderInstructions:i=A1}=e;const{announce:r,announcement:s}=D1(),l=sl("DndLiveRegion"),[o,u]=_.useState(!1);if(_.useEffect(()=>{u(!0)},[]),N1(_.useMemo(()=>({onDragStart(f){let{active:h}=f;r(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:m}=f;t.onDragMove&&r(t.onDragMove({active:h,over:m}))},onDragOver(f){let{active:h,over:m}=f;r(t.onDragOver({active:h,over:m}))},onDragEnd(f){let{active:h,over:m}=f;r(t.onDragEnd({active:h,over:m}))},onDragCancel(f){let{active:h,over:m}=f;r(t.onDragCancel({active:h,over:m}))}}),[r,t])),!o)return null;const d=rt.createElement(rt.Fragment,null,rt.createElement(j1,{id:a,value:i.draggable}),rt.createElement(O1,{id:l,announcement:s}));return n?yi.createPortal(d,n):d}var St;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(St||(St={}));function Io(){}function _u(e,t){return _.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function k1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _.useMemo(()=>[...t].filter(a=>a!=null),[...t])}const In=Object.freeze({x:0,y:0});function bb(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function U1(e,t){const n=$o(e);if(!n)return"0 0";const a={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}function _b(e,t){let{data:{value:n}}=e,{data:{value:a}}=t;return n-a}function z1(e,t){let{data:{value:n}}=e,{data:{value:a}}=t;return a-n}function Vg(e){let{left:t,top:n,height:a,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+a},{x:t+i,y:n+a}]}function wb(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Gg(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const L1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const i=Gg(t,t.left,t.top),r=[];for(const s of a){const{id:l}=s,o=n.get(l);if(o){const u=bb(Gg(o),i);r.push({id:l,data:{droppableContainer:s,value:u}})}}return r.sort(_b)},B1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const i=Vg(t),r=[];for(const s of a){const{id:l}=s,o=n.get(l);if(o){const u=Vg(o),d=i.reduce((h,m,v)=>h+bb(u[v],m),0),f=Number((d/4).toFixed(4));r.push({id:l,data:{droppableContainer:s,value:f}})}}return r.sort(_b)};function H1(e,t){const n=Math.max(t.top,e.top),a=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),r=Math.min(t.top+t.height,e.top+e.height),s=i-a,l=r-n;if(a<i&&n<r){const o=t.width*t.height,u=e.width*e.height,d=s*l,f=d/(o+u-d);return Number(f.toFixed(4))}return 0}const q1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const i=[];for(const r of a){const{id:s}=r,l=n.get(s);if(l){const o=H1(l,t);o>0&&i.push({id:s,data:{droppableContainer:r,value:o}})}}return i.sort(z1)};function $1(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Sb(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:In}function I1(e){return function(n){for(var a=arguments.length,i=new Array(a>1?a-1:0),r=1;r<a;r++)i[r-1]=arguments[r];return i.reduce((s,l)=>({...s,top:s.top+e*l.y,bottom:s.bottom+e*l.y,left:s.left+e*l.x,right:s.right+e*l.x}),{...n})}}const Y1=I1(1);function xb(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function V1(e,t,n){const a=xb(t);if(!a)return e;const{scaleX:i,scaleY:r,x:s,y:l}=a,o=e.left-s-(1-i)*parseFloat(n),u=e.top-l-(1-r)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?e.width/i:e.width,f=r?e.height/r:e.height;return{width:d,height:f,top:u,right:o+d,bottom:u+f,left:o}}const G1={ignoreTransform:!1};function Yr(e,t){t===void 0&&(t=G1);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Xt(e).getComputedStyle(e);u&&(n=V1(n,u,d))}const{top:a,left:i,width:r,height:s,bottom:l,right:o}=n;return{top:a,left:i,width:r,height:s,bottom:l,right:o}}function Kg(e){return Yr(e,{ignoreTransform:!0})}function K1(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function X1(e,t){return t===void 0&&(t=Xt(e).getComputedStyle(e)),t.position==="fixed"}function Q1(e,t){t===void 0&&(t=Xt(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const r=t[i];return typeof r=="string"?n.test(r):!1})}function vc(e,t){const n=[];function a(i){if(t!=null&&n.length>=t||!i)return n;if(nh(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!il(i)||vb(i)||n.includes(i))return n;const r=Xt(e).getComputedStyle(i);return i!==e&&Q1(i,r)&&n.push(i),X1(i,r)?n:a(i.parentNode)}return e?a(e):n}function Eb(e){const[t]=vc(e,1);return t??null}function wu(e){return!hc||!e?null:$r(e)?e:th(e)?nh(e)||e===Ir(e).scrollingElement?window:il(e)?e:null:null}function Tb(e){return $r(e)?e.scrollX:e.scrollLeft}function jb(e){return $r(e)?e.scrollY:e.scrollTop}function Hd(e){return{x:Tb(e),y:jb(e)}}var Ot;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ot||(Ot={}));function Ob(e){return!hc||!e?!1:e===document.scrollingElement}function Db(e){const t={x:0,y:0},n=Ob(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,r=e.scrollLeft<=t.x,s=e.scrollTop>=a.y,l=e.scrollLeft>=a.x;return{isTop:i,isLeft:r,isBottom:s,isRight:l,maxScroll:a,minScroll:t}}const J1={x:.2,y:.2};function P1(e,t,n,a,i){let{top:r,left:s,right:l,bottom:o}=n;a===void 0&&(a=10),i===void 0&&(i=J1);const{isTop:u,isBottom:d,isLeft:f,isRight:h}=Db(e),m={x:0,y:0},v={x:0,y:0},b={height:t.height*i.y,width:t.width*i.x};return!u&&r<=t.top+b.height?(m.y=Ot.Backward,v.y=a*Math.abs((t.top+b.height-r)/b.height)):!d&&o>=t.bottom-b.height&&(m.y=Ot.Forward,v.y=a*Math.abs((t.bottom-b.height-o)/b.height)),!h&&l>=t.right-b.width?(m.x=Ot.Forward,v.x=a*Math.abs((t.right-b.width-l)/b.width)):!f&&s<=t.left+b.width&&(m.x=Ot.Backward,v.x=a*Math.abs((t.left+b.width-s)/b.width)),{direction:m,speed:v}}function Z1(e){if(e===document.scrollingElement){const{innerWidth:r,innerHeight:s}=window;return{top:0,left:0,right:r,bottom:s,width:r,height:s}}const{top:t,left:n,right:a,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:a,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Nb(e){return e.reduce((t,n)=>mr(t,Hd(n)),In)}function W1(e){return e.reduce((t,n)=>t+Tb(n),0)}function F1(e){return e.reduce((t,n)=>t+jb(n),0)}function Cb(e,t){if(t===void 0&&(t=Yr),!e)return;const{top:n,left:a,bottom:i,right:r}=t(e);Eb(e)&&(i<=0||r<=0||n>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const ej=[["x",["left","right"],W1],["y",["top","bottom"],F1]];class ah{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=vc(n),i=Nb(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[r,s,l]of ej)for(const o of s)Object.defineProperty(this,o,{get:()=>{const u=l(a),d=i[r]-u;return this.rect[o]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class xs{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...n)})},this.target=t}add(t,n,a){var i;(i=this.target)==null||i.addEventListener(t,n,a),this.listeners.push([t,n,a])}}function tj(e){const{EventTarget:t}=Xt(e);return e instanceof t?e:Ir(e)}function Su(e,t){const n=Math.abs(e.x),a=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+a**2)>t:"x"in t&&"y"in t?n>t.x&&a>t.y:"x"in t?n>t.x:"y"in t?a>t.y:!1}var xn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(xn||(xn={}));function Xg(e){e.preventDefault()}function nj(e){e.stopPropagation()}var Ae;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ae||(Ae={}));const Ab={start:[Ae.Space,Ae.Enter],cancel:[Ae.Esc],end:[Ae.Space,Ae.Enter,Ae.Tab]},aj=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Ae.Right:return{...n,x:n.x+25};case Ae.Left:return{...n,x:n.x-25};case Ae.Down:return{...n,y:n.y+25};case Ae.Up:return{...n,y:n.y-25}}};class ih{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new xs(Ir(n)),this.windowListeners=new xs(Xt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(xn.Resize,this.handleCancel),this.windowListeners.add(xn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(xn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,a=t.node.current;a&&Cb(a),n(In)}handleKeyDown(t){if(gc(t)){const{active:n,context:a,options:i}=this.props,{keyboardCodes:r=Ab,coordinateGetter:s=aj,scrollBehavior:l="smooth"}=i,{code:o}=t;if(r.end.includes(o)){this.handleEnd(t);return}if(r.cancel.includes(o)){this.handleCancel(t);return}const{collisionRect:u}=a.current,d=u?{x:u.left,y:u.top}:In;this.referenceCoordinates||(this.referenceCoordinates=d);const f=s(t,{active:n,context:a.current,currentCoordinates:d});if(f){const h=Vs(f,d),m={x:0,y:0},{scrollableAncestors:v}=a.current;for(const b of v){const w=t.code,{isTop:y,isRight:g,isLeft:p,isBottom:S,maxScroll:E,minScroll:O}=Db(b),x=Z1(b),T={x:Math.min(w===Ae.Right?x.right-x.width/2:x.right,Math.max(w===Ae.Right?x.left:x.left+x.width/2,f.x)),y:Math.min(w===Ae.Down?x.bottom-x.height/2:x.bottom,Math.max(w===Ae.Down?x.top:x.top+x.height/2,f.y))},N=w===Ae.Right&&!g||w===Ae.Left&&!p,D=w===Ae.Down&&!S||w===Ae.Up&&!y;if(N&&T.x!==f.x){const k=b.scrollLeft+h.x,C=w===Ae.Right&&k<=E.x||w===Ae.Left&&k>=O.x;if(C&&!h.y){b.scrollTo({left:k,behavior:l});return}C?m.x=b.scrollLeft-k:m.x=w===Ae.Right?b.scrollLeft-E.x:b.scrollLeft-O.x,m.x&&b.scrollBy({left:-m.x,behavior:l});break}else if(D&&T.y!==f.y){const k=b.scrollTop+h.y,C=w===Ae.Down&&k<=E.y||w===Ae.Up&&k>=O.y;if(C&&!h.x){b.scrollTo({top:k,behavior:l});return}C?m.y=b.scrollTop-k:m.y=w===Ae.Down?b.scrollTop-E.y:b.scrollTop-O.y,m.y&&b.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,mr(Vs(f,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:a}=this.props;t.preventDefault(),a(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ih.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:a=Ab,onActivation:i}=t,{active:r}=n;const{code:s}=e.nativeEvent;if(a.start.includes(s)){const l=r.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function Qg(e){return!!(e&&"distance"in e)}function Jg(e){return!!(e&&"delay"in e)}class rh{constructor(t,n,a){var i;a===void 0&&(a=tj(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:r}=t,{target:s}=r;this.props=t,this.events=n,this.document=Ir(s),this.documentListeners=new xs(this.document),this.listeners=new xs(a),this.windowListeners=new xs(Xt(s)),this.initialCoordinates=(i=$o(r))!=null?i:In,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(xn.Resize,this.handleCancel),this.windowListeners.add(xn.DragStart,Xg),this.windowListeners.add(xn.VisibilityChange,this.handleCancel),this.windowListeners.add(xn.ContextMenu,Xg),this.documentListeners.add(xn.Keydown,this.handleKeydown),n){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Jg(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Qg(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:a,onPending:i}=this.props;i(a,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(xn.Click,nj,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(xn.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:a,initialCoordinates:i,props:r}=this,{onMove:s,options:{activationConstraint:l}}=r;if(!i)return;const o=(n=$o(t))!=null?n:In,u=Vs(i,o);if(!a&&l){if(Qg(l)){if(l.tolerance!=null&&Su(u,l.tolerance))return this.handleCancel();if(Su(u,l.distance))return this.handleStart()}if(Jg(l)&&Su(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),s(o)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Ae.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ij={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class sh extends rh{constructor(t){const{event:n}=t,a=Ir(n.target);super(t,ij,a)}}sh.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;return!n.isPrimary||n.button!==0?!1:(a==null||a({event:n}),!0)}}];const rj={move:{name:"mousemove"},end:{name:"mouseup"}};var qd;(function(e){e[e.RightClick=2]="RightClick"})(qd||(qd={}));class sj extends rh{constructor(t){super(t,rj,Ir(t.event.target))}}sj.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;return n.button===qd.RightClick?!1:(a==null||a({event:n}),!0)}}];const xu={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Rb extends rh{constructor(t){super(t,xu)}static setup(){return window.addEventListener(xu.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(xu.move.name,t)};function t(){}}}Rb.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;const{touches:i}=n;return i.length>1?!1:(a==null||a({event:n}),!0)}}];var Es;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Es||(Es={}));var Yo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Yo||(Yo={}));function lj(e){let{acceleration:t,activator:n=Es.Pointer,canScroll:a,draggingRect:i,enabled:r,interval:s=5,order:l=Yo.TreeOrder,pointerCoordinates:o,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:h}=e;const m=cj({delta:f,disabled:!r}),[v,b]=w1(),w=_.useRef({x:0,y:0}),y=_.useRef({x:0,y:0}),g=_.useMemo(()=>{switch(n){case Es.Pointer:return o?{top:o.y,bottom:o.y,left:o.x,right:o.x}:null;case Es.DraggableRect:return i}},[n,i,o]),p=_.useRef(null),S=_.useCallback(()=>{const O=p.current;if(!O)return;const x=w.current.x*y.current.x,T=w.current.y*y.current.y;O.scrollBy(x,T)},[]),E=_.useMemo(()=>l===Yo.TreeOrder?[...u].reverse():u,[l,u]);_.useEffect(()=>{if(!r||!u.length||!g){b();return}for(const O of E){if((a==null?void 0:a(O))===!1)continue;const x=u.indexOf(O),T=d[x];if(!T)continue;const{direction:N,speed:D}=P1(O,T,g,t,h);for(const k of["x","y"])m[k][N[k]]||(D[k]=0,N[k]=0);if(D.x>0||D.y>0){b(),p.current=O,v(S,s),w.current=D,y.current=N;return}}w.current={x:0,y:0},y.current={x:0,y:0},b()},[t,S,a,b,r,s,JSON.stringify(g),JSON.stringify(m),v,u,E,d,JSON.stringify(h)])}const oj={x:{[Ot.Backward]:!1,[Ot.Forward]:!1},y:{[Ot.Backward]:!1,[Ot.Forward]:!1}};function cj(e){let{delta:t,disabled:n}=e;const a=qo(t);return rl(i=>{if(n||!a||!i)return oj;const r={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[Ot.Backward]:i.x[Ot.Backward]||r.x===-1,[Ot.Forward]:i.x[Ot.Forward]||r.x===1},y:{[Ot.Backward]:i.y[Ot.Backward]||r.y===-1,[Ot.Forward]:i.y[Ot.Forward]||r.y===1}}},[n,t,a])}function uj(e,t){const n=t!=null?e.get(t):void 0,a=n?n.node.current:null;return rl(i=>{var r;return t==null?null:(r=a??i)!=null?r:null},[a,t])}function dj(e,t){return _.useMemo(()=>e.reduce((n,a)=>{const{sensor:i}=a,r=i.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,a)}));return[...n,...r]},[]),[e,t])}var Dr;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Dr||(Dr={}));var $d;(function(e){e.Optimized="optimized"})($d||($d={}));const Pg=new Map;function fj(e,t){let{dragging:n,dependencies:a,config:i}=t;const[r,s]=_.useState(null),{frequency:l,measure:o,strategy:u}=i,d=_.useRef(e),f=w(),h=Ys(f),m=_.useCallback(function(y){y===void 0&&(y=[]),!h.current&&s(g=>g===null?y:g.concat(y.filter(p=>!g.includes(p))))},[h]),v=_.useRef(null),b=rl(y=>{if(f&&!n)return Pg;if(!y||y===Pg||d.current!==e||r!=null){const g=new Map;for(let p of e){if(!p)continue;if(r&&r.length>0&&!r.includes(p.id)&&p.rect.current){g.set(p.id,p.rect.current);continue}const S=p.node.current,E=S?new ah(o(S),S):null;p.rect.current=E,E&&g.set(p.id,E)}return g}return y},[e,r,n,f,o]);return _.useEffect(()=>{d.current=e},[e]),_.useEffect(()=>{f||m()},[n,f]),_.useEffect(()=>{r&&r.length>0&&s(null)},[JSON.stringify(r)]),_.useEffect(()=>{f||typeof l!="number"||v.current!==null||(v.current=setTimeout(()=>{m(),v.current=null},l))},[l,f,m,...a]),{droppableRects:b,measureDroppableContainers:m,measuringScheduled:r!=null};function w(){switch(u){case Dr.Always:return!1;case Dr.BeforeDragging:return n;default:return!n}}}function lh(e,t){return rl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function hj(e,t){return lh(e,t)}function mj(e){let{callback:t,disabled:n}=e;const a=mc(t),i=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:r}=window;return new r(a)},[a,n]);return _.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function yc(e){let{callback:t,disabled:n}=e;const a=mc(t),i=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:r}=window;return new r(a)},[n]);return _.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function gj(e){return new ah(Yr(e),e)}function Zg(e,t,n){t===void 0&&(t=gj);const[a,i]=_.useState(null);function r(){i(o=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=o??n)!=null?u:null}const d=t(e);return JSON.stringify(o)===JSON.stringify(d)?o:d})}const s=mj({callback(o){if(e)for(const u of o){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){r();break}}}}),l=yc({callback:r});return $n(()=>{r(),e?(l==null||l.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),s==null||s.disconnect())},[e]),a}function vj(e){const t=lh(e);return Sb(e,t)}const Wg=[];function yj(e){const t=_.useRef(e),n=rl(a=>e?a&&a!==Wg&&e&&t.current&&e.parentNode===t.current.parentNode?a:vc(e):Wg,[e]);return _.useEffect(()=>{t.current=e},[e]),n}function pj(e){const[t,n]=_.useState(null),a=_.useRef(e),i=_.useCallback(r=>{const s=wu(r.target);s&&n(l=>l?(l.set(s,Hd(s)),new Map(l)):null)},[]);return _.useEffect(()=>{const r=a.current;if(e!==r){s(r);const l=e.map(o=>{const u=wu(o);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,Hd(u)]):null}).filter(o=>o!=null);n(l.length?new Map(l):null),a.current=e}return()=>{s(e),s(r)};function s(l){l.forEach(o=>{const u=wu(o);u==null||u.removeEventListener("scroll",i)})}},[i,e]),_.useMemo(()=>e.length?t?Array.from(t.values()).reduce((r,s)=>mr(r,s),In):Nb(e):In,[e,t])}function Fg(e,t){t===void 0&&(t=[]);const n=_.useRef(null);return _.useEffect(()=>{n.current=null},t),_.useEffect(()=>{const a=e!==In;a&&!n.current&&(n.current=e),!a&&n.current&&(n.current=null)},[e]),n.current?Vs(e,n.current):In}function bj(e){_.useEffect(()=>{if(!hc)return;const t=e.map(n=>{let{sensor:a}=n;return a.setup==null?void 0:a.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function _j(e,t){return _.useMemo(()=>e.reduce((n,a)=>{let{eventName:i,handler:r}=a;return n[i]=s=>{r(s,t)},n},{}),[e,t])}function Mb(e){return _.useMemo(()=>e?K1(e):null,[e])}const ev=[];function wj(e,t){t===void 0&&(t=Yr);const[n]=e,a=Mb(n?Xt(n):null),[i,r]=_.useState(ev);function s(){r(()=>e.length?e.map(o=>Ob(o)?a:new ah(t(o),o)):ev)}const l=yc({callback:s});return $n(()=>{l==null||l.disconnect(),s(),e.forEach(o=>l==null?void 0:l.observe(o))},[e]),i}function kb(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return il(t)?t:e}function Sj(e){let{measure:t}=e;const[n,a]=_.useState(null),i=_.useCallback(u=>{for(const{target:d}of u)if(il(d)){a(f=>{const h=t(d);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),r=yc({callback:i}),s=_.useCallback(u=>{const d=kb(u);r==null||r.disconnect(),d&&(r==null||r.observe(d)),a(d?t(d):null)},[t,r]),[l,o]=Ho(s);return _.useMemo(()=>({nodeRef:l,rect:n,setRef:o}),[n,l,o])}const xj=[{sensor:sh,options:{}},{sensor:ih,options:{}}],Ej={current:{}},no={draggable:{measure:Kg},droppable:{measure:Kg,strategy:Dr.WhileDragging,frequency:$d.Optimized},dragOverlay:{measure:Yr}};class Ts extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,a;return(n=(a=this.get(t))==null?void 0:a.node.current)!=null?n:void 0}}const Tj={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ts,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Io},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:no,measureDroppableContainers:Io,windowRect:null,measuringScheduled:!1},Ub={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Io,draggableNodes:new Map,over:null,measureDroppableContainers:Io},ll=_.createContext(Ub),zb=_.createContext(Tj);function jj(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ts}}}function Oj(e,t){switch(t.type){case St.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case St.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case St.DragEnd:case St.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case St.RegisterDroppable:{const{element:n}=t,{id:a}=n,i=new Ts(e.droppable.containers);return i.set(a,n),{...e,droppable:{...e.droppable,containers:i}}}case St.SetDroppableDisabled:{const{id:n,key:a,disabled:i}=t,r=e.droppable.containers.get(n);if(!r||a!==r.key)return e;const s=new Ts(e.droppable.containers);return s.set(n,{...r,disabled:i}),{...e,droppable:{...e.droppable,containers:s}}}case St.UnregisterDroppable:{const{id:n,key:a}=t,i=e.droppable.containers.get(n);if(!i||a!==i.key)return e;const r=new Ts(e.droppable.containers);return r.delete(n),{...e,droppable:{...e.droppable,containers:r}}}default:return e}}function Dj(e){let{disabled:t}=e;const{active:n,activatorEvent:a,draggableNodes:i}=_.useContext(ll),r=qo(a),s=qo(n==null?void 0:n.id);return _.useEffect(()=>{if(!t&&!a&&r&&s!=null){if(!gc(r)||document.activeElement===r.target)return;const l=i.get(s);if(!l)return;const{activatorNode:o,node:u}=l;if(!o.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[o.current,u.current]){if(!d)continue;const f=E1(d);if(f){f.focus();break}}})}},[a,t,i,s,r]),null}function Lb(e,t){let{transform:n,...a}=t;return e!=null&&e.length?e.reduce((i,r)=>r({transform:i,...a}),n):n}function Nj(e){return _.useMemo(()=>({draggable:{...no.draggable,...e==null?void 0:e.draggable},droppable:{...no.droppable,...e==null?void 0:e.droppable},dragOverlay:{...no.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Cj(e){let{activeNode:t,measure:n,initialRect:a,config:i=!0}=e;const r=_.useRef(!1),{x:s,y:l}=typeof i=="boolean"?{x:i,y:i}:i;$n(()=>{if(!s&&!l||!t){r.current=!1;return}if(r.current||!a)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),f=Sb(d,a);if(s||(f.x=0),l||(f.y=0),r.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=Eb(u);h&&h.scrollBy({top:f.y,left:f.x})}},[t,s,l,a,n])}const pc=_.createContext({...In,scaleX:1,scaleY:1});var Ca;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ca||(Ca={}));const Aj=_.memo(function(t){var n,a,i,r;let{id:s,accessibility:l,autoScroll:o=!0,children:u,sensors:d=xj,collisionDetection:f=q1,measuring:h,modifiers:m,...v}=t;const b=_.useReducer(Oj,void 0,jj),[w,y]=b,[g,p]=C1(),[S,E]=_.useState(Ca.Uninitialized),O=S===Ca.Initialized,{draggable:{active:x,nodes:T,translate:N},droppable:{containers:D}}=w,k=x!=null?T.get(x):null,C=_.useRef({initial:null,translated:null}),U=_.useMemo(()=>{var ht;return x!=null?{id:x,data:(ht=k==null?void 0:k.data)!=null?ht:Ej,rect:C}:null},[x,k]),K=_.useRef(null),[L,A]=_.useState(null),[G,X]=_.useState(null),fe=Ys(v,Object.values(v)),Q=sl("DndDescribedBy",s),Pe=_.useMemo(()=>D.getEnabled(),[D]),_e=Nj(h),{droppableRects:Ve,measureDroppableContainers:Le,measuringScheduled:Ge}=fj(Pe,{dragging:O,dependencies:[N.x,N.y],config:_e.droppable}),qe=uj(T,x),Tt=_.useMemo(()=>G?$o(G):null,[G]),Ze=Vr(),We=hj(qe,_e.draggable.measure);Cj({activeNode:x!=null?T.get(x):null,config:Ze.layoutShiftCompensation,initialRect:We,measure:_e.draggable.measure});const z=Zg(qe,_e.draggable.measure,We),he=Zg(qe?qe.parentElement:null),be=_.useRef({activatorEvent:null,active:null,activeNode:qe,collisionRect:null,collisions:null,droppableRects:Ve,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:D,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),me=D.getNodeFor((n=be.current.over)==null?void 0:n.id),Me=Sj({measure:_e.dragOverlay.measure}),ke=(a=Me.nodeRef.current)!=null?a:qe,xe=O?(i=Me.rect)!=null?i:z:null,J=!!(Me.nodeRef.current&&Me.rect),se=vj(J?null:z),Ce=Mb(ke?Xt(ke):null),Oe=yj(O?me??qe:null),H=wj(Oe),I=Lb(m,{transform:{x:N.x-se.x,y:N.y-se.y,scaleX:1,scaleY:1},activatorEvent:G,active:U,activeNodeRect:z,containerNodeRect:he,draggingNodeRect:xe,over:be.current.over,overlayNodeRect:Me.rect,scrollableAncestors:Oe,scrollableAncestorRects:H,windowRect:Ce}),$=Tt?mr(Tt,N):null,Y=pj(Oe),te=Fg(Y),P=Fg(Y,[z]),F=mr(I,te),M=xe?Y1(xe,I):null,Z=U&&M?f({active:U,collisionRect:M,droppableRects:Ve,droppableContainers:Pe,pointerCoordinates:$}):null,ee=wb(Z,"id"),[ae,V]=_.useState(null),ie=J?I:mr(I,P),Ee=$1(ie,(r=ae==null?void 0:ae.rect)!=null?r:null,z),ct=_.useRef(null),Qt=_.useCallback((ht,Ct)=>{let{sensor:At,options:_n}=Ct;if(K.current==null)return;const Rt=T.get(K.current);if(!Rt)return;const Mt=ht.nativeEvent,Jt=new At({active:K.current,activeNode:Rt,event:Mt,options:_n,context:be,onAbort(ut){if(!T.get(ut))return;const{onDragAbort:$t}=fe.current,rn={id:ut};$t==null||$t(rn),g({type:"onDragAbort",event:rn})},onPending(ut,qt,$t,rn){if(!T.get(ut))return;const{onDragPending:wn}=fe.current,sn={id:ut,constraint:qt,initialCoordinates:$t,offset:rn};wn==null||wn(sn),g({type:"onDragPending",event:sn})},onStart(ut){const qt=K.current;if(qt==null)return;const $t=T.get(qt);if(!$t)return;const{onDragStart:rn}=fe.current,na={activatorEvent:Mt,active:{id:qt,data:$t.data,rect:C}};yi.unstable_batchedUpdates(()=>{rn==null||rn(na),E(Ca.Initializing),y({type:St.DragStart,initialCoordinates:ut,active:qt}),g({type:"onDragStart",event:na}),A(ct.current),X(Mt)})},onMove(ut){y({type:St.DragMove,coordinates:ut})},onEnd:Gn(St.DragEnd),onCancel:Gn(St.DragCancel)});ct.current=Jt;function Gn(ut){return async function(){const{active:$t,collisions:rn,over:na,scrollAdjustedTranslate:wn}=be.current;let sn=null;if($t&&wn){const{cancelDrop:Kn}=fe.current;sn={activatorEvent:Mt,active:$t,collisions:rn,delta:wn,over:na},ut===St.DragEnd&&typeof Kn=="function"&&await Promise.resolve(Kn(sn))&&(ut=St.DragCancel)}K.current=null,yi.unstable_batchedUpdates(()=>{y({type:ut}),E(Ca.Uninitialized),V(null),A(null),X(null),ct.current=null;const Kn=ut===St.DragEnd?"onDragEnd":"onDragCancel";if(sn){const Ta=fe.current[Kn];Ta==null||Ta(sn),g({type:Kn,event:sn})}})}}},[T]),bn=_.useCallback((ht,Ct)=>(At,_n)=>{const Rt=At.nativeEvent,Mt=T.get(_n);if(K.current!==null||!Mt||Rt.dndKit||Rt.defaultPrevented)return;const Jt={active:Mt};ht(At,Ct.options,Jt)===!0&&(Rt.dndKit={capturedBy:Ct.sensor},K.current=_n,Qt(At,Ct))},[T,Qt]),Vn=dj(d,bn);bj(d),$n(()=>{z&&S===Ca.Initializing&&E(Ca.Initialized)},[z,S]),_.useEffect(()=>{const{onDragMove:ht}=fe.current,{active:Ct,activatorEvent:At,collisions:_n,over:Rt}=be.current;if(!Ct||!At)return;const Mt={active:Ct,activatorEvent:At,collisions:_n,delta:{x:F.x,y:F.y},over:Rt};yi.unstable_batchedUpdates(()=>{ht==null||ht(Mt),g({type:"onDragMove",event:Mt})})},[F.x,F.y]),_.useEffect(()=>{const{active:ht,activatorEvent:Ct,collisions:At,droppableContainers:_n,scrollAdjustedTranslate:Rt}=be.current;if(!ht||K.current==null||!Ct||!Rt)return;const{onDragOver:Mt}=fe.current,Jt=_n.get(ee),Gn=Jt&&Jt.rect.current?{id:Jt.id,rect:Jt.rect.current,data:Jt.data,disabled:Jt.disabled}:null,ut={active:ht,activatorEvent:Ct,collisions:At,delta:{x:Rt.x,y:Rt.y},over:Gn};yi.unstable_batchedUpdates(()=>{V(Gn),Mt==null||Mt(ut),g({type:"onDragOver",event:ut})})},[ee]),$n(()=>{be.current={activatorEvent:G,active:U,activeNode:qe,collisionRect:M,collisions:Z,droppableRects:Ve,draggableNodes:T,draggingNode:ke,draggingNodeRect:xe,droppableContainers:D,over:ae,scrollableAncestors:Oe,scrollAdjustedTranslate:F},C.current={initial:xe,translated:M}},[U,qe,Z,M,T,ke,xe,Ve,D,ae,Oe,F]),lj({...Ze,delta:N,draggingRect:M,pointerCoordinates:$,scrollableAncestors:Oe,scrollableAncestorRects:H});const ii=_.useMemo(()=>({active:U,activeNode:qe,activeNodeRect:z,activatorEvent:G,collisions:Z,containerNodeRect:he,dragOverlay:Me,draggableNodes:T,droppableContainers:D,droppableRects:Ve,over:ae,measureDroppableContainers:Le,scrollableAncestors:Oe,scrollableAncestorRects:H,measuringConfiguration:_e,measuringScheduled:Ge,windowRect:Ce}),[U,qe,z,G,Z,he,Me,T,D,Ve,ae,Le,Oe,H,_e,Ge,Ce]),ta=_.useMemo(()=>({activatorEvent:G,activators:Vn,active:U,activeNodeRect:z,ariaDescribedById:{draggable:Q},dispatch:y,draggableNodes:T,over:ae,measureDroppableContainers:Le}),[G,Vn,U,z,y,Q,T,ae,Le]);return rt.createElement(pb.Provider,{value:p},rt.createElement(ll.Provider,{value:ta},rt.createElement(zb.Provider,{value:ii},rt.createElement(pc.Provider,{value:Ee},u)),rt.createElement(Dj,{disabled:(l==null?void 0:l.restoreFocus)===!1})),rt.createElement(M1,{...l,hiddenTextDescribedById:Q}));function Vr(){const ht=(L==null?void 0:L.autoScrollEnabled)===!1,Ct=typeof o=="object"?o.enabled===!1:o===!1,At=O&&!ht&&!Ct;return typeof o=="object"?{...o,enabled:At}:{enabled:At}}}),Rj=_.createContext(null),tv="button",Mj="Draggable";function kj(e){let{id:t,data:n,disabled:a=!1,attributes:i}=e;const r=sl(Mj),{activators:s,activatorEvent:l,active:o,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:h}=_.useContext(ll),{role:m=tv,roleDescription:v="draggable",tabIndex:b=0}=i??{},w=(o==null?void 0:o.id)===t,y=_.useContext(w?pc:Rj),[g,p]=Ho(),[S,E]=Ho(),O=_j(s,t),x=Ys(n);$n(()=>(f.set(t,{id:t,key:r,node:g,activatorNode:S,data:x}),()=>{const N=f.get(t);N&&N.key===r&&f.delete(t)}),[f,t]);const T=_.useMemo(()=>({role:m,tabIndex:b,"aria-disabled":a,"aria-pressed":w&&m===tv?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[a,m,b,w,v,d.draggable]);return{active:o,activatorEvent:l,activeNodeRect:u,attributes:T,isDragging:w,listeners:a?void 0:O,node:g,over:h,setNodeRef:p,setActivatorNodeRef:E,transform:y}}function Bb(){return _.useContext(zb)}const Uj="Droppable",zj={timeout:25};function Hb(e){let{data:t,disabled:n=!1,id:a,resizeObserverConfig:i}=e;const r=sl(Uj),{active:s,dispatch:l,over:o,measureDroppableContainers:u}=_.useContext(ll),d=_.useRef({disabled:n}),f=_.useRef(!1),h=_.useRef(null),m=_.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:w}={...zj,...i},y=Ys(b??a),g=_.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),m.current=null},w)},[w]),p=yc({callback:g,disabled:v||!s}),S=_.useCallback((T,N)=>{p&&(N&&(p.unobserve(N),f.current=!1),T&&p.observe(T))},[p]),[E,O]=Ho(S),x=Ys(t);return _.useEffect(()=>{!p||!E.current||(p.disconnect(),f.current=!1,p.observe(E.current))},[E,p]),_.useEffect(()=>(l({type:St.RegisterDroppable,element:{id:a,key:r,disabled:n,node:E,rect:h,data:x}}),()=>l({type:St.UnregisterDroppable,key:r,id:a})),[a]),_.useEffect(()=>{n!==d.current.disabled&&(l({type:St.SetDroppableDisabled,id:a,key:r,disabled:n}),d.current.disabled=n)},[a,r,n,l]),{active:s,rect:h,isOver:(o==null?void 0:o.id)===a,node:E,over:o,setNodeRef:O}}function Lj(e){let{animation:t,children:n}=e;const[a,i]=_.useState(null),[r,s]=_.useState(null),l=qo(n);return!n&&!a&&l&&i(l),$n(()=>{if(!r)return;const o=a==null?void 0:a.key,u=a==null?void 0:a.props.id;if(o==null||u==null){i(null);return}Promise.resolve(t(u,r)).then(()=>{i(null)})},[t,a,r]),rt.createElement(rt.Fragment,null,n,a?_.cloneElement(a,{ref:s}):null)}const Bj={x:0,y:0,scaleX:1,scaleY:1};function Hj(e){let{children:t}=e;return rt.createElement(ll.Provider,{value:Ub},rt.createElement(pc.Provider,{value:Bj},t))}const qj={position:"fixed",touchAction:"none"},$j=e=>gc(e)?"transform 250ms ease":void 0,Ij=_.forwardRef((e,t)=>{let{as:n,activatorEvent:a,adjustScale:i,children:r,className:s,rect:l,style:o,transform:u,transition:d=$j}=e;if(!l)return null;const f=i?u:{...u,scaleX:1,scaleY:1},h={...qj,width:l.width,height:l.height,top:l.top,left:l.left,transform:ei.Transform.toString(f),transformOrigin:i&&a?U1(a,l):void 0,transition:typeof d=="function"?d(a):d,...o};return rt.createElement(n,{className:s,style:h,ref:t},r)}),Yj=e=>t=>{let{active:n,dragOverlay:a}=t;const i={},{styles:r,className:s}=e;if(r!=null&&r.active)for(const[l,o]of Object.entries(r.active))o!==void 0&&(i[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,o));if(r!=null&&r.dragOverlay)for(const[l,o]of Object.entries(r.dragOverlay))o!==void 0&&a.node.style.setProperty(l,o);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&a.node.classList.add(s.dragOverlay),function(){for(const[o,u]of Object.entries(i))n.node.style.setProperty(o,u);s!=null&&s.active&&n.node.classList.remove(s.active)}},Vj=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:ei.Transform.toString(t)},{transform:ei.Transform.toString(n)}]},Gj={duration:250,easing:"ease",keyframes:Vj,sideEffects:Yj({styles:{active:{opacity:"0"}}})};function Kj(e){let{config:t,draggableNodes:n,droppableContainers:a,measuringConfiguration:i}=e;return mc((r,s)=>{if(t===null)return;const l=n.get(r);if(!l)return;const o=l.node.current;if(!o)return;const u=kb(s);if(!u)return;const{transform:d}=Xt(s).getComputedStyle(s),f=xb(d);if(!f)return;const h=typeof t=="function"?t:Xj(t);return Cb(o,i.draggable.measure),h({active:{id:r,data:l.data,node:o,rect:i.draggable.measure(o)},draggableNodes:n,dragOverlay:{node:s,rect:i.dragOverlay.measure(u)},droppableContainers:a,measuringConfiguration:i,transform:f})})}function Xj(e){const{duration:t,easing:n,sideEffects:a,keyframes:i}={...Gj,...e};return r=>{let{active:s,dragOverlay:l,transform:o,...u}=r;if(!t)return;const d={x:l.rect.left-s.rect.left,y:l.rect.top-s.rect.top},f={scaleX:o.scaleX!==1?s.rect.width*o.scaleX/l.rect.width:1,scaleY:o.scaleY!==1?s.rect.height*o.scaleY/l.rect.height:1},h={x:o.x-d.x,y:o.y-d.y,...f},m=i({...u,active:s,dragOverlay:l,transform:{initial:o,final:h}}),[v]=m,b=m[m.length-1];if(JSON.stringify(v)===JSON.stringify(b))return;const w=a==null?void 0:a({active:s,dragOverlay:l,...u}),y=l.node.animate(m,{duration:t,easing:n,fill:"forwards"});return new Promise(g=>{y.onfinish=()=>{w==null||w(),g()}})}}let nv=0;function Qj(e){return _.useMemo(()=>{if(e!=null)return nv++,nv},[e])}const Jj=rt.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:a,style:i,transition:r,modifiers:s,wrapperElement:l="div",className:o,zIndex:u=999}=e;const{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggableNodes:v,droppableContainers:b,dragOverlay:w,over:y,measuringConfiguration:g,scrollableAncestors:p,scrollableAncestorRects:S,windowRect:E}=Bb(),O=_.useContext(pc),x=Qj(f==null?void 0:f.id),T=Lb(s,{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggingNodeRect:w.rect,over:y,overlayNodeRect:w.rect,scrollableAncestors:p,scrollableAncestorRects:S,transform:O,windowRect:E}),N=lh(h),D=Kj({config:a,draggableNodes:v,droppableContainers:b,measuringConfiguration:g}),k=N?w.setRef:void 0;return rt.createElement(Hj,null,rt.createElement(Lj,{animation:D},f&&x?rt.createElement(Ij,{key:x,id:f.id,ref:k,as:l,activatorEvent:d,adjustScale:t,className:o,transition:r,rect:N,style:{zIndex:u,...i},transform:T},n):null))});function qn(e,t,n){const a=e.slice();return a.splice(n<0?a.length+n:n,0,a.splice(t,1)[0]),a}function Pj(e,t){return e.reduce((n,a,i)=>{const r=t.get(a);return r&&(n[i]=r),n},Array(e.length))}function Bl(e){return e!==null&&e>=0}function Zj(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Wj(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const qb=e=>{let{rects:t,activeIndex:n,overIndex:a,index:i}=e;const r=qn(t,a,n),s=t[i],l=r[i];return!l||!s?null:{x:l.left-s.left,y:l.top-s.top,scaleX:l.width/s.width,scaleY:l.height/s.height}},Hl={scaleX:1,scaleY:1},Eu=e=>{var t;let{activeIndex:n,activeNodeRect:a,index:i,rects:r,overIndex:s}=e;const l=(t=r[n])!=null?t:a;if(!l)return null;if(i===n){const u=r[s];return u?{x:0,y:n<s?u.top+u.height-(l.top+l.height):u.top-l.top,...Hl}:null}const o=Fj(r,i,n);return i>n&&i<=s?{x:0,y:-l.height-o,...Hl}:i<n&&i>=s?{x:0,y:l.height+o,...Hl}:{x:0,y:0,...Hl}};function Fj(e,t,n){const a=e[t],i=e[t-1],r=e[t+1];return a?n<t?i?a.top-(i.top+i.height):r?r.top-(a.top+a.height):0:r?r.top-(a.top+a.height):i?a.top-(i.top+i.height):0:0}const $b="Sortable",Ib=rt.createContext({activeIndex:-1,containerId:$b,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:qb,disabled:{draggable:!1,droppable:!1}});function Tu(e){let{children:t,id:n,items:a,strategy:i=qb,disabled:r=!1}=e;const{active:s,dragOverlay:l,droppableRects:o,over:u,measureDroppableContainers:d}=Bb(),f=sl($b,n),h=l.rect!==null,m=_.useMemo(()=>a.map(O=>typeof O=="object"&&"id"in O?O.id:O),[a]),v=s!=null,b=s?m.indexOf(s.id):-1,w=u?m.indexOf(u.id):-1,y=_.useRef(m),g=!Zj(m,y.current),p=w!==-1&&b===-1||g,S=Wj(r);$n(()=>{g&&v&&d(m)},[g,m,v,d]),_.useEffect(()=>{y.current=m},[m]);const E=_.useMemo(()=>({activeIndex:b,containerId:f,disabled:S,disableTransforms:p,items:m,overIndex:w,useDragOverlay:h,sortedRects:Pj(m,o),strategy:i}),[b,f,S.draggable,S.droppable,p,m,w,o,h,i]);return rt.createElement(Ib.Provider,{value:E},t)}const eO=e=>{let{id:t,items:n,activeIndex:a,overIndex:i}=e;return qn(n,a,i).indexOf(t)},tO=e=>{let{containerId:t,isSorting:n,wasDragging:a,index:i,items:r,newIndex:s,previousItems:l,previousContainerId:o,transition:u}=e;return!u||!a||l!==r&&i===s?!1:n?!0:s!==i&&t===o},nO={duration:200,easing:"ease"},Yb="transform",aO=ei.Transition.toString({property:Yb,duration:0,easing:"linear"}),iO={roleDescription:"sortable"};function rO(e){let{disabled:t,index:n,node:a,rect:i}=e;const[r,s]=_.useState(null),l=_.useRef(n);return $n(()=>{if(!t&&n!==l.current&&a.current){const o=i.current;if(o){const u=Yr(a.current,{ignoreTransform:!0}),d={x:o.left-u.left,y:o.top-u.top,scaleX:o.width/u.width,scaleY:o.height/u.height};(d.x||d.y)&&s(d)}}n!==l.current&&(l.current=n)},[t,n,a,i]),_.useEffect(()=>{r&&s(null)},[r]),r}function Vb(e){let{animateLayoutChanges:t=tO,attributes:n,disabled:a,data:i,getNewIndex:r=eO,id:s,strategy:l,resizeObserverConfig:o,transition:u=nO}=e;const{items:d,containerId:f,activeIndex:h,disabled:m,disableTransforms:v,sortedRects:b,overIndex:w,useDragOverlay:y,strategy:g}=_.useContext(Ib),p=sO(a,m),S=d.indexOf(s),E=_.useMemo(()=>({sortable:{containerId:f,index:S,items:d},...i}),[f,i,S,d]),O=_.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:x,node:T,isOver:N,setNodeRef:D}=Hb({id:s,data:E,disabled:p.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...o}}),{active:k,activatorEvent:C,activeNodeRect:U,attributes:K,setNodeRef:L,listeners:A,isDragging:G,over:X,setActivatorNodeRef:fe,transform:Q}=kj({id:s,data:E,attributes:{...iO,...n},disabled:p.draggable}),Pe=_1(D,L),_e=!!k,Ve=_e&&!v&&Bl(h)&&Bl(w),Le=!y&&G,Ge=Le&&Ve?Q:null,Tt=Ve?Ge??(l??g)({rects:b,activeNodeRect:U,activeIndex:h,overIndex:w,index:S}):null,Ze=Bl(h)&&Bl(w)?r({id:s,items:d,activeIndex:h,overIndex:w}):S,We=k==null?void 0:k.id,z=_.useRef({activeId:We,items:d,newIndex:Ze,containerId:f}),he=d!==z.current.items,be=t({active:k,containerId:f,isDragging:G,isSorting:_e,id:s,index:S,items:d,newIndex:z.current.newIndex,previousItems:z.current.items,previousContainerId:z.current.containerId,transition:u,wasDragging:z.current.activeId!=null}),me=rO({disabled:!be,index:S,node:T,rect:x});return _.useEffect(()=>{_e&&z.current.newIndex!==Ze&&(z.current.newIndex=Ze),f!==z.current.containerId&&(z.current.containerId=f),d!==z.current.items&&(z.current.items=d)},[_e,Ze,f,d]),_.useEffect(()=>{if(We===z.current.activeId)return;if(We!=null&&z.current.activeId==null){z.current.activeId=We;return}const ke=setTimeout(()=>{z.current.activeId=We},50);return()=>clearTimeout(ke)},[We]),{active:k,activeIndex:h,attributes:K,data:E,rect:x,index:S,newIndex:Ze,items:d,isOver:N,isSorting:_e,isDragging:G,listeners:A,node:T,overIndex:w,over:X,setNodeRef:Pe,setActivatorNodeRef:fe,setDroppableNodeRef:D,setDraggableNodeRef:L,transform:me??Tt,transition:Me()};function Me(){if(me||he&&z.current.newIndex===S)return aO;if(!(Le&&!gc(C)||!u)&&(_e||be))return ei.Transition.toString({...u,property:Yb})}}function sO(e,t){var n,a;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(a=e==null?void 0:e.droppable)!=null?a:t.droppable}}function Vo(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const lO=[Ae.Down,Ae.Right,Ae.Up,Ae.Left],oO=(e,t)=>{let{context:{active:n,collisionRect:a,droppableRects:i,droppableContainers:r,over:s,scrollableAncestors:l}}=t;if(lO.includes(e.code)){if(e.preventDefault(),!n||!a)return;const o=[];r.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const h=i.get(f.id);if(h)switch(e.code){case Ae.Down:a.top<h.top&&o.push(f);break;case Ae.Up:a.top>h.top&&o.push(f);break;case Ae.Left:a.left>h.left&&o.push(f);break;case Ae.Right:a.left<h.left&&o.push(f);break}});const u=B1({collisionRect:a,droppableRects:i,droppableContainers:o});let d=wb(u,"id");if(d===(s==null?void 0:s.id)&&u.length>1&&(d=u[1].id),d!=null){const f=r.get(n.id),h=r.get(d),m=h?i.get(h.id):null,v=h==null?void 0:h.node.current;if(v&&m&&f&&h){const w=vc(v).some((O,x)=>l[x]!==O),y=Gb(f,h),g=cO(f,h),p=w||!y?{x:0,y:0}:{x:g?a.width-m.width:0,y:g?a.height-m.height:0},S={x:m.left,y:m.top};return p.x&&p.y?S:Vs(S,p)}}}};function Gb(e,t){return!Vo(e)||!Vo(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function cO(e,t){return!Vo(e)||!Vo(t)||!Gb(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Se=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${a}`},rs=e=>{const t=String(e.getFullYear()).slice(2),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),r=["","","","","","",""][e.getDay()];return`${t}.${n}.${a}(${r})`},ql=e=>{const t=new Date(e),n=String(t.getFullYear()).slice(2),a=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),r=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),o=["","","","","","",""][t.getDay()];return`${n}.${a}.${i}(${o}) ${r}:${s}`},uO=e=>{const t=new Date;return Se(e)===Se(t)},dO=()=>{const[e,t]=_.useState(null),[n,a]=_.useState(!0);return _.useEffect(()=>{de.auth.getSession().then(({data:{session:o}})=>{t(o),a(!1)});const{data:{subscription:l}}=de.auth.onAuthStateChange((o,u)=>{t(u)});return()=>l.unsubscribe()},[]),{session:e,authLoading:n,handleGoogleLogin:async()=>{try{const{error:l}=await de.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/todo-note/"}});if(l)throw l}catch(l){alert(" : "+l.message)}},handleAppleLogin:async()=>{try{const{error:l}=await de.auth.signInWithOAuth({provider:"apple",options:{redirectTo:window.location.origin+"/todo-note/"}});if(l)throw l}catch(l){alert(" : "+l.message)}},handleLogout:async()=>{try{const{error:l}=await de.auth.signOut();if(l)throw l}catch(l){alert(" : "+l.message)}}}};function fO({showSidebar:e,setShowSidebar:t,session:n,viewMode:a,setViewMode:i,onOpenRoutine:r,onOpenGanttChart:s,onOpenEncouragementModal:l,onOpenAddSection:o,onOpenHiddenSections:u,onLogout:d}){var f,h;return c.jsxs(c.Fragment,{children:[e&&c.jsx("div",{className:"sidebar-overlay",onClick:()=>t(!1)}),c.jsxs("div",{className:`sidebar ${e?"open":""}`,children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsx("h2",{children:""}),c.jsx("button",{className:"sidebar-close",onClick:()=>t(!1),children:""})]}),n&&n.user&&c.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[((f=n.user.user_metadata)==null?void 0:f.avatar_url)&&c.jsx("img",{src:n.user.user_metadata.avatar_url,alt:"",style:{width:"40px",height:"40px",borderRadius:"50%"}}),c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((h=n.user.user_metadata)==null?void 0:h.full_name)||n.user.email}),c.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.user.email})]})]}),c.jsxs("div",{className:"sidebar-content",children:[c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{const m=a==="vertical"?"horizontal":"vertical";i(m),localStorage.setItem("viewMode",m),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:a==="vertical"?"":""}),c.jsx("span",{children:a==="vertical"?" ":" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{o(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{u(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:"  "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{r(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{s(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{l(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:"  "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{confirm(" ?")&&d()},style:{marginTop:"auto",borderTop:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 100, 100, 0.9)"},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:""})]})]})]})]})}function hO({selectedDate:e,onDateChange:t,onPrevDay:n,onNextDay:a}){return c.jsxs("div",{className:"date-nav-section",children:[c.jsxs("div",{className:"date-display-wrapper",children:[c.jsx("span",{className:"date-display",children:rs(e)}),c.jsx("input",{type:"date",value:Se(e),onChange:t,className:"date-picker-input"})]}),c.jsx("button",{onClick:n,className:"date-nav-button",children:""}),c.jsx("button",{onClick:a,className:"date-nav-button",children:""})]})}function mO({showSidebar:e,setShowSidebar:t,selectedDate:n,setSelectedDate:a,onDateChange:i,onPrevDay:r,onNextDay:s,showEncouragementEmoji:l,currentEncouragementMessage:o,onEncouragementClick:u,onQuickAdd:d,onOpenMemo:f,timelineCollapsed:h,setTimelineCollapsed:m}){const[v,b]=_.useState(""),[w,y]=_.useState(!1),g=async S=>{S.key==="Enter"&&!S.shiftKey&&v.trim()&&(S.preventDefault(),await p())},p=async()=>{if(!(!v.trim()||w)){y(!0);try{await d(v.trim()),b("")}catch(S){console.error("Quick add error:",S)}finally{y(!1)}}};return c.jsx("div",{className:"header-fixed",children:c.jsxs("div",{className:"settings-bar",children:[c.jsxs("div",{className:"header-row header-row-1",children:[c.jsx("button",{className:"hamburger-menu",onClick:()=>t(!e),title:"",children:c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{x:"2",y:"4",width:"16",height:"2",rx:"1",fill:"currentColor"}),c.jsx("rect",{x:"2",y:"9",width:"16",height:"2",rx:"1",fill:"currentColor"}),c.jsx("rect",{x:"2",y:"14",width:"16",height:"2",rx:"1",fill:"currentColor"})]})}),c.jsx(hO,{selectedDate:n,onDateChange:i,onPrevDay:r,onNextDay:s}),c.jsxs("button",{className:`timeline-toggle-button ${h?"collapsed":""}`,onClick:()=>m(!h),title:h?" ":" ",children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"2"}),c.jsx("polyline",{points:"12,6 12,12 16,14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),h?"":""]})]}),c.jsxs("div",{className:"header-row header-row-2",children:[c.jsx("div",{className:"encouragement-section",children:uO(n)?c.jsx("div",{className:"encouragement-message",onClick:u,title:"    !",children:l?c.jsx("span",{className:"encouragement-emoji",children:"  "}):o||"!"}):c.jsx("button",{onClick:()=>a(new Date),className:"today-link",title:" ",children:"  "})}),c.jsx("button",{className:"header-memo-button",onClick:f,title:" ",children:"  "})]}),c.jsx("div",{className:"header-row header-row-3",children:c.jsxs("div",{className:"quick-input-wrapper",children:[c.jsx("input",{type:"text",value:v,onChange:S=>b(S.target.value),onKeyDown:g,placeholder:" Quick  ",className:"quick-input",disabled:w}),c.jsx("button",{className:"quick-input-button",onClick:p,disabled:w||!v.trim(),title:" ",children:w?"...":""})]})})]})})}function gO({viewMode:e,currentSectionIndex:t,sectionsContainerRef:n,visibleSectionCount:a=3}){return e!=="horizontal"?null:c.jsx("div",{className:"section-pagination-dots",onTouchStart:i=>{const r=i.touches[0];i.currentTarget.dataset.touchStartX=r.clientX,i.currentTarget.dataset.touchStartTime=Date.now()},onTouchMove:i=>{i.currentTarget.dataset.touchMoved="true"},onTouchEnd:i=>{const r=parseFloat(i.currentTarget.dataset.touchStartX||"0"),s=parseInt(i.currentTarget.dataset.touchStartTime||"0"),l=i.currentTarget.dataset.touchMoved==="true",o=i.changedTouches[0].clientX,u=Date.now()-s;if(delete i.currentTarget.dataset.touchStartX,delete i.currentTarget.dataset.touchStartTime,delete i.currentTarget.dataset.touchMoved,l&&u<500){const d=r-o,f=n.current;if(!f)return;const h=f.querySelectorAll(".section-block");Math.abs(d)>50&&(d>0&&t<h.length-1?h[t+1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}):d<0&&t>0&&h[t-1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}))}},children:Array.from({length:a},(i,r)=>c.jsx("button",{className:`pagination-dot ${t===r?"active":""}`,onClick:()=>{const s=n.current;if(!s)return;const l=s.querySelectorAll(".section-block");l[r]&&l[r].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},r))})}const Xn={async get(e,t=null){try{const{data:n,error:a}=await de.from("user_settings").select("setting_value").eq("setting_key",e).maybeSingle();return a?(console.error(`   [${e}]:`,a.message),t):n&&n.setting_value?JSON.parse(n.setting_value):t}catch(n){return console.error(`   [${e}]:`,n.message),t}},async set(e,t,n){if(!n)return console.warn(`   [${e}]:  ID `),!1;try{const{data:a,error:i}=await de.from("user_settings").select("id").eq("setting_key",e).maybeSingle();if(i)return console.error(`   [${e}]:`,i.message),!1;const r=JSON.stringify(t);if(a){const{error:s}=await de.from("user_settings").update({setting_value:r,updated_at:new Date().toISOString()}).eq("setting_key",e);if(s)return console.error(`   [${e}]:`,s.message),!1}else{const{error:s}=await de.from("user_settings").insert([{setting_key:e,setting_value:r,user_id:n}]);if(s)return console.error(`   [${e}]:`,s.message),!1}return!0}catch(a){return console.error(`   [${e}]:`,a.message),!1}},async remove(e){try{const{error:t}=await de.from("user_settings").delete().eq("setting_key",e);return t?(console.error(`   [${e}]:`,t.message),!1):!0}catch(t){return console.error(`   [${e}]:`,t.message),!1}}},Qn={SECTION_ORDER:"section_order",SECTION_TITLES:"section_titles",SECTION_ICONS:"section_icons",CUSTOM_SECTIONS:"custom_sections",HIDDEN_SECTIONS:"hidden_sections"},ju={timeline:"",normal:""},Id=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function Yd({title:e,icon:t,sectionId:n,onIconChange:a,editable:i=!1,onTitleChange:r,showHideButton:s=!1,onHide:l,showDeleteButton:o=!1,onDelete:u,customActions:d,settingsMenuItems:f=[]}){var N,D,k,C;const[h,m]=_.useState(!1),[v,b]=_.useState(e),[w,y]=_.useState(!1),[g,p]=_.useState(!1),S=_.useRef(null),E=_.useRef(null),O=()=>{v.trim()&&v!==e&&(r==null||r(v.trim())),m(!1)},x=()=>{b(e),m(!1)};_.useEffect(()=>{const U=K=>{if(w&&S.current&&!S.current.contains(K.target)){const L=document.querySelector(".section-settings-dropdown");L&&!L.contains(K.target)&&y(!1)}if(g&&E.current&&!E.current.contains(K.target)){const L=document.querySelector(".emoji-picker-dropdown");L&&!L.contains(K.target)&&p(!1)}};return document.addEventListener("mousedown",U),()=>{document.removeEventListener("mousedown",U)}},[w,g]);const T=U=>{a&&n&&a(n,U),p(!1)};return c.jsxs("div",{className:"section-header",children:[c.jsxs("div",{className:"section-title-container",children:[t&&a&&c.jsxs("div",{style:{position:"relative"},children:[c.jsx("span",{ref:E,className:"section-icon-button",onClick:()=>p(!g),title:" ",children:t}),g&&Cu.createPortal(c.jsx("div",{className:"emoji-picker-dropdown",style:{position:"fixed",top:`${((N=E.current)==null?void 0:N.getBoundingClientRect().bottom)+5}px`,left:`${(D=E.current)==null?void 0:D.getBoundingClientRect().left}px`},children:Id.map((U,K)=>c.jsx("button",{className:"emoji-option",onClick:()=>T(U),children:U},K))}),document.body)]}),t&&!a&&c.jsx("span",{className:"section-icon",children:t}),h?c.jsx("div",{className:"section-title-edit-wrapper",children:c.jsx("input",{type:"text",value:v,onChange:U=>b(U.target.value),onBlur:O,onKeyDown:U=>{U.key==="Enter"?O():U.key==="Escape"&&x()},className:"section-title-input",autoFocus:!0})}):c.jsx("h2",{className:`section-title ${i?"editable":""}`,onClick:()=>i&&m(!0),children:e})]}),c.jsxs("div",{className:"section-actions",children:[d,f.length>0&&c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{ref:S,className:"section-action-button settings-button",onClick:()=>y(!w),title:"",children:""}),w&&Cu.createPortal(c.jsx("div",{className:"section-settings-dropdown",style:{position:"fixed",top:`${((k=S.current)==null?void 0:k.getBoundingClientRect().bottom)+5}px`,left:`${(C=S.current)==null?void 0:C.getBoundingClientRect().left}px`},children:f.map((U,K)=>c.jsxs("button",{className:"settings-menu-item",onClick:()=>{U.onClick(),y(!1)},children:[c.jsx("span",{children:U.icon}),c.jsx("span",{children:U.label})]},K))}),document.body)]})]})]})}function av({title:e,icon:t,sectionId:n,onIconChange:a,className:i,inputValue:r,setInputValue:s,onAddTodo:l,isAdding:o,placeholder:u,children:d,editable:f=!1,onTitleChange:h,settingsMenuItems:m=[],headerActions:v}){return c.jsxs("div",{className:i,children:[c.jsx(Yd,{title:e,icon:t,sectionId:n,onIconChange:a,editable:f,onTitleChange:h,settingsMenuItems:m,customActions:v}),c.jsxs("div",{className:"section-input",children:[c.jsx("input",{type:"text",value:r,onChange:b=>s(b.target.value),onKeyDown:b=>{b.key==="Enter"&&l()},placeholder:u,className:"todo-input",disabled:o}),c.jsx("button",{onClick:l,className:"add-button",disabled:o,children:""})]}),c.jsx("div",{className:"section-body",children:d})]})}function vO({todo:e,index:t,totalCount:n,hour:a,startHour:i,endHour:r,onToggle:s,onRemoveFromTimeline:l,onMoveUpInTimeline:o,onMoveDownInTimeline:u}){const[d,f]=_.useState(!1),{attributes:h,listeners:m,setNodeRef:v,transform:b,transition:w,isDragging:y}=Vb({id:`timeline-todo-${e.id}`,data:{type:"timeline-todo",todo:e}}),g={transform:ei.Transform.toString(b),transition:w,opacity:y?.5:1},p=!(t===0&&a<=i),S=!(t===n-1&&a>=r);return _.useEffect(()=>{const E=O=>{d&&!O.target.closest(".timeline-todo-handle-wrapper")&&f(!1)};return document.addEventListener("click",E),()=>document.removeEventListener("click",E)},[d]),c.jsxs("div",{ref:v,style:g,className:`timeline-scheduled-todo ${y?"dragging":""}`,children:[c.jsxs("div",{className:"timeline-todo-handle-wrapper",children:[c.jsx("span",{className:"timeline-todo-handle",...h,...m,onClick:E=>{E.stopPropagation(),f(!d)},title:":   /  : "}),d&&c.jsxs("div",{className:"timeline-move-menu",children:[p&&c.jsxs("button",{className:"timeline-move-menu-item move-to-top",onClick:E=>{E.stopPropagation(),o(e.id),f(!1)},children:[c.jsx("span",{children:""})," "]}),S&&c.jsxs("button",{className:"timeline-move-menu-item move-to-bottom",onClick:E=>{E.stopPropagation(),u(e.id),f(!1)},children:[c.jsx("span",{children:""})," "]}),c.jsxs("button",{className:"timeline-move-menu-item remove",onClick:E=>{E.stopPropagation(),l(e.id),f(!1)},children:[c.jsx("span",{children:""})," "]})]})]}),c.jsxs("label",{className:"timeline-todo-checkbox",children:[c.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>s(e.id)}),c.jsx("span",{className:"timeline-checkbox-custom"})]}),c.jsx("span",{className:`timeline-todo-text ${e.completed?"completed":""}`,children:e.text}),c.jsx("button",{className:"timeline-todo-remove-button",onClick:E=>{E.stopPropagation(),l(e.id)},title:" ",children:""})]})}function yO({hour:e,startHour:t,endHour:n,scheduledTodos:a,onToggle:i,onRemoveFromTimeline:r,onMoveUpInTimeline:s,onMoveDownInTimeline:l,onDoubleClick:o}){const{isOver:u,setNodeRef:d}=Hb({id:`timeline-${e}`,data:{type:"timeline",hour:e}}),f=m=>{m.target.closest(".timeline-scheduled-todo")||o==null||o(e)},h=a.filter(m=>m.scheduled_time?parseInt(m.scheduled_time.split(":")[0],10)===e:!1).sort((m,v)=>{const b=parseInt(m.scheduled_time.split(":")[1],10),w=parseInt(v.scheduled_time.split(":")[1],10);return b-w});return c.jsxs("div",{ref:d,className:`timeline-hour-slot ${u?"timeline-drop-active":""}`,onDoubleClick:f,children:[c.jsx("div",{className:"timeline-hour-label",children:e===24?"00:00":`${e.toString().padStart(2,"0")}:00`}),c.jsx("div",{className:"timeline-hour-content",children:h.map((m,v)=>c.jsx(vO,{todo:m,index:v,totalCount:h.length,hour:e,startHour:t,endHour:n,onToggle:i,onRemoveFromTimeline:r,onMoveUpInTimeline:s,onMoveDownInTimeline:l},m.id))})]})}const iv=_.forwardRef(function({startHour:t=6,endHour:n=24,scheduledTodos:a=[],onToggle:i,onRemoveFromTimeline:r,onMoveUpInTimeline:s,onMoveDownInTimeline:l,onAddTodo:o},u){const[d,f]=_.useState(new Date),[h,m]=_.useState(null),[v,b]=_.useState(""),w=_.useRef(null),y=_.useRef(null),g=_.useRef(null),p=C=>{m(C),b("")};_.useEffect(()=>{h!==null&&w.current&&w.current.focus()},[h]);const S=async()=>{v.trim()&&o&&await o(h,v.trim()),m(null),b("")},E=C=>{C.key==="Enter"?(C.preventDefault(),S()):C.key==="Escape"&&(m(null),b(""))},O=()=>{setTimeout(()=>{v.trim()?S():(m(null),b(""))},100)},x=()=>{if(g.current&&y.current){const C=y.current,U=g.current,K=C.clientHeight,L=U.offsetTop;C.scrollTo({top:L-K/2,behavior:"smooth"})}};_.useImperativeHandle(u,()=>({scrollToNow:x})),_.useEffect(()=>{const C=setInterval(()=>{f(new Date)},6e4);return()=>clearInterval(C)},[]),_.useEffect(()=>{if(g.current&&y.current){const C=y.current,U=g.current,K=C.clientHeight,L=U.offsetTop;C.scrollTop=L-K/2}},[]);const T=[];for(let C=t;C<=n;C++)T.push(C);const N=()=>{const C=d.getHours(),U=d.getMinutes(),K=C*60+U,L=t*60,A=n*60,G=A-L;return K<L?0:K>A?100:(K-L)/G*100},D=()=>{const C=d.getHours();return C>=t&&C<=n},k=()=>d.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1});return c.jsx("div",{className:"timeline-view",ref:y,children:c.jsxs("div",{className:"timeline-grid",children:[T.map(C=>c.jsxs(rt.Fragment,{children:[c.jsx(yO,{hour:C,startHour:t,endHour:n,scheduledTodos:a,onToggle:i,onRemoveFromTimeline:r,onMoveUpInTimeline:s,onMoveDownInTimeline:l,onDoubleClick:p}),h===C&&c.jsx("div",{className:"timeline-add-input-container",children:c.jsx("input",{ref:w,type:"text",value:v,onChange:U=>b(U.target.value),onKeyDown:E,onBlur:O,placeholder:"  ...",className:"timeline-add-input"})})]},C)),D()&&c.jsxs("div",{ref:g,className:"timeline-current-time",style:{top:`${N()}%`},children:[c.jsx("div",{className:"timeline-current-time-dot"}),c.jsx("div",{className:"timeline-current-time-line"}),c.jsx("div",{className:"timeline-current-time-label",children:k()})]})]})})});function pO({todoId:e,isFirst:t,isLast:n,onMoveUp:a,onMoveDown:i,onMoveToTop:r,onMoveToBottom:s,onDelete:l,onClose:o,sections:u=[],currentSectionType:d,currentSectionId:f,onMoveToSection:h}){const[m,v]=_.useState(!1),b=y=>{y(),o()},w=u.filter(y=>!(d==="normal"&&y.sectionType==="normal"||d==="custom"&&y.sectionType==="custom"&&y.sectionId===f));return c.jsxs("div",{className:"move-menu",children:[!t&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"move-menu-item move-to-top",onClick:y=>{y.stopPropagation(),b(()=>r&&r(e))},children:[c.jsx("span",{className:"move-menu-icon",children:""}),"  "]}),c.jsxs("button",{className:"move-menu-item",onClick:y=>{y.stopPropagation(),b(()=>a&&a(e))},children:[c.jsx("span",{className:"move-menu-icon",children:""})," "]})]}),!n&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"move-menu-item",onClick:y=>{y.stopPropagation(),b(()=>i&&i(e))},children:[c.jsx("span",{className:"move-menu-icon",children:""})," "]}),c.jsxs("button",{className:"move-menu-item move-to-bottom",onClick:y=>{y.stopPropagation(),b(()=>s&&s(e))},children:[c.jsx("span",{className:"move-menu-icon",children:""}),"  "]})]}),w.length>0&&c.jsxs("div",{className:"move-menu-section-wrapper",children:[c.jsxs("button",{className:`move-menu-item${m?" active":""}`,onClick:y=>{y.stopPropagation(),v(!m)},children:[c.jsx("span",{className:"move-menu-icon",children:""}),"  ",c.jsx("span",{className:"move-menu-arrow",children:""})]}),m&&c.jsx("div",{className:"move-menu-section-popup",children:w.map(y=>c.jsxs("button",{className:"move-menu-section-item",onClick:g=>{g.stopPropagation(),h&&h(e,y.sectionType,y.sectionId),o()},children:[c.jsx("span",{className:"move-menu-section-icon",children:y.icon}),y.name]},y.id))})]}),c.jsxs("button",{className:"move-menu-item delete",onClick:y=>{y.stopPropagation(),window.confirm("  ?")&&l(e),o()},children:[c.jsx("span",{className:"move-menu-icon",children:""})," "]})]})}const ol=[{key:"mon",label:""},{key:"tue",label:""},{key:"wed",label:""},{key:"thu",label:""},{key:"fri",label:""},{key:"sat",label:""},{key:"sun",label:""}],Ou={THIS_ONLY:"this-only",FROM_NOW:"from-now",ALL:"all"},Wt={NONE:"none",DAILY:"daily",WEEKDAYS:"weekdays",WEEKENDS:"weekends",WEEKLY:"weekly"},bO=[{name:"",icon:"",is_system:!0,is_default:!1},{name:"",icon:"",is_system:!0,is_default:!0}],_O="09",wO="00";function oh({value:e,onChange:t}){const n=_.useRef(null),a=_.useRef(null),i=_.useRef(e),r=_.useRef(!1),[s,l]=_.useState(()=>e&&e.includes(":")?e.split(":")[0]:_O),[o,u]=_.useState(()=>e&&e.includes(":")?e.split(":")[1]:wO);_.useEffect(()=>{if(e&&e.includes(":")&&e!==i.current){const[g,p]=e.split(":");i.current=e,l(g),u(p)}},[e]),_.useEffect(()=>{if(!r.current){r.current=!0;return}const g=`${s}:${o}`;i.current=g,t&&t(g)},[s,o]);const d=(g,p,S)=>{if(!g.current)return;const E=g.current.scrollTop,x=Math.round(E/40),T=String(x).padStart(2,"0");p(T)},f=(g,p)=>{if(!g.current)return;const S=40,E=parseInt(p,10);g.current.scrollTop=E*S};_.useEffect(()=>{f(n,s)},[]),_.useEffect(()=>{f(a,o)},[]);const h=Array.from({length:24},(g,p)=>String(p).padStart(2,"0")),m=Array.from({length:60},(g,p)=>String(p).padStart(2,"0")),v=()=>{const g=(parseInt(s,10)+1)%24,p=String(g).padStart(2,"0");l(p),f(n,p)},b=()=>{const g=(parseInt(s,10)-1+24)%24,p=String(g).padStart(2,"0");l(p),f(n,p)},w=()=>{const g=(parseInt(o,10)+1)%60,p=String(g).padStart(2,"0");u(p),f(a,p)},y=()=>{const g=(parseInt(o,10)-1+60)%60,p=String(g).padStart(2,"0");u(p),f(a,p)};return c.jsxs("div",{className:"apple-time-picker",children:[c.jsxs("div",{className:"picker-arrows-top",children:[c.jsx("button",{className:"picker-arrow-button",onClick:v,children:""}),c.jsx("div",{style:{width:"20px"}}),c.jsx("button",{className:"picker-arrow-button",onClick:w,children:""})]}),c.jsxs("div",{className:"picker-container",children:[c.jsxs("div",{className:"picker-column",ref:n,onScroll:()=>d(n,l),children:[c.jsx("div",{className:"picker-spacer"}),h.map(g=>c.jsx("div",{className:`picker-item ${g===s?"selected":""}`,onClick:()=>{l(g),f(n,g)},children:g},g)),c.jsx("div",{className:"picker-spacer"})]}),c.jsx("div",{className:"picker-separator",children:":"}),c.jsxs("div",{className:"picker-column",ref:a,onScroll:()=>d(a,u),children:[c.jsx("div",{className:"picker-spacer"}),m.map(g=>c.jsx("div",{className:`picker-item ${g===o?"selected":""}`,onClick:()=>{u(g),f(a,g)},children:g},g)),c.jsx("div",{className:"picker-spacer"})]})]}),c.jsxs("div",{className:"picker-arrows-bottom",children:[c.jsx("button",{className:"picker-arrow-button",onClick:b,children:""}),c.jsx("div",{style:{width:"20px"}}),c.jsx("button",{className:"picker-arrow-button",onClick:y,children:""})]}),c.jsx("div",{className:"picker-selection-indicator"})]})}function Go({selectedDays:e=[],onToggle:t,disabled:n=!1,variant:a="default"}){const i=(l,o)=>{l.stopPropagation(),t(o)},r=a==="inline"?"day-selector-inline":"day-selector",s=a==="inline"?"day-button-inline":"day-button";return c.jsx("div",{className:r,children:ol.map(l=>c.jsx("button",{onClick:o=>i(o,l.key),className:`${s} ${e.includes(l.key)?"selected":""}`,disabled:n,type:"button",children:l.label},l.key))})}const SO=[{value:"this-only",label:" ",description:" ",tooltip:"  ,  ,   "},{value:"from-now",label:"   ",description:" ",tooltip:"  ,  ,   "},{value:"all",label:" ",description:" ",tooltip:"  ,  ,   "}],oa={container:{display:"flex",flexDirection:"column",gap:"0.75rem"},option:e=>({display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:e?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"}),radio:{width:"16px",height:"16px",cursor:"pointer"},labelContainer:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},labelRow:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},label:{fontWeight:"600"},description:{fontSize:"0.85rem",color:"#9ca3af"},helpButton:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},tooltip:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"}};function xO({selectedOption:e,onChange:t,name:n="delete-option"}){const[a,i]=_.useState(null);return c.jsx("div",{style:oa.container,children:SO.map(r=>c.jsxs("div",{style:oa.option(e===r.value),onClick:()=>t(r.value),children:[c.jsx("input",{type:"radio",name:n,value:r.value,checked:e===r.value,onChange:s=>t(s.target.value),style:oa.radio}),c.jsx("div",{style:oa.labelContainer,children:c.jsxs("div",{style:oa.labelRow,children:[c.jsx("span",{style:oa.label,children:r.label}),c.jsx("span",{style:oa.description,children:r.description})]})}),c.jsx("button",{onMouseEnter:()=>i(r.value),onMouseLeave:()=>i(null),onClick:s=>{s.stopPropagation(),i(a===r.value?null:r.value)},style:oa.helpButton,children:"?"}),a===r.value&&c.jsx("div",{style:oa.tooltip,children:r.tooltip})]},r.value))})}function EO({todo:e,isOpen:t,onClose:n,onEdit:a,onToggle:i,onDelete:r,onAddSubTodo:s,onCreateRoutine:l,subtodos:o,routines:u,formatDate:d,formatDateOnly:f}){var We;const[h,m]=_.useState(e.text),[v,b]=_.useState(null),[w,y]=_.useState(""),[g,p]=_.useState("this-only"),[S,E]=_.useState(!1),[O,x]=_.useState([]),[T,N]=_.useState(""),[D,k]=_.useState([]),[C,U]=_.useState(!1),[K,L]=_.useState([]),[A,G]=_.useState([]),[X,fe]=_.useState(null),Q=e.routine_id?u.find(z=>z.id===e.routine_id):null,Pe=e.repeat_days&&e.repeat_days.length>0,_e=Pe?e.repeat_days:(Q==null?void 0:Q.days)||[],Ve=z=>["sun","mon","tue","wed","thu","fri","sat"][z],Le=z=>{x(he=>he.includes(z)?he.filter(be=>be!==z):[...he,z])};_.useEffect(()=>{if(t){const z=e.repeat_days&&e.repeat_days.length>0||Q;E(!z),x(z?e.repeat_days||(Q==null?void 0:Q.days)||[]:[]),N((Q==null?void 0:Q.time_slot)||"")}},[t,e.id]),_.useEffect(()=>{v==="history"&&D.length===0&&!C&&(async()=>{U(!0);try{const{data:he,error:be}=await de.from("todo_history").select("*").eq("todo_id",e.id).order("changed_at",{ascending:!1});if(be)throw be;k(he||[])}catch(he){console.error("Error fetching history:",he)}finally{U(!1)}})()},[v,e.id,D.length,C]),_.useEffect(()=>{v==="routine-stats"&&Q&&(!X||X.id!==Q.id)&&(async()=>{try{const{data:he,error:be}=await de.from("todos").select("*").eq("routine_id",Q.id).eq("deleted",!1).maybeSingle();if(be)throw be;if(he&&he.visible_dates){const me=he.visible_dates.sort().map(Me=>{var ke;return{id:`${he.id}-${Me}`,date:Me,text:he.text,completed:((ke=he.completed_dates)==null?void 0:ke.includes(Me))||!1}});G(me),fe(Q)}}catch(he){console.error("Error fetching routine history:",he)}})()},[v,Q,X]);const Ge=z=>{L(he=>he.includes(z)?he.filter(be=>be!==z):[...he,z])},qe=_.useRef(!1),Tt=z=>{z.target===z.currentTarget&&(qe.current=!0)},Ze=z=>{z.target===z.currentTarget&&qe.current&&n(),qe.current=!1};return t?Cu.createPortal(c.jsx("div",{className:"modal-overlay",onMouseDown:Tt,onClick:Ze,children:c.jsxs("div",{className:"actions-modal-content",onClick:z=>z.stopPropagation(),children:[c.jsxs("div",{className:"actions-modal-header",children:[c.jsx("h3",{children:" "}),c.jsx("button",{onClick:n,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"todo-edit-section",children:c.jsx("textarea",{value:h,onChange:z=>m(z.target.value),onBlur:()=>{h.trim()!==""&&h!==e.text?a(e.id,h):h.trim()===""&&m(e.text)},className:"todo-edit-textarea",placeholder:"  ...",rows:3})}),c.jsxs("div",{className:"actions-modal-body",children:[c.jsxs("div",{className:"actions-menu",children:[c.jsxs("button",{className:`action-menu-item ${v==="nanotodo"?"active":""}`,onClick:()=>b("nanotodo"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item ${v==="routine"?"active":""}`,onClick:()=>{b("routine"),Q?(x(Q.days||[]),N(Q.time_slot||""),E(!1)):(x([]),N(""),E(!0))},children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item ${v==="history"?"active":""}`,onClick:()=>b("history"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),(((We=e.timeline_history)==null?void 0:We.length)>0||e.scheduled_time)&&c.jsxs("button",{className:`action-menu-item ${v==="timeline-history"?"active":""}`,onClick:()=>b("timeline-history"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),e.routine_id&&Q&&c.jsxs("button",{className:`action-menu-item ${v==="routine-stats"?"active":""}`,onClick:()=>b("routine-stats"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item delete ${v==="delete"?"active":""}`,onClick:()=>b("delete"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]})]}),c.jsxs("div",{className:"actions-detail",children:[!v&&c.jsx("div",{className:"actions-detail-empty",children:c.jsx("p",{children:"  "})}),v==="nanotodo"&&c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:" "}),c.jsxs("div",{className:"nanotodo-section-in-modal",children:[o&&o.length>0&&c.jsx("div",{className:"subtodo-list-in-modal",children:o.map(z=>c.jsxs("div",{className:"subtodo-item-in-modal",children:[c.jsx("input",{type:"checkbox",checked:z.completed,onChange:()=>i(z.id),className:"subtodo-checkbox-modal"}),c.jsx("span",{className:`subtodo-text-modal ${z.completed?"completed":""}`,children:z.text}),c.jsx("button",{onClick:()=>r(z.id),className:"subtodo-delete-modal",title:"",children:""})]},z.id))}),c.jsxs("div",{className:"subtodo-input-section-modal",children:[c.jsx("input",{type:"text",value:w,onChange:z=>y(z.target.value),onKeyDown:z=>{z.key==="Enter"&&w.trim()&&(s(e.id,w.trim()),y(""))},placeholder:" ...",className:"subtodo-input-modal"}),c.jsx("button",{onClick:()=>{w.trim()&&(s(e.id,w.trim()),y(""))},className:"subtodo-add-button-modal",children:""})]})]})]}),v==="routine"&&c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsx("div",{className:"routine-setup-inline",children:(Pe||Q)&&!S?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-current-info",children:[c.jsx("div",{className:"routine-info-title",children:" :"}),c.jsx("div",{className:"routine-days-display",children:ol.filter(z=>_e.includes(z.key)).map(z=>c.jsx("span",{className:"routine-day-badge",children:z.label},z.key))}),(Q==null?void 0:Q.time_slot)&&c.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",Q.time_slot]})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:z=>{z.stopPropagation(),x(_e),N((Q==null?void 0:Q.time_slot)||""),E(!0)},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:async z=>{z.stopPropagation(),await l(e.id,e.text,[],null,!0),n()},className:"routine-remove-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"routine-setup-title",children:S&&(Pe||Q)?" :":"  :"}),c.jsx(Go,{selectedDays:O,onToggle:Le,variant:"inline"}),c.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[c.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),c.jsx(oh,{value:T,onChange:z=>N(z)})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:async z=>{z.stopPropagation(),await l(e.id,e.text,O,(Q==null?void 0:Q.id)||null,!1,T),E(!1),n()},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:z=>{z.stopPropagation(),E(!1),x([]),N("")},className:"routine-cancel-button",children:""})]})]})})]}),v==="history"&&(()=>{const z=e.visible_dates&&e.visible_dates.length>0?e.visible_dates:[e.date],he=z[0],be=z.map(me=>({id:`${e.id}-${me}`,date:me}));return C?c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:" ..."})]}):c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsxs("div",{className:"todo-history",children:[c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:":"}),c.jsx("span",{className:"history-value",children:d(e.created_at)})]}),c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:f(he?new Date(he+"T00:00:00"):new Date(e.date+"T00:00:00"))})]}),be.length>0&&c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:be.map((me,Me)=>{const ke=me.date===e.date,xe=f(new Date(me.date+"T00:00:00"));return c.jsxs("span",{children:[Me>0&&"  ",c.jsxs("span",{style:ke?{fontWeight:"bold",color:"#4CAF50"}:{},children:[xe.split("(")[0],ke?"()":""]})]},me.id)})})]}),D.length>0&&c.jsxs("div",{className:"history-changes-list",children:[c.jsxs("div",{className:"history-changes-header",children:["  (",D.length,")"]}),D.map(me=>c.jsxs("div",{className:"history-record-compact",children:[c.jsxs("div",{className:"history-record-summary",children:[c.jsxs("div",{className:"history-change-time",children:[d(me.changed_at),me.changed_on_date&&c.jsxs("span",{className:"history-page-info",children:[" (: ",f(new Date(me.changed_on_date+"T00:00:00")),")"]})]}),c.jsx("button",{className:"history-detail-button",onClick:Me=>{Me.stopPropagation(),Ge(me.id)},children:K.includes(me.id)?"":""})]}),K.includes(me.id)&&c.jsxs("div",{className:"history-change",children:[c.jsxs("div",{className:"history-change-item history-before",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:me.previous_text})]}),c.jsx("div",{className:"history-change-arrow",children:""}),c.jsxs("div",{className:"history-change-item history-after",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:me.new_text})]})]})]},me.id))]})]})]})})(),v==="timeline-history"&&c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsxs("div",{className:"todo-history",children:[e.scheduled_time&&e.scheduled_date&&c.jsxs("div",{className:"history-item",style:{marginBottom:"1rem",padding:"0.75rem",background:"rgba(99, 102, 241, 0.1)",borderRadius:"8px"},children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsxs("span",{className:"history-value",children:[c.jsx("span",{style:{color:"#60a5fa"},children:f(new Date(e.scheduled_date+"T00:00:00"))}),c.jsx("span",{style:{marginLeft:"0.5rem",color:"#fbbf24",fontWeight:"600"},children:e.scheduled_time})]})]}),e.timeline_history&&e.timeline_history.length>0?c.jsxs("div",{className:"history-changes-list",children:[c.jsxs("div",{className:"history-changes-header",children:["  (",e.timeline_history.length,")"]}),e.timeline_history.slice().reverse().map((z,he)=>{const be=new Date(z.scheduled_date+"T00:00:00"),me=f(be);return c.jsx("div",{className:"history-record-compact",children:c.jsxs("div",{className:"history-record-summary",children:[c.jsxs("div",{className:"history-change-time",children:[c.jsx("span",{style:{color:"#60a5fa"},children:me}),c.jsx("span",{style:{marginLeft:"0.5rem",color:"#fbbf24"},children:z.scheduled_time})]}),c.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.5)"},children:[d(z.assigned_at)," "]})]})},he)})]}):c.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.5)"},children:"   ."})]})]}),v==="routine-stats"&&Q&&(()=>{if(!X||X.id!==Q.id||A.length===0)return c.jsxs("div",{className:"actions-detail-content",children:[c.jsxs("h4",{children:[" ",Q.text," "]}),c.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:!X||X.id!==Q.id?" ...":" ."})]});const z=A[0],he=new Date(z.date),be=new Date,me={};A.forEach(xe=>{me[xe.date]=xe.completed});const Me=[];let ke=new Date(he);for(;ke<=be;){const xe=ke.getFullYear(),J=ke.getMonth(),se=`${xe}-${J+1}`;Me.find(Y=>Y.key===se)||Me.push({key:se,year:xe,month:J,days:[]});const Ce=Me.find(Y=>Y.key===se),Oe=Se(ke),H=ke.getDay(),I=Ve(H),$=Q.days.includes(I);Ce.days.push({date:new Date(ke),dateStr:Oe,day:ke.getDate(),dayOfWeek:H,isCompleted:me[Oe]===!0,isRoutineDay:$,hasTodo:me[Oe]!==void 0}),ke.setDate(ke.getDate()+1)}return c.jsxs("div",{className:"actions-detail-content",children:[c.jsxs("h4",{children:[" ",Q.text," "]}),c.jsxs("div",{className:"routine-history-content",children:[c.jsx("div",{className:"routine-history-calendar",children:Me.map(xe=>c.jsxs("div",{className:"history-month",children:[c.jsxs("h3",{className:"history-month-title",children:[xe.year," ",xe.month+1,""]}),c.jsxs("div",{className:"history-calendar-grid",children:[c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),xe.days.length>0&&Array(xe.days[0].dayOfWeek).fill(null).map((J,se)=>c.jsx("div",{className:"history-day-cell empty"},`empty-${se}`)),xe.days.map(J=>c.jsxs("div",{className:`history-day-cell ${J.isCompleted?"completed":""} ${J.isRoutineDay?"":"not-routine-day"}`,title:`${J.dateStr}${J.isRoutineDay?"":" (  )"}${J.isCompleted?" - ":J.hasTodo?" - ":""}`,children:[c.jsx("span",{className:"day-number",children:J.day}),J.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]},J.dateStr))]})]},xe.key))}),c.jsxs("div",{className:"routine-history-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:" :"}),c.jsxs("span",{className:"stat-value",children:[A.length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value completed",children:[A.filter(xe=>xe.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value incomplete",children:[A.filter(xe=>!xe.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value",children:[A.length>0?Math.round(A.filter(xe=>xe.completed).length/A.length*100):0,"%"]})]})]})]})]})})(),v==="delete"&&c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"   "}),c.jsxs("p",{style:{fontSize:"0.9rem",color:"#9ca3af",marginBottom:"1rem",lineHeight:"1.6"},children:["    .",c.jsx("br",{}),"    ."]}),c.jsx(xO,{selectedOption:g,onChange:p}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[c.jsx("button",{onClick:n,style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#9ca3af",cursor:"pointer",fontSize:"0.9rem"},children:""}),c.jsx("button",{onClick:async()=>{window.confirm(` ?

  5    .`)&&(await r(e.id,g),n())},style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:""})]})]})]})]})]})}),document.body):null}function ao({todo:e,index:t,onToggle:n,onDelete:a,onEdit:i,formatDate:r,formatDateOnly:s,isFocused:l,onFocus:o,onAddSubTodo:u,subtodos:d,level:f=0,onCreateRoutine:h,routines:m,onShowRoutineHistory:v,onOpenRoutineSetupModal:b,onOpenHistoryModal:w,currentPageDate:y,isPendingRoutine:g=!1,onRemoveFromUI:p,showSuccessMessage:S,activeId:E,overId:O,hideNumber:x=!1,onMoveUp:T,onMoveDown:N,onMoveToTop:D,onMoveToBottom:k,isFirst:C,isLast:U,sections:K=[],onMoveToSection:L}){const[A,G]=_.useState(!1),[X,fe]=_.useState(!1),[Q,Pe]=_.useState(!1),[_e,Ve]=_.useState(e.text),[Le,Ge]=_.useState(!1),[qe,Tt]=_.useState(!1),[Ze,We]=_.useState(""),[z,he]=_.useState(!1),be=e.routine_id?m.find(M=>M.id===e.routine_id):null,me=e.repeat_days&&e.repeat_days.length>0,Me=me?(e.completed_dates||[]).includes(y):e.completed,{attributes:ke,listeners:xe,setNodeRef:J,transform:se,transition:Ce,isDragging:Oe}=Vb({id:e.id}),H=e.id===E,I=e.id===O&&E&&E!==O,$={cursor:"grab",opacity:H?.4:1},Y=e.text.length>30,te=()=>{Pe(!0),Ve(e.text)},P=async()=>{_e.trim()&&_e!==e.text&&await i(e.id,_e.trim()),Pe(!1)},F=async M=>{M.key==="Enter"&&!M.shiftKey?(M.preventDefault(),await P()):M.key==="Escape"&&(Pe(!1),Ve(e.text))};return _.useEffect(()=>{const M=Z=>{X&&!Z.target.closest(".drag-handle-wrapper")&&fe(!1)};return document.addEventListener("click",M),()=>document.removeEventListener("click",M)},[X]),c.jsxs("div",{ref:J,style:{...$,borderTop:I?"2px solid rgba(99, 102, 241, 0.8)":"2px solid transparent"},className:"todo-item-container",children:[c.jsxs("div",{className:"drag-handle-wrapper",children:[c.jsx("span",{className:"drag-handle",...ke,...xe,onClick:M=>{M.stopPropagation(),fe(!X)},title:":   /  : "}),X&&c.jsx(pO,{todoId:e.id,isFirst:C,isLast:U,onMoveUp:T,onMoveDown:N,onMoveToTop:D,onMoveToBottom:k,onDelete:a,onClose:()=>fe(!1),sections:K,currentSectionType:e.section_type,currentSectionId:e.section_id,onMoveToSection:L})]}),!x&&c.jsx("span",{className:"todo-number",children:t+1}),c.jsx("div",{className:"todo-item-wrapper",children:c.jsxs("div",{className:`todo-item ${Me?"completed":""} ${A?"expanded":""} ${Oe?"drag-mode":""} ${e.scheduled_time&&e.scheduled_date===y?"has-timeline":""}`,children:[c.jsx("input",{type:"checkbox",checked:Me,onChange:()=>n(e.id),className:"todo-checkbox"}),c.jsx("div",{className:"todo-content",onClick:()=>!Q&&Y&&G(!A),onDoubleClick:te,style:{cursor:Q?"text":Y?"pointer":"default"},children:Q?c.jsx("textarea",{value:_e,onChange:M=>Ve(M.target.value),onBlur:P,onKeyDown:F,className:"todo-edit-input",autoFocus:!0,rows:1,style:{minHeight:"1.35em",resize:"vertical",overflow:"hidden"},onInput:M=>{M.target.style.height="auto",M.target.style.height=M.target.scrollHeight+"px"}}):c.jsx("span",{className:`todo-text ${A?"expanded":""}`,children:e.text})}),(()=>{const M=!me&&Me&&e.completed_at&&new Date(e.completed_at).toISOString().split("T")[0]!==e.date,Z=e.routine_id&&be,ee=me,ae=Z||ee;return(d.length>0||M||ae)&&c.jsxs("div",{className:"todo-badges",children:[M&&(()=>{const V=new Date(e.completed_at).toISOString().split("T")[0],ie=new Date(e.completed_at).getDate();return c.jsxs("span",{className:"completed-date-badge",title:`${V} `,children:[ie,""]})})(),ae&&(()=>{const V=y||e.date;if(me&&e.repeat_start_date===V)return c.jsx("span",{className:"routine-date-badge",title:"  ",children:""});const Ee=new Date(V+"T00:00:00"),ct=Ee.getMonth()+1,Qt=Ee.getDate(),Vn=["","","","","","",""][Ee.getDay()],ii=`${ct}/${Qt}(${Vn})`,ta=Z?`${be.text} `:" ";return c.jsxs("span",{className:"routine-date-badge",title:ta,children:["for ",ii]})})(),ee&&c.jsx("span",{className:"repeat-icon-badge",title:" ",children:""}),d.length>0&&c.jsx("span",{className:"todo-badge clickable",title:" ",onClick:V=>{V.stopPropagation(),Le?(Ge(!1),Tt(!1)):(Ge(!0),Tt(!1))},children:""})]})})(),!Q&&!e.parent_id&&c.jsx("button",{className:"todo-more-button",onClick:M=>{M.stopPropagation(),he(!0)},title:"",children:""}),Le&&!e.parent_id&&c.jsxs("div",{className:"subtodos-in-item",children:[d&&d.length>0&&d.map((M,Z)=>c.jsx(ao,{todo:M,index:Z,onToggle:n,onDelete:a,onEdit:i,formatDate:r,formatDateOnly:s,isFocused:l,onFocus:o,onAddSubTodo:u,subtodos:[],level:f+1,routines:m,onShowRoutineHistory:v,showSuccessMessage:S,onOpenRoutineSetupModal:b,onOpenHistoryModal:w,currentPageDate:y},M.id)),qe&&c.jsxs("div",{className:"subtodo-input-section",children:[c.jsx("input",{type:"text",value:Ze,onChange:M=>We(M.target.value),onKeyDown:M=>{M.key==="Enter"&&Ze.trim()&&(u(e.id,Ze.trim()),We(""))},placeholder:" ...",className:"subtodo-input",autoFocus:!0}),c.jsx("button",{onClick:()=>{Ze.trim()&&(u(e.id,Ze.trim()),We(""))},className:"subtodo-add-button",children:""}),c.jsx("button",{onClick:()=>We(""),className:"subtodo-cancel-button",children:""})]})]})]})}),c.jsx(EO,{todo:e,isOpen:z,onClose:()=>he(!1),onEdit:i,onToggle:n,onDelete:a,onAddSubTodo:u,onCreateRoutine:h,subtodos:d,routines:m,formatDate:r,formatDateOnly:s})]})}function Du({message:e,onUndo:t,variant:n="default"}){const a=n==="success"?"undo-toast success-toast":"undo-toast";return c.jsxs("div",{className:a,children:[c.jsx("span",{children:e}),t&&c.jsx("button",{onClick:t,className:"undo-button",children:""})]})}function rv({todo:e,onClose:t,onDeleteThisOnly:n,onDeleteFromNow:a,onDeleteAll:i}){const[r,s]=_.useState("this-only"),[l,o]=_.useState(null),u=_.useRef(!1),d=v=>{v.target===v.currentTarget&&(u.current=!0)},f=v=>{v.target===v.currentTarget&&u.current&&t(),u.current=!1},h=()=>{r==="this-only"?n(e):r==="from-now"?a(e):r==="all"&&i(e),t()},m=[{id:"this-only",label:" ",subtitle:" ",tooltip:"  ,  ,   "},{id:"from-now",label:"   ",subtitle:" ",tooltip:"  ,  ,   "},{id:"all",label:" ",subtitle:" ",tooltip:"  ,  ,   "}];return c.jsx("div",{className:"modal-overlay",onMouseDown:d,onClick:f,children:c.jsxs("div",{className:"modal-content delete-confirm-modal-v2",onClick:v=>v.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"delete-confirm-content-v2",children:[c.jsxs("p",{className:"delete-info-text",children:["    .",c.jsx("br",{}),"    ."]}),c.jsx("div",{className:"delete-options-v2",children:m.map(v=>c.jsxs("div",{className:"delete-option-item",children:[c.jsxs("label",{className:"delete-option-label",children:[c.jsx("input",{type:"radio",name:"delete-option",value:v.id,checked:r===v.id,onChange:b=>s(b.target.value)}),c.jsxs("div",{className:"option-text",children:[c.jsx("span",{className:"option-main",children:v.label}),c.jsx("span",{className:"option-sub",children:v.subtitle})]})]}),c.jsx("button",{className:"option-help-btn",onMouseEnter:()=>o(v.id),onMouseLeave:()=>o(null),onClick:b=>{b.preventDefault(),o(l===v.id?null:v.id)},children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[c.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("text",{x:"8",y:"11.5",textAnchor:"middle",fontSize:"11",fill:"currentColor",fontWeight:"600",children:"?"})]})}),l===v.id&&c.jsx("div",{className:"option-tooltip",children:v.tooltip})]},v.id))}),c.jsxs("div",{className:"delete-modal-actions",children:[c.jsx("button",{className:"btn-cancel",onClick:t,children:""}),c.jsx("button",{className:"btn-confirm",onClick:h,children:""})]})]})]})})}function TO({showRoutineModal:e,onClose:t,routineInput:n,setRoutineInput:a,isAddingRoutine:i,selectedDays:r,onToggleDay:s,selectedTimeSlot:l,setSelectedTimeSlot:o,onAddRoutine:u,routines:d,editingRoutineId:f,editingRoutineText:h,setEditingRoutineText:m,editingRoutineDays:v,onToggleEditDay:b,onStartEdit:w,onSaveEdit:y,onCancelEdit:g,onDelete:p,onShowHistory:S}){const E=_.useRef(!1),O=T=>{T.target===T.currentTarget&&(E.current=!0)},x=T=>{T.target===T.currentTarget&&E.current&&t(),E.current=!1};return e?c.jsx("div",{className:"modal-overlay",onMouseDown:O,onClick:x,children:c.jsxs("div",{className:"modal-content routine-modal",onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-add-section",children:[c.jsx("input",{type:"text",value:n,onChange:T=>a(T.target.value),placeholder:"  ...",className:"routine-input",disabled:i}),c.jsx(Go,{selectedDays:r,onToggle:s,disabled:i}),c.jsxs("div",{className:"time-slot-selector",children:[c.jsx("label",{className:"time-slot-label",children:"  ()"}),c.jsx(oh,{value:l,onChange:T=>o(T)})]}),c.jsx("button",{onClick:u,className:"add-routine-button",disabled:i||n.trim()==="",children:" "})]}),c.jsx("div",{className:"routine-list",children:d.length===0?c.jsx("p",{className:"empty-message",children:"  ."}):d.map(T=>c.jsx("div",{className:"routine-item",children:f===T.id?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-edit-content",children:[c.jsx("input",{type:"text",value:h,onChange:N=>m(N.target.value),className:"routine-edit-input",placeholder:" "}),c.jsx(Go,{selectedDays:v,onToggle:b,variant:"inline"})]}),c.jsxs("div",{className:"routine-item-actions",children:[c.jsx("button",{onClick:y,className:"routine-save-button",disabled:h.trim()===""||v.length===0,children:""}),c.jsx("button",{onClick:g,className:"routine-cancel-edit-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-item-content",children:[c.jsx("span",{className:"routine-text",children:T.text}),c.jsxs("div",{className:"routine-meta",children:[c.jsx("div",{className:"routine-days",children:ol.filter(N=>T.days.includes(N.key)).map(N=>c.jsx("span",{className:"routine-day-badge",children:N.label},N.key))}),T.time_slot&&c.jsx("span",{className:"routine-time-slot",children:T.time_slot})]})]}),c.jsxs("div",{className:"routine-item-actions",children:[c.jsx("button",{onClick:()=>S(T),className:"routine-history-button",title:" ",children:""}),c.jsx("button",{onClick:()=>w(T),className:"routine-edit-button",title:"",children:""}),c.jsx("button",{onClick:()=>p(T.id),className:"routine-delete-button",title:"",children:""})]})]})},T.id))})]})}):null}const jO=e=>["sun","mon","tue","wed","thu","fri","sat"][e];function OO({showRoutineHistory:e,onClose:t,selectedRoutine:n,routineHistoryData:a}){const i=_.useRef(!1),r=l=>{l.target===l.currentTarget&&(i.current=!0)},s=l=>{l.target===l.currentTarget&&i.current&&t(),i.current=!1};return!e||!n?null:c.jsx("div",{className:"modal-overlay",onMouseDown:r,onClick:s,children:c.jsxs("div",{className:"modal-content routine-history-modal",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:[" ",n.text," "]}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-history-content",children:[(()=>{if(a.length===0)return c.jsx("p",{className:"empty-message",children:"   ."});const l=a[0],o=new Date(l.date),u=new Date,d={};a.forEach(m=>{d[m.date]=m.completed});const f=[];let h=new Date(o);for(;h<=u;){const m=h.getFullYear(),v=h.getMonth(),b=`${m}-${v+1}`;f.find(E=>E.key===b)||f.push({key:b,year:m,month:v,days:[]});const w=f.find(E=>E.key===b),y=Se(h),g=h.getDay(),p=jO(g),S=n.days.includes(p);w.days.push({date:new Date(h),dateStr:y,day:h.getDate(),dayOfWeek:g,isCompleted:d[y]===!0,isRoutineDay:S,hasTodo:d[y]!==void 0}),h.setDate(h.getDate()+1)}return c.jsx("div",{className:"routine-history-calendar",children:f.map(m=>c.jsxs("div",{className:"history-month",children:[c.jsxs("h3",{className:"history-month-title",children:[m.year," ",m.month+1,""]}),c.jsxs("div",{className:"history-calendar-grid",children:[c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),m.days.length>0&&Array(m.days[0].dayOfWeek).fill(null).map((v,b)=>c.jsx("div",{className:"history-day-cell empty"},`empty-${b}`)),m.days.map((v,b)=>{if(b>0&&v.day===1){const y=6-m.days[b-1].dayOfWeek;return c.jsxs(c.Fragment,{children:[Array(y).fill(null).map((g,p)=>c.jsx("div",{className:"history-day-cell empty"},`empty-end-${b}-${p}`)),c.jsx("div",{className:"history-day-header",children:""},v.dateStr),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsxs("div",{className:`history-day-cell ${v.isCompleted?"completed":""} ${v.isRoutineDay?"":"not-routine-day"}`,children:[c.jsx("span",{className:"day-number",children:v.day}),v.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]})]})}return c.jsxs("div",{className:`history-day-cell ${v.isCompleted?"completed":""} ${v.isRoutineDay?"":"not-routine-day"}`,title:`${v.dateStr}${v.isRoutineDay?"":" (  )"}${v.isCompleted?" - ":v.hasTodo?" - ":""}`,children:[c.jsx("span",{className:"day-number",children:v.day}),v.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]},v.dateStr)})]})]},m.key))})})(),c.jsxs("div",{className:"routine-history-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:" :"}),c.jsxs("span",{className:"stat-value",children:[a.length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value completed",children:[a.filter(l=>l.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value incomplete",children:[a.filter(l=>!l.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value",children:[a.length>0?Math.round(a.filter(l=>l.completed).length/a.length*100):0,"%"]})]})]})]})]})})}function DO({show:e,onClose:t,content:n,setContent:a,isSaving:i,placeholder:r=" ..."}){const s=_.useRef(null),l=_.useRef(!1);if(_.useEffect(()=>{s.current&&e&&(s.current.style.height="auto",s.current.style.height=Math.min(s.current.scrollHeight,window.innerHeight*.6)+"px")},[n,e]),_.useEffect(()=>{e&&s.current&&s.current.focus()},[e]),_.useEffect(()=>{const d=f=>{f.key==="Escape"&&e&&t()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e,t]),!e)return null;const o=d=>{d.target===d.currentTarget&&(l.current=!0)},u=d=>{d.target===d.currentTarget&&l.current&&t(),l.current=!1};return c.jsx("div",{className:"memo-modal-overlay",onMouseDown:o,onClick:u,children:c.jsxs("div",{className:"memo-modal",onClick:d=>d.stopPropagation(),children:[c.jsxs("div",{className:"memo-modal-header",children:[c.jsx("h3",{children:"  "}),c.jsxs("div",{className:"memo-modal-actions",children:[i&&c.jsx("span",{className:"memo-saving-indicator",children:" ..."}),c.jsx("button",{className:"memo-modal-close",onClick:t,children:""})]})]}),c.jsx("textarea",{ref:s,value:n,onChange:d=>a(d.target.value),className:"memo-modal-textarea",placeholder:r})]})})}function NO({showGanttChart:e,onClose:t,ganttData:n,ganttPeriod:a,setGanttPeriod:i,formatDateOnly:r}){const s=_.useRef(!1),l=u=>{u.target===u.currentTarget&&(s.current=!0)},o=u=>{u.target===u.currentTarget&&s.current&&t(),s.current=!1};return e?c.jsx("div",{className:"modal-overlay",onMouseDown:l,onClick:o,children:c.jsxs("div",{className:"modal-content gantt-modal",onClick:u=>u.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  -  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"gantt-filter",children:c.jsx("div",{className:"gantt-period-buttons",children:[{value:"1week",label:" 1"},{value:"2weeks",label:" 2"},{value:"1month",label:" 1"},{value:"3months",label:" 3"},{value:"6months",label:" 6"},{value:"all",label:""}].map(u=>c.jsx("button",{className:`period-button ${a===u.value?"active":""}`,onClick:()=>i(u.value),children:u.label},u.value))})}),c.jsx("div",{className:"gantt-content",children:n.length===0?c.jsx("p",{className:"empty-message",children:" ."}):c.jsx("div",{className:"gantt-chart",children:(()=>{const u=n.flatMap(v=>v.dates),d=[...new Set(u)].sort((v,b)=>new Date(v)-new Date(b));if(d.length===0)return c.jsx("p",{className:"empty-message",children:"  ."});const f=new Date(d[0]),h=new Date(d[d.length-1]),m=[];for(let v=new Date(f);v<=h;v.setDate(v.getDate()+1))m.push(new Date(v).toISOString().split("T")[0]);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"gantt-header",children:[c.jsx("div",{className:"gantt-task-column",children:" "}),c.jsx("div",{className:"gantt-timeline",children:m.map(v=>c.jsx("div",{className:"gantt-date-cell",children:r(new Date(v+"T00:00:00")).split("(")[0]},v))})]}),n.map((v,b)=>{const w=new Set(v.dates);return c.jsxs("div",{className:"gantt-row",children:[c.jsx("div",{className:"gantt-task-column",title:v.text,children:c.jsx("span",{className:v.completed?"completed-task":"",children:v.text})}),c.jsx("div",{className:"gantt-timeline",children:m.map(y=>{if(!w.has(y))return c.jsx("div",{className:"gantt-date-cell"},y);const p=y===v.startDate,S=y===v.completedDate;let E="gantt-date-cell has-task";return p?E+=" start-date":S?E+=" completed-date":E+=" middle-date",c.jsx("div",{className:E,children:S?c.jsx("span",{className:"completed-circle",children:""}):""},y)})})]},v.originalId)})]})})()})})]})}):null}function CO({showEncouragementModal:e,onClose:t,encouragementMessages:n,newEncouragementMessage:a,setNewEncouragementMessage:i,onAddEncouragementMessage:r,editingEncouragementId:s,editingEncouragementText:l,setEditingEncouragementId:o,setEditingEncouragementText:u,onUpdateEncouragementMessage:d,onDeleteEncouragementMessage:f}){const h=_.useRef(!1),m=b=>{b.target===b.currentTarget&&(h.current=!0)},v=b=>{b.target===b.currentTarget&&h.current&&t(),h.current=!1};return e?c.jsx("div",{className:"modal-overlay",onMouseDown:m,onClick:v,children:c.jsxs("div",{className:"modal-content encouragement-modal",onClick:b=>b.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"encouragement-add-section",children:[c.jsx("input",{type:"text",value:a,onChange:b=>i(b.target.value),placeholder:"   ...",className:"encouragement-input",onKeyDown:async b=>{b.key==="Enter"&&a.trim()!==""&&(await r(a.trim()),i(""))}}),c.jsx("button",{onClick:async()=>{a.trim()!==""&&(await r(a.trim()),i(""))},className:"add-encouragement-button",disabled:a.trim()==="",children:""})]}),c.jsx("div",{className:"encouragement-list",children:n.length===0?c.jsx("p",{className:"empty-message",children:"   ."}):n.map((b,w)=>c.jsx("div",{className:"encouragement-item",children:s===w?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"text",value:l,onChange:y=>u(y.target.value),className:"encouragement-edit-input",placeholder:" "}),c.jsxs("div",{className:"encouragement-item-actions",children:[c.jsx("button",{onClick:async()=>{l.trim()!==""&&(await d(w,l.trim()),o(null),u(""))},className:"encouragement-save-button",disabled:l.trim()==="",children:""}),c.jsx("button",{onClick:()=>{o(null),u("")},className:"encouragement-cancel-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"encouragement-text",children:b}),c.jsxs("div",{className:"encouragement-item-actions",children:[c.jsx("button",{onClick:()=>{o(w),u(b)},className:"encouragement-edit-button",title:"",children:""}),c.jsx("button",{onClick:async()=>{window.confirm("   ?")&&await f(w)},className:"encouragement-delete-button",title:"",children:""})]})]})},w))})]})}):null}function AO({isOpen:e,onClose:t,onAddSection:n}){const[a,i]=_.useState(""),[r,s]=_.useState(""),l=["","","","","","","","","","","",""],o=h=>{h.preventDefault(),a.trim()&&(n({name:a.trim(),icon:r}),i(""),s(""),t())},u=_.useRef(!1),d=h=>{h.target===h.currentTarget&&(u.current=!0)},f=h=>{h.target===h.currentTarget&&u.current&&t(),u.current=!1};return e?c.jsx("div",{className:"modal-overlay",onMouseDown:d,onClick:f,children:c.jsxs("div",{className:"modal-content add-section-modal",onClick:h=>h.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{className:"modal-close-button",onClick:t,children:""})]}),c.jsxs("form",{onSubmit:o,className:"add-section-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" "}),c.jsx("input",{type:"text",value:a,onChange:h=>i(h.target.value),placeholder:": ,  , ...",className:"section-name-input",autoFocus:!0,maxLength:20})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" "}),c.jsx("div",{className:"emoji-grid",children:l.map(h=>c.jsx("button",{type:"button",className:`emoji-button ${r===h?"selected":""}`,onClick:()=>s(h),children:h},h))})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{type:"button",onClick:t,className:"cancel-button",children:""}),c.jsx("button",{type:"submit",className:"submit-button",disabled:!a.trim(),children:""})]})]})]})}):null}function RO({show:e,onClose:t,hiddenSections:n,sectionOrder:a,sectionTitles:i,customSections:r,onShowSection:s}){const l=_.useRef(!1),o=f=>{f.target===f.currentTarget&&(l.current=!0)},u=f=>{f.target===f.currentTarget&&l.current&&t(),l.current=!1};if(!e)return null;const d=f=>{if(i[f])return i[f];const h=r.find(m=>m.id===f);return h?`${h.icon} ${h.name}`:f};return n.length===0?c.jsx("div",{className:"modal-overlay",onMouseDown:o,onClick:u,children:c.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("p",{className:"empty-message",children:"  ."})})]})}):c.jsx("div",{className:"modal-overlay",onMouseDown:o,onClick:u,children:c.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("div",{className:"hidden-sections-list",children:n.map(f=>c.jsxs("div",{className:"hidden-section-item",children:[c.jsx("span",{className:"hidden-section-title",children:d(f)}),c.jsx("button",{className:"show-section-button",onClick:()=>{s(f)},title:" ",children:" "})]},f))})})]})})}function MO({todo:e,todoHistory:t,expandedHistoryIds:n,toggleHistoryDetail:a,formatDate:i,formatDateOnly:r,onClose:s}){const l=_.useRef(!1),o=e.visible_dates&&e.visible_dates.length>0?e.visible_dates:[e.date],u=o[0],d=o.map(v=>({id:`${e.id}-${v}`,date:v})),f=t[e.id]||[],h=v=>{v.target===v.currentTarget&&(l.current=!0)},m=v=>{v.target===v.currentTarget&&l.current&&s(),l.current=!1};return c.jsx("div",{className:"modal-overlay",onMouseDown:h,onClick:m,children:c.jsxs("div",{className:"modal-content",onClick:v=>v.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:s,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsxs("div",{className:"todo-history",children:[c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:":"}),c.jsx("span",{className:"history-value",children:i(e.created_at)})]}),c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:r(u?new Date(u+"T00:00:00"):new Date(e.date+"T00:00:00"))})]}),d.length>0&&c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:d.map((v,b)=>{const w=v.date===e.date,y=r(new Date(v.date+"T00:00:00"));return c.jsxs("span",{children:[b>0&&"  ",c.jsxs("span",{style:w?{fontWeight:"bold",color:"#4CAF50"}:{},children:[y.split("(")[0],w?"()":""]})]},v.id)})})]}),(()=>{const v=new Date(e.created_at).toISOString().split("T")[0],b=e.date;return v!==b&&d.length===0?c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:r(new Date(e.date+"T00:00:00"))})]}):null})(),f.length>0&&c.jsxs("div",{className:"history-changes-list",children:[c.jsxs("div",{className:"history-changes-header",children:["  (",f.length,")"]}),f.map(v=>c.jsxs("div",{className:"history-record-compact",children:[c.jsxs("div",{className:"history-record-summary",children:[c.jsxs("div",{className:"history-change-time",children:[i(v.changed_at),v.changed_on_date&&c.jsxs("span",{className:"history-page-info",children:[" (: ",r(new Date(v.changed_on_date+"T00:00:00")),")"]})]}),c.jsx("button",{className:"history-detail-button",onClick:b=>{b.stopPropagation(),a(v.id)},children:n.includes(v.id)?"":""})]}),n.includes(v.id)&&c.jsxs("div",{className:"history-change",children:[c.jsxs("div",{className:"history-change-item history-before",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:v.previous_text})]}),c.jsx("div",{className:"history-change-arrow",children:""}),c.jsxs("div",{className:"history-change-item history-after",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:v.new_text})]})]})]},v.id))]})]})})]})})}function kO({todo:e,routines:t,routineDaysForModal:n,isEditingRoutineInModal:a,routineTimeSlotForModal:i,onToggleDay:r,setRoutineTimeSlotForModal:s,setRoutineDaysForModal:l,setIsEditingRoutineInModal:o,handleCreateRoutineFromTodo:u,onClose:d,onRemoveSuccess:f}){const h=_.useRef(!1),[m,v]=_.useState(!1),b=e.repeat_days&&e.repeat_days.length>0,w=t.find(S=>S.id===e.routine_id),y=b?e.repeat_days:(w==null?void 0:w.days)||[],g=S=>{S.target===S.currentTarget&&(h.current=!0)},p=S=>{S.target===S.currentTarget&&h.current&&d(),h.current=!1};return c.jsx("div",{className:"modal-overlay",onMouseDown:g,onClick:p,children:c.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:d,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("div",{className:"routine-setup-inline",children:(b||w)&&!a?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-current-info",children:[c.jsx("div",{className:"routine-info-title",children:" :"}),c.jsx("div",{className:"routine-days-display",children:ol.filter(S=>y.includes(S.key)).map(S=>c.jsx("span",{className:"routine-day-badge",children:S.label},S.key))})]}),c.jsx("div",{className:"routine-setup-actions",children:m?c.jsxs(c.Fragment,{children:[c.jsx("span",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginRight:"0.5rem"},children:"  ?"}),c.jsx("button",{onClick:async S=>{S.stopPropagation();const E=[...y];await u(e.id,e.text,[],null,!0),d(),f&&f(e.id,e.text,E)},className:"routine-remove-button",children:""}),c.jsx("button",{onClick:S=>{S.stopPropagation(),v(!1)},className:"routine-cancel-button",children:""})]}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:S=>{S.stopPropagation(),l(y),s(""),o(!0)},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:S=>{S.stopPropagation(),v(!0)},className:"routine-remove-button",children:""})]})})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"routine-setup-title",children:a?" :":"  :"}),c.jsx(Go,{selectedDays:n,onToggle:r,variant:"inline"}),c.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[c.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),c.jsx(oh,{value:i,onChange:S=>s(S)})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:async S=>{S.stopPropagation(),a&&w?await u(e.id,e.text,n,w.id,!1,i):await u(e.id,e.text,n,null,!1,i),d()},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:S=>{S.stopPropagation(),d()},className:"routine-cancel-button",children:""})]})]})})})]})})}function UO({showUndoToast:e,showSuccessToast:t,successToastMessage:n,lastDeleteAction:a,handleUndoDelete:i,handleUndoRoutineDelete:r,showDeleteConfirmModal:s,todoToDelete:l,setShowDeleteConfirmModal:o,deleteThisOnly:u,deleteFromNow:d,deleteAll:f,showRoutineDeleteModal:h,routineToDelete:m,setShowRoutineDeleteModal:v,deleteRoutineThisOnly:b,deleteRoutineFromNow:w,deleteRoutineAll:y,showTodoHistoryModal:g,selectedTodoForModal:p,todoHistory:S,expandedHistoryIds:E,toggleHistoryDetail:O,handleCloseTodoHistoryModal:x,formatDate:T,formatDateOnly:N,showTodoRoutineSetupModal:D,routines:k,routineDaysForModal:C,isEditingRoutineInModal:U,routineTimeSlotForModal:K,handleToggleRoutineDayInModal:L,setRoutineTimeSlotForModal:A,setRoutineDaysForModal:G,setIsEditingRoutineInModal:X,handleCreateRoutineFromTodo:fe,handleCloseTodoRoutineSetupModal:Q,onRoutineRemoveSuccess:Pe,showRoutineRemoveToast:_e,handleUndoRoutineRemove:Ve,showRoutineModal:Le,handleCloseRoutine:Ge,routineInput:qe,setRoutineInput:Tt,isAddingRoutine:Ze,selectedDays:We,handleToggleDay:z,selectedTimeSlot:he,setSelectedTimeSlot:be,handleAddRoutine:me,editingRoutineId:Me,editingRoutineText:ke,setEditingRoutineText:xe,editingRoutineDays:J,handleToggleEditDay:se,handleStartEditRoutine:Ce,handleSaveEditRoutine:Oe,handleCancelEditRoutine:H,handleDeleteRoutine:I,fetchRoutineHistory:$,showRoutineHistory:Y,handleCloseRoutineHistory:te,selectedRoutineForHistory:P,routineHistoryData:F,showMemoModal:M,setShowMemoModal:Z,memoContent:ee,setMemoContent:ae,isSavingMemo:V,showGanttChart:ie,handleCloseGanttChart:Ee,ganttData:ct,ganttPeriod:Qt,setGanttPeriod:bn,showEncouragementModal:Vn,setShowEncouragementModal:ii,encouragementMessages:ta,newEncouragementMessage:Vr,setNewEncouragementMessage:ht,addEncouragementMessage:Ct,editingEncouragementId:At,editingEncouragementText:_n,setEditingEncouragementId:Rt,setEditingEncouragementText:Mt,updateEncouragementMessage:Jt,deleteEncouragementMessage:Gn,showAddSectionModal:ut,setShowAddSectionModal:qt,handleAddSection:$t,showHiddenSectionsModal:rn,setShowHiddenSectionsModal:na,hiddenSections:wn,sectionOrder:sn,sectionTitles:Kn,customSections:Ta,handleShowSection:bc}){return c.jsxs(c.Fragment,{children:[e&&c.jsx(Du,{message:"",onUndo:i}),t&&c.jsx(Du,{message:n,onUndo:a?r:null,variant:"success"}),_e&&c.jsx(Du,{message:"  ",onUndo:Ve}),s&&l&&c.jsx(rv,{todo:l,onClose:()=>o(!1),onDeleteThisOnly:u,onDeleteFromNow:d,onDeleteAll:f}),h&&m&&c.jsx(rv,{todo:m,onClose:()=>v(!1),onDeleteThisOnly:b,onDeleteFromNow:w,onDeleteAll:y}),g&&p&&c.jsx(MO,{todo:p,todoHistory:S,expandedHistoryIds:E,toggleHistoryDetail:O,formatDate:T,formatDateOnly:N,onClose:x}),D&&p&&c.jsx(kO,{todo:p,routines:k,routineDaysForModal:C,isEditingRoutineInModal:U,routineTimeSlotForModal:K,onToggleDay:L,setRoutineTimeSlotForModal:A,setRoutineDaysForModal:G,setIsEditingRoutineInModal:X,handleCreateRoutineFromTodo:fe,onClose:Q,onRemoveSuccess:Pe}),c.jsx(TO,{showRoutineModal:Le,onClose:Ge,routineInput:qe,setRoutineInput:Tt,isAddingRoutine:Ze,selectedDays:We,onToggleDay:z,selectedTimeSlot:he,setSelectedTimeSlot:be,onAddRoutine:me,routines:k,editingRoutineId:Me,editingRoutineText:ke,setEditingRoutineText:xe,editingRoutineDays:J,onToggleEditDay:se,onStartEdit:Ce,onSaveEdit:Oe,onCancelEdit:H,onDelete:I,onShowHistory:$}),c.jsx(OO,{showRoutineHistory:Y,onClose:te,selectedRoutine:P,routineHistoryData:F}),c.jsx(DO,{show:M,onClose:()=>Z(!1),content:ee,setContent:ae,isSaving:V,placeholder:" ..."}),c.jsx(NO,{showGanttChart:ie,onClose:Ee,ganttData:ct,ganttPeriod:Qt,setGanttPeriod:bn,formatDateOnly:N}),c.jsx(CO,{showEncouragementModal:Vn,onClose:()=>ii(!1),encouragementMessages:ta,newEncouragementMessage:Vr,setNewEncouragementMessage:ht,onAddEncouragementMessage:Ct,editingEncouragementId:At,editingEncouragementText:_n,setEditingEncouragementId:Rt,setEditingEncouragementText:Mt,onUpdateEncouragementMessage:Jt,onDeleteEncouragementMessage:Gn}),c.jsx(AO,{isOpen:ut,onClose:()=>qt(!1),onAddSection:$t}),c.jsx(RO,{show:rn,onClose:()=>na(!1),hiddenSections:wn,sectionOrder:sn,sectionTitles:Kn,customSections:Ta,onShowSection:bc})]})}function zO({authLoading:e,session:t,handleGoogleLogin:n,handleAppleLogin:a}){return e?c.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),c.jsx("div",{children:" ..."})]})}):t?null:c.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:c.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",maxWidth:"400px",width:"90%"},children:[c.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"1rem"},children:" Todo Note"}),c.jsx("p",{style:{fontSize:"1.1rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"2rem"},children:"     "}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[c.jsxs("button",{onClick:a,style:{padding:"0.875rem 1.5rem",fontSize:"1rem",background:"#000000",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",fontWeight:"500"},children:[c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),"Apple "]}),c.jsxs("button",{onClick:n,style:{padding:"0.875rem 1.5rem",fontSize:"1rem",background:"#ffffff",color:"#333333",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",fontWeight:"500"},children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google "]})]}),c.jsx("p",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.4)",marginTop:"2rem",lineHeight:"1.5"},children:"      ."})]})})}const sv=["timeline","normal"];function LO(e){const[t,n]=_.useState(sv),[a,i]=_.useState(ju),[r,s]=_.useState(!1),l=async()=>{var g;if(!((g=e==null?void 0:e.user)!=null&&g.id))return;const w=await Xn.get(Qn.SECTION_ORDER);if(w){const p=sv.filter(S=>!w.includes(S));if(p.length>0){const S=[...p,...w];n(S),o(S)}else n(w)}const y=await Xn.get(Qn.SECTION_ICONS);y&&i({...ju,...y})},o=async w=>{var y;(y=e==null?void 0:e.user)!=null&&y.id&&await Xn.set(Qn.SECTION_ORDER,w,e.user.id)};return{sectionOrder:t,setSectionOrder:n,sectionIcons:a,isReorderMode:r,setIsReorderMode:s,fetchSectionOrder:l,saveSectionOrder:o,changeSectionIcon:async(w,y)=>{var p;if(!((p=e==null?void 0:e.user)!=null&&p.id))return;const g={...a,[w]:y};i(g),await Xn.set(Qn.SECTION_ICONS,g,e.user.id)},getSectionIcon:w=>a[w]||ju[w]||"",getRandomIcon:()=>{const w=Math.floor(Math.random()*Id.length);return Id[w]},moveSectionLeft:w=>{n(y=>{const g=y.indexOf(w);if(g<=0)return y;const p=[...y];return[p[g-1],p[g]]=[p[g],p[g-1]],o(p),p})},moveSectionRight:w=>{n(y=>{const g=y.indexOf(w);if(g===-1||g>=y.length-1)return y;const p=[...y];return[p[g],p[g+1]]=[p[g+1],p[g]],o(p),p})},handleSectionDragEnd:w=>{const{active:y,over:g}=w;r&&t.includes(y.id)&&g&&y.id!==(g==null?void 0:g.id)&&n(p=>{const S=p.indexOf(y.id),E=p.indexOf(g.id),O=qn(p,S,E);return o(O),O})},handleSectionsContainerDoubleClick:w=>{r&&w.target===w.currentTarget&&s(!1)}}}function BO(e){var N;const[t,n]=_.useState([]),[a,i]=_.useState(!1),[r,s]=_.useState(!1),l=_.useCallback(async()=>{var D;if((D=e==null?void 0:e.user)!=null&&D.id){i(!0);try{const{data:k,error:C}=await de.from("sections").select("*").eq("user_id",e.user.id).eq("deleted",!1).order("order_index",{ascending:!0});if(C)throw C;k&&k.length>0?n(k):await o()}catch(k){console.error("  :",k)}finally{i(!1)}}},[(N=e==null?void 0:e.user)==null?void 0:N.id]),o=async()=>{var D;if((D=e==null?void 0:e.user)!=null&&D.id)try{const k=bO.map((K,L)=>({user_id:e.user.id,name:K.name,icon:K.icon,is_system:K.is_system,is_default:K.is_default,order_index:L})),{data:C,error:U}=await de.from("sections").insert(k).select();if(U)throw U;C&&n(C)}catch(k){console.error("   :",k)}},u=async(D,k="")=>{var C;if(!((C=e==null?void 0:e.user)!=null&&C.id))return null;try{const U=t.length>0?Math.max(...t.map(A=>A.order_index)):-1,{data:K,error:L}=await de.from("sections").insert([{user_id:e.user.id,name:D,icon:k,is_system:!1,is_default:!1,order_index:U+1}]).select().single();if(L)throw L;if(K)return n(A=>[...A,K]),K}catch(U){console.error("  :",U)}return null},d=async(D,k)=>{var C;if(!((C=e==null?void 0:e.user)!=null&&C.id))return!1;try{const{error:U}=await de.from("sections").update(k).eq("id",D).eq("user_id",e.user.id);if(U)throw U;return n(K=>K.map(L=>L.id===D?{...L,...k}:L)),!0}catch(U){return console.error("  :",U),!1}},f=async D=>{var C;if(!((C=e==null?void 0:e.user)!=null&&C.id))return!1;const k=t.find(U=>U.id===D);if(!k||k.is_system)return console.warn("    ."),!1;try{const{error:U}=await de.from("sections").update({deleted:!0}).eq("id",D).eq("user_id",e.user.id);if(U)throw U;return n(K=>K.filter(L=>L.id!==D)),!0}catch(U){return console.error("  :",U),!1}},h=async D=>{var C;if(!((C=e==null?void 0:e.user)!=null&&C.id))return!1;const k=t.find(U=>U.id===D);if(!k||k.name==="")return console.warn("     ."),!1;try{const U=t.find(L=>L.is_default);U&&await de.from("sections").update({is_default:!1}).eq("id",U.id).eq("user_id",e.user.id);const{error:K}=await de.from("sections").update({is_default:!0}).eq("id",D).eq("user_id",e.user.id);if(K)throw K;return n(L=>L.map(A=>({...A,is_default:A.id===D}))),!0}catch(U){return console.error("   :",U),!1}},m=_.useCallback(()=>t.find(D=>D.is_default)||t.find(D=>D.name===""),[t]),v=_.useCallback(()=>t.find(D=>D.name===""),[t]),b=async(D,k)=>d(D,{icon:k}),w=async(D,k)=>{const C=t.find(U=>U.id===D);return C!=null&&C.is_system?(console.warn("     ."),!1):d(D,{name:k})},y=async D=>{var k;if(!((k=e==null?void 0:e.user)!=null&&k.id))return!1;try{const C=D.map((U,K)=>({id:U.id,order_index:K}));for(const U of C)await de.from("sections").update({order_index:U.order_index}).eq("id",U.id).eq("user_id",e.user.id);return!0}catch(C){return console.error("   :",C),!1}},g=D=>{n(k=>{const C=k.findIndex(K=>K.id===D);if(C<=0)return k;const U=qn(k,C,C-1);return y(U),U})},p=D=>{n(k=>{const C=k.findIndex(K=>K.id===D);if(C===-1||C>=k.length-1)return k;const U=qn(k,C,C+1);return y(U),U})},S=D=>{const{active:k,over:C}=D;!r||!t.find(K=>K.id===k.id)||C&&k.id!==(C==null?void 0:C.id)&&n(K=>{const L=K.findIndex(X=>X.id===k.id),A=K.findIndex(X=>X.id===C.id),G=qn(K,L,A);return y(G),G})},E=D=>{r&&D.target===D.currentTarget&&s(!1)},O=_.useCallback(D=>t.find(k=>k.id===D),[t]),x=_.useCallback(D=>{const k=t.find(C=>C.id===D);return(k==null?void 0:k.icon)||""},[t]),T=t.map(D=>D.id);return{sections:t,setSections:n,sectionOrder:T,isLoading:a,isReorderMode:r,setIsReorderMode:s,fetchSections:l,addSection:u,updateSection:d,deleteSection:f,setDefaultSection:h,getDefaultSection:m,getTimelineSection:v,getSectionById:O,getSectionIcon:x,changeSectionIcon:b,changeSectionName:w,moveSectionLeft:g,moveSectionRight:p,handleSectionDragEnd:S,handleSectionsContainerDoubleClick:E}}const HO=["sun","mon","tue","wed","thu","fri","sat"];function qO(e){const t=_.useCallback((d,f)=>{var b,w;if(d.repeat_type===Wt.NONE)return!1;const h=new Date(f+"T00:00:00"),m=h.getDay(),v=HO[m];if(d.repeat_start_date){const y=new Date(d.repeat_start_date+"T00:00:00");if(h<y)return!1}if(d.repeat_end_date){const y=new Date(d.repeat_end_date+"T00:00:00");if(h>y)return!1}if((b=d.hidden_dates)!=null&&b.includes(f)||d.stop_carryover_from&&f>=d.stop_carryover_from)return!1;switch(d.repeat_type){case Wt.DAILY:return!0;case Wt.WEEKDAYS:return m>=1&&m<=5;case Wt.WEEKENDS:return m===0||m===6;case Wt.WEEKLY:return(w=d.repeat_days)==null?void 0:w.includes(v);default:return!1}},[]),n=_.useCallback((d,f)=>{var h;return d.repeat_type===Wt.NONE?d.completed:(h=d.completed_dates)==null?void 0:h.includes(f)},[]),a=async(d,f,h)=>{var m;if(!((m=e==null?void 0:e.user)!=null&&m.id))return!1;try{const{data:v,error:b}=await de.from("todos").select("completed_dates, repeat_type").eq("id",d).single();if(b)throw b;let w=v.completed_dates||[];h?w=w.filter(g=>g!==f):w.includes(f)||(w=[...w,f].sort());const{error:y}=await de.from("todos").update({completed_dates:w,completed:w.includes(f)?!1:!h,completed_at:h?null:new Date().toISOString()}).eq("id",d);if(y)throw y;return!0}catch(v){return console.error("    :",v),!1}},i=async(d,f,h=[],m=null)=>{var v;if(!((v=e==null?void 0:e.user)!=null&&v.id))return!1;try{const b={repeat_type:f,repeat_days:f===Wt.WEEKLY?h:[],repeat_start_date:m||new Date().toISOString().split("T")[0]};f===Wt.NONE&&(b.repeat_days=[],b.repeat_start_date=null,b.repeat_end_date=null);const{error:w}=await de.from("todos").update(b).eq("id",d);if(w)throw w;return!0}catch(b){return console.error("  :",b),!1}},r=async(d,f)=>{var h;if(!((h=e==null?void 0:e.user)!=null&&h.id))return!1;try{const{data:m,error:v}=await de.from("todos").select("hidden_dates").eq("id",d).single();if(v)throw v;let b=m.hidden_dates||[];b.includes(f)||(b=[...b,f].sort());const{error:w}=await de.from("todos").update({hidden_dates:b}).eq("id",d);if(w)throw w;return!0}catch(m){return console.error("  :",m),!1}},s=async(d,f)=>{var h;if(!((h=e==null?void 0:e.user)!=null&&h.id))return!1;try{const{error:m}=await de.from("todos").update({repeat_end_date:f,stop_carryover_from:f}).eq("id",d);if(m)throw m;return!0}catch(m){return console.error("  :",m),!1}},l=_.useCallback(d=>{const f=new Date(d+"T00:00:00"),h=f.getMonth()+1,m=f.getDate(),b=["","","","","","",""][f.getDay()];return`for ${h}/${m}(${b})`},[]),o=_.useCallback(d=>d.repeat_type&&d.repeat_type!==Wt.NONE,[]),u=_.useCallback(d=>{var f;if(!d.repeat_type||d.repeat_type===Wt.NONE)return null;switch(d.repeat_type){case Wt.DAILY:return"";case Wt.WEEKDAYS:return"";case Wt.WEEKENDS:return"";case Wt.WEEKLY:return((f=d.repeat_days)==null?void 0:f.length)>0?ol.filter(m=>d.repeat_days.includes(m.key)).map(m=>m.label).join(", "):" ";default:return null}},[]);return{shouldShowOnDate:t,isCompletedOnDate:n,toggleCompletedOnDate:a,setRepeat:i,hideOnDate:r,endRepeatFromDate:s,getForDateLabel:l,isRepeatTodo:o,getRepeatLabel:u}}function $O(e){const[t,n]=_.useState(""),[a,i]=_.useState(!1),[r,s]=_.useState(""),l=_.useRef(null),o=_.useRef(null),u=async()=>{try{const{data:f,error:h}=await de.from("spec_memos").select("content").order("created_at",{ascending:!1}).limit(1);if(h)throw h;const m=f&&f.length>0?f[0].content:"";n(m),s(m)}catch(f){console.error("Error fetching memo:",f.message),n(""),s("")}},d=_.useCallback(async f=>{var h;if(f!==r)try{i(!0);const{data:m}=await de.from("spec_memos").select("id").order("created_at",{ascending:!1}).limit(1);m&&m.length>0?await de.from("spec_memos").update({content:f,updated_at:new Date().toISOString()}).eq("id",m[0].id):await de.from("spec_memos").insert([{content:f,user_id:(h=e==null?void 0:e.user)==null?void 0:h.id}]),s(f)}catch(m){console.error("Error saving memo:",m.message)}finally{i(!1)}},[e,r]);return _.useEffect(()=>{if(t!==r)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{d(t)},1e3),()=>{o.current&&clearTimeout(o.current)}},[t,d,r]),_.useEffect(()=>()=>{o.current&&clearTimeout(o.current),t!==r&&d(t)},[]),{memoContent:t,setMemoContent:n,isSavingMemo:a,memoTextareaRef:l,fetchMemoContent:u}}const Kb=({type:e,supabase:t,selectedDate:n,onDeleteSuccess:a})=>({deleteThisOnly:async l=>{try{const o=Se(n),d=[...l.hidden_dates||[],o],f=e==="todo"?"todos":"routines",{error:h}=await t.from(f).update({hidden_dates:d}).eq("id",l.id);if(h)throw h;return a&&a(l.id,Ou.THIS_ONLY),{success:!0}}catch(o){return console.error(`${e}   (THIS_ONLY):`,o.message),{success:!1,error:o}}},deleteFromNow:async l=>{try{const o=Se(n),d=(l.visible_dates||[]).filter(m=>m<o),f=e==="todo"?"todos":"routines",{error:h}=await t.from(f).update({visible_dates:d,stop_carryover_from:o}).eq("id",l.id);if(h)throw h;return a&&a(l.id,Ou.FROM_NOW),{success:!0}}catch(o){return console.error(`${e}   (FROM_NOW):`,o.message),{success:!1,error:o}}},deleteAll:async l=>{try{const o=Se(n),u=e==="todo"?"todos":"routines",{error:d}=await t.from(u).update({deleted:!0,deleted_date:o}).eq("id",l.id);if(d)throw d;return e==="routine"&&await t.from("todos").update({routine_id:null}).eq("routine_id",l.id),a&&a(l.id,Ou.ALL),{success:!0}}catch(o){return console.error(`${e}   (ALL):`,o.message),{success:!1,error:o}}}}),IO=e=>["sun","mon","tue","wed","thu","fri","sat"][e],YO=({session:e,supabase:t,selectedDate:n,setTodos:a,setSuccessToastMessage:i,setShowSuccessToast:r})=>{const[s,l]=_.useState([]),[o,u]=_.useState(""),[d,f]=_.useState([]),[h,m]=_.useState(""),[v,b]=_.useState(!1),[w,y]=_.useState(!1),[g,p]=_.useState(null),[S,E]=_.useState(""),[O,x]=_.useState([]),[T,N]=_.useState(!1),[D,k]=_.useState(null),[C,U]=_.useState([]),[K,L]=_.useState(!1),[A,G]=_.useState(null),X=_.useRef(new Set),{deleteThisOnly:fe,deleteFromNow:Q,deleteAll:Pe}=Kb({type:"routine",supabase:t,selectedDate:n,onDeleteSuccess:(J,se)=>{l(Ce=>Ce.filter(Oe=>Oe.id!==J)),i(" "),r(!0)}}),_e=async()=>{var J;if((J=e==null?void 0:e.user)!=null&&J.id)try{const{data:se,error:Ce}=await t.from("routines").select("*").eq("deleted",!1).order("created_at",{ascending:!1});if(Ce)throw Ce;l(se||[])}catch(se){console.error("  :",se.message)}},Ve=async()=>{var J;if(!(o.trim()===""||v))try{b(!0);const se={text:o,days:d,start_date:Se(n),user_id:(J=e==null?void 0:e.user)==null?void 0:J.id};h&&(se.time_slot=h);const{data:Ce,error:Oe}=await t.from("routines").insert([se]).select();if(Oe)throw Oe;l([Ce[0],...s]),u(""),f([]),m("")}catch(se){console.error("  :",se.message)}finally{b(!1)}},Le=async(J,se,Ce,Oe=null,H=!1,I="",$=null)=>{try{if(H){const{error:P}=await t.from("todos").update({repeat_days:[],routine_id:null,is_pending_routine:!1}).eq("id",J);if(P)throw P;a(F=>F.map(M=>M.id===J?{...M,repeat_days:[],routine_id:null,is_pending_routine:!1}:M));return}const Y={repeat_days:Ce,repeat_start_date:$||Se(n)},{error:te}=await t.from("todos").update(Y).eq("id",J);if(te)throw te;a(P=>P.map(F=>F.id===J?{...F,...Y}:F))}catch(Y){console.error("  :",Y.message)}},Ge=J=>{p(J.id),E(J.text),x(J.days)},qe=()=>{p(null),E(""),x([])},Tt=async()=>{if(!(!g||S.trim()===""||O.length===0))try{const{error:J}=await t.from("routines").update({text:S.trim(),days:O}).eq("id",g);if(J)throw J;l(s.map(se=>se.id===g?{...se,text:S.trim(),days:O}:se)),qe()}catch(J){console.error("  :",J.message)}},Ze=J=>{x(se=>se.includes(J)?se.filter(Ce=>Ce!==J):[...se,J])},We=async J=>{const se=s.find(Ce=>Ce.id===J);se&&(G(se),L(!0))},z=async J=>{var se;if(!X.current.has(J))try{X.current.add(J);const Ce=new Date(J),Oe=IO(Ce.getDay()),{data:H,error:I}=await t.from("routines").select("*").eq("deleted",!1);if(I)throw I;const $=H.filter(Y=>{const te=Y.days||[],P=te.length===0||te.includes(Oe);if(Y.start_date){const F=new Date(Y.start_date),M=Ce>=F;return P&&M}return P});if($.length===0)return;for(const Y of $){const te=Y.text,{data:P,error:F}=await t.from("todos").select("*").eq("routine_id",Y.id).eq("deleted",!1);if(F)throw F;if(P&&P.length>1){console.warn(` ${Y.id}    (${P.length}).     .`);for(let Z=1;Z<P.length;Z++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",P[Z].id)}const M=P&&P.length>0?P[0]:null;if(M){const Z=M.visible_dates||[],ee=!Y.days||Y.days.length===0,ae=ee?"pending_routine":"routine";if(Z.includes(J)){(M.is_pending_routine!==ee||M.section_type!==ae)&&await t.from("todos").update({is_pending_routine:ee,section_type:ae}).eq("id",M.id);continue}const V=[...Z,J].sort(),{error:ie}=await t.from("todos").update({visible_dates:V,is_pending_routine:ee,section_type:ee?"pending_routine":"routine"}).eq("id",M.id);ie&&console.error("    :",ie.message)}else{const Z=!Y.days||Y.days.length===0,{error:ee}=await t.from("todos").insert([{text:te,completed:!1,date:J,visible_dates:[J],hidden_dates:[],order_index:0,routine_id:Y.id,is_pending_routine:Z,section_type:Z?"pending_routine":"routine",user_id:(se=e==null?void 0:e.user)==null?void 0:se.id}]);ee&&console.error("   :",ee.message)}}}catch(Ce){console.error("   :",Ce.message)}finally{setTimeout(()=>{X.current.delete(J)},1e3)}},he=async()=>{const se=Se(new Date);await z(se)},be=async J=>{try{const{data:se,error:Ce}=await t.from("todos").select("*").eq("routine_id",J.id).eq("deleted",!1);if(Ce)throw Ce;const Oe=se&&se.length>0?se[0]:null;if(Oe&&Oe.visible_dates){const H=Oe.visible_dates.sort().map(I=>({id:`${Oe.id}-${I}`,date:I,text:Oe.text,completed:Oe.completed,routine_id:Oe.routine_id}));U(H)}else U([]);k(J),N(!0)}catch(se){console.error("   :",se.message),alert("   : "+se.message)}},me=()=>{N(!1),k(null),U([])},Me=()=>{y(!0),_e()},ke=()=>{y(!1),u(""),f([])},xe=J=>{f(se=>se.includes(J)?se.filter(Ce=>Ce!==J):[...se,J])};return _.useEffect(()=>{e&&_e()},[e]),{routines:s,setRoutines:l,routineInput:o,selectedDays:d,selectedTimeSlot:h,isAddingRoutine:v,showRoutineModal:w,editingRoutineId:g,editingRoutineText:S,editingRoutineDays:O,showRoutineHistory:T,selectedRoutineForHistory:D,routineHistoryData:C,routineCreationInProgress:X,showDeleteConfirmModal:K,setShowDeleteConfirmModal:L,routineToDelete:A,setRoutineToDelete:G,setRoutineInput:u,setSelectedTimeSlot:m,fetchRoutines:_e,handleAddRoutine:Ve,handleDeleteRoutine:We,deleteThisOnly:fe,deleteFromNow:Q,deleteAll:Pe,handleStartEditRoutine:Ge,handleSaveEditRoutine:Tt,handleCancelEditRoutine:qe,handleToggleEditDay:Ze,handleCreateRoutineFromTodo:Le,createRoutineTodosForDate:z,createRoutineTodos:he,fetchRoutineHistory:be,handleCloseRoutineHistory:me,handleOpenRoutine:Me,handleCloseRoutine:ke,handleToggleDay:xe}};function VO(e,t,n){const a=(u,d)=>e.filter(f=>!(f.parent_id||f.section_type!==u||u==="custom"&&f.section_id!==d)).sort((f,h)=>f.order_index-h.order_index),i=async u=>{let d=[...e];u.forEach((f,h)=>{const m=d.findIndex(v=>v.id===f.id);m!==-1&&(d[m]={...d[m],order_index:h+1})}),t(d);try{for(let f=0;f<u.length;f++)await n.from("todos").update({order_index:f+1}).eq("id",u[f].id)}catch(f){console.error("  :",f.message),t(e)}};return{handleMoveUp:async(u,d,f)=>{if(!e.find(w=>w.id===u))return;const m=a(d,f),v=m.findIndex(w=>w.id===u);if(v<=0)return;const b=qn(m,v,v-1);await i(b)},handleMoveDown:async(u,d,f)=>{if(!e.find(w=>w.id===u))return;const m=a(d,f),v=m.findIndex(w=>w.id===u);if(v>=m.length-1)return;const b=qn(m,v,v+1);await i(b)},handleMoveToTop:async(u,d,f)=>{if(!e.find(w=>w.id===u))return;const m=a(d,f),v=m.findIndex(w=>w.id===u);if(v<=0)return;const b=qn(m,v,0);await i(b)},handleMoveToBottom:async(u,d,f)=>{if(!e.find(w=>w.id===u))return;const m=a(d,f),v=m.findIndex(w=>w.id===u);if(v>=m.length-1)return;const b=qn(m,v,m.length-1);await i(b)},updateTodoOrder:i}}function GO(e,t,n,a){const[i,r]=_.useState(!1),[s,l]=_.useState(null),[o,u]=_.useState(null);return{isDraggingAny:i,activeTodoId:s,overId:o,handleDragStart:v=>{const{active:b}=v;r(!0),l(b.id)},handleDragOver:v=>{const{over:b}=v;u((b==null?void 0:b.id)||null)},handleDragCancel:()=>{r(!1),l(null),u(null)},handleDragEnd:async v=>{r(!1),l(null),u(null);const{active:b,over:w}=v;if(!w)return;if(w.id&&String(w.id).startsWith("timeline-")){const L=parseInt(String(w.id).replace("timeline-",""),10),A=e.find(G=>G.id===b.id);A&&a&&a(A.id,L);return}if(b.id===w.id)return;const y=e.find(L=>L.id===b.id),g=e.find(L=>L.id===w.id);if(!y||!g)return;const p=y.section_type,S=y.section_id||null,E=g.section_type,O=g.section_id||null,x=p!==E||p==="custom"&&S!==O,T=E,N=O,D=e.filter(L=>!(L.parent_id||L.section_type!==T||T==="custom"&&L.section_id!==N)).sort((L,A)=>L.order_index-A.order_index),k=D.findIndex(L=>L.id===b.id),C=D.findIndex(L=>L.id===w.id);let U=[...D];x?U.splice(C,0,{...y,section_type:T,section_id:N,routine_id:T==="routine"||T==="pending_routine"?y.routine_id:null}):U=qn(D,k,C);let K=[...e];if(U.forEach((L,A)=>{const G=K.findIndex(X=>X.id===L.id);G!==-1&&(K[G]={...L,order_index:A+1})}),x){const L=K.findIndex(A=>A.id===b.id);L!==-1&&(K[L]={...K[L],section_type:T,section_id:N,routine_id:T==="routine"||T==="pending_routine"?K[L].routine_id:null})}t(K);try{if(x){const L={section_type:T,section_id:N};T!=="routine"&&T!=="pending_routine"&&(L.routine_id=null,L.is_pending_routine=!1),await n.from("todos").update(L).eq("id",b.id)}for(let L=0;L<U.length;L++)await n.from("todos").update({order_index:L+1}).eq("id",U[L].id)}catch(L){console.error("  :",L.message),t(e)}}}}const KO=(e,t,n,a,i,r,s,l,o)=>{const u=VO(a,i,t),d=async(H,I)=>{const $=Se(n),Y=a.filter(ae=>!ae.scheduled_time||ae.scheduled_date!==$?!1:parseInt(ae.scheduled_time.split(":")[0],10)===I);let te=0;Y.length>0&&(te=Math.max(...Y.map(V=>parseInt(V.scheduled_time.split(":")[1],10)))+1);const P=`${I.toString().padStart(2,"0")}:${te.toString().padStart(2,"0")}`,F=a.find(ae=>ae.id===H),M=(F==null?void 0:F.timeline_history)||[],Z={scheduled_date:$,scheduled_time:P,assigned_at:new Date().toISOString()},ee=[...M,Z];i(ae=>ae.map(V=>V.id===H?{...V,scheduled_time:P,scheduled_date:$,timeline_history:ee}:V));try{await t.from("todos").update({scheduled_time:P,scheduled_date:$,timeline_history:ee}).eq("id",H)}catch(ae){console.error("  :",ae.message)}},f=async H=>{i(I=>I.map($=>$.id===H?{...$,scheduled_time:null,scheduled_date:null}:$));try{await t.from("todos").update({scheduled_time:null,scheduled_date:null}).eq("id",H)}catch(I){console.error("  :",I.message)}},h=async(H,I=6)=>{const $=a.find(M=>M.id===H);if(!($!=null&&$.scheduled_time))return;const Y=parseInt($.scheduled_time.split(":")[0],10),te=parseInt($.scheduled_time.split(":")[1],10),P=a.filter(M=>M.scheduled_time&&parseInt(M.scheduled_time.split(":")[0],10)===Y).sort((M,Z)=>{const ee=parseInt(M.scheduled_time.split(":")[1],10),ae=parseInt(Z.scheduled_time.split(":")[1],10);return ee-ae}),F=P.findIndex(M=>M.id===H);if(F>0){const M=P[F-1],Z=parseInt(M.scheduled_time.split(":")[1],10),ee=`${Y.toString().padStart(2,"0")}:${Z.toString().padStart(2,"0")}`,ae=`${Y.toString().padStart(2,"0")}:${te.toString().padStart(2,"0")}`;i(V=>V.map(ie=>ie.id===H?{...ie,scheduled_time:ee}:ie.id===M.id?{...ie,scheduled_time:ae}:ie));try{await t.from("todos").update({scheduled_time:ee}).eq("id",H),await t.from("todos").update({scheduled_time:ae}).eq("id",M.id)}catch(V){console.error("   :",V.message)}}else{if(Y<=I)return;const M=Y-1,Z=a.filter(V=>V.scheduled_time&&parseInt(V.scheduled_time.split(":")[0],10)===M);let ee=0;Z.length>0&&(ee=Math.max(...Z.map(ie=>parseInt(ie.scheduled_time.split(":")[1],10)))+1);const ae=`${M.toString().padStart(2,"0")}:${ee.toString().padStart(2,"0")}`;i(V=>V.map(ie=>ie.id===H?{...ie,scheduled_time:ae}:ie));try{await t.from("todos").update({scheduled_time:ae}).eq("id",H)}catch(V){console.error("   :",V.message)}}},m=async(H,I=24)=>{const $=a.find(M=>M.id===H);if(!($!=null&&$.scheduled_time))return;const Y=parseInt($.scheduled_time.split(":")[0],10),te=parseInt($.scheduled_time.split(":")[1],10),P=a.filter(M=>M.scheduled_time&&parseInt(M.scheduled_time.split(":")[0],10)===Y).sort((M,Z)=>{const ee=parseInt(M.scheduled_time.split(":")[1],10),ae=parseInt(Z.scheduled_time.split(":")[1],10);return ee-ae}),F=P.findIndex(M=>M.id===H);if(F<P.length-1){const M=P[F+1],Z=parseInt(M.scheduled_time.split(":")[1],10),ee=`${Y.toString().padStart(2,"0")}:${Z.toString().padStart(2,"0")}`,ae=`${Y.toString().padStart(2,"0")}:${te.toString().padStart(2,"0")}`;i(V=>V.map(ie=>ie.id===H?{...ie,scheduled_time:ee}:ie.id===M.id?{...ie,scheduled_time:ae}:ie));try{await t.from("todos").update({scheduled_time:ee}).eq("id",H),await t.from("todos").update({scheduled_time:ae}).eq("id",M.id)}catch(V){console.error("   :",V.message)}}else{if(Y>=I)return;const M=Y+1,Z=a.filter(V=>V.scheduled_time&&parseInt(V.scheduled_time.split(":")[0],10)===M);let ee=0;if(Z.length>0){const V=Math.min(...Z.map(ie=>parseInt(ie.scheduled_time.split(":")[1],10)));if(ee=V>0?V-1:0,ee===0&&V===0){const ie=Z.map(Ee=>({...Ee,scheduled_time:`${M.toString().padStart(2,"0")}:${(parseInt(Ee.scheduled_time.split(":")[1],10)+1).toString().padStart(2,"0")}`}));i(Ee=>Ee.map(ct=>ct.id===H?{...ct,scheduled_time:`${M.toString().padStart(2,"0")}:00`}:ie.find(bn=>bn.id===ct.id)||ct));try{await t.from("todos").update({scheduled_time:`${M.toString().padStart(2,"0")}:00`}).eq("id",H);for(const Ee of ie)await t.from("todos").update({scheduled_time:Ee.scheduled_time}).eq("id",Ee.id)}catch(Ee){console.error("   :",Ee.message)}return}}const ae=`${M.toString().padStart(2,"0")}:${ee.toString().padStart(2,"0")}`;i(V=>V.map(ie=>ie.id===H?{...ie,scheduled_time:ae}:ie));try{await t.from("todos").update({scheduled_time:ae}).eq("id",H)}catch(V){console.error("   :",V.message)}}},v=GO(a,i,t,d),[b,w]=_.useState(""),[y,g]=_.useState(""),[p,S]=_.useState(""),[E,O]=_.useState(!0),[x,T]=_.useState(!1),[N,D]=_.useState(null),[k,C]=_.useState(!1),[U,K]=_.useState(!1),[L,A]=_.useState(""),[G,X]=_.useState(null),[fe,Q]=_.useState(null),[Pe,_e]=_.useState(!1),[Ve,Le]=_.useState(null);_.useRef(new Set);const Ge=_.useRef(new Set),{deleteThisOnly:qe,deleteFromNow:Tt,deleteAll:Ze}=Kb({type:"todo",supabase:t,selectedDate:n,onDeleteSuccess:(H,I)=>{const $=a.find(Y=>Y.id===H);$&&(D($),X({id:H,deleteType:I,item:$}),C(!0),setTimeout(()=>{C(!1),D(null),X(null)},5e3)),i(Y=>Y.filter(te=>te.id!==H)),_e(!1),Le(null)}}),We=H=>["sun","mon","tue","wed","thu","fri","sat"][H],z=async()=>{var H;if(!((H=e==null?void 0:e.user)!=null&&H.id)){O(!1);return}try{O(!0);const I=Se(n),{data:$,error:Y}=await t.from("todos").select("*").eq("deleted",!1);if(Y)throw Y;const te=($||[]).filter(V=>V.routine_id),P=[...new Set(te.map(V=>V.routine_id))];let F={};if(P.length>0){const{data:V}=await t.from("routines").select("*").in("id",P);F=(V||[]).reduce((ie,Ee)=>(ie[Ee.id]=Ee,ie),{})}const M=new Date(I),Z=We(M.getDay()),ee=($||[]).filter(V=>{if(V.stop_carryover_from&&I>=V.stop_carryover_from||V.hidden_dates&&Array.isArray(V.hidden_dates)&&V.hidden_dates.includes(I))return!1;if(V.repeat_days&&V.repeat_days.length>0)return V.repeat_start_date&&I<V.repeat_start_date||V.repeat_end_date&&I>V.repeat_end_date?!1:V.repeat_start_date&&I===V.repeat_start_date?!0:V.repeat_days.includes(Z);if(V.routine_id){const Ee=F[V.routine_id];if(Ee){const ct=Ee.days||[];if(ct.length>0&&!ct.includes(Z))return!1}return!0}return V.visible_dates&&Array.isArray(V.visible_dates)?V.visible_dates.includes(I):V.date===I}),ae=ee.filter(V=>V.routine_id);if(ae.length>0){const V=[...new Set(ae.map(Ee=>Ee.routine_id))],{data:ie}=await t.from("routines").select("*").in("id",V);for(const Ee of ae){const ct=ie==null?void 0:ie.find(Vn=>Vn.id===Ee.routine_id);if(!ct)continue;const Qt=!ct.days||ct.days.length===0,bn=Qt?"pending_routine":"routine";(Ee.section_type!==bn||Ee.is_pending_routine!==Qt)&&(await t.from("todos").update({section_type:bn,is_pending_routine:Qt}).eq("id",Ee.id),Ee.section_type=bn,Ee.is_pending_routine=Qt)}}i(ee)}catch(I){console.error("   :",I.message)}finally{O(!1)}},he=async()=>{var H;if(!(b.trim()===""||x))try{T(!0);const I=a.filter(F=>!F.parent_id&&F.section_type==="normal"),$=I.length>0?Math.max(...I.map(F=>F.order_index))+1:1,Y=Se(n),{data:te,error:P}=await t.from("todos").insert([{text:b,completed:!1,order_index:$,date:Y,visible_dates:[Y],hidden_dates:[],section_type:"normal",user_id:(H=e==null?void 0:e.user)==null?void 0:H.id}]).select();if(P)throw P;i([...a,te[0]]),w("")}catch(I){console.error("   :",I.message)}finally{T(!1)}},be=async()=>{var H,I;if(!(y.trim()===""||x))try{T(!0);const $=Se(n),{data:Y,error:te}=await t.from("routines").insert([{text:y,days:[],start_date:$,user_id:(H=e==null?void 0:e.user)==null?void 0:H.id}]).select();if(te)throw te;const P=Y[0],F=a.filter(ae=>!ae.parent_id&&ae.section_type==="pending_routine"),M=F.length>0?Math.max(...F.map(ae=>ae.order_index))+1:1,{data:Z,error:ee}=await t.from("todos").insert([{text:y,completed:!1,order_index:M,date:$,visible_dates:[$],hidden_dates:[],routine_id:P.id,is_pending_routine:!0,section_type:"pending_routine",user_id:(I=e==null?void 0:e.user)==null?void 0:I.id}]).select();if(ee)throw ee;s([P,...r]),i([...a,Z[0]]),g("")}catch($){console.error("   :",$.message)}finally{T(!1)}},me=async(H,I)=>{var $;if(!(!I||I.trim()===""))try{const Y=a.filter(ie=>!ie.parent_id&&ie.section_type==="normal"),te=Y.length>0?Math.max(...Y.map(ie=>ie.order_index))+1:1,P=Se(n),F=a.filter(ie=>!ie.scheduled_time||ie.scheduled_date!==P?!1:parseInt(ie.scheduled_time.split(":")[0],10)===H);let M=0;F.length>0&&(M=Math.max(...F.map(Ee=>parseInt(Ee.scheduled_time.split(":")[1],10)))+1);const Z=`${H.toString().padStart(2,"0")}:${M.toString().padStart(2,"0")}`,ee={scheduled_date:P,scheduled_time:Z,assigned_at:new Date().toISOString()},{data:ae,error:V}=await t.from("todos").insert([{text:I.trim(),completed:!1,order_index:te,date:P,visible_dates:[P],hidden_dates:[],section_type:"normal",scheduled_time:Z,scheduled_date:P,timeline_history:[ee],user_id:($=e==null?void 0:e.user)==null?void 0:$.id}]).select();if(V)throw V;return i([...a,ae[0]]),ae[0]}catch(Y){return console.error("   :",Y.message),null}},Me=async()=>{var H;if(!(p.trim()===""||x))try{T(!0);const I=a.filter(F=>!F.parent_id&&F.section_type==="normal"),$=I.length>0?Math.max(...I.map(F=>F.order_index))+1:1,Y=Se(n),{data:te,error:P}=await t.from("todos").insert([{text:p,completed:!1,order_index:$,date:Y,visible_dates:[Y],hidden_dates:[],section_type:"normal",user_id:(H=e==null?void 0:e.user)==null?void 0:H.id}]).select();if(P)throw P;i([...a,te[0]]),S("")}catch(I){console.error("   :",I.message)}finally{T(!1)}},ke=async(H,I=null)=>{const $=a.find(te=>te.id===H);if(!$)return;const Y=I||Se(n);try{if($.repeat_days&&$.repeat_days.length>0){const P=$.completed_dates||[],F=P.includes(Y);let M;F?M=P.filter(ee=>ee!==Y):M=[...P,Y].sort();const{error:Z}=await t.from("todos").update({completed_dates:M}).eq("id",H);if(Z)throw Z;i(a.map(ee=>ee.id===H?{...ee,completed_dates:M}:ee))}else{const P=!$.completed,F=P?new Date().toISOString():null,{error:M}=await t.from("todos").update({completed:P,completed_at:F}).eq("id",H);if(M)throw M;i(a.map(Z=>Z.id===H?{...Z,completed:P,completed_at:F}:Z))}}catch(te){console.error("   :",te.message)}},xe=H=>{i(a.filter(I=>I.id!==H))},J=async(H,I)=>{const $=a.find(Y=>Y.id===H);$&&(I?I==="this-only"?await qe($):I==="from-now"?await Tt($):I==="all"&&await Ze($):(Le($),_e(!0)))},se=async()=>{if(!(!N||!G))try{const{deleteType:H}=G,I=Se(n);if(H==="this-only"){const $=(N.hidden_dates||[]).filter(te=>te!==I),{error:Y}=await t.from("todos").update({hidden_dates:$}).eq("id",N.id);if(Y)throw Y}else if(H==="from-now"){const{error:$}=await t.from("todos").update({visible_dates:N.visible_dates,stop_carryover_from:null}).eq("id",N.id);if($)throw $}else if(H==="all"){const{error:$}=await t.from("todos").update({deleted:!1,deleted_date:null}).eq("id",N.id);if($)throw $}i($=>{const Y={...N};return[...$,Y].sort((P,F)=>P.order_index-F.order_index)}),C(!1),D(null),X(null)}catch(H){console.error("  :",H.message)}},Ce=async(H,I)=>{var $,Y;try{let te=null;Ge.current.add(H);const P=new Date().toISOString();if(i(Z=>(te=Z.find(ee=>ee.id===H),!te||te.text===I?(Ge.current.delete(H),Z):Z.map(ee=>ee.id===H?{...ee,text:I,updated_at:P}:ee))),!te||te.text===I)return;const{error:F}=await t.from("todo_history").insert([{todo_id:H,previous_text:te.text,new_text:I,changed_on_date:te.date,user_id:($=e==null?void 0:e.user)==null?void 0:$.id}]);if(F&&console.error("  :",F.message),te.original_todo_id){const{data:Z,error:ee}=await t.from("todos").select("text, date").eq("id",te.original_todo_id).single();!ee&&Z&&await t.from("todo_history").insert([{todo_id:te.original_todo_id,previous_text:te.text,new_text:I,changed_on_date:te.date,user_id:(Y=e==null?void 0:e.user)==null?void 0:Y.id}])}const{error:M}=await t.from("todos").update({text:I}).eq("id",H);M?(console.error("   :",M.message),i(Z=>Z.map(ee=>ee.id===H?te:ee)),Ge.current.delete(H)):setTimeout(()=>{Ge.current.delete(H)},5e3)}catch(te){console.error("   :",te.message),Ge.current.delete(H)}},Oe=async(H,I)=>{var $;if(!(!I||I.trim()===""))try{const te=a.filter(Z=>Z.parent_id===H).length+1,P=Se(n),{data:F,error:M}=await t.from("todos").insert([{text:I.trim(),completed:!1,order_index:te,date:P,parent_id:H,user_id:($=e==null?void 0:e.user)==null?void 0:$.id}]).select();if(M)throw M;i([...a,F[0]])}catch(Y){console.error("    :",Y.message)}};return{inputValue:b,setInputValue:w,routineInputValue:y,setRoutineInputValue:g,normalInputValue:p,setNormalInputValue:S,loading:E,isAdding:x,deletedTodo:N,showUndoToast:k,showSuccessToast:U,successToastMessage:L,lastDeleteAction:G,focusedTodoId:fe,setFocusedTodoId:Q,selectedTodoForModal:l,showDeleteConfirmModal:Pe,setShowDeleteConfirmModal:_e,todoToDelete:Ve,setTodoToDelete:Le,isDraggingAny:v.isDraggingAny,activeTodoId:v.activeTodoId,overId:v.overId,fetchTodos:z,handleAddTodo:he,handleAddRoutineTodo:be,handleAddNormalTodo:Me,handleToggleTodo:ke,handleDeleteTodo:J,deleteThisOnly:qe,deleteFromNow:Tt,deleteAll:Ze,handleUndoDelete:se,handleEditTodo:Ce,handleAddSubTodo:Oe,handleRemoveTodoFromUI:xe,handleDragStart:v.handleDragStart,handleDragOver:v.handleDragOver,handleDragCancel:v.handleDragCancel,handleDragEnd:v.handleDragEnd,handleMoveUp:u.handleMoveUp,handleMoveDown:u.handleMoveDown,handleMoveToTop:u.handleMoveToTop,handleMoveToBottom:u.handleMoveToBottom,handleRemoveFromTimeline:f,handleMoveUpInTimeline:h,handleMoveDownInTimeline:m,handleAddTodoFromTimeline:me}},XO=({session:e,supabase:t,selectedTodoForModal:n,setSelectedTodoForModal:a})=>{const[i,r]=_.useState(!1),[s,l]=_.useState({}),[o,u]=_.useState([]);return{showTodoHistoryModal:i,todoHistory:s,expandedHistoryIds:o,handleOpenTodoHistoryModal:async m=>{a(m);try{const{data:v,error:b}=await t.from("todo_history").select("*").eq("todo_id",m.id).order("changed_at",{ascending:!1});if(b)throw b;l(w=>({...w,[m.id]:v||[]}))}catch(v){console.error("Error fetching history:",v)}r(!0)},handleCloseTodoHistoryModal:()=>{r(!1),a(null),u([])},toggleHistoryDetail:m=>{u(v=>v.includes(m)?v.filter(b=>b!==m):[...v,m])}}},QO=({selectedTodoForModal:e,setSelectedTodoForModal:t,routines:n})=>{const[a,i]=_.useState(!1),[r,s]=_.useState([]),[l,o]=_.useState(!1),[u,d]=_.useState("");return{showTodoRoutineSetupModal:a,routineDaysForModal:r,setRoutineDaysForModal:s,isEditingRoutineInModal:l,setIsEditingRoutineInModal:o,routineTimeSlotForModal:u,setRoutineTimeSlotForModal:d,handleOpenTodoRoutineSetupModal:v=>{t(v);const b=v.repeat_days&&v.repeat_days.length>0,w=n.find(y=>y.id===v.routine_id);b?(s(v.repeat_days),d(""),o(!1)):w?(s(w.days||[]),d(w.time_slot||""),o(!1)):(s([]),d(""),o(!0)),i(!0)},handleCloseTodoRoutineSetupModal:()=>{i(!1),t(null),s([]),d(""),o(!1)},handleToggleRoutineDayInModal:v=>{s(b=>b.includes(v)?b.filter(w=>w!==v):[...b,v])}}},JO=({session:e,supabase:t,selectedDate:n})=>{const a=_.useRef(!1);return{carryOverInProgress:a,carryOverIncompleteTodos:async s=>{if(!a.current)try{a.current=!0;const{data:l,error:o}=await t.from("todos").select("*").eq("deleted",!1).eq("completed",!1);if(o)throw o;if(!l||l.length===0)return;const u=l.filter(d=>(d.hidden_dates||[]).includes(s)?!1:d.visible_dates&&Array.isArray(d.visible_dates)&&d.visible_dates.length>0?d.visible_dates.includes(s)?!1:d.visible_dates.some(m=>m<s):!!(d.date&&d.date<s));if(u.length===0)return;for(const d of u){let f=[];d.visible_dates&&Array.isArray(d.visible_dates)&&d.visible_dates.length>0?f=[...d.visible_dates,s]:f=d.date?[d.date,s]:[s];const{error:h}=await t.from("todos").update({visible_dates:f}).eq("id",d.id);h&&console.error(` ${d.id}  :`,h.message)}}catch(l){console.error("  :",l.message)}finally{a.current=!1}},movePastIncompleteTodosToToday:async()=>{if(!a.current)try{a.current=!0;const s=new Date,l=Se(s),{data:o,error:u}=await t.from("todos").select("date").lt("date",l).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("date",{ascending:!0}).limit(1);if(u)throw u;if(!o||o.length===0)return;const d=new Date(o[0].date+"T00:00:00");let f=new Date(d);const h=new Date(s);h.setDate(h.getDate()-1);let m=0;for(;f<=h;){const v=Se(f),b=new Date(f);b.setDate(b.getDate()+1);const w=Se(b),{data:y,error:g}=await t.from("todos").select("*").eq("date",v).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("order_index",{ascending:!0});if(g)throw g;if(y&&y.length>0){const{data:p,error:S}=await t.from("todos").select("*").eq("date",w).eq("deleted",!1).order("order_index",{ascending:!0});if(S)throw S;const E=new Set;p==null||p.forEach(x=>{x.original_todo_id!==null&&E.add(x.original_todo_id)});const O=y.filter(x=>{if(x.stop_carryover_from&&v>=x.stop_carryover_from)return!1;const T=x.original_todo_id||x.id;return!E.has(T)});if(O.length>0){const x=O.map(L=>L.original_todo_id||L.id).filter((L,A,G)=>G.indexOf(L)===A),{data:T,error:N}=await t.from("todos").select("id, created_at").in("id",x);if(N)throw N;const D={};T==null||T.forEach(L=>{D[L.id]=L.created_at});const C=(p?p.length:0)+1,U=O.map((L,A)=>{const G=L.original_todo_id||L.id;return{text:L.text,completed:!1,date:w,created_at:D[G]||L.created_at,order_index:C+A,original_todo_id:G,parent_id:null,routine_id:null}}),{error:K}=await t.from("todos").insert(U);if(K)throw K;m+=O.length}}f.setDate(f.getDate()+1)}m>0}catch(s){console.error("    :",s.message)}finally{a.current=!1}}}};function PO(e,t){const[n,a]=_.useState([]),[i,r]=_.useState(!1),[s,l]=_.useState(""),[o,u]=_.useState(null),[d,f]=_.useState(""),[h,m]=_.useState(!1),[v,b]=_.useState(""),w=()=>{if(n.length===0)return"";const O=Math.floor(Math.random()*n.length);return n[O]},y=()=>{let O=0;m(!0),setTimeout(()=>{let x=w();for(;x===v&&n.length>1&&O<10;)x=w(),O++;m(!1),b(x)},300)},g=async()=>{try{const{data:O,error:x}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(x)throw x;if(O&&O.length>0){const T=O.map(N=>N.message);a(T),v||b(T[0])}}catch(O){console.error("   :",O.message)}},p=async O=>{var x;try{const{data:T}=await t.from("encouragement_messages").select("order_index").order("order_index",{ascending:!1}).limit(1),N=T&&T.length>0?T[0].order_index:0,{error:D}=await t.from("encouragement_messages").insert([{message:O,order_index:N+1,user_id:(x=e==null?void 0:e.user)==null?void 0:x.id}]);if(D)throw D;await g()}catch(T){console.error("   :",T.message),alert("   .")}},S=async(O,x)=>{try{const{data:T}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!T||O>=T.length)throw new Error("   .");const N=T[O],{error:D}=await t.from("encouragement_messages").update({message:x}).eq("id",N.id);if(D)throw D;await g()}catch(T){console.error("   :",T.message),alert("   .")}},E=async O=>{try{const{data:x}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!x||O>=x.length)throw new Error("   .");const T=x[O],{error:N}=await t.from("encouragement_messages").delete().eq("id",T.id);if(N)throw N;await g()}catch(x){console.error("   :",x.message),alert("   .")}};return _.useEffect(()=>{n.length>0&&!v&&b(w())},[n]),{encouragementMessages:n,showEncouragementModal:i,setShowEncouragementModal:r,newEncouragementMessage:s,setNewEncouragementMessage:l,editingEncouragementId:o,setEditingEncouragementId:u,editingEncouragementText:d,setEditingEncouragementText:f,showEncouragementEmoji:h,currentEncouragementMessage:v,handleEncouragementClick:y,fetchEncouragementMessages:g,addEncouragementMessage:p,updateEncouragementMessage:S,deleteEncouragementMessage:E}}function ZO(e){const[t,n]=_.useState(!1),[a,i]=_.useState([]),[r,s]=_.useState("1week"),l=async()=>{try{const d=new Date,f=Se(d);let h=null;if(r!=="all")switch(h=new Date(d),r){case"1week":h.setDate(d.getDate()-7);break;case"2weeks":h.setDate(d.getDate()-14);break;case"1month":h.setMonth(d.getMonth()-1);break;case"3months":h.setMonth(d.getMonth()-3);break;case"6months":h.setMonth(d.getMonth()-6);break}let m=e.from("todos").select("*").eq("deleted",!1).is("routine_id",null).order("created_at",{ascending:!0});h&&(m=m.gte("date",Se(h)));const{data:v,error:b}=await m;if(b)throw b;const w={};for(const g of v||[]){const p=g.original_todo_id||g.id;w[p]||(w[p]=[]),w[p].push(g)}const y=Object.entries(w).map(([g,p])=>{const S=p.sort((N,D)=>new Date(N.date)-new Date(D.date)),E=S[0],O=S.map(N=>N.date);let x=null;for(const N of S)if(N.completed&&N.completed_at){const D=new Date(N.completed_at);x=Se(D);break}const T=S.find(N=>N.date===f);return{text:E.text,originalId:parseInt(g),createdAt:E.created_at,startDate:O[0],endDate:O[O.length-1],dates:O,completed:(T==null?void 0:T.completed)||!1,completedDate:x}}).sort((g,p)=>new Date(g.createdAt)-new Date(p.createdAt));i(y)}catch(d){console.error("   :",d.message)}};return{showGanttChart:t,ganttData:a,ganttPeriod:r,setGanttPeriod:s,handleOpenGanttChart:async()=>{n(!0),await l()},handleCloseGanttChart:()=>{n(!1),i([])},fetchGanttData:l}}function WO(){const{session:e,authLoading:t,handleGoogleLogin:n,handleAppleLogin:a,handleLogout:i}=dO(),[r,s]=_.useState(new Date),[l,o]=_.useState(!1),[u,d]=_.useState(()=>localStorage.getItem("timelineCollapsed")==="true"),f=_.useRef(new Set),h=k1(_u(sh,{activationConstraint:{delay:120,tolerance:5}}),_u(Rb,{activationConstraint:{delay:120,tolerance:5}}),_u(ih,{coordinateGetter:oO})),[m,v]=_.useState([]),[b,w]=_.useState(null),[y,g]=_.useState(null),[p,S]=_.useState(!1),{showTodoHistoryModal:E,todoHistory:O,expandedHistoryIds:x,handleOpenTodoHistoryModal:T,handleCloseTodoHistoryModal:N,toggleHistoryDetail:D}=XO({session:e,supabase:de,selectedTodoForModal:b,setSelectedTodoForModal:w}),{showRoutineModal:k,routines:C,setRoutines:U,routineInput:K,setRoutineInput:L,selectedDays:A,selectedTimeSlot:G,setSelectedTimeSlot:X,isAddingRoutine:fe,editingRoutineId:Q,editingRoutineText:Pe,setEditingRoutineText:_e,showRoutineHistory:Ve,selectedRoutineForHistory:Le,routineHistoryData:Ge,editingRoutineDays:qe,showDeleteConfirmModal:Tt,setShowDeleteConfirmModal:Ze,routineToDelete:We,fetchRoutines:z,handleAddRoutine:he,handleCreateRoutineFromTodo:be,handleStartEditRoutine:me,handleCancelEditRoutine:Me,handleSaveEditRoutine:ke,handleToggleEditDay:xe,handleDeleteRoutine:J,deleteThisOnly:se,deleteFromNow:Ce,deleteAll:Oe,fetchRoutineHistory:H,handleCloseRoutineHistory:I,handleOpenRoutine:$,handleCloseRoutine:Y,handleToggleDay:te}=YO({session:e,supabase:de,selectedDate:r,setTodos:v,setSuccessToastMessage:()=>{},setShowSuccessToast:()=>{}}),{showTodoRoutineSetupModal:P,routineDaysForModal:F,setRoutineDaysForModal:M,isEditingRoutineInModal:Z,setIsEditingRoutineInModal:ee,routineTimeSlotForModal:ae,setRoutineTimeSlotForModal:V,handleOpenTodoRoutineSetupModal:ie,handleCloseTodoRoutineSetupModal:Ee,handleToggleRoutineDayInModal:ct}=QO({selectedTodoForModal:b,setSelectedTodoForModal:w,routines:C}),{carryOverIncompleteTodos:Qt}=JO({session:e,supabase:de,selectedDate:r}),{normalInputValue:bn,setNormalInputValue:Vn,loading:ii,isDraggingAny:ta,isAdding:Vr,showUndoToast:ht,showSuccessToast:Ct,successToastMessage:At,lastDeleteAction:_n,focusedTodoId:Rt,setFocusedTodoId:Mt,showDeleteConfirmModal:Jt,setShowDeleteConfirmModal:Gn,todoToDelete:ut,activeTodoId:qt,overId:$t,fetchTodos:rn,handleAddNormalTodo:na,handleToggleTodo:wn,handleDeleteTodo:sn,handleAddSubTodo:Kn,handleEditTodo:Ta,handleDragStart:bc,handleDragOver:Xb,handleDragCancel:Qb,handleDragEnd:Jb,handleUndoDelete:ch,deleteThisOnly:Pb,deleteFromNow:Zb,deleteAll:Wb,handleRemoveTodoFromUI:uh,handleMoveUp:dh,handleMoveDown:fh,handleMoveToTop:hh,handleMoveToBottom:mh,handleRemoveFromTimeline:gh,handleMoveUpInTimeline:vh,handleMoveDownInTimeline:yh,handleAddTodoFromTimeline:ph}=KO(e,de,r,m,v,C,U,b),bh=j=>{Mt(j)},_h=j=>{},Fb=()=>{ch()},e_=async(j,q,B)=>{g({todoId:j,todoText:q,previousDays:B}),S(!0),setTimeout(()=>{S(!1),g(null)},5e3)},t_=async()=>{if(y)try{const{todoId:j,previousDays:q}=y,{error:B}=await de.from("todos").update({repeat_days:q}).eq("id",j);if(B)throw B;v(W=>W.map(le=>le.id===j?{...le,repeat_days:q}:le)),S(!1),g(null)}catch(j){console.error("   :",j.message)}},{showGanttChart:wh,ganttData:n_,ganttPeriod:Sh,setGanttPeriod:a_,handleOpenGanttChart:i_,handleCloseGanttChart:r_,fetchGanttData:s_}=ZO(de),[l_,xh]=_.useState(!1),{memoContent:o_,setMemoContent:c_,isSavingMemo:u_,fetchMemoContent:d_}=$O(e),{encouragementMessages:f_,showEncouragementModal:h_,setShowEncouragementModal:Eh,newEncouragementMessage:m_,setNewEncouragementMessage:g_,editingEncouragementId:v_,setEditingEncouragementId:y_,editingEncouragementText:p_,setEditingEncouragementText:b_,showEncouragementEmoji:__,currentEncouragementMessage:w_,handleEncouragementClick:S_,fetchEncouragementMessages:x_,addEncouragementMessage:E_,updateEncouragementMessage:T_,deleteEncouragementMessage:j_}=PO(e,de),O_=async j=>{var q,B;try{const W=Se(r),le=m.filter(we=>!we.parent_id&&we.section_type==="normal"),pe=le.length>0?Math.max(...le.map(we=>we.order_index))+1:1,$e=`temp_${Date.now()}_${Math.random()}`,oe={id:$e,text:j,completed:!1,order_index:pe,date:W,visible_dates:[W],hidden_dates:[],section_type:"normal",user_id:(q=e==null?void 0:e.user)==null?void 0:q.id,_isOptimistic:!0};if(v(we=>[...we,oe]),(B=e==null?void 0:e.user)!=null&&B.id&&de){const{data:we,error:De}=await de.from("todos").insert([{text:j,completed:!1,order_index:pe,date:W,visible_dates:[W],hidden_dates:[],section_type:"normal",user_id:e.user.id}]).select();if(De)throw De;v(Ke=>Ke.map(Ht=>Ht.id===$e?we[0]:Ht))}else{const we=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");we.push({text:j,dateStr:W,timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(we))}}catch(W){console.error("Quick add error:",W);const le=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");le.push({text:j,dateStr:Se(r),timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(le))}},[Mn,D_]=_.useState(()=>localStorage.getItem("viewMode")||"horizontal"),[cl,Th]=_.useState({normal:" ",routine:" "}),[aa,Gr]=_.useState([]),[N_,jh]=_.useState(!1),[Oh,Dh]=_.useState(!1),[Nh,Ch]=_.useState({}),C_=LO(e),{sectionOrder:ri,setSectionOrder:Ah,fetchSectionOrder:A_,saveSectionOrder:Rh,moveSectionLeft:_c,moveSectionRight:wc,changeSectionIcon:Sc,getSectionIcon:ul}=C_,Mh=async(j,q,B)=>{if(!m.find(oe=>oe.id===j))return;const le=m.filter(oe=>!(oe.parent_id||oe.section_type!==q||q==="custom"&&oe.section_id!==B)),pe=le.length>0?Math.max(...le.map(oe=>oe.order_index)):0,$e={section_type:q,section_id:B||null,order_index:pe+1,routine_id:null};v(oe=>oe.map(we=>we.id===j?{...we,...$e}:we)),await de.from("todos").update($e).eq("id",j)},kh=ri.filter(j=>j!=="timeline").map(j=>{if(j==="normal")return{id:"normal",sectionType:"normal",sectionId:null,name:cl.normal||" ",icon:ul("normal")};const q=aa.find(B=>B.id===j);return q?{id:q.id,sectionType:"custom",sectionId:q.id,name:q.name,icon:q.icon}:null}).filter(Boolean),R_=BO(e),{fetchSections:M_}=R_;qO(e);const Ui=_.useRef(null),[k_,U_]=_.useState(0),xc=_.useRef(null),Uh=_.useRef(null),zh=_.useRef(null),[Lh,z_]=_.useState(()=>window.innerWidth>=769);_.useEffect(()=>{const j=()=>z_(window.innerWidth>=769);return window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),_.useEffect(()=>{localStorage.setItem("timelineCollapsed",u)},[u]);const[si,Ec]=_.useState([]),[L_,Bh]=_.useState(!1),Hh=async j=>{var q;(q=e==null?void 0:e.user)!=null&&q.id&&await Xn.set(Qn.HIDDEN_SECTIONS,j,e.user.id)},B_=async()=>{var q;if(!((q=e==null?void 0:e.user)!=null&&q.id))return;const j=await Xn.get(Qn.HIDDEN_SECTIONS);j&&Ec(j)},Tc=j=>{const q=[...si,j];Ec(q),Hh(q)},H_=j=>{const q=si.filter(B=>B!==j);Ec(q),Hh(q)},q_=()=>{const j=new Date(r);j.setDate(j.getDate()-1),s(j)},$_=()=>{const j=new Date(r);j.setDate(j.getDate()+1),s(j)},I_=j=>{const q=new Date(j.target.value+"T00:00:00");s(q)},Y_=async()=>{var q;if(!((q=e==null?void 0:e.user)!=null&&q.id))return;const j=await Xn.get(Qn.SECTION_TITLES);j&&Th(B=>({...B,...j}))},V_=async(j,q)=>{var W;if(!((W=e==null?void 0:e.user)!=null&&W.id))return;const B={...cl,[j]:q};Th(B),await Xn.set(Qn.SECTION_TITLES,B,e.user.id)},G_=async()=>{var q;if(!((q=e==null?void 0:e.user)!=null&&q.id))return;const j=await Xn.get(Qn.CUSTOM_SECTIONS);j&&Gr(j)},dl=async j=>{var q;(q=e==null?void 0:e.user)!=null&&q.id&&await Xn.set(Qn.CUSTOM_SECTIONS,j,e.user.id)},K_=({name:j,icon:q})=>{const B={id:`custom-${Date.now()}`,name:j,icon:q},W=[...aa,B];Gr(W),dl(W);const le=[...ri,B.id];Ah(le),Rh(le)},X_=async j=>{const q=Nh[j]||"";if(!(!q.trim()||Oh)){if(!e){alert(" ");return}Dh(!0);try{const B=m.filter(we=>!we.parent_id&&we.section_type==="custom"&&we.section_id===j),W=B.length>0?Math.max(...B.map(we=>we.order_index))+1:1,le=Se(r),pe={text:q.trim(),completed:!1,order_index:W,date:le,visible_dates:[le],hidden_dates:[],user_id:e.user.id,section_id:j,section_type:"custom"},{data:$e,error:oe}=await de.from("todos").insert([pe]).select();if(oe)throw oe;$e&&$e.length>0&&(v(we=>[...we,$e[0]]),Ch(we=>({...we,[j]:""})))}catch(B){console.error("  :",B.message)}finally{Dh(!1)}}},Q_=async j=>{if(!confirm("  ?      ."))return;try{const{error:W}=await de.from("todos").delete().eq("section_id",j);if(W){console.error("   :",W.message);return}}catch(W){console.error("   :",W.message);return}const q=aa.filter(W=>W.id!==j);Gr(q),dl(q);const B=ri.filter(W=>W!==j);Ah(B),Rh(B),v(W=>W.filter(le=>le.section_id!==j))},J_=async(j,q)=>{try{const B=Se(j),W=Se(q),{data:le,error:pe}=await de.from("todos").select("*").eq("deleted",!1).eq("completed",!1).is("routine_id",null);if(pe)throw pe;const $e=(le||[]).filter(oe=>oe.stop_carryover_from&&B>=oe.stop_carryover_from?!1:oe.visible_dates&&Array.isArray(oe.visible_dates)&&oe.visible_dates.length>0?oe.visible_dates.includes(B):oe.date===B);if($e.length===0)return;for(const oe of $e){let we=oe.visible_dates||[oe.date];if(we.includes(W))continue;const De=[...we,W].sort(),{error:Ke}=await de.from("todos").update({visible_dates:De}).eq("id",oe.id);Ke&&console.error(` ${oe.id}  :`,Ke.message)}}catch(B){console.error("   :",B.message)}};_.useEffect(()=>{let j=null;const q=()=>{document.body.classList.add("is-scrolling"),j&&clearTimeout(j),j=setTimeout(()=>{document.body.classList.remove("is-scrolling")},1e3)};return window.addEventListener("scroll",q),()=>{window.removeEventListener("scroll",q),j&&clearTimeout(j)}},[]),_.useEffect(()=>{e&&(x_(),d_(),z(),A_(),M_(),Y_(),G_(),B_())},[e]),_.useEffect(()=>{if(!Ui.current)return;const j=Ui.current,q=Mn==="horizontal";let B=!1,W=0,le=0,pe=0;const $e=ge=>ge.type.includes("touch")?q?ge.touches[0].pageX:ge.touches[0].pageY:q?ge.pageX:ge.pageY,oe=ge=>{ge.target.closest(".section-block")||(B=!0,W=$e(ge),le=q?j.scrollLeft:j.scrollTop,j.style.transition="none",j.style.transform=q?"translateX(0)":"translateY(0)",pe=0)},we=()=>{B&&pe!==0&&(j.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",j.style.transform=q?"translateX(0)":"translateY(0)",setTimeout(()=>{j.style.transition="none",pe=0},300)),B=!1},De=()=>{pe!==0&&(j.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",j.style.transform=q?"translateX(0)":"translateY(0)",setTimeout(()=>{j.style.transition="none",pe=0},300)),B=!1},Ke=ge=>{if(!B)return;ge.preventDefault();const at=($e(ge)-W)*1.5,mt=le-at,fl=q?j.scrollWidth-j.clientWidth:j.scrollHeight-j.clientHeight;if(mt<0){const jc=-mt;pe=Math.min(jc*.3,100),q?(j.scrollLeft=0,j.style.transform=`translateX(${pe}px)`):(j.scrollTop=0,j.style.transform=`translateY(${pe}px)`)}else if(mt>fl){const jc=mt-fl;pe=-Math.min(jc*.3,100),q?(j.scrollLeft=fl,j.style.transform=`translateX(${pe}px)`):(j.scrollTop=fl,j.style.transform=`translateY(${pe}px)`)}else pe=0,j.style.transform=q?"translateX(0)":"translateY(0)",q?j.scrollLeft=mt:j.scrollTop=mt},Ht=ge=>{q&&ge.target.closest(".section-block")&&ge.deltaX!==0&&ge.preventDefault()};return j.addEventListener("mousedown",oe),document.addEventListener("mouseup",De),document.addEventListener("mouseleave",we),j.addEventListener("mousemove",Ke),j.addEventListener("touchstart",oe,{passive:!0}),j.addEventListener("touchmove",Ke,{passive:!1}),j.addEventListener("touchend",De),j.addEventListener("touchcancel",De),j.addEventListener("wheel",Ht,{passive:!1}),()=>{j.removeEventListener("mousedown",oe),document.removeEventListener("mouseup",De),document.removeEventListener("mouseleave",we),j.removeEventListener("mousemove",Ke),j.removeEventListener("touchstart",oe),j.removeEventListener("touchmove",Ke),j.removeEventListener("touchend",De),j.removeEventListener("touchcancel",De),j.removeEventListener("wheel",Ht)}},[Mn,m,C]),_.useEffect(()=>{if(Mn!=="horizontal"||!Ui.current)return;const j=Ui.current,q=()=>{const B=j.querySelectorAll(".section-block");if(B.length===0)return;const W=j.getBoundingClientRect(),le=W.left+W.width/2;let pe=0,$e=1/0;B.forEach((oe,we)=>{const De=oe.getBoundingClientRect(),Ke=De.left+De.width/2,Ht=Math.abs(Ke-le);Ht<$e&&($e=Ht,pe=we)}),U_(pe)};return j.addEventListener("scroll",q),q(),()=>j.removeEventListener("scroll",q)},[Mn,m,C]),_.useEffect(()=>{if(!xc.current)return;const j=xc.current;let q=!1,B=0,W=0,le=0;const pe=De=>{De.target.closest(".section-block")||(q=!0,B=De.pageY,W=j.scrollTop,j.style.transition="none",j.style.transform="translateY(0)",le=0)},$e=()=>{q&&le!==0&&(j.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",j.style.transform="translateY(0)",setTimeout(()=>{j.style.transition="none",le=0},300)),q=!1},oe=()=>{le!==0&&(j.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",j.style.transform="translateY(0)",setTimeout(()=>{j.style.transition="none",le=0},300)),q=!1},we=De=>{if(!q)return;De.preventDefault();const Ht=(De.pageY-B)*1.5,ge=W-Ht,_t=j.scrollHeight-j.clientHeight;if(ge<0){const at=-ge;le=Math.min(at*.3,100),j.scrollTop=0,j.style.transform=`translateY(${le}px)`}else if(ge>_t){const at=ge-_t;le=-Math.min(at*.3,100),j.scrollTop=_t,j.style.transform=`translateY(${le}px)`}else le=0,j.style.transform="translateY(0)",j.scrollTop=ge};return j.addEventListener("mousedown",pe),document.addEventListener("mouseup",oe),document.addEventListener("mouseleave",$e),j.addEventListener("mousemove",we),()=>{j.removeEventListener("mousedown",pe),document.removeEventListener("mouseup",oe),document.removeEventListener("mouseleave",$e),j.removeEventListener("mousemove",we)}},[m,C]),_.useEffect(()=>{wh&&s_()},[Sh]),_.useEffect(()=>{const j=async()=>{const B=new Date,W=new Date(B);W.setHours(24,0,0,0);const le=W.getTime()-B.getTime();return setTimeout(async()=>{const $e=new Date(B),oe=new Date(B);oe.setDate(oe.getDate()+1),await J_($e,oe),s(new Date),j()},le)},q=j();return()=>clearTimeout(q)},[]),_.useEffect(()=>{(async()=>{var oe;const W=Se(r),pe=Se(new Date);W===pe&&((oe=e==null?void 0:e.user)!=null&&oe.id)&&await Qt(W),await rn()})();const q=Se(r),B=de.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"todos",filter:`date=eq.${q}`},W=>{W.eventType==="INSERT"?v(le=>le.some(pe=>pe.id===W.new.id)?le:[...le,W.new]):W.eventType==="UPDATE"?v(le=>f.current.has(W.new.id)?le:le.map(pe=>pe.id===W.new.id?W.new:pe)):W.eventType==="DELETE"&&v(le=>le.filter(pe=>pe.id!==W.old.id))}).subscribe(W=>{});return()=>{de.removeChannel(B)}},[r,e]),_.useEffect(()=>{if(ta){const j=window.scrollY,q=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${j}px`,document.body.style.left="0",document.body.style.right="0",q>0&&(document.body.style.paddingRight=`${q}px`),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.paddingRight="",window.scrollTo(0,j)}}},[ta]);const qh=zO({authLoading:t,session:e,handleGoogleLogin:n,handleAppleLogin:a});return qh||c.jsxs("div",{className:`app ${ta?"dragging-active":""}`,children:[c.jsx(fO,{showSidebar:l,setShowSidebar:o,session:e,viewMode:Mn,setViewMode:D_,onOpenRoutine:$,onOpenGanttChart:i_,onOpenEncouragementModal:()=>Eh(!0),onOpenAddSection:()=>jh(!0),onOpenHiddenSections:()=>Bh(!0),onLogout:i}),c.jsxs("div",{className:`container ${Mn==="horizontal"?"container-wide":""}`,children:[c.jsx(mO,{showSidebar:l,setShowSidebar:o,selectedDate:r,onDateChange:I_,onPrevDay:q_,onNextDay:$_,showEncouragementEmoji:__,currentEncouragementMessage:w_,onEncouragementClick:S_,setSelectedDate:s,onQuickAdd:O_,onOpenMemo:()=>xh(!0),timelineCollapsed:u,setTimelineCollapsed:d}),c.jsxs(Aj,{sensors:h,collisionDetection:L1,onDragStart:bc,onDragOver:Xb,onDragEnd:Jb,onDragCancel:Qb,measuring:{droppable:{strategy:Dr.Always}},children:[Mn==="horizontal"&&!si.includes("timeline")&&c.jsxs("div",{className:`timeline-sidebar ${u?"collapsed":""}`,children:[c.jsx(Yd,{title:"",icon:ul("timeline"),sectionId:"timeline",onIconChange:Sc,customActions:c.jsx("button",{className:"section-action-button scroll-to-now-button",onClick:()=>{var j;return(j=Uh.current)==null?void 0:j.scrollToNow()},title:" ",children:""})}),c.jsx("div",{className:"timeline-content",children:c.jsx(iv,{ref:Uh,startHour:0,endHour:24,scheduledTodos:m.filter(j=>j.scheduled_time&&!j.parent_id&&j.scheduled_date===Se(r)),onToggle:wn,onRemoveFromTimeline:gh,onMoveUpInTimeline:vh,onMoveDownInTimeline:yh,onAddTodo:ph})})]}),c.jsxs("div",{className:"content-scrollable",ref:xc,children:[c.jsx("div",{ref:Ui,className:`sections-container ${Mn==="horizontal"?"horizontal-layout":"vertical-layout"} ${u?"timeline-hidden":""}`,children:c.jsx("div",{className:"todo-list",children:ii?c.jsx("div",{className:"loading-container",children:c.jsxs("div",{className:"loading-dots",children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]})}):(()=>{const j=m.filter(B=>!B.parent_id&&(B.section_type==="normal"||B.section_type==="routine"||B.section_type==="pending_routine"||!B.section_type)).sort((B,W)=>B.order_index-W.order_index),q=[...j.map(B=>B.id),...aa.flatMap(B=>m.filter(W=>!W.parent_id&&W.section_type==="custom"&&W.section_id===B.id).map(W=>W.id))];return c.jsx(Tu,{items:q,strategy:Eu,children:ri.filter(B=>!si.includes(B)).filter(B=>!(Lh&&Mn==="horizontal"&&B==="timeline")).map((B,W)=>{const le=ri.filter(De=>!si.includes(De)),pe=le.indexOf(B),$e=pe===0,oe=pe===le.length-1,we=[...$e?[]:[{icon:"",label:" ",onClick:()=>_c(B)}],...oe?[]:[{icon:"",label:" ",onClick:()=>wc(B)}],{icon:"",label:"",onClick:()=>Tc(B)}];if(B==="timeline")return c.jsxs("div",{className:`timeline-section section-block ${u?"collapsed":""}`,children:[c.jsx(Yd,{title:"",icon:ul("timeline"),sectionId:"timeline",onIconChange:Sc,settingsMenuItems:we,customActions:c.jsx("button",{className:"section-action-button scroll-to-now-button",onClick:()=>{var De;return(De=zh.current)==null?void 0:De.scrollToNow()},title:" ",children:""})}),c.jsx("div",{className:"timeline-content",children:c.jsx(iv,{ref:zh,startHour:0,endHour:24,scheduledTodos:m.filter(De=>De.scheduled_time&&!De.parent_id&&De.scheduled_date===Se(r)),onToggle:wn,onRemoveFromTimeline:gh,onMoveUpInTimeline:vh,onMoveDownInTimeline:yh,onAddTodo:ph})})]},"timeline");if(B==="normal"){const De=[...$e?[]:[{icon:"",label:" ",onClick:()=>_c(B)}],...oe?[]:[{icon:"",label:" ",onClick:()=>wc(B)}],{icon:"",label:"",onClick:()=>{confirm(`    ?

      .`)&&Tc("normal")}},{icon:"",label:"",onClick:()=>{alert(`      .

   ""  .`)}}];return c.jsx("div",{children:c.jsx(av,{title:cl.normal,icon:ul("normal"),sectionId:"normal",onIconChange:Sc,className:"normal-section section-block",inputValue:bn,setInputValue:Vn,onAddTodo:na,isAdding:Vr,placeholder:"   ...",editable:!0,onTitleChange:Ke=>V_("normal",Ke),settingsMenuItems:De,children:j.length>0&&c.jsx(Tu,{items:j.map(Ke=>Ke.id),strategy:Eu,children:j.map((Ke,Ht)=>{const ge=m.filter(at=>at.parent_id===Ke.id),_t=Se(r);return c.jsx(ao,{todo:Ke,index:Ht,onToggle:wn,onDelete:sn,onEdit:Ta,formatDate:ql,formatDateOnly:rs,isFocused:Rt===Ke.id,onFocus:bh,onAddSubTodo:Kn,subtodos:ge,level:0,onCreateRoutine:be,routines:C,onShowRoutineHistory:H,onOpenRoutineSetupModal:ie,onOpenHistoryModal:T,currentPageDate:_t,onRemoveFromUI:uh,showSuccessMessage:_h,activeId:qt,overId:$t,onMoveUp:at=>dh(at,"normal",null),onMoveDown:at=>fh(at,"normal",null),onMoveToTop:at=>hh(at,"normal",null),onMoveToBottom:at=>mh(at,"normal",null),isFirst:Ht===0,isLast:Ht===j.length-1,sections:kh,onMoveToSection:Mh},Ke.id)})})})},"normal")}else{const De=aa.find(ge=>ge.id===B);if(!De)return null;const Ke=m.filter(ge=>!ge.parent_id&&ge.section_type==="custom"&&ge.section_id===B).sort((ge,_t)=>ge.order_index-_t.order_index),Ht=[...$e?[]:[{icon:"",label:" ",onClick:()=>_c(B)}],...oe?[]:[{icon:"",label:" ",onClick:()=>wc(B)}],{icon:"",label:"",onClick:()=>Tc(B)},{icon:"",label:"",onClick:()=>Q_(B)}];return c.jsx("div",{children:c.jsx(av,{title:De.name,icon:De.icon,sectionId:B,onIconChange:(ge,_t)=>{const at=aa.map(mt=>mt.id===ge?{...mt,icon:_t}:mt);Gr(at),dl(at)},className:"custom-section section-block",inputValue:Nh[B]||"",setInputValue:ge=>Ch(_t=>({..._t,[B]:ge})),onAddTodo:()=>X_(B),isAdding:Oh,placeholder:`${De.name}   ...`,editable:!0,onTitleChange:ge=>{const _t=aa.map(at=>at.id===B?{...at,name:ge}:at);Gr(_t),dl(_t)},settingsMenuItems:Ht,children:Ke.length>0&&c.jsx(Tu,{items:Ke.map(ge=>ge.id),strategy:Eu,children:Ke.map((ge,_t)=>{const at=m.filter(mt=>mt.parent_id===ge.id);return c.jsx(ao,{todo:ge,index:_t,onToggle:wn,onDelete:sn,onEdit:Ta,formatDate:ql,formatDateOnly:rs,isFocused:Rt===ge.id,onFocus:bh,onAddSubTodo:Kn,subtodos:at,level:0,onCreateRoutine:be,routines:C,onShowRoutineHistory:H,onOpenRoutineSetupModal:ie,onOpenHistoryModal:T,currentPageDate:Se(r),onRemoveFromUI:uh,showSuccessMessage:_h,activeId:qt,overId:$t,onMoveUp:mt=>dh(mt,"custom",B),onMoveDown:mt=>fh(mt,"custom",B),onMoveToTop:mt=>hh(mt,"custom",B),onMoveToBottom:mt=>mh(mt,"custom",B),isFirst:_t===0,isLast:_t===Ke.length-1,sections:kh,onMoveToSection:Mh},ge.id)})})})},B)}})})})()})}),c.jsx(Jj,{zIndex:1e4,children:qt?(()=>{const j=m.find(B=>B.id===qt);if(!j)return null;const q=m.filter(B=>B.parent_id===j.id);return c.jsx("div",{className:"drag-overlay-todo",children:c.jsx(ao,{todo:j,index:0,onToggle:()=>{},onDelete:()=>{},onEdit:()=>{},formatDate:ql,formatDateOnly:rs,isFocused:!1,onFocus:()=>{},onAddSubTodo:()=>{},subtodos:q,level:0,onCreateRoutine:()=>{},routines:C,onShowRoutineHistory:()=>{},onOpenRoutineSetupModal:()=>{},onOpenHistoryModal:()=>{},currentPageDate:Se(r),onRemoveFromUI:()=>{},showSuccessMessage:()=>{},hideNumber:!0})})})():null}),c.jsx(gO,{viewMode:Mn,currentSectionIndex:k_,sectionsContainerRef:Ui,visibleSectionCount:ri.filter(j=>!si.includes(j)).filter(j=>["timeline","routine","normal"].includes(j)||aa.some(q=>q.id===j)).filter(j=>!(Lh&&Mn==="horizontal"&&j==="timeline")).length})]})]}),c.jsx(UO,{showUndoToast:ht,showSuccessToast:Ct,successToastMessage:At,lastDeleteAction:_n,handleUndoDelete:ch,handleUndoRoutineDelete:Fb,showDeleteConfirmModal:Jt,todoToDelete:ut,setShowDeleteConfirmModal:Gn,deleteThisOnly:Pb,deleteFromNow:Zb,deleteAll:Wb,showRoutineDeleteModal:Tt,routineToDelete:We,setShowRoutineDeleteModal:Ze,deleteRoutineThisOnly:se,deleteRoutineFromNow:Ce,deleteRoutineAll:Oe,showTodoHistoryModal:E,selectedTodoForModal:b,todoHistory:O,expandedHistoryIds:x,toggleHistoryDetail:D,handleCloseTodoHistoryModal:N,formatDate:ql,formatDateOnly:rs,showTodoRoutineSetupModal:P,routines:C,routineDaysForModal:F,isEditingRoutineInModal:Z,routineTimeSlotForModal:ae,handleToggleRoutineDayInModal:ct,setRoutineTimeSlotForModal:V,setRoutineDaysForModal:M,setIsEditingRoutineInModal:ee,handleCreateRoutineFromTodo:be,handleCloseTodoRoutineSetupModal:Ee,onRoutineRemoveSuccess:e_,showRoutineRemoveToast:p,handleUndoRoutineRemove:t_,showRoutineModal:k,handleCloseRoutine:Y,routineInput:K,setRoutineInput:L,isAddingRoutine:fe,selectedDays:A,handleToggleDay:te,selectedTimeSlot:G,setSelectedTimeSlot:X,handleAddRoutine:he,editingRoutineId:Q,editingRoutineText:Pe,setEditingRoutineText:_e,editingRoutineDays:qe,handleToggleEditDay:xe,handleStartEditRoutine:me,handleSaveEditRoutine:ke,handleCancelEditRoutine:Me,handleDeleteRoutine:J,fetchRoutineHistory:H,showRoutineHistory:Ve,handleCloseRoutineHistory:I,selectedRoutineForHistory:Le,routineHistoryData:Ge,showMemoModal:l_,setShowMemoModal:xh,memoContent:o_,setMemoContent:c_,isSavingMemo:u_,showGanttChart:wh,handleCloseGanttChart:r_,ganttData:n_,ganttPeriod:Sh,setGanttPeriod:a_,showEncouragementModal:h_,setShowEncouragementModal:Eh,encouragementMessages:f_,newEncouragementMessage:m_,setNewEncouragementMessage:g_,addEncouragementMessage:E_,editingEncouragementId:v_,editingEncouragementText:p_,setEditingEncouragementId:y_,setEditingEncouragementText:b_,updateEncouragementMessage:T_,deleteEncouragementMessage:j_,showAddSectionModal:N_,setShowAddSectionModal:jh,handleAddSection:K_,showHiddenSectionsModal:L_,setShowHiddenSectionsModal:Bh,hiddenSections:si,sectionOrder:ri,sectionTitles:cl,customSections:aa,handleShowSection:H_})]})]})}Kx.createRoot(document.getElementById("root")).render(c.jsx(_.StrictMode,{children:c.jsx(WO,{})}));

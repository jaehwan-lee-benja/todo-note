function L_(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(a,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ev(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var i=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,i.get?i:{enumerable:!0,get:function(){return e[a]}})}),n}var nv={exports:{}},ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_=Symbol.for("react.transitional.element"),H_=Symbol.for("react.fragment");function av(e,t,n){var a=null;if(n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),"key"in t){n={};for(var i in t)i!=="key"&&(n[i]=t[i])}else n=t;return t=n.ref,{$$typeof:B_,type:e,key:a,ref:t!==void 0?t:null,props:n}}ec.Fragment=H_;ec.jsx=av;ec.jsxs=av;nv.exports=ec;var u=nv.exports,iv={exports:{}},be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd=Symbol.for("react.transitional.element"),q_=Symbol.for("react.portal"),$_=Symbol.for("react.fragment"),I_=Symbol.for("react.strict_mode"),V_=Symbol.for("react.profiler"),Y_=Symbol.for("react.consumer"),G_=Symbol.for("react.context"),K_=Symbol.for("react.forward_ref"),X_=Symbol.for("react.suspense"),Q_=Symbol.for("react.memo"),sv=Symbol.for("react.lazy"),J_=Symbol.for("react.activity"),kh=Symbol.iterator;function P_(e){return e===null||typeof e!="object"?null:(e=kh&&e[kh]||e["@@iterator"],typeof e=="function"?e:null)}var rv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lv=Object.assign,ov={};function Ms(e,t,n){this.props=e,this.context=t,this.refs=ov,this.updater=n||rv}Ms.prototype.isReactComponent={};Ms.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ms.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cv(){}cv.prototype=Ms.prototype;function Pd(e,t,n){this.props=e,this.context=t,this.refs=ov,this.updater=n||rv}var Zd=Pd.prototype=new cv;Zd.constructor=Pd;lv(Zd,Ms.prototype);Zd.isPureReactComponent=!0;var Uh=Array.isArray;function ku(){}var et={H:null,A:null,T:null,S:null},uv=Object.prototype.hasOwnProperty;function Fd(e,t,n){var a=n.ref;return{$$typeof:Jd,type:e,key:t,ref:a!==void 0?a:null,props:n}}function Z_(e,t){return Fd(e.type,t,e.props)}function Wd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jd}function F_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var zh=/\/+/g;function kc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?F_(""+e.key):t.toString(36)}function W_(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(ku,ku):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ki(e,t,n,a,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(s){case"bigint":case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case Jd:case q_:r=!0;break;case sv:return r=e._init,Ki(r(e._payload),t,n,a,i)}}if(r)return i=i(e),r=a===""?"."+kc(e,0):a,Uh(i)?(n="",r!=null&&(n=r.replace(zh,"$&/")+"/"),Ki(i,t,n,"",function(c){return c})):i!=null&&(Wd(i)&&(i=Z_(i,n+(i.key==null||e&&e.key===i.key?"":(""+i.key).replace(zh,"$&/")+"/")+r)),t.push(i)),1;r=0;var l=a===""?".":a+":";if(Uh(e))for(var o=0;o<e.length;o++)a=e[o],s=l+kc(a,o),r+=Ki(a,t,n,s,i);else if(o=P_(e),typeof o=="function")for(e=o.call(e),o=0;!(a=e.next()).done;)a=a.value,s=l+kc(a,o++),r+=Ki(a,t,n,s,i);else if(s==="object"){if(typeof e.then=="function")return Ki(W_(e),t,n,a,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function xl(e,t,n){if(e==null)return e;var a=[],i=0;return Ki(e,a,"","",function(s){return t.call(n,s,i++)}),a}function ew(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Lh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},tw={map:xl,forEach:function(e,t,n){xl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xl(e,function(){t++}),t},toArray:function(e){return xl(e,function(t){return t})||[]},only:function(e){if(!Wd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};be.Activity=J_;be.Children=tw;be.Component=Ms;be.Fragment=$_;be.Profiler=V_;be.PureComponent=Pd;be.StrictMode=I_;be.Suspense=X_;be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=et;be.__COMPILER_RUNTIME={__proto__:null,c:function(e){return et.H.useMemoCache(e)}};be.cache=function(e){return function(){return e.apply(null,arguments)}};be.cacheSignal=function(){return null};be.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var a=lv({},e.props),i=e.key;if(t!=null)for(s in t.key!==void 0&&(i=""+t.key),t)!uv.call(t,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&t.ref===void 0||(a[s]=t[s]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var r=Array(s),l=0;l<s;l++)r[l]=arguments[l+2];a.children=r}return Fd(e.type,i,a)};be.createContext=function(e){return e={$$typeof:G_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:Y_,_context:e},e};be.createElement=function(e,t,n){var a,i={},s=null;if(t!=null)for(a in t.key!==void 0&&(s=""+t.key),t)uv.call(t,a)&&a!=="key"&&a!=="__self"&&a!=="__source"&&(i[a]=t[a]);var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){for(var l=Array(r),o=0;o<r;o++)l[o]=arguments[o+2];i.children=l}if(e&&e.defaultProps)for(a in r=e.defaultProps,r)i[a]===void 0&&(i[a]=r[a]);return Fd(e,s,i)};be.createRef=function(){return{current:null}};be.forwardRef=function(e){return{$$typeof:K_,render:e}};be.isValidElement=Wd;be.lazy=function(e){return{$$typeof:sv,_payload:{_status:-1,_result:e},_init:ew}};be.memo=function(e,t){return{$$typeof:Q_,type:e,compare:t===void 0?null:t}};be.startTransition=function(e){var t=et.T,n={};et.T=n;try{var a=e(),i=et.S;i!==null&&i(n,a),typeof a=="object"&&a!==null&&typeof a.then=="function"&&a.then(ku,Lh)}catch(s){Lh(s)}finally{t!==null&&n.types!==null&&(t.types=n.types),et.T=t}};be.unstable_useCacheRefresh=function(){return et.H.useCacheRefresh()};be.use=function(e){return et.H.use(e)};be.useActionState=function(e,t,n){return et.H.useActionState(e,t,n)};be.useCallback=function(e,t){return et.H.useCallback(e,t)};be.useContext=function(e){return et.H.useContext(e)};be.useDebugValue=function(){};be.useDeferredValue=function(e,t){return et.H.useDeferredValue(e,t)};be.useEffect=function(e,t){return et.H.useEffect(e,t)};be.useEffectEvent=function(e){return et.H.useEffectEvent(e)};be.useId=function(){return et.H.useId()};be.useImperativeHandle=function(e,t,n){return et.H.useImperativeHandle(e,t,n)};be.useInsertionEffect=function(e,t){return et.H.useInsertionEffect(e,t)};be.useLayoutEffect=function(e,t){return et.H.useLayoutEffect(e,t)};be.useMemo=function(e,t){return et.H.useMemo(e,t)};be.useOptimistic=function(e,t){return et.H.useOptimistic(e,t)};be.useReducer=function(e,t,n){return et.H.useReducer(e,t,n)};be.useRef=function(e){return et.H.useRef(e)};be.useState=function(e){return et.H.useState(e)};be.useSyncExternalStore=function(e,t,n){return et.H.useSyncExternalStore(e,t,n)};be.useTransition=function(){return et.H.useTransition()};be.version="19.2.0";iv.exports=be;var _=iv.exports;const st=ev(_);var dv={exports:{}},tc={},fv={exports:{}},hv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,q){var K=C.length;C.push(q);e:for(;0<K;){var me=K-1>>>1,J=C[me];if(0<i(J,q))C[me]=q,C[K]=J,K=me;else break e}}function n(C){return C.length===0?null:C[0]}function a(C){if(C.length===0)return null;var q=C[0],K=C.pop();if(K!==q){C[0]=K;e:for(var me=0,J=C.length,rt=J>>>1;me<rt;){var De=2*(me+1)-1,Qe=C[De],ze=De+1,He=C[ze];if(0>i(Qe,K))ze<J&&0>i(He,Qe)?(C[me]=He,C[ze]=K,me=ze):(C[me]=Qe,C[De]=K,me=De);else if(ze<J&&0>i(He,K))C[me]=He,C[ze]=K,me=ze;else break e}}return q}function i(C,q){var K=C.sortIndex-q.sortIndex;return K!==0?K:C.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var r=Date,l=r.now();e.unstable_now=function(){return r.now()-l}}var o=[],c=[],d=1,f=null,h=3,m=!1,v=!1,b=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;function S(C){for(var q=n(c);q!==null;){if(q.callback===null)a(c);else if(q.startTime<=C)a(c),q.sortIndex=q.expirationTime,t(o,q);else break;q=n(c)}}function x(C){if(b=!1,S(C),!v)if(n(o)!==null)v=!0,j||(j=!0,G());else{var q=n(c);q!==null&&z(x,q.startTime-C)}}var j=!1,T=-1,E=5,A=-1;function M(){return w?!0:!(e.unstable_now()-A<E)}function P(){if(w=!1,j){var C=e.unstable_now();A=C;var q=!0;try{e:{v=!1,b&&(b=!1,g(T),T=-1),m=!0;var K=h;try{t:{for(S(C),f=n(o);f!==null&&!(f.expirationTime>C&&M());){var me=f.callback;if(typeof me=="function"){f.callback=null,h=f.priorityLevel;var J=me(f.expirationTime<=C);if(C=e.unstable_now(),typeof J=="function"){f.callback=J,S(C),q=!0;break t}f===n(o)&&a(o),S(C)}else a(o);f=n(o)}if(f!==null)q=!0;else{var rt=n(c);rt!==null&&z(x,rt.startTime-C),q=!1}}break e}finally{f=null,h=K,m=!1}q=void 0}}finally{q?G():j=!1}}}var G;if(typeof p=="function")G=function(){p(P)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,re=Q.port2;Q.port1.onmessage=P,G=function(){re.postMessage(null)}}else G=function(){y(P,0)};function z(C,q){T=y(function(){C(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(C){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var K=h;h=q;try{return C()}finally{h=K}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(C,q){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var K=h;h=C;try{return q()}finally{h=K}},e.unstable_scheduleCallback=function(C,q,K){var me=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?me+K:me):K=me,C){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=K+J,C={id:d++,callback:q,priorityLevel:C,startTime:K,expirationTime:J,sortIndex:-1},K>me?(C.sortIndex=K,t(c,C),n(o)===null&&C===n(c)&&(b?(g(T),T=-1):b=!0,z(x,K-me))):(C.sortIndex=J,t(o,C),v||m||(v=!0,j||(j=!0,G()))),C},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(C){var q=h;return function(){var K=h;h=q;try{return C.apply(this,arguments)}finally{h=K}}}})(hv);fv.exports=hv;var nw=fv.exports,mv={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw=_;function gv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ta(){}var Pt={d:{f:Ta,r:function(){throw Error(gv(522))},D:Ta,C:Ta,L:Ta,m:Ta,X:Ta,S:Ta,M:Ta},p:0,findDOMNode:null},iw=Symbol.for("react.portal");function sw(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:iw,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}var dr=aw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function nc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pt;Zt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(gv(299));return sw(e,t,null,n)};Zt.flushSync=function(e){var t=dr.T,n=Pt.p;try{if(dr.T=null,Pt.p=2,e)return e()}finally{dr.T=t,Pt.p=n,Pt.d.f()}};Zt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Pt.d.C(e,t))};Zt.prefetchDNS=function(e){typeof e=="string"&&Pt.d.D(e)};Zt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,a=nc(n,t.crossOrigin),i=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Pt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:a,integrity:i,fetchPriority:s}):n==="script"&&Pt.d.X(e,{crossOrigin:a,integrity:i,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Zt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=nc(t.as,t.crossOrigin);Pt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Pt.d.M(e)};Zt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,a=nc(n,t.crossOrigin);Pt.d.L(e,n,{crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Zt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=nc(t.as,t.crossOrigin);Pt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Pt.d.m(e)};Zt.requestFormReset=function(e){Pt.d.r(e)};Zt.unstable_batchedUpdates=function(e,t){return e(t)};Zt.useFormState=function(e,t,n){return dr.H.useFormState(e,t,n)};Zt.useFormStatus=function(){return dr.H.useHostTransitionStatus()};Zt.version="19.2.0";function vv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vv)}catch(e){console.error(e)}}vv(),mv.exports=Zt;var yi=mv.exports;const Uu=ev(yi);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt=nw,yv=_,rw=yi;function N(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function pv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _v(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bh(e){if(Pr(e)!==e)throw Error(N(188))}function lw(e){var t=e.alternate;if(!t){if(t=Pr(e),t===null)throw Error(N(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(a=i.return,a!==null){n=a;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Bh(i),e;if(s===a)return Bh(i),t;s=s.sibling}throw Error(N(188))}if(n.return!==a.return)n=i,a=s;else{for(var r=!1,l=i.child;l;){if(l===n){r=!0,n=i,a=s;break}if(l===a){r=!0,a=i,n=s;break}l=l.sibling}if(!r){for(l=s.child;l;){if(l===n){r=!0,n=s,a=i;break}if(l===a){r=!0,a=s,n=i;break}l=l.sibling}if(!r)throw Error(N(189))}}if(n.alternate!==a)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?e:t}function wv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=wv(e),t!==null)return t;e=e.sibling}return null}var tt=Object.assign,ow=Symbol.for("react.element"),Tl=Symbol.for("react.transitional.element"),sr=Symbol.for("react.portal"),Fi=Symbol.for("react.fragment"),Sv=Symbol.for("react.strict_mode"),zu=Symbol.for("react.profiler"),xv=Symbol.for("react.consumer"),fa=Symbol.for("react.context"),ef=Symbol.for("react.forward_ref"),Lu=Symbol.for("react.suspense"),Bu=Symbol.for("react.suspense_list"),tf=Symbol.for("react.memo"),ja=Symbol.for("react.lazy"),Hu=Symbol.for("react.activity"),cw=Symbol.for("react.memo_cache_sentinel"),Hh=Symbol.iterator;function Ps(e){return e===null||typeof e!="object"?null:(e=Hh&&e[Hh]||e["@@iterator"],typeof e=="function"?e:null)}var uw=Symbol.for("react.client.reference");function qu(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===uw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fi:return"Fragment";case zu:return"Profiler";case Sv:return"StrictMode";case Lu:return"Suspense";case Bu:return"SuspenseList";case Hu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case sr:return"Portal";case fa:return e.displayName||"Context";case xv:return(e._context.displayName||"Context")+".Consumer";case ef:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tf:return t=e.displayName||null,t!==null?t:qu(e.type)||"Memo";case ja:t=e._payload,e=e._init;try{return qu(e(t))}catch{}}return null}var rr=Array.isArray,he=yv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Be=rw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bi={pending:!1,data:null,method:null,action:null},$u=[],Wi=-1;function ta(e){return{current:e}}function Mt(e){0>Wi||(e.current=$u[Wi],$u[Wi]=null,Wi--)}function Ze(e,t){Wi++,$u[Wi]=e.current,e.current=t}var ea=ta(null),Cr=ta(null),qa=ta(null),ho=ta(null);function mo(e,t){switch(Ze(qa,t),Ze(Cr,e),Ze(ea,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Gm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Gm(t),e=Vp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Mt(ea),Ze(ea,e)}function bs(){Mt(ea),Mt(Cr),Mt(qa)}function Iu(e){e.memoizedState!==null&&Ze(ho,e);var t=ea.current,n=Vp(t,e.type);t!==n&&(Ze(Cr,e),Ze(ea,n))}function go(e){Cr.current===e&&(Mt(ea),Mt(Cr)),ho.current===e&&(Mt(ho),Ir._currentValue=bi)}var Uc,qh;function ci(e){if(Uc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Uc=t&&t[1]||"",qh=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Uc+e+qh}var zc=!1;function Lc(e,t){if(!e||zc)return"";zc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(m){var h=m}Reflect.construct(e,[],f)}else{try{f.call()}catch(m){h=m}e.call(f.prototype)}}else{try{throw Error()}catch(m){h=m}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(m){if(m&&h&&typeof m.stack=="string")return[m.stack,h.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=a.DetermineComponentFrameRoot(),r=s[0],l=s[1];if(r&&l){var o=r.split(`
`),c=l.split(`
`);for(i=a=0;a<o.length&&!o[a].includes("DetermineComponentFrameRoot");)a++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(a===o.length||i===c.length)for(a=o.length-1,i=c.length-1;1<=a&&0<=i&&o[a]!==c[i];)i--;for(;1<=a&&0<=i;a--,i--)if(o[a]!==c[i]){if(a!==1||i!==1)do if(a--,i--,0>i||o[a]!==c[i]){var d=`
`+o[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=a&&0<=i);break}}}finally{zc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ci(n):""}function dw(e,t){switch(e.tag){case 26:case 27:case 5:return ci(e.type);case 16:return ci("Lazy");case 13:return e.child!==t&&t!==null?ci("Suspense Fallback"):ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return Lc(e.type,!1);case 11:return Lc(e.type.render,!1);case 1:return Lc(e.type,!0);case 31:return ci("Activity");default:return""}}function $h(e){try{var t="",n=null;do t+=dw(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Vu=Object.prototype.hasOwnProperty,nf=Dt.unstable_scheduleCallback,Bc=Dt.unstable_cancelCallback,fw=Dt.unstable_shouldYield,hw=Dt.unstable_requestPaint,gn=Dt.unstable_now,mw=Dt.unstable_getCurrentPriorityLevel,Tv=Dt.unstable_ImmediatePriority,Ev=Dt.unstable_UserBlockingPriority,vo=Dt.unstable_NormalPriority,gw=Dt.unstable_LowPriority,jv=Dt.unstable_IdlePriority,vw=Dt.log,yw=Dt.unstable_setDisableYieldValue,Zr=null,vn=null;function ka(e){if(typeof vw=="function"&&yw(e),vn&&typeof vn.setStrictMode=="function")try{vn.setStrictMode(Zr,e)}catch{}}var yn=Math.clz32?Math.clz32:_w,pw=Math.log,bw=Math.LN2;function _w(e){return e>>>=0,e===0?32:31-(pw(e)/bw|0)|0}var El=256,jl=262144,Ol=4194304;function ui(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ac(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var i=0,s=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var l=a&134217727;return l!==0?(a=l&~s,a!==0?i=ui(a):(r&=l,r!==0?i=ui(r):n||(n=l&~e,n!==0&&(i=ui(n))))):(l=a&~s,l!==0?i=ui(l):r!==0?i=ui(r):n||(n=a&~e,n!==0&&(i=ui(n)))),i===0?0:t!==0&&t!==i&&!(t&s)&&(s=i&-i,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:i}function Fr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ww(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ov(){var e=Ol;return Ol<<=1,!(Ol&62914560)&&(Ol=4194304),e}function Hc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Wr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Sw(e,t,n,a,i,s){var r=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(n=r&~n;0<n;){var d=31-yn(n),f=1<<d;l[d]=0,o[d]=-1;var h=c[d];if(h!==null)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];m!==null&&(m.lane&=-536870913)}n&=~f}a!==0&&Av(e,a,0),s!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=s&~(r&~t))}function Av(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-yn(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function Dv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-yn(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}function Nv(e,t){var n=t&-t;return n=n&42?1:af(n),n&(e.suspendedLanes|t)?0:n}function af(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function sf(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Cv(){var e=Be.p;return e!==0?e:(e=window.event,e===void 0?32:e0(e.type))}function Ih(e,t){var n=Be.p;try{return Be.p=e,t()}finally{Be.p=n}}var ei=Math.random().toString(36).slice(2),Ht="__reactFiber$"+ei,rn="__reactProps$"+ei,ks="__reactContainer$"+ei,Yu="__reactEvents$"+ei,xw="__reactListeners$"+ei,Tw="__reactHandles$"+ei,Vh="__reactResources$"+ei,el="__reactMarker$"+ei;function rf(e){delete e[Ht],delete e[rn],delete e[Yu],delete e[xw],delete e[Tw]}function es(e){var t=e[Ht];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ks]||n[Ht]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pm(e);e!==null;){if(n=e[Ht])return n;e=Pm(e)}return t}e=n,n=e.parentNode}return null}function Us(e){if(e=e[Ht]||e[ks]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function lr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(N(33))}function us(e){var t=e[Vh];return t||(t=e[Vh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Rt(e){e[el]=!0}var Rv=new Set,Mv={};function Di(e,t){_s(e,t),_s(e+"Capture",t)}function _s(e,t){for(Mv[e]=t,e=0;e<t.length;e++)Rv.add(t[e])}var Ew=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yh={},Gh={};function jw(e){return Vu.call(Gh,e)?!0:Vu.call(Yh,e)?!1:Ew.test(e)?Gh[e]=!0:(Yh[e]=!0,!1)}function Pl(e,t,n){if(jw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Al(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function aa(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function An(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ow(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var i=a.get,s=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(r){n=""+r,s.call(this,r)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gu(e){if(!e._valueTracker){var t=kv(e)?"checked":"value";e._valueTracker=Ow(e,t,""+e[t])}}function Uv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=kv(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function yo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Aw=/[\n"\\]/g;function Cn(e){return e.replace(Aw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ku(e,t,n,a,i,s,r,l){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+An(t)):e.value!==""+An(t)&&(e.value=""+An(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?Xu(e,r,An(t)):n!=null?Xu(e,r,An(n)):a!=null&&e.removeAttribute("value"),i==null&&s!=null&&(e.defaultChecked=!!s),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+An(l):e.removeAttribute("name")}function zv(e,t,n,a,i,s,r,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){Gu(e);return}n=n!=null?""+An(n):"",t=t!=null?""+An(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}a=a??i,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=l?e.checked:!!a,e.defaultChecked=!!a,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),Gu(e)}function Xu(e,t,n){t==="number"&&yo(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ds(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+An(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,a&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Lv(e,t,n){if(t!=null&&(t=""+An(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+An(n):""}function Bv(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(N(92));if(rr(a)){if(1<a.length)throw Error(N(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=An(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),Gu(e)}function ws(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Dw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kh(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Dw.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Hv(e,t,n){if(t!=null&&typeof t!="object")throw Error(N(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var i in t)a=t[i],t.hasOwnProperty(i)&&n[i]!==a&&Kh(e,i,a)}else for(var s in t)t.hasOwnProperty(s)&&Kh(e,s,t[s])}function lf(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zl(e){return Cw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ha(){}var Qu=null;function of(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ts=null,fs=null;function Xh(e){var t=Us(e);if(t&&(e=t.stateNode)){var n=e[rn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ku(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Cn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=a[rn]||null;if(!i)throw Error(N(90));Ku(a,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Uv(a)}break e;case"textarea":Lv(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ds(e,!!n.multiple,t,!1)}}}var qc=!1;function qv(e,t,n){if(qc)return e(t,n);qc=!0;try{var a=e(t);return a}finally{if(qc=!1,(ts!==null||fs!==null)&&(gc(),ts&&(t=ts,e=fs,fs=ts=null,Xh(t),e)))for(t=0;t<e.length;t++)Xh(e[t])}}function Rr(e,t){var n=e.stateNode;if(n===null)return null;var a=n[rn]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(N(231,t,typeof n));return n}var pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ju=!1;if(pa)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){Ju=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{Ju=!1}var Ua=null,cf=null,Fl=null;function $v(){if(Fl)return Fl;var e,t=cf,n=t.length,a,i="value"in Ua?Ua.value:Ua.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var r=n-e;for(a=1;a<=r&&t[n-a]===i[s-a];a++);return Fl=i.slice(e,1<a?1-a:void 0)}function Wl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dl(){return!0}function Qh(){return!1}function ln(e){function t(n,a,i,s,r){this._reactName=n,this._targetInst=i,this.type=a,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Dl:Qh,this.isPropagationStopped=Qh,this}return tt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dl)},persist:function(){},isPersistent:Dl}),t}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ic=ln(Ni),tl=tt({},Ni,{view:0,detail:0}),Rw=ln(tl),$c,Ic,Fs,sc=tt({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fs&&(Fs&&e.type==="mousemove"?($c=e.screenX-Fs.screenX,Ic=e.screenY-Fs.screenY):Ic=$c=0,Fs=e),$c)},movementY:function(e){return"movementY"in e?e.movementY:Ic}}),Jh=ln(sc),Mw=tt({},sc,{dataTransfer:0}),kw=ln(Mw),Uw=tt({},tl,{relatedTarget:0}),Vc=ln(Uw),zw=tt({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Lw=ln(zw),Bw=tt({},Ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hw=ln(Bw),qw=tt({},Ni,{data:0}),Ph=ln(qw),$w={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vw[e])?!!t[e]:!1}function uf(){return Yw}var Gw=tt({},tl,{key:function(e){if(e.key){var t=$w[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Iw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uf,charCode:function(e){return e.type==="keypress"?Wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kw=ln(Gw),Xw=tt({},sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zh=ln(Xw),Qw=tt({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uf}),Jw=ln(Qw),Pw=tt({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zw=ln(Pw),Fw=tt({},sc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ww=ln(Fw),eS=tt({},Ni,{newState:0,oldState:0}),tS=ln(eS),nS=[9,13,27,32],df=pa&&"CompositionEvent"in window,fr=null;pa&&"documentMode"in document&&(fr=document.documentMode);var aS=pa&&"TextEvent"in window&&!fr,Iv=pa&&(!df||fr&&8<fr&&11>=fr),Fh=" ",Wh=!1;function Vv(e,t){switch(e){case"keyup":return nS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ns=!1;function iS(e,t){switch(e){case"compositionend":return Yv(t);case"keypress":return t.which!==32?null:(Wh=!0,Fh);case"textInput":return e=t.data,e===Fh&&Wh?null:e;default:return null}}function sS(e,t){if(ns)return e==="compositionend"||!df&&Vv(e,t)?(e=$v(),Fl=cf=Ua=null,ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Iv&&t.locale!=="ko"?null:t.data;default:return null}}var rS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function em(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rS[e.type]:t==="textarea"}function Gv(e,t,n,a){ts?fs?fs.push(a):fs=[a]:ts=a,t=Uo(t,"onChange"),0<t.length&&(n=new ic("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var hr=null,Mr=null;function lS(e){qp(e,0)}function rc(e){var t=lr(e);if(Uv(t))return e}function tm(e,t){if(e==="change")return t}var Kv=!1;if(pa){var Yc;if(pa){var Gc="oninput"in document;if(!Gc){var nm=document.createElement("div");nm.setAttribute("oninput","return;"),Gc=typeof nm.oninput=="function"}Yc=Gc}else Yc=!1;Kv=Yc&&(!document.documentMode||9<document.documentMode)}function am(){hr&&(hr.detachEvent("onpropertychange",Xv),Mr=hr=null)}function Xv(e){if(e.propertyName==="value"&&rc(Mr)){var t=[];Gv(t,Mr,e,of(e)),qv(lS,t)}}function oS(e,t,n){e==="focusin"?(am(),hr=t,Mr=n,hr.attachEvent("onpropertychange",Xv)):e==="focusout"&&am()}function cS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rc(Mr)}function uS(e,t){if(e==="click")return rc(t)}function dS(e,t){if(e==="input"||e==="change")return rc(t)}function fS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bn=typeof Object.is=="function"?Object.is:fS;function kr(e,t){if(bn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!Vu.call(t,i)||!bn(e[i],t[i]))return!1}return!0}function im(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sm(e,t){var n=im(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=im(n)}}function Qv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jv(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=yo(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yo(e.document)}return t}function ff(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var hS=pa&&"documentMode"in document&&11>=document.documentMode,as=null,Pu=null,mr=null,Zu=!1;function rm(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zu||as==null||as!==yo(a)||(a=as,"selectionStart"in a&&ff(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),mr&&kr(mr,a)||(mr=a,a=Uo(Pu,"onSelect"),0<a.length&&(t=new ic("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=as)))}function ri(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var is={animationend:ri("Animation","AnimationEnd"),animationiteration:ri("Animation","AnimationIteration"),animationstart:ri("Animation","AnimationStart"),transitionrun:ri("Transition","TransitionRun"),transitionstart:ri("Transition","TransitionStart"),transitioncancel:ri("Transition","TransitionCancel"),transitionend:ri("Transition","TransitionEnd")},Kc={},Pv={};pa&&(Pv=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function Ci(e){if(Kc[e])return Kc[e];if(!is[e])return e;var t=is[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Pv)return Kc[e]=t[n];return e}var Zv=Ci("animationend"),Fv=Ci("animationiteration"),Wv=Ci("animationstart"),mS=Ci("transitionrun"),gS=Ci("transitionstart"),vS=Ci("transitioncancel"),ey=Ci("transitionend"),ty=new Map,Fu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fu.push("scrollEnd");function Gn(e,t){ty.set(e,t),Di(t,[e])}var po=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},jn=[],ss=0,hf=0;function lc(){for(var e=ss,t=hf=ss=0;t<e;){var n=jn[t];jn[t++]=null;var a=jn[t];jn[t++]=null;var i=jn[t];jn[t++]=null;var s=jn[t];if(jn[t++]=null,a!==null&&i!==null){var r=a.pending;r===null?i.next=i:(i.next=r.next,r.next=i),a.pending=i}s!==0&&ny(n,i,s)}}function oc(e,t,n,a){jn[ss++]=e,jn[ss++]=t,jn[ss++]=n,jn[ss++]=a,hf|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function mf(e,t,n,a){return oc(e,t,n,a),bo(e)}function Ri(e,t){return oc(e,null,null,t),bo(e)}function ny(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var i=!1,s=e.return;s!==null;)s.childLanes|=n,a=s.alternate,a!==null&&(a.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(i=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,i&&t!==null&&(i=31-yn(n),e=s.hiddenUpdates,a=e[i],a===null?e[i]=[t]:a.push(t),t.lane=n|536870912),s):null}function bo(e){if(50<xr)throw xr=0,bd=null,Error(N(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var rs={};function yS(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(e,t,n,a){return new yS(e,t,n,a)}function gf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ga(e,t){var n=e.alternate;return n===null?(n=dn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ay(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function eo(e,t,n,a,i,s){var r=0;if(a=e,typeof e=="function")gf(e)&&(r=1);else if(typeof e=="string")r=Sx(e,n,ea.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Hu:return e=dn(31,n,t,i),e.elementType=Hu,e.lanes=s,e;case Fi:return _i(n.children,i,s,t);case Sv:r=8,i|=24;break;case zu:return e=dn(12,n,t,i|2),e.elementType=zu,e.lanes=s,e;case Lu:return e=dn(13,n,t,i),e.elementType=Lu,e.lanes=s,e;case Bu:return e=dn(19,n,t,i),e.elementType=Bu,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fa:r=10;break e;case xv:r=9;break e;case ef:r=11;break e;case tf:r=14;break e;case ja:r=16,a=null;break e}r=29,n=Error(N(130,e===null?"null":typeof e,"")),a=null}return t=dn(r,n,t,i),t.elementType=e,t.type=a,t.lanes=s,t}function _i(e,t,n,a){return e=dn(7,e,a,t),e.lanes=n,e}function Xc(e,t,n){return e=dn(6,e,null,t),e.lanes=n,e}function iy(e){var t=dn(18,null,null,0);return t.stateNode=e,t}function Qc(e,t,n){return t=dn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var lm=new WeakMap;function Rn(e,t){if(typeof e=="object"&&e!==null){var n=lm.get(e);return n!==void 0?n:(t={value:e,source:t,stack:$h(t)},lm.set(e,t),t)}return{value:e,source:t,stack:$h(t)}}var ls=[],os=0,_o=null,Ur=0,Dn=[],Nn=0,Ja=null,Zn=1,Fn="";function ua(e,t){ls[os++]=Ur,ls[os++]=_o,_o=e,Ur=t}function sy(e,t,n){Dn[Nn++]=Zn,Dn[Nn++]=Fn,Dn[Nn++]=Ja,Ja=e;var a=Zn;e=Fn;var i=32-yn(a)-1;a&=~(1<<i),n+=1;var s=32-yn(t)+i;if(30<s){var r=i-i%5;s=(a&(1<<r)-1).toString(32),a>>=r,i-=r,Zn=1<<32-yn(t)+i|n<<i|a,Fn=s+e}else Zn=1<<s|n<<i|a,Fn=e}function vf(e){e.return!==null&&(ua(e,1),sy(e,1,0))}function yf(e){for(;e===_o;)_o=ls[--os],ls[os]=null,Ur=ls[--os],ls[os]=null;for(;e===Ja;)Ja=Dn[--Nn],Dn[Nn]=null,Fn=Dn[--Nn],Dn[Nn]=null,Zn=Dn[--Nn],Dn[Nn]=null}function ry(e,t){Dn[Nn++]=Zn,Dn[Nn++]=Fn,Dn[Nn++]=Ja,Zn=t.id,Fn=t.overflow,Ja=e}var qt=null,We=null,Re=!1,$a=null,Mn=!1,Wu=Error(N(519));function Pa(e){var t=Error(N(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zr(Rn(t,e)),Wu}function om(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Ht]=e,t[rn]=a,n){case"dialog":Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":case"embed":Oe("load",t);break;case"video":case"audio":for(n=0;n<qr.length;n++)Oe(qr[n],t);break;case"source":Oe("error",t);break;case"img":case"image":case"link":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"input":Oe("invalid",t),zv(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Oe("invalid",t);break;case"textarea":Oe("invalid",t),Bv(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||Ip(t.textContent,n)?(a.popover!=null&&(Oe("beforetoggle",t),Oe("toggle",t)),a.onScroll!=null&&Oe("scroll",t),a.onScrollEnd!=null&&Oe("scrollend",t),a.onClick!=null&&(t.onclick=ha),t=!0):t=!1,t||Pa(e,!0)}function cm(e){for(qt=e.return;qt;)switch(qt.tag){case 5:case 31:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:qt=qt.return}}function Bi(e){if(e!==qt)return!1;if(!Re)return cm(e),Re=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Td(e.type,e.memoizedProps)),n=!n),n&&We&&Pa(e),cm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));We=Jm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));We=Jm(e)}else t===27?(t=We,ti(e.type)?(e=Ad,Ad=null,We=e):We=t):We=qt?Un(e.stateNode.nextSibling):null;return!0}function Ti(){We=qt=null,Re=!1}function Jc(){var e=$a;return e!==null&&(an===null?an=e:an.push.apply(an,e),$a=null),e}function zr(e){$a===null?$a=[e]:$a.push(e)}var ed=ta(null),Mi=null,ma=null;function Da(e,t,n){Ze(ed,t._currentValue),t._currentValue=n}function va(e){e._currentValue=ed.current,Mt(ed)}function td(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function nd(e,t,n,a){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){var r=i.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=i;for(var o=0;o<t.length;o++)if(l.context===t[o]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),td(s.return,n,e),a||(r=null);break e}s=l.next}}else if(i.tag===18){if(r=i.return,r===null)throw Error(N(341));r.lanes|=n,s=r.alternate,s!==null&&(s.lanes|=n),td(r,n,e),r=null}else r=i.child;if(r!==null)r.return=i;else for(r=i;r!==null;){if(r===e){r=null;break}if(i=r.sibling,i!==null){i.return=r.return,r=i;break}r=r.return}i=r}}function zs(e,t,n,a){e=null;for(var i=t,s=!1;i!==null;){if(!s){if(i.flags&524288)s=!0;else if(i.flags&262144)break}if(i.tag===10){var r=i.alternate;if(r===null)throw Error(N(387));if(r=r.memoizedProps,r!==null){var l=i.type;bn(i.pendingProps.value,r.value)||(e!==null?e.push(l):e=[l])}}else if(i===ho.current){if(r=i.alternate,r===null)throw Error(N(387));r.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Ir):e=[Ir])}i=i.return}e!==null&&nd(t,e,n,a),t.flags|=262144}function wo(e){for(e=e.firstContext;e!==null;){if(!bn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ei(e){Mi=e,ma=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $t(e){return ly(Mi,e)}function Nl(e,t){return Mi===null&&Ei(e),ly(e,t)}function ly(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ma===null){if(e===null)throw Error(N(308));ma=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ma=ma.next=t;return n}var pS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},bS=Dt.unstable_scheduleCallback,_S=Dt.unstable_NormalPriority,xt={$$typeof:fa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pf(){return{controller:new pS,data:new Map,refCount:0}}function nl(e){e.refCount--,e.refCount===0&&bS(_S,function(){e.controller.abort()})}var gr=null,ad=0,Ss=0,hs=null;function wS(e,t){if(gr===null){var n=gr=[];ad=0,Ss=Vf(),hs={status:"pending",value:void 0,then:function(a){n.push(a)}}}return ad++,t.then(um,um),t}function um(){if(--ad===0&&gr!==null){hs!==null&&(hs.status="fulfilled");var e=gr;gr=null,Ss=0,hs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function SS(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var i=0;i<n.length;i++)(0,n[i])(t)},function(i){for(a.status="rejected",a.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),a}var dm=he.S;he.S=function(e,t){wp=gn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&wS(e,t),dm!==null&&dm(e,t)};var wi=ta(null);function bf(){var e=wi.current;return e!==null?e:Xe.pooledCache}function to(e,t){t===null?Ze(wi,wi.current):Ze(wi,t.pool)}function oy(){var e=bf();return e===null?null:{parent:xt._currentValue,pool:e}}var Ls=Error(N(460)),_f=Error(N(474)),cc=Error(N(542)),So={then:function(){}};function fm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cy(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ha,ha),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mm(e),e;default:if(typeof t.status=="string")t.then(ha,ha);else{if(e=Xe,e!==null&&100<e.shellSuspendCounter)throw Error(N(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=a}},function(a){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mm(e),e}throw Si=t,Ls}}function di(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Si=n,Ls):n}}var Si=null;function hm(){if(Si===null)throw Error(N(459));var e=Si;return Si=null,e}function mm(e){if(e===Ls||e===cc)throw Error(N(483))}var ms=null,Lr=0;function Cl(e){var t=Lr;return Lr+=1,ms===null&&(ms=[]),cy(ms,e,t)}function Ws(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Rl(e,t){throw t.$$typeof===ow?Error(N(525)):(e=Object.prototype.toString.call(t),Error(N(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function uy(e){function t(y,g){if(e){var p=y.deletions;p===null?(y.deletions=[g],y.flags|=16):p.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function a(y){for(var g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(y,g){return y=ga(y,g),y.index=0,y.sibling=null,y}function s(y,g,p){return y.index=p,e?(p=y.alternate,p!==null?(p=p.index,p<g?(y.flags|=67108866,g):p):(y.flags|=67108866,g)):(y.flags|=1048576,g)}function r(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function l(y,g,p,S){return g===null||g.tag!==6?(g=Xc(p,y.mode,S),g.return=y,g):(g=i(g,p),g.return=y,g)}function o(y,g,p,S){var x=p.type;return x===Fi?d(y,g,p.props.children,S,p.key):g!==null&&(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===ja&&di(x)===g.type)?(g=i(g,p.props),Ws(g,p),g.return=y,g):(g=eo(p.type,p.key,p.props,null,y.mode,S),Ws(g,p),g.return=y,g)}function c(y,g,p,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==p.containerInfo||g.stateNode.implementation!==p.implementation?(g=Qc(p,y.mode,S),g.return=y,g):(g=i(g,p.children||[]),g.return=y,g)}function d(y,g,p,S,x){return g===null||g.tag!==7?(g=_i(p,y.mode,S,x),g.return=y,g):(g=i(g,p),g.return=y,g)}function f(y,g,p){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=Xc(""+g,y.mode,p),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Tl:return p=eo(g.type,g.key,g.props,null,y.mode,p),Ws(p,g),p.return=y,p;case sr:return g=Qc(g,y.mode,p),g.return=y,g;case ja:return g=di(g),f(y,g,p)}if(rr(g)||Ps(g))return g=_i(g,y.mode,p,null),g.return=y,g;if(typeof g.then=="function")return f(y,Cl(g),p);if(g.$$typeof===fa)return f(y,Nl(y,g),p);Rl(y,g)}return null}function h(y,g,p,S){var x=g!==null?g.key:null;if(typeof p=="string"&&p!==""||typeof p=="number"||typeof p=="bigint")return x!==null?null:l(y,g,""+p,S);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Tl:return p.key===x?o(y,g,p,S):null;case sr:return p.key===x?c(y,g,p,S):null;case ja:return p=di(p),h(y,g,p,S)}if(rr(p)||Ps(p))return x!==null?null:d(y,g,p,S,null);if(typeof p.then=="function")return h(y,g,Cl(p),S);if(p.$$typeof===fa)return h(y,g,Nl(y,p),S);Rl(y,p)}return null}function m(y,g,p,S,x){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return y=y.get(p)||null,l(g,y,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Tl:return y=y.get(S.key===null?p:S.key)||null,o(g,y,S,x);case sr:return y=y.get(S.key===null?p:S.key)||null,c(g,y,S,x);case ja:return S=di(S),m(y,g,p,S,x)}if(rr(S)||Ps(S))return y=y.get(p)||null,d(g,y,S,x,null);if(typeof S.then=="function")return m(y,g,p,Cl(S),x);if(S.$$typeof===fa)return m(y,g,p,Nl(g,S),x);Rl(g,S)}return null}function v(y,g,p,S){for(var x=null,j=null,T=g,E=g=0,A=null;T!==null&&E<p.length;E++){T.index>E?(A=T,T=null):A=T.sibling;var M=h(y,T,p[E],S);if(M===null){T===null&&(T=A);break}e&&T&&M.alternate===null&&t(y,T),g=s(M,g,E),j===null?x=M:j.sibling=M,j=M,T=A}if(E===p.length)return n(y,T),Re&&ua(y,E),x;if(T===null){for(;E<p.length;E++)T=f(y,p[E],S),T!==null&&(g=s(T,g,E),j===null?x=T:j.sibling=T,j=T);return Re&&ua(y,E),x}for(T=a(T);E<p.length;E++)A=m(T,y,E,p[E],S),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?E:A.key),g=s(A,g,E),j===null?x=A:j.sibling=A,j=A);return e&&T.forEach(function(P){return t(y,P)}),Re&&ua(y,E),x}function b(y,g,p,S){if(p==null)throw Error(N(151));for(var x=null,j=null,T=g,E=g=0,A=null,M=p.next();T!==null&&!M.done;E++,M=p.next()){T.index>E?(A=T,T=null):A=T.sibling;var P=h(y,T,M.value,S);if(P===null){T===null&&(T=A);break}e&&T&&P.alternate===null&&t(y,T),g=s(P,g,E),j===null?x=P:j.sibling=P,j=P,T=A}if(M.done)return n(y,T),Re&&ua(y,E),x;if(T===null){for(;!M.done;E++,M=p.next())M=f(y,M.value,S),M!==null&&(g=s(M,g,E),j===null?x=M:j.sibling=M,j=M);return Re&&ua(y,E),x}for(T=a(T);!M.done;E++,M=p.next())M=m(T,y,E,M.value,S),M!==null&&(e&&M.alternate!==null&&T.delete(M.key===null?E:M.key),g=s(M,g,E),j===null?x=M:j.sibling=M,j=M);return e&&T.forEach(function(G){return t(y,G)}),Re&&ua(y,E),x}function w(y,g,p,S){if(typeof p=="object"&&p!==null&&p.type===Fi&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Tl:e:{for(var x=p.key;g!==null;){if(g.key===x){if(x=p.type,x===Fi){if(g.tag===7){n(y,g.sibling),S=i(g,p.props.children),S.return=y,y=S;break e}}else if(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===ja&&di(x)===g.type){n(y,g.sibling),S=i(g,p.props),Ws(S,p),S.return=y,y=S;break e}n(y,g);break}else t(y,g);g=g.sibling}p.type===Fi?(S=_i(p.props.children,y.mode,S,p.key),S.return=y,y=S):(S=eo(p.type,p.key,p.props,null,y.mode,S),Ws(S,p),S.return=y,y=S)}return r(y);case sr:e:{for(x=p.key;g!==null;){if(g.key===x)if(g.tag===4&&g.stateNode.containerInfo===p.containerInfo&&g.stateNode.implementation===p.implementation){n(y,g.sibling),S=i(g,p.children||[]),S.return=y,y=S;break e}else{n(y,g);break}else t(y,g);g=g.sibling}S=Qc(p,y.mode,S),S.return=y,y=S}return r(y);case ja:return p=di(p),w(y,g,p,S)}if(rr(p))return v(y,g,p,S);if(Ps(p)){if(x=Ps(p),typeof x!="function")throw Error(N(150));return p=x.call(p),b(y,g,p,S)}if(typeof p.then=="function")return w(y,g,Cl(p),S);if(p.$$typeof===fa)return w(y,g,Nl(y,p),S);Rl(y,p)}return typeof p=="string"&&p!==""||typeof p=="number"||typeof p=="bigint"?(p=""+p,g!==null&&g.tag===6?(n(y,g.sibling),S=i(g,p),S.return=y,y=S):(n(y,g),S=Xc(p,y.mode,S),S.return=y,y=S),r(y)):n(y,g)}return function(y,g,p,S){try{Lr=0;var x=w(y,g,p,S);return ms=null,x}catch(T){if(T===Ls||T===cc)throw T;var j=dn(29,T,null,y.mode);return j.lanes=S,j.return=y,j}finally{}}}var ji=uy(!0),dy=uy(!1),Oa=!1;function wf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function id(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Va(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Le&2){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,t=bo(e),ny(e,null,n),t}return oc(e,a,t,n),bo(e)}function vr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Dv(e,n)}}function Pc(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?i=s=r:s=s.next=r,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var sd=!1;function yr(){if(sd){var e=hs;if(e!==null)throw e}}function pr(e,t,n,a){sd=!1;var i=e.updateQueue;Oa=!1;var s=i.firstBaseUpdate,r=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var o=l,c=o.next;o.next=null,r===null?s=c:r.next=c,r=o;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==r&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(s!==null){var f=i.baseState;r=0,d=c=o=null,l=s;do{var h=l.lane&-536870913,m=h!==l.lane;if(m?(Ne&h)===h:(a&h)===h){h!==0&&h===Ss&&(sd=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var v=e,b=l;h=t;var w=n;switch(b.tag){case 1:if(v=b.payload,typeof v=="function"){f=v.call(w,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,h=typeof v=="function"?v.call(w,f,h):v,h==null)break e;f=tt({},f,h);break e;case 2:Oa=!0}}h=l.callback,h!==null&&(e.flags|=64,m&&(e.flags|=8192),m=i.callbacks,m===null?i.callbacks=[h]:m.push(h))}else m={lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=m,o=f):d=d.next=m,r|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);d===null&&(o=f),i.baseState=o,i.firstBaseUpdate=c,i.lastBaseUpdate=d,s===null&&(i.shared.lanes=0),Fa|=r,e.lanes=r,e.memoizedState=f}}function fy(e,t){if(typeof e!="function")throw Error(N(191,e));e.call(t)}function hy(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)fy(n[e],t)}var xs=ta(null),xo=ta(0);function gm(e,t){e=Sa,Ze(xo,e),Ze(xs,t),Sa=e|t.baseLanes}function rd(){Ze(xo,Sa),Ze(xs,xs.current)}function Sf(){Sa=xo.current,Mt(xs),Mt(xo)}var _n=ta(null),kn=null;function Na(e){var t=e.alternate;Ze(yt,yt.current&1),Ze(_n,e),kn===null&&(t===null||xs.current!==null||t.memoizedState!==null)&&(kn=e)}function ld(e){Ze(yt,yt.current),Ze(_n,e),kn===null&&(kn=e)}function my(e){e.tag===22?(Ze(yt,yt.current),Ze(_n,e),kn===null&&(kn=e)):Ca()}function Ca(){Ze(yt,yt.current),Ze(_n,_n.current)}function un(e){Mt(_n),kn===e&&(kn=null),Mt(yt)}var yt=ta(0);function To(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||jd(n)||Od(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ba=0,_e=null,Ge=null,wt=null,Eo=!1,gs=!1,Oi=!1,jo=0,Br=0,vs=null,xS=0;function dt(){throw Error(N(321))}function xf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bn(e[n],t[n]))return!1;return!0}function Tf(e,t,n,a,i,s){return ba=s,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,he.H=e===null||e.memoizedState===null?Gy:Uf,Oi=!1,s=n(a,i),Oi=!1,gs&&(s=vy(t,n,a,i)),gy(e),s}function gy(e){he.H=Hr;var t=Ge!==null&&Ge.next!==null;if(ba=0,wt=Ge=_e=null,Eo=!1,Br=0,vs=null,t)throw Error(N(300));e===null||Tt||(e=e.dependencies,e!==null&&wo(e)&&(Tt=!0))}function vy(e,t,n,a){_e=e;var i=0;do{if(gs&&(vs=null),Br=0,gs=!1,25<=i)throw Error(N(301));if(i+=1,wt=Ge=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}he.H=Ky,s=t(n,a)}while(gs);return s}function TS(){var e=he.H,t=e.useState()[0];return t=typeof t.then=="function"?al(t):t,e=e.useState()[0],(Ge!==null?Ge.memoizedState:null)!==e&&(_e.flags|=1024),t}function Ef(){var e=jo!==0;return jo=0,e}function jf(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Of(e){if(Eo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Eo=!1}ba=0,wt=Ge=_e=null,gs=!1,Br=jo=0,vs=null}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?_e.memoizedState=wt=e:wt=wt.next=e,wt}function pt(){if(Ge===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=wt===null?_e.memoizedState:wt.next;if(t!==null)wt=t,Ge=e;else{if(e===null)throw _e.alternate===null?Error(N(467)):Error(N(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},wt===null?_e.memoizedState=wt=e:wt=wt.next=e}return wt}function uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function al(e){var t=Br;return Br+=1,vs===null&&(vs=[]),e=cy(vs,e,t),t=_e,(wt===null?t.memoizedState:wt.next)===null&&(t=t.alternate,he.H=t===null||t.memoizedState===null?Gy:Uf),e}function dc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return al(e);if(e.$$typeof===fa)return $t(e)}throw Error(N(438,String(e)))}function Af(e){var t=null,n=_e.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=_e.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=uc(),_e.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=cw;return t.index++,n}function _a(e,t){return typeof t=="function"?t(e):t}function no(e){var t=pt();return Df(t,Ge,e)}function Df(e,t,n){var a=e.queue;if(a===null)throw Error(N(311));a.lastRenderedReducer=n;var i=e.baseQueue,s=a.pending;if(s!==null){if(i!==null){var r=i.next;i.next=s.next,s.next=r}t.baseQueue=i=s,a.pending=null}if(s=e.baseState,i===null)e.memoizedState=s;else{t=i.next;var l=r=null,o=null,c=t,d=!1;do{var f=c.lane&-536870913;if(f!==c.lane?(Ne&f)===f:(ba&f)===f){var h=c.revertLane;if(h===0)o!==null&&(o=o.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Ss&&(d=!0);else if((ba&h)===h){c=c.next,h===Ss&&(d=!0);continue}else f={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},o===null?(l=o=f,r=s):o=o.next=f,_e.lanes|=h,Fa|=h;f=c.action,Oi&&n(s,f),s=c.hasEagerState?c.eagerState:n(s,f)}else h={lane:f,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},o===null?(l=o=h,r=s):o=o.next=h,_e.lanes|=f,Fa|=f;c=c.next}while(c!==null&&c!==t);if(o===null?r=s:o.next=l,!bn(s,e.memoizedState)&&(Tt=!0,d&&(n=hs,n!==null)))throw n;e.memoizedState=s,e.baseState=r,e.baseQueue=o,a.lastRenderedState=s}return i===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Zc(e){var t=pt(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var r=i=i.next;do s=e(s,r.action),r=r.next;while(r!==i);bn(s,t.memoizedState)||(Tt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,a]}function yy(e,t,n){var a=_e,i=pt(),s=Re;if(s){if(n===void 0)throw Error(N(407));n=n()}else n=t();var r=!bn((Ge||i).memoizedState,n);if(r&&(i.memoizedState=n,Tt=!0),i=i.queue,Nf(_y.bind(null,a,i,e),[e]),i.getSnapshot!==t||r||wt!==null&&wt.memoizedState.tag&1){if(a.flags|=2048,Ts(9,{destroy:void 0},by.bind(null,a,i,n,t),null),Xe===null)throw Error(N(349));s||ba&127||py(a,t,n)}return n}function py(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_e.updateQueue,t===null?(t=uc(),_e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function by(e,t,n,a){t.value=n,t.getSnapshot=a,wy(t)&&Sy(e)}function _y(e,t,n){return n(function(){wy(t)&&Sy(e)})}function wy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bn(e,n)}catch{return!0}}function Sy(e){var t=Ri(e,2);t!==null&&sn(t,e,2)}function od(e){var t=Qt();if(typeof e=="function"){var n=e;if(e=n(),Oi){ka(!0);try{n()}finally{ka(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t}function xy(e,t,n,a){return e.baseState=n,Df(e,Ge,typeof a=="function"?a:_a)}function ES(e,t,n,a,i){if(hc(e))throw Error(N(485));if(e=t.action,e!==null){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){s.listeners.push(r)}};he.T!==null?n(!0):s.isTransition=!1,a(s),n=t.pending,n===null?(s.next=t.pending=s,Ty(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Ty(e,t){var n=t.action,a=t.payload,i=e.state;if(t.isTransition){var s=he.T,r={};he.T=r;try{var l=n(i,a),o=he.S;o!==null&&o(r,l),vm(e,t,l)}catch(c){cd(e,t,c)}finally{s!==null&&r.types!==null&&(s.types=r.types),he.T=s}}else try{s=n(i,a),vm(e,t,s)}catch(c){cd(e,t,c)}}function vm(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){ym(e,t,a)},function(a){return cd(e,t,a)}):ym(e,t,n)}function ym(e,t,n){t.status="fulfilled",t.value=n,Ey(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ty(e,n)))}function cd(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,Ey(t),t=t.next;while(t!==a)}e.action=null}function Ey(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function jy(e,t){return t}function pm(e,t){if(Re){var n=Xe.formState;if(n!==null){e:{var a=_e;if(Re){if(We){t:{for(var i=We,s=Mn;i.nodeType!==8;){if(!s){i=null;break t}if(i=Un(i.nextSibling),i===null){i=null;break t}}s=i.data,i=s==="F!"||s==="F"?i:null}if(i){We=Un(i.nextSibling),a=i.data==="F!";break e}}Pa(a)}a=!1}a&&(t=n[0])}}return n=Qt(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jy,lastRenderedState:t},n.queue=a,n=Iy.bind(null,_e,a),a.dispatch=n,a=od(!1),s=kf.bind(null,_e,!1,a.queue),a=Qt(),i={state:t,dispatch:null,action:e,pending:null},a.queue=i,n=ES.bind(null,_e,i,s,n),i.dispatch=n,a.memoizedState=e,[t,n,!1]}function bm(e){var t=pt();return Oy(t,Ge,e)}function Oy(e,t,n){if(t=Df(e,t,jy)[0],e=no(_a)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=al(t)}catch(r){throw r===Ls?cc:r}else a=t;t=pt();var i=t.queue,s=i.dispatch;return n!==t.memoizedState&&(_e.flags|=2048,Ts(9,{destroy:void 0},jS.bind(null,i,n),null)),[a,s,e]}function jS(e,t){e.action=t}function _m(e){var t=pt(),n=Ge;if(n!==null)return Oy(t,n,e);pt(),t=t.memoizedState,n=pt();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function Ts(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=_e.updateQueue,t===null&&(t=uc(),_e.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Ay(){return pt().memoizedState}function ao(e,t,n,a){var i=Qt();_e.flags|=e,i.memoizedState=Ts(1|t,{destroy:void 0},n,a===void 0?null:a)}function fc(e,t,n,a){var i=pt();a=a===void 0?null:a;var s=i.memoizedState.inst;Ge!==null&&a!==null&&xf(a,Ge.memoizedState.deps)?i.memoizedState=Ts(t,s,n,a):(_e.flags|=e,i.memoizedState=Ts(1|t,s,n,a))}function wm(e,t){ao(8390656,8,e,t)}function Nf(e,t){fc(2048,8,e,t)}function OS(e){_e.flags|=4;var t=_e.updateQueue;if(t===null)t=uc(),_e.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Dy(e){var t=pt().memoizedState;return OS({ref:t,nextImpl:e}),function(){if(Le&2)throw Error(N(440));return t.impl.apply(void 0,arguments)}}function Ny(e,t){return fc(4,2,e,t)}function Cy(e,t){return fc(4,4,e,t)}function Ry(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function My(e,t,n){n=n!=null?n.concat([e]):null,fc(4,4,Ry.bind(null,t,e),n)}function Cf(){}function ky(e,t){var n=pt();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&xf(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Uy(e,t){var n=pt();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&xf(t,a[1]))return a[0];if(a=e(),Oi){ka(!0);try{e()}finally{ka(!1)}}return n.memoizedState=[a,t],a}function Rf(e,t,n){return n===void 0||ba&1073741824&&!(Ne&261930)?e.memoizedState=t:(e.memoizedState=n,e=xp(),_e.lanes|=e,Fa|=e,n)}function zy(e,t,n,a){return bn(n,t)?n:xs.current!==null?(e=Rf(e,n,a),bn(e,t)||(Tt=!0),e):!(ba&42)||ba&1073741824&&!(Ne&261930)?(Tt=!0,e.memoizedState=n):(e=xp(),_e.lanes|=e,Fa|=e,t)}function Ly(e,t,n,a,i){var s=Be.p;Be.p=s!==0&&8>s?s:8;var r=he.T,l={};he.T=l,kf(e,!1,t,n);try{var o=i(),c=he.S;if(c!==null&&c(l,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=SS(o,a);br(e,t,d,pn(e))}else br(e,t,a,pn(e))}catch(f){br(e,t,{then:function(){},status:"rejected",reason:f},pn())}finally{Be.p=s,r!==null&&l.types!==null&&(r.types=l.types),he.T=r}}function AS(){}function ud(e,t,n,a){if(e.tag!==5)throw Error(N(476));var i=By(e).queue;Ly(e,i,t,bi,n===null?AS:function(){return Hy(e),n(a)})}function By(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:bi,baseState:bi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:bi},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Hy(e){var t=By(e);t.next===null&&(t=e.alternate.memoizedState),br(e,t.next.queue,{},pn())}function Mf(){return $t(Ir)}function qy(){return pt().memoizedState}function $y(){return pt().memoizedState}function DS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=pn();e=Ia(n);var a=Va(t,e,n);a!==null&&(sn(a,t,n),vr(a,t,n)),t={cache:pf()},e.payload=t;return}t=t.return}}function NS(e,t,n){var a=pn();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hc(e)?Vy(t,n):(n=mf(e,t,n,a),n!==null&&(sn(n,e,a),Yy(n,t,a)))}function Iy(e,t,n){var a=pn();br(e,t,n,a)}function br(e,t,n,a){var i={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(hc(e))Vy(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var r=t.lastRenderedState,l=s(r,n);if(i.hasEagerState=!0,i.eagerState=l,bn(l,r))return oc(e,t,i,0),Xe===null&&lc(),!1}catch{}finally{}if(n=mf(e,t,i,a),n!==null)return sn(n,e,a),Yy(n,t,a),!0}return!1}function kf(e,t,n,a){if(a={lane:2,revertLane:Vf(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},hc(e)){if(t)throw Error(N(479))}else t=mf(e,n,a,2),t!==null&&sn(t,e,2)}function hc(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function Vy(e,t){gs=Eo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yy(e,t,n){if(n&4194048){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Dv(e,n)}}var Hr={readContext:$t,use:dc,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};Hr.useEffectEvent=dt;var Gy={readContext:$t,use:dc,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:wm,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,ao(4194308,4,Ry.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ao(4194308,4,e,t)},useInsertionEffect:function(e,t){ao(4,2,e,t)},useMemo:function(e,t){var n=Qt();t=t===void 0?null:t;var a=e();if(Oi){ka(!0);try{e()}finally{ka(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=Qt();if(n!==void 0){var i=n(t);if(Oi){ka(!0);try{n(t)}finally{ka(!1)}}}else i=t;return a.memoizedState=a.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=NS.bind(null,_e,e),[a.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:function(e){e=od(e);var t=e.queue,n=Iy.bind(null,_e,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Cf,useDeferredValue:function(e,t){var n=Qt();return Rf(n,e,t)},useTransition:function(){var e=od(!1);return e=Ly.bind(null,_e,e.queue,!0,!1),Qt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=_e,i=Qt();if(Re){if(n===void 0)throw Error(N(407));n=n()}else{if(n=t(),Xe===null)throw Error(N(349));Ne&127||py(a,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,wm(_y.bind(null,a,s,e),[e]),a.flags|=2048,Ts(9,{destroy:void 0},by.bind(null,a,s,n,t),null),n},useId:function(){var e=Qt(),t=Xe.identifierPrefix;if(Re){var n=Fn,a=Zn;n=(a&~(1<<32-yn(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=jo++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=xS++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Mf,useFormState:pm,useActionState:pm,useOptimistic:function(e){var t=Qt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=kf.bind(null,_e,!0,n),n.dispatch=t,[e,t]},useMemoCache:Af,useCacheRefresh:function(){return Qt().memoizedState=DS.bind(null,_e)},useEffectEvent:function(e){var t=Qt(),n={impl:e};return t.memoizedState=n,function(){if(Le&2)throw Error(N(440));return n.impl.apply(void 0,arguments)}}},Uf={readContext:$t,use:dc,useCallback:ky,useContext:$t,useEffect:Nf,useImperativeHandle:My,useInsertionEffect:Ny,useLayoutEffect:Cy,useMemo:Uy,useReducer:no,useRef:Ay,useState:function(){return no(_a)},useDebugValue:Cf,useDeferredValue:function(e,t){var n=pt();return zy(n,Ge.memoizedState,e,t)},useTransition:function(){var e=no(_a)[0],t=pt().memoizedState;return[typeof e=="boolean"?e:al(e),t]},useSyncExternalStore:yy,useId:qy,useHostTransitionStatus:Mf,useFormState:bm,useActionState:bm,useOptimistic:function(e,t){var n=pt();return xy(n,Ge,e,t)},useMemoCache:Af,useCacheRefresh:$y};Uf.useEffectEvent=Dy;var Ky={readContext:$t,use:dc,useCallback:ky,useContext:$t,useEffect:Nf,useImperativeHandle:My,useInsertionEffect:Ny,useLayoutEffect:Cy,useMemo:Uy,useReducer:Zc,useRef:Ay,useState:function(){return Zc(_a)},useDebugValue:Cf,useDeferredValue:function(e,t){var n=pt();return Ge===null?Rf(n,e,t):zy(n,Ge.memoizedState,e,t)},useTransition:function(){var e=Zc(_a)[0],t=pt().memoizedState;return[typeof e=="boolean"?e:al(e),t]},useSyncExternalStore:yy,useId:qy,useHostTransitionStatus:Mf,useFormState:_m,useActionState:_m,useOptimistic:function(e,t){var n=pt();return Ge!==null?xy(n,Ge,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Af,useCacheRefresh:$y};Ky.useEffectEvent=Dy;function Fc(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:tt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var dd={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=pn(),i=Ia(a);i.payload=t,n!=null&&(i.callback=n),t=Va(e,i,a),t!==null&&(sn(t,e,a),vr(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=pn(),i=Ia(a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Va(e,i,a),t!==null&&(sn(t,e,a),vr(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pn(),a=Ia(n);a.tag=2,t!=null&&(a.callback=t),t=Va(e,a,n),t!==null&&(sn(t,e,n),vr(t,e,n))}};function Sm(e,t,n,a,i,s,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,s,r):t.prototype&&t.prototype.isPureReactComponent?!kr(n,a)||!kr(i,s):!0}function xm(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&dd.enqueueReplaceState(t,t.state,null)}function Ai(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=tt({},n));for(var i in e)n[i]===void 0&&(n[i]=e[i])}return n}function Xy(e){po(e)}function Qy(e){console.error(e)}function Jy(e){po(e)}function Oo(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Tm(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function fd(e,t,n){return n=Ia(n),n.tag=3,n.payload={element:null},n.callback=function(){Oo(e,t)},n}function Py(e){return e=Ia(e),e.tag=3,e}function Zy(e,t,n,a){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=a.value;e.payload=function(){return i(s)},e.callback=function(){Tm(t,n,a)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Tm(t,n,a),typeof i!="function"&&(Ya===null?Ya=new Set([this]):Ya.add(this));var l=a.stack;this.componentDidCatch(a.value,{componentStack:l!==null?l:""})})}function CS(e,t,n,a,i){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&zs(t,n,i,!0),n=_n.current,n!==null){switch(n.tag){case 31:case 13:return kn===null?Ro():n.alternate===null&&ft===0&&(ft=3),n.flags&=-257,n.flags|=65536,n.lanes=i,a===So?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),cu(e,a,i)),!1;case 22:return n.flags|=65536,a===So?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),cu(e,a,i)),!1}throw Error(N(435,n.tag))}return cu(e,a,i),Ro(),!1}if(Re)return t=_n.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=i,a!==Wu&&(e=Error(N(422),{cause:a}),zr(Rn(e,n)))):(a!==Wu&&(t=Error(N(423),{cause:a}),zr(Rn(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,a=Rn(a,n),i=fd(e.stateNode,a,i),Pc(e,i),ft!==4&&(ft=2)),!1;var s=Error(N(520),{cause:a});if(s=Rn(s,n),Sr===null?Sr=[s]:Sr.push(s),ft!==4&&(ft=2),t===null)return!0;a=Rn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=fd(n.stateNode,a,e),Pc(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Ya===null||!Ya.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,i=Py(i),Zy(i,e,n,a),Pc(n,i),!1}n=n.return}while(n!==null);return!1}var zf=Error(N(461)),Tt=!1;function Bt(e,t,n,a){t.child=e===null?dy(t,null,n,a):ji(t,e.child,n,a)}function Em(e,t,n,a,i){n=n.render;var s=t.ref;if("ref"in a){var r={};for(var l in a)l!=="ref"&&(r[l]=a[l])}else r=a;return Ei(t),a=Tf(e,t,n,r,s,i),l=Ef(),e!==null&&!Tt?(jf(e,t,i),wa(e,t,i)):(Re&&l&&vf(t),t.flags|=1,Bt(e,t,a,i),t.child)}function jm(e,t,n,a,i){if(e===null){var s=n.type;return typeof s=="function"&&!gf(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,Fy(e,t,s,a,i)):(e=eo(n.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Lf(e,i)){var r=s.memoizedProps;if(n=n.compare,n=n!==null?n:kr,n(r,a)&&e.ref===t.ref)return wa(e,t,i)}return t.flags|=1,e=ga(s,a),e.ref=t.ref,e.return=t,t.child=e}function Fy(e,t,n,a,i){if(e!==null){var s=e.memoizedProps;if(kr(s,a)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=a=s,Lf(e,i))e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,wa(e,t,i)}return hd(e,t,n,a,i)}function Wy(e,t,n,a){var i=a.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if(t.flags&128){if(s=s!==null?s.baseLanes|n:n,e!==null){for(a=t.child=e.child,i=0;a!==null;)i=i|a.lanes|a.childLanes,a=a.sibling;a=i&~s}else a=0,t.child=null;return Om(e,t,s,n,a)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&to(t,s!==null?s.cachePool:null),s!==null?gm(t,s):rd(),my(t);else return a=t.lanes=536870912,Om(e,t,s!==null?s.baseLanes|n:n,n,a)}else s!==null?(to(t,s.cachePool),gm(t,s),Ca(),t.memoizedState=null):(e!==null&&to(t,null),rd(),Ca());return Bt(e,t,i,n),t.child}function or(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Om(e,t,n,a,i){var s=bf();return s=s===null?null:{parent:xt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&to(t,null),rd(),my(t),e!==null&&zs(e,t,a,!0),t.childLanes=i,null}function io(e,t){return t=Ao({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Am(e,t,n){return ji(t,e.child,null,n),e=io(t,t.pendingProps),e.flags|=2,un(t),t.memoizedState=null,e}function RS(e,t,n){var a=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Re){if(a.mode==="hidden")return e=io(t,a),t.lanes=536870912,or(null,e);if(ld(t),(e=We)?(e=Gp(e,Mn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ja!==null?{id:Zn,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},n=iy(e),n.return=t,t.child=n,qt=t,We=null)):e=null,e===null)throw Pa(t);return t.lanes=536870912,null}return io(t,a)}var s=e.memoizedState;if(s!==null){var r=s.dehydrated;if(ld(t),i)if(t.flags&256)t.flags&=-257,t=Am(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(N(558));else if(Tt||zs(e,t,n,!1),i=(n&e.childLanes)!==0,Tt||i){if(a=Xe,a!==null&&(r=Nv(a,n),r!==0&&r!==s.retryLane))throw s.retryLane=r,Ri(e,r),sn(a,e,r),zf;Ro(),t=Am(e,t,n)}else e=s.treeContext,We=Un(r.nextSibling),qt=t,Re=!0,$a=null,Mn=!1,e!==null&&ry(t,e),t=io(t,a),t.flags|=4096;return t}return e=ga(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function so(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(N(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function hd(e,t,n,a,i){return Ei(t),n=Tf(e,t,n,a,void 0,i),a=Ef(),e!==null&&!Tt?(jf(e,t,i),wa(e,t,i)):(Re&&a&&vf(t),t.flags|=1,Bt(e,t,n,i),t.child)}function Dm(e,t,n,a,i,s){return Ei(t),t.updateQueue=null,n=vy(t,a,n,i),gy(e),a=Ef(),e!==null&&!Tt?(jf(e,t,s),wa(e,t,s)):(Re&&a&&vf(t),t.flags|=1,Bt(e,t,n,s),t.child)}function Nm(e,t,n,a,i){if(Ei(t),t.stateNode===null){var s=rs,r=n.contextType;typeof r=="object"&&r!==null&&(s=$t(r)),s=new n(a,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=dd,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=a,s.state=t.memoizedState,s.refs={},wf(t),r=n.contextType,s.context=typeof r=="object"&&r!==null?$t(r):rs,s.state=t.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(Fc(t,n,r,a),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&dd.enqueueReplaceState(s,s.state,null),pr(t,a,s,i),yr(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,o=Ai(n,l);s.props=o;var c=s.context,d=n.contextType;r=rs,typeof d=="object"&&d!==null&&(r=$t(d));var f=n.getDerivedStateFromProps;d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||c!==r)&&xm(t,s,a,r),Oa=!1;var h=t.memoizedState;s.state=h,pr(t,a,s,i),yr(),c=t.memoizedState,l||h!==c||Oa?(typeof f=="function"&&(Fc(t,n,f,a),c=t.memoizedState),(o=Oa||Sm(t,n,o,a,h,c,r))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),s.props=a,s.state=c,s.context=r,a=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{s=t.stateNode,id(e,t),r=t.memoizedProps,d=Ai(n,r),s.props=d,f=t.pendingProps,h=s.context,c=n.contextType,o=rs,typeof c=="object"&&c!==null&&(o=$t(c)),l=n.getDerivedStateFromProps,(c=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r!==f||h!==o)&&xm(t,s,a,o),Oa=!1,h=t.memoizedState,s.state=h,pr(t,a,s,i),yr();var m=t.memoizedState;r!==f||h!==m||Oa||e!==null&&e.dependencies!==null&&wo(e.dependencies)?(typeof l=="function"&&(Fc(t,n,l,a),m=t.memoizedState),(d=Oa||Sm(t,n,d,a,h,m,o)||e!==null&&e.dependencies!==null&&wo(e.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(a,m,o),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(a,m,o)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=m),s.props=a,s.state=m,s.context=o,a=d):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return s=a,so(e,t),a=(t.flags&128)!==0,s||a?(s=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&a?(t.child=ji(t,e.child,null,i),t.child=ji(t,null,n,i)):Bt(e,t,n,i),t.memoizedState=s.state,e=t.child):e=wa(e,t,i),e}function Cm(e,t,n,a){return Ti(),t.flags|=256,Bt(e,t,n,a),t.child}var Wc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eu(e){return{baseLanes:e,cachePool:oy()}}function tu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=mn),e}function ep(e,t,n){var a=t.pendingProps,i=!1,s=(t.flags&128)!==0,r;if((r=s)||(r=e!==null&&e.memoizedState===null?!1:(yt.current&2)!==0),r&&(i=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(Re){if(i?Na(t):Ca(),(e=We)?(e=Gp(e,Mn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ja!==null?{id:Zn,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},n=iy(e),n.return=t,t.child=n,qt=t,We=null)):e=null,e===null)throw Pa(t);return Od(e)?t.lanes=32:t.lanes=536870912,null}var l=a.children;return a=a.fallback,i?(Ca(),i=t.mode,l=Ao({mode:"hidden",children:l},i),a=_i(a,i,n,null),l.return=t,a.return=t,l.sibling=a,t.child=l,a=t.child,a.memoizedState=eu(n),a.childLanes=tu(e,r,n),t.memoizedState=Wc,or(null,a)):(Na(t),md(t,l))}var o=e.memoizedState;if(o!==null&&(l=o.dehydrated,l!==null)){if(s)t.flags&256?(Na(t),t.flags&=-257,t=nu(e,t,n)):t.memoizedState!==null?(Ca(),t.child=e.child,t.flags|=128,t=null):(Ca(),l=a.fallback,i=t.mode,a=Ao({mode:"visible",children:a.children},i),l=_i(l,i,n,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,ji(t,e.child,null,n),a=t.child,a.memoizedState=eu(n),a.childLanes=tu(e,r,n),t.memoizedState=Wc,t=or(null,a));else if(Na(t),Od(l)){if(r=l.nextSibling&&l.nextSibling.dataset,r)var c=r.dgst;r=c,a=Error(N(419)),a.stack="",a.digest=r,zr({value:a,source:null,stack:null}),t=nu(e,t,n)}else if(Tt||zs(e,t,n,!1),r=(n&e.childLanes)!==0,Tt||r){if(r=Xe,r!==null&&(a=Nv(r,n),a!==0&&a!==o.retryLane))throw o.retryLane=a,Ri(e,a),sn(r,e,a),zf;jd(l)||Ro(),t=nu(e,t,n)}else jd(l)?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,We=Un(l.nextSibling),qt=t,Re=!0,$a=null,Mn=!1,e!==null&&ry(t,e),t=md(t,a.children),t.flags|=4096);return t}return i?(Ca(),l=a.fallback,i=t.mode,o=e.child,c=o.sibling,a=ga(o,{mode:"hidden",children:a.children}),a.subtreeFlags=o.subtreeFlags&65011712,c!==null?l=ga(c,l):(l=_i(l,i,n,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,or(null,a),a=t.child,l=e.child.memoizedState,l===null?l=eu(n):(i=l.cachePool,i!==null?(o=xt._currentValue,i=i.parent!==o?{parent:o,pool:o}:i):i=oy(),l={baseLanes:l.baseLanes|n,cachePool:i}),a.memoizedState=l,a.childLanes=tu(e,r,n),t.memoizedState=Wc,or(e.child,a)):(Na(t),n=e.child,e=n.sibling,n=ga(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function md(e,t){return t=Ao({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ao(e,t){return e=dn(22,e,null,t),e.lanes=0,e}function nu(e,t,n){return ji(t,e.child,null,n),e=md(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rm(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),td(e.return,t,n)}function au(e,t,n,a,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i,treeForkCount:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=n,r.tailMode=i,r.treeForkCount=s)}function tp(e,t,n){var a=t.pendingProps,i=a.revealOrder,s=a.tail;a=a.children;var r=yt.current,l=(r&2)!==0;if(l?(r=r&1|2,t.flags|=128):r&=1,Ze(yt,r),Bt(e,t,a,n),a=Re?Ur:0,!l&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rm(e,n,t);else if(e.tag===19)Rm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&To(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),au(t,!1,i,n,s,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&To(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}au(t,!0,n,null,s,a);break;case"together":au(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function wa(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fa|=t.lanes,!(n&t.childLanes))if(e!==null){if(zs(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(N(153));if(t.child!==null){for(e=t.child,n=ga(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ga(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Lf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&wo(e)))}function MS(e,t,n){switch(t.tag){case 3:mo(t,t.stateNode.containerInfo),Da(t,xt,e.memoizedState.cache),Ti();break;case 27:case 5:Iu(t);break;case 4:mo(t,t.stateNode.containerInfo);break;case 10:Da(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ld(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Na(t),t.flags|=128,null):n&t.child.childLanes?ep(e,t,n):(Na(t),e=wa(e,t,n),e!==null?e.sibling:null);Na(t);break;case 19:var i=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(zs(e,t,n,!1),a=(n&t.childLanes)!==0),i){if(a)return tp(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ze(yt,yt.current),a)break;return null;case 22:return t.lanes=0,Wy(e,t,n,t.pendingProps);case 24:Da(t,xt,e.memoizedState.cache)}return wa(e,t,n)}function np(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Tt=!0;else{if(!Lf(e,n)&&!(t.flags&128))return Tt=!1,MS(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,Re&&t.flags&1048576&&sy(t,Ur,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=di(t.elementType),t.type=e,typeof e=="function")gf(e)?(a=Ai(e,a),t.tag=1,t=Nm(null,t,e,a,n)):(t.tag=0,t=hd(null,t,e,a,n));else{if(e!=null){var i=e.$$typeof;if(i===ef){t.tag=11,t=Em(null,t,e,a,n);break e}else if(i===tf){t.tag=14,t=jm(null,t,e,a,n);break e}}throw t=qu(e)||e,Error(N(306,t,""))}}return t;case 0:return hd(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,i=Ai(a,t.pendingProps),Nm(e,t,a,i,n);case 3:e:{if(mo(t,t.stateNode.containerInfo),e===null)throw Error(N(387));a=t.pendingProps;var s=t.memoizedState;i=s.element,id(e,t),pr(t,a,null,n);var r=t.memoizedState;if(a=r.cache,Da(t,xt,a),a!==s.cache&&nd(t,[xt],n,!0),yr(),a=r.element,s.isDehydrated)if(s={element:a,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Cm(e,t,a,n);break e}else if(a!==i){i=Rn(Error(N(424)),t),zr(i),t=Cm(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(We=Un(e.firstChild),qt=t,Re=!0,$a=null,Mn=!0,n=dy(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ti(),a===i){t=wa(e,t,n);break e}Bt(e,t,a,n)}t=t.child}return t;case 26:return so(e,t),e===null?(n=Fm(t.type,null,t.pendingProps,null))?t.memoizedState=n:Re||(n=t.type,e=t.pendingProps,a=zo(qa.current).createElement(n),a[Ht]=t,a[rn]=e,It(a,n,e),Rt(a),t.stateNode=a):t.memoizedState=Fm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Iu(t),e===null&&Re&&(a=t.stateNode=Kp(t.type,t.pendingProps,qa.current),qt=t,Mn=!0,i=We,ti(t.type)?(Ad=i,We=Un(a.firstChild)):We=i),Bt(e,t,t.pendingProps.children,n),so(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Re&&((i=a=We)&&(a=cx(a,t.type,t.pendingProps,Mn),a!==null?(t.stateNode=a,qt=t,We=Un(a.firstChild),Mn=!1,i=!0):i=!1),i||Pa(t)),Iu(t),i=t.type,s=t.pendingProps,r=e!==null?e.memoizedProps:null,a=s.children,Td(i,s)?a=null:r!==null&&Td(i,r)&&(t.flags|=32),t.memoizedState!==null&&(i=Tf(e,t,TS,null,null,n),Ir._currentValue=i),so(e,t),Bt(e,t,a,n),t.child;case 6:return e===null&&Re&&((e=n=We)&&(n=ux(n,t.pendingProps,Mn),n!==null?(t.stateNode=n,qt=t,We=null,e=!0):e=!1),e||Pa(t)),null;case 13:return ep(e,t,n);case 4:return mo(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ji(t,null,a,n):Bt(e,t,a,n),t.child;case 11:return Em(e,t,t.type,t.pendingProps,n);case 7:return Bt(e,t,t.pendingProps,n),t.child;case 8:return Bt(e,t,t.pendingProps.children,n),t.child;case 12:return Bt(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Da(t,t.type,a.value),Bt(e,t,a.children,n),t.child;case 9:return i=t.type._context,a=t.pendingProps.children,Ei(t),i=$t(i),a=a(i),t.flags|=1,Bt(e,t,a,n),t.child;case 14:return jm(e,t,t.type,t.pendingProps,n);case 15:return Fy(e,t,t.type,t.pendingProps,n);case 19:return tp(e,t,n);case 31:return RS(e,t,n);case 22:return Wy(e,t,n,t.pendingProps);case 24:return Ei(t),a=$t(xt),e===null?(i=bf(),i===null&&(i=Xe,s=pf(),i.pooledCache=s,s.refCount++,s!==null&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:a,cache:i},wf(t),Da(t,xt,i)):(e.lanes&n&&(id(e,t),pr(t,null,null,n),yr()),i=e.memoizedState,s=t.memoizedState,i.parent!==a?(i={parent:a,cache:a},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Da(t,xt,a)):(a=s.cache,Da(t,xt,a),a!==i.cache&&nd(t,[xt],n,!0))),Bt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(N(156,t.tag))}function ia(e){e.flags|=4}function iu(e,t,n,a,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(jp())e.flags|=8192;else throw Si=So,_f}else e.flags&=-16777217}function Mm(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Jp(t))if(jp())e.flags|=8192;else throw Si=So,_f}function Ml(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ov():536870912,e.lanes|=t,Es|=t)}function er(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Fe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags&65011712,a|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function kS(e,t,n){var a=t.pendingProps;switch(yf(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return Fe(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),va(xt),bs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Bi(t)?ia(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jc())),Fe(t),null;case 26:var i=t.type,s=t.memoizedState;return e===null?(ia(t),s!==null?(Fe(t),Mm(t,s)):(Fe(t),iu(t,i,null,a,n))):s?s!==e.memoizedState?(ia(t),Fe(t),Mm(t,s)):(Fe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&ia(t),Fe(t),iu(t,i,e,a,n)),null;case 27:if(go(t),n=qa.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&ia(t);else{if(!a){if(t.stateNode===null)throw Error(N(166));return Fe(t),null}e=ea.current,Bi(t)?om(t):(e=Kp(i,a,n),t.stateNode=e,ia(t))}return Fe(t),null;case 5:if(go(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&ia(t);else{if(!a){if(t.stateNode===null)throw Error(N(166));return Fe(t),null}if(s=ea.current,Bi(t))om(t);else{var r=zo(qa.current);switch(s){case 1:s=r.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=r.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":s=r.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof a.is=="string"?r.createElement("select",{is:a.is}):r.createElement("select"),a.multiple?s.multiple=!0:a.size&&(s.size=a.size);break;default:s=typeof a.is=="string"?r.createElement(i,{is:a.is}):r.createElement(i)}}s[Ht]=t,s[rn]=a;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=s;e:switch(It(s,i,a),i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ia(t)}}return Fe(t),iu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&ia(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(N(166));if(e=qa.current,Bi(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,i=qt,i!==null)switch(i.tag){case 27:case 5:a=i.memoizedProps}e[Ht]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Ip(e.nodeValue,n)),e||Pa(t,!0)}else e=zo(e).createTextNode(a),e[Ht]=t,t.stateNode=e}return Fe(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=Bi(t),n!==null){if(e===null){if(!a)throw Error(N(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(557));e[Ht]=t}else Ti(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fe(t),e=!1}else n=Jc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(un(t),t):(un(t),null);if(t.flags&128)throw Error(N(558))}return Fe(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Bi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(N(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[Ht]=t}else Ti(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fe(t),i=!1}else i=Jc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(un(t),t):(un(t),null)}return un(t),t.flags&128?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,i=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(i=a.alternate.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==i&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Ml(t,t.updateQueue),Fe(t),null);case 4:return bs(),e===null&&Yf(t.stateNode.containerInfo),Fe(t),null;case 10:return va(t.type),Fe(t),null;case 19:if(Mt(yt),a=t.memoizedState,a===null)return Fe(t),null;if(i=(t.flags&128)!==0,s=a.rendering,s===null)if(i)er(a,!1);else{if(ft!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=To(e),s!==null){for(t.flags|=128,er(a,!1),e=s.updateQueue,t.updateQueue=e,Ml(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ay(n,e),n=n.sibling;return Ze(yt,yt.current&1|2),Re&&ua(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&gn()>No&&(t.flags|=128,i=!0,er(a,!1),t.lanes=4194304)}else{if(!i)if(e=To(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Ml(t,e),er(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Re)return Fe(t),null}else 2*gn()-a.renderingStartTime>No&&n!==536870912&&(t.flags|=128,i=!0,er(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(e=a.last,e!==null?e.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=gn(),e.sibling=null,n=yt.current,Ze(yt,i?n&1|2:n&1),Re&&ua(t,a.treeForkCount),e):(Fe(t),null);case 22:case 23:return un(t),Sf(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?n&536870912&&!(t.flags&128)&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),n=t.updateQueue,n!==null&&Ml(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&Mt(wi),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),va(xt),Fe(t),null;case 25:return null;case 30:return null}throw Error(N(156,t.tag))}function US(e,t){switch(yf(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return va(xt),bs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return go(t),null;case 31:if(t.memoizedState!==null){if(un(t),t.alternate===null)throw Error(N(340));Ti()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(un(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(N(340));Ti()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Mt(yt),null;case 4:return bs(),null;case 10:return va(t.type),null;case 22:case 23:return un(t),Sf(),e!==null&&Mt(wi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return va(xt),null;case 25:return null;default:return null}}function ap(e,t){switch(yf(t),t.tag){case 3:va(xt),bs();break;case 26:case 27:case 5:go(t);break;case 4:bs();break;case 31:t.memoizedState!==null&&un(t);break;case 13:un(t);break;case 19:Mt(yt);break;case 10:va(t.type);break;case 22:case 23:un(t),Sf(),e!==null&&Mt(wi);break;case 24:va(xt)}}function il(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&e)===e){a=void 0;var s=n.create,r=n.inst;a=s(),r.destroy=a}n=n.next}while(n!==i)}}catch(l){Ve(t,t.return,l)}}function Za(e,t,n){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var s=i.next;a=s;do{if((a.tag&e)===e){var r=a.inst,l=r.destroy;if(l!==void 0){r.destroy=void 0,i=t;var o=n,c=l;try{c()}catch(d){Ve(i,o,d)}}}a=a.next}while(a!==s)}}catch(d){Ve(t,t.return,d)}}function ip(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{hy(t,n)}catch(a){Ve(e,e.return,a)}}}function sp(e,t,n){n.props=Ai(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Ve(e,t,a)}}function _r(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(i){Ve(e,t,i)}}function Wn(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(i){Ve(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Ve(e,t,i)}else n.current=null}function rp(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(i){Ve(e,e.return,i)}}function su(e,t,n){try{var a=e.stateNode;ax(a,e.type,n,t),a[rn]=t}catch(i){Ve(e,e.return,i)}}function lp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ti(e.type)||e.tag===4}function ru(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ti(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gd(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ha));else if(a!==4&&(a===27&&ti(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(gd(e,t,n),e=e.sibling;e!==null;)gd(e,t,n),e=e.sibling}function Do(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&ti(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Do(e,t,n),e=e.sibling;e!==null;)Do(e,t,n),e=e.sibling}function op(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);It(t,a,n),t[Ht]=e,t[rn]=n}catch(s){Ve(e,e.return,s)}}var da=!1,St=!1,lu=!1,km=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function zS(e,t){if(e=e.containerInfo,Sd=qo,e=Jv(e),ff(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var i=a.anchorOffset,s=a.focusNode;a=a.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var r=0,l=-1,o=-1,c=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(l=r+i),f!==s||a!==0&&f.nodeType!==3||(o=r+a),f.nodeType===3&&(r+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++c===i&&(l=r),h===s&&++d===a&&(o=r),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=l===-1||o===-1?null:{start:l,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(xd={focusedElem:e,selectionRange:n},qo=!1,Nt=t;Nt!==null;)if(t=Nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Nt=e;else for(;Nt!==null;){switch(t=Nt,s=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)i=e[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,a=n.stateNode;try{var v=Ai(n.type,i);e=a.getSnapshotBeforeUpdate(v,s),a.__reactInternalSnapshotBeforeUpdate=e}catch(b){Ve(n,n.return,b)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Ed(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ed(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(N(163))}if(e=t.sibling,e!==null){e.return=t.return,Nt=e;break}Nt=t.return}}function cp(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:ra(e,n),a&4&&il(5,n);break;case 1:if(ra(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(r){Ve(n,n.return,r)}else{var i=Ai(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){Ve(n,n.return,r)}}a&64&&ip(n),a&512&&_r(n,n.return);break;case 3:if(ra(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{hy(e,t)}catch(r){Ve(n,n.return,r)}}break;case 27:t===null&&a&4&&op(n);case 26:case 5:ra(e,n),t===null&&a&4&&rp(n),a&512&&_r(n,n.return);break;case 12:ra(e,n);break;case 31:ra(e,n),a&4&&fp(e,n);break;case 13:ra(e,n),a&4&&hp(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=GS.bind(null,n),dx(e,n))));break;case 22:if(a=n.memoizedState!==null||da,!a){t=t!==null&&t.memoizedState!==null||St,i=da;var s=St;da=a,(St=t)&&!s?oa(e,n,(n.subtreeFlags&8772)!==0):ra(e,n),da=i,St=s}break;case 30:break;default:ra(e,n)}}function up(e){var t=e.alternate;t!==null&&(e.alternate=null,up(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&rf(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var it=null,nn=!1;function sa(e,t,n){for(n=n.child;n!==null;)dp(e,t,n),n=n.sibling}function dp(e,t,n){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(Zr,n)}catch{}switch(n.tag){case 26:St||Wn(n,t),sa(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:St||Wn(n,t);var a=it,i=nn;ti(n.type)&&(it=n.stateNode,nn=!1),sa(e,t,n),Tr(n.stateNode),it=a,nn=i;break;case 5:St||Wn(n,t);case 6:if(a=it,i=nn,it=null,sa(e,t,n),it=a,nn=i,it!==null)if(nn)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(n.stateNode)}catch(s){Ve(n,t,s)}else try{it.removeChild(n.stateNode)}catch(s){Ve(n,t,s)}break;case 18:it!==null&&(nn?(e=it,Xm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Ds(e)):Xm(it,n.stateNode));break;case 4:a=it,i=nn,it=n.stateNode.containerInfo,nn=!0,sa(e,t,n),it=a,nn=i;break;case 0:case 11:case 14:case 15:Za(2,n,t),St||Za(4,n,t),sa(e,t,n);break;case 1:St||(Wn(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&sp(n,t,a)),sa(e,t,n);break;case 21:sa(e,t,n);break;case 22:St=(a=St)||n.memoizedState!==null,sa(e,t,n),St=a;break;default:sa(e,t,n)}}function fp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ds(e)}catch(n){Ve(t,t.return,n)}}}function hp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ds(e)}catch(n){Ve(t,t.return,n)}}function LS(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new km),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new km),t;default:throw Error(N(435,e.tag))}}function kl(e,t){var n=LS(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var i=KS.bind(null,e,a);a.then(i,i)}})}function en(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var i=n[a],s=e,r=t,l=r;e:for(;l!==null;){switch(l.tag){case 27:if(ti(l.type)){it=l.stateNode,nn=!1;break e}break;case 5:it=l.stateNode,nn=!1;break e;case 3:case 4:it=l.stateNode.containerInfo,nn=!0;break e}l=l.return}if(it===null)throw Error(N(160));dp(s,r,i),it=null,nn=!1,s=i.alternate,s!==null&&(s.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)mp(t,e),t=t.sibling}var $n=null;function mp(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:en(t,e),tn(e),a&4&&(Za(3,e,e.return),il(3,e),Za(5,e,e.return));break;case 1:en(t,e),tn(e),a&512&&(St||n===null||Wn(n,n.return)),a&64&&da&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var i=$n;if(en(t,e),tn(e),a&512&&(St||n===null||Wn(n,n.return)),a&4){var s=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(a){case"title":s=i.getElementsByTagName("title")[0],(!s||s[el]||s[Ht]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=i.createElement(a),i.head.insertBefore(s,i.querySelector("head > title"))),It(s,a,n),s[Ht]=e,Rt(s),a=s;break e;case"link":var r=eg("link","href",i).get(a+(n.href||""));if(r){for(var l=0;l<r.length;l++)if(s=r[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(l,1);break t}}s=i.createElement(a),It(s,a,n),i.head.appendChild(s);break;case"meta":if(r=eg("meta","content",i).get(a+(n.content||""))){for(l=0;l<r.length;l++)if(s=r[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(l,1);break t}}s=i.createElement(a),It(s,a,n),i.head.appendChild(s);break;default:throw Error(N(468,a))}s[Ht]=e,Rt(s),a=s}e.stateNode=a}else tg(i,e.type,e.stateNode);else e.stateNode=Wm(i,a,e.memoizedProps);else s!==a?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,a===null?tg(i,e.type,e.stateNode):Wm(i,a,e.memoizedProps)):a===null&&e.stateNode!==null&&su(e,e.memoizedProps,n.memoizedProps)}break;case 27:en(t,e),tn(e),a&512&&(St||n===null||Wn(n,n.return)),n!==null&&a&4&&su(e,e.memoizedProps,n.memoizedProps);break;case 5:if(en(t,e),tn(e),a&512&&(St||n===null||Wn(n,n.return)),e.flags&32){i=e.stateNode;try{ws(i,"")}catch(v){Ve(e,e.return,v)}}a&4&&e.stateNode!=null&&(i=e.memoizedProps,su(e,i,n!==null?n.memoizedProps:i)),a&1024&&(lu=!0);break;case 6:if(en(t,e),tn(e),a&4){if(e.stateNode===null)throw Error(N(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(v){Ve(e,e.return,v)}}break;case 3:if(oo=null,i=$n,$n=Lo(t.containerInfo),en(t,e),$n=i,tn(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Ds(t.containerInfo)}catch(v){Ve(e,e.return,v)}lu&&(lu=!1,gp(e));break;case 4:a=$n,$n=Lo(e.stateNode.containerInfo),en(t,e),tn(e),$n=a;break;case 12:en(t,e),tn(e);break;case 31:en(t,e),tn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,kl(e,a)));break;case 13:en(t,e),tn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(mc=gn()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,kl(e,a)));break;case 22:i=e.memoizedState!==null;var o=n!==null&&n.memoizedState!==null,c=da,d=St;if(da=c||i,St=d||o,en(t,e),St=d,da=c,tn(e),a&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||o||da||St||fi(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){o=n=t;try{if(s=o.stateNode,i)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{l=o.stateNode;var f=o.memoizedProps.style,h=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(v){Ve(o,o.return,v)}}}else if(t.tag===6){if(n===null){o=t;try{o.stateNode.nodeValue=i?"":o.memoizedProps}catch(v){Ve(o,o.return,v)}}}else if(t.tag===18){if(n===null){o=t;try{var m=o.stateNode;i?Qm(m,!0):Qm(o.stateNode,!1)}catch(v){Ve(o,o.return,v)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,kl(e,n))));break;case 19:en(t,e),tn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,kl(e,a)));break;case 30:break;case 21:break;default:en(t,e),tn(e)}}function tn(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(lp(a)){n=a;break}a=a.return}if(n==null)throw Error(N(160));switch(n.tag){case 27:var i=n.stateNode,s=ru(e);Do(e,s,i);break;case 5:var r=n.stateNode;n.flags&32&&(ws(r,""),n.flags&=-33);var l=ru(e);Do(e,l,r);break;case 3:case 4:var o=n.stateNode.containerInfo,c=ru(e);gd(e,c,o);break;default:throw Error(N(161))}}catch(d){Ve(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;gp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ra(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)cp(e,t.alternate,t),t=t.sibling}function fi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Za(4,t,t.return),fi(t);break;case 1:Wn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&sp(t,t.return,n),fi(t);break;case 27:Tr(t.stateNode);case 26:case 5:Wn(t,t.return),fi(t);break;case 22:t.memoizedState===null&&fi(t);break;case 30:fi(t);break;default:fi(t)}e=e.sibling}}function oa(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,i=e,s=t,r=s.flags;switch(s.tag){case 0:case 11:case 15:oa(i,s,n),il(4,s);break;case 1:if(oa(i,s,n),a=s,i=a.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){Ve(a,a.return,c)}if(a=s,i=a.updateQueue,i!==null){var l=a.stateNode;try{var o=i.shared.hiddenCallbacks;if(o!==null)for(i.shared.hiddenCallbacks=null,i=0;i<o.length;i++)fy(o[i],l)}catch(c){Ve(a,a.return,c)}}n&&r&64&&ip(s),_r(s,s.return);break;case 27:op(s);case 26:case 5:oa(i,s,n),n&&a===null&&r&4&&rp(s),_r(s,s.return);break;case 12:oa(i,s,n);break;case 31:oa(i,s,n),n&&r&4&&fp(i,s);break;case 13:oa(i,s,n),n&&r&4&&hp(i,s);break;case 22:s.memoizedState===null&&oa(i,s,n),_r(s,s.return);break;case 30:break;default:oa(i,s,n)}t=t.sibling}}function Bf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&nl(n))}function Hf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e))}function Ln(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vp(e,t,n,a),t=t.sibling}function vp(e,t,n,a){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Ln(e,t,n,a),i&2048&&il(9,t);break;case 1:Ln(e,t,n,a);break;case 3:Ln(e,t,n,a),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e)));break;case 12:if(i&2048){Ln(e,t,n,a),e=t.stateNode;try{var s=t.memoizedProps,r=s.id,l=s.onPostCommit;typeof l=="function"&&l(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(o){Ve(t,t.return,o)}}else Ln(e,t,n,a);break;case 31:Ln(e,t,n,a);break;case 13:Ln(e,t,n,a);break;case 23:break;case 22:s=t.stateNode,r=t.alternate,t.memoizedState!==null?s._visibility&2?Ln(e,t,n,a):wr(e,t):s._visibility&2?Ln(e,t,n,a):(s._visibility|=2,Xi(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Bf(r,t);break;case 24:Ln(e,t,n,a),i&2048&&Hf(t.alternate,t);break;default:Ln(e,t,n,a)}}function Xi(e,t,n,a,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,r=t,l=n,o=a,c=r.flags;switch(r.tag){case 0:case 11:case 15:Xi(s,r,l,o,i),il(8,r);break;case 23:break;case 22:var d=r.stateNode;r.memoizedState!==null?d._visibility&2?Xi(s,r,l,o,i):wr(s,r):(d._visibility|=2,Xi(s,r,l,o,i)),i&&c&2048&&Bf(r.alternate,r);break;case 24:Xi(s,r,l,o,i),i&&c&2048&&Hf(r.alternate,r);break;default:Xi(s,r,l,o,i)}t=t.sibling}}function wr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,i=a.flags;switch(a.tag){case 22:wr(n,a),i&2048&&Bf(a.alternate,a);break;case 24:wr(n,a),i&2048&&Hf(a.alternate,a);break;default:wr(n,a)}t=t.sibling}}var cr=8192;function Hi(e,t,n){if(e.subtreeFlags&cr)for(e=e.child;e!==null;)yp(e,t,n),e=e.sibling}function yp(e,t,n){switch(e.tag){case 26:Hi(e,t,n),e.flags&cr&&e.memoizedState!==null&&xx(n,$n,e.memoizedState,e.memoizedProps);break;case 5:Hi(e,t,n);break;case 3:case 4:var a=$n;$n=Lo(e.stateNode.containerInfo),Hi(e,t,n),$n=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=cr,cr=16777216,Hi(e,t,n),cr=a):Hi(e,t,n));break;default:Hi(e,t,n)}}function pp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function tr(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Nt=a,_p(a,e)}pp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)bp(e),e=e.sibling}function bp(e){switch(e.tag){case 0:case 11:case 15:tr(e),e.flags&2048&&Za(9,e,e.return);break;case 3:tr(e);break;case 12:tr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ro(e)):tr(e);break;default:tr(e)}}function ro(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Nt=a,_p(a,e)}pp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Za(8,t,t.return),ro(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ro(t));break;default:ro(t)}e=e.sibling}}function _p(e,t){for(;Nt!==null;){var n=Nt;switch(n.tag){case 0:case 11:case 15:Za(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:nl(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,Nt=a;else e:for(n=e;Nt!==null;){a=Nt;var i=a.sibling,s=a.return;if(up(a),a===n){Nt=null;break e}if(i!==null){i.return=s,Nt=i;break e}Nt=s}}}var BS={getCacheForType:function(e){var t=$t(xt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return $t(xt).controller.signal}},HS=typeof WeakMap=="function"?WeakMap:Map,Le=0,Xe=null,Ae=null,Ne=0,$e=0,cn=null,za=!1,Bs=!1,qf=!1,Sa=0,ft=0,Fa=0,xi=0,$f=0,mn=0,Es=0,Sr=null,an=null,vd=!1,mc=0,wp=0,No=1/0,Co=null,Ya=null,At=0,Ga=null,js=null,ya=0,yd=0,pd=null,Sp=null,xr=0,bd=null;function pn(){return Le&2&&Ne!==0?Ne&-Ne:he.T!==null?Vf():Cv()}function xp(){if(mn===0)if(!(Ne&536870912)||Re){var e=jl;jl<<=1,!(jl&3932160)&&(jl=262144),mn=e}else mn=536870912;return e=_n.current,e!==null&&(e.flags|=32),mn}function sn(e,t,n){(e===Xe&&($e===2||$e===9)||e.cancelPendingCommit!==null)&&(Os(e,0),La(e,Ne,mn,!1)),Wr(e,n),(!(Le&2)||e!==Xe)&&(e===Xe&&(!(Le&2)&&(xi|=n),ft===4&&La(e,Ne,mn,!1)),na(e))}function Tp(e,t,n){if(Le&6)throw Error(N(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Fr(e,t),i=a?IS(e,t):ou(e,t,!0),s=a;do{if(i===0){Bs&&!a&&La(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!qS(n)){i=ou(e,t,!1),s=!1;continue}if(i===2){if(s=t,e.errorRecoveryDisabledLanes&s)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;e:{var l=e;i=Sr;var o=l.current.memoizedState.isDehydrated;if(o&&(Os(l,r).flags|=256),r=ou(l,r,!1),r!==2){if(qf&&!o){l.errorRecoveryDisabledLanes|=s,xi|=s,i=4;break e}s=an,an=i,s!==null&&(an===null?an=s:an.push.apply(an,s))}i=r}if(s=!1,i!==2)continue}}if(i===1){Os(e,0),La(e,t,0,!0);break}e:{switch(a=e,s=i,s){case 0:case 1:throw Error(N(345));case 4:if((t&4194048)!==t)break;case 6:La(a,t,mn,!za);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(N(329))}if((t&62914560)===t&&(i=mc+300-gn(),10<i)){if(La(a,t,mn,!za),ac(a,0,!0)!==0)break e;ya=t,a.timeoutHandle=Yp(Um.bind(null,a,n,an,Co,vd,t,mn,xi,Es,za,s,"Throttled",-0,0),i);break e}Um(a,n,an,Co,vd,t,mn,xi,Es,za,s,null,-0,0)}}break}while(!0);na(e)}function Um(e,t,n,a,i,s,r,l,o,c,d,f,h,m){if(e.timeoutHandle=-1,f=t.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ha},yp(t,s,f);var v=(s&62914560)===s?mc-gn():(s&4194048)===s?wp-gn():0;if(v=Tx(f,v),v!==null){ya=s,e.cancelPendingCommit=v(Lm.bind(null,e,t,s,n,a,i,r,l,o,d,f,null,h,m)),La(e,s,r,!c);return}}Lm(e,t,s,n,a,i,r,l,o)}function qS(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var i=n[a],s=i.getSnapshot;i=i.value;try{if(!bn(s(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function La(e,t,n,a){t&=~$f,t&=~xi,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var i=t;0<i;){var s=31-yn(i),r=1<<s;a[s]=-1,i&=~r}n!==0&&Av(e,n,t)}function gc(){return Le&6?!0:(sl(0),!1)}function If(){if(Ae!==null){if($e===0)var e=Ae.return;else e=Ae,ma=Mi=null,Of(e),ms=null,Lr=0,e=Ae;for(;e!==null;)ap(e.alternate,e),e=e.return;Ae=null}}function Os(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,rx(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),ya=0,If(),Xe=e,Ae=n=ga(e.current,null),Ne=t,$e=0,cn=null,za=!1,Bs=Fr(e,t),qf=!1,Es=mn=$f=xi=Fa=ft=0,an=Sr=null,vd=!1,t&8&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var i=31-yn(a),s=1<<i;t|=e[i],a&=~s}return Sa=t,lc(),n}function Ep(e,t){_e=null,he.H=Hr,t===Ls||t===cc?(t=hm(),$e=3):t===_f?(t=hm(),$e=4):$e=t===zf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,cn=t,Ae===null&&(ft=1,Oo(e,Rn(t,e.current)))}function jp(){var e=_n.current;return e===null?!0:(Ne&4194048)===Ne?kn===null:(Ne&62914560)===Ne||Ne&536870912?e===kn:!1}function Op(){var e=he.H;return he.H=Hr,e===null?Hr:e}function Ap(){var e=he.A;return he.A=BS,e}function Ro(){ft=4,za||(Ne&4194048)!==Ne&&_n.current!==null||(Bs=!0),!(Fa&134217727)&&!(xi&134217727)||Xe===null||La(Xe,Ne,mn,!1)}function ou(e,t,n){var a=Le;Le|=2;var i=Op(),s=Ap();(Xe!==e||Ne!==t)&&(Co=null,Os(e,t)),t=!1;var r=ft;e:do try{if($e!==0&&Ae!==null){var l=Ae,o=cn;switch($e){case 8:If(),r=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(t=!0);var c=$e;if($e=0,cn=null,cs(e,l,o,c),n&&Bs){r=0;break e}break;default:c=$e,$e=0,cn=null,cs(e,l,o,c)}}$S(),r=ft;break}catch(d){Ep(e,d)}while(!0);return t&&e.shellSuspendCounter++,ma=Mi=null,Le=a,he.H=i,he.A=s,Ae===null&&(Xe=null,Ne=0,lc()),r}function $S(){for(;Ae!==null;)Dp(Ae)}function IS(e,t){var n=Le;Le|=2;var a=Op(),i=Ap();Xe!==e||Ne!==t?(Co=null,No=gn()+500,Os(e,t)):Bs=Fr(e,t);e:do try{if($e!==0&&Ae!==null){t=Ae;var s=cn;t:switch($e){case 1:$e=0,cn=null,cs(e,t,s,1);break;case 2:case 9:if(fm(s)){$e=0,cn=null,zm(t);break}t=function(){$e!==2&&$e!==9||Xe!==e||($e=7),na(e)},s.then(t,t);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:fm(s)?($e=0,cn=null,zm(t)):($e=0,cn=null,cs(e,t,s,7));break;case 5:var r=null;switch(Ae.tag){case 26:r=Ae.memoizedState;case 5:case 27:var l=Ae;if(r?Jp(r):l.stateNode.complete){$e=0,cn=null;var o=l.sibling;if(o!==null)Ae=o;else{var c=l.return;c!==null?(Ae=c,vc(c)):Ae=null}break t}}$e=0,cn=null,cs(e,t,s,5);break;case 6:$e=0,cn=null,cs(e,t,s,6);break;case 8:If(),ft=6;break e;default:throw Error(N(462))}}VS();break}catch(d){Ep(e,d)}while(!0);return ma=Mi=null,he.H=a,he.A=i,Le=n,Ae!==null?0:(Xe=null,Ne=0,lc(),ft)}function VS(){for(;Ae!==null&&!fw();)Dp(Ae)}function Dp(e){var t=np(e.alternate,e,Sa);e.memoizedProps=e.pendingProps,t===null?vc(e):Ae=t}function zm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Dm(n,t,t.pendingProps,t.type,void 0,Ne);break;case 11:t=Dm(n,t,t.pendingProps,t.type.render,t.ref,Ne);break;case 5:Of(t);default:ap(n,t),t=Ae=ay(t,Sa),t=np(n,t,Sa)}e.memoizedProps=e.pendingProps,t===null?vc(e):Ae=t}function cs(e,t,n,a){ma=Mi=null,Of(t),ms=null,Lr=0;var i=t.return;try{if(CS(e,i,t,n,Ne)){ft=1,Oo(e,Rn(n,e.current)),Ae=null;return}}catch(s){if(i!==null)throw Ae=i,s;ft=1,Oo(e,Rn(n,e.current)),Ae=null;return}t.flags&32768?(Re||a===1?e=!0:Bs||Ne&536870912?e=!1:(za=e=!0,(a===2||a===9||a===3||a===6)&&(a=_n.current,a!==null&&a.tag===13&&(a.flags|=16384))),Np(t,e)):vc(t)}function vc(e){var t=e;do{if(t.flags&32768){Np(t,za);return}e=t.return;var n=kS(t.alternate,t,Sa);if(n!==null){Ae=n;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);ft===0&&(ft=5)}function Np(e,t){do{var n=US(e.alternate,e);if(n!==null){n.flags&=32767,Ae=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ae=e;return}Ae=e=n}while(e!==null);ft=6,Ae=null}function Lm(e,t,n,a,i,s,r,l,o){e.cancelPendingCommit=null;do yc();while(At!==0);if(Le&6)throw Error(N(327));if(t!==null){if(t===e.current)throw Error(N(177));if(s=t.lanes|t.childLanes,s|=hf,Sw(e,n,s,r,l,o),e===Xe&&(Ae=Xe=null,Ne=0),js=t,Ga=e,ya=n,yd=s,pd=i,Sp=a,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,XS(vo,function(){return Up(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,t.subtreeFlags&13878||a){a=he.T,he.T=null,i=Be.p,Be.p=2,r=Le,Le|=4;try{zS(e,t,n)}finally{Le=r,Be.p=i,he.T=a}}At=1,Cp(),Rp(),Mp()}}function Cp(){if(At===1){At=0;var e=Ga,t=js,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=he.T,he.T=null;var a=Be.p;Be.p=2;var i=Le;Le|=4;try{mp(t,e);var s=xd,r=Jv(e.containerInfo),l=s.focusedElem,o=s.selectionRange;if(r!==l&&l&&l.ownerDocument&&Qv(l.ownerDocument.documentElement,l)){if(o!==null&&ff(l)){var c=o.start,d=o.end;if(d===void 0&&(d=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(d,l.value.length);else{var f=l.ownerDocument||document,h=f&&f.defaultView||window;if(h.getSelection){var m=h.getSelection(),v=l.textContent.length,b=Math.min(o.start,v),w=o.end===void 0?b:Math.min(o.end,v);!m.extend&&b>w&&(r=w,w=b,b=r);var y=sm(l,b),g=sm(l,w);if(y&&g&&(m.rangeCount!==1||m.anchorNode!==y.node||m.anchorOffset!==y.offset||m.focusNode!==g.node||m.focusOffset!==g.offset)){var p=f.createRange();p.setStart(y.node,y.offset),m.removeAllRanges(),b>w?(m.addRange(p),m.extend(g.node,g.offset)):(p.setEnd(g.node,g.offset),m.addRange(p))}}}}for(f=[],m=l;m=m.parentNode;)m.nodeType===1&&f.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var S=f[l];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}qo=!!Sd,xd=Sd=null}finally{Le=i,Be.p=a,he.T=n}}e.current=t,At=2}}function Rp(){if(At===2){At=0;var e=Ga,t=js,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=he.T,he.T=null;var a=Be.p;Be.p=2;var i=Le;Le|=4;try{cp(e,t.alternate,t)}finally{Le=i,Be.p=a,he.T=n}}At=3}}function Mp(){if(At===4||At===3){At=0,hw();var e=Ga,t=js,n=ya,a=Sp;t.subtreeFlags&10256||t.flags&10256?At=5:(At=0,js=Ga=null,kp(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(Ya=null),sf(n),t=t.stateNode,vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(Zr,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=he.T,i=Be.p,Be.p=2,he.T=null;try{for(var s=e.onRecoverableError,r=0;r<a.length;r++){var l=a[r];s(l.value,{componentStack:l.stack})}}finally{he.T=t,Be.p=i}}ya&3&&yc(),na(e),i=e.pendingLanes,n&261930&&i&42?e===bd?xr++:(xr=0,bd=e):xr=0,sl(0)}}function kp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,nl(t)))}function yc(){return Cp(),Rp(),Mp(),Up()}function Up(){if(At!==5)return!1;var e=Ga,t=yd;yd=0;var n=sf(ya),a=he.T,i=Be.p;try{Be.p=32>n?32:n,he.T=null,n=pd,pd=null;var s=Ga,r=ya;if(At=0,js=Ga=null,ya=0,Le&6)throw Error(N(331));var l=Le;if(Le|=4,bp(s.current),vp(s,s.current,r,n),Le=l,sl(0,!1),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(Zr,s)}catch{}return!0}finally{Be.p=i,he.T=a,kp(e,t)}}function Bm(e,t,n){t=Rn(n,t),t=fd(e.stateNode,t,2),e=Va(e,t,2),e!==null&&(Wr(e,2),na(e))}function Ve(e,t,n){if(e.tag===3)Bm(e,e,n);else for(;t!==null;){if(t.tag===3){Bm(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ya===null||!Ya.has(a))){e=Rn(n,e),n=Py(2),a=Va(t,n,2),a!==null&&(Zy(n,a,t,e),Wr(a,2),na(a));break}}t=t.return}}function cu(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new HS;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(n)||(qf=!0,i.add(n),e=YS.bind(null,e,t,n),t.then(e,e))}function YS(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Xe===e&&(Ne&n)===n&&(ft===4||ft===3&&(Ne&62914560)===Ne&&300>gn()-mc?!(Le&2)&&Os(e,0):$f|=n,Es===Ne&&(Es=0)),na(e)}function zp(e,t){t===0&&(t=Ov()),e=Ri(e,t),e!==null&&(Wr(e,t),na(e))}function GS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zp(e,n)}function KS(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(N(314))}a!==null&&a.delete(t),zp(e,n)}function XS(e,t){return nf(e,t)}var Mo=null,Qi=null,_d=!1,ko=!1,uu=!1,Ba=0;function na(e){e!==Qi&&e.next===null&&(Qi===null?Mo=Qi=e:Qi=Qi.next=e),ko=!0,_d||(_d=!0,JS())}function sl(e,t){if(!uu&&ko){uu=!0;do for(var n=!1,a=Mo;a!==null;){if(e!==0){var i=a.pendingLanes;if(i===0)var s=0;else{var r=a.suspendedLanes,l=a.pingedLanes;s=(1<<31-yn(42|e)+1)-1,s&=i&~(r&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Hm(a,s))}else s=Ne,s=ac(a,a===Xe?s:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),!(s&3)||Fr(a,s)||(n=!0,Hm(a,s));a=a.next}while(n);uu=!1}}function QS(){Lp()}function Lp(){ko=_d=!1;var e=0;Ba!==0&&sx()&&(e=Ba);for(var t=gn(),n=null,a=Mo;a!==null;){var i=a.next,s=Bp(a,t);s===0?(a.next=null,n===null?Mo=i:n.next=i,i===null&&(Qi=n)):(n=a,(e!==0||s&3)&&(ko=!0)),a=i}At!==0&&At!==5||sl(e),Ba!==0&&(Ba=0)}function Bp(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var r=31-yn(s),l=1<<r,o=i[r];o===-1?(!(l&n)||l&a)&&(i[r]=ww(l,t)):o<=t&&(e.expiredLanes|=l),s&=~l}if(t=Xe,n=Ne,n=ac(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&($e===2||$e===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Bc(a),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Fr(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&Bc(a),sf(n)){case 2:case 8:n=Ev;break;case 32:n=vo;break;case 268435456:n=jv;break;default:n=vo}return a=Hp.bind(null,e),n=nf(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&Bc(a),e.callbackPriority=2,e.callbackNode=null,2}function Hp(e,t){if(At!==0&&At!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(yc()&&e.callbackNode!==n)return null;var a=Ne;return a=ac(e,e===Xe?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Tp(e,a,t),Bp(e,gn()),e.callbackNode!=null&&e.callbackNode===n?Hp.bind(null,e):null)}function Hm(e,t){if(yc())return null;Tp(e,t,!0)}function JS(){lx(function(){Le&6?nf(Tv,QS):Lp()})}function Vf(){if(Ba===0){var e=Ss;e===0&&(e=El,El<<=1,!(El&261888)&&(El=256)),Ba=e}return Ba}function qm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Zl(""+e)}function $m(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function PS(e,t,n,a,i){if(t==="submit"&&n&&n.stateNode===i){var s=qm((i[rn]||null).action),r=a.submitter;r&&(t=(t=r[rn]||null)?qm(t.formAction):r.getAttribute("formAction"),t!==null&&(s=t,r=null));var l=new ic("action","action",null,a,i);e.push({event:l,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Ba!==0){var o=r?$m(i,r):new FormData(i);ud(n,{pending:!0,data:o,method:i.method,action:s},null,o)}}else typeof s=="function"&&(l.preventDefault(),o=r?$m(i,r):new FormData(i),ud(n,{pending:!0,data:o,method:i.method,action:s},s,o))},currentTarget:i}]})}}for(var du=0;du<Fu.length;du++){var fu=Fu[du],ZS=fu.toLowerCase(),FS=fu[0].toUpperCase()+fu.slice(1);Gn(ZS,"on"+FS)}Gn(Zv,"onAnimationEnd");Gn(Fv,"onAnimationIteration");Gn(Wv,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(mS,"onTransitionRun");Gn(gS,"onTransitionStart");Gn(vS,"onTransitionCancel");Gn(ey,"onTransitionEnd");_s("onMouseEnter",["mouseout","mouseover"]);_s("onMouseLeave",["mouseout","mouseover"]);_s("onPointerEnter",["pointerout","pointerover"]);_s("onPointerLeave",["pointerout","pointerover"]);Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Di("onBeforeInput",["compositionend","keypress","textInput","paste"]);Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qr));function qp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var s=void 0;if(t)for(var r=a.length-1;0<=r;r--){var l=a[r],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==s&&i.isPropagationStopped())break e;s=l,i.currentTarget=c;try{s(i)}catch(d){po(d)}i.currentTarget=null,s=o}else for(r=0;r<a.length;r++){if(l=a[r],o=l.instance,c=l.currentTarget,l=l.listener,o!==s&&i.isPropagationStopped())break e;s=l,i.currentTarget=c;try{s(i)}catch(d){po(d)}i.currentTarget=null,s=o}}}}function Oe(e,t){var n=t[Yu];n===void 0&&(n=t[Yu]=new Set);var a=e+"__bubble";n.has(a)||($p(t,e,2,!1),n.add(a))}function hu(e,t,n){var a=0;t&&(a|=4),$p(n,e,a,t)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function Yf(e){if(!e[Ul]){e[Ul]=!0,Rv.forEach(function(n){n!=="selectionchange"&&(WS.has(n)||hu(n,!1,e),hu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ul]||(t[Ul]=!0,hu("selectionchange",!1,t))}}function $p(e,t,n,a){switch(e0(t)){case 2:var i=Ox;break;case 8:i=Ax;break;default:i=Qf}n=i.bind(null,t,n,e),i=void 0,!Ju||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function mu(e,t,n,a,i){var s=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var r=a.tag;if(r===3||r===4){var l=a.stateNode.containerInfo;if(l===i)break;if(r===4)for(r=a.return;r!==null;){var o=r.tag;if((o===3||o===4)&&r.stateNode.containerInfo===i)return;r=r.return}for(;l!==null;){if(r=es(l),r===null)return;if(o=r.tag,o===5||o===6||o===26||o===27){a=s=r;continue e}l=l.parentNode}}a=a.return}qv(function(){var c=s,d=of(n),f=[];e:{var h=ty.get(e);if(h!==void 0){var m=ic,v=e;switch(e){case"keypress":if(Wl(n)===0)break e;case"keydown":case"keyup":m=Kw;break;case"focusin":v="focus",m=Vc;break;case"focusout":v="blur",m=Vc;break;case"beforeblur":case"afterblur":m=Vc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=kw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Jw;break;case Zv:case Fv:case Wv:m=Lw;break;case ey:m=Zw;break;case"scroll":case"scrollend":m=Rw;break;case"wheel":m=Ww;break;case"copy":case"cut":case"paste":m=Hw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Zh;break;case"toggle":case"beforetoggle":m=tS}var b=(t&4)!==0,w=!b&&(e==="scroll"||e==="scrollend"),y=b?h!==null?h+"Capture":null:h;b=[];for(var g=c,p;g!==null;){var S=g;if(p=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||p===null||y===null||(S=Rr(g,y),S!=null&&b.push($r(g,S,p))),w)break;g=g.return}0<b.length&&(h=new m(h,v,null,n,d),f.push({event:h,listeners:b}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==Qu&&(v=n.relatedTarget||n.fromElement)&&(es(v)||v[ks]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?es(v):null,v!==null&&(w=Pr(v),b=v.tag,v!==w||b!==5&&b!==27&&b!==6)&&(v=null)):(m=null,v=c),m!==v)){if(b=Jh,S="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(b=Zh,S="onPointerLeave",y="onPointerEnter",g="pointer"),w=m==null?h:lr(m),p=v==null?h:lr(v),h=new b(S,g+"leave",m,n,d),h.target=w,h.relatedTarget=p,S=null,es(d)===c&&(b=new b(y,g+"enter",v,n,d),b.target=p,b.relatedTarget=w,S=b),w=S,m&&v)t:{for(b=ex,y=m,g=v,p=0,S=y;S;S=b(S))p++;S=0;for(var x=g;x;x=b(x))S++;for(;0<p-S;)y=b(y),p--;for(;0<S-p;)g=b(g),S--;for(;p--;){if(y===g||g!==null&&y===g.alternate){b=y;break t}y=b(y),g=b(g)}b=null}else b=null;m!==null&&Im(f,h,m,b,!1),v!==null&&w!==null&&Im(f,w,v,b,!0)}}e:{if(h=c?lr(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=tm;else if(em(h))if(Kv)j=dS;else{j=cS;var T=oS}else m=h.nodeName,!m||m.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?c&&lf(c.elementType)&&(j=tm):j=uS;if(j&&(j=j(e,c))){Gv(f,j,n,d);break e}T&&T(e,h,c),e==="focusout"&&c&&h.type==="number"&&c.memoizedProps.value!=null&&Xu(h,"number",h.value)}switch(T=c?lr(c):window,e){case"focusin":(em(T)||T.contentEditable==="true")&&(as=T,Pu=c,mr=null);break;case"focusout":mr=Pu=as=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,rm(f,n,d);break;case"selectionchange":if(hS)break;case"keydown":case"keyup":rm(f,n,d)}var E;if(df)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ns?Vv(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Iv&&n.locale!=="ko"&&(ns||A!=="onCompositionStart"?A==="onCompositionEnd"&&ns&&(E=$v()):(Ua=d,cf="value"in Ua?Ua.value:Ua.textContent,ns=!0)),T=Uo(c,A),0<T.length&&(A=new Ph(A,e,null,n,d),f.push({event:A,listeners:T}),E?A.data=E:(E=Yv(n),E!==null&&(A.data=E)))),(E=aS?iS(e,n):sS(e,n))&&(A=Uo(c,"onBeforeInput"),0<A.length&&(T=new Ph("onBeforeInput","beforeinput",null,n,d),f.push({event:T,listeners:A}),T.data=E)),PS(f,e,c,n,d)}qp(f,t)})}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Uo(e,t){for(var n=t+"Capture",a=[];e!==null;){var i=e,s=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||s===null||(i=Rr(e,n),i!=null&&a.unshift($r(e,i,s)),i=Rr(e,t),i!=null&&a.push($r(e,i,s))),e.tag===3)return a;e=e.return}return[]}function ex(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Im(e,t,n,a,i){for(var s=t._reactName,r=[];n!==null&&n!==a;){var l=n,o=l.alternate,c=l.stateNode;if(l=l.tag,o!==null&&o===a)break;l!==5&&l!==26&&l!==27||c===null||(o=c,i?(c=Rr(n,s),c!=null&&r.unshift($r(n,c,o))):i||(c=Rr(n,s),c!=null&&r.push($r(n,c,o)))),n=n.return}r.length!==0&&e.push({event:t,listeners:r})}var tx=/\r\n?/g,nx=/\u0000|\uFFFD/g;function Vm(e){return(typeof e=="string"?e:""+e).replace(tx,`
`).replace(nx,"")}function Ip(e,t){return t=Vm(t),Vm(e)===t}function Ye(e,t,n,a,i,s){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||ws(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&ws(e,""+a);break;case"className":Al(e,"class",a);break;case"tabIndex":Al(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Al(e,n,a);break;case"style":Hv(e,a,s);break;case"data":if(t!=="object"){Al(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Zl(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&Ye(e,t,"name",i.name,i,null),Ye(e,t,"formEncType",i.formEncType,i,null),Ye(e,t,"formMethod",i.formMethod,i,null),Ye(e,t,"formTarget",i.formTarget,i,null)):(Ye(e,t,"encType",i.encType,i,null),Ye(e,t,"method",i.method,i,null),Ye(e,t,"target",i.target,i,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Zl(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=ha);break;case"onScroll":a!=null&&Oe("scroll",e);break;case"onScrollEnd":a!=null&&Oe("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(N(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(N(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=Zl(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Oe("beforetoggle",e),Oe("toggle",e),Pl(e,"popover",a);break;case"xlinkActuate":aa(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":aa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":aa(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":aa(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":aa(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":aa(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":aa(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":aa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":aa(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Pl(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Nw.get(n)||n,Pl(e,n,a))}}function wd(e,t,n,a,i,s){switch(n){case"style":Hv(e,a,s);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(N(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(N(60));e.innerHTML=n}}break;case"children":typeof a=="string"?ws(e,a):(typeof a=="number"||typeof a=="bigint")&&ws(e,""+a);break;case"onScroll":a!=null&&Oe("scroll",e);break;case"onScrollEnd":a!=null&&Oe("scrollend",e);break;case"onClick":a!=null&&(e.onclick=ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mv.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),s=e[rn]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,i),typeof a=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,i);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):Pl(e,n,a)}}}function It(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",e),Oe("load",e);var a=!1,i=!1,s;for(s in n)if(n.hasOwnProperty(s)){var r=n[s];if(r!=null)switch(s){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(N(137,t));default:Ye(e,t,s,r,n,null)}}i&&Ye(e,t,"srcSet",n.srcSet,n,null),a&&Ye(e,t,"src",n.src,n,null);return;case"input":Oe("invalid",e);var l=s=r=i=null,o=null,c=null;for(a in n)if(n.hasOwnProperty(a)){var d=n[a];if(d!=null)switch(a){case"name":i=d;break;case"type":r=d;break;case"checked":o=d;break;case"defaultChecked":c=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(N(137,t));break;default:Ye(e,t,a,d,n,null)}}zv(e,s,l,o,c,r,i,!1);return;case"select":Oe("invalid",e),a=r=s=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":r=l;break;case"multiple":a=l;default:Ye(e,t,i,l,n,null)}t=s,n=r,e.multiple=!!a,t!=null?ds(e,!!a,t,!1):n!=null&&ds(e,!!a,n,!0);return;case"textarea":Oe("invalid",e),s=i=a=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":a=l;break;case"defaultValue":i=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(N(91));break;default:Ye(e,t,r,l,n,null)}Bv(e,a,i,s);return;case"option":for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Ye(e,t,o,a,n,null)}return;case"dialog":Oe("beforetoggle",e),Oe("toggle",e),Oe("cancel",e),Oe("close",e);break;case"iframe":case"object":Oe("load",e);break;case"video":case"audio":for(a=0;a<qr.length;a++)Oe(qr[a],e);break;case"image":Oe("error",e),Oe("load",e);break;case"details":Oe("toggle",e);break;case"embed":case"source":case"link":Oe("error",e),Oe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(a=n[c],a!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(N(137,t));default:Ye(e,t,c,a,n,null)}return;default:if(lf(t)){for(d in n)n.hasOwnProperty(d)&&(a=n[d],a!==void 0&&wd(e,t,d,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(a=n[l],a!=null&&Ye(e,t,l,a,n,null))}function ax(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,r=null,l=null,o=null,c=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":o=f;default:a.hasOwnProperty(m)||Ye(e,t,m,null,a,f)}}for(var h in a){var m=a[h];if(f=n[h],a.hasOwnProperty(h)&&(m!=null||f!=null))switch(h){case"type":s=m;break;case"name":i=m;break;case"checked":c=m;break;case"defaultChecked":d=m;break;case"value":r=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(N(137,t));break;default:m!==f&&Ye(e,t,h,m,a,f)}}Ku(e,r,l,o,c,d,s,i);return;case"select":m=r=l=h=null;for(s in n)if(o=n[s],n.hasOwnProperty(s)&&o!=null)switch(s){case"value":break;case"multiple":m=o;default:a.hasOwnProperty(s)||Ye(e,t,s,null,a,o)}for(i in a)if(s=a[i],o=n[i],a.hasOwnProperty(i)&&(s!=null||o!=null))switch(i){case"value":h=s;break;case"defaultValue":l=s;break;case"multiple":r=s;default:s!==o&&Ye(e,t,i,s,a,o)}t=l,n=r,a=m,h!=null?ds(e,!!n,h,!1):!!a!=!!n&&(t!=null?ds(e,!!n,t,!0):ds(e,!!n,n?[]:"",!1));return;case"textarea":m=h=null;for(l in n)if(i=n[l],n.hasOwnProperty(l)&&i!=null&&!a.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ye(e,t,l,null,a,i)}for(r in a)if(i=a[r],s=n[r],a.hasOwnProperty(r)&&(i!=null||s!=null))switch(r){case"value":h=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(N(91));break;default:i!==s&&Ye(e,t,r,i,a,s)}Lv(e,h,m);return;case"option":for(var v in n)if(h=n[v],n.hasOwnProperty(v)&&h!=null&&!a.hasOwnProperty(v))switch(v){case"selected":e.selected=!1;break;default:Ye(e,t,v,null,a,h)}for(o in a)if(h=a[o],m=n[o],a.hasOwnProperty(o)&&h!==m&&(h!=null||m!=null))switch(o){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ye(e,t,o,h,a,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in n)h=n[b],n.hasOwnProperty(b)&&h!=null&&!a.hasOwnProperty(b)&&Ye(e,t,b,null,a,h);for(c in a)if(h=a[c],m=n[c],a.hasOwnProperty(c)&&h!==m&&(h!=null||m!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(N(137,t));break;default:Ye(e,t,c,h,a,m)}return;default:if(lf(t)){for(var w in n)h=n[w],n.hasOwnProperty(w)&&h!==void 0&&!a.hasOwnProperty(w)&&wd(e,t,w,void 0,a,h);for(d in a)h=a[d],m=n[d],!a.hasOwnProperty(d)||h===m||h===void 0&&m===void 0||wd(e,t,d,h,a,m);return}}for(var y in n)h=n[y],n.hasOwnProperty(y)&&h!=null&&!a.hasOwnProperty(y)&&Ye(e,t,y,null,a,h);for(f in a)h=a[f],m=n[f],!a.hasOwnProperty(f)||h===m||h==null&&m==null||Ye(e,t,f,h,a,m)}function Ym(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ix(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var i=n[a],s=i.transferSize,r=i.initiatorType,l=i.duration;if(s&&l&&Ym(r)){for(r=0,l=i.responseEnd,a+=1;a<n.length;a++){var o=n[a],c=o.startTime;if(c>l)break;var d=o.transferSize,f=o.initiatorType;d&&Ym(f)&&(o=o.responseEnd,r+=d*(o<l?1:(l-c)/(o-c)))}if(--a,t+=8*(s+r)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Sd=null,xd=null;function zo(e){return e.nodeType===9?e:e.ownerDocument}function Gm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Td(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gu=null;function sx(){var e=window.event;return e&&e.type==="popstate"?e===gu?!1:(gu=e,!0):(gu=null,!1)}var Yp=typeof setTimeout=="function"?setTimeout:void 0,rx=typeof clearTimeout=="function"?clearTimeout:void 0,Km=typeof Promise=="function"?Promise:void 0,lx=typeof queueMicrotask=="function"?queueMicrotask:typeof Km<"u"?function(e){return Km.resolve(null).then(e).catch(ox)}:Yp;function ox(e){setTimeout(function(){throw e})}function ti(e){return e==="head"}function Xm(e,t){var n=t,a=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(i),Ds(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")Tr(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Tr(n);for(var s=n.firstChild;s;){var r=s.nextSibling,l=s.nodeName;s[el]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=r}}else n==="body"&&Tr(e.ownerDocument.body);n=i}while(n);Ds(t)}function Qm(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function Ed(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ed(n),rf(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function cx(e,t,n,a){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[el])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Un(e.nextSibling),e===null)break}return null}function ux(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Un(e.nextSibling),e===null))return null;return e}function Gp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Un(e.nextSibling),e===null))return null;return e}function jd(e){return e.data==="$?"||e.data==="$~"}function Od(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function dx(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ad=null;function Jm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Un(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Pm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Kp(e,t,n){switch(t=zo(n),e){case"html":if(e=t.documentElement,!e)throw Error(N(452));return e;case"head":if(e=t.head,!e)throw Error(N(453));return e;case"body":if(e=t.body,!e)throw Error(N(454));return e;default:throw Error(N(451))}}function Tr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);rf(e)}var zn=new Map,Zm=new Set;function Lo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xa=Be.d;Be.d={f:fx,r:hx,D:mx,C:gx,L:vx,m:yx,X:bx,S:px,M:_x};function fx(){var e=xa.f(),t=gc();return e||t}function hx(e){var t=Us(e);t!==null&&t.tag===5&&t.type==="form"?Hy(t):xa.r(e)}var Hs=typeof document>"u"?null:document;function Xp(e,t,n){var a=Hs;if(a&&typeof t=="string"&&t){var i=Cn(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),Zm.has(i)||(Zm.add(i),e={rel:e,crossOrigin:n,href:t},a.querySelector(i)===null&&(t=a.createElement("link"),It(t,"link",e),Rt(t),a.head.appendChild(t)))}}function mx(e){xa.D(e),Xp("dns-prefetch",e,null)}function gx(e,t){xa.C(e,t),Xp("preconnect",e,t)}function vx(e,t,n){xa.L(e,t,n);var a=Hs;if(a&&e&&t){var i='link[rel="preload"][as="'+Cn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+Cn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+Cn(n.imageSizes)+'"]')):i+='[href="'+Cn(e)+'"]';var s=i;switch(t){case"style":s=As(e);break;case"script":s=qs(e)}zn.has(s)||(e=tt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),zn.set(s,e),a.querySelector(i)!==null||t==="style"&&a.querySelector(rl(s))||t==="script"&&a.querySelector(ll(s))||(t=a.createElement("link"),It(t,"link",e),Rt(t),a.head.appendChild(t)))}}function yx(e,t){xa.m(e,t);var n=Hs;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+Cn(a)+'"][href="'+Cn(e)+'"]',s=i;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=qs(e)}if(!zn.has(s)&&(e=tt({rel:"modulepreload",href:e},t),zn.set(s,e),n.querySelector(i)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ll(s)))return}a=n.createElement("link"),It(a,"link",e),Rt(a),n.head.appendChild(a)}}}function px(e,t,n){xa.S(e,t,n);var a=Hs;if(a&&e){var i=us(a).hoistableStyles,s=As(e);t=t||"default";var r=i.get(s);if(!r){var l={loading:0,preload:null};if(r=a.querySelector(rl(s)))l.loading=5;else{e=tt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=zn.get(s))&&Gf(e,n);var o=r=a.createElement("link");Rt(o),It(o,"link",e),o._p=new Promise(function(c,d){o.onload=c,o.onerror=d}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,lo(r,t,a)}r={type:"stylesheet",instance:r,count:1,state:l},i.set(s,r)}}}function bx(e,t){xa.X(e,t);var n=Hs;if(n&&e){var a=us(n).hoistableScripts,i=qs(e),s=a.get(i);s||(s=n.querySelector(ll(i)),s||(e=tt({src:e,async:!0},t),(t=zn.get(i))&&Kf(e,t),s=n.createElement("script"),Rt(s),It(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},a.set(i,s))}}function _x(e,t){xa.M(e,t);var n=Hs;if(n&&e){var a=us(n).hoistableScripts,i=qs(e),s=a.get(i);s||(s=n.querySelector(ll(i)),s||(e=tt({src:e,async:!0,type:"module"},t),(t=zn.get(i))&&Kf(e,t),s=n.createElement("script"),Rt(s),It(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},a.set(i,s))}}function Fm(e,t,n,a){var i=(i=qa.current)?Lo(i):null;if(!i)throw Error(N(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=As(n.href),n=us(i).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=As(n.href);var s=us(i).hoistableStyles,r=s.get(e);if(r||(i=i.ownerDocument||i,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,r),(s=i.querySelector(rl(e)))&&!s._p&&(r.instance=s,r.state.loading=5),zn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},zn.set(e,n),s||wx(i,e,n,r.state))),t&&a===null)throw Error(N(528,""));return r}if(t&&a!==null)throw Error(N(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=qs(n),n=us(i).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(N(444,e))}}function As(e){return'href="'+Cn(e)+'"'}function rl(e){return'link[rel="stylesheet"]['+e+"]"}function Qp(e){return tt({},e,{"data-precedence":e.precedence,precedence:null})}function wx(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),It(t,"link",n),Rt(t),e.head.appendChild(t))}function qs(e){return'[src="'+Cn(e)+'"]'}function ll(e){return"script[async]"+e}function Wm(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Cn(n.href)+'"]');if(a)return t.instance=a,Rt(a),a;var i=tt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Rt(a),It(a,"style",i),lo(a,n.precedence,e),t.instance=a;case"stylesheet":i=As(n.href);var s=e.querySelector(rl(i));if(s)return t.state.loading|=4,t.instance=s,Rt(s),s;a=Qp(n),(i=zn.get(i))&&Gf(a,i),s=(e.ownerDocument||e).createElement("link"),Rt(s);var r=s;return r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),It(s,"link",a),t.state.loading|=4,lo(s,n.precedence,e),t.instance=s;case"script":return s=qs(n.src),(i=e.querySelector(ll(s)))?(t.instance=i,Rt(i),i):(a=n,(i=zn.get(s))&&(a=tt({},n),Kf(a,i)),e=e.ownerDocument||e,i=e.createElement("script"),Rt(i),It(i,"link",a),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(N(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(a=t.instance,t.state.loading|=4,lo(a,n.precedence,e));return t.instance}function lo(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=a.length?a[a.length-1]:null,s=i,r=0;r<a.length;r++){var l=a[r];if(l.dataset.precedence===t)s=l;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Gf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Kf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var oo=null;function eg(e,t,n){if(oo===null){var a=new Map,i=oo=new Map;i.set(n,a)}else i=oo,a=i.get(n),a||(a=new Map,i.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[el]||s[Ht]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var r=s.getAttribute(t)||"";r=e+r;var l=a.get(r);l?l.push(s):a.set(r,[s])}}return a}function tg(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Sx(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Jp(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function xx(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=As(a.href),s=t.querySelector(rl(i));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Bo.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,Rt(s);return}s=t.ownerDocument||t,a=Qp(a),(i=zn.get(i))&&Gf(a,i),s=s.createElement("link"),Rt(s);var r=s;r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),It(s,"link",a),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Bo.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var vu=0;function Tx(e,t){return e.stylesheets&&e.count===0&&co(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&co(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&vu===0&&(vu=62500*ix());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&co(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>vu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(i)}}:null}function Bo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)co(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ho=null;function co(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ho=new Map,t.forEach(Ex,e),Ho=null,Bo.call(e))}function Ex(e,t){if(!(t.state.loading&4)){var n=Ho.get(e);if(n)var a=n.get(null);else{n=new Map,Ho.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var r=i[s];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),a=r)}a&&n.set(null,a)}i=t.instance,r=i.getAttribute("data-precedence"),s=n.get(r)||a,s===a&&n.set(null,i),n.set(r,i),this.count++,a=Bo.bind(this),i.addEventListener("load",a),i.addEventListener("error",a),s?s.parentNode.insertBefore(i,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Ir={$$typeof:fa,Provider:null,Consumer:null,_currentValue:bi,_currentValue2:bi,_threadCount:0};function jx(e,t,n,a,i,s,r,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hc(0),this.hiddenUpdates=Hc(null),this.identifierPrefix=a,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Pp(e,t,n,a,i,s,r,l,o,c,d,f){return e=new jx(e,t,n,r,o,c,d,f,l),t=1,s===!0&&(t|=24),s=dn(3,null,null,t),e.current=s,s.stateNode=e,t=pf(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:a,isDehydrated:n,cache:t},wf(s),e}function Zp(e){return e?(e=rs,e):rs}function Fp(e,t,n,a,i,s){i=Zp(i),a.context===null?a.context=i:a.pendingContext=i,a=Ia(t),a.payload={element:n},s=s===void 0?null:s,s!==null&&(a.callback=s),n=Va(e,a,t),n!==null&&(sn(n,e,t),vr(n,e,t))}function ng(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xf(e,t){ng(e,t),(e=e.alternate)&&ng(e,t)}function Wp(e){if(e.tag===13||e.tag===31){var t=Ri(e,67108864);t!==null&&sn(t,e,67108864),Xf(e,67108864)}}function ag(e){if(e.tag===13||e.tag===31){var t=pn();t=af(t);var n=Ri(e,t);n!==null&&sn(n,e,t),Xf(e,t)}}var qo=!0;function Ox(e,t,n,a){var i=he.T;he.T=null;var s=Be.p;try{Be.p=2,Qf(e,t,n,a)}finally{Be.p=s,he.T=i}}function Ax(e,t,n,a){var i=he.T;he.T=null;var s=Be.p;try{Be.p=8,Qf(e,t,n,a)}finally{Be.p=s,he.T=i}}function Qf(e,t,n,a){if(qo){var i=Dd(a);if(i===null)mu(e,t,a,$o,n),ig(e,a);else if(Nx(i,e,t,n,a))a.stopPropagation();else if(ig(e,a),t&4&&-1<Dx.indexOf(e)){for(;i!==null;){var s=Us(i);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var r=ui(s.pendingLanes);if(r!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;r;){var o=1<<31-yn(r);l.entanglements[1]|=o,r&=~o}na(s),!(Le&6)&&(No=gn()+500,sl(0))}}break;case 31:case 13:l=Ri(s,2),l!==null&&sn(l,s,2),gc(),Xf(s,2)}if(s=Dd(a),s===null&&mu(e,t,a,$o,n),s===i)break;i=s}i!==null&&a.stopPropagation()}else mu(e,t,a,null,n)}}function Dd(e){return e=of(e),Jf(e)}var $o=null;function Jf(e){if($o=null,e=es(e),e!==null){var t=Pr(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=bv(t),e!==null)return e;e=null}else if(n===31){if(e=_v(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return $o=e,null}function e0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mw()){case Tv:return 2;case Ev:return 8;case vo:case gw:return 32;case jv:return 268435456;default:return 32}default:return 32}}var Nd=!1,Ka=null,Xa=null,Qa=null,Vr=new Map,Yr=new Map,Ra=[],Dx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ig(e,t){switch(e){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":Vr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(t.pointerId)}}function nr(e,t,n,a,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Us(t),t!==null&&Wp(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Nx(e,t,n,a,i){switch(t){case"focusin":return Ka=nr(Ka,e,t,n,a,i),!0;case"dragenter":return Xa=nr(Xa,e,t,n,a,i),!0;case"mouseover":return Qa=nr(Qa,e,t,n,a,i),!0;case"pointerover":var s=i.pointerId;return Vr.set(s,nr(Vr.get(s)||null,e,t,n,a,i)),!0;case"gotpointercapture":return s=i.pointerId,Yr.set(s,nr(Yr.get(s)||null,e,t,n,a,i)),!0}return!1}function t0(e){var t=es(e.target);if(t!==null){var n=Pr(t);if(n!==null){if(t=n.tag,t===13){if(t=bv(n),t!==null){e.blockedOn=t,Ih(e.priority,function(){ag(n)});return}}else if(t===31){if(t=_v(n),t!==null){e.blockedOn=t,Ih(e.priority,function(){ag(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Dd(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Qu=a,n.target.dispatchEvent(a),Qu=null}else return t=Us(n),t!==null&&Wp(t),e.blockedOn=n,!1;t.shift()}return!0}function sg(e,t,n){uo(e)&&n.delete(t)}function Cx(){Nd=!1,Ka!==null&&uo(Ka)&&(Ka=null),Xa!==null&&uo(Xa)&&(Xa=null),Qa!==null&&uo(Qa)&&(Qa=null),Vr.forEach(sg),Yr.forEach(sg)}function zl(e,t){e.blockedOn===t&&(e.blockedOn=null,Nd||(Nd=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,Cx)))}var Ll=null;function rg(e){Ll!==e&&(Ll=e,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,function(){Ll===e&&(Ll=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],i=e[t+2];if(typeof a!="function"){if(Jf(a||n)===null)continue;break}var s=Us(n);s!==null&&(e.splice(t,3),t-=3,ud(s,{pending:!0,data:i,method:n.method,action:a},a,i))}}))}function Ds(e){function t(o){return zl(o,e)}Ka!==null&&zl(Ka,e),Xa!==null&&zl(Xa,e),Qa!==null&&zl(Qa,e),Vr.forEach(t),Yr.forEach(t);for(var n=0;n<Ra.length;n++){var a=Ra[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Ra.length&&(n=Ra[0],n.blockedOn===null);)t0(n),n.blockedOn===null&&Ra.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var i=n[a],s=n[a+1],r=i[rn]||null;if(typeof s=="function")r||rg(n);else if(r){var l=null;if(s&&s.hasAttribute("formAction")){if(i=s,r=s[rn]||null)l=r.formAction;else if(Jf(i)!==null)continue}else l=r.action;typeof l=="function"?n[a+1]=l:(n.splice(a,3),a-=3),rg(n)}}}function n0(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(r){return i=r})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function Pf(e){this._internalRoot=e}pc.prototype.render=Pf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(N(409));var n=t.current,a=pn();Fp(n,a,e,t,null,null)};pc.prototype.unmount=Pf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fp(e.current,2,null,e,null,null),gc(),t[ks]=null}};function pc(e){this._internalRoot=e}pc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ra.length&&t!==0&&t<Ra[n].priority;n++);Ra.splice(n,0,e),n===0&&t0(e)}};var lg=yv.version;if(lg!=="19.2.0")throw Error(N(527,lg,"19.2.0"));Be.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(N(188)):(e=Object.keys(e).join(","),Error(N(268,e)));return e=lw(t),e=e!==null?wv(e):null,e=e===null?null:e.stateNode,e};var Rx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:he,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Zr=Bl.inject(Rx),vn=Bl}catch{}}tc.createRoot=function(e,t){if(!pv(e))throw Error(N(299));var n=!1,a="",i=Xy,s=Qy,r=Jy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Pp(e,1,!1,null,null,n,a,null,i,s,r,n0),e[ks]=t.current,Yf(e),new Pf(t)};tc.hydrateRoot=function(e,t,n){if(!pv(e))throw Error(N(299));var a=!1,i="",s=Xy,r=Qy,l=Jy,o=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(o=n.formState)),t=Pp(e,1,!0,t,n??null,a,i,o,s,r,l,n0),t.context=Zp(null),n=t.current,a=pn(),a=af(a),i=Ia(a),i.callback=null,Va(n,i,a),n=a,t.current.lanes=n,Wr(t,n),na(t),e[ks]=t.current,Yf(e),new pc(t)};tc.version="19.2.0";function a0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a0)}catch(e){console.error(e)}}a0(),dv.exports=tc;var Mx=dv.exports,Cd=function(e,t){return Cd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},Cd(e,t)};function i0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Cd(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Io=function(){return Io=Object.assign||function(t){for(var n,a=1,i=arguments.length;a<i;a++){n=arguments[a];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Io.apply(this,arguments)};function $s(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n}function s0(e,t,n,a){var i=arguments.length,s=i<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,n):a,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function r0(e,t){return function(n,a){t(n,a,e)}}function l0(e,t,n,a,i,s){function r(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var l=a.kind,o=l==="getter"?"get":l==="setter"?"set":"value",c=!t&&e?a.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,a.name):{}),f,h=!1,m=n.length-1;m>=0;m--){var v={};for(var b in a)v[b]=b==="access"?{}:a[b];for(var b in a.access)v.access[b]=a.access[b];v.addInitializer=function(y){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(r(y||null))};var w=(0,n[m])(l==="accessor"?{get:d.get,set:d.set}:d[o],v);if(l==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(f=r(w.get))&&(d.get=f),(f=r(w.set))&&(d.set=f),(f=r(w.init))&&i.unshift(f)}else(f=r(w))&&(l==="field"?i.unshift(f):d[o]=f)}c&&Object.defineProperty(c,a.name,d),h=!0}function o0(e,t,n){for(var a=arguments.length>2,i=0;i<t.length;i++)n=a?t[i].call(e,n):t[i].call(e);return a?n:void 0}function c0(e){return typeof e=="symbol"?e:"".concat(e)}function u0(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function d0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function F(e,t,n,a){function i(s){return s instanceof n?s:new n(function(r){r(s)})}return new(n||(n=Promise))(function(s,r){function l(d){try{c(a.next(d))}catch(f){r(f)}}function o(d){try{c(a.throw(d))}catch(f){r(f)}}function c(d){d.done?s(d.value):i(d.value).then(l,o)}c((a=a.apply(e,t||[])).next())})}function f0(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,i,s,r=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return r.next=l(0),r.throw=l(1),r.return=l(2),typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function l(c){return function(d){return o([c,d])}}function o(c){if(a)throw new TypeError("Generator is already executing.");for(;r&&(r=0,c[0]&&(n=0)),n;)try{if(a=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(d){c=[6,d],i=0}finally{a=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var bc=Object.create?function(e,t,n,a){a===void 0&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){a===void 0&&(a=n),e[a]=t[n]};function h0(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&bc(t,e,n)}function Vo(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zf(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),i,s=[],r;try{for(;(t===void 0||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return s}function m0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Zf(arguments[t]));return e}function g0(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var a=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],r=0,l=s.length;r<l;r++,i++)a[i]=s[r];return a}function v0(e,t,n){if(n||arguments.length===2)for(var a=0,i=t.length,s;a<i;a++)(s||!(a in t))&&(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||Array.prototype.slice.call(t))}function Ns(e){return this instanceof Ns?(this.v=e,this):new Ns(e)}function y0(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",r),i[Symbol.asyncIterator]=function(){return this},i;function r(m){return function(v){return Promise.resolve(v).then(m,f)}}function l(m,v){a[m]&&(i[m]=function(b){return new Promise(function(w,y){s.push([m,b,w,y])>1||o(m,b)})},v&&(i[m]=v(i[m])))}function o(m,v){try{c(a[m](v))}catch(b){h(s[0][3],b)}}function c(m){m.value instanceof Ns?Promise.resolve(m.value.v).then(d,f):h(s[0][2],m)}function d(m){o("next",m)}function f(m){o("throw",m)}function h(m,v){m(v),s.shift(),s.length&&o(s[0][0],s[0][1])}}function p0(e){var t,n;return t={},a("next"),a("throw",function(i){throw i}),a("return"),t[Symbol.iterator]=function(){return this},t;function a(i,s){t[i]=e[i]?function(r){return(n=!n)?{value:Ns(e[i](r)),done:!1}:s?s(r):r}:s}}function b0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Vo=="function"?Vo(e):e[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(s){n[s]=e[s]&&function(r){return new Promise(function(l,o){r=e[s](r),i(l,o,r.done,r.value)})}}function i(s,r,l,o){Promise.resolve(o).then(function(c){s({value:c,done:l})},r)}}function _0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var kx=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Rd=function(e){return Rd=Object.getOwnPropertyNames||function(t){var n=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[n.length]=a);return n},Rd(e)};function w0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Rd(e),a=0;a<n.length;a++)n[a]!=="default"&&bc(t,e,n[a]);return kx(t,e),t}function S0(e){return e&&e.__esModule?e:{default:e}}function x0(e,t,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(e):a?a.value:t.get(e)}function T0(e,t,n,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function E0(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function j0(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var a,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=t[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=t[Symbol.dispose],n&&(i=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");i&&(a=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:a,async:n})}else n&&e.stack.push({async:!0});return t}var Ux=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var a=new Error(n);return a.name="SuppressedError",a.error=e,a.suppressed=t,a};function O0(e){function t(s){e.error=e.hasError?new Ux(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var n,a=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&a===1)return a=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(s).then(i,function(r){return t(r),i()})}else a|=1}catch(r){t(r)}if(a===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function A0(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,a,i,s,r){return a?t?".jsx":".js":i&&(!s||!r)?n:i+s+"."+r.toLowerCase()+"js"}):e}const zx={__extends:i0,__assign:Io,__rest:$s,__decorate:s0,__param:r0,__esDecorate:l0,__runInitializers:o0,__propKey:c0,__setFunctionName:u0,__metadata:d0,__awaiter:F,__generator:f0,__createBinding:bc,__exportStar:h0,__values:Vo,__read:Zf,__spread:m0,__spreadArrays:g0,__spreadArray:v0,__await:Ns,__asyncGenerator:y0,__asyncDelegator:p0,__asyncValues:b0,__makeTemplateObject:_0,__importStar:w0,__importDefault:S0,__classPrivateFieldGet:x0,__classPrivateFieldSet:T0,__classPrivateFieldIn:E0,__addDisposableResource:j0,__disposeResources:O0,__rewriteRelativeImportExtension:A0},Lx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:j0,get __assign(){return Io},__asyncDelegator:p0,__asyncGenerator:y0,__asyncValues:b0,__await:Ns,__awaiter:F,__classPrivateFieldGet:x0,__classPrivateFieldIn:E0,__classPrivateFieldSet:T0,__createBinding:bc,__decorate:s0,__disposeResources:O0,__esDecorate:l0,__exportStar:h0,__extends:i0,__generator:f0,__importDefault:S0,__importStar:w0,__makeTemplateObject:_0,__metadata:d0,__param:r0,__propKey:c0,__read:Zf,__rest:$s,__rewriteRelativeImportExtension:A0,__runInitializers:o0,__setFunctionName:u0,__spread:m0,__spreadArray:v0,__spreadArrays:g0,__values:Vo,default:zx},Symbol.toStringTag,{value:"Module"})),Bx="modulepreload",Hx=function(e){return"/todo-note/"+e},og={},Is=function(t,n,a){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(n.map(o=>{if(o=Hx(o),o in og)return;og[o]=!0;const c=o.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":Bx,c||(f.as="script"),f.crossOrigin="",f.href=o,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}function s(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return i.then(r=>{for(const l of r||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},qx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Is(async()=>{const{default:a}=await Promise.resolve().then(()=>ki);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)};class Ff extends Error{constructor(t,n="FunctionsError",a){super(t),this.name=n,this.context=a}}class cg extends Ff{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ug extends Ff{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class dg extends Ff{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Md;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Md||(Md={}));class $x{constructor(t,{headers:n={},customFetch:a,region:i=Md.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=qx(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return F(this,arguments,void 0,function*(n,a={}){var i;try{const{headers:s,method:r,body:l,signal:o}=a;let c={},{region:d}=a;d||(d=this.region);const f=new URL(`${this.url}/${n}`);d&&d!=="any"&&(c["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let h;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(c["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)):h=l;const m=yield this.fetch(f.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h,signal:o}).catch(y=>{throw y.name==="AbortError"?y:new cg(y)}),v=m.headers.get("x-relay-error");if(v&&v==="true")throw new ug(m);if(!m.ok)throw new dg(m);let b=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield m.json():b==="application/octet-stream"||b==="application/pdf"?w=yield m.blob():b==="text/event-stream"?w=m:b==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new cg(s)}:{data:null,error:s,response:s instanceof dg||s instanceof ug?s.context:void 0}}})}}var Jt={};const Vs=tv(Lx);var Hl={},ql={},$l={},Il={},Vl={},Ix=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Cs=Ix();const Vx=Cs.fetch,D0=Cs.fetch.bind(Cs),N0=Cs.Headers,Yx=Cs.Request,Gx=Cs.Response,ki=Object.freeze(Object.defineProperty({__proto__:null,Headers:N0,Request:Yx,Response:Gx,default:D0,fetch:Vx},Symbol.toStringTag,{value:"Module"})),Kx=tv(ki);var Yl={},fg;function C0(){if(fg)return Yl;fg=1,Object.defineProperty(Yl,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Yl.default=e,Yl}var hg;function R0(){if(hg)return Vl;hg=1,Object.defineProperty(Vl,"__esModule",{value:!0});const e=Vs,t=e.__importDefault(Kx),n=e.__importDefault(C0());class a{constructor(s){var r,l;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(r=s.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=s.signal,this.isMaybeSingle=(l=s.isMaybeSingle)!==null&&l!==void 0?l:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,r){return this.headers=new Headers(this.headers),this.headers.set(s,r),this}then(s,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,f,h,m;let v=null,b=null,w=null,y=c.status,g=c.statusText;if(c.ok){if(this.method!=="HEAD"){const j=await c.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?b=j:b=JSON.parse(j))}const S=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),x=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");S&&x&&x.length>1&&(w=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(v={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,w=null,y=406,g="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const S=await c.text();try{v=JSON.parse(S),Array.isArray(v)&&c.status===404&&(b=[],v=null,y=200,g="OK")}catch{c.status===404&&S===""?(y=204,g="No Content"):v={message:S}}if(v&&this.isMaybeSingle&&(!((m=v==null?void 0:v.details)===null||m===void 0)&&m.includes("0 rows"))&&(v=null,y=200,g="OK"),v&&this.shouldThrowOnError)throw new n.default(v)}return{error:v,data:b,count:w,status:y,statusText:g}});return this.shouldThrowOnError||(o=o.catch(c=>{var d,f,h;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),o.then(s,r)}returns(){return this}overrideTypes(){return this}}return Vl.default=a,Vl}var mg;function M0(){if(mg)return Il;mg=1,Object.defineProperty(Il,"__esModule",{value:!0});const t=Vs.__importDefault(R0());class n extends t.default{select(i){let s=!1;const r=(i??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:r,foreignTable:l,referencedTable:o=l}={}){const c=o?`${o}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${i}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:r=s}={}){const l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,s,{foreignTable:r,referencedTable:l=r}={}){const o=typeof l>"u"?"offset":`${l}.offset`,c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${i}`),this.url.searchParams.set(c,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:r=!1,buffers:l=!1,wal:o=!1,format:c="text"}={}){var d;const f=[i?"analyze":null,s?"verbose":null,r?"settings":null,l?"buffers":null,o?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${h}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Il.default=n,Il}var gg;function Wf(){if(gg)return $l;gg=1,Object.defineProperty($l,"__esModule",{value:!0});const t=Vs.__importDefault(M0()),n=new RegExp("[,()]");class a extends t.default{eq(s,r){return this.url.searchParams.append(s,`eq.${r}`),this}neq(s,r){return this.url.searchParams.append(s,`neq.${r}`),this}gt(s,r){return this.url.searchParams.append(s,`gt.${r}`),this}gte(s,r){return this.url.searchParams.append(s,`gte.${r}`),this}lt(s,r){return this.url.searchParams.append(s,`lt.${r}`),this}lte(s,r){return this.url.searchParams.append(s,`lte.${r}`),this}like(s,r){return this.url.searchParams.append(s,`like.${r}`),this}likeAllOf(s,r){return this.url.searchParams.append(s,`like(all).{${r.join(",")}}`),this}likeAnyOf(s,r){return this.url.searchParams.append(s,`like(any).{${r.join(",")}}`),this}ilike(s,r){return this.url.searchParams.append(s,`ilike.${r}`),this}ilikeAllOf(s,r){return this.url.searchParams.append(s,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(s,r){return this.url.searchParams.append(s,`ilike(any).{${r.join(",")}}`),this}is(s,r){return this.url.searchParams.append(s,`is.${r}`),this}in(s,r){const l=Array.from(new Set(r)).map(o=>typeof o=="string"&&n.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,r){return typeof r=="string"?this.url.searchParams.append(s,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(s,`cs.{${r.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(r)}`),this}containedBy(s,r){return typeof r=="string"?this.url.searchParams.append(s,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(s,`cd.{${r.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(r)}`),this}rangeGt(s,r){return this.url.searchParams.append(s,`sr.${r}`),this}rangeGte(s,r){return this.url.searchParams.append(s,`nxl.${r}`),this}rangeLt(s,r){return this.url.searchParams.append(s,`sl.${r}`),this}rangeLte(s,r){return this.url.searchParams.append(s,`nxr.${r}`),this}rangeAdjacent(s,r){return this.url.searchParams.append(s,`adj.${r}`),this}overlaps(s,r){return typeof r=="string"?this.url.searchParams.append(s,`ov.${r}`):this.url.searchParams.append(s,`ov.{${r.join(",")}}`),this}textSearch(s,r,{config:l,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${c}fts${d}.${r}`),this}match(s){return Object.entries(s).forEach(([r,l])=>{this.url.searchParams.append(r,`eq.${l}`)}),this}not(s,r,l){return this.url.searchParams.append(s,`not.${r}.${l}`),this}or(s,{foreignTable:r,referencedTable:l=r}={}){const o=l?`${l}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,r,l){return this.url.searchParams.append(s,`${r}.${l}`),this}}return $l.default=a,$l}var vg;function k0(){if(vg)return ql;vg=1,Object.defineProperty(ql,"__esModule",{value:!0});const t=Vs.__importDefault(Wf());class n{constructor(i,{headers:s={},schema:r,fetch:l}){this.url=i,this.headers=new Headers(s),this.schema=r,this.fetch=l}select(i,s){const{head:r=!1,count:l}=s??{},o=r?"HEAD":"GET";let c=!1;const d=(i??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:r=!0}={}){var l;const o="POST";if(s&&this.headers.append("Prefer",`count=${s}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:r=!1,count:l,defaultToNull:o=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),l&&this.headers.append("Prefer",`count=${l}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:s}={}){var r;const l="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:i}={}){var s;const r="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return ql.default=n,ql}var yg;function Xx(){if(yg)return Hl;yg=1,Object.defineProperty(Hl,"__esModule",{value:!0});const e=Vs,t=e.__importDefault(k0()),n=e.__importDefault(Wf());class a{constructor(s,{headers:r={},schema:l,fetch:o}={}){this.url=s,this.headers=new Headers(r),this.schemaName=l,this.fetch=o}from(s){const r=new URL(`${this.url}/${s}`);return new t.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new a(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,r={},{head:l=!1,get:o=!1,count:c}={}){var d;let f;const h=new URL(`${this.url}/rpc/${s}`);let m;l||o?(f=l?"HEAD":"GET",Object.entries(r).filter(([b,w])=>w!==void 0).map(([b,w])=>[b,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([b,w])=>{h.searchParams.append(b,w)})):(f="POST",m=r);const v=new Headers(this.headers);return c&&v.set("Prefer",`count=${c}`),new n.default({method:f,url:h,headers:v,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Hl.default=a,Hl}Object.defineProperty(Jt,"__esModule",{value:!0});var U0=Jt.PostgrestError=G0=Jt.PostgrestBuilder=V0=Jt.PostgrestTransformBuilder=$0=Jt.PostgrestFilterBuilder=H0=Jt.PostgrestQueryBuilder=L0=Jt.PostgrestClient=void 0;const Ys=Vs,z0=Ys.__importDefault(Xx());var L0=Jt.PostgrestClient=z0.default;const B0=Ys.__importDefault(k0());var H0=Jt.PostgrestQueryBuilder=B0.default;const q0=Ys.__importDefault(Wf());var $0=Jt.PostgrestFilterBuilder=q0.default;const I0=Ys.__importDefault(M0());var V0=Jt.PostgrestTransformBuilder=I0.default;const Y0=Ys.__importDefault(R0());var G0=Jt.PostgrestBuilder=Y0.default;const K0=Ys.__importDefault(C0());U0=Jt.PostgrestError=K0.default;var X0=Jt.default={PostgrestClient:z0.default,PostgrestQueryBuilder:B0.default,PostgrestFilterBuilder:q0.default,PostgrestTransformBuilder:I0.default,PostgrestBuilder:Y0.default,PostgrestError:K0.default};const Qx=L_({__proto__:null,get PostgrestBuilder(){return G0},get PostgrestClient(){return L0},get PostgrestError(){return U0},get PostgrestFilterBuilder(){return $0},get PostgrestQueryBuilder(){return H0},get PostgrestTransformBuilder(){return V0},default:X0},[Jt]),{PostgrestClient:Jx,PostgrestQueryBuilder:zO,PostgrestFilterBuilder:LO,PostgrestTransformBuilder:BO,PostgrestBuilder:HO,PostgrestError:qO}=X0||Qx;class Px{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const a=n.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const a=this.getWebSocketConstructor();return new a(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Zx="2.78.0",Fx=`realtime-js/${Zx}`,Wx="1.0.0",kd=1e4,eT=1e3,tT=100;var Er;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Er||(Er={}));var jt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(jt||(jt={}));var In;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(In||(In={}));var Ud;(function(e){e.websocket="websocket"})(Ud||(Ud={}));var gi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(gi||(gi={}));class nT{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,n,a)}_decodeBroadcast(t,n,a){const i=n.getUint8(1),s=n.getUint8(2);let r=this.HEADER_LENGTH+2;const l=a.decode(t.slice(r,r+i));r=r+i;const o=a.decode(t.slice(r,r+s));r=r+s;const c=JSON.parse(a.decode(t.slice(r,t.byteLength)));return{ref:null,topic:l,event:o,payload:c}}}class Q0{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Pe||(Pe={}));const pg=(e,t,n={})=>{var a;const i=(a=n.skipTypes)!==null&&a!==void 0?a:[];return t?Object.keys(t).reduce((s,r)=>(s[r]=aT(r,e,t,i),s),{}):{}},aT=(e,t,n,a)=>{const i=t.find(l=>l.name===e),s=i==null?void 0:i.type,r=n[e];return s&&!a.includes(s)?J0(s,r):zd(r)},J0=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return lT(t,n)}switch(e){case Pe.bool:return iT(t);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return sT(t);case Pe.json:case Pe.jsonb:return rT(t);case Pe.timestamp:return oT(t);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return zd(t);default:return zd(t)}},zd=e=>e,iT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},sT=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},rT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},lT=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,a=e[n];if(e[0]==="{"&&a==="}"){let s;const r=e.slice(1,n);try{s=JSON.parse("["+r+"]")}catch{s=r?r.split(","):[]}return s.map(l=>J0(t,l))}return e},oT=e=>typeof e=="string"?e.replace(" ","T"):e,P0=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class yu{constructor(t,n,a={},i=kd){this.channel=t,this.event=n,this.payload=a,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var a;return this._hasReceived(t)&&n((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var bg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(bg||(bg={}));class jr{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},i=>{const{onJoin:s,onLeave:r,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jr.syncState(this.state,i,s,r),this.pendingDiffs.forEach(o=>{this.state=jr.syncDiff(this.state,o,s,r)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},i=>{const{onJoin:s,onLeave:r,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=jr.syncDiff(this.state,i,s,r),l())}),this.onJoin((i,s,r)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:r})}),this.onLeave((i,s,r)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,a,i){const s=this.cloneDeep(t),r=this.transformState(n),l={},o={};return this.map(s,(c,d)=>{r[c]||(o[c]=d)}),this.map(r,(c,d)=>{const f=s[c];if(f){const h=d.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),v=d.filter(w=>m.indexOf(w.presence_ref)<0),b=f.filter(w=>h.indexOf(w.presence_ref)<0);v.length>0&&(l[c]=v),b.length>0&&(o[c]=b)}else l[c]=d}),this.syncDiff(s,{joins:l,leaves:o},a,i)}static syncDiff(t,n,a,i){const{joins:s,leaves:r}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return a||(a=()=>{}),i||(i=()=>{}),this.map(s,(l,o)=>{var c;const d=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(o),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}a(l,d,o)}),this.map(r,(l,o)=>{let c=t[l];if(!c)return;const d=o.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=c,i(l,c,o),c.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(a=>n(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,a)=>{const i=t[a];return"metas"in i?n[a]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[a]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _g;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(_g||(_g={}));var Or;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Or||(Or={}));var ca;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ca||(ca={}));class eh{constructor(t,n={config:{}},a){var i,s;if(this.topic=t,this.params=n,this.socket=a,this.bindings={},this.state=jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new yu(this,In.join,this.params,this.timeout),this.rejoinTimer=new Q0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(In.reply,{},(r,l)=>{this._trigger(this._replyEventName(l),r)}),this.presence=new jr(this),this.broadcastEndpointURL=P0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var a,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==jt.closed){const{config:{broadcast:r,presence:l,private:o}}=this.params,c=(i=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(m=>m.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Or.PRESENCE]&&this.bindings[Or.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},h={broadcast:r,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:o};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ca.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ca.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket.setAuth(),m===void 0){t==null||t(ca.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,w=(v=b==null?void 0:b.length)!==null&&v!==void 0?v:0,y=[];for(let g=0;g<w;g++){const p=b[g],{filter:{event:S,schema:x,table:j,filter:T}}=p,E=m&&m[g];if(E&&E.event===S&&E.schema===x&&E.table===j&&E.filter===T)y.push(Object.assign(Object.assign({},p),{id:E.id}));else{this.unsubscribe(),this.state=jt.errored,t==null||t(ca.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(ca.SUBSCRIBED);return}}).receive("error",m=>{this.state=jt.errored,t==null||t(ca.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ca.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,a){return this.state===jt.joined&&t===Or.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,a)}async httpSend(t,n,a={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const r={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,r,(i=a.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let o=l.statusText;try{const c=await l.json();o=c.error||c.message||o}catch{}return Promise.reject(new Error(o))}async send(t,n={}){var a,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:r}=t,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:r,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var r,l,o;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((o=(l=(r=this.params)===null||r===void 0?void 0:r.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=jt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(In.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(i=>{a=new yu(this,In.leave,{},t),a.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jt.closed,this.bindings={}}async _fetchWithTimeout(t,n,a){const i=new AbortController,s=setTimeout(()=>i.abort(),a),r=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),r}_push(t,n,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new yu(this,t,n,a);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>tT){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,a){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,a){var i,s;const r=t.toLocaleLowerCase(),{close:l,error:o,leave:c,join:d}=In;if(a&&[l,o,c,d].indexOf(r)>=0&&a!==this._joinRef())return;let h=this._onMessage(r,n,a);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var v,b,w;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(b=m.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===r}).map(m=>m.callback(h,a)):(s=this.bindings[r])===null||s===void 0||s.filter(m=>{var v,b,w,y,g,p;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in m){const S=m.id,x=(v=m.filter)===null||v===void 0?void 0:v.event;return S&&((b=n.ids)===null||b===void 0?void 0:b.includes(S))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(g=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((p=n==null?void 0:n.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===r}).map(m=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:b,table:w,commit_timestamp:y,type:g,errors:p}=v;h=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:y,eventType:g,new:{},old:{},errors:p}),this._getPayloadRecords(v))}m.callback(h,a)})}_isClosed(){return this.state===jt.closed}_isJoined(){return this.state===jt.joined}_isJoining(){return this.state===jt.joining}_isLeaving(){return this.state===jt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,a){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:a};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===a&&eh.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const a in t)if(t[a]!==n[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(In.close,{},t)}_onError(t){this._on(In.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=pg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=pg(t.columns,t.old_record)),n}}const pu=()=>{},Gl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cT=[1e3,2e3,5e3,1e4],uT=1e4,dT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fT{constructor(t,n){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=kd,this.transport=null,this.heartbeatIntervalMs=Gl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=pu,this.ref=0,this.reconnectTimer=null,this.logger=pu,this.conn=null,this.sendBuffer=[],this.serializer=new nT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...r)=>Is(async()=>{const{default:l}=await Promise.resolve().then(()=>ki);return{default:l}},void 0).then(({default:l})=>l(...r)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...r)=>s(...r)},!(!((a=n==null?void 0:n.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Ud.websocket}`,this.httpEndpoint=P0(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Px.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Wx}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,a){this.logger(t,n,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Er.connecting:return gi.Connecting;case Er.open:return gi.Open;case Er.closing:return gi.Closing;default:return gi.Closed}}isConnected(){return this.connectionState()===gi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const a=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===a);if(i)return i;{const s=new eh(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:a,payload:i,ref:s}=t,r=()=>{this.encode(t,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${n} ${a} (${s})`,i),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(eT,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Gl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:i,payload:s,ref:r}=n,l=r?`(${r})`:"",o=s.status||"";this.log("receive",`${o} ${a} ${i} ${l}`.trim(),s),this.channels.filter(c=>c._isMember(a)).forEach(c=>c._trigger(i,s,r)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(In.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const a=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${a}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const a=new Blob([dT],{type:"application/javascript"});n=URL.createObjectURL(a)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const i={access_token:n,version:Fx};n&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(In.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Q0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,a,i,s,r,l,o,c,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(a=t==null?void 0:t.timeout)!==null&&a!==void 0?a:kd,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Gl.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(r=t==null?void 0:t.accessToken)!==null&&r!==void 0?r:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:pu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=t==null?void 0:t.reconnectAfterMs)!==null&&o!==void 0?o:f=>cT[f-1]||uT,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(f,h)=>h(JSON.stringify(f)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class th extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ot(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class hT extends th{constructor(t,n,a){super(t),this.name="StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ld extends th{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const nh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Is(async()=>{const{default:a}=await Promise.resolve().then(()=>ki);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)},mT=()=>F(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Is(()=>Promise.resolve().then(()=>ki),void 0)).Response:Response}),Bd=e=>{if(Array.isArray(e))return e.map(n=>Bd(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,a])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Bd(a)}),t},gT=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},bu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},vT=(e,t,n)=>F(void 0,void 0,void 0,function*(){const a=yield mT();e instanceof a&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,r=(i==null?void 0:i.statusCode)||s+"";t(new hT(bu(i),s,r))}).catch(i=>{t(new Ld(bu(i),i))}):t(new Ld(bu(e),e))}),yT=(e,t,n,a)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!a?i:(gT(a)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(a)):i.body=a,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function ol(e,t,n,a,i,s){return F(this,void 0,void 0,function*(){return new Promise((r,l)=>{e(n,yT(t,a,i,s)).then(o=>{if(!o.ok)throw o;return a!=null&&a.noResolveJson?o:o.json()}).then(o=>r(o)).catch(o=>vT(o,l,a))})})}function Gr(e,t,n,a){return F(this,void 0,void 0,function*(){return ol(e,"GET",t,n,a)})}function qn(e,t,n,a,i){return F(this,void 0,void 0,function*(){return ol(e,"POST",t,a,i,n)})}function Hd(e,t,n,a,i){return F(this,void 0,void 0,function*(){return ol(e,"PUT",t,a,i,n)})}function pT(e,t,n,a){return F(this,void 0,void 0,function*(){return ol(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),a)})}function ah(e,t,n,a,i){return F(this,void 0,void 0,function*(){return ol(e,"DELETE",t,a,i,n)})}class bT{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return F(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ot(t))return{data:null,error:t};throw t}})}}var Z0;class _T{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[Z0]="BlobDownloadBuilder",this.promise=null}asStream(){return new bT(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return F(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ot(t))return{data:null,error:t};throw t}})}}Z0=Symbol.toStringTag;const wT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ST{constructor(t,n={},a,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=a,this.fetch=nh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,a,i){return F(this,void 0,void 0,function*(){try{let s;const r=Object.assign(Object.assign({},wg),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(r.upsert)});const o=r.metadata;typeof Blob<"u"&&a instanceof Blob?(s=new FormData,s.append("cacheControl",r.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",a)):typeof FormData<"u"&&a instanceof FormData?(s=a,s.append("cacheControl",r.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=a,l["cache-control"]=`max-age=${r.cacheControl}`,l["content-type"]=r.contentType,o&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),f=yield(t=="PUT"?Hd:qn)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:l},r!=null&&r.duplex?{duplex:r.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ot(s))return{data:null,error:s};throw s}})}upload(t,n,a){return F(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,a)})}uploadToSignedUrl(t,n,a,i){return F(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),r=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${r}`);l.searchParams.set("token",n);try{let o;const c=Object.assign({upsert:wg.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&a instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),o.append("",a)):typeof FormData<"u"&&a instanceof FormData?(o=a,o.append("cacheControl",c.cacheControl)):(o=a,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield Hd(this.fetch,l.toString(),o,{headers:d});return{data:{path:s,fullPath:f.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ot(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(t,n){return F(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield qn(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:i}),r=new URL(this.url+s.url),l=r.searchParams.get("token");if(!l)throw new th("No token returned by API");return{data:{signedUrl:r.toString(),path:t,token:l},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}update(t,n,a){return F(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,a)})}move(t,n,a){return F(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}copy(t,n,a){return F(this,void 0,void 0,function*(){try{return{data:{path:(yield qn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,a){return F(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield qn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const r=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${r}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,a){return F(this,void 0,void 0,function*(){try{const i=yield qn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:i.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),r=s?`?${s}`:"",l=this._getFinalPath(t),o=()=>Gr(this.fetch,`${this.url}/${i}/${l}${r}`,{headers:this.headers,noResolveJson:!0});return new _T(o,this.shouldThrowOnError)}info(t){return F(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const a=yield Gr(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Bd(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}exists(t){return F(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield pT(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ot(a)&&a instanceof Ld){const i=a.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,n){const a=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&i.push(o);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${c}`)}}}remove(t){return F(this,void 0,void 0,function*(){try{return{data:yield ah(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}list(t,n,a){return F(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},wT),n),{prefix:t||""});return{data:yield qn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},a),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}listV2(t,n){return F(this,void 0,void 0,function*(){try{const a=Object.assign({},t);return{data:yield qn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const F0="2.78.0",W0={"X-Client-Info":`storage-js/${F0}`};class xT{constructor(t,n={},a,i){this.shouldThrowOnError=!1;const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},W0),n),this.fetch=nh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return F(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Gr(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}getBucket(t){return F(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}createBucket(t){return F(this,arguments,void 0,function*(n,a={public:!1}){try{return{data:yield qn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return F(this,void 0,void 0,function*(){try{return{data:yield Hd(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}emptyBucket(t){return F(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}deleteBucket(t){return F(this,void 0,void 0,function*(){try{return{data:yield ah(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class TT{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},W0),n),this.fetch=nh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return F(this,void 0,void 0,function*(){try{return{data:yield qn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}listBuckets(t){return F(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const a=n.toString(),i=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`;return{data:yield Gr(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}deleteBucket(t){return F(this,void 0,void 0,function*(){try{return{data:yield ah(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}}const ih={"X-Client-Info":`storage-js/${F0}`,"Content-Type":"application/json"};class eb extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function fn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class _u extends eb{constructor(t,n,a){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ET extends eb{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Sg;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Sg||(Sg={}));const sh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Is(async()=>{const{default:a}=await Promise.resolve().then(()=>ki);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)},jT=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},xg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),OT=(e,t,n)=>F(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e.status||500,s=e;if(typeof s.json=="function")s.json().then(r=>{const l=(r==null?void 0:r.statusCode)||(r==null?void 0:r.code)||i+"";t(new _u(xg(r),i,l))}).catch(()=>{const r=i+"",l=s.statusText||`HTTP ${i} error`;t(new _u(l,i,r))});else{const r=i+"",l=s.statusText||`HTTP ${i} error`;t(new _u(l,i,r))}}else t(new ET(xg(e),e))}),AT=(e,t,n,a)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return a?(jT(a)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(a)):i.body=a,Object.assign(Object.assign({},i),n)):i};function DT(e,t,n,a,i,s){return F(this,void 0,void 0,function*(){return new Promise((r,l)=>{e(n,AT(t,a,i,s)).then(o=>{if(!o.ok)throw o;if(a!=null&&a.noResolveJson)return o;const c=o.headers.get("content-type");return!c||!c.includes("application/json")?{}:o.json()}).then(o=>r(o)).catch(o=>OT(o,l,a))})})}function hn(e,t,n,a,i){return F(this,void 0,void 0,function*(){return DT(e,"POST",t,a,i,n)})}class NT{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ih),n),this.fetch=sh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return F(this,void 0,void 0,function*(){try{return{data:(yield hn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}getIndex(t,n){return F(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(fn(a))return{data:null,error:a};throw a}})}listIndexes(t){return F(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return F(this,void 0,void 0,function*(){try{return{data:(yield hn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(fn(a))return{data:null,error:a};throw a}})}}class CT{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ih),n),this.fetch=sh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return F(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield hn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}getVectors(t){return F(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}listVectors(t){return F(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield hn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}queryVectors(t){return F(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}deleteVectors(t){return F(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield hn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}}class RT{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ih),n),this.fetch=sh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return F(this,void 0,void 0,function*(){try{return{data:(yield hn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}getBucket(t){return F(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}listBuckets(){return F(this,arguments,void 0,function*(t={}){try{return{data:yield hn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return F(this,void 0,void 0,function*(){try{return{data:(yield hn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}}class MT extends RT{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new kT(this.url,this.headers,t,this.fetch)}}class kT extends NT{constructor(t,n,a,i){super(t,n,i),this.vectorBucketName=a}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return F(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return F(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return F(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return F(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new UT(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class UT extends CT{constructor(t,n,a,i,s){super(t,n,s),this.vectorBucketName=a,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return F(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return F(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return F(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return F(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return F(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class zT extends xT{constructor(t,n={},a,i){super(t,n,a,i)}from(t){return new ST(this.url,this.headers,t,this.fetch)}get vectors(){return new MT(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new TT(this.url+"/iceberg",this.headers,this.fetch)}}const LT="2.78.0";let ur="";typeof Deno<"u"?ur="deno":typeof document<"u"?ur="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ur="react-native":ur="node";const BT={"X-Client-Info":`supabase-js-${ur}/${LT}`},HT={headers:BT},qT={schema:"public"},$T={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},IT={},VT=e=>{let t;return e?t=e:typeof fetch>"u"?t=D0:t=fetch,(...n)=>t(...n)},YT=()=>typeof Headers>"u"?N0:Headers,GT=(e,t,n)=>{const a=VT(n),i=YT();return async(s,r)=>{var l;const o=(l=await t())!==null&&l!==void 0?l:e;let c=new i(r==null?void 0:r.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),a(s,Object.assign(Object.assign({},r),{headers:c}))}};function KT(e){return e.endsWith("/")?e:e+"/"}function XT(e,t){var n,a;const{db:i,auth:s,realtime:r,global:l}=e,{db:o,auth:c,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},o),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),r),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(a=l==null?void 0:l.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function QT(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(KT(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const tb="2.78.0",Ji=30*1e3,qd=3,wu=qd*Ji,JT="http://localhost:9999",PT="supabase.auth.token",ZT={"X-Client-Info":`gotrue-js/${tb}`},$d="X-Supabase-Api-Version",nb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},FT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,WT=10*60*1e3;class Kr extends Error{constructor(t,n,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=a}}function ae(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class eE extends Kr{constructor(t,n,a){super(t,n,a),this.name="AuthApiError",this.status=n,this.code=a}}function tE(e){return ae(e)&&e.name==="AuthApiError"}class vi extends Kr{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ni extends Kr{constructor(t,n,a,i){super(t,a,i),this.name=n,this.status=a}}class Bn extends ni{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function nE(e){return ae(e)&&e.name==="AuthSessionMissingError"}class qi extends ni{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kl extends ni{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Xl extends ni{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aE(e){return ae(e)&&e.name==="AuthImplicitGrantRedirectError"}class Tg extends ni{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Id extends ni{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Su(e){return ae(e)&&e.name==="AuthRetryableFetchError"}class Eg extends ni{constructor(t,n,a){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=a}}class Vd extends ni{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jg=` 	
\r=`.split(""),iE=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<jg.length;t+=1)e[jg[t].charCodeAt(0)]=-2;for(let t=0;t<Yo.length;t+=1)e[Yo[t].charCodeAt(0)]=t;return e})();function Og(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;n(Yo[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;n(Yo[a]),t.queuedBits-=6}}function ab(e,t,n){const a=iE[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ag(e){const t=[],n=r=>{t.push(String.fromCodePoint(r))},a={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=r=>{lE(r,a,n)};for(let r=0;r<e.length;r+=1)ab(e.charCodeAt(r),i,s);return t.join("")}function sE(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function rE(e,t){for(let n=0;n<e.length;n+=1){let a=e.charCodeAt(n);if(a>55295&&a<=56319){const i=(a-55296)*1024&65535;a=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}sE(a,t)}}function lE(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let a=1;a<6;a+=1)if(!(e>>7-a&1)){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ys(e){const t=[],n={queue:0,queuedBits:0},a=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)ab(e.charCodeAt(i),n,a);return new Uint8Array(t)}function oE(e){const t=[];return rE(e,n=>t.push(n)),new Uint8Array(t)}function pi(e){const t=[],n={queue:0,queuedBits:0},a=i=>{t.push(i)};return e.forEach(i=>Og(i,n,a)),Og(null,n,a),t.join("")}function cE(e){return Math.round(Date.now()/1e3)+e}function uE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Xt=()=>typeof window<"u"&&typeof document<"u",li={tested:!1,writable:!1},ib=()=>{if(!Xt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(li.tested)return li.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),li.tested=!0,li.writable=!0}catch{li.tested=!0,li.writable=!1}return li.writable};function dE(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((a,i)=>{t[i]=a}),t}const sb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Is(async()=>{const{default:a}=await Promise.resolve().then(()=>ki);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)},fE=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Pi=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},oi=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ea=async(e,t)=>{await e.removeItem(t)};class _c{constructor(){this.promise=new _c.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}_c.promiseConstructor=Promise;function xu(e){const t=e.split(".");if(t.length!==3)throw new Vd("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!FT.test(t[a]))throw new Vd("JWT not in base64url format");return{header:JSON.parse(Ag(t[0])),payload:JSON.parse(Ag(t[1])),signature:ys(t[2]),raw:{header:t[0],payload:t[1]}}}async function hE(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function mE(e,t){return new Promise((a,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const r=await e(s);if(!t(s,null,r)){a(r);return}}catch(r){if(!t(s,r)){i(r);return}}})()})}function gE(e){return("0"+e.toString(16)).substr(-2)}function vE(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*a));return i}return crypto.getRandomValues(t),Array.from(t,gE).join("")}async function yE(e){const n=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(a);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function pE(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await yE(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $i(e,t,n=!1){const a=vE();let i=a;n&&(i+="/PASSWORD_RECOVERY"),await Pi(e,`${t}-code-verifier`,i);const s=await pE(a);return[s,a===s?"plain":"s256"]}const bE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _E(e){const t=e.headers.get($d);if(!t||!t.match(bE))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function wE(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function SE(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ii(e){if(!xE.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Tu(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function TE(e,t){return new Proxy(e,{get:(n,a,i)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const s=a.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,a,i)}return!t.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,a,i)}})}function Dg(e){return JSON.parse(JSON.stringify(e))}const hi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),EE=[502,503,504];async function Ng(e){var t;if(!fE(e))throw new Id(hi(e),0);if(EE.includes(e.status))throw new Id(hi(e),e.status);let n;try{n=await e.json()}catch(s){throw new vi(hi(s),s)}let a;const i=_E(e);if(i&&i.getTime()>=nb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?a=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(a=n.error_code),a){if(a==="weak_password")throw new Eg(hi(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Bn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0))throw new Eg(hi(n),e.status,n.weak_password.reasons);throw new eE(hi(n),e.status||500,a)}const jE=(e,t,n,a)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(a),Object.assign(Object.assign({},i),n))};async function fe(e,t,n,a){var i;const s=Object.assign({},a==null?void 0:a.headers);s[$d]||(s[$d]=nb["2024-01-01"].name),a!=null&&a.jwt&&(s.Authorization=`Bearer ${a.jwt}`);const r=(i=a==null?void 0:a.query)!==null&&i!==void 0?i:{};a!=null&&a.redirectTo&&(r.redirect_to=a.redirectTo);const l=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",o=await OE(e,t,n+l,{headers:s,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(o):{data:Object.assign({},o),error:null}}async function OE(e,t,n,a,i,s){const r=jE(t,a,i,s);let l;try{l=await e(n,Object.assign({},r))}catch(o){throw console.error(o),new Id(hi(o),0)}if(l.ok||await Ng(l),a!=null&&a.noResolveJson)return l;try{return await l.json()}catch(o){await Ng(o)}}function Hn(e){var t;let n=null;NE(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=cE(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:a},error:null}}function Cg(e){const t=Hn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ma(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function AE(e){return{data:e,error:null}}function DE(e){const{action_link:t,email_otp:n,hashed_token:a,redirect_to:i,verification_type:s}=e,r=$s(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:a,redirect_to:i,verification_type:s},o=Object.assign({},r);return{data:{properties:l,user:o},error:null}}function Rg(e){return e}function NE(e){return e.access_token&&e.refresh_token&&e.expires_in}const Eu=["global","local","others"];class CE{constructor({url:t="",headers:n={},fetch:a}){this.url=t,this.headers=n,this.fetch=sb(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Eu[0]){if(Eu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Eu.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(ae(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,n={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ma})}catch(a){if(ae(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:n}=t,a=$s(t,["options"]),i=Object.assign(Object.assign({},a),n);return"newEmail"in a&&(i.new_email=a==null?void 0:a.newEmail,delete i.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:DE,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ae(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ma})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,a,i,s,r,l,o;try{const c={nextPage:null,lastPage:0,total:0},d=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Rg});if(d.error)throw d.error;const f=await d.json(),h=(r=d.headers.get("x-total-count"))!==null&&r!==void 0?r:0,m=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return m.length>0&&(m.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);c[`${w}Page`]=b}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ae(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Ii(t);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ma})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ii(t);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ma})}catch(a){if(ae(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,n=!1){Ii(t);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ma})}catch(a){if(ae(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){Ii(t.userId);try{const{data:n,error:a}=await fe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:a}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ii(t.userId),Ii(t.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,a,i,s,r,l,o;try{const c={nextPage:null,lastPage:0,total:0},d=await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Rg});if(d.error)throw d.error;const f=await d.json(),h=(r=d.headers.get("x-total-count"))!==null&&r!==void 0?r:0,m=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return m.length>0&&(m.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);c[`${w}Page`]=b}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ae(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await fe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(ae(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(t){try{return await fe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}}function Mg(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Vi={debug:!!(globalThis&&ib()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class RE extends rb{}async function ME(e,t,n){Vi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),Vi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async i=>{if(i){Vi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Vi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Vi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new RE(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Vi.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function kE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function lb(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function UE(e){return parseInt(e,16)}function zE(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}function LE(e){var t;const{chainId:n,domain:a,expirationTime:i,issuedAt:s=new Date,nonce:r,notBefore:l,requestId:o,resources:c,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(r&&r.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${r}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=lb(e.address),v=d?`${d}://${a}`:a,b=e.statement?`${e.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${m}

${b}`;let y=`URI: ${f}
Version: ${h}
Chain ID: ${n}${r?`
Nonce: ${r}`:""}
Issued At: ${s.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),o&&(y+=`
Request ID: ${o}`),c){let g=`
Resources:`;for(const p of c){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);g+=`
- ${p}`}y+=g}return`${w}
${y}`}class _t extends Error{constructor({message:t,code:n,cause:a,name:i}){var s;super(t,{cause:a}),this.__isWebAuthnError=!0,this.name=(s=i??(a instanceof Error?a.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Go extends _t{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function BE({error:e,options:t}){var n,a,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new _t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((a=s.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new _t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new _t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new _t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new _t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new _t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new _t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(ob(r)){if(s.rp.id!==r)return new _t({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new _t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function HE({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new _t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(ob(a)){if(n.rpId!==a)return new _t({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class qE{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const $E=new qE;function IE(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:a}=e,i=$s(e,["challenge","user","excludeCredentials"]),s=ys(t).buffer,r=Object.assign(Object.assign({},n),{id:ys(n.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:s,user:r});if(a&&a.length>0){l.excludeCredentials=new Array(a.length);for(let o=0;o<a.length;o++){const c=a[o];l.excludeCredentials[o]=Object.assign(Object.assign({},c),{id:ys(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return l}function VE(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,a=$s(e,["challenge","allowCredentials"]),i=ys(t).buffer,s=Object.assign(Object.assign({},a),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let r=0;r<n.length;r++){const l=n[r];s.allowCredentials[r]=Object.assign(Object.assign({},l),{id:ys(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function YE(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:pi(new Uint8Array(e.response.attestationObject)),clientDataJSON:pi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function GE(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,a=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:pi(new Uint8Array(i.authenticatorData)),clientDataJSON:pi(new Uint8Array(i.clientDataJSON)),signature:pi(new Uint8Array(i.signature)),userHandle:i.userHandle?pi(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ob(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function kg(){var e,t;return!!(Xt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function KE(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Go("Browser returned unexpected credential type",t)}:{data:null,error:new Go("Empty credential response",t)}}catch(t){return{data:null,error:BE({error:t,options:e})}}}async function XE(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Go("Browser returned unexpected credential type",t)}:{data:null,error:new Go("Empty credential response",t)}}catch(t){return{data:null,error:HE({error:t,options:e})}}}const QE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},JE={userVerification:"preferred",hints:["security-key"]};function Ko(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),a={};for(const i of e)if(i)for(const s in i){const r=i[s];if(r!==void 0)if(Array.isArray(r))a[s]=r;else if(n(r))a[s]=r;else if(t(r)){const l=a[s];t(l)?a[s]=Ko(l,r):a[s]=Ko(r)}else a[s]=r}return a}function PE(e,t){return Ko(QE,e,t||{})}function ZE(e,t){return Ko(JE,e,t||{})}class FE{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:a,signal:i},s){try{const{data:r,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!r)return{data:null,error:l};const o=i??$E.createNewAbortSignal();if(r.webauthn.type==="create"){const{user:c}=r.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${a}`),c.displayName||(c.displayName=c.name)}switch(r.webauthn.type){case"create":{const c=PE(r.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:f}=await KE({publicKey:c,signal:o});return d?{data:{factorId:t,challengeId:r.id,webauthn:{type:r.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const c=ZE(r.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:f}=await XE(Object.assign(Object.assign({},r.webauthn.credential_options),{publicKey:c,signal:o}));return d?{data:{factorId:t,challengeId:r.id,webauthn:{type:r.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(r){return ae(r)?{data:null,error:r}:{data:null,error:new vi("Unexpected error in challenge",r)}}}async _verify({challengeId:t,factorId:n,webauthn:a}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:a})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new Kr("rpId is required for WebAuthn authentication")};try{if(!kg())return{data:null,error:new vi("Browser does not support WebAuthn",null)};const{data:r,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:a},signal:i},{request:s});if(!r)return{data:null,error:l};const{webauthn:o}=r;return this._verify({factorId:t,challengeId:r.challengeId,webauthn:{type:o.type,rpId:n,rpOrigins:a,credential_response:o.credential_response}})}catch(r){return ae(r)?{data:null,error:r}:{data:null,error:new vi("Unexpected error in authenticate",r)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new Kr("rpId is required for WebAuthn registration")};try{if(!kg())return{data:null,error:new vi("Browser does not support WebAuthn",null)};const{data:r,error:l}=await this._enroll({friendlyName:t});if(!r)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:o,error:c}=await this._challenge({factorId:r.id,friendlyName:r.friendly_name,webauthn:{rpId:n,rpOrigins:a},signal:i},{create:s});return o?this._verify({factorId:r.id,challengeId:o.challengeId,webauthn:{rpId:n,rpOrigins:a,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:c}}catch(r){return ae(r)?{data:null,error:r}:{data:null,error:new vi("Unexpected error in register",r)}}}}kE();const WE={url:JT,storageKey:PT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ZT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ug(e,t,n){return await n()}const Yi={};class Xr{get jwks(){var t,n;return(n=(t=Yi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Yi[this.storageKey]=Object.assign(Object.assign({},Yi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Yi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Yi[this.storageKey]=Object.assign(Object.assign({},Yi[this.storageKey]),{cachedAt:t})}constructor(t){var n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Xr.nextInstanceID,Xr.nextInstanceID+=1,this.instanceID>0&&Xt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},WE),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new CE({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=sb(i.fetch),this.lock=i.lock||Ug,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Xt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ME:this.lock=Ug,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new FE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ib()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mg(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Mg(this.memoryStorage)),Xt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tb}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=dE(window.location.href);let a="none";if(this._isImplicitGrantCallback(n)?a="implicit":await this._isPKCECallback(n)&&(a="pkce"),Xt()&&this.detectSessionInUrl&&a!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,a);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),aE(s)){const o=(t=s.details)===null||t===void 0?void 0:t.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:r,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",r,"redirect type",l),await this._saveSession(r),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ae(n)?{error:n}:{error:new vi("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,a,i;try{const s=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Hn}),{data:r,error:l}=s;if(l||!r)return{data:{user:null,session:null},error:l};const o=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,a,i;try{let s;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await $i(this.storage,this.storageKey)),s=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:v},xform:Hn})}else if("phone"in t){const{phone:d,password:f,options:h}=t;s=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Hn})}else throw new Kl("You must provide either an email or phone number and a password");const{data:r,error:l}=s;if(l||!r)return{data:{user:null,session:null},error:l};const o=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:r,options:l}=t;n=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Cg})}else if("phone"in t){const{phone:s,password:r,options:l}=t;n=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Cg})}else throw new Kl("You must provide either an email or phone number and a password");const{data:a,error:i}=n;return i?{data:{user:null,session:null},error:i}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new qi}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:i})}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,a,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,a,i,s,r,l,o,c,d,f,h;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{chain:b,wallet:w,statement:y,options:g}=t;let p;if(Xt())if(typeof w=="object")p=w;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")p=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=w}const S=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),x=await p.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||x.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=lb(x[0]);let T=(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!T){const A=await p.request({method:"eth_chainId"});T=UE(A)}const E={domain:S.host,address:j,statement:y,uri:S.href,version:"1",chainId:T,nonce:(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(r=(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.notBefore,requestId:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=LE(E),v=await p.request({method:"personal_sign",params:[zE(m),j]})}try{const{data:b,error:w}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:v},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Hn});if(w)throw w;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new qi}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:w})}catch(b){if(ae(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(t){var n,a,i,s,r,l,o,c,d,f,h,m;let v,b;if("message"in t)v=t.message,b=t.signature;else{const{chain:w,wallet:y,statement:g,options:p}=t;let S;if(Xt())if(typeof y=="object")S=y;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))S=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const x=new URL((n=p==null?void 0:p.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const j=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),g?{statement:g}:null));let T;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")T=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)T=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)v=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),b=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${x.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(i=(a=p==null?void 0:p.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=p==null?void 0:p.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((r=p==null?void 0:p.signInWithSolana)===null||r===void 0)&&r.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((f=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...p.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const j=await S.signMessage(new TextEncoder().encode(v),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=j}}try{const{data:w,error:y}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:pi(b)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Hn});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new qi}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(ae(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const n=await oi(this.storage,`${this.storageKey}-code-verifier`),[a,i]=(n??"").split("/");try{const{data:s,error:r}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Hn});if(await Ea(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new qi}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:r})}catch(s){if(ae(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:a,token:i,access_token:s,nonce:r}=t,l=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:i,access_token:s,nonce:r,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Hn}),{data:o,error:c}=l;return c?{data:{user:null,session:null},error:c}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new qi}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:c})}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,a,i,s,r;try{if("email"in t){const{email:l,options:o}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await $i(this.storage,this.storageKey));const{error:f}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(a=o==null?void 0:o.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:o}=t,{data:c,error:d}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=o==null?void 0:o.data)!==null&&i!==void 0?i:{},create_user:(s=o==null?void 0:o.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(r=o==null?void 0:o.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Kl("You must provide either an email or phone number.")}catch(l){if(ae(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,a;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:r,error:l}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Hn});if(l)throw l;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,c=r.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(i){if(ae(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,a,i;try{let s=null,r=null;return this.flowType==="pkce"&&([s,r]=await $i(this.storage,this.storageKey)),await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&a!==void 0?a:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:r}),headers:this.headers,xform:AE})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:a}=t;if(a)throw a;if(!n)throw new Bn;const{error:i}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(ae(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:a,type:i,options:s}=t,{error:r}=await fe(this.fetch,"POST",n,{headers:this.headers,body:{email:a,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in t){const{phone:a,type:i,options:s}=t,{data:r,error:l}=await fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:a,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:r==null?void 0:r.message_id},error:l}}throw new Kl("You must provide either an email or phone number and a type")}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await a,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=n();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await oi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<wu:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const r=await oi(this.userStorage,this.storageKey+"-user");r!=null&&r.user?t.user=r.user:t.user=Tu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const r={value:this.suppressGetSessionWarning};t.user=TE(t.user,r),r.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ma}):await this._useSession(async n=>{var a,i,s;const{data:r,error:l}=n;if(l)throw l;return!(!((a=r.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bn}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ma})})}catch(n){if(ae(n))return nE(n)&&(await this._removeSession(),await Ea(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async a=>{const{data:i,error:s}=a;if(s)throw s;if(!i.session)throw new Bn;const r=i.session;let l=null,o=null;this.flowType==="pkce"&&t.email!=null&&([l,o]=await $i(this.storage,this.storageKey));const{data:c,error:d}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:o}),jwt:r.access_token,xform:Ma});if(d)throw d;return r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(a){if(ae(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Bn;const n=Date.now()/1e3;let a=n,i=!0,s=null;const{payload:r}=xu(t.access_token);if(r.exp&&(a=r.exp,i=a<=n),i){const{data:l,error:o}=await this._callRefreshToken(t.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:o}=await this._getUser(t.access_token);if(o)throw o;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-n,expires_at:a},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(ae(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var a;if(!t){const{data:r,error:l}=n;if(l)throw l;t=(a=r.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new Bn;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ae(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Xt())throw new Xl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Xl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Tg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Tg("No code detected.");const{data:g,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:i,access_token:s,refresh_token:r,expires_in:l,expires_at:o,token_type:c}=t;if(!s||!l||!r||!c)throw new Xl("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;o&&(h=parseInt(o));const m=h-d;m*1e3<=Ji&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const v=h-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,d);const{data:b,error:w}=await this._getUser(s);if(w)throw w;const y={provider_token:a,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:h,refresh_token:r,token_type:c,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(a){if(ae(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await oi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var a;const{data:i,error:s}=n;if(s)return{error:s};const r=(a=i.session)===null||a===void 0?void 0:a.access_token;if(r){const{error:l}=await this.admin.signOut(r,t);if(l&&!(tE(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ea(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=uE(),a={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async n=>{var a,i;try{const{data:{session:s},error:r}=n;if(r)throw r;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let a=null,i=null;this.flowType==="pkce"&&([a,i]=await $i(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:a,error:i}=await this._useSession(async s=>{var r,l,o,c,d;const{data:f,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Xt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(ae(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var a;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:r,provider:l,token:o,access_token:c,nonce:d}=t,f=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=s==null?void 0:s.access_token)!==null&&a!==void 0?a:void 0,body:{provider:l,id_token:o,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Hn}),{data:h,error:m}=f;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new qi}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:m})}catch(i){if(ae(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var a,i;const{data:s,error:r}=n;if(r)throw r;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const a=Date.now();return await mE(async i=>(i>0&&await hE(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Hn})),(i,s)=>{const r=200*Math.pow(2,i);return s&&Su(s)&&Date.now()+r-a<Ji})}catch(a){if(this._debug(n,"error",a),ae(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",a),Xt()&&!n.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,n;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const i=await oi(this.storage,this.storageKey);if(i&&this.userStorage){let r=await oi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!r&&(r={user:i.user},await Pi(this.userStorage,this.storageKey+"-user",r)),i.user=(t=r==null?void 0:r.user)!==null&&t!==void 0?t:Tu()}else if(i&&!i.user&&!i.user){const r=await oi(this.storage,this.storageKey+"-user");r&&(r!=null&&r.user)?(i.user=r.user,await Ea(this.storage,this.storageKey+"-user"),await Pi(this.storage,this.storageKey,i)):i.user=Tu()}if(this._debug(a,"session from storage",i),!this._isValidSession(i)){this._debug(a,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<wu;if(this._debug(a,`session has${s?"":" not"} expired with margin of ${wu}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:r}=await this._callRefreshToken(i.refresh_token);r&&(console.error(r),Su(r)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",r),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:r,error:l}=await this._getUser(i.access_token);!l&&(r!=null&&r.user)?(i.user=r.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(a,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(a,"error",i),console.error(i);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var n,a;if(!t)throw new Bn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new _c;const{data:s,error:r}=await this._refreshAccessToken(t);if(r)throw r;if(!s.session)throw new Bn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),ae(s)){const r={data:null,error:s};return Su(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(r),r}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,a=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],r=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(o){s.push(o)}});if(await Promise.all(r),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),a=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&n.user&&await Pi(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Dg(i);await Pi(this.storage,this.storageKey,s)}else{const i=Dg(n);await Pi(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ea(this.storage,this.storageKey),await Ea(this.storage,this.storageKey+"-code-verifier"),await Ea(this.storage,this.storageKey+"-user"),this.userStorage&&await Ea(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Xt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ji);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:a}}=n;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((a.expires_at*1e3-t)/Ji);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ji}ms, refresh threshold is ${qd} ticks`),i<=qd&&await this._callRefreshToken(a.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,a){const i=[`provider=${encodeURIComponent(n)}`];if(a!=null&&a.redirectTo&&i.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&i.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[s,r]=await $i(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(r)}`});i.push(l.toString())}if(a!=null&&a.queryParams){const s=new URLSearchParams(a.queryParams);i.push(s.toString())}return a!=null&&a.skipBrowserRedirect&&i.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var a;const{data:i,error:s}=n;return s?{data:null,error:s}:await fe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var a,i;const{data:s,error:r}=n;if(r)return{data:null,error:r};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:o,error:c}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=s==null?void 0:s.session)===null||a===void 0?void 0:a.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&o.type==="totp"&&(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:i,error:s}=n;if(s)return{data:null,error:s};const r=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?YE(t.webauthn.credential_response):GE(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:o}=await fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:r,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(n){if(ae(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:i,error:s}=n;if(s)return{data:null,error:s};const r=await fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});if(r.error)return r;const{data:l}=r;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:IE(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:VE(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ae(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:a}=await this.getUser();if(a)return{data:null,error:a};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:a},error:i}=await this.getSession();if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=xu(a.access_token);let r=null;s.aal&&(r=s.aal);let l=r;((n=(t=a.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=s.amr||[];return{data:{currentLevel:r,nextLevel:l,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;return i?{data:null,error:i}:a?await fe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:a.access_token,xform:s=>({data:s,error:null})}):{data:null,error:new Bn}})}catch(n){if(ae(n))return{data:null,error:n};throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async a=>{const{data:{session:i},error:s}=a;if(s)return{data:null,error:s};if(!i)return{data:null,error:new Bn};const r=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return r.data&&r.data.redirect_url&&Xt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(r.data.redirect_url),r})}catch(a){if(ae(a))return{data:null,error:a};throw a}}async _denyAuthorization(t,n){try{return await this._useSession(async a=>{const{data:{session:i},error:s}=a;if(s)return{data:null,error:s};if(!i)return{data:null,error:new Bn};const r=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return r.data&&r.data.redirect_url&&Xt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(r.data.redirect_url),r})}catch(a){if(ae(a))return{data:null,error:a};throw a}}async fetchJwk(t,n={keys:[]}){let a=n.keys.find(l=>l.kid===t);if(a)return a;const i=Date.now();if(a=this.jwks.keys.find(l=>l.kid===t),a&&this.jwks_cached_at+WT>i)return a;const{data:s,error:r}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,a=s.keys.find(l=>l.kid===t),!a)?null:a}async getClaims(t,n={}){try{let a=t;if(!a){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};a=m.session.access_token}const{header:i,payload:s,signature:r,raw:{header:l,payload:o}}=xu(a);n!=null&&n.allowExpired||wE(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:m}=await this.getUser(a);if(m)throw m;return{data:{claims:s,header:i,signature:r},error:null}}const d=SE(i.alg),f=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,r,oE(`${l}.${o}`)))throw new Vd("Invalid JWT signature");return{data:{claims:s,header:i,signature:r},error:null}}catch(a){if(ae(a))return{data:null,error:a};throw a}}}Xr.nextInstanceID=0;const e1=Xr;class t1 extends e1{constructor(t){super(t)}}class n1{constructor(t,n,a){var i,s,r;this.supabaseUrl=t,this.supabaseKey=n;const l=QT(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const o=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:qT,realtime:IT,auth:Object.assign(Object.assign({},$T),{storageKey:o}),global:HT},d=XT(a??{},c);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=d.auth)!==null&&r!==void 0?r:{},this.headers,d.global.fetch),this.fetch=GT(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Jx(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new zT(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new $x(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,a)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:a}=await this.auth.getSession();return(n=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:s,storageKey:r,flowType:l,lock:o,debug:c},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new t1({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:r,autoRefreshToken:t,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:s,flowType:l,lock:o,debug:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new fT(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,a)=>{this._handleTokenChanged(n,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,n,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const a1=(e,t,n)=>new n1(e,t,n);function i1(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}i1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const s1="https://vqpubtahhvtkftafdlrp.supabase.co",r1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZxcHVidGFoaHZ0a2Z0YWZkbHJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMjQ2NjUsImV4cCI6MjA3NzgwMDY2NX0.o2905IF2CWRJ-krYtA6MnL7_KALlNiwD211Sw-of7mI",Ie=a1(s1,r1);function l1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _.useMemo(()=>a=>{t.forEach(i=>i(a))},t)}const wc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Gs(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function rh(e){return"nodeType"in e}function Ft(e){var t,n;return e?Gs(e)?e:rh(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function lh(e){const{Document:t}=Ft(e);return e instanceof t}function cl(e){return Gs(e)?!1:e instanceof Ft(e).HTMLElement}function cb(e){return e instanceof Ft(e).SVGElement}function Ks(e){return e?Gs(e)?e.document:rh(e)?lh(e)?e:cl(e)||cb(e)?e.ownerDocument:document:document:document}const Vn=wc?_.useLayoutEffect:_.useEffect;function Sc(e){const t=_.useRef(e);return Vn(()=>{t.current=e}),_.useCallback(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t.current==null?void 0:t.current(...a)},[])}function o1(){const e=_.useRef(null),t=_.useCallback((a,i)=>{e.current=setInterval(a,i)},[]),n=_.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Qr(e,t){t===void 0&&(t=[e]);const n=_.useRef(e);return Vn(()=>{n.current!==e&&(n.current=e)},t),n}function ul(e,t){const n=_.useRef();return _.useMemo(()=>{const a=e(n.current);return n.current=a,a},[...t])}function Xo(e){const t=Sc(e),n=_.useRef(null),a=_.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,a]}function Qo(e){const t=_.useRef();return _.useEffect(()=>{t.current=e},[e]),t.current}let ju={};function dl(e,t){return _.useMemo(()=>{if(t)return t;const n=ju[e]==null?0:ju[e]+1;return ju[e]=n,e+"-"+n},[e,t])}function ub(e){return function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((s,r)=>{const l=Object.entries(r);for(const[o,c]of l){const d=s[o];d!=null&&(s[o]=d+e*c)}return s},{...t})}}const ps=ub(1),Jr=ub(-1);function c1(e){return"clientX"in e&&"clientY"in e}function xc(e){if(!e)return!1;const{KeyboardEvent:t}=Ft(e.target);return t&&e instanceof t}function u1(e){if(!e)return!1;const{TouchEvent:t}=Ft(e.target);return t&&e instanceof t}function Jo(e){if(u1(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return c1(e)?{x:e.clientX,y:e.clientY}:null}const Wa=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Wa.Translate.toString(e),Wa.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:a}=e;return t+" "+n+"ms "+a}}}),zg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function d1(e){return e.matches(zg)?e:e.querySelector(zg)}const f1={display:"none"};function h1(e){let{id:t,value:n}=e;return st.createElement("div",{id:t,style:f1},n)}function m1(e){let{id:t,announcement:n,ariaLiveType:a="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return st.createElement("div",{id:t,style:i,role:"status","aria-live":a,"aria-atomic":!0},n)}function g1(){const[e,t]=_.useState("");return{announce:_.useCallback(a=>{a!=null&&t(a)},[]),announcement:e}}const db=_.createContext(null);function v1(e){const t=_.useContext(db);_.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function y1(){const[e]=_.useState(()=>new Set),t=_.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[_.useCallback(a=>{let{type:i,event:s}=a;e.forEach(r=>{var l;return(l=r[i])==null?void 0:l.call(r,s)})},[e]),t]}const p1={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},b1={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function _1(e){let{announcements:t=b1,container:n,hiddenTextDescribedById:a,screenReaderInstructions:i=p1}=e;const{announce:s,announcement:r}=g1(),l=dl("DndLiveRegion"),[o,c]=_.useState(!1);if(_.useEffect(()=>{c(!0)},[]),v1(_.useMemo(()=>({onDragStart(f){let{active:h}=f;s(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:m}=f;t.onDragMove&&s(t.onDragMove({active:h,over:m}))},onDragOver(f){let{active:h,over:m}=f;s(t.onDragOver({active:h,over:m}))},onDragEnd(f){let{active:h,over:m}=f;s(t.onDragEnd({active:h,over:m}))},onDragCancel(f){let{active:h,over:m}=f;s(t.onDragCancel({active:h,over:m}))}}),[s,t])),!o)return null;const d=st.createElement(st.Fragment,null,st.createElement(h1,{id:a,value:i.draggable}),st.createElement(m1,{id:l,announcement:r}));return n?yi.createPortal(d,n):d}var Ot;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ot||(Ot={}));function Po(){}function Ou(e,t){return _.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function w1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _.useMemo(()=>[...t].filter(a=>a!=null),[...t])}const Yn=Object.freeze({x:0,y:0});function fb(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function S1(e,t){const n=Jo(e);if(!n)return"0 0";const a={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}function hb(e,t){let{data:{value:n}}=e,{data:{value:a}}=t;return n-a}function x1(e,t){let{data:{value:n}}=e,{data:{value:a}}=t;return a-n}function Lg(e){let{left:t,top:n,height:a,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+a},{x:t+i,y:n+a}]}function mb(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Bg(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const T1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const i=Bg(t,t.left,t.top),s=[];for(const r of a){const{id:l}=r,o=n.get(l);if(o){const c=fb(Bg(o),i);s.push({id:l,data:{droppableContainer:r,value:c}})}}return s.sort(hb)},E1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const i=Lg(t),s=[];for(const r of a){const{id:l}=r,o=n.get(l);if(o){const c=Lg(o),d=i.reduce((h,m,v)=>h+fb(c[v],m),0),f=Number((d/4).toFixed(4));s.push({id:l,data:{droppableContainer:r,value:f}})}}return s.sort(hb)};function j1(e,t){const n=Math.max(t.top,e.top),a=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),r=i-a,l=s-n;if(a<i&&n<s){const o=t.width*t.height,c=e.width*e.height,d=r*l,f=d/(o+c-d);return Number(f.toFixed(4))}return 0}const O1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const i=[];for(const s of a){const{id:r}=s,l=n.get(r);if(l){const o=j1(l,t);o>0&&i.push({id:r,data:{droppableContainer:s,value:o}})}}return i.sort(x1)};function A1(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function gb(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Yn}function D1(e){return function(n){for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return i.reduce((r,l)=>({...r,top:r.top+e*l.y,bottom:r.bottom+e*l.y,left:r.left+e*l.x,right:r.right+e*l.x}),{...n})}}const N1=D1(1);function vb(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function C1(e,t,n){const a=vb(t);if(!a)return e;const{scaleX:i,scaleY:s,x:r,y:l}=a,o=e.left-r-(1-i)*parseFloat(n),c=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?e.width/i:e.width,f=s?e.height/s:e.height;return{width:d,height:f,top:c,right:o+d,bottom:c+f,left:o}}const R1={ignoreTransform:!1};function Xs(e,t){t===void 0&&(t=R1);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:d}=Ft(e).getComputedStyle(e);c&&(n=C1(n,c,d))}const{top:a,left:i,width:s,height:r,bottom:l,right:o}=n;return{top:a,left:i,width:s,height:r,bottom:l,right:o}}function Hg(e){return Xs(e,{ignoreTransform:!0})}function M1(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function k1(e,t){return t===void 0&&(t=Ft(e).getComputedStyle(e)),t.position==="fixed"}function U1(e,t){t===void 0&&(t=Ft(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function Tc(e,t){const n=[];function a(i){if(t!=null&&n.length>=t||!i)return n;if(lh(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!cl(i)||cb(i)||n.includes(i))return n;const s=Ft(e).getComputedStyle(i);return i!==e&&U1(i,s)&&n.push(i),k1(i,s)?n:a(i.parentNode)}return e?a(e):n}function yb(e){const[t]=Tc(e,1);return t??null}function Au(e){return!wc||!e?null:Gs(e)?e:rh(e)?lh(e)||e===Ks(e).scrollingElement?window:cl(e)?e:null:null}function pb(e){return Gs(e)?e.scrollX:e.scrollLeft}function bb(e){return Gs(e)?e.scrollY:e.scrollTop}function Yd(e){return{x:pb(e),y:bb(e)}}var Ct;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ct||(Ct={}));function _b(e){return!wc||!e?!1:e===document.scrollingElement}function wb(e){const t={x:0,y:0},n=_b(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,r=e.scrollTop>=a.y,l=e.scrollLeft>=a.x;return{isTop:i,isLeft:s,isBottom:r,isRight:l,maxScroll:a,minScroll:t}}const z1={x:.2,y:.2};function L1(e,t,n,a,i){let{top:s,left:r,right:l,bottom:o}=n;a===void 0&&(a=10),i===void 0&&(i=z1);const{isTop:c,isBottom:d,isLeft:f,isRight:h}=wb(e),m={x:0,y:0},v={x:0,y:0},b={height:t.height*i.y,width:t.width*i.x};return!c&&s<=t.top+b.height?(m.y=Ct.Backward,v.y=a*Math.abs((t.top+b.height-s)/b.height)):!d&&o>=t.bottom-b.height&&(m.y=Ct.Forward,v.y=a*Math.abs((t.bottom-b.height-o)/b.height)),!h&&l>=t.right-b.width?(m.x=Ct.Forward,v.x=a*Math.abs((t.right-b.width-l)/b.width)):!f&&r<=t.left+b.width&&(m.x=Ct.Backward,v.x=a*Math.abs((t.left+b.width-r)/b.width)),{direction:m,speed:v}}function B1(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:r}=window;return{top:0,left:0,right:s,bottom:r,width:s,height:r}}const{top:t,left:n,right:a,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:a,bottom:i,width:e.clientWidth,height:e.clientHeight}}function Sb(e){return e.reduce((t,n)=>ps(t,Yd(n)),Yn)}function H1(e){return e.reduce((t,n)=>t+pb(n),0)}function q1(e){return e.reduce((t,n)=>t+bb(n),0)}function xb(e,t){if(t===void 0&&(t=Xs),!e)return;const{top:n,left:a,bottom:i,right:s}=t(e);yb(e)&&(i<=0||s<=0||n>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const $1=[["x",["left","right"],H1],["y",["top","bottom"],q1]];class oh{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=Tc(n),i=Sb(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,r,l]of $1)for(const o of r)Object.defineProperty(this,o,{get:()=>{const c=l(a),d=i[s]-c;return this.rect[o]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ar{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...n)})},this.target=t}add(t,n,a){var i;(i=this.target)==null||i.addEventListener(t,n,a),this.listeners.push([t,n,a])}}function I1(e){const{EventTarget:t}=Ft(e);return e instanceof t?e:Ks(e)}function Du(e,t){const n=Math.abs(e.x),a=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+a**2)>t:"x"in t&&"y"in t?n>t.x&&a>t.y:"x"in t?n>t.x:"y"in t?a>t.y:!1}var On;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(On||(On={}));function qg(e){e.preventDefault()}function V1(e){e.stopPropagation()}var Ce;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ce||(Ce={}));const Tb={start:[Ce.Space,Ce.Enter],cancel:[Ce.Esc],end:[Ce.Space,Ce.Enter,Ce.Tab]},Y1=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Ce.Right:return{...n,x:n.x+25};case Ce.Left:return{...n,x:n.x-25};case Ce.Down:return{...n,y:n.y+25};case Ce.Up:return{...n,y:n.y-25}}};class ch{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ar(Ks(n)),this.windowListeners=new Ar(Ft(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(On.Resize,this.handleCancel),this.windowListeners.add(On.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(On.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,a=t.node.current;a&&xb(a),n(Yn)}handleKeyDown(t){if(xc(t)){const{active:n,context:a,options:i}=this.props,{keyboardCodes:s=Tb,coordinateGetter:r=Y1,scrollBehavior:l="smooth"}=i,{code:o}=t;if(s.end.includes(o)){this.handleEnd(t);return}if(s.cancel.includes(o)){this.handleCancel(t);return}const{collisionRect:c}=a.current,d=c?{x:c.left,y:c.top}:Yn;this.referenceCoordinates||(this.referenceCoordinates=d);const f=r(t,{active:n,context:a.current,currentCoordinates:d});if(f){const h=Jr(f,d),m={x:0,y:0},{scrollableAncestors:v}=a.current;for(const b of v){const w=t.code,{isTop:y,isRight:g,isLeft:p,isBottom:S,maxScroll:x,minScroll:j}=wb(b),T=B1(b),E={x:Math.min(w===Ce.Right?T.right-T.width/2:T.right,Math.max(w===Ce.Right?T.left:T.left+T.width/2,f.x)),y:Math.min(w===Ce.Down?T.bottom-T.height/2:T.bottom,Math.max(w===Ce.Down?T.top:T.top+T.height/2,f.y))},A=w===Ce.Right&&!g||w===Ce.Left&&!p,M=w===Ce.Down&&!S||w===Ce.Up&&!y;if(A&&E.x!==f.x){const P=b.scrollLeft+h.x,G=w===Ce.Right&&P<=x.x||w===Ce.Left&&P>=j.x;if(G&&!h.y){b.scrollTo({left:P,behavior:l});return}G?m.x=b.scrollLeft-P:m.x=w===Ce.Right?b.scrollLeft-x.x:b.scrollLeft-j.x,m.x&&b.scrollBy({left:-m.x,behavior:l});break}else if(M&&E.y!==f.y){const P=b.scrollTop+h.y,G=w===Ce.Down&&P<=x.y||w===Ce.Up&&P>=j.y;if(G&&!h.x){b.scrollTo({top:P,behavior:l});return}G?m.y=b.scrollTop-P:m.y=w===Ce.Down?b.scrollTop-x.y:b.scrollTop-j.y,m.y&&b.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,ps(Jr(f,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:a}=this.props;t.preventDefault(),a(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ch.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:a=Tb,onActivation:i}=t,{active:s}=n;const{code:r}=e.nativeEvent;if(a.start.includes(r)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function $g(e){return!!(e&&"distance"in e)}function Ig(e){return!!(e&&"delay"in e)}class uh{constructor(t,n,a){var i;a===void 0&&(a=I1(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:r}=s;this.props=t,this.events=n,this.document=Ks(r),this.documentListeners=new Ar(this.document),this.listeners=new Ar(a),this.windowListeners=new Ar(Ft(r)),this.initialCoordinates=(i=Jo(s))!=null?i:Yn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(On.Resize,this.handleCancel),this.windowListeners.add(On.DragStart,qg),this.windowListeners.add(On.VisibilityChange,this.handleCancel),this.windowListeners.add(On.ContextMenu,qg),this.documentListeners.add(On.Keydown,this.handleKeydown),n){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ig(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if($g(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:a,onPending:i}=this.props;i(a,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(On.Click,V1,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(On.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:a,initialCoordinates:i,props:s}=this,{onMove:r,options:{activationConstraint:l}}=s;if(!i)return;const o=(n=Jo(t))!=null?n:Yn,c=Jr(i,o);if(!a&&l){if($g(l)){if(l.tolerance!=null&&Du(c,l.tolerance))return this.handleCancel();if(Du(c,l.distance))return this.handleStart()}if(Ig(l)&&Du(c,l.tolerance))return this.handleCancel();this.handlePending(l,c);return}t.cancelable&&t.preventDefault(),r(o)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Ce.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const G1={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class dh extends uh{constructor(t){const{event:n}=t,a=Ks(n.target);super(t,G1,a)}}dh.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;return!n.isPrimary||n.button!==0?!1:(a==null||a({event:n}),!0)}}];const K1={move:{name:"mousemove"},end:{name:"mouseup"}};var Gd;(function(e){e[e.RightClick=2]="RightClick"})(Gd||(Gd={}));class X1 extends uh{constructor(t){super(t,K1,Ks(t.event.target))}}X1.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;return n.button===Gd.RightClick?!1:(a==null||a({event:n}),!0)}}];const Nu={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Eb extends uh{constructor(t){super(t,Nu)}static setup(){return window.addEventListener(Nu.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Nu.move.name,t)};function t(){}}}Eb.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;const{touches:i}=n;return i.length>1?!1:(a==null||a({event:n}),!0)}}];var Dr;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Dr||(Dr={}));var Zo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Zo||(Zo={}));function Q1(e){let{acceleration:t,activator:n=Dr.Pointer,canScroll:a,draggingRect:i,enabled:s,interval:r=5,order:l=Zo.TreeOrder,pointerCoordinates:o,scrollableAncestors:c,scrollableAncestorRects:d,delta:f,threshold:h}=e;const m=P1({delta:f,disabled:!s}),[v,b]=o1(),w=_.useRef({x:0,y:0}),y=_.useRef({x:0,y:0}),g=_.useMemo(()=>{switch(n){case Dr.Pointer:return o?{top:o.y,bottom:o.y,left:o.x,right:o.x}:null;case Dr.DraggableRect:return i}},[n,i,o]),p=_.useRef(null),S=_.useCallback(()=>{const j=p.current;if(!j)return;const T=w.current.x*y.current.x,E=w.current.y*y.current.y;j.scrollBy(T,E)},[]),x=_.useMemo(()=>l===Zo.TreeOrder?[...c].reverse():c,[l,c]);_.useEffect(()=>{if(!s||!c.length||!g){b();return}for(const j of x){if((a==null?void 0:a(j))===!1)continue;const T=c.indexOf(j),E=d[T];if(!E)continue;const{direction:A,speed:M}=L1(j,E,g,t,h);for(const P of["x","y"])m[P][A[P]]||(M[P]=0,A[P]=0);if(M.x>0||M.y>0){b(),p.current=j,v(S,r),w.current=M,y.current=A;return}}w.current={x:0,y:0},y.current={x:0,y:0},b()},[t,S,a,b,s,r,JSON.stringify(g),JSON.stringify(m),v,c,x,d,JSON.stringify(h)])}const J1={x:{[Ct.Backward]:!1,[Ct.Forward]:!1},y:{[Ct.Backward]:!1,[Ct.Forward]:!1}};function P1(e){let{delta:t,disabled:n}=e;const a=Qo(t);return ul(i=>{if(n||!a||!i)return J1;const s={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[Ct.Backward]:i.x[Ct.Backward]||s.x===-1,[Ct.Forward]:i.x[Ct.Forward]||s.x===1},y:{[Ct.Backward]:i.y[Ct.Backward]||s.y===-1,[Ct.Forward]:i.y[Ct.Forward]||s.y===1}}},[n,t,a])}function Z1(e,t){const n=t!=null?e.get(t):void 0,a=n?n.node.current:null;return ul(i=>{var s;return t==null?null:(s=a??i)!=null?s:null},[a,t])}function F1(e,t){return _.useMemo(()=>e.reduce((n,a)=>{const{sensor:i}=a,s=i.activators.map(r=>({eventName:r.eventName,handler:t(r.handler,a)}));return[...n,...s]},[]),[e,t])}var Rs;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Rs||(Rs={}));var Kd;(function(e){e.Optimized="optimized"})(Kd||(Kd={}));const Vg=new Map;function W1(e,t){let{dragging:n,dependencies:a,config:i}=t;const[s,r]=_.useState(null),{frequency:l,measure:o,strategy:c}=i,d=_.useRef(e),f=w(),h=Qr(f),m=_.useCallback(function(y){y===void 0&&(y=[]),!h.current&&r(g=>g===null?y:g.concat(y.filter(p=>!g.includes(p))))},[h]),v=_.useRef(null),b=ul(y=>{if(f&&!n)return Vg;if(!y||y===Vg||d.current!==e||s!=null){const g=new Map;for(let p of e){if(!p)continue;if(s&&s.length>0&&!s.includes(p.id)&&p.rect.current){g.set(p.id,p.rect.current);continue}const S=p.node.current,x=S?new oh(o(S),S):null;p.rect.current=x,x&&g.set(p.id,x)}return g}return y},[e,s,n,f,o]);return _.useEffect(()=>{d.current=e},[e]),_.useEffect(()=>{f||m()},[n,f]),_.useEffect(()=>{s&&s.length>0&&r(null)},[JSON.stringify(s)]),_.useEffect(()=>{f||typeof l!="number"||v.current!==null||(v.current=setTimeout(()=>{m(),v.current=null},l))},[l,f,m,...a]),{droppableRects:b,measureDroppableContainers:m,measuringScheduled:s!=null};function w(){switch(c){case Rs.Always:return!1;case Rs.BeforeDragging:return n;default:return!n}}}function fh(e,t){return ul(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function ej(e,t){return fh(e,t)}function tj(e){let{callback:t,disabled:n}=e;const a=Sc(t),i=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(a)},[a,n]);return _.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Ec(e){let{callback:t,disabled:n}=e;const a=Sc(t),i=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(a)},[n]);return _.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function nj(e){return new oh(Xs(e),e)}function Yg(e,t,n){t===void 0&&(t=nj);const[a,i]=_.useState(null);function s(){i(o=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=o??n)!=null?c:null}const d=t(e);return JSON.stringify(o)===JSON.stringify(d)?o:d})}const r=tj({callback(o){if(e)for(const c of o){const{type:d,target:f}=c;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){s();break}}}}),l=Ec({callback:s});return Vn(()=>{s(),e?(l==null||l.observe(e),r==null||r.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),r==null||r.disconnect())},[e]),a}function aj(e){const t=fh(e);return gb(e,t)}const Gg=[];function ij(e){const t=_.useRef(e),n=ul(a=>e?a&&a!==Gg&&e&&t.current&&e.parentNode===t.current.parentNode?a:Tc(e):Gg,[e]);return _.useEffect(()=>{t.current=e},[e]),n}function sj(e){const[t,n]=_.useState(null),a=_.useRef(e),i=_.useCallback(s=>{const r=Au(s.target);r&&n(l=>l?(l.set(r,Yd(r)),new Map(l)):null)},[]);return _.useEffect(()=>{const s=a.current;if(e!==s){r(s);const l=e.map(o=>{const c=Au(o);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,Yd(c)]):null}).filter(o=>o!=null);n(l.length?new Map(l):null),a.current=e}return()=>{r(e),r(s)};function r(l){l.forEach(o=>{const c=Au(o);c==null||c.removeEventListener("scroll",i)})}},[i,e]),_.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,r)=>ps(s,r),Yn):Sb(e):Yn,[e,t])}function Kg(e,t){t===void 0&&(t=[]);const n=_.useRef(null);return _.useEffect(()=>{n.current=null},t),_.useEffect(()=>{const a=e!==Yn;a&&!n.current&&(n.current=e),!a&&n.current&&(n.current=null)},[e]),n.current?Jr(e,n.current):Yn}function rj(e){_.useEffect(()=>{if(!wc)return;const t=e.map(n=>{let{sensor:a}=n;return a.setup==null?void 0:a.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function lj(e,t){return _.useMemo(()=>e.reduce((n,a)=>{let{eventName:i,handler:s}=a;return n[i]=r=>{s(r,t)},n},{}),[e,t])}function jb(e){return _.useMemo(()=>e?M1(e):null,[e])}const Xg=[];function oj(e,t){t===void 0&&(t=Xs);const[n]=e,a=jb(n?Ft(n):null),[i,s]=_.useState(Xg);function r(){s(()=>e.length?e.map(o=>_b(o)?a:new oh(t(o),o)):Xg)}const l=Ec({callback:r});return Vn(()=>{l==null||l.disconnect(),r(),e.forEach(o=>l==null?void 0:l.observe(o))},[e]),i}function Ob(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return cl(t)?t:e}function cj(e){let{measure:t}=e;const[n,a]=_.useState(null),i=_.useCallback(c=>{for(const{target:d}of c)if(cl(d)){a(f=>{const h=t(d);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),s=Ec({callback:i}),r=_.useCallback(c=>{const d=Ob(c);s==null||s.disconnect(),d&&(s==null||s.observe(d)),a(d?t(d):null)},[t,s]),[l,o]=Xo(r);return _.useMemo(()=>({nodeRef:l,rect:n,setRef:o}),[n,l,o])}const uj=[{sensor:dh,options:{}},{sensor:ch,options:{}}],dj={current:{}},fo={draggable:{measure:Hg},droppable:{measure:Hg,strategy:Rs.WhileDragging,frequency:Kd.Optimized},dragOverlay:{measure:Xs}};class Nr extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,a;return(n=(a=this.get(t))==null?void 0:a.node.current)!=null?n:void 0}}const fj={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Nr,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Po},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:fo,measureDroppableContainers:Po,windowRect:null,measuringScheduled:!1},Ab={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Po,draggableNodes:new Map,over:null,measureDroppableContainers:Po},fl=_.createContext(Ab),Db=_.createContext(fj);function hj(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Nr}}}function mj(e,t){switch(t.type){case Ot.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ot.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ot.DragEnd:case Ot.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ot.RegisterDroppable:{const{element:n}=t,{id:a}=n,i=new Nr(e.droppable.containers);return i.set(a,n),{...e,droppable:{...e.droppable,containers:i}}}case Ot.SetDroppableDisabled:{const{id:n,key:a,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||a!==s.key)return e;const r=new Nr(e.droppable.containers);return r.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:r}}}case Ot.UnregisterDroppable:{const{id:n,key:a}=t,i=e.droppable.containers.get(n);if(!i||a!==i.key)return e;const s=new Nr(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function gj(e){let{disabled:t}=e;const{active:n,activatorEvent:a,draggableNodes:i}=_.useContext(fl),s=Qo(a),r=Qo(n==null?void 0:n.id);return _.useEffect(()=>{if(!t&&!a&&s&&r!=null){if(!xc(s)||document.activeElement===s.target)return;const l=i.get(r);if(!l)return;const{activatorNode:o,node:c}=l;if(!o.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[o.current,c.current]){if(!d)continue;const f=d1(d);if(f){f.focus();break}}})}},[a,t,i,r,s]),null}function Nb(e,t){let{transform:n,...a}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...a}),n):n}function vj(e){return _.useMemo(()=>({draggable:{...fo.draggable,...e==null?void 0:e.draggable},droppable:{...fo.droppable,...e==null?void 0:e.droppable},dragOverlay:{...fo.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function yj(e){let{activeNode:t,measure:n,initialRect:a,config:i=!0}=e;const s=_.useRef(!1),{x:r,y:l}=typeof i=="boolean"?{x:i,y:i}:i;Vn(()=>{if(!r&&!l||!t){s.current=!1;return}if(s.current||!a)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const d=n(c),f=gb(d,a);if(r||(f.x=0),l||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=yb(c);h&&h.scrollBy({top:f.y,left:f.x})}},[t,r,l,a,n])}const jc=_.createContext({...Yn,scaleX:1,scaleY:1});var Aa;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Aa||(Aa={}));const pj=_.memo(function(t){var n,a,i,s;let{id:r,accessibility:l,autoScroll:o=!0,children:c,sensors:d=uj,collisionDetection:f=O1,measuring:h,modifiers:m,...v}=t;const b=_.useReducer(mj,void 0,hj),[w,y]=b,[g,p]=y1(),[S,x]=_.useState(Aa.Uninitialized),j=S===Aa.Initialized,{draggable:{active:T,nodes:E,translate:A},droppable:{containers:M}}=w,P=T!=null?E.get(T):null,G=_.useRef({initial:null,translated:null}),Q=_.useMemo(()=>{var Je;return T!=null?{id:T,data:(Je=P==null?void 0:P.data)!=null?Je:dj,rect:G}:null},[T,P]),re=_.useRef(null),[z,C]=_.useState(null),[q,K]=_.useState(null),me=Qr(v,Object.values(v)),J=dl("DndDescribedBy",r),rt=_.useMemo(()=>M.getEnabled(),[M]),De=vj(h),{droppableRects:Qe,measureDroppableContainers:ze,measuringScheduled:He}=W1(rt,{dragging:j,dependencies:[A.x,A.y],config:De.droppable}),Me=Z1(E,T),ht=_.useMemo(()=>q?Jo(q):null,[q]),$=Ui(),ce=ej(Me,De.draggable.measure);yj({activeNode:T!=null?E.get(T):null,config:$.layoutShiftCompensation,initialRect:ce,measure:De.draggable.measure});const te=Yg(Me,De.draggable.measure,ce),we=Yg(Me?Me.parentElement:null),ke=_.useRef({activatorEvent:null,active:null,activeNode:Me,collisionRect:null,collisions:null,droppableRects:Qe,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ue=M.getNodeFor((n=ke.current.over)==null?void 0:n.id),ve=cj({measure:De.dragOverlay.measure}),qe=(a=ve.nodeRef.current)!=null?a:Me,ct=j?(i=ve.rect)!=null?i:te:null,ee=!!(ve.nodeRef.current&&ve.rect),oe=aj(ee?null:te),ye=jb(qe?Ft(qe):null),xe=ij(j?Ue??Me:null),bt=oj(xe),Ke=Nb(m,{transform:{x:A.x-oe.x,y:A.y-oe.y,scaleX:1,scaleY:1},activatorEvent:q,active:Q,activeNodeRect:te,containerNodeRect:we,draggingNodeRect:ct,over:ke.current.over,overlayNodeRect:ve.rect,scrollableAncestors:xe,scrollableAncestorRects:bt,windowRect:ye}),k=ht?ps(ht,A):null,D=sj(xe),R=Kg(D),B=Kg(D,[te]),H=ps(Ke,R),V=ct?N1(ct,Ke):null,X=Q&&V?f({active:Q,collisionRect:V,droppableRects:Qe,droppableContainers:rt,pointerCoordinates:k}):null,L=mb(X,"id"),[ie,Z]=_.useState(null),le=ee?Ke:ps(Ke,B),Y=A1(le,(s=ie==null?void 0:ie.rect)!=null?s:null,te),W=_.useRef(null),ge=_.useCallback((Je,kt)=>{let{sensor:Ut,options:wn}=kt;if(re.current==null)return;const Vt=E.get(re.current);if(!Vt)return;const ut=Je.nativeEvent,zt=new Ut({active:re.current,activeNode:Vt,event:ut,options:wn,context:ke,onAbort(gt){if(!E.get(gt))return;const{onDragAbort:Et}=me.current,Yt={id:gt};Et==null||Et(Yt),g({type:"onDragAbort",event:Yt})},onPending(gt,Sn,Et,Yt){if(!E.get(gt))return;const{onDragPending:Tn}=me.current,En={id:gt,constraint:Sn,initialCoordinates:Et,offset:Yt};Tn==null||Tn(En),g({type:"onDragPending",event:En})},onStart(gt){const Sn=re.current;if(Sn==null)return;const Et=E.get(Sn);if(!Et)return;const{onDragStart:Yt}=me.current,xn={activatorEvent:ut,active:{id:Sn,data:Et.data,rect:G}};yi.unstable_batchedUpdates(()=>{Yt==null||Yt(xn),x(Aa.Initializing),y({type:Ot.DragStart,initialCoordinates:gt,active:Sn}),g({type:"onDragStart",event:xn}),C(W.current),K(ut)})},onMove(gt){y({type:Ot.DragMove,coordinates:gt})},onEnd:Xn(Ot.DragEnd),onCancel:Xn(Ot.DragCancel)});W.current=zt;function Xn(gt){return async function(){const{active:Et,collisions:Yt,over:xn,scrollAdjustedTranslate:Tn}=ke.current;let En=null;if(Et&&Tn){const{cancelDrop:ai}=me.current;En={activatorEvent:ut,active:Et,collisions:Yt,delta:Tn,over:xn},gt===Ot.DragEnd&&typeof ai=="function"&&await Promise.resolve(ai(En))&&(gt=Ot.DragCancel)}re.current=null,yi.unstable_batchedUpdates(()=>{y({type:gt}),x(Aa.Uninitialized),Z(null),C(null),K(null),W.current=null;const ai=gt===Ot.DragEnd?"onDragEnd":"onDragCancel";if(En){const Qs=me.current[ai];Qs==null||Qs(En),g({type:ai,event:En})}})}}},[E]),mt=_.useCallback((Je,kt)=>(Ut,wn)=>{const Vt=Ut.nativeEvent,ut=E.get(wn);if(re.current!==null||!ut||Vt.dndKit||Vt.defaultPrevented)return;const zt={active:ut};Je(Ut,kt.options,zt)===!0&&(Vt.dndKit={capturedBy:kt.sensor},re.current=wn,ge(Ut,kt))},[E,ge]),Kt=F1(d,mt);rj(d),Vn(()=>{te&&S===Aa.Initializing&&x(Aa.Initialized)},[te,S]),_.useEffect(()=>{const{onDragMove:Je}=me.current,{active:kt,activatorEvent:Ut,collisions:wn,over:Vt}=ke.current;if(!kt||!Ut)return;const ut={active:kt,activatorEvent:Ut,collisions:wn,delta:{x:H.x,y:H.y},over:Vt};yi.unstable_batchedUpdates(()=>{Je==null||Je(ut),g({type:"onDragMove",event:ut})})},[H.x,H.y]),_.useEffect(()=>{const{active:Je,activatorEvent:kt,collisions:Ut,droppableContainers:wn,scrollAdjustedTranslate:Vt}=ke.current;if(!Je||re.current==null||!kt||!Vt)return;const{onDragOver:ut}=me.current,zt=wn.get(L),Xn=zt&&zt.rect.current?{id:zt.id,rect:zt.rect.current,data:zt.data,disabled:zt.disabled}:null,gt={active:Je,activatorEvent:kt,collisions:Ut,delta:{x:Vt.x,y:Vt.y},over:Xn};yi.unstable_batchedUpdates(()=>{Z(Xn),ut==null||ut(gt),g({type:"onDragOver",event:gt})})},[L]),Vn(()=>{ke.current={activatorEvent:q,active:Q,activeNode:Me,collisionRect:V,collisions:X,droppableRects:Qe,draggableNodes:E,draggingNode:qe,draggingNodeRect:ct,droppableContainers:M,over:ie,scrollableAncestors:xe,scrollAdjustedTranslate:H},G.current={initial:ct,translated:V}},[Q,Me,X,V,E,qe,ct,Qe,M,ie,xe,H]),Q1({...$,delta:A,draggingRect:V,pointerCoordinates:k,scrollableAncestors:xe,scrollableAncestorRects:bt});const on=_.useMemo(()=>({active:Q,activeNode:Me,activeNodeRect:te,activatorEvent:q,collisions:X,containerNodeRect:we,dragOverlay:ve,draggableNodes:E,droppableContainers:M,droppableRects:Qe,over:ie,measureDroppableContainers:ze,scrollableAncestors:xe,scrollableAncestorRects:bt,measuringConfiguration:De,measuringScheduled:He,windowRect:ye}),[Q,Me,te,q,X,we,ve,E,M,Qe,ie,ze,xe,bt,De,He,ye]),Kn=_.useMemo(()=>({activatorEvent:q,activators:Kt,active:Q,activeNodeRect:te,ariaDescribedById:{draggable:J},dispatch:y,draggableNodes:E,over:ie,measureDroppableContainers:ze}),[q,Kt,Q,te,y,J,E,ie,ze]);return st.createElement(db.Provider,{value:p},st.createElement(fl.Provider,{value:Kn},st.createElement(Db.Provider,{value:on},st.createElement(jc.Provider,{value:Y},c)),st.createElement(gj,{disabled:(l==null?void 0:l.restoreFocus)===!1})),st.createElement(_1,{...l,hiddenTextDescribedById:J}));function Ui(){const Je=(z==null?void 0:z.autoScrollEnabled)===!1,kt=typeof o=="object"?o.enabled===!1:o===!1,Ut=j&&!Je&&!kt;return typeof o=="object"?{...o,enabled:Ut}:{enabled:Ut}}}),bj=_.createContext(null),Qg="button",_j="Draggable";function wj(e){let{id:t,data:n,disabled:a=!1,attributes:i}=e;const s=dl(_j),{activators:r,activatorEvent:l,active:o,activeNodeRect:c,ariaDescribedById:d,draggableNodes:f,over:h}=_.useContext(fl),{role:m=Qg,roleDescription:v="draggable",tabIndex:b=0}=i??{},w=(o==null?void 0:o.id)===t,y=_.useContext(w?jc:bj),[g,p]=Xo(),[S,x]=Xo(),j=lj(r,t),T=Qr(n);Vn(()=>(f.set(t,{id:t,key:s,node:g,activatorNode:S,data:T}),()=>{const A=f.get(t);A&&A.key===s&&f.delete(t)}),[f,t]);const E=_.useMemo(()=>({role:m,tabIndex:b,"aria-disabled":a,"aria-pressed":w&&m===Qg?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[a,m,b,w,v,d.draggable]);return{active:o,activatorEvent:l,activeNodeRect:c,attributes:E,isDragging:w,listeners:a?void 0:j,node:g,over:h,setNodeRef:p,setActivatorNodeRef:x,transform:y}}function Cb(){return _.useContext(Db)}const Sj="Droppable",xj={timeout:25};function Rb(e){let{data:t,disabled:n=!1,id:a,resizeObserverConfig:i}=e;const s=dl(Sj),{active:r,dispatch:l,over:o,measureDroppableContainers:c}=_.useContext(fl),d=_.useRef({disabled:n}),f=_.useRef(!1),h=_.useRef(null),m=_.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:w}={...xj,...i},y=Qr(b??a),g=_.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(y.current)?y.current:[y.current]),m.current=null},w)},[w]),p=Ec({callback:g,disabled:v||!r}),S=_.useCallback((E,A)=>{p&&(A&&(p.unobserve(A),f.current=!1),E&&p.observe(E))},[p]),[x,j]=Xo(S),T=Qr(t);return _.useEffect(()=>{!p||!x.current||(p.disconnect(),f.current=!1,p.observe(x.current))},[x,p]),_.useEffect(()=>(l({type:Ot.RegisterDroppable,element:{id:a,key:s,disabled:n,node:x,rect:h,data:T}}),()=>l({type:Ot.UnregisterDroppable,key:s,id:a})),[a]),_.useEffect(()=>{n!==d.current.disabled&&(l({type:Ot.SetDroppableDisabled,id:a,key:s,disabled:n}),d.current.disabled=n)},[a,s,n,l]),{active:r,rect:h,isOver:(o==null?void 0:o.id)===a,node:x,over:o,setNodeRef:j}}function Tj(e){let{animation:t,children:n}=e;const[a,i]=_.useState(null),[s,r]=_.useState(null),l=Qo(n);return!n&&!a&&l&&i(l),Vn(()=>{if(!s)return;const o=a==null?void 0:a.key,c=a==null?void 0:a.props.id;if(o==null||c==null){i(null);return}Promise.resolve(t(c,s)).then(()=>{i(null)})},[t,a,s]),st.createElement(st.Fragment,null,n,a?_.cloneElement(a,{ref:r}):null)}const Ej={x:0,y:0,scaleX:1,scaleY:1};function jj(e){let{children:t}=e;return st.createElement(fl.Provider,{value:Ab},st.createElement(jc.Provider,{value:Ej},t))}const Oj={position:"fixed",touchAction:"none"},Aj=e=>xc(e)?"transform 250ms ease":void 0,Dj=_.forwardRef((e,t)=>{let{as:n,activatorEvent:a,adjustScale:i,children:s,className:r,rect:l,style:o,transform:c,transition:d=Aj}=e;if(!l)return null;const f=i?c:{...c,scaleX:1,scaleY:1},h={...Oj,width:l.width,height:l.height,top:l.top,left:l.left,transform:Wa.Transform.toString(f),transformOrigin:i&&a?S1(a,l):void 0,transition:typeof d=="function"?d(a):d,...o};return st.createElement(n,{className:r,style:h,ref:t},s)}),Nj=e=>t=>{let{active:n,dragOverlay:a}=t;const i={},{styles:s,className:r}=e;if(s!=null&&s.active)for(const[l,o]of Object.entries(s.active))o!==void 0&&(i[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,o));if(s!=null&&s.dragOverlay)for(const[l,o]of Object.entries(s.dragOverlay))o!==void 0&&a.node.style.setProperty(l,o);return r!=null&&r.active&&n.node.classList.add(r.active),r!=null&&r.dragOverlay&&a.node.classList.add(r.dragOverlay),function(){for(const[o,c]of Object.entries(i))n.node.style.setProperty(o,c);r!=null&&r.active&&n.node.classList.remove(r.active)}},Cj=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Wa.Transform.toString(t)},{transform:Wa.Transform.toString(n)}]},Rj={duration:250,easing:"ease",keyframes:Cj,sideEffects:Nj({styles:{active:{opacity:"0"}}})};function Mj(e){let{config:t,draggableNodes:n,droppableContainers:a,measuringConfiguration:i}=e;return Sc((s,r)=>{if(t===null)return;const l=n.get(s);if(!l)return;const o=l.node.current;if(!o)return;const c=Ob(r);if(!c)return;const{transform:d}=Ft(r).getComputedStyle(r),f=vb(d);if(!f)return;const h=typeof t=="function"?t:kj(t);return xb(o,i.draggable.measure),h({active:{id:s,data:l.data,node:o,rect:i.draggable.measure(o)},draggableNodes:n,dragOverlay:{node:r,rect:i.dragOverlay.measure(c)},droppableContainers:a,measuringConfiguration:i,transform:f})})}function kj(e){const{duration:t,easing:n,sideEffects:a,keyframes:i}={...Rj,...e};return s=>{let{active:r,dragOverlay:l,transform:o,...c}=s;if(!t)return;const d={x:l.rect.left-r.rect.left,y:l.rect.top-r.rect.top},f={scaleX:o.scaleX!==1?r.rect.width*o.scaleX/l.rect.width:1,scaleY:o.scaleY!==1?r.rect.height*o.scaleY/l.rect.height:1},h={x:o.x-d.x,y:o.y-d.y,...f},m=i({...c,active:r,dragOverlay:l,transform:{initial:o,final:h}}),[v]=m,b=m[m.length-1];if(JSON.stringify(v)===JSON.stringify(b))return;const w=a==null?void 0:a({active:r,dragOverlay:l,...c}),y=l.node.animate(m,{duration:t,easing:n,fill:"forwards"});return new Promise(g=>{y.onfinish=()=>{w==null||w(),g()}})}}let Jg=0;function Uj(e){return _.useMemo(()=>{if(e!=null)return Jg++,Jg},[e])}const zj=st.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:a,style:i,transition:s,modifiers:r,wrapperElement:l="div",className:o,zIndex:c=999}=e;const{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggableNodes:v,droppableContainers:b,dragOverlay:w,over:y,measuringConfiguration:g,scrollableAncestors:p,scrollableAncestorRects:S,windowRect:x}=Cb(),j=_.useContext(jc),T=Uj(f==null?void 0:f.id),E=Nb(r,{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggingNodeRect:w.rect,over:y,overlayNodeRect:w.rect,scrollableAncestors:p,scrollableAncestorRects:S,transform:j,windowRect:x}),A=fh(h),M=Mj({config:a,draggableNodes:v,droppableContainers:b,measuringConfiguration:g}),P=A?w.setRef:void 0;return st.createElement(jj,null,st.createElement(Tj,{animation:M},f&&T?st.createElement(Dj,{key:T,id:f.id,ref:P,as:l,activatorEvent:d,adjustScale:t,className:o,transition:s,rect:A,style:{zIndex:c,...i},transform:E},n):null))});function Ha(e,t,n){const a=e.slice();return a.splice(n<0?a.length+n:n,0,a.splice(t,1)[0]),a}function Lj(e,t){return e.reduce((n,a,i)=>{const s=t.get(a);return s&&(n[i]=s),n},Array(e.length))}function Ql(e){return e!==null&&e>=0}function Bj(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Hj(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Mb=e=>{let{rects:t,activeIndex:n,overIndex:a,index:i}=e;const s=Ha(t,a,n),r=t[i],l=s[i];return!l||!r?null:{x:l.left-r.left,y:l.top-r.top,scaleX:l.width/r.width,scaleY:l.height/r.height}},Jl={scaleX:1,scaleY:1},ar=e=>{var t;let{activeIndex:n,activeNodeRect:a,index:i,rects:s,overIndex:r}=e;const l=(t=s[n])!=null?t:a;if(!l)return null;if(i===n){const c=s[r];return c?{x:0,y:n<r?c.top+c.height-(l.top+l.height):c.top-l.top,...Jl}:null}const o=qj(s,i,n);return i>n&&i<=r?{x:0,y:-l.height-o,...Jl}:i<n&&i>=r?{x:0,y:l.height+o,...Jl}:{x:0,y:0,...Jl}};function qj(e,t,n){const a=e[t],i=e[t-1],s=e[t+1];return a?n<t?i?a.top-(i.top+i.height):s?s.top-(a.top+a.height):0:s?s.top-(a.top+a.height):i?a.top-(i.top+i.height):0:0}const kb="Sortable",Ub=st.createContext({activeIndex:-1,containerId:kb,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Mb,disabled:{draggable:!1,droppable:!1}});function ir(e){let{children:t,id:n,items:a,strategy:i=Mb,disabled:s=!1}=e;const{active:r,dragOverlay:l,droppableRects:o,over:c,measureDroppableContainers:d}=Cb(),f=dl(kb,n),h=l.rect!==null,m=_.useMemo(()=>a.map(j=>typeof j=="object"&&"id"in j?j.id:j),[a]),v=r!=null,b=r?m.indexOf(r.id):-1,w=c?m.indexOf(c.id):-1,y=_.useRef(m),g=!Bj(m,y.current),p=w!==-1&&b===-1||g,S=Hj(s);Vn(()=>{g&&v&&d(m)},[g,m,v,d]),_.useEffect(()=>{y.current=m},[m]);const x=_.useMemo(()=>({activeIndex:b,containerId:f,disabled:S,disableTransforms:p,items:m,overIndex:w,useDragOverlay:h,sortedRects:Lj(m,o),strategy:i}),[b,f,S.draggable,S.droppable,p,m,w,o,h,i]);return st.createElement(Ub.Provider,{value:x},t)}const $j=e=>{let{id:t,items:n,activeIndex:a,overIndex:i}=e;return Ha(n,a,i).indexOf(t)},Ij=e=>{let{containerId:t,isSorting:n,wasDragging:a,index:i,items:s,newIndex:r,previousItems:l,previousContainerId:o,transition:c}=e;return!c||!a||l!==s&&i===r?!1:n?!0:r!==i&&t===o},Vj={duration:200,easing:"ease"},zb="transform",Yj=Wa.Transition.toString({property:zb,duration:0,easing:"linear"}),Gj={roleDescription:"sortable"};function Kj(e){let{disabled:t,index:n,node:a,rect:i}=e;const[s,r]=_.useState(null),l=_.useRef(n);return Vn(()=>{if(!t&&n!==l.current&&a.current){const o=i.current;if(o){const c=Xs(a.current,{ignoreTransform:!0}),d={x:o.left-c.left,y:o.top-c.top,scaleX:o.width/c.width,scaleY:o.height/c.height};(d.x||d.y)&&r(d)}}n!==l.current&&(l.current=n)},[t,n,a,i]),_.useEffect(()=>{s&&r(null)},[s]),s}function Lb(e){let{animateLayoutChanges:t=Ij,attributes:n,disabled:a,data:i,getNewIndex:s=$j,id:r,strategy:l,resizeObserverConfig:o,transition:c=Vj}=e;const{items:d,containerId:f,activeIndex:h,disabled:m,disableTransforms:v,sortedRects:b,overIndex:w,useDragOverlay:y,strategy:g}=_.useContext(Ub),p=Xj(a,m),S=d.indexOf(r),x=_.useMemo(()=>({sortable:{containerId:f,index:S,items:d},...i}),[f,i,S,d]),j=_.useMemo(()=>d.slice(d.indexOf(r)),[d,r]),{rect:T,node:E,isOver:A,setNodeRef:M}=Rb({id:r,data:x,disabled:p.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...o}}),{active:P,activatorEvent:G,activeNodeRect:Q,attributes:re,setNodeRef:z,listeners:C,isDragging:q,over:K,setActivatorNodeRef:me,transform:J}=wj({id:r,data:x,attributes:{...Gj,...n},disabled:p.draggable}),rt=l1(M,z),De=!!P,Qe=De&&!v&&Ql(h)&&Ql(w),ze=!y&&q,He=ze&&Qe?J:null,ht=Qe?He??(l??g)({rects:b,activeNodeRect:Q,activeIndex:h,overIndex:w,index:S}):null,$=Ql(h)&&Ql(w)?s({id:r,items:d,activeIndex:h,overIndex:w}):S,ce=P==null?void 0:P.id,te=_.useRef({activeId:ce,items:d,newIndex:$,containerId:f}),we=d!==te.current.items,ke=t({active:P,containerId:f,isDragging:q,isSorting:De,id:r,index:S,items:d,newIndex:te.current.newIndex,previousItems:te.current.items,previousContainerId:te.current.containerId,transition:c,wasDragging:te.current.activeId!=null}),Ue=Kj({disabled:!ke,index:S,node:E,rect:T});return _.useEffect(()=>{De&&te.current.newIndex!==$&&(te.current.newIndex=$),f!==te.current.containerId&&(te.current.containerId=f),d!==te.current.items&&(te.current.items=d)},[De,$,f,d]),_.useEffect(()=>{if(ce===te.current.activeId)return;if(ce!=null&&te.current.activeId==null){te.current.activeId=ce;return}const qe=setTimeout(()=>{te.current.activeId=ce},50);return()=>clearTimeout(qe)},[ce]),{active:P,activeIndex:h,attributes:re,data:x,rect:T,index:S,newIndex:$,items:d,isOver:A,isSorting:De,isDragging:q,listeners:C,node:E,overIndex:w,over:K,setNodeRef:rt,setActivatorNodeRef:me,setDroppableNodeRef:M,setDraggableNodeRef:z,transform:Ue??ht,transition:ve()};function ve(){if(Ue||we&&te.current.newIndex===S)return Yj;if(!(ze&&!xc(G)||!c)&&(De||ke))return Wa.Transition.toString({...c,property:zb})}}function Xj(e,t){var n,a;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(a=e==null?void 0:e.droppable)!=null?a:t.droppable}}function Fo(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Qj=[Ce.Down,Ce.Right,Ce.Up,Ce.Left],Jj=(e,t)=>{let{context:{active:n,collisionRect:a,droppableRects:i,droppableContainers:s,over:r,scrollableAncestors:l}}=t;if(Qj.includes(e.code)){if(e.preventDefault(),!n||!a)return;const o=[];s.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const h=i.get(f.id);if(h)switch(e.code){case Ce.Down:a.top<h.top&&o.push(f);break;case Ce.Up:a.top>h.top&&o.push(f);break;case Ce.Left:a.left>h.left&&o.push(f);break;case Ce.Right:a.left<h.left&&o.push(f);break}});const c=E1({collisionRect:a,droppableRects:i,droppableContainers:o});let d=mb(c,"id");if(d===(r==null?void 0:r.id)&&c.length>1&&(d=c[1].id),d!=null){const f=s.get(n.id),h=s.get(d),m=h?i.get(h.id):null,v=h==null?void 0:h.node.current;if(v&&m&&f&&h){const w=Tc(v).some((j,T)=>l[T]!==j),y=Bb(f,h),g=Pj(f,h),p=w||!y?{x:0,y:0}:{x:g?a.width-m.width:0,y:g?a.height-m.height:0},S={x:m.left,y:m.top};return p.x&&p.y?S:Jr(S,p)}}}};function Bb(e,t){return!Fo(e)||!Fo(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Pj(e,t){return!Fo(e)||!Fo(t)||!Bb(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Se=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${a}`},mi=e=>{const t=String(e.getFullYear()).slice(2),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),s=["","","","","","",""][e.getDay()];return`${t}.${n}.${a}(${s})`},Gi=e=>{const t=new Date(e),n=String(t.getFullYear()).slice(2),a=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),o=["","","","","","",""][t.getDay()];return`${n}.${a}.${i}(${o}) ${s}:${r}`},Zj=e=>{const t=new Date;return Se(e)===Se(t)},Fj=()=>{const[e,t]=_.useState(null),[n,a]=_.useState(!0);return _.useEffect(()=>{Ie.auth.getSession().then(({data:{session:l}})=>{t(l),a(!1)});const{data:{subscription:r}}=Ie.auth.onAuthStateChange((l,o)=>{t(o)});return()=>r.unsubscribe()},[]),{session:e,authLoading:n,handleGoogleLogin:async()=>{try{const{error:r}=await Ie.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/todo-note/"}});if(r)throw r}catch(r){alert(" : "+r.message)}},handleLogout:async()=>{try{const{error:r}=await Ie.auth.signOut();if(r)throw r}catch(r){alert(" : "+r.message)}}}};function Wj({showSidebar:e,setShowSidebar:t,session:n,viewMode:a,setViewMode:i,onOpenRoutine:s,onOpenGanttChart:r,onOpenEncouragementModal:l,onOpenAddSection:o,onOpenHiddenSections:c,onLogout:d}){var f,h;return u.jsxs(u.Fragment,{children:[e&&u.jsx("div",{className:"sidebar-overlay",onClick:()=>t(!1)}),u.jsxs("div",{className:`sidebar ${e?"open":""}`,children:[u.jsxs("div",{className:"sidebar-header",children:[u.jsx("h2",{children:""}),u.jsx("button",{className:"sidebar-close",onClick:()=>t(!1),children:""})]}),n&&n.user&&u.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[((f=n.user.user_metadata)==null?void 0:f.avatar_url)&&u.jsx("img",{src:n.user.user_metadata.avatar_url,alt:"",style:{width:"40px",height:"40px",borderRadius:"50%"}}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((h=n.user.user_metadata)==null?void 0:h.full_name)||n.user.email}),u.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.user.email})]})]}),u.jsxs("div",{className:"sidebar-content",children:[u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{const m=a==="vertical"?"horizontal":"vertical";i(m),localStorage.setItem("viewMode",m),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:a==="vertical"?"":""}),u.jsx("span",{children:a==="vertical"?" ":" "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{o(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:" "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{c(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:"  "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{s(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:" "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{r(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:" "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{l(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:"  "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{confirm(" ?")&&d()},style:{marginTop:"auto",borderTop:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 100, 100, 0.9)"},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:""})]})]})]})]})}function eO({selectedDate:e,onDateChange:t,onPrevDay:n,onNextDay:a}){return u.jsxs("div",{className:"date-nav-section",children:[u.jsxs("div",{className:"date-display-wrapper",children:[u.jsx("span",{className:"date-display",children:mi(e)}),u.jsx("input",{type:"date",value:Se(e),onChange:t,className:"date-picker-input"})]}),u.jsx("button",{onClick:n,className:"date-nav-button",children:""}),u.jsx("button",{onClick:a,className:"date-nav-button",children:""})]})}function tO({showSidebar:e,setShowSidebar:t,selectedDate:n,setSelectedDate:a,onDateChange:i,onPrevDay:s,onNextDay:r,showEncouragementEmoji:l,currentEncouragementMessage:o,onEncouragementClick:c,onQuickAdd:d,onOpenMemo:f}){const[h,m]=_.useState(""),[v,b]=_.useState(!1),w=async y=>{if(y.key==="Enter"&&!y.shiftKey&&h.trim()){y.preventDefault(),b(!0);try{await d(h.trim()),m("")}catch(g){console.error("Quick add error:",g)}finally{b(!1)}}};return u.jsx("div",{className:"header-fixed",children:u.jsxs("div",{className:"settings-bar",children:[u.jsx("button",{className:"hamburger-menu",onClick:()=>t(!e),title:"",children:u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("rect",{x:"2",y:"4",width:"16",height:"2",rx:"1",fill:"currentColor"}),u.jsx("rect",{x:"2",y:"9",width:"16",height:"2",rx:"1",fill:"currentColor"}),u.jsx("rect",{x:"2",y:"14",width:"16",height:"2",rx:"1",fill:"currentColor"})]})}),u.jsx(eO,{selectedDate:n,onDateChange:i,onPrevDay:s,onNextDay:r}),u.jsx("div",{className:"encouragement-section",children:Zj(n)?u.jsx("div",{className:"encouragement-message",onClick:c,title:"    !",children:l?u.jsx("span",{className:"encouragement-emoji",children:"  "}):o||"!"}):u.jsx("button",{onClick:()=>a(new Date),className:"today-link",title:" ",children:"  "})}),u.jsx("div",{className:"quick-input-wrapper",children:u.jsx("input",{type:"text",value:h,onChange:y=>m(y.target.value),onKeyDown:w,placeholder:" Quick   (Enter )",className:"quick-input",disabled:v})}),u.jsx("button",{className:"header-memo-button",onClick:f,title:" ",children:"  "})]})})}function nO({viewMode:e,currentSectionIndex:t,sectionsContainerRef:n,visibleSectionCount:a=3}){return e!=="horizontal"?null:u.jsx("div",{className:"section-pagination-dots",onTouchStart:i=>{const s=i.touches[0];i.currentTarget.dataset.touchStartX=s.clientX,i.currentTarget.dataset.touchStartTime=Date.now()},onTouchMove:i=>{i.currentTarget.dataset.touchMoved="true"},onTouchEnd:i=>{const s=parseFloat(i.currentTarget.dataset.touchStartX||"0"),r=parseInt(i.currentTarget.dataset.touchStartTime||"0"),l=i.currentTarget.dataset.touchMoved==="true",o=i.changedTouches[0].clientX,c=Date.now()-r;if(delete i.currentTarget.dataset.touchStartX,delete i.currentTarget.dataset.touchStartTime,delete i.currentTarget.dataset.touchMoved,l&&c<500){const d=s-o,f=n.current;if(!f)return;const h=f.querySelectorAll(".section-block");Math.abs(d)>50&&(d>0&&t<h.length-1?h[t+1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}):d<0&&t>0&&h[t-1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}))}},children:Array.from({length:a},(i,s)=>u.jsx("button",{className:`pagination-dot ${t===s?"active":""}`,onClick:()=>{const r=n.current;if(!r)return;const l=r.querySelectorAll(".section-block");l[s]&&l[s].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},s))})}const Jn={async get(e,t=null){try{const{data:n,error:a}=await Ie.from("user_settings").select("setting_value").eq("setting_key",e).maybeSingle();return a?(console.error(`   [${e}]:`,a.message),t):n&&n.setting_value?JSON.parse(n.setting_value):t}catch(n){return console.error(`   [${e}]:`,n.message),t}},async set(e,t,n){if(!n)return console.warn(`   [${e}]:  ID `),!1;try{const{data:a,error:i}=await Ie.from("user_settings").select("id").eq("setting_key",e).maybeSingle();if(i)return console.error(`   [${e}]:`,i.message),!1;const s=JSON.stringify(t);if(a){const{error:r}=await Ie.from("user_settings").update({setting_value:s,updated_at:new Date().toISOString()}).eq("setting_key",e);if(r)return console.error(`   [${e}]:`,r.message),!1}else{const{error:r}=await Ie.from("user_settings").insert([{setting_key:e,setting_value:s,user_id:n}]);if(r)return console.error(`   [${e}]:`,r.message),!1}return!0}catch(a){return console.error(`   [${e}]:`,a.message),!1}},async remove(e){try{const{error:t}=await Ie.from("user_settings").delete().eq("setting_key",e);return t?(console.error(`   [${e}]:`,t.message),!1):!0}catch(t){return console.error(`   [${e}]:`,t.message),!1}}},Pn={SECTION_ORDER:"section_order",SECTION_TITLES:"section_titles",SECTION_ICONS:"section_icons",CUSTOM_SECTIONS:"custom_sections",HIDDEN_SECTIONS:"hidden_sections"},Cu={timeline:"",routine:"",normal:""},Xd=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function Qd({title:e,icon:t,sectionId:n,onIconChange:a,editable:i=!1,onTitleChange:s,showHideButton:r=!1,onHide:l,showDeleteButton:o=!1,onDelete:c,customActions:d,settingsMenuItems:f=[]}){var A,M,P,G;const[h,m]=_.useState(!1),[v,b]=_.useState(e),[w,y]=_.useState(!1),[g,p]=_.useState(!1),S=_.useRef(null),x=_.useRef(null),j=()=>{v.trim()&&v!==e&&(s==null||s(v.trim())),m(!1)},T=()=>{b(e),m(!1)};_.useEffect(()=>{const Q=re=>{if(w&&S.current&&!S.current.contains(re.target)){const z=document.querySelector(".section-settings-dropdown");z&&!z.contains(re.target)&&y(!1)}if(g&&x.current&&!x.current.contains(re.target)){const z=document.querySelector(".emoji-picker-dropdown");z&&!z.contains(re.target)&&p(!1)}};return document.addEventListener("mousedown",Q),()=>{document.removeEventListener("mousedown",Q)}},[w,g]);const E=Q=>{a&&n&&a(n,Q),p(!1)};return u.jsxs("div",{className:"section-header",children:[u.jsxs("div",{className:"section-title-container",children:[t&&a&&u.jsxs("div",{style:{position:"relative"},children:[u.jsx("span",{ref:x,className:"section-icon-button",onClick:()=>p(!g),title:" ",children:t}),g&&Uu.createPortal(u.jsx("div",{className:"emoji-picker-dropdown",style:{position:"fixed",top:`${((A=x.current)==null?void 0:A.getBoundingClientRect().bottom)+5}px`,left:`${(M=x.current)==null?void 0:M.getBoundingClientRect().left}px`},children:Xd.map((Q,re)=>u.jsx("button",{className:"emoji-option",onClick:()=>E(Q),children:Q},re))}),document.body)]}),t&&!a&&u.jsx("span",{className:"section-icon",children:t}),h?u.jsx("div",{className:"section-title-edit-wrapper",children:u.jsx("input",{type:"text",value:v,onChange:Q=>b(Q.target.value),onBlur:j,onKeyDown:Q=>{Q.key==="Enter"?j():Q.key==="Escape"&&T()},className:"section-title-input",autoFocus:!0})}):u.jsx("h2",{className:`section-title ${i?"editable":""}`,onClick:()=>i&&m(!0),children:e})]}),u.jsxs("div",{className:"section-actions",children:[d,f.length>0&&u.jsxs("div",{style:{position:"relative"},children:[u.jsx("button",{ref:S,className:"section-action-button settings-button",onClick:()=>y(!w),title:"",children:""}),w&&Uu.createPortal(u.jsx("div",{className:"section-settings-dropdown",style:{position:"fixed",top:`${((P=S.current)==null?void 0:P.getBoundingClientRect().bottom)+5}px`,left:`${(G=S.current)==null?void 0:G.getBoundingClientRect().left}px`},children:f.map((Q,re)=>u.jsxs("button",{className:"settings-menu-item",onClick:()=>{Q.onClick(),y(!1)},children:[u.jsx("span",{children:Q.icon}),u.jsx("span",{children:Q.label})]},re))}),document.body)]})]})]})}function Ru({title:e,icon:t,sectionId:n,onIconChange:a,className:i,inputValue:s,setInputValue:r,onAddTodo:l,isAdding:o,placeholder:c,children:d,editable:f=!1,onTitleChange:h,settingsMenuItems:m=[],headerActions:v}){return u.jsxs("div",{className:i,children:[u.jsx(Qd,{title:e,icon:t,sectionId:n,onIconChange:a,editable:f,onTitleChange:h,settingsMenuItems:m,customActions:v}),u.jsxs("div",{className:"section-input",children:[u.jsx("input",{type:"text",value:s,onChange:b=>r(b.target.value),onKeyDown:b=>{b.key==="Enter"&&l()},placeholder:c,className:"todo-input",disabled:o}),u.jsx("button",{onClick:l,className:"add-button",disabled:o,children:""})]}),d]})}function aO({todo:e,index:t,totalCount:n,hour:a,startHour:i,endHour:s,onToggle:r,onRemoveFromTimeline:l,onMoveUpInTimeline:o,onMoveDownInTimeline:c}){const[d,f]=_.useState(!1),{attributes:h,listeners:m,setNodeRef:v,transform:b,transition:w,isDragging:y}=Lb({id:`timeline-todo-${e.id}`,data:{type:"timeline-todo",todo:e}}),g={transform:Wa.Transform.toString(b),transition:w,opacity:y?.5:1},p=!(t===0&&a<=i),S=!(t===n-1&&a>=s);return _.useEffect(()=>{const x=j=>{d&&!j.target.closest(".timeline-todo-handle-wrapper")&&f(!1)};return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[d]),u.jsxs("div",{ref:v,style:g,className:`timeline-scheduled-todo ${y?"dragging":""}`,children:[u.jsxs("div",{className:"timeline-todo-handle-wrapper",children:[u.jsx("span",{className:"timeline-todo-handle",...h,...m,onClick:x=>{x.stopPropagation(),f(!d)},title:":   /  : "}),d&&u.jsxs("div",{className:"timeline-move-menu",children:[p&&u.jsxs("button",{className:"timeline-move-menu-item move-to-top",onClick:x=>{x.stopPropagation(),o(e.id),f(!1)},children:[u.jsx("span",{children:""})," "]}),S&&u.jsxs("button",{className:"timeline-move-menu-item move-to-bottom",onClick:x=>{x.stopPropagation(),c(e.id),f(!1)},children:[u.jsx("span",{children:""})," "]}),u.jsxs("button",{className:"timeline-move-menu-item remove",onClick:x=>{x.stopPropagation(),l(e.id),f(!1)},children:[u.jsx("span",{children:""})," "]})]})]}),u.jsxs("label",{className:"timeline-todo-checkbox",children:[u.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>r(e.id)}),u.jsx("span",{className:"timeline-checkbox-custom"})]}),u.jsx("span",{className:`timeline-todo-text ${e.completed?"completed":""}`,children:e.text}),u.jsx("button",{className:"timeline-todo-remove-button",onClick:x=>{x.stopPropagation(),l(e.id)},title:" ",children:""})]})}function iO({hour:e,startHour:t,endHour:n,scheduledTodos:a,onToggle:i,onRemoveFromTimeline:s,onMoveUpInTimeline:r,onMoveDownInTimeline:l,onDoubleClick:o}){const{isOver:c,setNodeRef:d}=Rb({id:`timeline-${e}`,data:{type:"timeline",hour:e}}),f=m=>{m.target.closest(".timeline-scheduled-todo")||o==null||o(e)},h=a.filter(m=>m.scheduled_time?parseInt(m.scheduled_time.split(":")[0],10)===e:!1).sort((m,v)=>{const b=parseInt(m.scheduled_time.split(":")[1],10),w=parseInt(v.scheduled_time.split(":")[1],10);return b-w});return u.jsxs("div",{ref:d,className:`timeline-hour-slot ${c?"timeline-drop-active":""}`,onDoubleClick:f,children:[u.jsx("div",{className:"timeline-hour-label",children:e===24?"00:00":`${e.toString().padStart(2,"0")}:00`}),u.jsx("div",{className:"timeline-hour-content",children:h.map((m,v)=>u.jsx(aO,{todo:m,index:v,totalCount:h.length,hour:e,startHour:t,endHour:n,onToggle:i,onRemoveFromTimeline:s,onMoveUpInTimeline:r,onMoveDownInTimeline:l},m.id))})]})}const Pg=_.forwardRef(function({startHour:t=6,endHour:n=24,scheduledTodos:a=[],onToggle:i,onRemoveFromTimeline:s,onMoveUpInTimeline:r,onMoveDownInTimeline:l,onAddTodo:o},c){const[d,f]=_.useState(new Date),[h,m]=_.useState(null),[v,b]=_.useState(""),w=_.useRef(null),y=_.useRef(null),g=_.useRef(null),p=G=>{m(G),b("")};_.useEffect(()=>{h!==null&&w.current&&w.current.focus()},[h]);const S=async()=>{v.trim()&&o&&await o(h,v.trim()),m(null),b("")},x=G=>{G.key==="Enter"?(G.preventDefault(),S()):G.key==="Escape"&&(m(null),b(""))},j=()=>{setTimeout(()=>{v.trim()?S():(m(null),b(""))},100)},T=()=>{if(g.current&&y.current){const G=y.current,Q=g.current,re=G.clientHeight,z=Q.offsetTop;G.scrollTo({top:z-re/2,behavior:"smooth"})}};_.useImperativeHandle(c,()=>({scrollToNow:T})),_.useEffect(()=>{const G=setInterval(()=>{f(new Date)},6e4);return()=>clearInterval(G)},[]),_.useEffect(()=>{if(g.current&&y.current){const G=y.current,Q=g.current,re=G.clientHeight,z=Q.offsetTop;G.scrollTop=z-re/2}},[]);const E=[];for(let G=t;G<=n;G++)E.push(G);const A=()=>{const G=d.getHours(),Q=d.getMinutes(),re=G*60+Q,z=t*60,C=n*60,q=C-z;return re<z?0:re>C?100:(re-z)/q*100},M=()=>{const G=d.getHours();return G>=t&&G<=n},P=()=>d.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1});return u.jsx("div",{className:"timeline-view",ref:y,children:u.jsxs("div",{className:"timeline-grid",children:[E.map(G=>u.jsxs(st.Fragment,{children:[u.jsx(iO,{hour:G,startHour:t,endHour:n,scheduledTodos:a,onToggle:i,onRemoveFromTimeline:s,onMoveUpInTimeline:r,onMoveDownInTimeline:l,onDoubleClick:p}),h===G&&u.jsx("div",{className:"timeline-add-input-container",children:u.jsx("input",{ref:w,type:"text",value:v,onChange:Q=>b(Q.target.value),onKeyDown:x,onBlur:j,placeholder:"  ...",className:"timeline-add-input"})})]},G)),M()&&u.jsxs("div",{ref:g,className:"timeline-current-time",style:{top:`${A()}%`},children:[u.jsx("div",{className:"timeline-current-time-dot"}),u.jsx("div",{className:"timeline-current-time-line"}),u.jsx("div",{className:"timeline-current-time-label",children:P()})]})]})})});function sO({todoId:e,isFirst:t,isLast:n,onMoveUp:a,onMoveDown:i,onMoveToTop:s,onMoveToBottom:r,onDelete:l,onClose:o}){const c=d=>{d(),o()};return u.jsxs("div",{className:"move-menu",children:[!t&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:"move-menu-item move-to-top",onClick:d=>{d.stopPropagation(),c(()=>s&&s(e))},children:[u.jsx("span",{className:"move-menu-icon",children:""}),"  "]}),u.jsxs("button",{className:"move-menu-item",onClick:d=>{d.stopPropagation(),c(()=>a&&a(e))},children:[u.jsx("span",{className:"move-menu-icon",children:""})," "]})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:"move-menu-item",onClick:d=>{d.stopPropagation(),c(()=>i&&i(e))},children:[u.jsx("span",{className:"move-menu-icon",children:""})," "]}),u.jsxs("button",{className:"move-menu-item move-to-bottom",onClick:d=>{d.stopPropagation(),c(()=>r&&r(e))},children:[u.jsx("span",{className:"move-menu-icon",children:""}),"  "]})]}),u.jsxs("button",{className:"move-menu-item delete",onClick:d=>{d.stopPropagation(),window.confirm("  ?")&&l(e),o()},children:[u.jsx("span",{className:"move-menu-icon",children:""})," "]})]})}const Oc=[{key:"mon",label:""},{key:"tue",label:""},{key:"wed",label:""},{key:"thu",label:""},{key:"fri",label:""},{key:"sat",label:""},{key:"sun",label:""}],Mu={THIS_ONLY:"this-only",FROM_NOW:"from-now",ALL:"all"},rO="09",lO="00";function hh({value:e,onChange:t}){const n=_.useRef(null),a=_.useRef(null),i=_.useRef(e),s=_.useRef(!1),[r,l]=_.useState(()=>e&&e.includes(":")?e.split(":")[0]:rO),[o,c]=_.useState(()=>e&&e.includes(":")?e.split(":")[1]:lO);_.useEffect(()=>{if(e&&e.includes(":")&&e!==i.current){const[g,p]=e.split(":");i.current=e,l(g),c(p)}},[e]),_.useEffect(()=>{if(!s.current){s.current=!0;return}const g=`${r}:${o}`;i.current=g,t&&t(g)},[r,o]);const d=(g,p,S)=>{if(!g.current)return;const x=g.current.scrollTop,T=Math.round(x/40),E=String(T).padStart(2,"0");p(E)},f=(g,p)=>{if(!g.current)return;const S=40,x=parseInt(p,10);g.current.scrollTop=x*S};_.useEffect(()=>{f(n,r)},[]),_.useEffect(()=>{f(a,o)},[]);const h=Array.from({length:24},(g,p)=>String(p).padStart(2,"0")),m=Array.from({length:60},(g,p)=>String(p).padStart(2,"0")),v=()=>{const g=(parseInt(r,10)+1)%24,p=String(g).padStart(2,"0");l(p),f(n,p)},b=()=>{const g=(parseInt(r,10)-1+24)%24,p=String(g).padStart(2,"0");l(p),f(n,p)},w=()=>{const g=(parseInt(o,10)+1)%60,p=String(g).padStart(2,"0");c(p),f(a,p)},y=()=>{const g=(parseInt(o,10)-1+60)%60,p=String(g).padStart(2,"0");c(p),f(a,p)};return u.jsxs("div",{className:"apple-time-picker",children:[u.jsxs("div",{className:"picker-arrows-top",children:[u.jsx("button",{className:"picker-arrow-button",onClick:v,children:""}),u.jsx("div",{style:{width:"20px"}}),u.jsx("button",{className:"picker-arrow-button",onClick:w,children:""})]}),u.jsxs("div",{className:"picker-container",children:[u.jsxs("div",{className:"picker-column",ref:n,onScroll:()=>d(n,l),children:[u.jsx("div",{className:"picker-spacer"}),h.map(g=>u.jsx("div",{className:`picker-item ${g===r?"selected":""}`,onClick:()=>{l(g),f(n,g)},children:g},g)),u.jsx("div",{className:"picker-spacer"})]}),u.jsx("div",{className:"picker-separator",children:":"}),u.jsxs("div",{className:"picker-column",ref:a,onScroll:()=>d(a,c),children:[u.jsx("div",{className:"picker-spacer"}),m.map(g=>u.jsx("div",{className:`picker-item ${g===o?"selected":""}`,onClick:()=>{c(g),f(a,g)},children:g},g)),u.jsx("div",{className:"picker-spacer"})]})]}),u.jsxs("div",{className:"picker-arrows-bottom",children:[u.jsx("button",{className:"picker-arrow-button",onClick:b,children:""}),u.jsx("div",{style:{width:"20px"}}),u.jsx("button",{className:"picker-arrow-button",onClick:y,children:""})]}),u.jsx("div",{className:"picker-selection-indicator"})]})}function Wo({selectedDays:e=[],onToggle:t,disabled:n=!1,variant:a="default"}){const i=(l,o)=>{l.stopPropagation(),t(o)},s=a==="inline"?"day-selector-inline":"day-selector",r=a==="inline"?"day-button-inline":"day-button";return u.jsx("div",{className:s,children:Oc.map(l=>u.jsx("button",{onClick:o=>i(o,l.key),className:`${r} ${e.includes(l.key)?"selected":""}`,disabled:n,type:"button",children:l.label},l.key))})}const oO=[{value:"this-only",label:" ",description:" ",tooltip:"  ,  ,   "},{value:"from-now",label:"   ",description:" ",tooltip:"  ,  ,   "},{value:"all",label:" ",description:" ",tooltip:"  ,  ,   "}],la={container:{display:"flex",flexDirection:"column",gap:"0.75rem"},option:e=>({display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:e?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"}),radio:{width:"16px",height:"16px",cursor:"pointer"},labelContainer:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},labelRow:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},label:{fontWeight:"600"},description:{fontSize:"0.85rem",color:"#9ca3af"},helpButton:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},tooltip:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"}};function cO({selectedOption:e,onChange:t,name:n="delete-option"}){const[a,i]=_.useState(null);return u.jsx("div",{style:la.container,children:oO.map(s=>u.jsxs("div",{style:la.option(e===s.value),onClick:()=>t(s.value),children:[u.jsx("input",{type:"radio",name:n,value:s.value,checked:e===s.value,onChange:r=>t(r.target.value),style:la.radio}),u.jsx("div",{style:la.labelContainer,children:u.jsxs("div",{style:la.labelRow,children:[u.jsx("span",{style:la.label,children:s.label}),u.jsx("span",{style:la.description,children:s.description})]})}),u.jsx("button",{onMouseEnter:()=>i(s.value),onMouseLeave:()=>i(null),onClick:r=>{r.stopPropagation(),i(a===s.value?null:s.value)},style:la.helpButton,children:"?"}),a===s.value&&u.jsx("div",{style:la.tooltip,children:s.tooltip})]},s.value))})}function uO({todo:e,isOpen:t,onClose:n,onEdit:a,onToggle:i,onDelete:s,onAddSubTodo:r,onCreateRoutine:l,subtodos:o,routines:c,formatDate:d,formatDateOnly:f}){var ht;const[h,m]=_.useState(e.text),[v,b]=_.useState(null),[w,y]=_.useState(""),[g,p]=_.useState("this-only"),[S,x]=_.useState(!1),[j,T]=_.useState([]),[E,A]=_.useState(""),[M,P]=_.useState([]),[G,Q]=_.useState(!1),[re,z]=_.useState([]),[C,q]=_.useState([]),[K,me]=_.useState(null),J=e.routine_id?c.find($=>$.id===e.routine_id):null,rt=$=>["sun","mon","tue","wed","thu","fri","sat"][$],De=$=>{T(ce=>ce.includes($)?ce.filter(te=>te!==$):[...ce,$])};_.useEffect(()=>{v==="history"&&M.length===0&&!G&&(async()=>{Q(!0);try{const{data:ce,error:te}=await Ie.from("todo_history").select("*").eq("todo_id",e.id).order("changed_at",{ascending:!1});if(te)throw te;P(ce||[])}catch(ce){console.error("Error fetching history:",ce)}finally{Q(!1)}})()},[v,e.id,M.length,G]),_.useEffect(()=>{v==="routine-stats"&&J&&(!K||K.id!==J.id)&&(async()=>{try{const{data:ce,error:te}=await Ie.from("todos").select("*").eq("routine_id",J.id).eq("deleted",!1).maybeSingle();if(te)throw te;if(ce&&ce.visible_dates){const we=ce.visible_dates.sort().map(ke=>{var Ue;return{id:`${ce.id}-${ke}`,date:ke,text:ce.text,completed:((Ue=ce.completed_dates)==null?void 0:Ue.includes(ke))||!1}});q(we),me(J)}}catch(ce){console.error("Error fetching routine history:",ce)}})()},[v,J,K]);const Qe=$=>{z(ce=>ce.includes($)?ce.filter(te=>te!==$):[...ce,$])},ze=_.useRef(!1),He=$=>{$.target===$.currentTarget&&(ze.current=!0)},Me=$=>{$.target===$.currentTarget&&ze.current&&n(),ze.current=!1};return t?Uu.createPortal(u.jsx("div",{className:"modal-overlay",onMouseDown:He,onClick:Me,children:u.jsxs("div",{className:"actions-modal-content",onClick:$=>$.stopPropagation(),children:[u.jsxs("div",{className:"actions-modal-header",children:[u.jsx("h3",{children:" "}),u.jsx("button",{onClick:n,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"todo-edit-section",children:u.jsx("textarea",{value:h,onChange:$=>m($.target.value),onBlur:()=>{h.trim()!==""&&h!==e.text?a(e.id,h):h.trim()===""&&m(e.text)},className:"todo-edit-textarea",placeholder:"  ...",rows:3})}),u.jsxs("div",{className:"actions-modal-body",children:[u.jsxs("div",{className:"actions-menu",children:[u.jsxs("button",{className:`action-menu-item ${v==="nanotodo"?"active":""}`,onClick:()=>b("nanotodo"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),u.jsxs("button",{className:`action-menu-item ${v==="routine"?"active":""}`,onClick:()=>{b("routine"),J?(T(J.days||[]),A(J.time_slot||""),x(!1)):(T([]),A(""),x(!0))},children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),u.jsxs("button",{className:`action-menu-item ${v==="history"?"active":""}`,onClick:()=>b("history"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),(((ht=e.timeline_history)==null?void 0:ht.length)>0||e.scheduled_time)&&u.jsxs("button",{className:`action-menu-item ${v==="timeline-history"?"active":""}`,onClick:()=>b("timeline-history"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),e.routine_id&&J&&u.jsxs("button",{className:`action-menu-item ${v==="routine-stats"?"active":""}`,onClick:()=>b("routine-stats"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),u.jsxs("button",{className:`action-menu-item delete ${v==="delete"?"active":""}`,onClick:()=>b("delete"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]})]}),u.jsxs("div",{className:"actions-detail",children:[!v&&u.jsx("div",{className:"actions-detail-empty",children:u.jsx("p",{children:"  "})}),v==="nanotodo"&&u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:" "}),u.jsxs("div",{className:"nanotodo-section-in-modal",children:[o&&o.length>0&&u.jsx("div",{className:"subtodo-list-in-modal",children:o.map($=>u.jsxs("div",{className:"subtodo-item-in-modal",children:[u.jsx("input",{type:"checkbox",checked:$.completed,onChange:()=>i($.id),className:"subtodo-checkbox-modal"}),u.jsx("span",{className:`subtodo-text-modal ${$.completed?"completed":""}`,children:$.text}),u.jsx("button",{onClick:()=>s($.id),className:"subtodo-delete-modal",title:"",children:""})]},$.id))}),u.jsxs("div",{className:"subtodo-input-section-modal",children:[u.jsx("input",{type:"text",value:w,onChange:$=>y($.target.value),onKeyDown:$=>{$.key==="Enter"&&w.trim()&&(r(e.id,w.trim()),y(""))},placeholder:" ...",className:"subtodo-input-modal"}),u.jsx("button",{onClick:()=>{w.trim()&&(r(e.id,w.trim()),y(""))},className:"subtodo-add-button-modal",children:""})]})]})]}),v==="routine"&&u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"  "}),u.jsx("div",{className:"routine-setup-inline",children:J&&!S?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"routine-current-info",children:[u.jsx("div",{className:"routine-info-title",children:" :"}),u.jsx("div",{className:"routine-days-display",children:Oc.filter($=>J.days.includes($.key)).map($=>u.jsx("span",{className:"routine-day-badge",children:$.label},$.key))}),J.time_slot&&u.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",J.time_slot]})]}),u.jsxs("div",{className:"routine-setup-actions",children:[u.jsx("button",{onClick:$=>{$.stopPropagation(),T(J.days),A(J.time_slot||""),x(!0)},className:"routine-confirm-button",children:""}),u.jsx("button",{onClick:async $=>{$.stopPropagation(),await l(e.id,e.text,[],null,!0),n()},className:"routine-remove-button",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"routine-setup-title",children:S&&J?" :":"  :"}),u.jsx(Wo,{selectedDays:j,onToggle:De,variant:"inline"}),u.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[u.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),u.jsx(hh,{value:E,onChange:$=>A($)})]}),u.jsxs("div",{className:"routine-setup-actions",children:[u.jsx("button",{onClick:async $=>{$.stopPropagation(),S&&J?await l(e.id,e.text,j,J.id,!1,E):await l(e.id,e.text,j,null,!1,E),x(!1),n()},className:"routine-confirm-button",children:""}),u.jsx("button",{onClick:$=>{$.stopPropagation(),x(!1),T([]),A("")},className:"routine-cancel-button",children:""})]})]})})]}),v==="history"&&(()=>{const $=e.visible_dates&&e.visible_dates.length>0?e.visible_dates:[e.date],ce=$[0],te=$.map(we=>({id:`${e.id}-${we}`,date:we}));return G?u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"  "}),u.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:" ..."})]}):u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"  "}),u.jsxs("div",{className:"todo-history",children:[u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:":"}),u.jsx("span",{className:"history-value",children:d(e.created_at)})]}),u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:f(ce?new Date(ce+"T00:00:00"):new Date(e.date+"T00:00:00"))})]}),te.length>0&&u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:te.map((we,ke)=>{const Ue=we.date===e.date,ve=f(new Date(we.date+"T00:00:00"));return u.jsxs("span",{children:[ke>0&&"  ",u.jsxs("span",{style:Ue?{fontWeight:"bold",color:"#4CAF50"}:{},children:[ve.split("(")[0],Ue?"()":""]})]},we.id)})})]}),M.length>0&&u.jsxs("div",{className:"history-changes-list",children:[u.jsxs("div",{className:"history-changes-header",children:["  (",M.length,")"]}),M.map(we=>u.jsxs("div",{className:"history-record-compact",children:[u.jsxs("div",{className:"history-record-summary",children:[u.jsxs("div",{className:"history-change-time",children:[d(we.changed_at),we.changed_on_date&&u.jsxs("span",{className:"history-page-info",children:[" (: ",f(new Date(we.changed_on_date+"T00:00:00")),")"]})]}),u.jsx("button",{className:"history-detail-button",onClick:ke=>{ke.stopPropagation(),Qe(we.id)},children:re.includes(we.id)?"":""})]}),re.includes(we.id)&&u.jsxs("div",{className:"history-change",children:[u.jsxs("div",{className:"history-change-item history-before",children:[u.jsx("span",{className:"change-badge",children:""}),u.jsx("span",{className:"change-text",children:we.previous_text})]}),u.jsx("div",{className:"history-change-arrow",children:""}),u.jsxs("div",{className:"history-change-item history-after",children:[u.jsx("span",{className:"change-badge",children:""}),u.jsx("span",{className:"change-text",children:we.new_text})]})]})]},we.id))]})]})]})})(),v==="timeline-history"&&u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"  "}),u.jsxs("div",{className:"todo-history",children:[e.scheduled_time&&e.scheduled_date&&u.jsxs("div",{className:"history-item",style:{marginBottom:"1rem",padding:"0.75rem",background:"rgba(99, 102, 241, 0.1)",borderRadius:"8px"},children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsxs("span",{className:"history-value",children:[u.jsx("span",{style:{color:"#60a5fa"},children:f(new Date(e.scheduled_date+"T00:00:00"))}),u.jsx("span",{style:{marginLeft:"0.5rem",color:"#fbbf24",fontWeight:"600"},children:e.scheduled_time})]})]}),e.timeline_history&&e.timeline_history.length>0?u.jsxs("div",{className:"history-changes-list",children:[u.jsxs("div",{className:"history-changes-header",children:["  (",e.timeline_history.length,")"]}),e.timeline_history.slice().reverse().map(($,ce)=>{const te=new Date($.scheduled_date+"T00:00:00"),we=f(te);return u.jsx("div",{className:"history-record-compact",children:u.jsxs("div",{className:"history-record-summary",children:[u.jsxs("div",{className:"history-change-time",children:[u.jsx("span",{style:{color:"#60a5fa"},children:we}),u.jsx("span",{style:{marginLeft:"0.5rem",color:"#fbbf24"},children:$.scheduled_time})]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.5)"},children:[d($.assigned_at)," "]})]})},ce)})]}):u.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.5)"},children:"   ."})]})]}),v==="routine-stats"&&J&&(()=>{if(!K||K.id!==J.id||C.length===0)return u.jsxs("div",{className:"actions-detail-content",children:[u.jsxs("h4",{children:[" ",J.text," "]}),u.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:!K||K.id!==J.id?" ...":" ."})]});const $=C[0],ce=new Date($.date),te=new Date,we={};C.forEach(ve=>{we[ve.date]=ve.completed});const ke=[];let Ue=new Date(ce);for(;Ue<=te;){const ve=Ue.getFullYear(),qe=Ue.getMonth(),ct=`${ve}-${qe+1}`;ke.find(Ke=>Ke.key===ct)||ke.push({key:ct,year:ve,month:qe,days:[]});const ee=ke.find(Ke=>Ke.key===ct),oe=Se(Ue),ye=Ue.getDay(),xe=rt(ye),bt=J.days.includes(xe);ee.days.push({date:new Date(Ue),dateStr:oe,day:Ue.getDate(),dayOfWeek:ye,isCompleted:we[oe]===!0,isRoutineDay:bt,hasTodo:we[oe]!==void 0}),Ue.setDate(Ue.getDate()+1)}return u.jsxs("div",{className:"actions-detail-content",children:[u.jsxs("h4",{children:[" ",J.text," "]}),u.jsxs("div",{className:"routine-history-content",children:[u.jsx("div",{className:"routine-history-calendar",children:ke.map(ve=>u.jsxs("div",{className:"history-month",children:[u.jsxs("h3",{className:"history-month-title",children:[ve.year," ",ve.month+1,""]}),u.jsxs("div",{className:"history-calendar-grid",children:[u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),ve.days.length>0&&Array(ve.days[0].dayOfWeek).fill(null).map((qe,ct)=>u.jsx("div",{className:"history-day-cell empty"},`empty-${ct}`)),ve.days.map(qe=>u.jsxs("div",{className:`history-day-cell ${qe.isCompleted?"completed":""} ${qe.isRoutineDay?"":"not-routine-day"}`,title:`${qe.dateStr}${qe.isRoutineDay?"":" (  )"}${qe.isCompleted?" - ":qe.hasTodo?" - ":""}`,children:[u.jsx("span",{className:"day-number",children:qe.day}),qe.isCompleted&&u.jsx("span",{className:"check-mark",children:""})]},qe.dateStr))]})]},ve.key))}),u.jsxs("div",{className:"routine-history-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:" :"}),u.jsxs("span",{className:"stat-value",children:[C.length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value completed",children:[C.filter(ve=>ve.completed).length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value incomplete",children:[C.filter(ve=>!ve.completed).length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value",children:[C.length>0?Math.round(C.filter(ve=>ve.completed).length/C.length*100):0,"%"]})]})]})]})]})})(),v==="delete"&&u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"   "}),u.jsxs("p",{style:{fontSize:"0.9rem",color:"#9ca3af",marginBottom:"1rem",lineHeight:"1.6"},children:["    .",u.jsx("br",{}),"    ."]}),u.jsx(cO,{selectedOption:g,onChange:p}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("button",{onClick:n,style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#9ca3af",cursor:"pointer",fontSize:"0.9rem"},children:""}),u.jsx("button",{onClick:async()=>{window.confirm(` ?

  5    .`)&&(await s(e.id,g),n())},style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:""})]})]})]})]})]})}),document.body):null}function Zi({todo:e,index:t,onToggle:n,onDelete:a,onEdit:i,formatDate:s,formatDateOnly:r,isFocused:l,onFocus:o,onAddSubTodo:c,subtodos:d,level:f=0,onCreateRoutine:h,routines:m,onShowRoutineHistory:v,onOpenRoutineSetupModal:b,onOpenHistoryModal:w,currentPageDate:y,isPendingRoutine:g=!1,onRemoveFromUI:p,showSuccessMessage:S,activeId:x,overId:j,hideNumber:T=!1,onMoveUp:E,onMoveDown:A,onMoveToTop:M,onMoveToBottom:P,isFirst:G,isLast:Q}){const[re,z]=_.useState(!1),[C,q]=_.useState(!1),[K,me]=_.useState(!1),[J,rt]=_.useState(e.text),[De,Qe]=_.useState(!1),[ze,He]=_.useState(!1),[Me,ht]=_.useState(""),[$,ce]=_.useState(!1),te=e.routine_id?m.find(D=>D.id===e.routine_id):null,{attributes:we,listeners:ke,setNodeRef:Ue,transform:ve,transition:qe,isDragging:ct}=Lb({id:e.id}),ee=e.id===x,oe=e.id===j&&x&&x!==j,ye={cursor:"grab",opacity:ee?.4:1},xe=e.text.length>30,bt=()=>{me(!0),rt(e.text)},Ke=async()=>{J.trim()&&J!==e.text&&await i(e.id,J.trim()),me(!1)},k=async D=>{D.key==="Enter"&&!D.shiftKey?(D.preventDefault(),await Ke()):D.key==="Escape"&&(me(!1),rt(e.text))};return _.useEffect(()=>{const D=R=>{C&&!R.target.closest(".drag-handle-wrapper")&&q(!1)};return document.addEventListener("click",D),()=>document.removeEventListener("click",D)},[C]),u.jsxs("div",{ref:Ue,style:{...ye,borderTop:oe?"2px solid rgba(99, 102, 241, 0.8)":"2px solid transparent"},className:"todo-item-container",children:[u.jsxs("div",{className:"drag-handle-wrapper",children:[u.jsx("span",{className:"drag-handle",...we,...ke,onClick:D=>{D.stopPropagation(),q(!C)},title:":   /  : "}),C&&u.jsx(sO,{todoId:e.id,isFirst:G,isLast:Q,onMoveUp:E,onMoveDown:A,onMoveToTop:M,onMoveToBottom:P,onDelete:a,onClose:()=>q(!1)})]}),!T&&u.jsx("span",{className:"todo-number",children:t+1}),u.jsx("div",{className:"todo-item-wrapper",children:u.jsxs("div",{className:`todo-item ${e.completed?"completed":""} ${re?"expanded":""} ${ct?"drag-mode":""} ${e.scheduled_time&&e.scheduled_date===y?"has-timeline":""}`,children:[u.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>n(e.id),className:"todo-checkbox"}),u.jsx("div",{className:"todo-content",onClick:()=>!K&&xe&&z(!re),onDoubleClick:bt,style:{cursor:K?"text":xe?"pointer":"default"},children:K?u.jsx("textarea",{value:J,onChange:D=>rt(D.target.value),onBlur:Ke,onKeyDown:k,className:"todo-edit-input",autoFocus:!0,rows:1,style:{minHeight:"1.35em",resize:"vertical",overflow:"hidden"},onInput:D=>{D.target.style.height="auto",D.target.style.height=D.target.scrollHeight+"px"}}):u.jsx("span",{className:`todo-text ${re?"expanded":""}`,children:e.text})}),(()=>{const D=e.completed&&e.completed_at&&new Date(e.completed_at).toISOString().split("T")[0]!==e.date,R=e.routine_id&&te,B=g||e.is_pending_routine;return(d.length>0||D||R||B)&&u.jsxs("div",{className:"todo-badges",children:[D&&(()=>{const H=new Date(e.completed_at).toISOString().split("T")[0],V=new Date(e.completed_at).getDate();return u.jsxs("span",{className:"completed-date-badge",title:`${H} `,children:[V,""]})})(),R&&(()=>{const H=y||e.date,V=new Date(H+"T00:00:00"),X=V.getMonth()+1,L=V.getDate(),Z=["","","","","","",""][V.getDay()],le=`${X}/${L}(${Z})`;return u.jsxs("span",{className:"routine-date-badge",title:`${te.text} `,children:["for ",le]})})(),B&&u.jsx("span",{className:"pending-routine-badge",title:"  ",children:""}),d.length>0&&u.jsx("span",{className:"todo-badge clickable",title:" ",onClick:H=>{H.stopPropagation(),De?(Qe(!1),He(!1)):(Qe(!0),He(!1))},children:""})]})})(),!K&&!e.parent_id&&u.jsx("button",{className:"todo-more-button",onClick:D=>{D.stopPropagation(),ce(!0)},title:"",children:""}),De&&!e.parent_id&&u.jsxs("div",{className:"subtodos-in-item",children:[d&&d.length>0&&d.map((D,R)=>u.jsx(Zi,{todo:D,index:R,onToggle:n,onDelete:a,onEdit:i,formatDate:s,formatDateOnly:r,isFocused:l,onFocus:o,onAddSubTodo:c,subtodos:[],level:f+1,routines:m,onShowRoutineHistory:v,showSuccessMessage:S,onOpenRoutineSetupModal:b,onOpenHistoryModal:w,currentPageDate:y},D.id)),ze&&u.jsxs("div",{className:"subtodo-input-section",children:[u.jsx("input",{type:"text",value:Me,onChange:D=>ht(D.target.value),onKeyDown:D=>{D.key==="Enter"&&Me.trim()&&(c(e.id,Me.trim()),ht(""))},placeholder:" ...",className:"subtodo-input",autoFocus:!0}),u.jsx("button",{onClick:()=>{Me.trim()&&(c(e.id,Me.trim()),ht(""))},className:"subtodo-add-button",children:""}),u.jsx("button",{onClick:()=>ht(""),className:"subtodo-cancel-button",children:""})]})]})]})}),u.jsx(uO,{todo:e,isOpen:$,onClose:()=>ce(!1),onEdit:i,onToggle:n,onDelete:a,onAddSubTodo:c,onCreateRoutine:h,subtodos:d,routines:m,formatDate:s,formatDateOnly:r})]})}function Zg({message:e,onUndo:t,variant:n="default"}){const a=n==="success"?"undo-toast success-toast":"undo-toast";return u.jsxs("div",{className:a,children:[u.jsx("span",{children:e}),t&&u.jsx("button",{onClick:t,className:"undo-button",children:""})]})}function Fg({todo:e,onClose:t,onDeleteThisOnly:n,onDeleteFromNow:a,onDeleteAll:i}){const[s,r]=_.useState("this-only"),[l,o]=_.useState(null),c=_.useRef(!1),d=v=>{v.target===v.currentTarget&&(c.current=!0)},f=v=>{v.target===v.currentTarget&&c.current&&t(),c.current=!1},h=()=>{s==="this-only"?n(e):s==="from-now"?a(e):s==="all"&&i(e),t()},m=[{id:"this-only",label:" ",subtitle:" ",tooltip:"  ,  ,   "},{id:"from-now",label:"   ",subtitle:" ",tooltip:"  ,  ,   "},{id:"all",label:" ",subtitle:" ",tooltip:"  ,  ,   "}];return u.jsx("div",{className:"modal-overlay",onMouseDown:d,onClick:f,children:u.jsxs("div",{className:"modal-content delete-confirm-modal-v2",onClick:v=>v.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsxs("div",{className:"delete-confirm-content-v2",children:[u.jsxs("p",{className:"delete-info-text",children:["    .",u.jsx("br",{}),"    ."]}),u.jsx("div",{className:"delete-options-v2",children:m.map(v=>u.jsxs("div",{className:"delete-option-item",children:[u.jsxs("label",{className:"delete-option-label",children:[u.jsx("input",{type:"radio",name:"delete-option",value:v.id,checked:s===v.id,onChange:b=>r(b.target.value)}),u.jsxs("div",{className:"option-text",children:[u.jsx("span",{className:"option-main",children:v.label}),u.jsx("span",{className:"option-sub",children:v.subtitle})]})]}),u.jsx("button",{className:"option-help-btn",onMouseEnter:()=>o(v.id),onMouseLeave:()=>o(null),onClick:b=>{b.preventDefault(),o(l===v.id?null:v.id)},children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[u.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("text",{x:"8",y:"11.5",textAnchor:"middle",fontSize:"11",fill:"currentColor",fontWeight:"600",children:"?"})]})}),l===v.id&&u.jsx("div",{className:"option-tooltip",children:v.tooltip})]},v.id))}),u.jsxs("div",{className:"delete-modal-actions",children:[u.jsx("button",{className:"btn-cancel",onClick:t,children:""}),u.jsx("button",{className:"btn-confirm",onClick:h,children:""})]})]})]})})}function dO({showRoutineModal:e,onClose:t,routineInput:n,setRoutineInput:a,isAddingRoutine:i,selectedDays:s,onToggleDay:r,selectedTimeSlot:l,setSelectedTimeSlot:o,onAddRoutine:c,routines:d,editingRoutineId:f,editingRoutineText:h,setEditingRoutineText:m,editingRoutineDays:v,onToggleEditDay:b,onStartEdit:w,onSaveEdit:y,onCancelEdit:g,onDelete:p,onShowHistory:S}){const x=_.useRef(!1),j=E=>{E.target===E.currentTarget&&(x.current=!0)},T=E=>{E.target===E.currentTarget&&x.current&&t(),x.current=!1};return e?u.jsx("div",{className:"modal-overlay",onMouseDown:j,onClick:T,children:u.jsxs("div",{className:"modal-content routine-modal",onClick:E=>E.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsxs("div",{className:"routine-add-section",children:[u.jsx("input",{type:"text",value:n,onChange:E=>a(E.target.value),placeholder:"  ...",className:"routine-input",disabled:i}),u.jsx(Wo,{selectedDays:s,onToggle:r,disabled:i}),u.jsxs("div",{className:"time-slot-selector",children:[u.jsx("label",{className:"time-slot-label",children:"  ()"}),u.jsx(hh,{value:l,onChange:E=>o(E)})]}),u.jsx("button",{onClick:c,className:"add-routine-button",disabled:i||n.trim()==="",children:" "})]}),u.jsx("div",{className:"routine-list",children:d.length===0?u.jsx("p",{className:"empty-message",children:"  ."}):d.map(E=>u.jsx("div",{className:"routine-item",children:f===E.id?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"routine-edit-content",children:[u.jsx("input",{type:"text",value:h,onChange:A=>m(A.target.value),className:"routine-edit-input",placeholder:" "}),u.jsx(Wo,{selectedDays:v,onToggle:b,variant:"inline"})]}),u.jsxs("div",{className:"routine-item-actions",children:[u.jsx("button",{onClick:y,className:"routine-save-button",disabled:h.trim()===""||v.length===0,children:""}),u.jsx("button",{onClick:g,className:"routine-cancel-edit-button",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"routine-item-content",children:[u.jsx("span",{className:"routine-text",children:E.text}),u.jsxs("div",{className:"routine-meta",children:[u.jsx("div",{className:"routine-days",children:Oc.filter(A=>E.days.includes(A.key)).map(A=>u.jsx("span",{className:"routine-day-badge",children:A.label},A.key))}),E.time_slot&&u.jsx("span",{className:"routine-time-slot",children:E.time_slot})]})]}),u.jsxs("div",{className:"routine-item-actions",children:[u.jsx("button",{onClick:()=>S(E),className:"routine-history-button",title:" ",children:""}),u.jsx("button",{onClick:()=>w(E),className:"routine-edit-button",title:"",children:""}),u.jsx("button",{onClick:()=>p(E.id),className:"routine-delete-button",title:"",children:""})]})]})},E.id))})]})}):null}const fO=e=>["sun","mon","tue","wed","thu","fri","sat"][e];function hO({showRoutineHistory:e,onClose:t,selectedRoutine:n,routineHistoryData:a}){const i=_.useRef(!1),s=l=>{l.target===l.currentTarget&&(i.current=!0)},r=l=>{l.target===l.currentTarget&&i.current&&t(),i.current=!1};return!e||!n?null:u.jsx("div",{className:"modal-overlay",onMouseDown:s,onClick:r,children:u.jsxs("div",{className:"modal-content routine-history-modal",onClick:l=>l.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("h2",{children:[" ",n.text," "]}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsxs("div",{className:"routine-history-content",children:[(()=>{if(a.length===0)return u.jsx("p",{className:"empty-message",children:"   ."});const l=a[0],o=new Date(l.date),c=new Date,d={};a.forEach(m=>{d[m.date]=m.completed});const f=[];let h=new Date(o);for(;h<=c;){const m=h.getFullYear(),v=h.getMonth(),b=`${m}-${v+1}`;f.find(x=>x.key===b)||f.push({key:b,year:m,month:v,days:[]});const w=f.find(x=>x.key===b),y=Se(h),g=h.getDay(),p=fO(g),S=n.days.includes(p);w.days.push({date:new Date(h),dateStr:y,day:h.getDate(),dayOfWeek:g,isCompleted:d[y]===!0,isRoutineDay:S,hasTodo:d[y]!==void 0}),h.setDate(h.getDate()+1)}return u.jsx("div",{className:"routine-history-calendar",children:f.map(m=>u.jsxs("div",{className:"history-month",children:[u.jsxs("h3",{className:"history-month-title",children:[m.year," ",m.month+1,""]}),u.jsxs("div",{className:"history-calendar-grid",children:[u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),m.days.length>0&&Array(m.days[0].dayOfWeek).fill(null).map((v,b)=>u.jsx("div",{className:"history-day-cell empty"},`empty-${b}`)),m.days.map((v,b)=>{if(b>0&&v.day===1){const y=6-m.days[b-1].dayOfWeek;return u.jsxs(u.Fragment,{children:[Array(y).fill(null).map((g,p)=>u.jsx("div",{className:"history-day-cell empty"},`empty-end-${b}-${p}`)),u.jsx("div",{className:"history-day-header",children:""},v.dateStr),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsxs("div",{className:`history-day-cell ${v.isCompleted?"completed":""} ${v.isRoutineDay?"":"not-routine-day"}`,children:[u.jsx("span",{className:"day-number",children:v.day}),v.isCompleted&&u.jsx("span",{className:"check-mark",children:""})]})]})}return u.jsxs("div",{className:`history-day-cell ${v.isCompleted?"completed":""} ${v.isRoutineDay?"":"not-routine-day"}`,title:`${v.dateStr}${v.isRoutineDay?"":" (  )"}${v.isCompleted?" - ":v.hasTodo?" - ":""}`,children:[u.jsx("span",{className:"day-number",children:v.day}),v.isCompleted&&u.jsx("span",{className:"check-mark",children:""})]},v.dateStr)})]})]},m.key))})})(),u.jsxs("div",{className:"routine-history-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:" :"}),u.jsxs("span",{className:"stat-value",children:[a.length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value completed",children:[a.filter(l=>l.completed).length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value incomplete",children:[a.filter(l=>!l.completed).length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value",children:[a.length>0?Math.round(a.filter(l=>l.completed).length/a.length*100):0,"%"]})]})]})]})]})})}function mO({show:e,onClose:t,content:n,setContent:a,isSaving:i,placeholder:s=" ..."}){const r=_.useRef(null),l=_.useRef(!1);if(_.useEffect(()=>{r.current&&e&&(r.current.style.height="auto",r.current.style.height=Math.min(r.current.scrollHeight,window.innerHeight*.6)+"px")},[n,e]),_.useEffect(()=>{e&&r.current&&r.current.focus()},[e]),_.useEffect(()=>{const d=f=>{f.key==="Escape"&&e&&t()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e,t]),!e)return null;const o=d=>{d.target===d.currentTarget&&(l.current=!0)},c=d=>{d.target===d.currentTarget&&l.current&&t(),l.current=!1};return u.jsx("div",{className:"memo-modal-overlay",onMouseDown:o,onClick:c,children:u.jsxs("div",{className:"memo-modal",onClick:d=>d.stopPropagation(),children:[u.jsxs("div",{className:"memo-modal-header",children:[u.jsx("h3",{children:"  "}),u.jsxs("div",{className:"memo-modal-actions",children:[i&&u.jsx("span",{className:"memo-saving-indicator",children:" ..."}),u.jsx("button",{className:"memo-modal-close",onClick:t,children:""})]})]}),u.jsx("textarea",{ref:r,value:n,onChange:d=>a(d.target.value),className:"memo-modal-textarea",placeholder:s})]})})}function gO({showGanttChart:e,onClose:t,ganttData:n,ganttPeriod:a,setGanttPeriod:i,formatDateOnly:s}){const r=_.useRef(!1),l=c=>{c.target===c.currentTarget&&(r.current=!0)},o=c=>{c.target===c.currentTarget&&r.current&&t(),r.current=!1};return e?u.jsx("div",{className:"modal-overlay",onMouseDown:l,onClick:o,children:u.jsxs("div",{className:"modal-content gantt-modal",onClick:c=>c.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  -  "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"gantt-filter",children:u.jsx("div",{className:"gantt-period-buttons",children:[{value:"1week",label:" 1"},{value:"2weeks",label:" 2"},{value:"1month",label:" 1"},{value:"3months",label:" 3"},{value:"6months",label:" 6"},{value:"all",label:""}].map(c=>u.jsx("button",{className:`period-button ${a===c.value?"active":""}`,onClick:()=>i(c.value),children:c.label},c.value))})}),u.jsx("div",{className:"gantt-content",children:n.length===0?u.jsx("p",{className:"empty-message",children:" ."}):u.jsx("div",{className:"gantt-chart",children:(()=>{const c=n.flatMap(v=>v.dates),d=[...new Set(c)].sort((v,b)=>new Date(v)-new Date(b));if(d.length===0)return u.jsx("p",{className:"empty-message",children:"  ."});const f=new Date(d[0]),h=new Date(d[d.length-1]),m=[];for(let v=new Date(f);v<=h;v.setDate(v.getDate()+1))m.push(new Date(v).toISOString().split("T")[0]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"gantt-header",children:[u.jsx("div",{className:"gantt-task-column",children:" "}),u.jsx("div",{className:"gantt-timeline",children:m.map(v=>u.jsx("div",{className:"gantt-date-cell",children:s(new Date(v+"T00:00:00")).split("(")[0]},v))})]}),n.map((v,b)=>{const w=new Set(v.dates);return u.jsxs("div",{className:"gantt-row",children:[u.jsx("div",{className:"gantt-task-column",title:v.text,children:u.jsx("span",{className:v.completed?"completed-task":"",children:v.text})}),u.jsx("div",{className:"gantt-timeline",children:m.map(y=>{if(!w.has(y))return u.jsx("div",{className:"gantt-date-cell"},y);const p=y===v.startDate,S=y===v.completedDate;let x="gantt-date-cell has-task";return p?x+=" start-date":S?x+=" completed-date":x+=" middle-date",u.jsx("div",{className:x,children:S?u.jsx("span",{className:"completed-circle",children:""}):""},y)})})]},v.originalId)})]})})()})})]})}):null}function vO({showEncouragementModal:e,onClose:t,encouragementMessages:n,newEncouragementMessage:a,setNewEncouragementMessage:i,onAddEncouragementMessage:s,editingEncouragementId:r,editingEncouragementText:l,setEditingEncouragementId:o,setEditingEncouragementText:c,onUpdateEncouragementMessage:d,onDeleteEncouragementMessage:f}){const h=_.useRef(!1),m=b=>{b.target===b.currentTarget&&(h.current=!0)},v=b=>{b.target===b.currentTarget&&h.current&&t(),h.current=!1};return e?u.jsx("div",{className:"modal-overlay",onMouseDown:m,onClick:v,children:u.jsxs("div",{className:"modal-content encouragement-modal",onClick:b=>b.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"   "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsxs("div",{className:"encouragement-add-section",children:[u.jsx("input",{type:"text",value:a,onChange:b=>i(b.target.value),placeholder:"   ...",className:"encouragement-input",onKeyDown:async b=>{b.key==="Enter"&&a.trim()!==""&&(await s(a.trim()),i(""))}}),u.jsx("button",{onClick:async()=>{a.trim()!==""&&(await s(a.trim()),i(""))},className:"add-encouragement-button",disabled:a.trim()==="",children:""})]}),u.jsx("div",{className:"encouragement-list",children:n.length===0?u.jsx("p",{className:"empty-message",children:"   ."}):n.map((b,w)=>u.jsx("div",{className:"encouragement-item",children:r===w?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"text",value:l,onChange:y=>c(y.target.value),className:"encouragement-edit-input",placeholder:" "}),u.jsxs("div",{className:"encouragement-item-actions",children:[u.jsx("button",{onClick:async()=>{l.trim()!==""&&(await d(w,l.trim()),o(null),c(""))},className:"encouragement-save-button",disabled:l.trim()==="",children:""}),u.jsx("button",{onClick:()=>{o(null),c("")},className:"encouragement-cancel-button",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"encouragement-text",children:b}),u.jsxs("div",{className:"encouragement-item-actions",children:[u.jsx("button",{onClick:()=>{o(w),c(b)},className:"encouragement-edit-button",title:"",children:""}),u.jsx("button",{onClick:async()=>{window.confirm("   ?")&&await f(w)},className:"encouragement-delete-button",title:"",children:""})]})]})},w))})]})}):null}function yO({isOpen:e,onClose:t,onAddSection:n}){const[a,i]=_.useState(""),[s,r]=_.useState(""),l=["","","","","","","","","","","",""],o=h=>{h.preventDefault(),a.trim()&&(n({name:a.trim(),icon:s}),i(""),r(""),t())},c=_.useRef(!1),d=h=>{h.target===h.currentTarget&&(c.current=!0)},f=h=>{h.target===h.currentTarget&&c.current&&t(),c.current=!1};return e?u.jsx("div",{className:"modal-overlay",onMouseDown:d,onClick:f,children:u.jsxs("div",{className:"modal-content add-section-modal",onClick:h=>h.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{className:"modal-close-button",onClick:t,children:""})]}),u.jsxs("form",{onSubmit:o,className:"add-section-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:" "}),u.jsx("input",{type:"text",value:a,onChange:h=>i(h.target.value),placeholder:": ,  , ...",className:"section-name-input",autoFocus:!0,maxLength:20})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:" "}),u.jsx("div",{className:"emoji-grid",children:l.map(h=>u.jsx("button",{type:"button",className:`emoji-button ${s===h?"selected":""}`,onClick:()=>r(h),children:h},h))})]}),u.jsxs("div",{className:"modal-actions",children:[u.jsx("button",{type:"button",onClick:t,className:"cancel-button",children:""}),u.jsx("button",{type:"submit",className:"submit-button",disabled:!a.trim(),children:""})]})]})]})}):null}function pO({show:e,onClose:t,hiddenSections:n,sectionOrder:a,sectionTitles:i,customSections:s,onShowSection:r}){const l=_.useRef(!1),o=f=>{f.target===f.currentTarget&&(l.current=!0)},c=f=>{f.target===f.currentTarget&&l.current&&t(),l.current=!1};if(!e)return null;const d=f=>{if(i[f])return i[f];const h=s.find(m=>m.id===f);return h?`${h.icon} ${h.name}`:f};return n.length===0?u.jsx("div",{className:"modal-overlay",onMouseDown:o,onClick:c,children:u.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:f=>f.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"   "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"modal-body",children:u.jsx("p",{className:"empty-message",children:"  ."})})]})}):u.jsx("div",{className:"modal-overlay",onMouseDown:o,onClick:c,children:u.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:f=>f.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"   "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"modal-body",children:u.jsx("div",{className:"hidden-sections-list",children:n.map(f=>u.jsxs("div",{className:"hidden-section-item",children:[u.jsx("span",{className:"hidden-section-title",children:d(f)}),u.jsx("button",{className:"show-section-button",onClick:()=>{r(f)},title:" ",children:" "})]},f))})})]})})}function bO({todo:e,todoHistory:t,expandedHistoryIds:n,toggleHistoryDetail:a,formatDate:i,formatDateOnly:s,onClose:r}){const l=_.useRef(!1),o=e.visible_dates&&e.visible_dates.length>0?e.visible_dates:[e.date],c=o[0],d=o.map(v=>({id:`${e.id}-${v}`,date:v})),f=t[e.id]||[],h=v=>{v.target===v.currentTarget&&(l.current=!0)},m=v=>{v.target===v.currentTarget&&l.current&&r(),l.current=!1};return u.jsx("div",{className:"modal-overlay",onMouseDown:h,onClick:m,children:u.jsxs("div",{className:"modal-content",onClick:v=>v.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{onClick:r,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"modal-body",children:u.jsxs("div",{className:"todo-history",children:[u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:":"}),u.jsx("span",{className:"history-value",children:i(e.created_at)})]}),u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:s(c?new Date(c+"T00:00:00"):new Date(e.date+"T00:00:00"))})]}),d.length>0&&u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:d.map((v,b)=>{const w=v.date===e.date,y=s(new Date(v.date+"T00:00:00"));return u.jsxs("span",{children:[b>0&&"  ",u.jsxs("span",{style:w?{fontWeight:"bold",color:"#4CAF50"}:{},children:[y.split("(")[0],w?"()":""]})]},v.id)})})]}),(()=>{const v=new Date(e.created_at).toISOString().split("T")[0],b=e.date;return v!==b&&d.length===0?u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:s(new Date(e.date+"T00:00:00"))})]}):null})(),f.length>0&&u.jsxs("div",{className:"history-changes-list",children:[u.jsxs("div",{className:"history-changes-header",children:["  (",f.length,")"]}),f.map(v=>u.jsxs("div",{className:"history-record-compact",children:[u.jsxs("div",{className:"history-record-summary",children:[u.jsxs("div",{className:"history-change-time",children:[i(v.changed_at),v.changed_on_date&&u.jsxs("span",{className:"history-page-info",children:[" (: ",s(new Date(v.changed_on_date+"T00:00:00")),")"]})]}),u.jsx("button",{className:"history-detail-button",onClick:b=>{b.stopPropagation(),a(v.id)},children:n.includes(v.id)?"":""})]}),n.includes(v.id)&&u.jsxs("div",{className:"history-change",children:[u.jsxs("div",{className:"history-change-item history-before",children:[u.jsx("span",{className:"change-badge",children:""}),u.jsx("span",{className:"change-text",children:v.previous_text})]}),u.jsx("div",{className:"history-change-arrow",children:""}),u.jsxs("div",{className:"history-change-item history-after",children:[u.jsx("span",{className:"change-badge",children:""}),u.jsx("span",{className:"change-text",children:v.new_text})]})]})]},v.id))]})]})})]})})}function _O({todo:e,routines:t,routineDaysForModal:n,isEditingRoutineInModal:a,routineTimeSlotForModal:i,onToggleDay:s,setRoutineTimeSlotForModal:r,setRoutineDaysForModal:l,setIsEditingRoutineInModal:o,handleCreateRoutineFromTodo:c,onClose:d}){const f=_.useRef(!1),h=t.find(b=>b.id===e.routine_id),m=b=>{b.target===b.currentTarget&&(f.current=!0)},v=b=>{b.target===b.currentTarget&&f.current&&d(),f.current=!1};return u.jsx("div",{className:"modal-overlay",onMouseDown:m,onClick:v,children:u.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{onClick:d,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"modal-body",children:u.jsx("div",{className:"routine-setup-inline",children:h&&!a?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"routine-current-info",children:[u.jsx("div",{className:"routine-info-title",children:" :"}),u.jsx("div",{className:"routine-days-display",children:Oc.filter(b=>h.days.includes(b.key)).map(b=>u.jsx("span",{className:"routine-day-badge",children:b.label},b.key))}),h.time_slot&&u.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",h.time_slot]})]}),u.jsxs("div",{className:"routine-setup-actions",children:[u.jsx("button",{onClick:b=>{b.stopPropagation(),l(h.days),r(h.time_slot||""),o(!0)},className:"routine-confirm-button",children:""}),u.jsx("button",{onClick:async b=>{b.stopPropagation(),await c(e.id,e.text,[],null,!0),d()},className:"routine-remove-button",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"routine-setup-title",children:a?" :":"  :"}),u.jsx(Wo,{selectedDays:n,onToggle:s,variant:"inline"}),u.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[u.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),u.jsx(hh,{value:i,onChange:b=>r(b)})]}),u.jsxs("div",{className:"routine-setup-actions",children:[u.jsx("button",{onClick:async b=>{b.stopPropagation(),a&&h?await c(e.id,e.text,n,h.id,!1,i):await c(e.id,e.text,n,null,!1,i),d()},className:"routine-confirm-button",children:""}),u.jsx("button",{onClick:b=>{b.stopPropagation(),d()},className:"routine-cancel-button",children:""})]})]})})})]})})}function wO({showUndoToast:e,showSuccessToast:t,successToastMessage:n,lastDeleteAction:a,handleUndoDelete:i,handleUndoRoutineDelete:s,showDeleteConfirmModal:r,todoToDelete:l,setShowDeleteConfirmModal:o,deleteThisOnly:c,deleteFromNow:d,deleteAll:f,showRoutineDeleteModal:h,routineToDelete:m,setShowRoutineDeleteModal:v,deleteRoutineThisOnly:b,deleteRoutineFromNow:w,deleteRoutineAll:y,showTodoHistoryModal:g,selectedTodoForModal:p,todoHistory:S,expandedHistoryIds:x,toggleHistoryDetail:j,handleCloseTodoHistoryModal:T,formatDate:E,formatDateOnly:A,showTodoRoutineSetupModal:M,routines:P,routineDaysForModal:G,isEditingRoutineInModal:Q,routineTimeSlotForModal:re,handleToggleRoutineDayInModal:z,setRoutineTimeSlotForModal:C,setRoutineDaysForModal:q,setIsEditingRoutineInModal:K,handleCreateRoutineFromTodo:me,handleCloseTodoRoutineSetupModal:J,showRoutineModal:rt,handleCloseRoutine:De,routineInput:Qe,setRoutineInput:ze,isAddingRoutine:He,selectedDays:Me,handleToggleDay:ht,selectedTimeSlot:$,setSelectedTimeSlot:ce,handleAddRoutine:te,editingRoutineId:we,editingRoutineText:ke,setEditingRoutineText:Ue,editingRoutineDays:ve,handleToggleEditDay:qe,handleStartEditRoutine:ct,handleSaveEditRoutine:ee,handleCancelEditRoutine:oe,handleDeleteRoutine:ye,fetchRoutineHistory:xe,showRoutineHistory:bt,handleCloseRoutineHistory:Ke,selectedRoutineForHistory:k,routineHistoryData:D,showMemoModal:R,setShowMemoModal:B,memoContent:H,setMemoContent:V,isSavingMemo:X,showGanttChart:L,handleCloseGanttChart:ie,ganttData:Z,ganttPeriod:le,setGanttPeriod:Y,showEncouragementModal:W,setShowEncouragementModal:ge,encouragementMessages:mt,newEncouragementMessage:Kt,setNewEncouragementMessage:on,addEncouragementMessage:Kn,editingEncouragementId:Ui,editingEncouragementText:Je,setEditingEncouragementId:kt,setEditingEncouragementText:Ut,updateEncouragementMessage:wn,deleteEncouragementMessage:Vt,showAddSectionModal:ut,setShowAddSectionModal:zt,handleAddSection:Xn,showHiddenSectionsModal:gt,setShowHiddenSectionsModal:Sn,hiddenSections:Et,sectionOrder:Yt,sectionTitles:xn,customSections:Tn,handleShowSection:En}){return u.jsxs(u.Fragment,{children:[e&&u.jsx(Zg,{message:"",onUndo:i}),t&&u.jsx(Zg,{message:n,onUndo:a?s:null,variant:"success"}),r&&l&&u.jsx(Fg,{todo:l,onClose:()=>o(!1),onDeleteThisOnly:c,onDeleteFromNow:d,onDeleteAll:f}),h&&m&&u.jsx(Fg,{todo:m,onClose:()=>v(!1),onDeleteThisOnly:b,onDeleteFromNow:w,onDeleteAll:y}),g&&p&&u.jsx(bO,{todo:p,todoHistory:S,expandedHistoryIds:x,toggleHistoryDetail:j,formatDate:E,formatDateOnly:A,onClose:T}),M&&p&&u.jsx(_O,{todo:p,routines:P,routineDaysForModal:G,isEditingRoutineInModal:Q,routineTimeSlotForModal:re,onToggleDay:z,setRoutineTimeSlotForModal:C,setRoutineDaysForModal:q,setIsEditingRoutineInModal:K,handleCreateRoutineFromTodo:me,onClose:J}),u.jsx(dO,{showRoutineModal:rt,onClose:De,routineInput:Qe,setRoutineInput:ze,isAddingRoutine:He,selectedDays:Me,onToggleDay:ht,selectedTimeSlot:$,setSelectedTimeSlot:ce,onAddRoutine:te,routines:P,editingRoutineId:we,editingRoutineText:ke,setEditingRoutineText:Ue,editingRoutineDays:ve,onToggleEditDay:qe,onStartEdit:ct,onSaveEdit:ee,onCancelEdit:oe,onDelete:ye,onShowHistory:xe}),u.jsx(hO,{showRoutineHistory:bt,onClose:Ke,selectedRoutine:k,routineHistoryData:D}),u.jsx(mO,{show:R,onClose:()=>B(!1),content:H,setContent:V,isSaving:X,placeholder:" ..."}),u.jsx(gO,{showGanttChart:L,onClose:ie,ganttData:Z,ganttPeriod:le,setGanttPeriod:Y,formatDateOnly:A}),u.jsx(vO,{showEncouragementModal:W,onClose:()=>ge(!1),encouragementMessages:mt,newEncouragementMessage:Kt,setNewEncouragementMessage:on,onAddEncouragementMessage:Kn,editingEncouragementId:Ui,editingEncouragementText:Je,setEditingEncouragementId:kt,setEditingEncouragementText:Ut,onUpdateEncouragementMessage:wn,onDeleteEncouragementMessage:Vt}),u.jsx(yO,{isOpen:ut,onClose:()=>zt(!1),onAddSection:Xn}),u.jsx(pO,{show:gt,onClose:()=>Sn(!1),hiddenSections:Et,sectionOrder:Yt,sectionTitles:xn,customSections:Tn,onShowSection:En})]})}function SO({authLoading:e,session:t,handleGoogleLogin:n}){return e?u.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),u.jsx("div",{children:" ..."})]})}):t?null:u.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:u.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",maxWidth:"400px"},children:[u.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"1rem"},children:" Todo Note"}),u.jsx("p",{style:{fontSize:"1.1rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"2rem"},children:"     "}),u.jsxs("button",{onClick:n,style:{padding:"1rem 2rem",fontSize:"1.1rem",background:"#646cff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 auto"},children:[u.jsx("span",{children:""}),"Google "]})]})})}const Wg=["timeline","routine","normal"];function xO(e){const[t,n]=_.useState(Wg),[a,i]=_.useState(Cu),[s,r]=_.useState(!1),l=async()=>{var g;if(!((g=e==null?void 0:e.user)!=null&&g.id))return;const w=await Jn.get(Pn.SECTION_ORDER);if(w){const p=Wg.filter(S=>!w.includes(S));if(p.length>0){const S=[...p,...w];n(S),o(S)}else n(w)}const y=await Jn.get(Pn.SECTION_ICONS);y&&i({...Cu,...y})},o=async w=>{var y;(y=e==null?void 0:e.user)!=null&&y.id&&await Jn.set(Pn.SECTION_ORDER,w,e.user.id)};return{sectionOrder:t,setSectionOrder:n,sectionIcons:a,isReorderMode:s,setIsReorderMode:r,fetchSectionOrder:l,saveSectionOrder:o,changeSectionIcon:async(w,y)=>{var p;if(!((p=e==null?void 0:e.user)!=null&&p.id))return;const g={...a,[w]:y};i(g),await Jn.set(Pn.SECTION_ICONS,g,e.user.id)},getSectionIcon:w=>a[w]||Cu[w]||"",getRandomIcon:()=>{const w=Math.floor(Math.random()*Xd.length);return Xd[w]},moveSectionLeft:w=>{n(y=>{const g=y.indexOf(w);if(g<=0)return y;const p=[...y];return[p[g-1],p[g]]=[p[g],p[g-1]],o(p),p})},moveSectionRight:w=>{n(y=>{const g=y.indexOf(w);if(g===-1||g>=y.length-1)return y;const p=[...y];return[p[g],p[g+1]]=[p[g+1],p[g]],o(p),p})},handleSectionDragEnd:w=>{const{active:y,over:g}=w;s&&t.includes(y.id)&&g&&y.id!==(g==null?void 0:g.id)&&n(p=>{const S=p.indexOf(y.id),x=p.indexOf(g.id),j=Ha(p,S,x);return o(j),j})},handleSectionsContainerDoubleClick:w=>{s&&w.target===w.currentTarget&&r(!1)}}}function TO(e){const[t,n]=_.useState(""),[a,i]=_.useState(!1),[s,r]=_.useState(""),l=_.useRef(null),o=_.useRef(null),c=async()=>{try{const{data:f,error:h}=await Ie.from("spec_memos").select("content").order("created_at",{ascending:!1}).limit(1);if(h)throw h;const m=f&&f.length>0?f[0].content:"";n(m),r(m)}catch(f){console.error("Error fetching memo:",f.message),n(""),r("")}},d=_.useCallback(async f=>{var h;if(f!==s)try{i(!0);const{data:m}=await Ie.from("spec_memos").select("id").order("created_at",{ascending:!1}).limit(1);m&&m.length>0?await Ie.from("spec_memos").update({content:f,updated_at:new Date().toISOString()}).eq("id",m[0].id):await Ie.from("spec_memos").insert([{content:f,user_id:(h=e==null?void 0:e.user)==null?void 0:h.id}]),r(f)}catch(m){console.error("Error saving memo:",m.message)}finally{i(!1)}},[e,s]);return _.useEffect(()=>{if(t!==s)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{d(t)},1e3),()=>{o.current&&clearTimeout(o.current)}},[t,d,s]),_.useEffect(()=>()=>{o.current&&clearTimeout(o.current),t!==s&&d(t)},[]),{memoContent:t,setMemoContent:n,isSavingMemo:a,memoTextareaRef:l,fetchMemoContent:c}}const Hb=({type:e,supabase:t,selectedDate:n,onDeleteSuccess:a})=>({deleteThisOnly:async l=>{try{const o=Se(n),d=[...l.hidden_dates||[],o],f=e==="todo"?"todos":"routines",{error:h}=await t.from(f).update({hidden_dates:d}).eq("id",l.id);if(h)throw h;return a&&a(l.id,Mu.THIS_ONLY),{success:!0}}catch(o){return console.error(`${e}   (THIS_ONLY):`,o.message),{success:!1,error:o}}},deleteFromNow:async l=>{try{const o=Se(n),d=(l.visible_dates||[]).filter(m=>m<o),f=e==="todo"?"todos":"routines",{error:h}=await t.from(f).update({visible_dates:d,stop_carryover_from:o}).eq("id",l.id);if(h)throw h;return a&&a(l.id,Mu.FROM_NOW),{success:!0}}catch(o){return console.error(`${e}   (FROM_NOW):`,o.message),{success:!1,error:o}}},deleteAll:async l=>{try{const o=Se(n),c=e==="todo"?"todos":"routines",{error:d}=await t.from(c).update({deleted:!0,deleted_date:o}).eq("id",l.id);if(d)throw d;return e==="routine"&&await t.from("todos").update({routine_id:null}).eq("routine_id",l.id),a&&a(l.id,Mu.ALL),{success:!0}}catch(o){return console.error(`${e}   (ALL):`,o.message),{success:!1,error:o}}}}),EO=e=>["sun","mon","tue","wed","thu","fri","sat"][e],jO=({session:e,supabase:t,selectedDate:n,setTodos:a,setSuccessToastMessage:i,setShowSuccessToast:s})=>{const[r,l]=_.useState([]),[o,c]=_.useState(""),[d,f]=_.useState([]),[h,m]=_.useState(""),[v,b]=_.useState(!1),[w,y]=_.useState(!1),[g,p]=_.useState(null),[S,x]=_.useState(""),[j,T]=_.useState([]),[E,A]=_.useState(!1),[M,P]=_.useState(null),[G,Q]=_.useState([]),[re,z]=_.useState(!1),[C,q]=_.useState(null),K=_.useRef(new Set),{deleteThisOnly:me,deleteFromNow:J,deleteAll:rt}=Hb({type:"routine",supabase:t,selectedDate:n,onDeleteSuccess:(ee,oe)=>{l(ye=>ye.filter(xe=>xe.id!==ee)),i(" "),s(!0)}}),De=async()=>{var ee;if((ee=e==null?void 0:e.user)!=null&&ee.id)try{const{data:oe,error:ye}=await t.from("routines").select("*").eq("deleted",!1).order("created_at",{ascending:!1});if(ye)throw ye;l(oe||[])}catch(oe){console.error("  :",oe.message)}},Qe=async()=>{var ee;if(!(o.trim()===""||v))try{b(!0);const oe={text:o,days:d,start_date:Se(n),user_id:(ee=e==null?void 0:e.user)==null?void 0:ee.id};h&&(oe.time_slot=h);const{data:ye,error:xe}=await t.from("routines").insert([oe]).select();if(xe)throw xe;l([ye[0],...r]),c(""),f([]),m("")}catch(oe){console.error("  :",oe.message)}finally{b(!1)}},ze=async(ee,oe,ye,xe=null,bt=!1,Ke="",k=null)=>{var D;try{if(bt){const{error:R}=await t.from("todos").update({routine_id:null}).eq("id",ee);if(R)throw R;a(B=>B.map(H=>H.id===ee?{...H,routine_id:null}:H));return}if(xe){const{error:R}=await t.from("routines").update({days:ye,time_slot:Ke}).eq("id",xe);if(R)throw R;const{error:B}=await t.from("todos").update({is_pending_routine:ye.length===0}).eq("id",ee);if(B)throw B;l(H=>H.map(V=>V.id===xe?{...V,days:ye,time_slot:Ke}:V)),a(H=>H.map(V=>V.id===ee?{...V,is_pending_routine:ye.length===0}:V))}else{const R={text:oe,days:ye,time_slot:Ke,start_date:k||Se(n),user_id:(D=e==null?void 0:e.user)==null?void 0:D.id},{data:B,error:H}=await t.from("routines").insert([R]).select();if(H)throw H;const{error:V}=await t.from("todos").update({routine_id:B[0].id,is_pending_routine:ye.length===0}).eq("id",ee);if(V)throw V;a(X=>X.map(L=>L.id===ee?{...L,routine_id:B[0].id,is_pending_routine:ye.length===0}:L)),l(X=>[B[0],...X])}}catch(R){console.error("  :",R.message)}},He=ee=>{p(ee.id),x(ee.text),T(ee.days)},Me=()=>{p(null),x(""),T([])},ht=async()=>{if(!(!g||S.trim()===""||j.length===0))try{const{error:ee}=await t.from("routines").update({text:S.trim(),days:j}).eq("id",g);if(ee)throw ee;l(r.map(oe=>oe.id===g?{...oe,text:S.trim(),days:j}:oe)),Me()}catch(ee){console.error("  :",ee.message)}},$=ee=>{T(oe=>oe.includes(ee)?oe.filter(ye=>ye!==ee):[...oe,ee])},ce=async ee=>{const oe=r.find(ye=>ye.id===ee);oe&&(q(oe),z(!0))},te=async ee=>{var oe;if(!K.current.has(ee))try{K.current.add(ee);const ye=new Date(ee),xe=EO(ye.getDay()),{data:bt,error:Ke}=await t.from("routines").select("*").eq("deleted",!1);if(Ke)throw Ke;const k=bt.filter(D=>{const R=D.days||[],B=R.length===0||R.includes(xe);if(D.start_date){const H=new Date(D.start_date),V=ye>=H;return B&&V}return B});if(k.length===0)return;for(const D of k){const R=D.text,{data:B,error:H}=await t.from("todos").select("*").eq("routine_id",D.id).eq("deleted",!1);if(H)throw H;if(B&&B.length>1){console.warn(` ${D.id}    (${B.length}).     .`);for(let X=1;X<B.length;X++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",B[X].id)}const V=B&&B.length>0?B[0]:null;if(V){const X=V.visible_dates||[],L=!D.days||D.days.length===0,ie=L?"pending_routine":"routine";if(X.includes(ee)){(V.is_pending_routine!==L||V.section_type!==ie)&&await t.from("todos").update({is_pending_routine:L,section_type:ie}).eq("id",V.id);continue}const Z=[...X,ee].sort(),{error:le}=await t.from("todos").update({visible_dates:Z,is_pending_routine:L,section_type:L?"pending_routine":"routine"}).eq("id",V.id);le&&console.error("    :",le.message)}else{const X=!D.days||D.days.length===0,{error:L}=await t.from("todos").insert([{text:R,completed:!1,date:ee,visible_dates:[ee],hidden_dates:[],order_index:0,routine_id:D.id,is_pending_routine:X,section_type:X?"pending_routine":"routine",user_id:(oe=e==null?void 0:e.user)==null?void 0:oe.id}]);L&&console.error("   :",L.message)}}}catch(ye){console.error("   :",ye.message)}finally{setTimeout(()=>{K.current.delete(ee)},1e3)}},we=async()=>{const oe=Se(new Date);await te(oe)},ke=async ee=>{try{const{data:oe,error:ye}=await t.from("todos").select("*").eq("routine_id",ee.id).eq("deleted",!1);if(ye)throw ye;const xe=oe&&oe.length>0?oe[0]:null;if(xe&&xe.visible_dates){const bt=xe.visible_dates.sort().map(Ke=>({id:`${xe.id}-${Ke}`,date:Ke,text:xe.text,completed:xe.completed,routine_id:xe.routine_id}));Q(bt)}else Q([]);P(ee),A(!0)}catch(oe){console.error("   :",oe.message),alert("   : "+oe.message)}},Ue=()=>{A(!1),P(null),Q([])},ve=()=>{y(!0),De()},qe=()=>{y(!1),c(""),f([])},ct=ee=>{f(oe=>oe.includes(ee)?oe.filter(ye=>ye!==ee):[...oe,ee])};return _.useEffect(()=>{e&&De()},[e]),{routines:r,setRoutines:l,routineInput:o,selectedDays:d,selectedTimeSlot:h,isAddingRoutine:v,showRoutineModal:w,editingRoutineId:g,editingRoutineText:S,editingRoutineDays:j,showRoutineHistory:E,selectedRoutineForHistory:M,routineHistoryData:G,routineCreationInProgress:K,showDeleteConfirmModal:re,setShowDeleteConfirmModal:z,routineToDelete:C,setRoutineToDelete:q,setRoutineInput:c,setSelectedTimeSlot:m,fetchRoutines:De,handleAddRoutine:Qe,handleDeleteRoutine:ce,deleteThisOnly:me,deleteFromNow:J,deleteAll:rt,handleStartEditRoutine:He,handleSaveEditRoutine:ht,handleCancelEditRoutine:Me,handleToggleEditDay:$,handleCreateRoutineFromTodo:ze,createRoutineTodosForDate:te,createRoutineTodos:we,fetchRoutineHistory:ke,handleCloseRoutineHistory:Ue,handleOpenRoutine:ve,handleCloseRoutine:qe,handleToggleDay:ct}};function OO(e,t,n){const a=(c,d)=>e.filter(f=>!(f.parent_id||f.section_type!==c||c==="custom"&&f.section_id!==d)).sort((f,h)=>f.order_index-h.order_index),i=async c=>{let d=[...e];c.forEach((f,h)=>{const m=d.findIndex(v=>v.id===f.id);m!==-1&&(d[m]={...d[m],order_index:h+1})}),t(d);try{for(let f=0;f<c.length;f++)await n.from("todos").update({order_index:f+1}).eq("id",c[f].id)}catch(f){console.error("  :",f.message),t(e)}};return{handleMoveUp:async(c,d,f)=>{if(!e.find(w=>w.id===c))return;const m=a(d,f),v=m.findIndex(w=>w.id===c);if(v<=0)return;const b=Ha(m,v,v-1);await i(b)},handleMoveDown:async(c,d,f)=>{if(!e.find(w=>w.id===c))return;const m=a(d,f),v=m.findIndex(w=>w.id===c);if(v>=m.length-1)return;const b=Ha(m,v,v+1);await i(b)},handleMoveToTop:async(c,d,f)=>{if(!e.find(w=>w.id===c))return;const m=a(d,f),v=m.findIndex(w=>w.id===c);if(v<=0)return;const b=Ha(m,v,0);await i(b)},handleMoveToBottom:async(c,d,f)=>{if(!e.find(w=>w.id===c))return;const m=a(d,f),v=m.findIndex(w=>w.id===c);if(v>=m.length-1)return;const b=Ha(m,v,m.length-1);await i(b)},updateTodoOrder:i}}function AO(e,t,n,a){const[i,s]=_.useState(!1),[r,l]=_.useState(null),[o,c]=_.useState(null);return{isDraggingAny:i,activeTodoId:r,overId:o,handleDragStart:v=>{const{active:b}=v;s(!0),l(b.id)},handleDragOver:v=>{const{over:b}=v;c((b==null?void 0:b.id)||null)},handleDragCancel:()=>{s(!1),l(null),c(null)},handleDragEnd:async v=>{s(!1),l(null),c(null);const{active:b,over:w}=v;if(!w)return;if(w.id&&String(w.id).startsWith("timeline-")){const z=parseInt(String(w.id).replace("timeline-",""),10),C=e.find(q=>q.id===b.id);C&&a&&a(C.id,z);return}if(b.id===w.id)return;const y=e.find(z=>z.id===b.id),g=e.find(z=>z.id===w.id);if(!y||!g)return;const p=y.section_type,S=y.section_id||null,x=g.section_type,j=g.section_id||null,T=p!==x||p==="custom"&&S!==j,E=x,A=j,M=e.filter(z=>!(z.parent_id||z.section_type!==E||E==="custom"&&z.section_id!==A)).sort((z,C)=>z.order_index-C.order_index),P=M.findIndex(z=>z.id===b.id),G=M.findIndex(z=>z.id===w.id);let Q=[...M];T?Q.splice(G,0,{...y,section_type:E,section_id:A,routine_id:E==="routine"||E==="pending_routine"?y.routine_id:null}):Q=Ha(M,P,G);let re=[...e];if(Q.forEach((z,C)=>{const q=re.findIndex(K=>K.id===z.id);q!==-1&&(re[q]={...z,order_index:C+1})}),T){const z=re.findIndex(C=>C.id===b.id);z!==-1&&(re[z]={...re[z],section_type:E,section_id:A,routine_id:E==="routine"||E==="pending_routine"?re[z].routine_id:null})}t(re);try{if(T){const z={section_type:E,section_id:A};E!=="routine"&&E!=="pending_routine"&&(z.routine_id=null,z.is_pending_routine=!1),await n.from("todos").update(z).eq("id",b.id)}for(let z=0;z<Q.length;z++)await n.from("todos").update({order_index:z+1}).eq("id",Q[z].id)}catch(z){console.error("  :",z.message),t(e)}}}}const DO=(e,t,n,a,i,s,r,l,o)=>{const c=OO(a,i,t),d=async(k,D)=>{const R=Se(n),B=a.filter(le=>!le.scheduled_time||le.scheduled_date!==R?!1:parseInt(le.scheduled_time.split(":")[0],10)===D);let H=0;B.length>0&&(H=Math.max(...B.map(Y=>parseInt(Y.scheduled_time.split(":")[1],10)))+1);const V=`${D.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`,X=a.find(le=>le.id===k),L=(X==null?void 0:X.timeline_history)||[],ie={scheduled_date:R,scheduled_time:V,assigned_at:new Date().toISOString()},Z=[...L,ie];i(le=>le.map(Y=>Y.id===k?{...Y,scheduled_time:V,scheduled_date:R,timeline_history:Z}:Y));try{await t.from("todos").update({scheduled_time:V,scheduled_date:R,timeline_history:Z}).eq("id",k)}catch(le){console.error("  :",le.message)}},f=async k=>{i(D=>D.map(R=>R.id===k?{...R,scheduled_time:null,scheduled_date:null}:R));try{await t.from("todos").update({scheduled_time:null,scheduled_date:null}).eq("id",k)}catch(D){console.error("  :",D.message)}},h=async(k,D=6)=>{const R=a.find(L=>L.id===k);if(!(R!=null&&R.scheduled_time))return;const B=parseInt(R.scheduled_time.split(":")[0],10),H=parseInt(R.scheduled_time.split(":")[1],10),V=a.filter(L=>L.scheduled_time&&parseInt(L.scheduled_time.split(":")[0],10)===B).sort((L,ie)=>{const Z=parseInt(L.scheduled_time.split(":")[1],10),le=parseInt(ie.scheduled_time.split(":")[1],10);return Z-le}),X=V.findIndex(L=>L.id===k);if(X>0){const L=V[X-1],ie=parseInt(L.scheduled_time.split(":")[1],10),Z=`${B.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}`,le=`${B.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`;i(Y=>Y.map(W=>W.id===k?{...W,scheduled_time:Z}:W.id===L.id?{...W,scheduled_time:le}:W));try{await t.from("todos").update({scheduled_time:Z}).eq("id",k),await t.from("todos").update({scheduled_time:le}).eq("id",L.id)}catch(Y){console.error("   :",Y.message)}}else{if(B<=D)return;const L=B-1,ie=a.filter(Y=>Y.scheduled_time&&parseInt(Y.scheduled_time.split(":")[0],10)===L);let Z=0;ie.length>0&&(Z=Math.max(...ie.map(W=>parseInt(W.scheduled_time.split(":")[1],10)))+1);const le=`${L.toString().padStart(2,"0")}:${Z.toString().padStart(2,"0")}`;i(Y=>Y.map(W=>W.id===k?{...W,scheduled_time:le}:W));try{await t.from("todos").update({scheduled_time:le}).eq("id",k)}catch(Y){console.error("   :",Y.message)}}},m=async(k,D=24)=>{const R=a.find(L=>L.id===k);if(!(R!=null&&R.scheduled_time))return;const B=parseInt(R.scheduled_time.split(":")[0],10),H=parseInt(R.scheduled_time.split(":")[1],10),V=a.filter(L=>L.scheduled_time&&parseInt(L.scheduled_time.split(":")[0],10)===B).sort((L,ie)=>{const Z=parseInt(L.scheduled_time.split(":")[1],10),le=parseInt(ie.scheduled_time.split(":")[1],10);return Z-le}),X=V.findIndex(L=>L.id===k);if(X<V.length-1){const L=V[X+1],ie=parseInt(L.scheduled_time.split(":")[1],10),Z=`${B.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}`,le=`${B.toString().padStart(2,"0")}:${H.toString().padStart(2,"0")}`;i(Y=>Y.map(W=>W.id===k?{...W,scheduled_time:Z}:W.id===L.id?{...W,scheduled_time:le}:W));try{await t.from("todos").update({scheduled_time:Z}).eq("id",k),await t.from("todos").update({scheduled_time:le}).eq("id",L.id)}catch(Y){console.error("   :",Y.message)}}else{if(B>=D)return;const L=B+1,ie=a.filter(Y=>Y.scheduled_time&&parseInt(Y.scheduled_time.split(":")[0],10)===L);let Z=0;if(ie.length>0){const Y=Math.min(...ie.map(W=>parseInt(W.scheduled_time.split(":")[1],10)));if(Z=Y>0?Y-1:0,Z===0&&Y===0){const W=ie.map(ge=>({...ge,scheduled_time:`${L.toString().padStart(2,"0")}:${(parseInt(ge.scheduled_time.split(":")[1],10)+1).toString().padStart(2,"0")}`}));i(ge=>ge.map(mt=>mt.id===k?{...mt,scheduled_time:`${L.toString().padStart(2,"0")}:00`}:W.find(on=>on.id===mt.id)||mt));try{await t.from("todos").update({scheduled_time:`${L.toString().padStart(2,"0")}:00`}).eq("id",k);for(const ge of W)await t.from("todos").update({scheduled_time:ge.scheduled_time}).eq("id",ge.id)}catch(ge){console.error("   :",ge.message)}return}}const le=`${L.toString().padStart(2,"0")}:${Z.toString().padStart(2,"0")}`;i(Y=>Y.map(W=>W.id===k?{...W,scheduled_time:le}:W));try{await t.from("todos").update({scheduled_time:le}).eq("id",k)}catch(Y){console.error("   :",Y.message)}}},v=AO(a,i,t,d),[b,w]=_.useState(""),[y,g]=_.useState(""),[p,S]=_.useState(""),[x,j]=_.useState(!0),[T,E]=_.useState(!1),[A,M]=_.useState(null),[P,G]=_.useState(!1),[Q,re]=_.useState(!1),[z,C]=_.useState(""),[q,K]=_.useState(null),[me,J]=_.useState(null),[rt,De]=_.useState(!1),[Qe,ze]=_.useState(null),He=_.useRef(new Set),Me=_.useRef(new Set),{deleteThisOnly:ht,deleteFromNow:$,deleteAll:ce}=Hb({type:"todo",supabase:t,selectedDate:n,onDeleteSuccess:(k,D)=>{const R=a.find(B=>B.id===k);R&&(M(R),K({id:k,deleteType:D,item:R}),G(!0),setTimeout(()=>{G(!1),M(null),K(null)},5e3)),i(B=>B.filter(H=>H.id!==k)),De(!1),ze(null)}}),te=k=>["sun","mon","tue","wed","thu","fri","sat"][k],we=async k=>{var D;if(!He.current.has(k))try{He.current.add(k);const R=new Date(k),B=te(R.getDay()),{data:H,error:V}=await t.from("routines").select("*").eq("deleted",!1);if(V)throw V;const X=H.filter(L=>{const ie=L.days||[],Z=ie.length===0||ie.includes(B);if(L.start_date){const le=new Date(L.start_date),Y=R>=le;return Z&&Y}return Z});if(X.length===0)return;for(const L of X){const ie=L.text,{data:Z,error:le}=await t.from("todos").select("*").eq("routine_id",L.id).eq("deleted",!1);if(le)throw le;if(Z&&Z.length>1){console.warn(` ${L.id}    (${Z.length}).     .`);for(let W=1;W<Z.length;W++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",Z[W].id)}const Y=Z&&Z.length>0?Z[0]:null;if(Y){if((Y.hidden_dates||[]).includes(k)||Y.stop_carryover_from&&k>=Y.stop_carryover_from)continue;const ge=!L.days||L.days.length===0,mt=Y.visible_dates||[],Kt=ge?"pending_routine":"routine";if(mt.includes(k)){if(Y.is_pending_routine!==ge||Y.section_type!==Kt){const{error:Je}=await t.from("todos").update({is_pending_routine:ge,section_type:Kt}).eq("id",Y.id);Je&&console.error(" :",Je)}continue}const on=[...mt,k].sort(),{error:Kn}=await t.from("todos").update({visible_dates:on,is_pending_routine:ge,section_type:ge?"pending_routine":"routine"}).eq("id",Y.id);Kn&&console.error("    :",Kn.message)}else{const W=!L.days||L.days.length===0,{error:ge}=await t.from("todos").insert([{text:ie,completed:!1,date:k,visible_dates:[k],hidden_dates:[],order_index:0,routine_id:L.id,is_pending_routine:W,section_type:W?"pending_routine":"routine",user_id:(D=e==null?void 0:e.user)==null?void 0:D.id}]);ge&&console.error("   :",ge.message)}}}catch(R){console.error("   :",R.message)}finally{setTimeout(()=>{He.current.delete(k)},1e3)}},ke=async()=>{var k;if(!((k=e==null?void 0:e.user)!=null&&k.id)){j(!1);return}try{j(!0);const D=Se(n);await we(D);const{data:R,error:B}=await t.from("todos").select("*").eq("deleted",!1);if(B)throw B;const H=(R||[]).filter(Y=>Y.routine_id),V=[...new Set(H.map(Y=>Y.routine_id))];let X={};if(V.length>0){const{data:Y}=await t.from("routines").select("*").in("id",V);X=(Y||[]).reduce((W,ge)=>(W[ge.id]=ge,W),{})}const L=new Date(D),ie=te(L.getDay()),Z=(R||[]).filter(Y=>{if(Y.stop_carryover_from&&D>=Y.stop_carryover_from||Y.hidden_dates&&Array.isArray(Y.hidden_dates)&&Y.hidden_dates.includes(D))return!1;if(Y.routine_id){const ge=X[Y.routine_id];if(ge){const mt=ge.days||[];if(mt.length>0&&!mt.includes(ie))return!1}}return Y.visible_dates&&Array.isArray(Y.visible_dates)?Y.visible_dates.includes(D):Y.date===D}),le=Z.filter(Y=>Y.routine_id);if(le.length>0){const Y=[...new Set(le.map(ge=>ge.routine_id))],{data:W}=await t.from("routines").select("*").in("id",Y);for(const ge of le){const mt=W==null?void 0:W.find(Kn=>Kn.id===ge.routine_id);if(!mt)continue;const Kt=!mt.days||mt.days.length===0,on=Kt?"pending_routine":"routine";(ge.section_type!==on||ge.is_pending_routine!==Kt)&&(await t.from("todos").update({section_type:on,is_pending_routine:Kt}).eq("id",ge.id),ge.section_type=on,ge.is_pending_routine=Kt)}}i(Z)}catch(D){console.error("   :",D.message)}finally{j(!1)}},Ue=async()=>{var k;if(!(b.trim()===""||T))try{E(!0);const D=a.filter(X=>!X.parent_id&&X.section_type==="normal"),R=D.length>0?Math.max(...D.map(X=>X.order_index))+1:1,B=Se(n),{data:H,error:V}=await t.from("todos").insert([{text:b,completed:!1,order_index:R,date:B,visible_dates:[B],hidden_dates:[],section_type:"normal",user_id:(k=e==null?void 0:e.user)==null?void 0:k.id}]).select();if(V)throw V;i([...a,H[0]]),w("")}catch(D){console.error("   :",D.message)}finally{E(!1)}},ve=async()=>{var k,D;if(!(y.trim()===""||T))try{E(!0);const R=Se(n),{data:B,error:H}=await t.from("routines").insert([{text:y,days:[],start_date:R,user_id:(k=e==null?void 0:e.user)==null?void 0:k.id}]).select();if(H)throw H;const V=B[0],X=a.filter(le=>!le.parent_id&&le.section_type==="pending_routine"),L=X.length>0?Math.max(...X.map(le=>le.order_index))+1:1,{data:ie,error:Z}=await t.from("todos").insert([{text:y,completed:!1,order_index:L,date:R,visible_dates:[R],hidden_dates:[],routine_id:V.id,is_pending_routine:!0,section_type:"pending_routine",user_id:(D=e==null?void 0:e.user)==null?void 0:D.id}]).select();if(Z)throw Z;r([V,...s]),i([...a,ie[0]]),g("")}catch(R){console.error("   :",R.message)}finally{E(!1)}},qe=async(k,D)=>{var R;if(!(!D||D.trim()===""))try{const B=a.filter(W=>!W.parent_id&&W.section_type==="normal"),H=B.length>0?Math.max(...B.map(W=>W.order_index))+1:1,V=Se(n),X=a.filter(W=>!W.scheduled_time||W.scheduled_date!==V?!1:parseInt(W.scheduled_time.split(":")[0],10)===k);let L=0;X.length>0&&(L=Math.max(...X.map(ge=>parseInt(ge.scheduled_time.split(":")[1],10)))+1);const ie=`${k.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`,Z={scheduled_date:V,scheduled_time:ie,assigned_at:new Date().toISOString()},{data:le,error:Y}=await t.from("todos").insert([{text:D.trim(),completed:!1,order_index:H,date:V,visible_dates:[V],hidden_dates:[],section_type:"normal",scheduled_time:ie,scheduled_date:V,timeline_history:[Z],user_id:(R=e==null?void 0:e.user)==null?void 0:R.id}]).select();if(Y)throw Y;return i([...a,le[0]]),le[0]}catch(B){return console.error("   :",B.message),null}},ct=async()=>{var k;if(!(p.trim()===""||T))try{E(!0);const D=a.filter(X=>!X.parent_id&&X.section_type==="normal"),R=D.length>0?Math.max(...D.map(X=>X.order_index))+1:1,B=Se(n),{data:H,error:V}=await t.from("todos").insert([{text:p,completed:!1,order_index:R,date:B,visible_dates:[B],hidden_dates:[],section_type:"normal",user_id:(k=e==null?void 0:e.user)==null?void 0:k.id}]).select();if(V)throw V;i([...a,H[0]]),S("")}catch(D){console.error("   :",D.message)}finally{E(!1)}},ee=async k=>{const D=a.find(R=>R.id===k);if(D)try{const R=!D.completed,B=R?new Date().toISOString():null,{error:H}=await t.from("todos").update({completed:R,completed_at:B}).eq("id",k);if(H)throw H;i(a.map(V=>V.id===k?{...V,completed:R,completed_at:B}:V))}catch(R){console.error("   :",R.message)}},oe=k=>{i(a.filter(D=>D.id!==k))},ye=async(k,D)=>{const R=a.find(B=>B.id===k);R&&(D?D==="this-only"?await ht(R):D==="from-now"?await $(R):D==="all"&&await ce(R):(ze(R),De(!0)))},xe=async()=>{if(!(!A||!q))try{const{deleteType:k}=q,D=Se(n);if(k==="this-only"){const R=(A.hidden_dates||[]).filter(H=>H!==D),{error:B}=await t.from("todos").update({hidden_dates:R}).eq("id",A.id);if(B)throw B}else if(k==="from-now"){const{error:R}=await t.from("todos").update({visible_dates:A.visible_dates,stop_carryover_from:null}).eq("id",A.id);if(R)throw R}else if(k==="all"){const{error:R}=await t.from("todos").update({deleted:!1,deleted_date:null}).eq("id",A.id);if(R)throw R}i(R=>{const B={...A};return[...R,B].sort((V,X)=>V.order_index-X.order_index)}),G(!1),M(null),K(null)}catch(k){console.error("  :",k.message)}},bt=async(k,D)=>{var R,B;try{let H=null;Me.current.add(k);const V=new Date().toISOString();if(i(ie=>(H=ie.find(Z=>Z.id===k),!H||H.text===D?(Me.current.delete(k),ie):ie.map(Z=>Z.id===k?{...Z,text:D,updated_at:V}:Z))),!H||H.text===D)return;const{error:X}=await t.from("todo_history").insert([{todo_id:k,previous_text:H.text,new_text:D,changed_on_date:H.date,user_id:(R=e==null?void 0:e.user)==null?void 0:R.id}]);if(X&&console.error("  :",X.message),H.original_todo_id){const{data:ie,error:Z}=await t.from("todos").select("text, date").eq("id",H.original_todo_id).single();!Z&&ie&&await t.from("todo_history").insert([{todo_id:H.original_todo_id,previous_text:H.text,new_text:D,changed_on_date:H.date,user_id:(B=e==null?void 0:e.user)==null?void 0:B.id}])}const{error:L}=await t.from("todos").update({text:D}).eq("id",k);L?(console.error("   :",L.message),i(ie=>ie.map(Z=>Z.id===k?H:Z)),Me.current.delete(k)):setTimeout(()=>{Me.current.delete(k)},5e3)}catch(H){console.error("   :",H.message),Me.current.delete(k)}},Ke=async(k,D)=>{var R;if(!(!D||D.trim()===""))try{const H=a.filter(ie=>ie.parent_id===k).length+1,V=Se(n),{data:X,error:L}=await t.from("todos").insert([{text:D.trim(),completed:!1,order_index:H,date:V,parent_id:k,user_id:(R=e==null?void 0:e.user)==null?void 0:R.id}]).select();if(L)throw L;i([...a,X[0]])}catch(B){console.error("    :",B.message)}};return{inputValue:b,setInputValue:w,routineInputValue:y,setRoutineInputValue:g,normalInputValue:p,setNormalInputValue:S,loading:x,isAdding:T,deletedTodo:A,showUndoToast:P,showSuccessToast:Q,successToastMessage:z,lastDeleteAction:q,focusedTodoId:me,setFocusedTodoId:J,selectedTodoForModal:l,showDeleteConfirmModal:rt,setShowDeleteConfirmModal:De,todoToDelete:Qe,setTodoToDelete:ze,isDraggingAny:v.isDraggingAny,activeTodoId:v.activeTodoId,overId:v.overId,fetchTodos:ke,handleAddTodo:Ue,handleAddRoutineTodo:ve,handleAddNormalTodo:ct,handleToggleTodo:ee,handleDeleteTodo:ye,deleteThisOnly:ht,deleteFromNow:$,deleteAll:ce,handleUndoDelete:xe,handleEditTodo:bt,handleAddSubTodo:Ke,handleRemoveTodoFromUI:oe,handleDragStart:v.handleDragStart,handleDragOver:v.handleDragOver,handleDragCancel:v.handleDragCancel,handleDragEnd:v.handleDragEnd,handleMoveUp:c.handleMoveUp,handleMoveDown:c.handleMoveDown,handleMoveToTop:c.handleMoveToTop,handleMoveToBottom:c.handleMoveToBottom,handleRemoveFromTimeline:f,handleMoveUpInTimeline:h,handleMoveDownInTimeline:m,handleAddTodoFromTimeline:qe}},NO=({session:e,supabase:t,selectedTodoForModal:n,setSelectedTodoForModal:a})=>{const[i,s]=_.useState(!1),[r,l]=_.useState({}),[o,c]=_.useState([]);return{showTodoHistoryModal:i,todoHistory:r,expandedHistoryIds:o,handleOpenTodoHistoryModal:async m=>{a(m);try{const{data:v,error:b}=await t.from("todo_history").select("*").eq("todo_id",m.id).order("changed_at",{ascending:!1});if(b)throw b;l(w=>({...w,[m.id]:v||[]}))}catch(v){console.error("Error fetching history:",v)}s(!0)},handleCloseTodoHistoryModal:()=>{s(!1),a(null),c([])},toggleHistoryDetail:m=>{c(v=>v.includes(m)?v.filter(b=>b!==m):[...v,m])}}},CO=({selectedTodoForModal:e,setSelectedTodoForModal:t,routines:n})=>{const[a,i]=_.useState(!1),[s,r]=_.useState([]),[l,o]=_.useState(!1),[c,d]=_.useState("");return{showTodoRoutineSetupModal:a,routineDaysForModal:s,setRoutineDaysForModal:r,isEditingRoutineInModal:l,setIsEditingRoutineInModal:o,routineTimeSlotForModal:c,setRoutineTimeSlotForModal:d,handleOpenTodoRoutineSetupModal:v=>{t(v);const b=n.find(w=>w.id===v.routine_id);b?(r(b.days||[]),d(b.time_slot||""),o(!1)):(r([]),d(""),o(!0)),i(!0)},handleCloseTodoRoutineSetupModal:()=>{i(!1),t(null),r([]),d(""),o(!1)},handleToggleRoutineDayInModal:v=>{r(b=>b.includes(v)?b.filter(w=>w!==v):[...b,v])}}},RO=({session:e,supabase:t,selectedDate:n})=>{const a=_.useRef(!1);return{carryOverInProgress:a,carryOverIncompleteTodos:async r=>{if(!a.current)try{a.current=!0;const{data:l,error:o}=await t.from("todos").select("*").eq("deleted",!1).eq("completed",!1);if(o)throw o;if(!l||l.length===0)return;const c=l.filter(d=>(d.hidden_dates||[]).includes(r)?!1:d.visible_dates&&Array.isArray(d.visible_dates)&&d.visible_dates.length>0?d.visible_dates.includes(r)?!1:d.visible_dates.some(m=>m<r):!!(d.date&&d.date<r));if(c.length===0)return;for(const d of c){let f=[];d.visible_dates&&Array.isArray(d.visible_dates)&&d.visible_dates.length>0?f=[...d.visible_dates,r]:f=d.date?[d.date,r]:[r];const{error:h}=await t.from("todos").update({visible_dates:f}).eq("id",d.id);h&&console.error(` ${d.id}  :`,h.message)}}catch(l){console.error("  :",l.message)}finally{a.current=!1}},movePastIncompleteTodosToToday:async()=>{if(!a.current)try{a.current=!0;const r=new Date,l=Se(r),{data:o,error:c}=await t.from("todos").select("date").lt("date",l).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("date",{ascending:!0}).limit(1);if(c)throw c;if(!o||o.length===0)return;const d=new Date(o[0].date+"T00:00:00");let f=new Date(d);const h=new Date(r);h.setDate(h.getDate()-1);let m=0;for(;f<=h;){const v=Se(f),b=new Date(f);b.setDate(b.getDate()+1);const w=Se(b),{data:y,error:g}=await t.from("todos").select("*").eq("date",v).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("order_index",{ascending:!0});if(g)throw g;if(y&&y.length>0){const{data:p,error:S}=await t.from("todos").select("*").eq("date",w).eq("deleted",!1).order("order_index",{ascending:!0});if(S)throw S;const x=new Set;p==null||p.forEach(T=>{T.original_todo_id!==null&&x.add(T.original_todo_id)});const j=y.filter(T=>{if(T.stop_carryover_from&&v>=T.stop_carryover_from)return!1;const E=T.original_todo_id||T.id;return!x.has(E)});if(j.length>0){const T=j.map(z=>z.original_todo_id||z.id).filter((z,C,q)=>q.indexOf(z)===C),{data:E,error:A}=await t.from("todos").select("id, created_at").in("id",T);if(A)throw A;const M={};E==null||E.forEach(z=>{M[z.id]=z.created_at});const G=(p?p.length:0)+1,Q=j.map((z,C)=>{const q=z.original_todo_id||z.id;return{text:z.text,completed:!1,date:w,created_at:M[q]||z.created_at,order_index:G+C,original_todo_id:q,parent_id:null,routine_id:null}}),{error:re}=await t.from("todos").insert(Q);if(re)throw re;m+=j.length}}f.setDate(f.getDate()+1)}m>0}catch(r){console.error("    :",r.message)}finally{a.current=!1}}}};function MO(e,t){const[n,a]=_.useState([]),[i,s]=_.useState(!1),[r,l]=_.useState(""),[o,c]=_.useState(null),[d,f]=_.useState(""),[h,m]=_.useState(!1),[v,b]=_.useState(""),w=()=>{if(n.length===0)return"";const j=Math.floor(Math.random()*n.length);return n[j]},y=()=>{let j=0;m(!0),setTimeout(()=>{let T=w();for(;T===v&&n.length>1&&j<10;)T=w(),j++;m(!1),b(T)},300)},g=async()=>{try{const{data:j,error:T}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(T)throw T;if(j&&j.length>0){const E=j.map(A=>A.message);a(E),v||b(E[0])}}catch(j){console.error("   :",j.message)}},p=async j=>{var T;try{const{data:E}=await t.from("encouragement_messages").select("order_index").order("order_index",{ascending:!1}).limit(1),A=E&&E.length>0?E[0].order_index:0,{error:M}=await t.from("encouragement_messages").insert([{message:j,order_index:A+1,user_id:(T=e==null?void 0:e.user)==null?void 0:T.id}]);if(M)throw M;await g()}catch(E){console.error("   :",E.message),alert("   .")}},S=async(j,T)=>{try{const{data:E}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!E||j>=E.length)throw new Error("   .");const A=E[j],{error:M}=await t.from("encouragement_messages").update({message:T}).eq("id",A.id);if(M)throw M;await g()}catch(E){console.error("   :",E.message),alert("   .")}},x=async j=>{try{const{data:T}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!T||j>=T.length)throw new Error("   .");const E=T[j],{error:A}=await t.from("encouragement_messages").delete().eq("id",E.id);if(A)throw A;await g()}catch(T){console.error("   :",T.message),alert("   .")}};return _.useEffect(()=>{n.length>0&&!v&&b(w())},[n]),{encouragementMessages:n,showEncouragementModal:i,setShowEncouragementModal:s,newEncouragementMessage:r,setNewEncouragementMessage:l,editingEncouragementId:o,setEditingEncouragementId:c,editingEncouragementText:d,setEditingEncouragementText:f,showEncouragementEmoji:h,currentEncouragementMessage:v,handleEncouragementClick:y,fetchEncouragementMessages:g,addEncouragementMessage:p,updateEncouragementMessage:S,deleteEncouragementMessage:x}}function kO(e){const[t,n]=_.useState(!1),[a,i]=_.useState([]),[s,r]=_.useState("1week"),l=async()=>{try{const d=new Date,f=Se(d);let h=null;if(s!=="all")switch(h=new Date(d),s){case"1week":h.setDate(d.getDate()-7);break;case"2weeks":h.setDate(d.getDate()-14);break;case"1month":h.setMonth(d.getMonth()-1);break;case"3months":h.setMonth(d.getMonth()-3);break;case"6months":h.setMonth(d.getMonth()-6);break}let m=e.from("todos").select("*").eq("deleted",!1).is("routine_id",null).order("created_at",{ascending:!0});h&&(m=m.gte("date",Se(h)));const{data:v,error:b}=await m;if(b)throw b;const w={};for(const g of v||[]){const p=g.original_todo_id||g.id;w[p]||(w[p]=[]),w[p].push(g)}const y=Object.entries(w).map(([g,p])=>{const S=p.sort((A,M)=>new Date(A.date)-new Date(M.date)),x=S[0],j=S.map(A=>A.date);let T=null;for(const A of S)if(A.completed&&A.completed_at){const M=new Date(A.completed_at);T=Se(M);break}const E=S.find(A=>A.date===f);return{text:x.text,originalId:parseInt(g),createdAt:x.created_at,startDate:j[0],endDate:j[j.length-1],dates:j,completed:(E==null?void 0:E.completed)||!1,completedDate:T}}).sort((g,p)=>new Date(g.createdAt)-new Date(p.createdAt));i(y)}catch(d){console.error("   :",d.message)}};return{showGanttChart:t,ganttData:a,ganttPeriod:s,setGanttPeriod:r,handleOpenGanttChart:async()=>{n(!0),await l()},handleCloseGanttChart:()=>{n(!1),i([])},fetchGanttData:l}}function UO(){const{session:e,authLoading:t,handleGoogleLogin:n,handleLogout:a}=Fj(),[i,s]=_.useState(new Date),[r,l]=_.useState(!1),o=_.useRef(new Set),c=w1(Ou(dh,{activationConstraint:{delay:120,tolerance:5}}),Ou(Eb,{activationConstraint:{delay:120,tolerance:5}}),Ou(ch,{coordinateGetter:Jj})),[d,f]=_.useState([]),[h,m]=_.useState(null),{showTodoHistoryModal:v,todoHistory:b,expandedHistoryIds:w,handleOpenTodoHistoryModal:y,handleCloseTodoHistoryModal:g,toggleHistoryDetail:p}=NO({session:e,supabase:Ie,selectedTodoForModal:h,setSelectedTodoForModal:m}),{showRoutineModal:S,routines:x,setRoutines:j,routineInput:T,setRoutineInput:E,selectedDays:A,selectedTimeSlot:M,setSelectedTimeSlot:P,isAddingRoutine:G,editingRoutineId:Q,editingRoutineText:re,setEditingRoutineText:z,showRoutineHistory:C,selectedRoutineForHistory:q,routineHistoryData:K,editingRoutineDays:me,showDeleteConfirmModal:J,setShowDeleteConfirmModal:rt,routineToDelete:De,fetchRoutines:Qe,handleAddRoutine:ze,handleCreateRoutineFromTodo:He,handleStartEditRoutine:Me,handleCancelEditRoutine:ht,handleSaveEditRoutine:$,handleToggleEditDay:ce,handleDeleteRoutine:te,deleteThisOnly:we,deleteFromNow:ke,deleteAll:Ue,fetchRoutineHistory:ve,handleCloseRoutineHistory:qe,handleOpenRoutine:ct,handleCloseRoutine:ee,handleToggleDay:oe,createRoutineTodos:ye}=jO({session:e,supabase:Ie,selectedDate:i,setTodos:f,setSuccessToastMessage:()=>{},setShowSuccessToast:()=>{}}),{showTodoRoutineSetupModal:xe,routineDaysForModal:bt,setRoutineDaysForModal:Ke,isEditingRoutineInModal:k,setIsEditingRoutineInModal:D,routineTimeSlotForModal:R,setRoutineTimeSlotForModal:B,handleOpenTodoRoutineSetupModal:H,handleCloseTodoRoutineSetupModal:V,handleToggleRoutineDayInModal:X}=CO({selectedTodoForModal:h,setSelectedTodoForModal:m,routines:x}),{carryOverIncompleteTodos:L}=RO({session:e,supabase:Ie,selectedDate:i}),{routineInputValue:ie,setRoutineInputValue:Z,normalInputValue:le,setNormalInputValue:Y,loading:W,isDraggingAny:ge,isAdding:mt,showUndoToast:Kt,showSuccessToast:on,successToastMessage:Kn,lastDeleteAction:Ui,focusedTodoId:Je,setFocusedTodoId:kt,showDeleteConfirmModal:Ut,setShowDeleteConfirmModal:wn,todoToDelete:Vt,activeTodoId:ut,overId:zt,fetchTodos:Xn,handleAddRoutineTodo:gt,handleAddNormalTodo:Sn,handleToggleTodo:Et,handleDeleteTodo:Yt,handleAddSubTodo:xn,handleEditTodo:Tn,handleDragStart:En,handleDragOver:ai,handleDragCancel:Qs,handleDragEnd:qb,handleUndoDelete:mh,deleteThisOnly:$b,deleteFromNow:Ib,deleteAll:Vb,handleRemoveTodoFromUI:hl,handleMoveUp:ml,handleMoveDown:gl,handleMoveToTop:vl,handleMoveToBottom:yl,handleRemoveFromTimeline:gh,handleMoveUpInTimeline:vh,handleMoveDownInTimeline:yh,handleAddTodoFromTimeline:Yb}=DO(e,Ie,i,d,f,x,j,h),pl=O=>{kt(O)},bl=O=>{},Gb=()=>{mh()},{showGanttChart:ph,ganttData:Kb,ganttPeriod:bh,setGanttPeriod:Xb,handleOpenGanttChart:Qb,handleCloseGanttChart:Jb,fetchGanttData:Pb}=kO(Ie),[Zb,_h]=_.useState(!1),{memoContent:Fb,setMemoContent:Wb,isSavingMemo:e_,fetchMemoContent:t_}=TO(e),{encouragementMessages:n_,showEncouragementModal:a_,setShowEncouragementModal:wh,newEncouragementMessage:i_,setNewEncouragementMessage:s_,editingEncouragementId:r_,setEditingEncouragementId:l_,editingEncouragementText:o_,setEditingEncouragementText:c_,showEncouragementEmoji:u_,currentEncouragementMessage:d_,handleEncouragementClick:f_,fetchEncouragementMessages:h_,addEncouragementMessage:m_,updateEncouragementMessage:g_,deleteEncouragementMessage:v_}=MO(e,Ie),y_=async O=>{var I,se;try{const ne=Se(i),U=d.filter(Ee=>!Ee.parent_id&&Ee.section_type==="normal"),ue=U.length>0?Math.max(...U.map(Ee=>Ee.order_index))+1:1,nt=`temp_${Date.now()}_${Math.random()}`,Te={id:nt,text:O,completed:!1,order_index:ue,date:ne,visible_dates:[ne],hidden_dates:[],section_type:"normal",user_id:(I=e==null?void 0:e.user)==null?void 0:I.id,_isOptimistic:!0};if(f(Ee=>[...Ee,Te]),(se=e==null?void 0:e.user)!=null&&se.id&&Ie){const{data:Ee,error:at}=await Ie.from("todos").insert([{text:O,completed:!1,order_index:ue,date:ne,visible_dates:[ne],hidden_dates:[],section_type:"normal",user_id:e.user.id}]).select();if(at)throw at;f(Gt=>Gt.map(je=>je.id===nt?Ee[0]:je))}else{const Ee=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");Ee.push({text:O,dateStr:ne,timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(Ee))}}catch(ne){console.error("Quick add error:",ne);const U=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");U.push({text:O,dateStr:Se(i),timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(U))}},[Qn,p_]=_.useState(()=>localStorage.getItem("viewMode")||"horizontal"),[Ac,Sh]=_.useState({normal:" ",routine:" "}),[ii,Js]=_.useState([]),[b_,xh]=_.useState(!1),[Th,Eh]=_.useState(!1),[jh,Oh]=_.useState({}),__=xO(e),{sectionOrder:zi,setSectionOrder:Ah,fetchSectionOrder:w_,saveSectionOrder:Dh,moveSectionLeft:Dc,moveSectionRight:Nc,changeSectionIcon:_l,getSectionIcon:wl}=__,Li=_.useRef(null),[S_,x_]=_.useState(0),Cc=_.useRef(null),Nh=_.useRef(null),[si,Rc]=_.useState([]),[T_,Ch]=_.useState(!1),Rh=async O=>{var I;(I=e==null?void 0:e.user)!=null&&I.id&&await Jn.set(Pn.HIDDEN_SECTIONS,O,e.user.id)},E_=async()=>{var I;if(!((I=e==null?void 0:e.user)!=null&&I.id))return;const O=await Jn.get(Pn.HIDDEN_SECTIONS);O&&Rc(O)},Mc=O=>{const I=[...si,O];Rc(I),Rh(I)},j_=O=>{const I=si.filter(se=>se!==O);Rc(I),Rh(I)},O_=()=>{const O=new Date(i);O.setDate(O.getDate()-1),s(O)},A_=()=>{const O=new Date(i);O.setDate(O.getDate()+1),s(O)},D_=O=>{const I=new Date(O.target.value+"T00:00:00");s(I)},N_=async()=>{var I;if(!((I=e==null?void 0:e.user)!=null&&I.id))return;const O=await Jn.get(Pn.SECTION_TITLES);O&&Sh(se=>({...se,...O}))},C_=async(O,I)=>{var ne;if(!((ne=e==null?void 0:e.user)!=null&&ne.id))return;const se={...Ac,[O]:I};Sh(se),await Jn.set(Pn.SECTION_TITLES,se,e.user.id)},R_=async()=>{var I;if(!((I=e==null?void 0:e.user)!=null&&I.id))return;const O=await Jn.get(Pn.CUSTOM_SECTIONS);O&&Js(O)},Sl=async O=>{var I;(I=e==null?void 0:e.user)!=null&&I.id&&await Jn.set(Pn.CUSTOM_SECTIONS,O,e.user.id)},M_=({name:O,icon:I})=>{const se={id:`custom-${Date.now()}`,name:O,icon:I},ne=[...ii,se];Js(ne),Sl(ne);const U=[...zi,se.id];Ah(U),Dh(U)},k_=async O=>{const I=jh[O]||"";if(!(!I.trim()||Th)){if(!e){alert(" ");return}Eh(!0);try{const se=d.filter(Ee=>!Ee.parent_id&&Ee.section_type==="custom"&&Ee.section_id===O),ne=se.length>0?Math.max(...se.map(Ee=>Ee.order_index))+1:1,U=Se(i),ue={text:I.trim(),completed:!1,order_index:ne,date:U,visible_dates:[U],hidden_dates:[],user_id:e.user.id,section_id:O,section_type:"custom"},{data:nt,error:Te}=await Ie.from("todos").insert([ue]).select();if(Te)throw Te;nt&&nt.length>0&&(f(Ee=>[...Ee,nt[0]]),Oh(Ee=>({...Ee,[O]:""})))}catch(se){console.error("  :",se.message)}finally{Eh(!1)}}},U_=async O=>{if(!confirm("  ?      ."))return;try{const{error:ne}=await Ie.from("todos").delete().eq("section_id",O);if(ne){console.error("   :",ne.message);return}}catch(ne){console.error("   :",ne.message);return}const I=ii.filter(ne=>ne.id!==O);Js(I),Sl(I);const se=zi.filter(ne=>ne!==O);Ah(se),Dh(se),f(ne=>ne.filter(U=>U.section_id!==O))},z_=async(O,I)=>{try{const se=Se(O),ne=Se(I),{data:U,error:ue}=await Ie.from("todos").select("*").eq("deleted",!1).eq("completed",!1).is("routine_id",null);if(ue)throw ue;const nt=(U||[]).filter(Te=>Te.stop_carryover_from&&se>=Te.stop_carryover_from?!1:Te.visible_dates&&Array.isArray(Te.visible_dates)&&Te.visible_dates.length>0?Te.visible_dates.includes(se):Te.date===se);if(nt.length===0)return;for(const Te of nt){let Ee=Te.visible_dates||[Te.date];if(Ee.includes(ne))continue;const at=[...Ee,ne].sort(),{error:Gt}=await Ie.from("todos").update({visible_dates:at}).eq("id",Te.id);Gt&&console.error(` ${Te.id}  :`,Gt.message)}}catch(se){console.error("   :",se.message)}};_.useEffect(()=>{let O=null;const I=()=>{document.body.classList.add("is-scrolling"),O&&clearTimeout(O),O=setTimeout(()=>{document.body.classList.remove("is-scrolling")},1e3)};return window.addEventListener("scroll",I),()=>{window.removeEventListener("scroll",I),O&&clearTimeout(O)}},[]),_.useEffect(()=>{e&&(h_(),t_(),Qe(),w_(),N_(),R_(),E_())},[e]),_.useEffect(()=>{if(!Li.current)return;const O=Li.current,I=Qn==="horizontal";let se=!1,ne=0,U=0,ue=0;const nt=pe=>pe.type.includes("touch")?I?pe.touches[0].pageX:pe.touches[0].pageY:I?pe.pageX:pe.pageY,Te=pe=>{pe.target.closest(".section-block")||(se=!0,ne=nt(pe),U=I?O.scrollLeft:O.scrollTop,O.style.transition="none",O.style.transform=I?"translateX(0)":"translateY(0)",ue=0)},Ee=()=>{se&&ue!==0&&(O.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",O.style.transform=I?"translateX(0)":"translateY(0)",setTimeout(()=>{O.style.transition="none",ue=0},300)),se=!1},at=()=>{ue!==0&&(O.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",O.style.transform=I?"translateX(0)":"translateY(0)",setTimeout(()=>{O.style.transition="none",ue=0},300)),se=!1},Gt=pe=>{if(!se)return;pe.preventDefault();const de=(nt(pe)-ne)*1.5,vt=U-de,lt=I?O.scrollWidth-O.clientWidth:O.scrollHeight-O.clientHeight;if(vt<0){const Lt=-vt;ue=Math.min(Lt*.3,100),I?(O.scrollLeft=0,O.style.transform=`translateX(${ue}px)`):(O.scrollTop=0,O.style.transform=`translateY(${ue}px)`)}else if(vt>lt){const Lt=vt-lt;ue=-Math.min(Lt*.3,100),I?(O.scrollLeft=lt,O.style.transform=`translateX(${ue}px)`):(O.scrollTop=lt,O.style.transform=`translateY(${ue}px)`)}else ue=0,O.style.transform=I?"translateX(0)":"translateY(0)",I?O.scrollLeft=vt:O.scrollTop=vt},je=pe=>{I&&pe.target.closest(".section-block")&&pe.deltaX!==0&&pe.preventDefault()};return O.addEventListener("mousedown",Te),document.addEventListener("mouseup",at),document.addEventListener("mouseleave",Ee),O.addEventListener("mousemove",Gt),O.addEventListener("touchstart",Te,{passive:!0}),O.addEventListener("touchmove",Gt,{passive:!1}),O.addEventListener("touchend",at),O.addEventListener("touchcancel",at),O.addEventListener("wheel",je,{passive:!1}),()=>{O.removeEventListener("mousedown",Te),document.removeEventListener("mouseup",at),document.removeEventListener("mouseleave",Ee),O.removeEventListener("mousemove",Gt),O.removeEventListener("touchstart",Te),O.removeEventListener("touchmove",Gt),O.removeEventListener("touchend",at),O.removeEventListener("touchcancel",at),O.removeEventListener("wheel",je)}},[Qn,d,x]),_.useEffect(()=>{if(Qn!=="horizontal"||!Li.current)return;const O=Li.current,I=()=>{const se=O.querySelectorAll(".section-block");if(se.length===0)return;const ne=O.getBoundingClientRect(),U=ne.left+ne.width/2;let ue=0,nt=1/0;se.forEach((Te,Ee)=>{const at=Te.getBoundingClientRect(),Gt=at.left+at.width/2,je=Math.abs(Gt-U);je<nt&&(nt=je,ue=Ee)}),x_(ue)};return O.addEventListener("scroll",I),I(),()=>O.removeEventListener("scroll",I)},[Qn,d,x]),_.useEffect(()=>{if(!Cc.current)return;const O=Cc.current;let I=!1,se=0,ne=0,U=0;const ue=at=>{at.target.closest(".section-block")||(I=!0,se=at.pageY,ne=O.scrollTop,O.style.transition="none",O.style.transform="translateY(0)",U=0)},nt=()=>{I&&U!==0&&(O.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",O.style.transform="translateY(0)",setTimeout(()=>{O.style.transition="none",U=0},300)),I=!1},Te=()=>{U!==0&&(O.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",O.style.transform="translateY(0)",setTimeout(()=>{O.style.transition="none",U=0},300)),I=!1},Ee=at=>{if(!I)return;at.preventDefault();const je=(at.pageY-se)*1.5,pe=ne-je,Wt=O.scrollHeight-O.clientHeight;if(pe<0){const de=-pe;U=Math.min(de*.3,100),O.scrollTop=0,O.style.transform=`translateY(${U}px)`}else if(pe>Wt){const de=pe-Wt;U=-Math.min(de*.3,100),O.scrollTop=Wt,O.style.transform=`translateY(${U}px)`}else U=0,O.style.transform="translateY(0)",O.scrollTop=pe};return O.addEventListener("mousedown",ue),document.addEventListener("mouseup",Te),document.addEventListener("mouseleave",nt),O.addEventListener("mousemove",Ee),()=>{O.removeEventListener("mousedown",ue),document.removeEventListener("mouseup",Te),document.removeEventListener("mouseleave",nt),O.removeEventListener("mousemove",Ee)}},[d,x]),_.useEffect(()=>{ph&&Pb()},[bh]),_.useEffect(()=>{const O=async()=>{const se=new Date,ne=new Date(se);ne.setHours(24,0,0,0);const U=ne.getTime()-se.getTime();return setTimeout(async()=>{const nt=new Date(se),Te=new Date(se);Te.setDate(Te.getDate()+1),await z_(nt,Te),await ye(),s(new Date),O()},U)},I=O();return()=>clearTimeout(I)},[]),_.useEffect(()=>{(async()=>{var Te;const ne=Se(i),ue=Se(new Date);ne===ue&&((Te=e==null?void 0:e.user)!=null&&Te.id)&&await L(ne),await Xn()})();const I=Se(i),se=Ie.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"todos",filter:`date=eq.${I}`},ne=>{ne.eventType==="INSERT"?f(U=>U.some(ue=>ue.id===ne.new.id)?U:[...U,ne.new]):ne.eventType==="UPDATE"?f(U=>o.current.has(ne.new.id)?U:U.map(ue=>ue.id===ne.new.id?ne.new:ue)):ne.eventType==="DELETE"&&f(U=>U.filter(ue=>ue.id!==ne.old.id))}).subscribe(ne=>{});return()=>{Ie.removeChannel(se)}},[i,e]),_.useEffect(()=>{if(ge){const O=window.scrollY,I=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${O}px`,document.body.style.left="0",document.body.style.right="0",I>0&&(document.body.style.paddingRight=`${I}px`),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.paddingRight="",window.scrollTo(0,O)}}},[ge]);const Mh=SO({authLoading:t,session:e,handleGoogleLogin:n});return Mh||u.jsxs("div",{className:`app ${ge?"dragging-active":""}`,children:[u.jsx(Wj,{showSidebar:r,setShowSidebar:l,session:e,viewMode:Qn,setViewMode:p_,onOpenRoutine:ct,onOpenGanttChart:Qb,onOpenEncouragementModal:()=>wh(!0),onOpenAddSection:()=>xh(!0),onOpenHiddenSections:()=>Ch(!0),onLogout:a}),u.jsxs("div",{className:`container ${Qn==="horizontal"?"container-wide":""}`,children:[u.jsx(tO,{showSidebar:r,setShowSidebar:l,selectedDate:i,onDateChange:D_,onPrevDay:O_,onNextDay:A_,showEncouragementEmoji:u_,currentEncouragementMessage:d_,onEncouragementClick:f_,setSelectedDate:s,onQuickAdd:y_,onOpenMemo:()=>_h(!0)}),u.jsxs(pj,{sensors:c,collisionDetection:T1,onDragStart:En,onDragOver:ai,onDragEnd:qb,onDragCancel:Qs,measuring:{droppable:{strategy:Rs.Always}},children:[Qn==="horizontal"&&!si.includes("timeline")&&u.jsxs("div",{className:"timeline-sidebar",children:[u.jsx(Qd,{title:"",icon:wl("timeline"),sectionId:"timeline",onIconChange:_l,customActions:u.jsx("button",{className:"section-action-button scroll-to-now-button",onClick:()=>{var O;return(O=Nh.current)==null?void 0:O.scrollToNow()},title:" ",children:""})}),u.jsx("div",{className:"timeline-content",children:u.jsx(Pg,{ref:Nh,startHour:0,endHour:24,scheduledTodos:d.filter(O=>O.scheduled_time&&!O.parent_id&&O.scheduled_date===Se(i)),onToggle:Et,onRemoveFromTimeline:gh,onMoveUpInTimeline:vh,onMoveDownInTimeline:yh,onAddTodo:Yb})})]}),u.jsxs("div",{className:"content-scrollable",ref:Cc,children:[u.jsx("div",{ref:Li,className:`sections-container ${Qn==="horizontal"?"horizontal-layout":"vertical-layout"}`,children:u.jsx("div",{className:"todo-list",children:W?u.jsx("div",{className:"loading-container",children:u.jsxs("div",{className:"loading-dots",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]})}):(()=>{const O=d.filter(U=>!U.parent_id&&U.section_type==="routine").sort((U,ue)=>U.order_index-ue.order_index),I=d.filter(U=>!U.parent_id&&U.section_type==="pending_routine").sort((U,ue)=>U.order_index-ue.order_index),se=d.filter(U=>!U.parent_id&&U.section_type==="normal").sort((U,ue)=>U.order_index-ue.order_index),ne=[...O.map(U=>U.id),...I.map(U=>U.id),...se.map(U=>U.id),...ii.flatMap(U=>d.filter(ue=>!ue.parent_id&&ue.section_type==="custom"&&ue.section_id===U.id).map(ue=>ue.id))];return u.jsx(ir,{items:ne,strategy:ar,children:zi.filter(U=>!si.includes(U)).filter(U=>!(Qn==="horizontal"&&U==="timeline")).map((U,ue)=>{const nt=zi.filter(je=>!si.includes(je)),Te=nt.indexOf(U),Ee=Te===0,at=Te===nt.length-1,Gt=[...Ee?[]:[{icon:"",label:" ",onClick:()=>Dc(U)}],...at?[]:[{icon:"",label:" ",onClick:()=>Nc(U)}],{icon:"",label:"",onClick:()=>Mc(U)}];if(U==="timeline")return u.jsxs("div",{className:"timeline-section section-block",children:[u.jsx(Qd,{title:"",icon:wl("timeline"),sectionId:"timeline",onIconChange:_l,settingsMenuItems:Gt}),u.jsx("div",{className:"timeline-content",children:u.jsx(Pg,{startHour:0,endHour:24,scheduledTodos:d.filter(je=>je.scheduled_time&&!je.parent_id&&je.scheduled_date===Se(i)),onToggle:Et,onRemoveFromTimeline:gh,onMoveUpInTimeline:vh,onMoveDownInTimeline:yh})})]},"timeline");if(U==="routine")return u.jsx("div",{children:u.jsxs(Ru,{title:"",icon:wl("routine"),sectionId:"routine",onIconChange:_l,className:"routine-section section-block",inputValue:ie,setInputValue:Z,onAddTodo:gt,isAdding:mt,placeholder:"   ...",settingsMenuItems:Gt,children:[O.length>0&&u.jsx(ir,{items:O.map(je=>je.id),strategy:ar,children:O.map((je,pe)=>{const Wt=d.filter(de=>de.parent_id===je.id);return u.jsx(Zi,{todo:je,index:pe,onToggle:Et,onDelete:Yt,onEdit:Tn,formatDate:Gi,formatDateOnly:mi,isFocused:Je===je.id,onFocus:pl,onAddSubTodo:xn,subtodos:Wt,level:0,onCreateRoutine:He,routines:x,onShowRoutineHistory:ve,onOpenRoutineSetupModal:H,onOpenHistoryModal:y,currentPageDate:Se(i),onRemoveFromUI:hl,showSuccessMessage:bl,activeId:ut,overId:zt,onMoveUp:de=>ml(de,"routine",null),onMoveDown:de=>gl(de,"routine",null),onMoveToTop:de=>vl(de,"routine",null),onMoveToBottom:de=>yl(de,"routine",null),isFirst:pe===0,isLast:pe===O.length-1},je.id)})}),O.length>0&&I.length>0&&u.jsx("div",{style:{margin:"1rem 0",padding:"0 1rem"},children:u.jsx("div",{className:"separator-line"})}),I.length>0&&u.jsx(ir,{items:I.map(je=>je.id),strategy:ar,children:I.map((je,pe)=>{const Wt=d.filter(de=>de.parent_id===je.id);return u.jsx(Zi,{todo:je,index:pe,onToggle:Et,onDelete:Yt,onEdit:Tn,formatDate:Gi,formatDateOnly:mi,isFocused:Je===je.id,onFocus:pl,onAddSubTodo:xn,subtodos:Wt,level:0,onCreateRoutine:He,routines:x,onShowRoutineHistory:ve,onOpenRoutineSetupModal:H,onOpenHistoryModal:y,currentPageDate:Se(i),isPendingRoutine:!0,onRemoveFromUI:hl,showSuccessMessage:bl,activeId:ut,overId:zt,onMoveUp:de=>ml(de,"pending_routine",null),onMoveDown:de=>gl(de,"pending_routine",null),onMoveToTop:de=>vl(de,"pending_routine",null),onMoveToBottom:de=>yl(de,"pending_routine",null),isFirst:pe===0,isLast:pe===I.length-1},je.id)})})]})},"routine");if(U==="normal"){const je=[...Ee?[]:[{icon:"",label:" ",onClick:()=>Dc(U)}],...at?[]:[{icon:"",label:" ",onClick:()=>Nc(U)}],{icon:"",label:"",onClick:()=>{confirm(`    ?

      .`)&&Mc("normal")}},{icon:"",label:"",onClick:()=>{alert(`      .

   ""  .`)}}];return u.jsx("div",{children:u.jsx(Ru,{title:Ac.normal,icon:wl("normal"),sectionId:"normal",onIconChange:_l,className:"normal-section section-block",inputValue:le,setInputValue:Y,onAddTodo:Sn,isAdding:mt,placeholder:"   ...",editable:!0,onTitleChange:pe=>C_("normal",pe),settingsMenuItems:je,children:se.length>0&&u.jsx(ir,{items:se.map(pe=>pe.id),strategy:ar,children:se.map((pe,Wt)=>{const de=d.filter(lt=>lt.parent_id===pe.id),vt=Se(i);return u.jsx(Zi,{todo:pe,index:Wt,onToggle:Et,onDelete:Yt,onEdit:Tn,formatDate:Gi,formatDateOnly:mi,isFocused:Je===pe.id,onFocus:pl,onAddSubTodo:xn,subtodos:de,level:0,onCreateRoutine:He,routines:x,onShowRoutineHistory:ve,onOpenRoutineSetupModal:H,onOpenHistoryModal:y,currentPageDate:vt,onRemoveFromUI:hl,showSuccessMessage:bl,activeId:ut,overId:zt,onMoveUp:lt=>ml(lt,"normal",null),onMoveDown:lt=>gl(lt,"normal",null),onMoveToTop:lt=>vl(lt,"normal",null),onMoveToBottom:lt=>yl(lt,"normal",null),isFirst:Wt===0,isLast:Wt===se.length-1},pe.id)})})})},"normal")}else{const je=ii.find(de=>de.id===U);if(!je)return null;const pe=d.filter(de=>!de.parent_id&&de.section_type==="custom"&&de.section_id===U).sort((de,vt)=>de.order_index-vt.order_index),Wt=[...Ee?[]:[{icon:"",label:" ",onClick:()=>Dc(U)}],...at?[]:[{icon:"",label:" ",onClick:()=>Nc(U)}],{icon:"",label:"",onClick:()=>Mc(U)},{icon:"",label:"",onClick:()=>U_(U)}];return u.jsx("div",{children:u.jsx(Ru,{title:je.name,icon:je.icon,sectionId:U,onIconChange:(de,vt)=>{const lt=ii.map(Lt=>Lt.id===de?{...Lt,icon:vt}:Lt);Js(lt),Sl(lt)},className:"custom-section section-block",inputValue:jh[U]||"",setInputValue:de=>Oh(vt=>({...vt,[U]:de})),onAddTodo:()=>k_(U),isAdding:Th,placeholder:`${je.name}   ...`,editable:!0,onTitleChange:de=>{const vt=ii.map(lt=>lt.id===U?{...lt,name:de}:lt);Js(vt),Sl(vt)},settingsMenuItems:Wt,children:pe.length>0&&u.jsx(ir,{items:pe.map(de=>de.id),strategy:ar,children:pe.map((de,vt)=>{const lt=d.filter(Lt=>Lt.parent_id===de.id);return u.jsx(Zi,{todo:de,index:vt,onToggle:Et,onDelete:Yt,onEdit:Tn,formatDate:Gi,formatDateOnly:mi,isFocused:Je===de.id,onFocus:pl,onAddSubTodo:xn,subtodos:lt,level:0,onCreateRoutine:He,routines:x,onShowRoutineHistory:ve,onOpenRoutineSetupModal:H,onOpenHistoryModal:y,currentPageDate:Se(i),onRemoveFromUI:hl,showSuccessMessage:bl,activeId:ut,overId:zt,onMoveUp:Lt=>ml(Lt,"custom",U),onMoveDown:Lt=>gl(Lt,"custom",U),onMoveToTop:Lt=>vl(Lt,"custom",U),onMoveToBottom:Lt=>yl(Lt,"custom",U),isFirst:vt===0,isLast:vt===pe.length-1},de.id)})})})},U)}})})})()})}),u.jsx(zj,{zIndex:1e4,children:ut?(()=>{const O=d.find(se=>se.id===ut);if(!O)return null;const I=d.filter(se=>se.parent_id===O.id);return u.jsx("div",{className:"drag-overlay-todo",children:u.jsx(Zi,{todo:O,index:0,onToggle:()=>{},onDelete:()=>{},onEdit:()=>{},formatDate:Gi,formatDateOnly:mi,isFocused:!1,onFocus:()=>{},onAddSubTodo:()=>{},subtodos:I,level:0,onCreateRoutine:()=>{},routines:x,onShowRoutineHistory:()=>{},onOpenRoutineSetupModal:()=>{},onOpenHistoryModal:()=>{},currentPageDate:Se(i),onRemoveFromUI:()=>{},showSuccessMessage:()=>{},hideNumber:!0})})})():null}),u.jsx(nO,{viewMode:Qn,currentSectionIndex:S_,sectionsContainerRef:Li,visibleSectionCount:zi.filter(O=>!si.includes(O)).length})]})]}),u.jsx(wO,{showUndoToast:Kt,showSuccessToast:on,successToastMessage:Kn,lastDeleteAction:Ui,handleUndoDelete:mh,handleUndoRoutineDelete:Gb,showDeleteConfirmModal:Ut,todoToDelete:Vt,setShowDeleteConfirmModal:wn,deleteThisOnly:$b,deleteFromNow:Ib,deleteAll:Vb,showRoutineDeleteModal:J,routineToDelete:De,setShowRoutineDeleteModal:rt,deleteRoutineThisOnly:we,deleteRoutineFromNow:ke,deleteRoutineAll:Ue,showTodoHistoryModal:v,selectedTodoForModal:h,todoHistory:b,expandedHistoryIds:w,toggleHistoryDetail:p,handleCloseTodoHistoryModal:g,formatDate:Gi,formatDateOnly:mi,showTodoRoutineSetupModal:xe,routines:x,routineDaysForModal:bt,isEditingRoutineInModal:k,routineTimeSlotForModal:R,handleToggleRoutineDayInModal:X,setRoutineTimeSlotForModal:B,setRoutineDaysForModal:Ke,setIsEditingRoutineInModal:D,handleCreateRoutineFromTodo:He,handleCloseTodoRoutineSetupModal:V,showRoutineModal:S,handleCloseRoutine:ee,routineInput:T,setRoutineInput:E,isAddingRoutine:G,selectedDays:A,handleToggleDay:oe,selectedTimeSlot:M,setSelectedTimeSlot:P,handleAddRoutine:ze,editingRoutineId:Q,editingRoutineText:re,setEditingRoutineText:z,editingRoutineDays:me,handleToggleEditDay:ce,handleStartEditRoutine:Me,handleSaveEditRoutine:$,handleCancelEditRoutine:ht,handleDeleteRoutine:te,fetchRoutineHistory:ve,showRoutineHistory:C,handleCloseRoutineHistory:qe,selectedRoutineForHistory:q,routineHistoryData:K,showMemoModal:Zb,setShowMemoModal:_h,memoContent:Fb,setMemoContent:Wb,isSavingMemo:e_,showGanttChart:ph,handleCloseGanttChart:Jb,ganttData:Kb,ganttPeriod:bh,setGanttPeriod:Xb,showEncouragementModal:a_,setShowEncouragementModal:wh,encouragementMessages:n_,newEncouragementMessage:i_,setNewEncouragementMessage:s_,addEncouragementMessage:m_,editingEncouragementId:r_,editingEncouragementText:o_,setEditingEncouragementId:l_,setEditingEncouragementText:c_,updateEncouragementMessage:g_,deleteEncouragementMessage:v_,showAddSectionModal:b_,setShowAddSectionModal:xh,handleAddSection:M_,showHiddenSectionsModal:T_,setShowHiddenSectionsModal:Ch,hiddenSections:si,sectionOrder:zi,sectionTitles:Ac,customSections:ii,handleShowSection:j_})]})]})}Mx.createRoot(document.getElementById("root")).render(u.jsx(_.StrictMode,{children:u.jsx(UO,{})}));

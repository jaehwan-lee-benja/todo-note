function z_(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(i,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();function ev(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tv(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),n}var nv={exports:{}},ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_=Symbol.for("react.transitional.element"),B_=Symbol.for("react.fragment");function iv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var a in t)a!=="key"&&(n[a]=t[a])}else n=t;return t=n.ref,{$$typeof:L_,type:e,key:i,ref:t!==void 0?t:null,props:n}}ec.Fragment=B_;ec.jsx=iv;ec.jsxs=iv;nv.exports=ec;var u=nv.exports,av={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd=Symbol.for("react.transitional.element"),H_=Symbol.for("react.portal"),q_=Symbol.for("react.fragment"),$_=Symbol.for("react.strict_mode"),I_=Symbol.for("react.profiler"),V_=Symbol.for("react.consumer"),Y_=Symbol.for("react.context"),G_=Symbol.for("react.forward_ref"),K_=Symbol.for("react.suspense"),X_=Symbol.for("react.memo"),sv=Symbol.for("react.lazy"),Q_=Symbol.for("react.activity"),kh=Symbol.iterator;function J_(e){return e===null||typeof e!="object"?null:(e=kh&&e[kh]||e["@@iterator"],typeof e=="function"?e:null)}var rv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lv=Object.assign,ov={};function Ms(e,t,n){this.props=e,this.context=t,this.refs=ov,this.updater=n||rv}Ms.prototype.isReactComponent={};Ms.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ms.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cv(){}cv.prototype=Ms.prototype;function Pd(e,t,n){this.props=e,this.context=t,this.refs=ov,this.updater=n||rv}var Zd=Pd.prototype=new cv;Zd.constructor=Pd;lv(Zd,Ms.prototype);Zd.isPureReactComponent=!0;var Uh=Array.isArray;function ku(){}var Pe={H:null,A:null,T:null,S:null},uv=Object.prototype.hasOwnProperty;function Fd(e,t,n){var i=n.ref;return{$$typeof:Jd,type:e,key:t,ref:i!==void 0?i:null,props:n}}function P_(e,t){return Fd(e.type,t,e.props)}function Wd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jd}function Z_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var zh=/\/+/g;function kc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Z_(""+e.key):t.toString(36)}function F_(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(ku,ku):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ka(e,t,n,i,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(s){case"bigint":case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case Jd:case H_:r=!0;break;case sv:return r=e._init,Ka(r(e._payload),t,n,i,a)}}if(r)return a=a(e),r=i===""?"."+kc(e,0):i,Uh(a)?(n="",r!=null&&(n=r.replace(zh,"$&/")+"/"),Ka(a,t,n,"",function(c){return c})):a!=null&&(Wd(a)&&(a=P_(a,n+(a.key==null||e&&e.key===a.key?"":(""+a.key).replace(zh,"$&/")+"/")+r)),t.push(a)),1;r=0;var l=i===""?".":i+":";if(Uh(e))for(var o=0;o<e.length;o++)i=e[o],s=l+kc(i,o),r+=Ka(i,t,n,s,a);else if(o=J_(e),typeof o=="function")for(e=o.call(e),o=0;!(i=e.next()).done;)i=i.value,s=l+kc(i,o++),r+=Ka(i,t,n,s,a);else if(s==="object"){if(typeof e.then=="function")return Ka(F_(e),t,n,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function xl(e,t,n){if(e==null)return e;var i=[],a=0;return Ka(e,i,"","",function(s){return t.call(n,s,a++)}),i}function W_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Lh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ew={map:xl,forEach:function(e,t,n){xl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xl(e,function(){t++}),t},toArray:function(e){return xl(e,function(t){return t})||[]},only:function(e){if(!Wd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pe.Activity=Q_;pe.Children=ew;pe.Component=Ms;pe.Fragment=q_;pe.Profiler=I_;pe.PureComponent=Pd;pe.StrictMode=$_;pe.Suspense=K_;pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pe;pe.__COMPILER_RUNTIME={__proto__:null,c:function(e){return Pe.H.useMemoCache(e)}};pe.cache=function(e){return function(){return e.apply(null,arguments)}};pe.cacheSignal=function(){return null};pe.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=lv({},e.props),a=e.key;if(t!=null)for(s in t.key!==void 0&&(a=""+t.key),t)!uv.call(t,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&t.ref===void 0||(i[s]=t[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var r=Array(s),l=0;l<s;l++)r[l]=arguments[l+2];i.children=r}return Fd(e.type,a,i)};pe.createContext=function(e){return e={$$typeof:Y_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:V_,_context:e},e};pe.createElement=function(e,t,n){var i,a={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)uv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(a[i]=t[i]);var r=arguments.length-2;if(r===1)a.children=n;else if(1<r){for(var l=Array(r),o=0;o<r;o++)l[o]=arguments[o+2];a.children=l}if(e&&e.defaultProps)for(i in r=e.defaultProps,r)a[i]===void 0&&(a[i]=r[i]);return Fd(e,s,a)};pe.createRef=function(){return{current:null}};pe.forwardRef=function(e){return{$$typeof:G_,render:e}};pe.isValidElement=Wd;pe.lazy=function(e){return{$$typeof:sv,_payload:{_status:-1,_result:e},_init:W_}};pe.memo=function(e,t){return{$$typeof:X_,type:e,compare:t===void 0?null:t}};pe.startTransition=function(e){var t=Pe.T,n={};Pe.T=n;try{var i=e(),a=Pe.S;a!==null&&a(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(ku,Lh)}catch(s){Lh(s)}finally{t!==null&&n.types!==null&&(t.types=n.types),Pe.T=t}};pe.unstable_useCacheRefresh=function(){return Pe.H.useCacheRefresh()};pe.use=function(e){return Pe.H.use(e)};pe.useActionState=function(e,t,n){return Pe.H.useActionState(e,t,n)};pe.useCallback=function(e,t){return Pe.H.useCallback(e,t)};pe.useContext=function(e){return Pe.H.useContext(e)};pe.useDebugValue=function(){};pe.useDeferredValue=function(e,t){return Pe.H.useDeferredValue(e,t)};pe.useEffect=function(e,t){return Pe.H.useEffect(e,t)};pe.useEffectEvent=function(e){return Pe.H.useEffectEvent(e)};pe.useId=function(){return Pe.H.useId()};pe.useImperativeHandle=function(e,t,n){return Pe.H.useImperativeHandle(e,t,n)};pe.useInsertionEffect=function(e,t){return Pe.H.useInsertionEffect(e,t)};pe.useLayoutEffect=function(e,t){return Pe.H.useLayoutEffect(e,t)};pe.useMemo=function(e,t){return Pe.H.useMemo(e,t)};pe.useOptimistic=function(e,t){return Pe.H.useOptimistic(e,t)};pe.useReducer=function(e,t,n){return Pe.H.useReducer(e,t,n)};pe.useRef=function(e){return Pe.H.useRef(e)};pe.useState=function(e){return Pe.H.useState(e)};pe.useSyncExternalStore=function(e,t,n){return Pe.H.useSyncExternalStore(e,t,n)};pe.useTransition=function(){return Pe.H.useTransition()};pe.version="19.2.0";av.exports=pe;var b=av.exports;const lt=ev(b);var dv={exports:{}},tc={},fv={exports:{}},hv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,B){var G=D.length;D.push(B);e:for(;0<G;){var he=G-1>>>1,Q=D[he];if(0<a(Q,B))D[he]=B,D[G]=Q,G=he;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var B=D[0],G=D.pop();if(G!==B){D[0]=G;e:for(var he=0,Q=D.length,nt=Q>>>1;he<nt;){var Oe=2*(he+1)-1,Ge=D[Oe],Be=Oe+1,z=D[Be];if(0>a(Ge,G))Be<Q&&0>a(z,Ge)?(D[he]=z,D[Be]=G,he=Be):(D[he]=Ge,D[Oe]=G,he=Oe);else if(Be<Q&&0>a(z,G))D[he]=z,D[Be]=G,he=Be;else break e}}return B}function a(D,B){var G=D.sortIndex-B.sortIndex;return G!==0?G:D.id-B.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var r=Date,l=r.now();e.unstable_now=function(){return r.now()-l}}var o=[],c=[],d=1,f=null,h=3,m=!1,p=!1,_=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function S(D){for(var B=n(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=D)i(c),B.sortIndex=B.expirationTime,t(o,B);else break;B=n(c)}}function x(D){if(_=!1,S(D),!p)if(n(o)!==null)p=!0,T||(T=!0,me());else{var B=n(c);B!==null&&q(x,B.startTime-D)}}var T=!1,E=-1,j=5,A=-1;function k(){return w?!0:!(e.unstable_now()-A<j)}function Z(){if(w=!1,T){var D=e.unstable_now();A=D;var B=!0;try{e:{p=!1,_&&(_=!1,g(E),E=-1),m=!0;var G=h;try{t:{for(S(D),f=n(o);f!==null&&!(f.expirationTime>D&&k());){var he=f.callback;if(typeof he=="function"){f.callback=null,h=f.priorityLevel;var Q=he(f.expirationTime<=D);if(D=e.unstable_now(),typeof Q=="function"){f.callback=Q,S(D),B=!0;break t}f===n(o)&&i(o),S(D)}else i(o);f=n(o)}if(f!==null)B=!0;else{var nt=n(c);nt!==null&&q(x,nt.startTime-D),B=!1}}break e}finally{f=null,h=G,m=!1}B=void 0}}finally{B?me():T=!1}}}var me;if(typeof v=="function")me=function(){v(Z)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,fe=ae.port2;ae.port1.onmessage=Z,me=function(){fe.postMessage(null)}}else me=function(){y(Z,0)};function q(D,B){E=y(function(){D(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var B=3;break;default:B=h}var G=h;h=B;try{return D()}finally{h=G}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(D,B){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=h;h=D;try{return B()}finally{h=G}},e.unstable_scheduleCallback=function(D,B,G){var he=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?he+G:he):G=he,D){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=G+Q,D={id:d++,callback:B,priorityLevel:D,startTime:G,expirationTime:Q,sortIndex:-1},G>he?(D.sortIndex=G,t(c,D),n(o)===null&&D===n(c)&&(_?(g(E),E=-1):_=!0,q(x,G-he))):(D.sortIndex=Q,t(o,D),p||m||(p=!0,T||(T=!0,me()))),D},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(D){var B=h;return function(){var G=h;h=B;try{return D.apply(this,arguments)}finally{h=G}}}})(hv);fv.exports=hv;var tw=fv.exports,mv={exports:{}},Pt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw=b;function gv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ei(){}var Jt={d:{f:Ei,r:function(){throw Error(gv(522))},D:Ei,C:Ei,L:Ei,m:Ei,X:Ei,S:Ei,M:Ei},p:0,findDOMNode:null},iw=Symbol.for("react.portal");function aw(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:iw,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var dr=nw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function nc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Pt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Jt;Pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(gv(299));return aw(e,t,null,n)};Pt.flushSync=function(e){var t=dr.T,n=Jt.p;try{if(dr.T=null,Jt.p=2,e)return e()}finally{dr.T=t,Jt.p=n,Jt.d.f()}};Pt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Jt.d.C(e,t))};Pt.prefetchDNS=function(e){typeof e=="string"&&Jt.d.D(e)};Pt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=nc(n,t.crossOrigin),a=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Jt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:a,fetchPriority:s}):n==="script"&&Jt.d.X(e,{crossOrigin:i,integrity:a,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Pt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=nc(t.as,t.crossOrigin);Jt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Jt.d.M(e)};Pt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=nc(n,t.crossOrigin);Jt.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Pt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=nc(t.as,t.crossOrigin);Jt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Jt.d.m(e)};Pt.requestFormReset=function(e){Jt.d.r(e)};Pt.unstable_batchedUpdates=function(e,t){return e(t)};Pt.useFormState=function(e,t,n){return dr.H.useFormState(e,t,n)};Pt.useFormStatus=function(){return dr.H.useHostTransitionStatus()};Pt.version="19.2.0";function vv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vv)}catch(e){console.error(e)}}vv(),mv.exports=Pt;var ya=mv.exports;const Uu=ev(ya);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ot=tw,yv=b,sw=ya;function C(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function pv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _v(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bh(e){if(Pr(e)!==e)throw Error(C(188))}function rw(e){var t=e.alternate;if(!t){if(t=Pr(e),t===null)throw Error(C(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return Bh(a),e;if(s===i)return Bh(a),t;s=s.sibling}throw Error(C(188))}if(n.return!==i.return)n=a,i=s;else{for(var r=!1,l=a.child;l;){if(l===n){r=!0,n=a,i=s;break}if(l===i){r=!0,i=a,n=s;break}l=l.sibling}if(!r){for(l=s.child;l;){if(l===n){r=!0,n=s,i=a;break}if(l===i){r=!0,i=s,n=a;break}l=l.sibling}if(!r)throw Error(C(189))}}if(n.alternate!==i)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?e:t}function wv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=wv(e),t!==null)return t;e=e.sibling}return null}var Ze=Object.assign,lw=Symbol.for("react.element"),El=Symbol.for("react.transitional.element"),sr=Symbol.for("react.portal"),Fa=Symbol.for("react.fragment"),Sv=Symbol.for("react.strict_mode"),zu=Symbol.for("react.profiler"),xv=Symbol.for("react.consumer"),di=Symbol.for("react.context"),ef=Symbol.for("react.forward_ref"),Lu=Symbol.for("react.suspense"),Bu=Symbol.for("react.suspense_list"),tf=Symbol.for("react.memo"),ji=Symbol.for("react.lazy"),Hu=Symbol.for("react.activity"),ow=Symbol.for("react.memo_cache_sentinel"),Hh=Symbol.iterator;function Ps(e){return e===null||typeof e!="object"?null:(e=Hh&&e[Hh]||e["@@iterator"],typeof e=="function"?e:null)}var cw=Symbol.for("react.client.reference");function qu(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===cw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fa:return"Fragment";case zu:return"Profiler";case Sv:return"StrictMode";case Lu:return"Suspense";case Bu:return"SuspenseList";case Hu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case sr:return"Portal";case di:return e.displayName||"Context";case xv:return(e._context.displayName||"Context")+".Consumer";case ef:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tf:return t=e.displayName||null,t!==null?t:qu(e.type)||"Memo";case ji:t=e._payload,e=e._init;try{return qu(e(t))}catch{}}return null}var rr=Array.isArray,de=yv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le=sw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ba={pending:!1,data:null,method:null,action:null},$u=[],Wa=-1;function ei(e){return{current:e}}function Rt(e){0>Wa||(e.current=$u[Wa],$u[Wa]=null,Wa--)}function Xe(e,t){Wa++,$u[Wa]=e.current,e.current=t}var Wn=ei(null),Dr=ei(null),qi=ei(null),ho=ei(null);function mo(e,t){switch(Xe(qi,t),Xe(Dr,e),Xe(Wn,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Gm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Gm(t),e=Vp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Rt(Wn),Xe(Wn,e)}function bs(){Rt(Wn),Rt(Dr),Rt(qi)}function Iu(e){e.memoizedState!==null&&Xe(ho,e);var t=Wn.current,n=Vp(t,e.type);t!==n&&(Xe(Dr,e),Xe(Wn,n))}function go(e){Dr.current===e&&(Rt(Wn),Rt(Dr)),ho.current===e&&(Rt(ho),Ir._currentValue=ba)}var Uc,qh;function ca(e){if(Uc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Uc=t&&t[1]||"",qh=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Uc+e+qh}var zc=!1;function Lc(e,t){if(!e||zc)return"";zc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(m){var h=m}Reflect.construct(e,[],f)}else{try{f.call()}catch(m){h=m}e.call(f.prototype)}}else{try{throw Error()}catch(m){h=m}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(m){if(m&&h&&typeof m.stack=="string")return[m.stack,h.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),r=s[0],l=s[1];if(r&&l){var o=r.split(`
`),c=l.split(`
`);for(a=i=0;i<o.length&&!o[i].includes("DetermineComponentFrameRoot");)i++;for(;a<c.length&&!c[a].includes("DetermineComponentFrameRoot");)a++;if(i===o.length||a===c.length)for(i=o.length-1,a=c.length-1;1<=i&&0<=a&&o[i]!==c[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==c[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==c[a]){var d=`
`+o[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=a);break}}}finally{zc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ca(n):""}function uw(e,t){switch(e.tag){case 26:case 27:case 5:return ca(e.type);case 16:return ca("Lazy");case 13:return e.child!==t&&t!==null?ca("Suspense Fallback"):ca("Suspense");case 19:return ca("SuspenseList");case 0:case 15:return Lc(e.type,!1);case 11:return Lc(e.type.render,!1);case 1:return Lc(e.type,!0);case 31:return ca("Activity");default:return""}}function $h(e){try{var t="",n=null;do t+=uw(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Vu=Object.prototype.hasOwnProperty,nf=Ot.unstable_scheduleCallback,Bc=Ot.unstable_cancelCallback,dw=Ot.unstable_shouldYield,fw=Ot.unstable_requestPaint,mn=Ot.unstable_now,hw=Ot.unstable_getCurrentPriorityLevel,Ev=Ot.unstable_ImmediatePriority,Tv=Ot.unstable_UserBlockingPriority,vo=Ot.unstable_NormalPriority,mw=Ot.unstable_LowPriority,jv=Ot.unstable_IdlePriority,gw=Ot.log,vw=Ot.unstable_setDisableYieldValue,Zr=null,gn=null;function ki(e){if(typeof gw=="function"&&vw(e),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(Zr,e)}catch{}}var vn=Math.clz32?Math.clz32:bw,yw=Math.log,pw=Math.LN2;function bw(e){return e>>>=0,e===0?32:31-(yw(e)/pw|0)|0}var Tl=256,jl=262144,Ol=4194304;function ua(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ic(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var a=0,s=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?a=ua(i):(r&=l,r!==0?a=ua(r):n||(n=l&~e,n!==0&&(a=ua(n))))):(l=i&~s,l!==0?a=ua(l):r!==0?a=ua(r):n||(n=i&~e,n!==0&&(a=ua(n)))),a===0?0:t!==0&&t!==a&&!(t&s)&&(s=a&-a,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:a}function Fr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function _w(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ov(){var e=Ol;return Ol<<=1,!(Ol&62914560)&&(Ol=4194304),e}function Hc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Wr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ww(e,t,n,i,a,s){var r=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(n=r&~n;0<n;){var d=31-vn(n),f=1<<d;l[d]=0,o[d]=-1;var h=c[d];if(h!==null)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];m!==null&&(m.lane&=-536870913)}n&=~f}i!==0&&Av(e,i,0),s!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=s&~(r&~t))}function Av(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-vn(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function Nv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-vn(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}function Cv(e,t){var n=t&-t;return n=n&42?1:af(n),n&(e.suspendedLanes|t)?0:n}function af(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function sf(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Dv(){var e=Le.p;return e!==0?e:(e=window.event,e===void 0?32:e0(e.type))}function Ih(e,t){var n=Le.p;try{return Le.p=e,t()}finally{Le.p=n}}var ea=Math.random().toString(36).slice(2),Bt="__reactFiber$"+ea,rn="__reactProps$"+ea,ks="__reactContainer$"+ea,Yu="__reactEvents$"+ea,Sw="__reactListeners$"+ea,xw="__reactHandles$"+ea,Vh="__reactResources$"+ea,el="__reactMarker$"+ea;function rf(e){delete e[Bt],delete e[rn],delete e[Yu],delete e[Sw],delete e[xw]}function es(e){var t=e[Bt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ks]||n[Bt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Pm(e);e!==null;){if(n=e[Bt])return n;e=Pm(e)}return t}e=n,n=e.parentNode}return null}function Us(e){if(e=e[Bt]||e[ks]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function lr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(C(33))}function us(e){var t=e[Vh];return t||(t=e[Vh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Dt(e){e[el]=!0}var Rv=new Set,Mv={};function Na(e,t){_s(e,t),_s(e+"Capture",t)}function _s(e,t){for(Mv[e]=t,e=0;e<t.length;e++)Rv.add(t[e])}var Ew=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yh={},Gh={};function Tw(e){return Vu.call(Gh,e)?!0:Vu.call(Yh,e)?!1:Ew.test(e)?Gh[e]=!0:(Yh[e]=!0,!1)}function Pl(e,t,n){if(Tw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Al(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ni(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function On(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jw(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(r){n=""+r,s.call(this,r)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gu(e){if(!e._valueTracker){var t=kv(e)?"checked":"value";e._valueTracker=jw(e,t,""+e[t])}}function Uv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=kv(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function yo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ow=/[\n"\\]/g;function Cn(e){return e.replace(Ow,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ku(e,t,n,i,a,s,r,l){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+On(t)):e.value!==""+On(t)&&(e.value=""+On(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?Xu(e,r,On(t)):n!=null?Xu(e,r,On(n)):i!=null&&e.removeAttribute("value"),a==null&&s!=null&&(e.defaultChecked=!!s),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+On(l):e.removeAttribute("name")}function zv(e,t,n,i,a,s,r,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){Gu(e);return}n=n!=null?""+On(n):"",t=t!=null?""+On(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??a,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),Gu(e)}function Xu(e,t,n){t==="number"&&yo(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ds(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+On(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Lv(e,t,n){if(t!=null&&(t=""+On(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+On(n):""}function Bv(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(C(92));if(rr(i)){if(1<i.length)throw Error(C(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=On(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),Gu(e)}function ws(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Aw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kh(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Aw.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Hv(e,t,n){if(t!=null&&typeof t!="object")throw Error(C(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var a in t)i=t[a],t.hasOwnProperty(a)&&n[a]!==i&&Kh(e,a,i)}else for(var s in t)t.hasOwnProperty(s)&&Kh(e,s,t[s])}function lf(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Cw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zl(e){return Cw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function fi(){}var Qu=null;function of(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ts=null,fs=null;function Xh(e){var t=Us(e);if(t&&(e=t.stateNode)){var n=e[rn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ku(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Cn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=i[rn]||null;if(!a)throw Error(C(90));Ku(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Uv(i)}break e;case"textarea":Lv(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ds(e,!!n.multiple,t,!1)}}}var qc=!1;function qv(e,t,n){if(qc)return e(t,n);qc=!0;try{var i=e(t);return i}finally{if(qc=!1,(ts!==null||fs!==null)&&(gc(),ts&&(t=ts,e=fs,fs=ts=null,Xh(t),e)))for(t=0;t<e.length;t++)Xh(e[t])}}function Rr(e,t){var n=e.stateNode;if(n===null)return null;var i=n[rn]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(C(231,t,typeof n));return n}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ju=!1;if(yi)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){Ju=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{Ju=!1}var Ui=null,cf=null,Fl=null;function $v(){if(Fl)return Fl;var e,t=cf,n=t.length,i,a="value"in Ui?Ui.value:Ui.textContent,s=a.length;for(e=0;e<n&&t[e]===a[e];e++);var r=n-e;for(i=1;i<=r&&t[n-i]===a[s-i];i++);return Fl=a.slice(e,1<i?1-i:void 0)}function Wl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nl(){return!0}function Qh(){return!1}function ln(e){function t(n,i,a,s,r){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Nl:Qh,this.isPropagationStopped=Qh,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),t}var Ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ac=ln(Ca),tl=Ze({},Ca,{view:0,detail:0}),Dw=ln(tl),$c,Ic,Fs,sc=Ze({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fs&&(Fs&&e.type==="mousemove"?($c=e.screenX-Fs.screenX,Ic=e.screenY-Fs.screenY):Ic=$c=0,Fs=e),$c)},movementY:function(e){return"movementY"in e?e.movementY:Ic}}),Jh=ln(sc),Rw=Ze({},sc,{dataTransfer:0}),Mw=ln(Rw),kw=Ze({},tl,{relatedTarget:0}),Vc=ln(kw),Uw=Ze({},Ca,{animationName:0,elapsedTime:0,pseudoElement:0}),zw=ln(Uw),Lw=Ze({},Ca,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bw=ln(Lw),Hw=Ze({},Ca,{data:0}),Ph=ln(Hw),qw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$w={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Iw[e])?!!t[e]:!1}function uf(){return Vw}var Yw=Ze({},tl,{key:function(e){if(e.key){var t=qw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$w[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uf,charCode:function(e){return e.type==="keypress"?Wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Gw=ln(Yw),Kw=Ze({},sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zh=ln(Kw),Xw=Ze({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uf}),Qw=ln(Xw),Jw=Ze({},Ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pw=ln(Jw),Zw=Ze({},sc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Fw=ln(Zw),Ww=Ze({},Ca,{newState:0,oldState:0}),eS=ln(Ww),tS=[9,13,27,32],df=yi&&"CompositionEvent"in window,fr=null;yi&&"documentMode"in document&&(fr=document.documentMode);var nS=yi&&"TextEvent"in window&&!fr,Iv=yi&&(!df||fr&&8<fr&&11>=fr),Fh=" ",Wh=!1;function Vv(e,t){switch(e){case"keyup":return tS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ns=!1;function iS(e,t){switch(e){case"compositionend":return Yv(t);case"keypress":return t.which!==32?null:(Wh=!0,Fh);case"textInput":return e=t.data,e===Fh&&Wh?null:e;default:return null}}function aS(e,t){if(ns)return e==="compositionend"||!df&&Vv(e,t)?(e=$v(),Fl=cf=Ui=null,ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Iv&&t.locale!=="ko"?null:t.data;default:return null}}var sS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function em(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sS[e.type]:t==="textarea"}function Gv(e,t,n,i){ts?fs?fs.push(i):fs=[i]:ts=i,t=Uo(t,"onChange"),0<t.length&&(n=new ac("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var hr=null,Mr=null;function rS(e){qp(e,0)}function rc(e){var t=lr(e);if(Uv(t))return e}function tm(e,t){if(e==="change")return t}var Kv=!1;if(yi){var Yc;if(yi){var Gc="oninput"in document;if(!Gc){var nm=document.createElement("div");nm.setAttribute("oninput","return;"),Gc=typeof nm.oninput=="function"}Yc=Gc}else Yc=!1;Kv=Yc&&(!document.documentMode||9<document.documentMode)}function im(){hr&&(hr.detachEvent("onpropertychange",Xv),Mr=hr=null)}function Xv(e){if(e.propertyName==="value"&&rc(Mr)){var t=[];Gv(t,Mr,e,of(e)),qv(rS,t)}}function lS(e,t,n){e==="focusin"?(im(),hr=t,Mr=n,hr.attachEvent("onpropertychange",Xv)):e==="focusout"&&im()}function oS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rc(Mr)}function cS(e,t){if(e==="click")return rc(t)}function uS(e,t){if(e==="input"||e==="change")return rc(t)}function dS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pn=typeof Object.is=="function"?Object.is:dS;function kr(e,t){if(pn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!Vu.call(t,a)||!pn(e[a],t[a]))return!1}return!0}function am(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sm(e,t){var n=am(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=am(n)}}function Qv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jv(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=yo(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yo(e.document)}return t}function ff(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var fS=yi&&"documentMode"in document&&11>=document.documentMode,is=null,Pu=null,mr=null,Zu=!1;function rm(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zu||is==null||is!==yo(i)||(i=is,"selectionStart"in i&&ff(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),mr&&kr(mr,i)||(mr=i,i=Uo(Pu,"onSelect"),0<i.length&&(t=new ac("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=is)))}function ra(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var as={animationend:ra("Animation","AnimationEnd"),animationiteration:ra("Animation","AnimationIteration"),animationstart:ra("Animation","AnimationStart"),transitionrun:ra("Transition","TransitionRun"),transitionstart:ra("Transition","TransitionStart"),transitioncancel:ra("Transition","TransitionCancel"),transitionend:ra("Transition","TransitionEnd")},Kc={},Pv={};yi&&(Pv=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function Da(e){if(Kc[e])return Kc[e];if(!as[e])return e;var t=as[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Pv)return Kc[e]=t[n];return e}var Zv=Da("animationend"),Fv=Da("animationiteration"),Wv=Da("animationstart"),hS=Da("transitionrun"),mS=Da("transitionstart"),gS=Da("transitioncancel"),ey=Da("transitionend"),ty=new Map,Fu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fu.push("scrollEnd");function Yn(e,t){ty.set(e,t),Na(t,[e])}var po=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Tn=[],ss=0,hf=0;function lc(){for(var e=ss,t=hf=ss=0;t<e;){var n=Tn[t];Tn[t++]=null;var i=Tn[t];Tn[t++]=null;var a=Tn[t];Tn[t++]=null;var s=Tn[t];if(Tn[t++]=null,i!==null&&a!==null){var r=i.pending;r===null?a.next=a:(a.next=r.next,r.next=a),i.pending=a}s!==0&&ny(n,a,s)}}function oc(e,t,n,i){Tn[ss++]=e,Tn[ss++]=t,Tn[ss++]=n,Tn[ss++]=i,hf|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function mf(e,t,n,i){return oc(e,t,n,i),bo(e)}function Ra(e,t){return oc(e,null,null,t),bo(e)}function ny(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var a=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(a=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,a&&t!==null&&(a=31-vn(n),e=s.hiddenUpdates,i=e[a],i===null?e[a]=[t]:i.push(t),t.lane=n|536870912),s):null}function bo(e){if(50<xr)throw xr=0,bd=null,Error(C(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var rs={};function vS(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(e,t,n,i){return new vS(e,t,n,i)}function gf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mi(e,t){var n=e.alternate;return n===null?(n=un(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function iy(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function eo(e,t,n,i,a,s){var r=0;if(i=e,typeof e=="function")gf(e)&&(r=1);else if(typeof e=="string")r=wx(e,n,Wn.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Hu:return e=un(31,n,t,a),e.elementType=Hu,e.lanes=s,e;case Fa:return _a(n.children,a,s,t);case Sv:r=8,a|=24;break;case zu:return e=un(12,n,t,a|2),e.elementType=zu,e.lanes=s,e;case Lu:return e=un(13,n,t,a),e.elementType=Lu,e.lanes=s,e;case Bu:return e=un(19,n,t,a),e.elementType=Bu,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case di:r=10;break e;case xv:r=9;break e;case ef:r=11;break e;case tf:r=14;break e;case ji:r=16,i=null;break e}r=29,n=Error(C(130,e===null?"null":typeof e,"")),i=null}return t=un(r,n,t,a),t.elementType=e,t.type=i,t.lanes=s,t}function _a(e,t,n,i){return e=un(7,e,i,t),e.lanes=n,e}function Xc(e,t,n){return e=un(6,e,null,t),e.lanes=n,e}function ay(e){var t=un(18,null,null,0);return t.stateNode=e,t}function Qc(e,t,n){return t=un(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var lm=new WeakMap;function Dn(e,t){if(typeof e=="object"&&e!==null){var n=lm.get(e);return n!==void 0?n:(t={value:e,source:t,stack:$h(t)},lm.set(e,t),t)}return{value:e,source:t,stack:$h(t)}}var ls=[],os=0,_o=null,Ur=0,An=[],Nn=0,Ji=null,Pn=1,Zn="";function ci(e,t){ls[os++]=Ur,ls[os++]=_o,_o=e,Ur=t}function sy(e,t,n){An[Nn++]=Pn,An[Nn++]=Zn,An[Nn++]=Ji,Ji=e;var i=Pn;e=Zn;var a=32-vn(i)-1;i&=~(1<<a),n+=1;var s=32-vn(t)+a;if(30<s){var r=a-a%5;s=(i&(1<<r)-1).toString(32),i>>=r,a-=r,Pn=1<<32-vn(t)+a|n<<a|i,Zn=s+e}else Pn=1<<s|n<<a|i,Zn=e}function vf(e){e.return!==null&&(ci(e,1),sy(e,1,0))}function yf(e){for(;e===_o;)_o=ls[--os],ls[os]=null,Ur=ls[--os],ls[os]=null;for(;e===Ji;)Ji=An[--Nn],An[Nn]=null,Zn=An[--Nn],An[Nn]=null,Pn=An[--Nn],An[Nn]=null}function ry(e,t){An[Nn++]=Pn,An[Nn++]=Zn,An[Nn++]=Ji,Pn=t.id,Zn=t.overflow,Ji=e}var Ht=null,Je=null,Me=!1,$i=null,Rn=!1,Wu=Error(C(519));function Pi(e){var t=Error(C(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zr(Dn(t,e)),Wu}function om(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Bt]=e,t[rn]=i,n){case"dialog":Te("cancel",t),Te("close",t);break;case"iframe":case"object":case"embed":Te("load",t);break;case"video":case"audio":for(n=0;n<qr.length;n++)Te(qr[n],t);break;case"source":Te("error",t);break;case"img":case"image":case"link":Te("error",t),Te("load",t);break;case"details":Te("toggle",t);break;case"input":Te("invalid",t),zv(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Te("invalid",t);break;case"textarea":Te("invalid",t),Bv(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||Ip(t.textContent,n)?(i.popover!=null&&(Te("beforetoggle",t),Te("toggle",t)),i.onScroll!=null&&Te("scroll",t),i.onScrollEnd!=null&&Te("scrollend",t),i.onClick!=null&&(t.onclick=fi),t=!0):t=!1,t||Pi(e,!0)}function cm(e){for(Ht=e.return;Ht;)switch(Ht.tag){case 5:case 31:case 13:Rn=!1;return;case 27:case 3:Rn=!0;return;default:Ht=Ht.return}}function Ba(e){if(e!==Ht)return!1;if(!Me)return cm(e),Me=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Ed(e.type,e.memoizedProps)),n=!n),n&&Je&&Pi(e),cm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(C(317));Je=Jm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(C(317));Je=Jm(e)}else t===27?(t=Je,ta(e.type)?(e=Ad,Ad=null,Je=e):Je=t):Je=Ht?kn(e.stateNode.nextSibling):null;return!0}function Ea(){Je=Ht=null,Me=!1}function Jc(){var e=$i;return e!==null&&(an===null?an=e:an.push.apply(an,e),$i=null),e}function zr(e){$i===null?$i=[e]:$i.push(e)}var ed=ei(null),Ma=null,hi=null;function Ni(e,t,n){Xe(ed,t._currentValue),t._currentValue=n}function gi(e){e._currentValue=ed.current,Rt(ed)}function td(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function nd(e,t,n,i){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){var r=a.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=a;for(var o=0;o<t.length;o++)if(l.context===t[o]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),td(s.return,n,e),i||(r=null);break e}s=l.next}}else if(a.tag===18){if(r=a.return,r===null)throw Error(C(341));r.lanes|=n,s=r.alternate,s!==null&&(s.lanes|=n),td(r,n,e),r=null}else r=a.child;if(r!==null)r.return=a;else for(r=a;r!==null;){if(r===e){r=null;break}if(a=r.sibling,a!==null){a.return=r.return,r=a;break}r=r.return}a=r}}function zs(e,t,n,i){e=null;for(var a=t,s=!1;a!==null;){if(!s){if(a.flags&524288)s=!0;else if(a.flags&262144)break}if(a.tag===10){var r=a.alternate;if(r===null)throw Error(C(387));if(r=r.memoizedProps,r!==null){var l=a.type;pn(a.pendingProps.value,r.value)||(e!==null?e.push(l):e=[l])}}else if(a===ho.current){if(r=a.alternate,r===null)throw Error(C(387));r.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(Ir):e=[Ir])}a=a.return}e!==null&&nd(t,e,n,i),t.flags|=262144}function wo(e){for(e=e.firstContext;e!==null;){if(!pn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ta(e){Ma=e,hi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function qt(e){return ly(Ma,e)}function Cl(e,t){return Ma===null&&Ta(e),ly(e,t)}function ly(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},hi===null){if(e===null)throw Error(C(308));hi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else hi=hi.next=t;return n}var yS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},pS=Ot.unstable_scheduleCallback,bS=Ot.unstable_NormalPriority,bt={$$typeof:di,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pf(){return{controller:new yS,data:new Map,refCount:0}}function nl(e){e.refCount--,e.refCount===0&&pS(bS,function(){e.controller.abort()})}var gr=null,id=0,Ss=0,hs=null;function _S(e,t){if(gr===null){var n=gr=[];id=0,Ss=Vf(),hs={status:"pending",value:void 0,then:function(i){n.push(i)}}}return id++,t.then(um,um),t}function um(){if(--id===0&&gr!==null){hs!==null&&(hs.status="fulfilled");var e=gr;gr=null,Ss=0,hs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function wS(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var a=0;a<n.length;a++)(0,n[a])(t)},function(a){for(i.status="rejected",i.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),i}var dm=de.S;de.S=function(e,t){wp=mn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&_S(e,t),dm!==null&&dm(e,t)};var wa=ei(null);function bf(){var e=wa.current;return e!==null?e:Ye.pooledCache}function to(e,t){t===null?Xe(wa,wa.current):Xe(wa,t.pool)}function oy(){var e=bf();return e===null?null:{parent:bt._currentValue,pool:e}}var Ls=Error(C(460)),_f=Error(C(474)),cc=Error(C(542)),So={then:function(){}};function fm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function cy(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(fi,fi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mm(e),e;default:if(typeof t.status=="string")t.then(fi,fi);else{if(e=Ye,e!==null&&100<e.shellSuspendCounter)throw Error(C(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=i}},function(i){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mm(e),e}throw Sa=t,Ls}}function da(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Sa=n,Ls):n}}var Sa=null;function hm(){if(Sa===null)throw Error(C(459));var e=Sa;return Sa=null,e}function mm(e){if(e===Ls||e===cc)throw Error(C(483))}var ms=null,Lr=0;function Dl(e){var t=Lr;return Lr+=1,ms===null&&(ms=[]),cy(ms,e,t)}function Ws(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Rl(e,t){throw t.$$typeof===lw?Error(C(525)):(e=Object.prototype.toString.call(t),Error(C(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function uy(e){function t(y,g){if(e){var v=y.deletions;v===null?(y.deletions=[g],y.flags|=16):v.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function i(y){for(var g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function a(y,g){return y=mi(y,g),y.index=0,y.sibling=null,y}function s(y,g,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<g?(y.flags|=67108866,g):v):(y.flags|=67108866,g)):(y.flags|=1048576,g)}function r(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function l(y,g,v,S){return g===null||g.tag!==6?(g=Xc(v,y.mode,S),g.return=y,g):(g=a(g,v),g.return=y,g)}function o(y,g,v,S){var x=v.type;return x===Fa?d(y,g,v.props.children,S,v.key):g!==null&&(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===ji&&da(x)===g.type)?(g=a(g,v.props),Ws(g,v),g.return=y,g):(g=eo(v.type,v.key,v.props,null,y.mode,S),Ws(g,v),g.return=y,g)}function c(y,g,v,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Qc(v,y.mode,S),g.return=y,g):(g=a(g,v.children||[]),g.return=y,g)}function d(y,g,v,S,x){return g===null||g.tag!==7?(g=_a(v,y.mode,S,x),g.return=y,g):(g=a(g,v),g.return=y,g)}function f(y,g,v){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=Xc(""+g,y.mode,v),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case El:return v=eo(g.type,g.key,g.props,null,y.mode,v),Ws(v,g),v.return=y,v;case sr:return g=Qc(g,y.mode,v),g.return=y,g;case ji:return g=da(g),f(y,g,v)}if(rr(g)||Ps(g))return g=_a(g,y.mode,v,null),g.return=y,g;if(typeof g.then=="function")return f(y,Dl(g),v);if(g.$$typeof===di)return f(y,Cl(y,g),v);Rl(y,g)}return null}function h(y,g,v,S){var x=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return x!==null?null:l(y,g,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case El:return v.key===x?o(y,g,v,S):null;case sr:return v.key===x?c(y,g,v,S):null;case ji:return v=da(v),h(y,g,v,S)}if(rr(v)||Ps(v))return x!==null?null:d(y,g,v,S,null);if(typeof v.then=="function")return h(y,g,Dl(v),S);if(v.$$typeof===di)return h(y,g,Cl(y,v),S);Rl(y,v)}return null}function m(y,g,v,S,x){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return y=y.get(v)||null,l(g,y,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case El:return y=y.get(S.key===null?v:S.key)||null,o(g,y,S,x);case sr:return y=y.get(S.key===null?v:S.key)||null,c(g,y,S,x);case ji:return S=da(S),m(y,g,v,S,x)}if(rr(S)||Ps(S))return y=y.get(v)||null,d(g,y,S,x,null);if(typeof S.then=="function")return m(y,g,v,Dl(S),x);if(S.$$typeof===di)return m(y,g,v,Cl(g,S),x);Rl(g,S)}return null}function p(y,g,v,S){for(var x=null,T=null,E=g,j=g=0,A=null;E!==null&&j<v.length;j++){E.index>j?(A=E,E=null):A=E.sibling;var k=h(y,E,v[j],S);if(k===null){E===null&&(E=A);break}e&&E&&k.alternate===null&&t(y,E),g=s(k,g,j),T===null?x=k:T.sibling=k,T=k,E=A}if(j===v.length)return n(y,E),Me&&ci(y,j),x;if(E===null){for(;j<v.length;j++)E=f(y,v[j],S),E!==null&&(g=s(E,g,j),T===null?x=E:T.sibling=E,T=E);return Me&&ci(y,j),x}for(E=i(E);j<v.length;j++)A=m(E,y,j,v[j],S),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?j:A.key),g=s(A,g,j),T===null?x=A:T.sibling=A,T=A);return e&&E.forEach(function(Z){return t(y,Z)}),Me&&ci(y,j),x}function _(y,g,v,S){if(v==null)throw Error(C(151));for(var x=null,T=null,E=g,j=g=0,A=null,k=v.next();E!==null&&!k.done;j++,k=v.next()){E.index>j?(A=E,E=null):A=E.sibling;var Z=h(y,E,k.value,S);if(Z===null){E===null&&(E=A);break}e&&E&&Z.alternate===null&&t(y,E),g=s(Z,g,j),T===null?x=Z:T.sibling=Z,T=Z,E=A}if(k.done)return n(y,E),Me&&ci(y,j),x;if(E===null){for(;!k.done;j++,k=v.next())k=f(y,k.value,S),k!==null&&(g=s(k,g,j),T===null?x=k:T.sibling=k,T=k);return Me&&ci(y,j),x}for(E=i(E);!k.done;j++,k=v.next())k=m(E,y,j,k.value,S),k!==null&&(e&&k.alternate!==null&&E.delete(k.key===null?j:k.key),g=s(k,g,j),T===null?x=k:T.sibling=k,T=k);return e&&E.forEach(function(me){return t(y,me)}),Me&&ci(y,j),x}function w(y,g,v,S){if(typeof v=="object"&&v!==null&&v.type===Fa&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case El:e:{for(var x=v.key;g!==null;){if(g.key===x){if(x=v.type,x===Fa){if(g.tag===7){n(y,g.sibling),S=a(g,v.props.children),S.return=y,y=S;break e}}else if(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===ji&&da(x)===g.type){n(y,g.sibling),S=a(g,v.props),Ws(S,v),S.return=y,y=S;break e}n(y,g);break}else t(y,g);g=g.sibling}v.type===Fa?(S=_a(v.props.children,y.mode,S,v.key),S.return=y,y=S):(S=eo(v.type,v.key,v.props,null,y.mode,S),Ws(S,v),S.return=y,y=S)}return r(y);case sr:e:{for(x=v.key;g!==null;){if(g.key===x)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(y,g.sibling),S=a(g,v.children||[]),S.return=y,y=S;break e}else{n(y,g);break}else t(y,g);g=g.sibling}S=Qc(v,y.mode,S),S.return=y,y=S}return r(y);case ji:return v=da(v),w(y,g,v,S)}if(rr(v))return p(y,g,v,S);if(Ps(v)){if(x=Ps(v),typeof x!="function")throw Error(C(150));return v=x.call(v),_(y,g,v,S)}if(typeof v.then=="function")return w(y,g,Dl(v),S);if(v.$$typeof===di)return w(y,g,Cl(y,v),S);Rl(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,g!==null&&g.tag===6?(n(y,g.sibling),S=a(g,v),S.return=y,y=S):(n(y,g),S=Xc(v,y.mode,S),S.return=y,y=S),r(y)):n(y,g)}return function(y,g,v,S){try{Lr=0;var x=w(y,g,v,S);return ms=null,x}catch(E){if(E===Ls||E===cc)throw E;var T=un(29,E,null,y.mode);return T.lanes=S,T.return=y,T}finally{}}}var ja=uy(!0),dy=uy(!1),Oi=!1;function wf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ii(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Vi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,ze&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,t=bo(e),ny(e,null,n),t}return oc(e,i,t,n),bo(e)}function vr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Nv(e,n)}}function Pc(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?a=s=r:s=s.next=r,n=n.next}while(n!==null);s===null?a=s=t:s=s.next=t}else a=s=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var sd=!1;function yr(){if(sd){var e=hs;if(e!==null)throw e}}function pr(e,t,n,i){sd=!1;var a=e.updateQueue;Oi=!1;var s=a.firstBaseUpdate,r=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var o=l,c=o.next;o.next=null,r===null?s=c:r.next=c,r=o;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==r&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(s!==null){var f=a.baseState;r=0,d=c=o=null,l=s;do{var h=l.lane&-536870913,m=h!==l.lane;if(m?(Ce&h)===h:(i&h)===h){h!==0&&h===Ss&&(sd=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var p=e,_=l;h=t;var w=n;switch(_.tag){case 1:if(p=_.payload,typeof p=="function"){f=p.call(w,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=_.payload,h=typeof p=="function"?p.call(w,f,h):p,h==null)break e;f=Ze({},f,h);break e;case 2:Oi=!0}}h=l.callback,h!==null&&(e.flags|=64,m&&(e.flags|=8192),m=a.callbacks,m===null?a.callbacks=[h]:m.push(h))}else m={lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=m,o=f):d=d.next=m,r|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);d===null&&(o=f),a.baseState=o,a.firstBaseUpdate=c,a.lastBaseUpdate=d,s===null&&(a.shared.lanes=0),Fi|=r,e.lanes=r,e.memoizedState=f}}function fy(e,t){if(typeof e!="function")throw Error(C(191,e));e.call(t)}function hy(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)fy(n[e],t)}var xs=ei(null),xo=ei(0);function gm(e,t){e=wi,Xe(xo,e),Xe(xs,t),wi=e|t.baseLanes}function rd(){Xe(xo,wi),Xe(xs,xs.current)}function Sf(){wi=xo.current,Rt(xs),Rt(xo)}var bn=ei(null),Mn=null;function Ci(e){var t=e.alternate;Xe(mt,mt.current&1),Xe(bn,e),Mn===null&&(t===null||xs.current!==null||t.memoizedState!==null)&&(Mn=e)}function ld(e){Xe(mt,mt.current),Xe(bn,e),Mn===null&&(Mn=e)}function my(e){e.tag===22?(Xe(mt,mt.current),Xe(bn,e),Mn===null&&(Mn=e)):Di()}function Di(){Xe(mt,mt.current),Xe(bn,bn.current)}function cn(e){Rt(bn),Mn===e&&(Mn=null),Rt(mt)}var mt=ei(0);function Eo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||jd(n)||Od(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pi=0,be=null,Ve=null,yt=null,To=!1,gs=!1,Oa=!1,jo=0,Br=0,vs=null,SS=0;function ut(){throw Error(C(321))}function xf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!pn(e[n],t[n]))return!1;return!0}function Ef(e,t,n,i,a,s){return pi=s,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,de.H=e===null||e.memoizedState===null?Gy:Uf,Oa=!1,s=n(i,a),Oa=!1,gs&&(s=vy(t,n,i,a)),gy(e),s}function gy(e){de.H=Hr;var t=Ve!==null&&Ve.next!==null;if(pi=0,yt=Ve=be=null,To=!1,Br=0,vs=null,t)throw Error(C(300));e===null||_t||(e=e.dependencies,e!==null&&wo(e)&&(_t=!0))}function vy(e,t,n,i){be=e;var a=0;do{if(gs&&(vs=null),Br=0,gs=!1,25<=a)throw Error(C(301));if(a+=1,yt=Ve=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}de.H=Ky,s=t(n,i)}while(gs);return s}function xS(){var e=de.H,t=e.useState()[0];return t=typeof t.then=="function"?il(t):t,e=e.useState()[0],(Ve!==null?Ve.memoizedState:null)!==e&&(be.flags|=1024),t}function Tf(){var e=jo!==0;return jo=0,e}function jf(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Of(e){if(To){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}To=!1}pi=0,yt=Ve=be=null,gs=!1,Br=jo=0,vs=null}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?be.memoizedState=yt=e:yt=yt.next=e,yt}function gt(){if(Ve===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=yt===null?be.memoizedState:yt.next;if(t!==null)yt=t,Ve=e;else{if(e===null)throw be.alternate===null?Error(C(467)):Error(C(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},yt===null?be.memoizedState=yt=e:yt=yt.next=e}return yt}function uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function il(e){var t=Br;return Br+=1,vs===null&&(vs=[]),e=cy(vs,e,t),t=be,(yt===null?t.memoizedState:yt.next)===null&&(t=t.alternate,de.H=t===null||t.memoizedState===null?Gy:Uf),e}function dc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return il(e);if(e.$$typeof===di)return qt(e)}throw Error(C(438,String(e)))}function Af(e){var t=null,n=be.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=be.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=uc(),be.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=ow;return t.index++,n}function bi(e,t){return typeof t=="function"?t(e):t}function no(e){var t=gt();return Nf(t,Ve,e)}function Nf(e,t,n){var i=e.queue;if(i===null)throw Error(C(311));i.lastRenderedReducer=n;var a=e.baseQueue,s=i.pending;if(s!==null){if(a!==null){var r=a.next;a.next=s.next,s.next=r}t.baseQueue=a=s,i.pending=null}if(s=e.baseState,a===null)e.memoizedState=s;else{t=a.next;var l=r=null,o=null,c=t,d=!1;do{var f=c.lane&-536870913;if(f!==c.lane?(Ce&f)===f:(pi&f)===f){var h=c.revertLane;if(h===0)o!==null&&(o=o.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Ss&&(d=!0);else if((pi&h)===h){c=c.next,h===Ss&&(d=!0);continue}else f={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},o===null?(l=o=f,r=s):o=o.next=f,be.lanes|=h,Fi|=h;f=c.action,Oa&&n(s,f),s=c.hasEagerState?c.eagerState:n(s,f)}else h={lane:f,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},o===null?(l=o=h,r=s):o=o.next=h,be.lanes|=f,Fi|=f;c=c.next}while(c!==null&&c!==t);if(o===null?r=s:o.next=l,!pn(s,e.memoizedState)&&(_t=!0,d&&(n=hs,n!==null)))throw n;e.memoizedState=s,e.baseState=r,e.baseQueue=o,i.lastRenderedState=s}return a===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Zc(e){var t=gt(),n=t.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,s=t.memoizedState;if(a!==null){n.pending=null;var r=a=a.next;do s=e(s,r.action),r=r.next;while(r!==a);pn(s,t.memoizedState)||(_t=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function yy(e,t,n){var i=be,a=gt(),s=Me;if(s){if(n===void 0)throw Error(C(407));n=n()}else n=t();var r=!pn((Ve||a).memoizedState,n);if(r&&(a.memoizedState=n,_t=!0),a=a.queue,Cf(_y.bind(null,i,a,e),[e]),a.getSnapshot!==t||r||yt!==null&&yt.memoizedState.tag&1){if(i.flags|=2048,Es(9,{destroy:void 0},by.bind(null,i,a,n,t),null),Ye===null)throw Error(C(349));s||pi&127||py(i,t,n)}return n}function py(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=be.updateQueue,t===null?(t=uc(),be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function by(e,t,n,i){t.value=n,t.getSnapshot=i,wy(t)&&Sy(e)}function _y(e,t,n){return n(function(){wy(t)&&Sy(e)})}function wy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!pn(e,n)}catch{return!0}}function Sy(e){var t=Ra(e,2);t!==null&&sn(t,e,2)}function od(e){var t=Xt();if(typeof e=="function"){var n=e;if(e=n(),Oa){ki(!0);try{n()}finally{ki(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:e},t}function xy(e,t,n,i){return e.baseState=n,Nf(e,Ve,typeof i=="function"?i:bi)}function ES(e,t,n,i,a){if(hc(e))throw Error(C(485));if(e=t.action,e!==null){var s={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){s.listeners.push(r)}};de.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,Ey(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Ey(e,t){var n=t.action,i=t.payload,a=e.state;if(t.isTransition){var s=de.T,r={};de.T=r;try{var l=n(a,i),o=de.S;o!==null&&o(r,l),vm(e,t,l)}catch(c){cd(e,t,c)}finally{s!==null&&r.types!==null&&(s.types=r.types),de.T=s}}else try{s=n(a,i),vm(e,t,s)}catch(c){cd(e,t,c)}}function vm(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){ym(e,t,i)},function(i){return cd(e,t,i)}):ym(e,t,n)}function ym(e,t,n){t.status="fulfilled",t.value=n,Ty(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ey(e,n)))}function cd(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Ty(t),t=t.next;while(t!==i)}e.action=null}function Ty(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function jy(e,t){return t}function pm(e,t){if(Me){var n=Ye.formState;if(n!==null){e:{var i=be;if(Me){if(Je){t:{for(var a=Je,s=Rn;a.nodeType!==8;){if(!s){a=null;break t}if(a=kn(a.nextSibling),a===null){a=null;break t}}s=a.data,a=s==="F!"||s==="F"?a:null}if(a){Je=kn(a.nextSibling),i=a.data==="F!";break e}}Pi(i)}i=!1}i&&(t=n[0])}}return n=Xt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jy,lastRenderedState:t},n.queue=i,n=Iy.bind(null,be,i),i.dispatch=n,i=od(!1),s=kf.bind(null,be,!1,i.queue),i=Xt(),a={state:t,dispatch:null,action:e,pending:null},i.queue=a,n=ES.bind(null,be,a,s,n),a.dispatch=n,i.memoizedState=e,[t,n,!1]}function bm(e){var t=gt();return Oy(t,Ve,e)}function Oy(e,t,n){if(t=Nf(e,t,jy)[0],e=no(bi)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=il(t)}catch(r){throw r===Ls?cc:r}else i=t;t=gt();var a=t.queue,s=a.dispatch;return n!==t.memoizedState&&(be.flags|=2048,Es(9,{destroy:void 0},TS.bind(null,a,n),null)),[i,s,e]}function TS(e,t){e.action=t}function _m(e){var t=gt(),n=Ve;if(n!==null)return Oy(t,n,e);gt(),t=t.memoizedState,n=gt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Es(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=be.updateQueue,t===null&&(t=uc(),be.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ay(){return gt().memoizedState}function io(e,t,n,i){var a=Xt();be.flags|=e,a.memoizedState=Es(1|t,{destroy:void 0},n,i===void 0?null:i)}function fc(e,t,n,i){var a=gt();i=i===void 0?null:i;var s=a.memoizedState.inst;Ve!==null&&i!==null&&xf(i,Ve.memoizedState.deps)?a.memoizedState=Es(t,s,n,i):(be.flags|=e,a.memoizedState=Es(1|t,s,n,i))}function wm(e,t){io(8390656,8,e,t)}function Cf(e,t){fc(2048,8,e,t)}function jS(e){be.flags|=4;var t=be.updateQueue;if(t===null)t=uc(),be.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Ny(e){var t=gt().memoizedState;return jS({ref:t,nextImpl:e}),function(){if(ze&2)throw Error(C(440));return t.impl.apply(void 0,arguments)}}function Cy(e,t){return fc(4,2,e,t)}function Dy(e,t){return fc(4,4,e,t)}function Ry(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function My(e,t,n){n=n!=null?n.concat([e]):null,fc(4,4,Ry.bind(null,t,e),n)}function Df(){}function ky(e,t){var n=gt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&xf(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Uy(e,t){var n=gt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&xf(t,i[1]))return i[0];if(i=e(),Oa){ki(!0);try{e()}finally{ki(!1)}}return n.memoizedState=[i,t],i}function Rf(e,t,n){return n===void 0||pi&1073741824&&!(Ce&261930)?e.memoizedState=t:(e.memoizedState=n,e=xp(),be.lanes|=e,Fi|=e,n)}function zy(e,t,n,i){return pn(n,t)?n:xs.current!==null?(e=Rf(e,n,i),pn(e,t)||(_t=!0),e):!(pi&42)||pi&1073741824&&!(Ce&261930)?(_t=!0,e.memoizedState=n):(e=xp(),be.lanes|=e,Fi|=e,t)}function Ly(e,t,n,i,a){var s=Le.p;Le.p=s!==0&&8>s?s:8;var r=de.T,l={};de.T=l,kf(e,!1,t,n);try{var o=a(),c=de.S;if(c!==null&&c(l,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=wS(o,i);br(e,t,d,yn(e))}else br(e,t,i,yn(e))}catch(f){br(e,t,{then:function(){},status:"rejected",reason:f},yn())}finally{Le.p=s,r!==null&&l.types!==null&&(r.types=l.types),de.T=r}}function OS(){}function ud(e,t,n,i){if(e.tag!==5)throw Error(C(476));var a=By(e).queue;Ly(e,a,t,ba,n===null?OS:function(){return Hy(e),n(i)})}function By(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ba,baseState:ba,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:ba},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Hy(e){var t=By(e);t.next===null&&(t=e.alternate.memoizedState),br(e,t.next.queue,{},yn())}function Mf(){return qt(Ir)}function qy(){return gt().memoizedState}function $y(){return gt().memoizedState}function AS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=yn();e=Ii(n);var i=Vi(t,e,n);i!==null&&(sn(i,t,n),vr(i,t,n)),t={cache:pf()},e.payload=t;return}t=t.return}}function NS(e,t,n){var i=yn();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hc(e)?Vy(t,n):(n=mf(e,t,n,i),n!==null&&(sn(n,e,i),Yy(n,t,i)))}function Iy(e,t,n){var i=yn();br(e,t,n,i)}function br(e,t,n,i){var a={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(hc(e))Vy(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var r=t.lastRenderedState,l=s(r,n);if(a.hasEagerState=!0,a.eagerState=l,pn(l,r))return oc(e,t,a,0),Ye===null&&lc(),!1}catch{}finally{}if(n=mf(e,t,a,i),n!==null)return sn(n,e,i),Yy(n,t,i),!0}return!1}function kf(e,t,n,i){if(i={lane:2,revertLane:Vf(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},hc(e)){if(t)throw Error(C(479))}else t=mf(e,n,i,2),t!==null&&sn(t,e,2)}function hc(e){var t=e.alternate;return e===be||t!==null&&t===be}function Vy(e,t){gs=To=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yy(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Nv(e,n)}}var Hr={readContext:qt,use:dc,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut};Hr.useEffectEvent=ut;var Gy={readContext:qt,use:dc,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:qt,useEffect:wm,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,io(4194308,4,Ry.bind(null,t,e),n)},useLayoutEffect:function(e,t){return io(4194308,4,e,t)},useInsertionEffect:function(e,t){io(4,2,e,t)},useMemo:function(e,t){var n=Xt();t=t===void 0?null:t;var i=e();if(Oa){ki(!0);try{e()}finally{ki(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Xt();if(n!==void 0){var a=n(t);if(Oa){ki(!0);try{n(t)}finally{ki(!1)}}}else a=t;return i.memoizedState=i.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},i.queue=e,e=e.dispatch=NS.bind(null,be,e),[i.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:function(e){e=od(e);var t=e.queue,n=Iy.bind(null,be,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Df,useDeferredValue:function(e,t){var n=Xt();return Rf(n,e,t)},useTransition:function(){var e=od(!1);return e=Ly.bind(null,be,e.queue,!0,!1),Xt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=be,a=Xt();if(Me){if(n===void 0)throw Error(C(407));n=n()}else{if(n=t(),Ye===null)throw Error(C(349));Ce&127||py(i,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,wm(_y.bind(null,i,s,e),[e]),i.flags|=2048,Es(9,{destroy:void 0},by.bind(null,i,s,n,t),null),n},useId:function(){var e=Xt(),t=Ye.identifierPrefix;if(Me){var n=Zn,i=Pn;n=(i&~(1<<32-vn(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=jo++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=SS++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Mf,useFormState:pm,useActionState:pm,useOptimistic:function(e){var t=Xt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=kf.bind(null,be,!0,n),n.dispatch=t,[e,t]},useMemoCache:Af,useCacheRefresh:function(){return Xt().memoizedState=AS.bind(null,be)},useEffectEvent:function(e){var t=Xt(),n={impl:e};return t.memoizedState=n,function(){if(ze&2)throw Error(C(440));return n.impl.apply(void 0,arguments)}}},Uf={readContext:qt,use:dc,useCallback:ky,useContext:qt,useEffect:Cf,useImperativeHandle:My,useInsertionEffect:Cy,useLayoutEffect:Dy,useMemo:Uy,useReducer:no,useRef:Ay,useState:function(){return no(bi)},useDebugValue:Df,useDeferredValue:function(e,t){var n=gt();return zy(n,Ve.memoizedState,e,t)},useTransition:function(){var e=no(bi)[0],t=gt().memoizedState;return[typeof e=="boolean"?e:il(e),t]},useSyncExternalStore:yy,useId:qy,useHostTransitionStatus:Mf,useFormState:bm,useActionState:bm,useOptimistic:function(e,t){var n=gt();return xy(n,Ve,e,t)},useMemoCache:Af,useCacheRefresh:$y};Uf.useEffectEvent=Ny;var Ky={readContext:qt,use:dc,useCallback:ky,useContext:qt,useEffect:Cf,useImperativeHandle:My,useInsertionEffect:Cy,useLayoutEffect:Dy,useMemo:Uy,useReducer:Zc,useRef:Ay,useState:function(){return Zc(bi)},useDebugValue:Df,useDeferredValue:function(e,t){var n=gt();return Ve===null?Rf(n,e,t):zy(n,Ve.memoizedState,e,t)},useTransition:function(){var e=Zc(bi)[0],t=gt().memoizedState;return[typeof e=="boolean"?e:il(e),t]},useSyncExternalStore:yy,useId:qy,useHostTransitionStatus:Mf,useFormState:_m,useActionState:_m,useOptimistic:function(e,t){var n=gt();return Ve!==null?xy(n,Ve,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Af,useCacheRefresh:$y};Ky.useEffectEvent=Ny;function Fc(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var dd={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=yn(),a=Ii(i);a.payload=t,n!=null&&(a.callback=n),t=Vi(e,a,i),t!==null&&(sn(t,e,i),vr(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=yn(),a=Ii(i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Vi(e,a,i),t!==null&&(sn(t,e,i),vr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yn(),i=Ii(n);i.tag=2,t!=null&&(i.callback=t),t=Vi(e,i,n),t!==null&&(sn(t,e,n),vr(t,e,n))}};function Sm(e,t,n,i,a,s,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,r):t.prototype&&t.prototype.isPureReactComponent?!kr(n,i)||!kr(a,s):!0}function xm(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&dd.enqueueReplaceState(t,t.state,null)}function Aa(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Ze({},n));for(var a in e)n[a]===void 0&&(n[a]=e[a])}return n}function Xy(e){po(e)}function Qy(e){console.error(e)}function Jy(e){po(e)}function Oo(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Em(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function fd(e,t,n){return n=Ii(n),n.tag=3,n.payload={element:null},n.callback=function(){Oo(e,t)},n}function Py(e){return e=Ii(e),e.tag=3,e}function Zy(e,t,n,i){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var s=i.value;e.payload=function(){return a(s)},e.callback=function(){Em(t,n,i)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Em(t,n,i),typeof a!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function CS(e,t,n,i,a){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&zs(t,n,a,!0),n=bn.current,n!==null){switch(n.tag){case 31:case 13:return Mn===null?Ro():n.alternate===null&&dt===0&&(dt=3),n.flags&=-257,n.flags|=65536,n.lanes=a,i===So?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),cu(e,i,a)),!1;case 22:return n.flags|=65536,i===So?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),cu(e,i,a)),!1}throw Error(C(435,n.tag))}return cu(e,i,a),Ro(),!1}if(Me)return t=bn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,i!==Wu&&(e=Error(C(422),{cause:i}),zr(Dn(e,n)))):(i!==Wu&&(t=Error(C(423),{cause:i}),zr(Dn(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,i=Dn(i,n),a=fd(e.stateNode,i,a),Pc(e,a),dt!==4&&(dt=2)),!1;var s=Error(C(520),{cause:i});if(s=Dn(s,n),Sr===null?Sr=[s]:Sr.push(s),dt!==4&&(dt=2),t===null)return!0;i=Dn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=fd(n.stateNode,i,e),Pc(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Yi===null||!Yi.has(s))))return n.flags|=65536,a&=-a,n.lanes|=a,a=Py(a),Zy(a,e,n,i),Pc(n,a),!1}n=n.return}while(n!==null);return!1}var zf=Error(C(461)),_t=!1;function Lt(e,t,n,i){t.child=e===null?dy(t,null,n,i):ja(t,e.child,n,i)}function Tm(e,t,n,i,a){n=n.render;var s=t.ref;if("ref"in i){var r={};for(var l in i)l!=="ref"&&(r[l]=i[l])}else r=i;return Ta(t),i=Ef(e,t,n,r,s,a),l=Tf(),e!==null&&!_t?(jf(e,t,a),_i(e,t,a)):(Me&&l&&vf(t),t.flags|=1,Lt(e,t,i,a),t.child)}function jm(e,t,n,i,a){if(e===null){var s=n.type;return typeof s=="function"&&!gf(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,Fy(e,t,s,i,a)):(e=eo(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Lf(e,a)){var r=s.memoizedProps;if(n=n.compare,n=n!==null?n:kr,n(r,i)&&e.ref===t.ref)return _i(e,t,a)}return t.flags|=1,e=mi(s,i),e.ref=t.ref,e.return=t,t.child=e}function Fy(e,t,n,i,a){if(e!==null){var s=e.memoizedProps;if(kr(s,i)&&e.ref===t.ref)if(_t=!1,t.pendingProps=i=s,Lf(e,a))e.flags&131072&&(_t=!0);else return t.lanes=e.lanes,_i(e,t,a)}return hd(e,t,n,i,a)}function Wy(e,t,n,i){var a=i.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(t.flags&128){if(s=s!==null?s.baseLanes|n:n,e!==null){for(i=t.child=e.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;i=a&~s}else i=0,t.child=null;return Om(e,t,s,n,i)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&to(t,s!==null?s.cachePool:null),s!==null?gm(t,s):rd(),my(t);else return i=t.lanes=536870912,Om(e,t,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(to(t,s.cachePool),gm(t,s),Di(),t.memoizedState=null):(e!==null&&to(t,null),rd(),Di());return Lt(e,t,a,n),t.child}function or(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Om(e,t,n,i,a){var s=bf();return s=s===null?null:{parent:bt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&to(t,null),rd(),my(t),e!==null&&zs(e,t,i,!0),t.childLanes=a,null}function ao(e,t){return t=Ao({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Am(e,t,n){return ja(t,e.child,null,n),e=ao(t,t.pendingProps),e.flags|=2,cn(t),t.memoizedState=null,e}function DS(e,t,n){var i=t.pendingProps,a=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Me){if(i.mode==="hidden")return e=ao(t,i),t.lanes=536870912,or(null,e);if(ld(t),(e=Je)?(e=Gp(e,Rn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ji!==null?{id:Pn,overflow:Zn}:null,retryLane:536870912,hydrationErrors:null},n=ay(e),n.return=t,t.child=n,Ht=t,Je=null)):e=null,e===null)throw Pi(t);return t.lanes=536870912,null}return ao(t,i)}var s=e.memoizedState;if(s!==null){var r=s.dehydrated;if(ld(t),a)if(t.flags&256)t.flags&=-257,t=Am(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(C(558));else if(_t||zs(e,t,n,!1),a=(n&e.childLanes)!==0,_t||a){if(i=Ye,i!==null&&(r=Cv(i,n),r!==0&&r!==s.retryLane))throw s.retryLane=r,Ra(e,r),sn(i,e,r),zf;Ro(),t=Am(e,t,n)}else e=s.treeContext,Je=kn(r.nextSibling),Ht=t,Me=!0,$i=null,Rn=!1,e!==null&&ry(t,e),t=ao(t,i),t.flags|=4096;return t}return e=mi(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function so(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(C(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function hd(e,t,n,i,a){return Ta(t),n=Ef(e,t,n,i,void 0,a),i=Tf(),e!==null&&!_t?(jf(e,t,a),_i(e,t,a)):(Me&&i&&vf(t),t.flags|=1,Lt(e,t,n,a),t.child)}function Nm(e,t,n,i,a,s){return Ta(t),t.updateQueue=null,n=vy(t,i,n,a),gy(e),i=Tf(),e!==null&&!_t?(jf(e,t,s),_i(e,t,s)):(Me&&i&&vf(t),t.flags|=1,Lt(e,t,n,s),t.child)}function Cm(e,t,n,i,a){if(Ta(t),t.stateNode===null){var s=rs,r=n.contextType;typeof r=="object"&&r!==null&&(s=qt(r)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=dd,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},wf(t),r=n.contextType,s.context=typeof r=="object"&&r!==null?qt(r):rs,s.state=t.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(Fc(t,n,r,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&dd.enqueueReplaceState(s,s.state,null),pr(t,i,s,a),yr(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,o=Aa(n,l);s.props=o;var c=s.context,d=n.contextType;r=rs,typeof d=="object"&&d!==null&&(r=qt(d));var f=n.getDerivedStateFromProps;d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||c!==r)&&xm(t,s,i,r),Oi=!1;var h=t.memoizedState;s.state=h,pr(t,i,s,a),yr(),c=t.memoizedState,l||h!==c||Oi?(typeof f=="function"&&(Fc(t,n,f,i),c=t.memoizedState),(o=Oi||Sm(t,n,o,i,h,c,r))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=r,i=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,ad(e,t),r=t.memoizedProps,d=Aa(n,r),s.props=d,f=t.pendingProps,h=s.context,c=n.contextType,o=rs,typeof c=="object"&&c!==null&&(o=qt(c)),l=n.getDerivedStateFromProps,(c=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r!==f||h!==o)&&xm(t,s,i,o),Oi=!1,h=t.memoizedState,s.state=h,pr(t,i,s,a),yr();var m=t.memoizedState;r!==f||h!==m||Oi||e!==null&&e.dependencies!==null&&wo(e.dependencies)?(typeof l=="function"&&(Fc(t,n,l,i),m=t.memoizedState),(d=Oi||Sm(t,n,d,i,h,m,o)||e!==null&&e.dependencies!==null&&wo(e.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,m,o),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,m,o)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),s.props=i,s.state=m,s.context=o,i=d):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,so(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=ja(t,e.child,null,a),t.child=ja(t,null,n,a)):Lt(e,t,n,a),t.memoizedState=s.state,e=t.child):e=_i(e,t,a),e}function Dm(e,t,n,i){return Ea(),t.flags|=256,Lt(e,t,n,i),t.child}var Wc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eu(e){return{baseLanes:e,cachePool:oy()}}function tu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=hn),e}function ep(e,t,n){var i=t.pendingProps,a=!1,s=(t.flags&128)!==0,r;if((r=s)||(r=e!==null&&e.memoizedState===null?!1:(mt.current&2)!==0),r&&(a=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(a?Ci(t):Di(),(e=Je)?(e=Gp(e,Rn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ji!==null?{id:Pn,overflow:Zn}:null,retryLane:536870912,hydrationErrors:null},n=ay(e),n.return=t,t.child=n,Ht=t,Je=null)):e=null,e===null)throw Pi(t);return Od(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,a?(Di(),a=t.mode,l=Ao({mode:"hidden",children:l},a),i=_a(i,a,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,i=t.child,i.memoizedState=eu(n),i.childLanes=tu(e,r,n),t.memoizedState=Wc,or(null,i)):(Ci(t),md(t,l))}var o=e.memoizedState;if(o!==null&&(l=o.dehydrated,l!==null)){if(s)t.flags&256?(Ci(t),t.flags&=-257,t=nu(e,t,n)):t.memoizedState!==null?(Di(),t.child=e.child,t.flags|=128,t=null):(Di(),l=i.fallback,a=t.mode,i=Ao({mode:"visible",children:i.children},a),l=_a(l,a,n,null),l.flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,ja(t,e.child,null,n),i=t.child,i.memoizedState=eu(n),i.childLanes=tu(e,r,n),t.memoizedState=Wc,t=or(null,i));else if(Ci(t),Od(l)){if(r=l.nextSibling&&l.nextSibling.dataset,r)var c=r.dgst;r=c,i=Error(C(419)),i.stack="",i.digest=r,zr({value:i,source:null,stack:null}),t=nu(e,t,n)}else if(_t||zs(e,t,n,!1),r=(n&e.childLanes)!==0,_t||r){if(r=Ye,r!==null&&(i=Cv(r,n),i!==0&&i!==o.retryLane))throw o.retryLane=i,Ra(e,i),sn(r,e,i),zf;jd(l)||Ro(),t=nu(e,t,n)}else jd(l)?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,Je=kn(l.nextSibling),Ht=t,Me=!0,$i=null,Rn=!1,e!==null&&ry(t,e),t=md(t,i.children),t.flags|=4096);return t}return a?(Di(),l=i.fallback,a=t.mode,o=e.child,c=o.sibling,i=mi(o,{mode:"hidden",children:i.children}),i.subtreeFlags=o.subtreeFlags&65011712,c!==null?l=mi(c,l):(l=_a(l,a,n,null),l.flags|=2),l.return=t,i.return=t,i.sibling=l,t.child=i,or(null,i),i=t.child,l=e.child.memoizedState,l===null?l=eu(n):(a=l.cachePool,a!==null?(o=bt._currentValue,a=a.parent!==o?{parent:o,pool:o}:a):a=oy(),l={baseLanes:l.baseLanes|n,cachePool:a}),i.memoizedState=l,i.childLanes=tu(e,r,n),t.memoizedState=Wc,or(e.child,i)):(Ci(t),n=e.child,e=n.sibling,n=mi(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function md(e,t){return t=Ao({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ao(e,t){return e=un(22,e,null,t),e.lanes=0,e}function nu(e,t,n){return ja(t,e.child,null,n),e=md(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rm(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),td(e.return,t,n)}function iu(e,t,n,i,a,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a,treeForkCount:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=a,r.treeForkCount=s)}function tp(e,t,n){var i=t.pendingProps,a=i.revealOrder,s=i.tail;i=i.children;var r=mt.current,l=(r&2)!==0;if(l?(r=r&1|2,t.flags|=128):r&=1,Xe(mt,r),Lt(e,t,i,n),i=Me?Ur:0,!l&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rm(e,n,t);else if(e.tag===19)Rm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Eo(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),iu(t,!1,a,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Eo(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}iu(t,!0,n,null,s,i);break;case"together":iu(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function _i(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fi|=t.lanes,!(n&t.childLanes))if(e!==null){if(zs(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(C(153));if(t.child!==null){for(e=t.child,n=mi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=mi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Lf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&wo(e)))}function RS(e,t,n){switch(t.tag){case 3:mo(t,t.stateNode.containerInfo),Ni(t,bt,e.memoizedState.cache),Ea();break;case 27:case 5:Iu(t);break;case 4:mo(t,t.stateNode.containerInfo);break;case 10:Ni(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ld(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ci(t),t.flags|=128,null):n&t.child.childLanes?ep(e,t,n):(Ci(t),e=_i(e,t,n),e!==null?e.sibling:null);Ci(t);break;case 19:var a=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(zs(e,t,n,!1),i=(n&t.childLanes)!==0),a){if(i)return tp(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Xe(mt,mt.current),i)break;return null;case 22:return t.lanes=0,Wy(e,t,n,t.pendingProps);case 24:Ni(t,bt,e.memoizedState.cache)}return _i(e,t,n)}function np(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)_t=!0;else{if(!Lf(e,n)&&!(t.flags&128))return _t=!1,RS(e,t,n);_t=!!(e.flags&131072)}else _t=!1,Me&&t.flags&1048576&&sy(t,Ur,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=da(t.elementType),t.type=e,typeof e=="function")gf(e)?(i=Aa(e,i),t.tag=1,t=Cm(null,t,e,i,n)):(t.tag=0,t=hd(null,t,e,i,n));else{if(e!=null){var a=e.$$typeof;if(a===ef){t.tag=11,t=Tm(null,t,e,i,n);break e}else if(a===tf){t.tag=14,t=jm(null,t,e,i,n);break e}}throw t=qu(e)||e,Error(C(306,t,""))}}return t;case 0:return hd(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,a=Aa(i,t.pendingProps),Cm(e,t,i,a,n);case 3:e:{if(mo(t,t.stateNode.containerInfo),e===null)throw Error(C(387));i=t.pendingProps;var s=t.memoizedState;a=s.element,ad(e,t),pr(t,i,null,n);var r=t.memoizedState;if(i=r.cache,Ni(t,bt,i),i!==s.cache&&nd(t,[bt],n,!0),yr(),i=r.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Dm(e,t,i,n);break e}else if(i!==a){a=Dn(Error(C(424)),t),zr(a),t=Dm(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Je=kn(e.firstChild),Ht=t,Me=!0,$i=null,Rn=!0,n=dy(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ea(),i===a){t=_i(e,t,n);break e}Lt(e,t,i,n)}t=t.child}return t;case 26:return so(e,t),e===null?(n=Fm(t.type,null,t.pendingProps,null))?t.memoizedState=n:Me||(n=t.type,e=t.pendingProps,i=zo(qi.current).createElement(n),i[Bt]=t,i[rn]=e,$t(i,n,e),Dt(i),t.stateNode=i):t.memoizedState=Fm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Iu(t),e===null&&Me&&(i=t.stateNode=Kp(t.type,t.pendingProps,qi.current),Ht=t,Rn=!0,a=Je,ta(t.type)?(Ad=a,Je=kn(i.firstChild)):Je=a),Lt(e,t,t.pendingProps.children,n),so(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((a=i=Je)&&(i=ox(i,t.type,t.pendingProps,Rn),i!==null?(t.stateNode=i,Ht=t,Je=kn(i.firstChild),Rn=!1,a=!0):a=!1),a||Pi(t)),Iu(t),a=t.type,s=t.pendingProps,r=e!==null?e.memoizedProps:null,i=s.children,Ed(a,s)?i=null:r!==null&&Ed(a,r)&&(t.flags|=32),t.memoizedState!==null&&(a=Ef(e,t,xS,null,null,n),Ir._currentValue=a),so(e,t),Lt(e,t,i,n),t.child;case 6:return e===null&&Me&&((e=n=Je)&&(n=cx(n,t.pendingProps,Rn),n!==null?(t.stateNode=n,Ht=t,Je=null,e=!0):e=!1),e||Pi(t)),null;case 13:return ep(e,t,n);case 4:return mo(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ja(t,null,i,n):Lt(e,t,i,n),t.child;case 11:return Tm(e,t,t.type,t.pendingProps,n);case 7:return Lt(e,t,t.pendingProps,n),t.child;case 8:return Lt(e,t,t.pendingProps.children,n),t.child;case 12:return Lt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ni(t,t.type,i.value),Lt(e,t,i.children,n),t.child;case 9:return a=t.type._context,i=t.pendingProps.children,Ta(t),a=qt(a),i=i(a),t.flags|=1,Lt(e,t,i,n),t.child;case 14:return jm(e,t,t.type,t.pendingProps,n);case 15:return Fy(e,t,t.type,t.pendingProps,n);case 19:return tp(e,t,n);case 31:return DS(e,t,n);case 22:return Wy(e,t,n,t.pendingProps);case 24:return Ta(t),i=qt(bt),e===null?(a=bf(),a===null&&(a=Ye,s=pf(),a.pooledCache=s,s.refCount++,s!==null&&(a.pooledCacheLanes|=n),a=s),t.memoizedState={parent:i,cache:a},wf(t),Ni(t,bt,a)):(e.lanes&n&&(ad(e,t),pr(t,null,null,n),yr()),a=e.memoizedState,s=t.memoizedState,a.parent!==i?(a={parent:i,cache:i},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Ni(t,bt,i)):(i=s.cache,Ni(t,bt,i),i!==a.cache&&nd(t,[bt],n,!0))),Lt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(C(156,t.tag))}function ii(e){e.flags|=4}function au(e,t,n,i,a){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(a&335544128)===a)if(e.stateNode.complete)e.flags|=8192;else if(jp())e.flags|=8192;else throw Sa=So,_f}else e.flags&=-16777217}function Mm(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Jp(t))if(jp())e.flags|=8192;else throw Sa=So,_f}function Ml(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ov():536870912,e.lanes|=t,Ts|=t)}function er(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&65011712,i|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function MS(e,t,n){var i=t.pendingProps;switch(yf(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return Qe(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),gi(bt),bs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ba(t)?ii(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jc())),Qe(t),null;case 26:var a=t.type,s=t.memoizedState;return e===null?(ii(t),s!==null?(Qe(t),Mm(t,s)):(Qe(t),au(t,a,null,i,n))):s?s!==e.memoizedState?(ii(t),Qe(t),Mm(t,s)):(Qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&ii(t),Qe(t),au(t,a,e,i,n)),null;case 27:if(go(t),n=qi.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ii(t);else{if(!i){if(t.stateNode===null)throw Error(C(166));return Qe(t),null}e=Wn.current,Ba(t)?om(t):(e=Kp(a,i,n),t.stateNode=e,ii(t))}return Qe(t),null;case 5:if(go(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ii(t);else{if(!i){if(t.stateNode===null)throw Error(C(166));return Qe(t),null}if(s=Wn.current,Ba(t))om(t);else{var r=zo(qi.current);switch(s){case 1:s=r.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:s=r.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":s=r.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":s=r.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":s=r.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?r.createElement(a,{is:i.is}):r.createElement(a)}}s[Bt]=t,s[rn]=i;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=s;e:switch($t(s,a,i),a){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ii(t)}}return Qe(t),au(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&ii(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(C(166));if(e=qi.current,Ba(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,a=Ht,a!==null)switch(a.tag){case 27:case 5:i=a.memoizedProps}e[Bt]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Ip(e.nodeValue,n)),e||Pi(t,!0)}else e=zo(e).createTextNode(i),e[Bt]=t,t.stateNode=e}return Qe(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=Ba(t),n!==null){if(e===null){if(!i)throw Error(C(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(C(557));e[Bt]=t}else Ea(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qe(t),e=!1}else n=Jc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(cn(t),t):(cn(t),null);if(t.flags&128)throw Error(C(558))}return Qe(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Ba(t),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(C(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(C(317));a[Bt]=t}else Ea(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qe(t),a=!1}else a=Jc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(cn(t),t):(cn(t),null)}return cn(t),t.flags&128?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,a=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(a=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==a&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Ml(t,t.updateQueue),Qe(t),null);case 4:return bs(),e===null&&Yf(t.stateNode.containerInfo),Qe(t),null;case 10:return gi(t.type),Qe(t),null;case 19:if(Rt(mt),i=t.memoizedState,i===null)return Qe(t),null;if(a=(t.flags&128)!==0,s=i.rendering,s===null)if(a)er(i,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Eo(e),s!==null){for(t.flags|=128,er(i,!1),e=s.updateQueue,t.updateQueue=e,Ml(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)iy(n,e),n=n.sibling;return Xe(mt,mt.current&1|2),Me&&ci(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&mn()>Co&&(t.flags|=128,a=!0,er(i,!1),t.lanes=4194304)}else{if(!a)if(e=Eo(s),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Ml(t,e),er(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Me)return Qe(t),null}else 2*mn()-i.renderingStartTime>Co&&n!==536870912&&(t.flags|=128,a=!0,er(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(e=i.last,e!==null?e.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mn(),e.sibling=null,n=mt.current,Xe(mt,a?n&1|2:n&1),Me&&ci(t,i.treeForkCount),e):(Qe(t),null);case 22:case 23:return cn(t),Sf(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),n=t.updateQueue,n!==null&&Ml(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Rt(wa),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),gi(bt),Qe(t),null;case 25:return null;case 30:return null}throw Error(C(156,t.tag))}function kS(e,t){switch(yf(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gi(bt),bs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return go(t),null;case 31:if(t.memoizedState!==null){if(cn(t),t.alternate===null)throw Error(C(340));Ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(cn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(C(340));Ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(mt),null;case 4:return bs(),null;case 10:return gi(t.type),null;case 22:case 23:return cn(t),Sf(),e!==null&&Rt(wa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return gi(bt),null;case 25:return null;default:return null}}function ip(e,t){switch(yf(t),t.tag){case 3:gi(bt),bs();break;case 26:case 27:case 5:go(t);break;case 4:bs();break;case 31:t.memoizedState!==null&&cn(t);break;case 13:cn(t);break;case 19:Rt(mt);break;case 10:gi(t.type);break;case 22:case 23:cn(t),Sf(),e!==null&&Rt(wa);break;case 24:gi(bt)}}function al(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var a=i.next;n=a;do{if((n.tag&e)===e){i=void 0;var s=n.create,r=n.inst;i=s(),r.destroy=i}n=n.next}while(n!==a)}}catch(l){$e(t,t.return,l)}}function Zi(e,t,n){try{var i=t.updateQueue,a=i!==null?i.lastEffect:null;if(a!==null){var s=a.next;i=s;do{if((i.tag&e)===e){var r=i.inst,l=r.destroy;if(l!==void 0){r.destroy=void 0,a=t;var o=n,c=l;try{c()}catch(d){$e(a,o,d)}}}i=i.next}while(i!==s)}}catch(d){$e(t,t.return,d)}}function ap(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{hy(t,n)}catch(i){$e(e,e.return,i)}}}function sp(e,t,n){n.props=Aa(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){$e(e,t,i)}}function _r(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(a){$e(e,t,a)}}function Fn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(a){$e(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){$e(e,t,a)}else n.current=null}function rp(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(a){$e(e,e.return,a)}}function su(e,t,n){try{var i=e.stateNode;nx(i,e.type,n,t),i[rn]=t}catch(a){$e(e,e.return,a)}}function lp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ta(e.type)||e.tag===4}function ru(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ta(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=fi));else if(i!==4&&(i===27&&ta(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(gd(e,t,n),e=e.sibling;e!==null;)gd(e,t,n),e=e.sibling}function No(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&ta(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(No(e,t,n),e=e.sibling;e!==null;)No(e,t,n),e=e.sibling}function op(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);$t(t,i,n),t[Bt]=e,t[rn]=n}catch(s){$e(e,e.return,s)}}var ui=!1,pt=!1,lu=!1,km=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function US(e,t){if(e=e.containerInfo,Sd=qo,e=Jv(e),ff(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var r=0,l=-1,o=-1,c=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(l=r+a),f!==s||i!==0&&f.nodeType!==3||(o=r+i),f.nodeType===3&&(r+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++c===a&&(l=r),h===s&&++d===i&&(o=r),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=l===-1||o===-1?null:{start:l,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(xd={focusedElem:e,selectionRange:n},qo=!1,Nt=t;Nt!==null;)if(t=Nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Nt=e;else for(;Nt!==null;){switch(t=Nt,s=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,a=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var p=Aa(n.type,a);e=i.getSnapshotBeforeUpdate(p,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(_){$e(n,n.return,_)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Td(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Td(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(C(163))}if(e=t.sibling,e!==null){e.return=t.return,Nt=e;break}Nt=t.return}}function cp(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:si(e,n),i&4&&al(5,n);break;case 1:if(si(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(r){$e(n,n.return,r)}else{var a=Aa(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){$e(n,n.return,r)}}i&64&&ap(n),i&512&&_r(n,n.return);break;case 3:if(si(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{hy(e,t)}catch(r){$e(n,n.return,r)}}break;case 27:t===null&&i&4&&op(n);case 26:case 5:si(e,n),t===null&&i&4&&rp(n),i&512&&_r(n,n.return);break;case 12:si(e,n);break;case 31:si(e,n),i&4&&fp(e,n);break;case 13:si(e,n),i&4&&hp(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=YS.bind(null,n),ux(e,n))));break;case 22:if(i=n.memoizedState!==null||ui,!i){t=t!==null&&t.memoizedState!==null||pt,a=ui;var s=pt;ui=i,(pt=t)&&!s?li(e,n,(n.subtreeFlags&8772)!==0):si(e,n),ui=a,pt=s}break;case 30:break;default:si(e,n)}}function up(e){var t=e.alternate;t!==null&&(e.alternate=null,up(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&rf(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var tt=null,nn=!1;function ai(e,t,n){for(n=n.child;n!==null;)dp(e,t,n),n=n.sibling}function dp(e,t,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Zr,n)}catch{}switch(n.tag){case 26:pt||Fn(n,t),ai(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:pt||Fn(n,t);var i=tt,a=nn;ta(n.type)&&(tt=n.stateNode,nn=!1),ai(e,t,n),Er(n.stateNode),tt=i,nn=a;break;case 5:pt||Fn(n,t);case 6:if(i=tt,a=nn,tt=null,ai(e,t,n),tt=i,nn=a,tt!==null)if(nn)try{(tt.nodeType===9?tt.body:tt.nodeName==="HTML"?tt.ownerDocument.body:tt).removeChild(n.stateNode)}catch(s){$e(n,t,s)}else try{tt.removeChild(n.stateNode)}catch(s){$e(n,t,s)}break;case 18:tt!==null&&(nn?(e=tt,Xm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Ns(e)):Xm(tt,n.stateNode));break;case 4:i=tt,a=nn,tt=n.stateNode.containerInfo,nn=!0,ai(e,t,n),tt=i,nn=a;break;case 0:case 11:case 14:case 15:Zi(2,n,t),pt||Zi(4,n,t),ai(e,t,n);break;case 1:pt||(Fn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&sp(n,t,i)),ai(e,t,n);break;case 21:ai(e,t,n);break;case 22:pt=(i=pt)||n.memoizedState!==null,ai(e,t,n),pt=i;break;default:ai(e,t,n)}}function fp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ns(e)}catch(n){$e(t,t.return,n)}}}function hp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ns(e)}catch(n){$e(t,t.return,n)}}function zS(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new km),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new km),t;default:throw Error(C(435,e.tag))}}function kl(e,t){var n=zS(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var a=GS.bind(null,e,i);i.then(a,a)}})}function en(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i],s=e,r=t,l=r;e:for(;l!==null;){switch(l.tag){case 27:if(ta(l.type)){tt=l.stateNode,nn=!1;break e}break;case 5:tt=l.stateNode,nn=!1;break e;case 3:case 4:tt=l.stateNode.containerInfo,nn=!0;break e}l=l.return}if(tt===null)throw Error(C(160));dp(s,r,a),tt=null,nn=!1,s=a.alternate,s!==null&&(s.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)mp(t,e),t=t.sibling}var qn=null;function mp(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:en(t,e),tn(e),i&4&&(Zi(3,e,e.return),al(3,e),Zi(5,e,e.return));break;case 1:en(t,e),tn(e),i&512&&(pt||n===null||Fn(n,n.return)),i&64&&ui&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var a=qn;if(en(t,e),tn(e),i&512&&(pt||n===null||Fn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(i){case"title":s=a.getElementsByTagName("title")[0],(!s||s[el]||s[Bt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=a.createElement(i),a.head.insertBefore(s,a.querySelector("head > title"))),$t(s,i,n),s[Bt]=e,Dt(s),i=s;break e;case"link":var r=eg("link","href",a).get(i+(n.href||""));if(r){for(var l=0;l<r.length;l++)if(s=r[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(l,1);break t}}s=a.createElement(i),$t(s,i,n),a.head.appendChild(s);break;case"meta":if(r=eg("meta","content",a).get(i+(n.content||""))){for(l=0;l<r.length;l++)if(s=r[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(l,1);break t}}s=a.createElement(i),$t(s,i,n),a.head.appendChild(s);break;default:throw Error(C(468,i))}s[Bt]=e,Dt(s),i=s}e.stateNode=i}else tg(a,e.type,e.stateNode);else e.stateNode=Wm(a,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?tg(a,e.type,e.stateNode):Wm(a,i,e.memoizedProps)):i===null&&e.stateNode!==null&&su(e,e.memoizedProps,n.memoizedProps)}break;case 27:en(t,e),tn(e),i&512&&(pt||n===null||Fn(n,n.return)),n!==null&&i&4&&su(e,e.memoizedProps,n.memoizedProps);break;case 5:if(en(t,e),tn(e),i&512&&(pt||n===null||Fn(n,n.return)),e.flags&32){a=e.stateNode;try{ws(a,"")}catch(p){$e(e,e.return,p)}}i&4&&e.stateNode!=null&&(a=e.memoizedProps,su(e,a,n!==null?n.memoizedProps:a)),i&1024&&(lu=!0);break;case 6:if(en(t,e),tn(e),i&4){if(e.stateNode===null)throw Error(C(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(p){$e(e,e.return,p)}}break;case 3:if(oo=null,a=qn,qn=Lo(t.containerInfo),en(t,e),qn=a,tn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ns(t.containerInfo)}catch(p){$e(e,e.return,p)}lu&&(lu=!1,gp(e));break;case 4:i=qn,qn=Lo(e.stateNode.containerInfo),en(t,e),tn(e),qn=i;break;case 12:en(t,e),tn(e);break;case 31:en(t,e),tn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,kl(e,i)));break;case 13:en(t,e),tn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(mc=mn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,kl(e,i)));break;case 22:a=e.memoizedState!==null;var o=n!==null&&n.memoizedState!==null,c=ui,d=pt;if(ui=c||a,pt=d||o,en(t,e),pt=d,ui=c,tn(e),i&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||o||ui||pt||fa(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){o=n=t;try{if(s=o.stateNode,a)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{l=o.stateNode;var f=o.memoizedProps.style,h=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(p){$e(o,o.return,p)}}}else if(t.tag===6){if(n===null){o=t;try{o.stateNode.nodeValue=a?"":o.memoizedProps}catch(p){$e(o,o.return,p)}}}else if(t.tag===18){if(n===null){o=t;try{var m=o.stateNode;a?Qm(m,!0):Qm(o.stateNode,!1)}catch(p){$e(o,o.return,p)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,kl(e,n))));break;case 19:en(t,e),tn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,kl(e,i)));break;case 30:break;case 21:break;default:en(t,e),tn(e)}}function tn(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(lp(i)){n=i;break}i=i.return}if(n==null)throw Error(C(160));switch(n.tag){case 27:var a=n.stateNode,s=ru(e);No(e,s,a);break;case 5:var r=n.stateNode;n.flags&32&&(ws(r,""),n.flags&=-33);var l=ru(e);No(e,l,r);break;case 3:case 4:var o=n.stateNode.containerInfo,c=ru(e);gd(e,c,o);break;default:throw Error(C(161))}}catch(d){$e(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;gp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function si(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)cp(e,t.alternate,t),t=t.sibling}function fa(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Zi(4,t,t.return),fa(t);break;case 1:Fn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&sp(t,t.return,n),fa(t);break;case 27:Er(t.stateNode);case 26:case 5:Fn(t,t.return),fa(t);break;case 22:t.memoizedState===null&&fa(t);break;case 30:fa(t);break;default:fa(t)}e=e.sibling}}function li(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,a=e,s=t,r=s.flags;switch(s.tag){case 0:case 11:case 15:li(a,s,n),al(4,s);break;case 1:if(li(a,s,n),i=s,a=i.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(c){$e(i,i.return,c)}if(i=s,a=i.updateQueue,a!==null){var l=i.stateNode;try{var o=a.shared.hiddenCallbacks;if(o!==null)for(a.shared.hiddenCallbacks=null,a=0;a<o.length;a++)fy(o[a],l)}catch(c){$e(i,i.return,c)}}n&&r&64&&ap(s),_r(s,s.return);break;case 27:op(s);case 26:case 5:li(a,s,n),n&&i===null&&r&4&&rp(s),_r(s,s.return);break;case 12:li(a,s,n);break;case 31:li(a,s,n),n&&r&4&&fp(a,s);break;case 13:li(a,s,n),n&&r&4&&hp(a,s);break;case 22:s.memoizedState===null&&li(a,s,n),_r(s,s.return);break;case 30:break;default:li(a,s,n)}t=t.sibling}}function Bf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&nl(n))}function Hf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e))}function zn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)vp(e,t,n,i),t=t.sibling}function vp(e,t,n,i){var a=t.flags;switch(t.tag){case 0:case 11:case 15:zn(e,t,n,i),a&2048&&al(9,t);break;case 1:zn(e,t,n,i);break;case 3:zn(e,t,n,i),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e)));break;case 12:if(a&2048){zn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,r=s.id,l=s.onPostCommit;typeof l=="function"&&l(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(o){$e(t,t.return,o)}}else zn(e,t,n,i);break;case 31:zn(e,t,n,i);break;case 13:zn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,r=t.alternate,t.memoizedState!==null?s._visibility&2?zn(e,t,n,i):wr(e,t):s._visibility&2?zn(e,t,n,i):(s._visibility|=2,Xa(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),a&2048&&Bf(r,t);break;case 24:zn(e,t,n,i),a&2048&&Hf(t.alternate,t);break;default:zn(e,t,n,i)}}function Xa(e,t,n,i,a){for(a=a&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,r=t,l=n,o=i,c=r.flags;switch(r.tag){case 0:case 11:case 15:Xa(s,r,l,o,a),al(8,r);break;case 23:break;case 22:var d=r.stateNode;r.memoizedState!==null?d._visibility&2?Xa(s,r,l,o,a):wr(s,r):(d._visibility|=2,Xa(s,r,l,o,a)),a&&c&2048&&Bf(r.alternate,r);break;case 24:Xa(s,r,l,o,a),a&&c&2048&&Hf(r.alternate,r);break;default:Xa(s,r,l,o,a)}t=t.sibling}}function wr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,a=i.flags;switch(i.tag){case 22:wr(n,i),a&2048&&Bf(i.alternate,i);break;case 24:wr(n,i),a&2048&&Hf(i.alternate,i);break;default:wr(n,i)}t=t.sibling}}var cr=8192;function Ha(e,t,n){if(e.subtreeFlags&cr)for(e=e.child;e!==null;)yp(e,t,n),e=e.sibling}function yp(e,t,n){switch(e.tag){case 26:Ha(e,t,n),e.flags&cr&&e.memoizedState!==null&&Sx(n,qn,e.memoizedState,e.memoizedProps);break;case 5:Ha(e,t,n);break;case 3:case 4:var i=qn;qn=Lo(e.stateNode.containerInfo),Ha(e,t,n),qn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=cr,cr=16777216,Ha(e,t,n),cr=i):Ha(e,t,n));break;default:Ha(e,t,n)}}function pp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function tr(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Nt=i,_p(i,e)}pp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)bp(e),e=e.sibling}function bp(e){switch(e.tag){case 0:case 11:case 15:tr(e),e.flags&2048&&Zi(9,e,e.return);break;case 3:tr(e);break;case 12:tr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ro(e)):tr(e);break;default:tr(e)}}function ro(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Nt=i,_p(i,e)}pp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Zi(8,t,t.return),ro(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ro(t));break;default:ro(t)}e=e.sibling}}function _p(e,t){for(;Nt!==null;){var n=Nt;switch(n.tag){case 0:case 11:case 15:Zi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:nl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Nt=i;else e:for(n=e;Nt!==null;){i=Nt;var a=i.sibling,s=i.return;if(up(i),i===n){Nt=null;break e}if(a!==null){a.return=s,Nt=a;break e}Nt=s}}}var LS={getCacheForType:function(e){var t=qt(bt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return qt(bt).controller.signal}},BS=typeof WeakMap=="function"?WeakMap:Map,ze=0,Ye=null,je=null,Ce=0,He=0,on=null,zi=!1,Bs=!1,qf=!1,wi=0,dt=0,Fi=0,xa=0,$f=0,hn=0,Ts=0,Sr=null,an=null,vd=!1,mc=0,wp=0,Co=1/0,Do=null,Yi=null,jt=0,Gi=null,js=null,vi=0,yd=0,pd=null,Sp=null,xr=0,bd=null;function yn(){return ze&2&&Ce!==0?Ce&-Ce:de.T!==null?Vf():Dv()}function xp(){if(hn===0)if(!(Ce&536870912)||Me){var e=jl;jl<<=1,!(jl&3932160)&&(jl=262144),hn=e}else hn=536870912;return e=bn.current,e!==null&&(e.flags|=32),hn}function sn(e,t,n){(e===Ye&&(He===2||He===9)||e.cancelPendingCommit!==null)&&(Os(e,0),Li(e,Ce,hn,!1)),Wr(e,n),(!(ze&2)||e!==Ye)&&(e===Ye&&(!(ze&2)&&(xa|=n),dt===4&&Li(e,Ce,hn,!1)),ti(e))}function Ep(e,t,n){if(ze&6)throw Error(C(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Fr(e,t),a=i?$S(e,t):ou(e,t,!0),s=i;do{if(a===0){Bs&&!i&&Li(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!HS(n)){a=ou(e,t,!1),s=!1;continue}if(a===2){if(s=t,e.errorRecoveryDisabledLanes&s)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;e:{var l=e;a=Sr;var o=l.current.memoizedState.isDehydrated;if(o&&(Os(l,r).flags|=256),r=ou(l,r,!1),r!==2){if(qf&&!o){l.errorRecoveryDisabledLanes|=s,xa|=s,a=4;break e}s=an,an=a,s!==null&&(an===null?an=s:an.push.apply(an,s))}a=r}if(s=!1,a!==2)continue}}if(a===1){Os(e,0),Li(e,t,0,!0);break}e:{switch(i=e,s=a,s){case 0:case 1:throw Error(C(345));case 4:if((t&4194048)!==t)break;case 6:Li(i,t,hn,!zi);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(C(329))}if((t&62914560)===t&&(a=mc+300-mn(),10<a)){if(Li(i,t,hn,!zi),ic(i,0,!0)!==0)break e;vi=t,i.timeoutHandle=Yp(Um.bind(null,i,n,an,Do,vd,t,hn,xa,Ts,zi,s,"Throttled",-0,0),a);break e}Um(i,n,an,Do,vd,t,hn,xa,Ts,zi,s,null,-0,0)}}break}while(!0);ti(e)}function Um(e,t,n,i,a,s,r,l,o,c,d,f,h,m){if(e.timeoutHandle=-1,f=t.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:fi},yp(t,s,f);var p=(s&62914560)===s?mc-mn():(s&4194048)===s?wp-mn():0;if(p=xx(f,p),p!==null){vi=s,e.cancelPendingCommit=p(Lm.bind(null,e,t,s,n,i,a,r,l,o,d,f,null,h,m)),Li(e,s,r,!c);return}}Lm(e,t,s,n,i,a,r,l,o)}function HS(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var a=n[i],s=a.getSnapshot;a=a.value;try{if(!pn(s(),a))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Li(e,t,n,i){t&=~$f,t&=~xa,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var a=t;0<a;){var s=31-vn(a),r=1<<s;i[s]=-1,a&=~r}n!==0&&Av(e,n,t)}function gc(){return ze&6?!0:(sl(0),!1)}function If(){if(je!==null){if(He===0)var e=je.return;else e=je,hi=Ma=null,Of(e),ms=null,Lr=0,e=je;for(;e!==null;)ip(e.alternate,e),e=e.return;je=null}}function Os(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,sx(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),vi=0,If(),Ye=e,je=n=mi(e.current,null),Ce=t,He=0,on=null,zi=!1,Bs=Fr(e,t),qf=!1,Ts=hn=$f=xa=Fi=dt=0,an=Sr=null,vd=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var a=31-vn(i),s=1<<a;t|=e[a],i&=~s}return wi=t,lc(),n}function Tp(e,t){be=null,de.H=Hr,t===Ls||t===cc?(t=hm(),He=3):t===_f?(t=hm(),He=4):He=t===zf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,on=t,je===null&&(dt=1,Oo(e,Dn(t,e.current)))}function jp(){var e=bn.current;return e===null?!0:(Ce&4194048)===Ce?Mn===null:(Ce&62914560)===Ce||Ce&536870912?e===Mn:!1}function Op(){var e=de.H;return de.H=Hr,e===null?Hr:e}function Ap(){var e=de.A;return de.A=LS,e}function Ro(){dt=4,zi||(Ce&4194048)!==Ce&&bn.current!==null||(Bs=!0),!(Fi&134217727)&&!(xa&134217727)||Ye===null||Li(Ye,Ce,hn,!1)}function ou(e,t,n){var i=ze;ze|=2;var a=Op(),s=Ap();(Ye!==e||Ce!==t)&&(Do=null,Os(e,t)),t=!1;var r=dt;e:do try{if(He!==0&&je!==null){var l=je,o=on;switch(He){case 8:If(),r=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(t=!0);var c=He;if(He=0,on=null,cs(e,l,o,c),n&&Bs){r=0;break e}break;default:c=He,He=0,on=null,cs(e,l,o,c)}}qS(),r=dt;break}catch(d){Tp(e,d)}while(!0);return t&&e.shellSuspendCounter++,hi=Ma=null,ze=i,de.H=a,de.A=s,je===null&&(Ye=null,Ce=0,lc()),r}function qS(){for(;je!==null;)Np(je)}function $S(e,t){var n=ze;ze|=2;var i=Op(),a=Ap();Ye!==e||Ce!==t?(Do=null,Co=mn()+500,Os(e,t)):Bs=Fr(e,t);e:do try{if(He!==0&&je!==null){t=je;var s=on;t:switch(He){case 1:He=0,on=null,cs(e,t,s,1);break;case 2:case 9:if(fm(s)){He=0,on=null,zm(t);break}t=function(){He!==2&&He!==9||Ye!==e||(He=7),ti(e)},s.then(t,t);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:fm(s)?(He=0,on=null,zm(t)):(He=0,on=null,cs(e,t,s,7));break;case 5:var r=null;switch(je.tag){case 26:r=je.memoizedState;case 5:case 27:var l=je;if(r?Jp(r):l.stateNode.complete){He=0,on=null;var o=l.sibling;if(o!==null)je=o;else{var c=l.return;c!==null?(je=c,vc(c)):je=null}break t}}He=0,on=null,cs(e,t,s,5);break;case 6:He=0,on=null,cs(e,t,s,6);break;case 8:If(),dt=6;break e;default:throw Error(C(462))}}IS();break}catch(d){Tp(e,d)}while(!0);return hi=Ma=null,de.H=i,de.A=a,ze=n,je!==null?0:(Ye=null,Ce=0,lc(),dt)}function IS(){for(;je!==null&&!dw();)Np(je)}function Np(e){var t=np(e.alternate,e,wi);e.memoizedProps=e.pendingProps,t===null?vc(e):je=t}function zm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Nm(n,t,t.pendingProps,t.type,void 0,Ce);break;case 11:t=Nm(n,t,t.pendingProps,t.type.render,t.ref,Ce);break;case 5:Of(t);default:ip(n,t),t=je=iy(t,wi),t=np(n,t,wi)}e.memoizedProps=e.pendingProps,t===null?vc(e):je=t}function cs(e,t,n,i){hi=Ma=null,Of(t),ms=null,Lr=0;var a=t.return;try{if(CS(e,a,t,n,Ce)){dt=1,Oo(e,Dn(n,e.current)),je=null;return}}catch(s){if(a!==null)throw je=a,s;dt=1,Oo(e,Dn(n,e.current)),je=null;return}t.flags&32768?(Me||i===1?e=!0:Bs||Ce&536870912?e=!1:(zi=e=!0,(i===2||i===9||i===3||i===6)&&(i=bn.current,i!==null&&i.tag===13&&(i.flags|=16384))),Cp(t,e)):vc(t)}function vc(e){var t=e;do{if(t.flags&32768){Cp(t,zi);return}e=t.return;var n=MS(t.alternate,t,wi);if(n!==null){je=n;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);dt===0&&(dt=5)}function Cp(e,t){do{var n=kS(e.alternate,e);if(n!==null){n.flags&=32767,je=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=n}while(e!==null);dt=6,je=null}function Lm(e,t,n,i,a,s,r,l,o){e.cancelPendingCommit=null;do yc();while(jt!==0);if(ze&6)throw Error(C(327));if(t!==null){if(t===e.current)throw Error(C(177));if(s=t.lanes|t.childLanes,s|=hf,ww(e,n,s,r,l,o),e===Ye&&(je=Ye=null,Ce=0),js=t,Gi=e,vi=n,yd=s,pd=a,Sp=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,KS(vo,function(){return Up(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=de.T,de.T=null,a=Le.p,Le.p=2,r=ze,ze|=4;try{US(e,t,n)}finally{ze=r,Le.p=a,de.T=i}}jt=1,Dp(),Rp(),Mp()}}function Dp(){if(jt===1){jt=0;var e=Gi,t=js,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=de.T,de.T=null;var i=Le.p;Le.p=2;var a=ze;ze|=4;try{mp(t,e);var s=xd,r=Jv(e.containerInfo),l=s.focusedElem,o=s.selectionRange;if(r!==l&&l&&l.ownerDocument&&Qv(l.ownerDocument.documentElement,l)){if(o!==null&&ff(l)){var c=o.start,d=o.end;if(d===void 0&&(d=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(d,l.value.length);else{var f=l.ownerDocument||document,h=f&&f.defaultView||window;if(h.getSelection){var m=h.getSelection(),p=l.textContent.length,_=Math.min(o.start,p),w=o.end===void 0?_:Math.min(o.end,p);!m.extend&&_>w&&(r=w,w=_,_=r);var y=sm(l,_),g=sm(l,w);if(y&&g&&(m.rangeCount!==1||m.anchorNode!==y.node||m.anchorOffset!==y.offset||m.focusNode!==g.node||m.focusOffset!==g.offset)){var v=f.createRange();v.setStart(y.node,y.offset),m.removeAllRanges(),_>w?(m.addRange(v),m.extend(g.node,g.offset)):(v.setEnd(g.node,g.offset),m.addRange(v))}}}}for(f=[],m=l;m=m.parentNode;)m.nodeType===1&&f.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var S=f[l];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}qo=!!Sd,xd=Sd=null}finally{ze=a,Le.p=i,de.T=n}}e.current=t,jt=2}}function Rp(){if(jt===2){jt=0;var e=Gi,t=js,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=de.T,de.T=null;var i=Le.p;Le.p=2;var a=ze;ze|=4;try{cp(e,t.alternate,t)}finally{ze=a,Le.p=i,de.T=n}}jt=3}}function Mp(){if(jt===4||jt===3){jt=0,fw();var e=Gi,t=js,n=vi,i=Sp;t.subtreeFlags&10256||t.flags&10256?jt=5:(jt=0,js=Gi=null,kp(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(Yi=null),sf(n),t=t.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Zr,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=de.T,a=Le.p,Le.p=2,de.T=null;try{for(var s=e.onRecoverableError,r=0;r<i.length;r++){var l=i[r];s(l.value,{componentStack:l.stack})}}finally{de.T=t,Le.p=a}}vi&3&&yc(),ti(e),a=e.pendingLanes,n&261930&&a&42?e===bd?xr++:(xr=0,bd=e):xr=0,sl(0)}}function kp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,nl(t)))}function yc(){return Dp(),Rp(),Mp(),Up()}function Up(){if(jt!==5)return!1;var e=Gi,t=yd;yd=0;var n=sf(vi),i=de.T,a=Le.p;try{Le.p=32>n?32:n,de.T=null,n=pd,pd=null;var s=Gi,r=vi;if(jt=0,js=Gi=null,vi=0,ze&6)throw Error(C(331));var l=ze;if(ze|=4,bp(s.current),vp(s,s.current,r,n),ze=l,sl(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Zr,s)}catch{}return!0}finally{Le.p=a,de.T=i,kp(e,t)}}function Bm(e,t,n){t=Dn(n,t),t=fd(e.stateNode,t,2),e=Vi(e,t,2),e!==null&&(Wr(e,2),ti(e))}function $e(e,t,n){if(e.tag===3)Bm(e,e,n);else for(;t!==null;){if(t.tag===3){Bm(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Yi===null||!Yi.has(i))){e=Dn(n,e),n=Py(2),i=Vi(t,n,2),i!==null&&(Zy(n,i,t,e),Wr(i,2),ti(i));break}}t=t.return}}function cu(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new BS;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(qf=!0,a.add(n),e=VS.bind(null,e,t,n),t.then(e,e))}function VS(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ye===e&&(Ce&n)===n&&(dt===4||dt===3&&(Ce&62914560)===Ce&&300>mn()-mc?!(ze&2)&&Os(e,0):$f|=n,Ts===Ce&&(Ts=0)),ti(e)}function zp(e,t){t===0&&(t=Ov()),e=Ra(e,t),e!==null&&(Wr(e,t),ti(e))}function YS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zp(e,n)}function GS(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(C(314))}i!==null&&i.delete(t),zp(e,n)}function KS(e,t){return nf(e,t)}var Mo=null,Qa=null,_d=!1,ko=!1,uu=!1,Bi=0;function ti(e){e!==Qa&&e.next===null&&(Qa===null?Mo=Qa=e:Qa=Qa.next=e),ko=!0,_d||(_d=!0,QS())}function sl(e,t){if(!uu&&ko){uu=!0;do for(var n=!1,i=Mo;i!==null;){if(e!==0){var a=i.pendingLanes;if(a===0)var s=0;else{var r=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-vn(42|e)+1)-1,s&=a&~(r&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Hm(i,s))}else s=Ce,s=ic(i,i===Ye?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Fr(i,s)||(n=!0,Hm(i,s));i=i.next}while(n);uu=!1}}function XS(){Lp()}function Lp(){ko=_d=!1;var e=0;Bi!==0&&ax()&&(e=Bi);for(var t=mn(),n=null,i=Mo;i!==null;){var a=i.next,s=Bp(i,t);s===0?(i.next=null,n===null?Mo=a:n.next=a,a===null&&(Qa=n)):(n=i,(e!==0||s&3)&&(ko=!0)),i=a}jt!==0&&jt!==5||sl(e),Bi!==0&&(Bi=0)}function Bp(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var r=31-vn(s),l=1<<r,o=a[r];o===-1?(!(l&n)||l&i)&&(a[r]=_w(l,t)):o<=t&&(e.expiredLanes|=l),s&=~l}if(t=Ye,n=Ce,n=ic(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(He===2||He===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Bc(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Fr(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Bc(i),sf(n)){case 2:case 8:n=Tv;break;case 32:n=vo;break;case 268435456:n=jv;break;default:n=vo}return i=Hp.bind(null,e),n=nf(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Bc(i),e.callbackPriority=2,e.callbackNode=null,2}function Hp(e,t){if(jt!==0&&jt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(yc()&&e.callbackNode!==n)return null;var i=Ce;return i=ic(e,e===Ye?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Ep(e,i,t),Bp(e,mn()),e.callbackNode!=null&&e.callbackNode===n?Hp.bind(null,e):null)}function Hm(e,t){if(yc())return null;Ep(e,t,!0)}function QS(){rx(function(){ze&6?nf(Ev,XS):Lp()})}function Vf(){if(Bi===0){var e=Ss;e===0&&(e=Tl,Tl<<=1,!(Tl&261888)&&(Tl=256)),Bi=e}return Bi}function qm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Zl(""+e)}function $m(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function JS(e,t,n,i,a){if(t==="submit"&&n&&n.stateNode===a){var s=qm((a[rn]||null).action),r=i.submitter;r&&(t=(t=r[rn]||null)?qm(t.formAction):r.getAttribute("formAction"),t!==null&&(s=t,r=null));var l=new ac("action","action",null,i,a);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Bi!==0){var o=r?$m(a,r):new FormData(a);ud(n,{pending:!0,data:o,method:a.method,action:s},null,o)}}else typeof s=="function"&&(l.preventDefault(),o=r?$m(a,r):new FormData(a),ud(n,{pending:!0,data:o,method:a.method,action:s},s,o))},currentTarget:a}]})}}for(var du=0;du<Fu.length;du++){var fu=Fu[du],PS=fu.toLowerCase(),ZS=fu[0].toUpperCase()+fu.slice(1);Yn(PS,"on"+ZS)}Yn(Zv,"onAnimationEnd");Yn(Fv,"onAnimationIteration");Yn(Wv,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn(hS,"onTransitionRun");Yn(mS,"onTransitionStart");Yn(gS,"onTransitionCancel");Yn(ey,"onTransitionEnd");_s("onMouseEnter",["mouseout","mouseover"]);_s("onMouseLeave",["mouseout","mouseover"]);_s("onPointerEnter",["pointerout","pointerover"]);_s("onPointerLeave",["pointerout","pointerover"]);Na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Na("onBeforeInput",["compositionend","keypress","textInput","paste"]);Na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qr));function qp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var r=i.length-1;0<=r;r--){var l=i[r],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==s&&a.isPropagationStopped())break e;s=l,a.currentTarget=c;try{s(a)}catch(d){po(d)}a.currentTarget=null,s=o}else for(r=0;r<i.length;r++){if(l=i[r],o=l.instance,c=l.currentTarget,l=l.listener,o!==s&&a.isPropagationStopped())break e;s=l,a.currentTarget=c;try{s(a)}catch(d){po(d)}a.currentTarget=null,s=o}}}}function Te(e,t){var n=t[Yu];n===void 0&&(n=t[Yu]=new Set);var i=e+"__bubble";n.has(i)||($p(t,e,2,!1),n.add(i))}function hu(e,t,n){var i=0;t&&(i|=4),$p(n,e,i,t)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function Yf(e){if(!e[Ul]){e[Ul]=!0,Rv.forEach(function(n){n!=="selectionchange"&&(FS.has(n)||hu(n,!1,e),hu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ul]||(t[Ul]=!0,hu("selectionchange",!1,t))}}function $p(e,t,n,i){switch(e0(t)){case 2:var a=jx;break;case 8:a=Ox;break;default:a=Qf}n=a.bind(null,t,n,e),a=void 0,!Ju||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function mu(e,t,n,i,a){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var l=i.stateNode.containerInfo;if(l===a)break;if(r===4)for(r=i.return;r!==null;){var o=r.tag;if((o===3||o===4)&&r.stateNode.containerInfo===a)return;r=r.return}for(;l!==null;){if(r=es(l),r===null)return;if(o=r.tag,o===5||o===6||o===26||o===27){i=s=r;continue e}l=l.parentNode}}i=i.return}qv(function(){var c=s,d=of(n),f=[];e:{var h=ty.get(e);if(h!==void 0){var m=ac,p=e;switch(e){case"keypress":if(Wl(n)===0)break e;case"keydown":case"keyup":m=Gw;break;case"focusin":p="focus",m=Vc;break;case"focusout":p="blur",m=Vc;break;case"beforeblur":case"afterblur":m=Vc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Mw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Qw;break;case Zv:case Fv:case Wv:m=zw;break;case ey:m=Pw;break;case"scroll":case"scrollend":m=Dw;break;case"wheel":m=Fw;break;case"copy":case"cut":case"paste":m=Bw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Zh;break;case"toggle":case"beforetoggle":m=eS}var _=(t&4)!==0,w=!_&&(e==="scroll"||e==="scrollend"),y=_?h!==null?h+"Capture":null:h;_=[];for(var g=c,v;g!==null;){var S=g;if(v=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||v===null||y===null||(S=Rr(g,y),S!=null&&_.push($r(g,S,v))),w)break;g=g.return}0<_.length&&(h=new m(h,p,null,n,d),f.push({event:h,listeners:_}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==Qu&&(p=n.relatedTarget||n.fromElement)&&(es(p)||p[ks]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=c,p=p?es(p):null,p!==null&&(w=Pr(p),_=p.tag,p!==w||_!==5&&_!==27&&_!==6)&&(p=null)):(m=null,p=c),m!==p)){if(_=Jh,S="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(_=Zh,S="onPointerLeave",y="onPointerEnter",g="pointer"),w=m==null?h:lr(m),v=p==null?h:lr(p),h=new _(S,g+"leave",m,n,d),h.target=w,h.relatedTarget=v,S=null,es(d)===c&&(_=new _(y,g+"enter",p,n,d),_.target=v,_.relatedTarget=w,S=_),w=S,m&&p)t:{for(_=WS,y=m,g=p,v=0,S=y;S;S=_(S))v++;S=0;for(var x=g;x;x=_(x))S++;for(;0<v-S;)y=_(y),v--;for(;0<S-v;)g=_(g),S--;for(;v--;){if(y===g||g!==null&&y===g.alternate){_=y;break t}y=_(y),g=_(g)}_=null}else _=null;m!==null&&Im(f,h,m,_,!1),p!==null&&w!==null&&Im(f,w,p,_,!0)}}e:{if(h=c?lr(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var T=tm;else if(em(h))if(Kv)T=uS;else{T=oS;var E=lS}else m=h.nodeName,!m||m.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?c&&lf(c.elementType)&&(T=tm):T=cS;if(T&&(T=T(e,c))){Gv(f,T,n,d);break e}E&&E(e,h,c),e==="focusout"&&c&&h.type==="number"&&c.memoizedProps.value!=null&&Xu(h,"number",h.value)}switch(E=c?lr(c):window,e){case"focusin":(em(E)||E.contentEditable==="true")&&(is=E,Pu=c,mr=null);break;case"focusout":mr=Pu=is=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,rm(f,n,d);break;case"selectionchange":if(fS)break;case"keydown":case"keyup":rm(f,n,d)}var j;if(df)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ns?Vv(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Iv&&n.locale!=="ko"&&(ns||A!=="onCompositionStart"?A==="onCompositionEnd"&&ns&&(j=$v()):(Ui=d,cf="value"in Ui?Ui.value:Ui.textContent,ns=!0)),E=Uo(c,A),0<E.length&&(A=new Ph(A,e,null,n,d),f.push({event:A,listeners:E}),j?A.data=j:(j=Yv(n),j!==null&&(A.data=j)))),(j=nS?iS(e,n):aS(e,n))&&(A=Uo(c,"onBeforeInput"),0<A.length&&(E=new Ph("onBeforeInput","beforeinput",null,n,d),f.push({event:E,listeners:A}),E.data=j)),JS(f,e,c,n,d)}qp(f,t)})}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Uo(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,s=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||s===null||(a=Rr(e,n),a!=null&&i.unshift($r(e,a,s)),a=Rr(e,t),a!=null&&i.push($r(e,a,s))),e.tag===3)return i;e=e.return}return[]}function WS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Im(e,t,n,i,a){for(var s=t._reactName,r=[];n!==null&&n!==i;){var l=n,o=l.alternate,c=l.stateNode;if(l=l.tag,o!==null&&o===i)break;l!==5&&l!==26&&l!==27||c===null||(o=c,a?(c=Rr(n,s),c!=null&&r.unshift($r(n,c,o))):a||(c=Rr(n,s),c!=null&&r.push($r(n,c,o)))),n=n.return}r.length!==0&&e.push({event:t,listeners:r})}var ex=/\r\n?/g,tx=/\u0000|\uFFFD/g;function Vm(e){return(typeof e=="string"?e:""+e).replace(ex,`
`).replace(tx,"")}function Ip(e,t){return t=Vm(t),Vm(e)===t}function Ie(e,t,n,i,a,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ws(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ws(e,""+i);break;case"className":Al(e,"class",i);break;case"tabIndex":Al(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Al(e,n,i);break;case"style":Hv(e,i,s);break;case"data":if(t!=="object"){Al(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Zl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&Ie(e,t,"name",a.name,a,null),Ie(e,t,"formEncType",a.formEncType,a,null),Ie(e,t,"formMethod",a.formMethod,a,null),Ie(e,t,"formTarget",a.formTarget,a,null)):(Ie(e,t,"encType",a.encType,a,null),Ie(e,t,"method",a.method,a,null),Ie(e,t,"target",a.target,a,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Zl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=fi);break;case"onScroll":i!=null&&Te("scroll",e);break;case"onScrollEnd":i!=null&&Te("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(C(61));if(n=i.__html,n!=null){if(a.children!=null)throw Error(C(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Zl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Te("beforetoggle",e),Te("toggle",e),Pl(e,"popover",i);break;case"xlinkActuate":ni(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ni(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ni(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ni(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ni(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ni(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ni(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ni(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ni(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Pl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Nw.get(n)||n,Pl(e,n,i))}}function wd(e,t,n,i,a,s){switch(n){case"style":Hv(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(C(61));if(n=i.__html,n!=null){if(a.children!=null)throw Error(C(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ws(e,i):(typeof i=="number"||typeof i=="bigint")&&ws(e,""+i);break;case"onScroll":i!=null&&Te("scroll",e);break;case"onScrollEnd":i!=null&&Te("scrollend",e);break;case"onClick":i!=null&&(e.onclick=fi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mv.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),s=e[rn]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,a),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,a);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Pl(e,n,i)}}}function $t(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Te("error",e),Te("load",e);var i=!1,a=!1,s;for(s in n)if(n.hasOwnProperty(s)){var r=n[s];if(r!=null)switch(s){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(C(137,t));default:Ie(e,t,s,r,n,null)}}a&&Ie(e,t,"srcSet",n.srcSet,n,null),i&&Ie(e,t,"src",n.src,n,null);return;case"input":Te("invalid",e);var l=s=r=a=null,o=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":a=d;break;case"type":r=d;break;case"checked":o=d;break;case"defaultChecked":c=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(C(137,t));break;default:Ie(e,t,i,d,n,null)}}zv(e,s,l,o,c,r,a,!1);return;case"select":Te("invalid",e),i=r=s=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":s=l;break;case"defaultValue":r=l;break;case"multiple":i=l;default:Ie(e,t,a,l,n,null)}t=s,n=r,e.multiple=!!i,t!=null?ds(e,!!i,t,!1):n!=null&&ds(e,!!i,n,!0);return;case"textarea":Te("invalid",e),s=a=i=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":i=l;break;case"defaultValue":a=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(C(91));break;default:Ie(e,t,r,l,n,null)}Bv(e,i,a,s);return;case"option":for(o in n)if(n.hasOwnProperty(o)&&(i=n[o],i!=null))switch(o){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ie(e,t,o,i,n,null)}return;case"dialog":Te("beforetoggle",e),Te("toggle",e),Te("cancel",e),Te("close",e);break;case"iframe":case"object":Te("load",e);break;case"video":case"audio":for(i=0;i<qr.length;i++)Te(qr[i],e);break;case"image":Te("error",e),Te("load",e);break;case"details":Te("toggle",e);break;case"embed":case"source":case"link":Te("error",e),Te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(C(137,t));default:Ie(e,t,c,i,n,null)}return;default:if(lf(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&wd(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Ie(e,t,l,i,n,null))}function nx(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,r=null,l=null,o=null,c=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":o=f;default:i.hasOwnProperty(m)||Ie(e,t,m,null,i,f)}}for(var h in i){var m=i[h];if(f=n[h],i.hasOwnProperty(h)&&(m!=null||f!=null))switch(h){case"type":s=m;break;case"name":a=m;break;case"checked":c=m;break;case"defaultChecked":d=m;break;case"value":r=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(C(137,t));break;default:m!==f&&Ie(e,t,h,m,i,f)}}Ku(e,r,l,o,c,d,s,a);return;case"select":m=r=l=h=null;for(s in n)if(o=n[s],n.hasOwnProperty(s)&&o!=null)switch(s){case"value":break;case"multiple":m=o;default:i.hasOwnProperty(s)||Ie(e,t,s,null,i,o)}for(a in i)if(s=i[a],o=n[a],i.hasOwnProperty(a)&&(s!=null||o!=null))switch(a){case"value":h=s;break;case"defaultValue":l=s;break;case"multiple":r=s;default:s!==o&&Ie(e,t,a,s,i,o)}t=l,n=r,i=m,h!=null?ds(e,!!n,h,!1):!!i!=!!n&&(t!=null?ds(e,!!n,t,!0):ds(e,!!n,n?[]:"",!1));return;case"textarea":m=h=null;for(l in n)if(a=n[l],n.hasOwnProperty(l)&&a!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ie(e,t,l,null,i,a)}for(r in i)if(a=i[r],s=n[r],i.hasOwnProperty(r)&&(a!=null||s!=null))switch(r){case"value":h=a;break;case"defaultValue":m=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(C(91));break;default:a!==s&&Ie(e,t,r,a,i,s)}Lv(e,h,m);return;case"option":for(var p in n)if(h=n[p],n.hasOwnProperty(p)&&h!=null&&!i.hasOwnProperty(p))switch(p){case"selected":e.selected=!1;break;default:Ie(e,t,p,null,i,h)}for(o in i)if(h=i[o],m=n[o],i.hasOwnProperty(o)&&h!==m&&(h!=null||m!=null))switch(o){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ie(e,t,o,h,i,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _ in n)h=n[_],n.hasOwnProperty(_)&&h!=null&&!i.hasOwnProperty(_)&&Ie(e,t,_,null,i,h);for(c in i)if(h=i[c],m=n[c],i.hasOwnProperty(c)&&h!==m&&(h!=null||m!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(C(137,t));break;default:Ie(e,t,c,h,i,m)}return;default:if(lf(t)){for(var w in n)h=n[w],n.hasOwnProperty(w)&&h!==void 0&&!i.hasOwnProperty(w)&&wd(e,t,w,void 0,i,h);for(d in i)h=i[d],m=n[d],!i.hasOwnProperty(d)||h===m||h===void 0&&m===void 0||wd(e,t,d,h,i,m);return}}for(var y in n)h=n[y],n.hasOwnProperty(y)&&h!=null&&!i.hasOwnProperty(y)&&Ie(e,t,y,null,i,h);for(f in i)h=i[f],m=n[f],!i.hasOwnProperty(f)||h===m||h==null&&m==null||Ie(e,t,f,h,i,m)}function Ym(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ix(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var a=n[i],s=a.transferSize,r=a.initiatorType,l=a.duration;if(s&&l&&Ym(r)){for(r=0,l=a.responseEnd,i+=1;i<n.length;i++){var o=n[i],c=o.startTime;if(c>l)break;var d=o.transferSize,f=o.initiatorType;d&&Ym(f)&&(o=o.responseEnd,r+=d*(o<l?1:(l-c)/(o-c)))}if(--i,t+=8*(s+r)/(a.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Sd=null,xd=null;function zo(e){return e.nodeType===9?e:e.ownerDocument}function Gm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ed(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gu=null;function ax(){var e=window.event;return e&&e.type==="popstate"?e===gu?!1:(gu=e,!0):(gu=null,!1)}var Yp=typeof setTimeout=="function"?setTimeout:void 0,sx=typeof clearTimeout=="function"?clearTimeout:void 0,Km=typeof Promise=="function"?Promise:void 0,rx=typeof queueMicrotask=="function"?queueMicrotask:typeof Km<"u"?function(e){return Km.resolve(null).then(e).catch(lx)}:Yp;function lx(e){setTimeout(function(){throw e})}function ta(e){return e==="head"}function Xm(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(a),Ns(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Er(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Er(n);for(var s=n.firstChild;s;){var r=s.nextSibling,l=s.nodeName;s[el]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=r}}else n==="body"&&Er(e.ownerDocument.body);n=a}while(n);Ns(t)}function Qm(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function Td(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Td(n),rf(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function ox(e,t,n,i){for(;e.nodeType===1;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[el])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=kn(e.nextSibling),e===null)break}return null}function cx(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=kn(e.nextSibling),e===null))return null;return e}function Gp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=kn(e.nextSibling),e===null))return null;return e}function jd(e){return e.data==="$?"||e.data==="$~"}function Od(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function ux(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function kn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ad=null;function Jm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return kn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Pm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Kp(e,t,n){switch(t=zo(n),e){case"html":if(e=t.documentElement,!e)throw Error(C(452));return e;case"head":if(e=t.head,!e)throw Error(C(453));return e;case"body":if(e=t.body,!e)throw Error(C(454));return e;default:throw Error(C(451))}}function Er(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);rf(e)}var Un=new Map,Zm=new Set;function Lo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Si=Le.d;Le.d={f:dx,r:fx,D:hx,C:mx,L:gx,m:vx,X:px,S:yx,M:bx};function dx(){var e=Si.f(),t=gc();return e||t}function fx(e){var t=Us(e);t!==null&&t.tag===5&&t.type==="form"?Hy(t):Si.r(e)}var Hs=typeof document>"u"?null:document;function Xp(e,t,n){var i=Hs;if(i&&typeof t=="string"&&t){var a=Cn(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),Zm.has(a)||(Zm.add(a),e={rel:e,crossOrigin:n,href:t},i.querySelector(a)===null&&(t=i.createElement("link"),$t(t,"link",e),Dt(t),i.head.appendChild(t)))}}function hx(e){Si.D(e),Xp("dns-prefetch",e,null)}function mx(e,t){Si.C(e,t),Xp("preconnect",e,t)}function gx(e,t,n){Si.L(e,t,n);var i=Hs;if(i&&e&&t){var a='link[rel="preload"][as="'+Cn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+Cn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+Cn(n.imageSizes)+'"]')):a+='[href="'+Cn(e)+'"]';var s=a;switch(t){case"style":s=As(e);break;case"script":s=qs(e)}Un.has(s)||(e=Ze({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Un.set(s,e),i.querySelector(a)!==null||t==="style"&&i.querySelector(rl(s))||t==="script"&&i.querySelector(ll(s))||(t=i.createElement("link"),$t(t,"link",e),Dt(t),i.head.appendChild(t)))}}function vx(e,t){Si.m(e,t);var n=Hs;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+Cn(i)+'"][href="'+Cn(e)+'"]',s=a;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=qs(e)}if(!Un.has(s)&&(e=Ze({rel:"modulepreload",href:e},t),Un.set(s,e),n.querySelector(a)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ll(s)))return}i=n.createElement("link"),$t(i,"link",e),Dt(i),n.head.appendChild(i)}}}function yx(e,t,n){Si.S(e,t,n);var i=Hs;if(i&&e){var a=us(i).hoistableStyles,s=As(e);t=t||"default";var r=a.get(s);if(!r){var l={loading:0,preload:null};if(r=i.querySelector(rl(s)))l.loading=5;else{e=Ze({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Un.get(s))&&Gf(e,n);var o=r=i.createElement("link");Dt(o),$t(o,"link",e),o._p=new Promise(function(c,d){o.onload=c,o.onerror=d}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,lo(r,t,i)}r={type:"stylesheet",instance:r,count:1,state:l},a.set(s,r)}}}function px(e,t){Si.X(e,t);var n=Hs;if(n&&e){var i=us(n).hoistableScripts,a=qs(e),s=i.get(a);s||(s=n.querySelector(ll(a)),s||(e=Ze({src:e,async:!0},t),(t=Un.get(a))&&Kf(e,t),s=n.createElement("script"),Dt(s),$t(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(a,s))}}function bx(e,t){Si.M(e,t);var n=Hs;if(n&&e){var i=us(n).hoistableScripts,a=qs(e),s=i.get(a);s||(s=n.querySelector(ll(a)),s||(e=Ze({src:e,async:!0,type:"module"},t),(t=Un.get(a))&&Kf(e,t),s=n.createElement("script"),Dt(s),$t(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(a,s))}}function Fm(e,t,n,i){var a=(a=qi.current)?Lo(a):null;if(!a)throw Error(C(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=As(n.href),n=us(a).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=As(n.href);var s=us(a).hoistableStyles,r=s.get(e);if(r||(a=a.ownerDocument||a,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,r),(s=a.querySelector(rl(e)))&&!s._p&&(r.instance=s,r.state.loading=5),Un.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Un.set(e,n),s||_x(a,e,n,r.state))),t&&i===null)throw Error(C(528,""));return r}if(t&&i!==null)throw Error(C(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=qs(n),n=us(a).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(C(444,e))}}function As(e){return'href="'+Cn(e)+'"'}function rl(e){return'link[rel="stylesheet"]['+e+"]"}function Qp(e){return Ze({},e,{"data-precedence":e.precedence,precedence:null})}function _x(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),$t(t,"link",n),Dt(t),e.head.appendChild(t))}function qs(e){return'[src="'+Cn(e)+'"]'}function ll(e){return"script[async]"+e}function Wm(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Cn(n.href)+'"]');if(i)return t.instance=i,Dt(i),i;var a=Ze({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Dt(i),$t(i,"style",a),lo(i,n.precedence,e),t.instance=i;case"stylesheet":a=As(n.href);var s=e.querySelector(rl(a));if(s)return t.state.loading|=4,t.instance=s,Dt(s),s;i=Qp(n),(a=Un.get(a))&&Gf(i,a),s=(e.ownerDocument||e).createElement("link"),Dt(s);var r=s;return r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),$t(s,"link",i),t.state.loading|=4,lo(s,n.precedence,e),t.instance=s;case"script":return s=qs(n.src),(a=e.querySelector(ll(s)))?(t.instance=a,Dt(a),a):(i=n,(a=Un.get(s))&&(i=Ze({},n),Kf(i,a)),e=e.ownerDocument||e,a=e.createElement("script"),Dt(a),$t(a,"link",i),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(C(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,lo(i,n.precedence,e));return t.instance}function lo(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=i.length?i[i.length-1]:null,s=a,r=0;r<i.length;r++){var l=i[r];if(l.dataset.precedence===t)s=l;else if(s!==a)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Gf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Kf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var oo=null;function eg(e,t,n){if(oo===null){var i=new Map,a=oo=new Map;a.set(n,i)}else a=oo,i=a.get(n),i||(i=new Map,a.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var s=n[a];if(!(s[el]||s[Bt]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var r=s.getAttribute(t)||"";r=e+r;var l=i.get(r);l?l.push(s):i.set(r,[s])}}return i}function tg(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function wx(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Jp(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function Sx(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var a=As(i.href),s=t.querySelector(rl(a));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Bo.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,Dt(s);return}s=t.ownerDocument||t,i=Qp(i),(a=Un.get(a))&&Gf(i,a),s=s.createElement("link"),Dt(s);var r=s;r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),$t(s,"link",i),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Bo.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var vu=0;function xx(e,t){return e.stylesheets&&e.count===0&&co(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&co(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&vu===0&&(vu=62500*ix());var a=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&co(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>vu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(a)}}:null}function Bo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)co(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ho=null;function co(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ho=new Map,t.forEach(Ex,e),Ho=null,Bo.call(e))}function Ex(e,t){if(!(t.state.loading&4)){var n=Ho.get(e);if(n)var i=n.get(null);else{n=new Map,Ho.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var r=a[s];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),i=r)}i&&n.set(null,i)}a=t.instance,r=a.getAttribute("data-precedence"),s=n.get(r)||i,s===i&&n.set(null,a),n.set(r,a),this.count++,i=Bo.bind(this),a.addEventListener("load",i),a.addEventListener("error",i),s?s.parentNode.insertBefore(a,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var Ir={$$typeof:di,Provider:null,Consumer:null,_currentValue:ba,_currentValue2:ba,_threadCount:0};function Tx(e,t,n,i,a,s,r,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hc(0),this.hiddenUpdates=Hc(null),this.identifierPrefix=i,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Pp(e,t,n,i,a,s,r,l,o,c,d,f){return e=new Tx(e,t,n,r,o,c,d,f,l),t=1,s===!0&&(t|=24),s=un(3,null,null,t),e.current=s,s.stateNode=e,t=pf(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},wf(s),e}function Zp(e){return e?(e=rs,e):rs}function Fp(e,t,n,i,a,s){a=Zp(a),i.context===null?i.context=a:i.pendingContext=a,i=Ii(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Vi(e,i,t),n!==null&&(sn(n,e,t),vr(n,e,t))}function ng(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xf(e,t){ng(e,t),(e=e.alternate)&&ng(e,t)}function Wp(e){if(e.tag===13||e.tag===31){var t=Ra(e,67108864);t!==null&&sn(t,e,67108864),Xf(e,67108864)}}function ig(e){if(e.tag===13||e.tag===31){var t=yn();t=af(t);var n=Ra(e,t);n!==null&&sn(n,e,t),Xf(e,t)}}var qo=!0;function jx(e,t,n,i){var a=de.T;de.T=null;var s=Le.p;try{Le.p=2,Qf(e,t,n,i)}finally{Le.p=s,de.T=a}}function Ox(e,t,n,i){var a=de.T;de.T=null;var s=Le.p;try{Le.p=8,Qf(e,t,n,i)}finally{Le.p=s,de.T=a}}function Qf(e,t,n,i){if(qo){var a=Nd(i);if(a===null)mu(e,t,i,$o,n),ag(e,i);else if(Nx(a,e,t,n,i))i.stopPropagation();else if(ag(e,i),t&4&&-1<Ax.indexOf(e)){for(;a!==null;){var s=Us(a);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var r=ua(s.pendingLanes);if(r!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;r;){var o=1<<31-vn(r);l.entanglements[1]|=o,r&=~o}ti(s),!(ze&6)&&(Co=mn()+500,sl(0))}}break;case 31:case 13:l=Ra(s,2),l!==null&&sn(l,s,2),gc(),Xf(s,2)}if(s=Nd(i),s===null&&mu(e,t,i,$o,n),s===a)break;a=s}a!==null&&i.stopPropagation()}else mu(e,t,i,null,n)}}function Nd(e){return e=of(e),Jf(e)}var $o=null;function Jf(e){if($o=null,e=es(e),e!==null){var t=Pr(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=bv(t),e!==null)return e;e=null}else if(n===31){if(e=_v(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return $o=e,null}function e0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hw()){case Ev:return 2;case Tv:return 8;case vo:case mw:return 32;case jv:return 268435456;default:return 32}default:return 32}}var Cd=!1,Ki=null,Xi=null,Qi=null,Vr=new Map,Yr=new Map,Ri=[],Ax="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ag(e,t){switch(e){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Vr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(t.pointerId)}}function nr(e,t,n,i,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[a]},t!==null&&(t=Us(t),t!==null&&Wp(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Nx(e,t,n,i,a){switch(t){case"focusin":return Ki=nr(Ki,e,t,n,i,a),!0;case"dragenter":return Xi=nr(Xi,e,t,n,i,a),!0;case"mouseover":return Qi=nr(Qi,e,t,n,i,a),!0;case"pointerover":var s=a.pointerId;return Vr.set(s,nr(Vr.get(s)||null,e,t,n,i,a)),!0;case"gotpointercapture":return s=a.pointerId,Yr.set(s,nr(Yr.get(s)||null,e,t,n,i,a)),!0}return!1}function t0(e){var t=es(e.target);if(t!==null){var n=Pr(t);if(n!==null){if(t=n.tag,t===13){if(t=bv(n),t!==null){e.blockedOn=t,Ih(e.priority,function(){ig(n)});return}}else if(t===31){if(t=_v(n),t!==null){e.blockedOn=t,Ih(e.priority,function(){ig(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Nd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Qu=i,n.target.dispatchEvent(i),Qu=null}else return t=Us(n),t!==null&&Wp(t),e.blockedOn=n,!1;t.shift()}return!0}function sg(e,t,n){uo(e)&&n.delete(t)}function Cx(){Cd=!1,Ki!==null&&uo(Ki)&&(Ki=null),Xi!==null&&uo(Xi)&&(Xi=null),Qi!==null&&uo(Qi)&&(Qi=null),Vr.forEach(sg),Yr.forEach(sg)}function zl(e,t){e.blockedOn===t&&(e.blockedOn=null,Cd||(Cd=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,Cx)))}var Ll=null;function rg(e){Ll!==e&&(Ll=e,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,function(){Ll===e&&(Ll=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],a=e[t+2];if(typeof i!="function"){if(Jf(i||n)===null)continue;break}var s=Us(n);s!==null&&(e.splice(t,3),t-=3,ud(s,{pending:!0,data:a,method:n.method,action:i},i,a))}}))}function Ns(e){function t(o){return zl(o,e)}Ki!==null&&zl(Ki,e),Xi!==null&&zl(Xi,e),Qi!==null&&zl(Qi,e),Vr.forEach(t),Yr.forEach(t);for(var n=0;n<Ri.length;n++){var i=Ri[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Ri.length&&(n=Ri[0],n.blockedOn===null);)t0(n),n.blockedOn===null&&Ri.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var a=n[i],s=n[i+1],r=a[rn]||null;if(typeof s=="function")r||rg(n);else if(r){var l=null;if(s&&s.hasAttribute("formAction")){if(a=s,r=s[rn]||null)l=r.formAction;else if(Jf(a)!==null)continue}else l=r.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),rg(n)}}}function n0(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(r){return a=r})},focusReset:"manual",scroll:"manual"})}function t(){a!==null&&(a(),a=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),a!==null&&(a(),a=null)}}}function Pf(e){this._internalRoot=e}pc.prototype.render=Pf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(C(409));var n=t.current,i=yn();Fp(n,i,e,t,null,null)};pc.prototype.unmount=Pf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fp(e.current,2,null,e,null,null),gc(),t[ks]=null}};function pc(e){this._internalRoot=e}pc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ri.length&&t!==0&&t<Ri[n].priority;n++);Ri.splice(n,0,e),n===0&&t0(e)}};var lg=yv.version;if(lg!=="19.2.0")throw Error(C(527,lg,"19.2.0"));Le.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(C(188)):(e=Object.keys(e).join(","),Error(C(268,e)));return e=rw(t),e=e!==null?wv(e):null,e=e===null?null:e.stateNode,e};var Dx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:de,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Zr=Bl.inject(Dx),gn=Bl}catch{}}tc.createRoot=function(e,t){if(!pv(e))throw Error(C(299));var n=!1,i="",a=Xy,s=Qy,r=Jy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Pp(e,1,!1,null,null,n,i,null,a,s,r,n0),e[ks]=t.current,Yf(e),new Pf(t)};tc.hydrateRoot=function(e,t,n){if(!pv(e))throw Error(C(299));var i=!1,a="",s=Xy,r=Qy,l=Jy,o=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(o=n.formState)),t=Pp(e,1,!0,t,n??null,i,a,o,s,r,l,n0),t.context=Zp(null),n=t.current,i=yn(),i=af(i),a=Ii(i),a.callback=null,Vi(n,a,i),n=i,t.current.lanes=n,Wr(t,n),ti(t),e[ks]=t.current,Yf(e),new pc(t)};tc.version="19.2.0";function i0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i0)}catch(e){console.error(e)}}i0(),dv.exports=tc;var Rx=dv.exports,Dd=function(e,t){return Dd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},Dd(e,t)};function a0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Dd(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Io=function(){return Io=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Io.apply(this,arguments)};function $s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n}function s0(e,t,n,i){var a=arguments.length,s=a<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,n,s):r(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s}function r0(e,t){return function(n,i){t(n,i,e)}}function l0(e,t,n,i,a,s){function r(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var l=i.kind,o=l==="getter"?"get":l==="setter"?"set":"value",c=!t&&e?i.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),f,h=!1,m=n.length-1;m>=0;m--){var p={};for(var _ in i)p[_]=_==="access"?{}:i[_];for(var _ in i.access)p.access[_]=i.access[_];p.addInitializer=function(y){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(r(y||null))};var w=(0,n[m])(l==="accessor"?{get:d.get,set:d.set}:d[o],p);if(l==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(f=r(w.get))&&(d.get=f),(f=r(w.set))&&(d.set=f),(f=r(w.init))&&a.unshift(f)}else(f=r(w))&&(l==="field"?a.unshift(f):d[o]=f)}c&&Object.defineProperty(c,i.name,d),h=!0}function o0(e,t,n){for(var i=arguments.length>2,a=0;a<t.length;a++)n=i?t[a].call(e,n):t[a].call(e);return i?n:void 0}function c0(e){return typeof e=="symbol"?e:"".concat(e)}function u0(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function d0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function J(e,t,n,i){function a(s){return s instanceof n?s:new n(function(r){r(s)})}return new(n||(n=Promise))(function(s,r){function l(d){try{c(i.next(d))}catch(f){r(f)}}function o(d){try{c(i.throw(d))}catch(f){r(f)}}function c(d){d.done?s(d.value):a(d.value).then(l,o)}c((i=i.apply(e,t||[])).next())})}function f0(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,r=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return r.next=l(0),r.throw=l(1),r.return=l(2),typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function l(c){return function(d){return o([c,d])}}function o(c){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,c[0]&&(n=0)),n;)try{if(i=1,a&&(s=c[0]&2?a.return:c[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,c[1])).done)return s;switch(a=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,a=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(d){c=[6,d],a=0}finally{i=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var bc=Object.create?function(e,t,n,i){i===void 0&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]};function h0(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&bc(t,e,n)}function Vo(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zf(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),a,s=[],r;try{for(;(t===void 0||t-- >0)&&!(a=i.next()).done;)s.push(a.value)}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function m0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Zf(arguments[t]));return e}function g0(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),a=0,t=0;t<n;t++)for(var s=arguments[t],r=0,l=s.length;r<l;r++,a++)i[a]=s[r];return i}function v0(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,s;i<a;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}function Cs(e){return this instanceof Cs?(this.v=e,this):new Cs(e)}function y0(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",r),a[Symbol.asyncIterator]=function(){return this},a;function r(m){return function(p){return Promise.resolve(p).then(m,f)}}function l(m,p){i[m]&&(a[m]=function(_){return new Promise(function(w,y){s.push([m,_,w,y])>1||o(m,_)})},p&&(a[m]=p(a[m])))}function o(m,p){try{c(i[m](p))}catch(_){h(s[0][3],_)}}function c(m){m.value instanceof Cs?Promise.resolve(m.value.v).then(d,f):h(s[0][2],m)}function d(m){o("next",m)}function f(m){o("throw",m)}function h(m,p){m(p),s.shift(),s.length&&o(s[0][0],s[0][1])}}function p0(e){var t,n;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,s){t[a]=e[a]?function(r){return(n=!n)?{value:Cs(e[a](r)),done:!1}:s?s(r):r}:s}}function b0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Vo=="function"?Vo(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(r){return new Promise(function(l,o){r=e[s](r),a(l,o,r.done,r.value)})}}function a(s,r,l,o){Promise.resolve(o).then(function(c){s({value:c,done:l})},r)}}function _0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Mx=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Rd=function(e){return Rd=Object.getOwnPropertyNames||function(t){var n=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[n.length]=i);return n},Rd(e)};function w0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Rd(e),i=0;i<n.length;i++)n[i]!=="default"&&bc(t,e,n[i]);return Mx(t,e),t}function S0(e){return e&&e.__esModule?e:{default:e}}function x0(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)}function E0(e,t,n,i,a){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?a.call(e,n):a?a.value=n:t.set(e,n),n}function T0(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function j0(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],n&&(a=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");a&&(i=function(){try{a.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t}var kx=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var i=new Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function O0(e){function t(s){e.error=e.hasError?new kx(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var n,i=0;function a(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(a);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(s).then(a,function(r){return t(r),a()})}else i|=1}catch(r){t(r)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function A0(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,a,s,r){return i?t?".jsx":".js":a&&(!s||!r)?n:a+s+"."+r.toLowerCase()+"js"}):e}const Ux={__extends:a0,__assign:Io,__rest:$s,__decorate:s0,__param:r0,__esDecorate:l0,__runInitializers:o0,__propKey:c0,__setFunctionName:u0,__metadata:d0,__awaiter:J,__generator:f0,__createBinding:bc,__exportStar:h0,__values:Vo,__read:Zf,__spread:m0,__spreadArrays:g0,__spreadArray:v0,__await:Cs,__asyncGenerator:y0,__asyncDelegator:p0,__asyncValues:b0,__makeTemplateObject:_0,__importStar:w0,__importDefault:S0,__classPrivateFieldGet:x0,__classPrivateFieldSet:E0,__classPrivateFieldIn:T0,__addDisposableResource:j0,__disposeResources:O0,__rewriteRelativeImportExtension:A0},zx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:j0,get __assign(){return Io},__asyncDelegator:p0,__asyncGenerator:y0,__asyncValues:b0,__await:Cs,__awaiter:J,__classPrivateFieldGet:x0,__classPrivateFieldIn:T0,__classPrivateFieldSet:E0,__createBinding:bc,__decorate:s0,__disposeResources:O0,__esDecorate:l0,__exportStar:h0,__extends:a0,__generator:f0,__importDefault:S0,__importStar:w0,__makeTemplateObject:_0,__metadata:d0,__param:r0,__propKey:c0,__read:Zf,__rest:$s,__rewriteRelativeImportExtension:A0,__runInitializers:o0,__setFunctionName:u0,__spread:m0,__spreadArray:v0,__spreadArrays:g0,__values:Vo,default:Ux},Symbol.toStringTag,{value:"Module"})),Lx="modulepreload",Bx=function(e){return"/todo-note/"+e},og={},Is=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));a=Promise.allSettled(n.map(o=>{if(o=Bx(o),o in og)return;og[o]=!0;const c=o.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":Lx,c||(f.as="script"),f.crossOrigin="",f.href=o,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}function s(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return a.then(r=>{for(const l of r||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},Hx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Is(async()=>{const{default:i}=await Promise.resolve().then(()=>ka);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)};class Ff extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class cg extends Ff{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ug extends Ff{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class dg extends Ff{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Md;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Md||(Md={}));class qx{constructor(t,{headers:n={},customFetch:i,region:a=Md.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=Hx(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return J(this,arguments,void 0,function*(n,i={}){var a;try{const{headers:s,method:r,body:l,signal:o}=i;let c={},{region:d}=i;d||(d=this.region);const f=new URL(`${this.url}/${n}`);d&&d!=="any"&&(c["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let h;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(c["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)):h=l;const m=yield this.fetch(f.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h,signal:o}).catch(y=>{throw y.name==="AbortError"?y:new cg(y)}),p=m.headers.get("x-relay-error");if(p&&p==="true")throw new ug(m);if(!m.ok)throw new dg(m);let _=((a=m.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return _==="application/json"?w=yield m.json():_==="application/octet-stream"||_==="application/pdf"?w=yield m.blob():_==="text/event-stream"?w=m:_==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new cg(s)}:{data:null,error:s,response:s instanceof dg||s instanceof ug?s.context:void 0}}})}}var Qt={};const Vs=tv(zx);var Hl={},ql={},$l={},Il={},Vl={},$x=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ds=$x();const Ix=Ds.fetch,N0=Ds.fetch.bind(Ds),C0=Ds.Headers,Vx=Ds.Request,Yx=Ds.Response,ka=Object.freeze(Object.defineProperty({__proto__:null,Headers:C0,Request:Vx,Response:Yx,default:N0,fetch:Ix},Symbol.toStringTag,{value:"Module"})),Gx=tv(ka);var Yl={},fg;function D0(){if(fg)return Yl;fg=1,Object.defineProperty(Yl,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Yl.default=e,Yl}var hg;function R0(){if(hg)return Vl;hg=1,Object.defineProperty(Vl,"__esModule",{value:!0});const e=Vs,t=e.__importDefault(Gx),n=e.__importDefault(D0());class i{constructor(s){var r,l;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(r=s.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=s.signal,this.isMaybeSingle=(l=s.isMaybeSingle)!==null&&l!==void 0?l:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,r){return this.headers=new Headers(this.headers),this.headers.set(s,r),this}then(s,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,f,h,m;let p=null,_=null,w=null,y=c.status,g=c.statusText;if(c.ok){if(this.method!=="HEAD"){const T=await c.text();T===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?_=T:_=JSON.parse(T))}const S=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),x=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");S&&x&&x.length>1&&(w=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(p={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,w=null,y=406,g="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const S=await c.text();try{p=JSON.parse(S),Array.isArray(p)&&c.status===404&&(_=[],p=null,y=200,g="OK")}catch{c.status===404&&S===""?(y=204,g="No Content"):p={message:S}}if(p&&this.isMaybeSingle&&(!((m=p==null?void 0:p.details)===null||m===void 0)&&m.includes("0 rows"))&&(p=null,y=200,g="OK"),p&&this.shouldThrowOnError)throw new n.default(p)}return{error:p,data:_,count:w,status:y,statusText:g}});return this.shouldThrowOnError||(o=o.catch(c=>{var d,f,h;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),o.then(s,r)}returns(){return this}overrideTypes(){return this}}return Vl.default=i,Vl}var mg;function M0(){if(mg)return Il;mg=1,Object.defineProperty(Il,"__esModule",{value:!0});const t=Vs.__importDefault(R0());class n extends t.default{select(a){let s=!1;const r=(a??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:s=!0,nullsFirst:r,foreignTable:l,referencedTable:o=l}={}){const c=o?`${o}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${a}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:s,referencedTable:r=s}={}){const l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,s,{foreignTable:r,referencedTable:l=r}={}){const o=typeof l>"u"?"offset":`${l}.offset`,c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${a}`),this.url.searchParams.set(c,`${s-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:s=!1,settings:r=!1,buffers:l=!1,wal:o=!1,format:c="text"}={}){var d;const f=[a?"analyze":null,s?"verbose":null,r?"settings":null,l?"buffers":null,o?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${h}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Il.default=n,Il}var gg;function Wf(){if(gg)return $l;gg=1,Object.defineProperty($l,"__esModule",{value:!0});const t=Vs.__importDefault(M0()),n=new RegExp("[,()]");class i extends t.default{eq(s,r){return this.url.searchParams.append(s,`eq.${r}`),this}neq(s,r){return this.url.searchParams.append(s,`neq.${r}`),this}gt(s,r){return this.url.searchParams.append(s,`gt.${r}`),this}gte(s,r){return this.url.searchParams.append(s,`gte.${r}`),this}lt(s,r){return this.url.searchParams.append(s,`lt.${r}`),this}lte(s,r){return this.url.searchParams.append(s,`lte.${r}`),this}like(s,r){return this.url.searchParams.append(s,`like.${r}`),this}likeAllOf(s,r){return this.url.searchParams.append(s,`like(all).{${r.join(",")}}`),this}likeAnyOf(s,r){return this.url.searchParams.append(s,`like(any).{${r.join(",")}}`),this}ilike(s,r){return this.url.searchParams.append(s,`ilike.${r}`),this}ilikeAllOf(s,r){return this.url.searchParams.append(s,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(s,r){return this.url.searchParams.append(s,`ilike(any).{${r.join(",")}}`),this}is(s,r){return this.url.searchParams.append(s,`is.${r}`),this}in(s,r){const l=Array.from(new Set(r)).map(o=>typeof o=="string"&&n.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,r){return typeof r=="string"?this.url.searchParams.append(s,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(s,`cs.{${r.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(r)}`),this}containedBy(s,r){return typeof r=="string"?this.url.searchParams.append(s,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(s,`cd.{${r.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(r)}`),this}rangeGt(s,r){return this.url.searchParams.append(s,`sr.${r}`),this}rangeGte(s,r){return this.url.searchParams.append(s,`nxl.${r}`),this}rangeLt(s,r){return this.url.searchParams.append(s,`sl.${r}`),this}rangeLte(s,r){return this.url.searchParams.append(s,`nxr.${r}`),this}rangeAdjacent(s,r){return this.url.searchParams.append(s,`adj.${r}`),this}overlaps(s,r){return typeof r=="string"?this.url.searchParams.append(s,`ov.${r}`):this.url.searchParams.append(s,`ov.{${r.join(",")}}`),this}textSearch(s,r,{config:l,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${c}fts${d}.${r}`),this}match(s){return Object.entries(s).forEach(([r,l])=>{this.url.searchParams.append(r,`eq.${l}`)}),this}not(s,r,l){return this.url.searchParams.append(s,`not.${r}.${l}`),this}or(s,{foreignTable:r,referencedTable:l=r}={}){const o=l?`${l}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,r,l){return this.url.searchParams.append(s,`${r}.${l}`),this}}return $l.default=i,$l}var vg;function k0(){if(vg)return ql;vg=1,Object.defineProperty(ql,"__esModule",{value:!0});const t=Vs.__importDefault(Wf());class n{constructor(a,{headers:s={},schema:r,fetch:l}){this.url=a,this.headers=new Headers(s),this.schema=r,this.fetch=l}select(a,s){const{head:r=!1,count:l}=s??{},o=r?"HEAD":"GET";let c=!1;const d=(a??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:s,defaultToNull:r=!0}={}){var l;const o="POST";if(s&&this.headers.append("Prefer",`count=${s}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const c=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:s,ignoreDuplicates:r=!1,count:l,defaultToNull:o=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),l&&this.headers.append("Prefer",`count=${l}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(a,{count:s}={}){var r;const l="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:a}={}){var s;const r="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return ql.default=n,ql}var yg;function Kx(){if(yg)return Hl;yg=1,Object.defineProperty(Hl,"__esModule",{value:!0});const e=Vs,t=e.__importDefault(k0()),n=e.__importDefault(Wf());class i{constructor(s,{headers:r={},schema:l,fetch:o}={}){this.url=s,this.headers=new Headers(r),this.schemaName=l,this.fetch=o}from(s){const r=new URL(`${this.url}/${s}`);return new t.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new i(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,r={},{head:l=!1,get:o=!1,count:c}={}){var d;let f;const h=new URL(`${this.url}/rpc/${s}`);let m;l||o?(f=l?"HEAD":"GET",Object.entries(r).filter(([_,w])=>w!==void 0).map(([_,w])=>[_,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([_,w])=>{h.searchParams.append(_,w)})):(f="POST",m=r);const p=new Headers(this.headers);return c&&p.set("Prefer",`count=${c}`),new n.default({method:f,url:h,headers:p,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Hl.default=i,Hl}Object.defineProperty(Qt,"__esModule",{value:!0});var U0=Qt.PostgrestError=G0=Qt.PostgrestBuilder=V0=Qt.PostgrestTransformBuilder=$0=Qt.PostgrestFilterBuilder=H0=Qt.PostgrestQueryBuilder=L0=Qt.PostgrestClient=void 0;const Ys=Vs,z0=Ys.__importDefault(Kx());var L0=Qt.PostgrestClient=z0.default;const B0=Ys.__importDefault(k0());var H0=Qt.PostgrestQueryBuilder=B0.default;const q0=Ys.__importDefault(Wf());var $0=Qt.PostgrestFilterBuilder=q0.default;const I0=Ys.__importDefault(M0());var V0=Qt.PostgrestTransformBuilder=I0.default;const Y0=Ys.__importDefault(R0());var G0=Qt.PostgrestBuilder=Y0.default;const K0=Ys.__importDefault(D0());U0=Qt.PostgrestError=K0.default;var X0=Qt.default={PostgrestClient:z0.default,PostgrestQueryBuilder:B0.default,PostgrestFilterBuilder:q0.default,PostgrestTransformBuilder:I0.default,PostgrestBuilder:Y0.default,PostgrestError:K0.default};const Xx=z_({__proto__:null,get PostgrestBuilder(){return G0},get PostgrestClient(){return L0},get PostgrestError(){return U0},get PostgrestFilterBuilder(){return $0},get PostgrestQueryBuilder(){return H0},get PostgrestTransformBuilder(){return V0},default:X0},[Qt]),{PostgrestClient:Qx,PostgrestQueryBuilder:UO,PostgrestFilterBuilder:zO,PostgrestTransformBuilder:LO,PostgrestBuilder:BO,PostgrestError:HO}=X0||Xx;class Jx{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Px="2.78.0",Zx=`realtime-js/${Px}`,Fx="1.0.0",kd=1e4,Wx=1e3,eE=100;var Tr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Tr||(Tr={}));var Et;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Et||(Et={}));var $n;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})($n||($n={}));var Ud;(function(e){e.websocket="websocket"})(Ud||(Ud={}));var ga;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ga||(ga={}));class tE{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,n,i)}_decodeBroadcast(t,n,i){const a=n.getUint8(1),s=n.getUint8(2);let r=this.HEADER_LENGTH+2;const l=i.decode(t.slice(r,r+a));r=r+a;const o=i.decode(t.slice(r,r+s));r=r+s;const c=JSON.parse(i.decode(t.slice(r,t.byteLength)));return{ref:null,topic:l,event:o,payload:c}}}class Q0{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ke||(Ke={}));const pg=(e,t,n={})=>{var i;const a=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((s,r)=>(s[r]=nE(r,e,t,a),s),{}):{}},nE=(e,t,n,i)=>{const a=t.find(l=>l.name===e),s=a==null?void 0:a.type,r=n[e];return s&&!i.includes(s)?J0(s,r):zd(r)},J0=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return rE(t,n)}switch(e){case Ke.bool:return iE(t);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return aE(t);case Ke.json:case Ke.jsonb:return sE(t);case Ke.timestamp:return lE(t);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return zd(t);default:return zd(t)}},zd=e=>e,iE=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},aE=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},sE=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},rE=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let s;const r=e.slice(1,n);try{s=JSON.parse("["+r+"]")}catch{s=r?r.split(","):[]}return s.map(l=>J0(t,l))}return e},lE=e=>typeof e=="string"?e.replace(" ","T"):e,P0=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class yu{constructor(t,n,i={},a=kd){this.channel=t,this.event=n,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var bg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(bg||(bg={}));class jr{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:s,onLeave:r,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jr.syncState(this.state,a,s,r),this.pendingDiffs.forEach(o=>{this.state=jr.syncDiff(this.state,o,s,r)}),this.pendingDiffs=[],l()}),this.channel._on(i.diff,{},a=>{const{onJoin:s,onLeave:r,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=jr.syncDiff(this.state,a,s,r),l())}),this.onJoin((a,s,r)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:r})}),this.onLeave((a,s,r)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,a){const s=this.cloneDeep(t),r=this.transformState(n),l={},o={};return this.map(s,(c,d)=>{r[c]||(o[c]=d)}),this.map(r,(c,d)=>{const f=s[c];if(f){const h=d.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),p=d.filter(w=>m.indexOf(w.presence_ref)<0),_=f.filter(w=>h.indexOf(w.presence_ref)<0);p.length>0&&(l[c]=p),_.length>0&&(o[c]=_)}else l[c]=d}),this.syncDiff(s,{joins:l,leaves:o},i,a)}static syncDiff(t,n,i,a){const{joins:s,leaves:r}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(s,(l,o)=>{var c;const d=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(o),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}i(l,d,o)}),this.map(r,(l,o)=>{let c=t[l];if(!c)return;const d=o.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=c,a(l,c,o),c.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const a=t[i];return"metas"in a?n[i]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[i]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _g;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(_g||(_g={}));var Or;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Or||(Or={}));var oi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(oi||(oi={}));class eh{constructor(t,n={config:{}},i){var a,s;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new yu(this,$n.join,this.params,this.timeout),this.rejoinTimer=new Q0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Et.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Et.errored,this.rejoinTimer.scheduleTimeout())}),this._on($n.reply,{},(r,l)=>{this._trigger(this._replyEventName(l),r)}),this.presence=new jr(this),this.broadcastEndpointURL=P0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,a,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Et.closed){const{config:{broadcast:r,presence:l,private:o}}=this.params,c=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Or.PRESENCE]&&this.bindings[Or.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},h={broadcast:r,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:o};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(oi.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(oi.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var p;if(this.socket.setAuth(),m===void 0){t==null||t(oi.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,w=(p=_==null?void 0:_.length)!==null&&p!==void 0?p:0,y=[];for(let g=0;g<w;g++){const v=_[g],{filter:{event:S,schema:x,table:T,filter:E}}=v,j=m&&m[g];if(j&&j.event===S&&j.schema===x&&j.table===T&&j.filter===E)y.push(Object.assign(Object.assign({},v),{id:j.id}));else{this.unsubscribe(),this.state=Et.errored,t==null||t(oi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(oi.SUBSCRIBED);return}}).receive("error",m=>{this.state=Et.errored,t==null||t(oi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(oi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===Et.joined&&t===Or.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var a;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const r={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,r,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let o=l.statusText;try{const c=await l.json();o=c.error||c.message||o}catch{}return Promise.reject(new Error(o))}async send(t,n={}){var i,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:r}=t,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:r,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var r,l,o;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((o=(l=(r=this.params)===null||r===void 0?void 0:r.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Et.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($n.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new yu(this,$n.leave,{},t),i.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Et.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const a=new AbortController,s=setTimeout(()=>a.abort(),i),r=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(s),r}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new yu(this,t,n,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>eE){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var a,s;const r=t.toLocaleLowerCase(),{close:l,error:o,leave:c,join:d}=$n;if(i&&[l,o,c,d].indexOf(r)>=0&&i!==this._joinRef())return;let h=this._onMessage(r,n,i);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var p,_,w;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((w=(_=m.filter)===null||_===void 0?void 0:_.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===r}).map(m=>m.callback(h,i)):(s=this.bindings[r])===null||s===void 0||s.filter(m=>{var p,_,w,y,g,v;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in m){const S=m.id,x=(p=m.filter)===null||p===void 0?void 0:p.event;return S&&((_=n.ids)===null||_===void 0?void 0:_.includes(S))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(g=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===r}).map(m=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:_,table:w,commit_timestamp:y,type:g,errors:v}=p;h=Object.assign(Object.assign({},{schema:_,table:w,commit_timestamp:y,eventType:g,new:{},old:{},errors:v}),this._getPayloadRecords(p))}m.callback(h,i)})}_isClosed(){return this.state===Et.closed}_isJoined(){return this.state===Et.joined}_isJoining(){return this.state===Et.joining}_isLeaving(){return this.state===Et.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const a=t.toLocaleLowerCase(),s={type:a,filter:n,callback:i};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&eh.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on($n.close,{},t)}_onError(t){this._on($n.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Et.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=pg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=pg(t.columns,t.old_record)),n}}const pu=()=>{},Gl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},oE=[1e3,2e3,5e3,1e4],cE=1e4,uE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dE{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=kd,this.transport=null,this.heartbeatIntervalMs=Gl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=pu,this.ref=0,this.reconnectTimer=null,this.logger=pu,this.conn=null,this.sendBuffer=[],this.serializer=new tE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...r)=>Is(async()=>{const{default:l}=await Promise.resolve().then(()=>ka);return{default:l}},void 0).then(({default:l})=>l(...r)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...r)=>s(...r)},!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Ud.websocket}`,this.httpEndpoint=P0(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Jx.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Fx}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Tr.connecting:return ga.Connecting;case Tr.open:return ga.Open;case Tr.closing:return ga.Closing;default:return ga.Closed}}isConnected(){return this.connectionState()===ga.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===i);if(a)return a;{const s=new eh(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:i,payload:a,ref:s}=t,r=()=>{this.encode(t,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${n} ${i} (${s})`,a),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Wx,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Gl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:a,payload:s,ref:r}=n,l=r?`(${r})`:"",o=s.status||"";this.log("receive",`${o} ${i} ${a} ${l}`.trim(),s),this.channels.filter(c=>c._isMember(i)).forEach(c=>c._trigger(a,s,r)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger($n.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${i}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([uE],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const a={access_token:n,version:Zx};n&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push($n.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Q0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,a,s,r,l,o,c,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:kd,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Gl.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(r=t==null?void 0:t.accessToken)!==null&&r!==void 0?r:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:pu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=t==null?void 0:t.reconnectAfterMs)!==null&&o!==void 0?o:f=>oE[f-1]||cE,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(f,h)=>h(JSON.stringify(f)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class th extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function rt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class fE extends th{constructor(t,n,i){super(t),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ld extends th{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const nh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Is(async()=>{const{default:i}=await Promise.resolve().then(()=>ka);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},hE=()=>J(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Is(()=>Promise.resolve().then(()=>ka),void 0)).Response:Response}),Bd=e=>{if(Array.isArray(e))return e.map(n=>Bd(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const a=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=Bd(i)}),t},mE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},bu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},gE=(e,t,n)=>J(void 0,void 0,void 0,function*(){const i=yield hE();e instanceof i&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const s=e.status||500,r=(a==null?void 0:a.statusCode)||s+"";t(new fE(bu(a),s,r))}).catch(a=>{t(new Ld(bu(a),a))}):t(new Ld(bu(e),e))}),vE=(e,t,n,i)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!i?a:(mE(i)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(i)):a.body=i,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function ol(e,t,n,i,a,s){return J(this,void 0,void 0,function*(){return new Promise((r,l)=>{e(n,vE(t,i,a,s)).then(o=>{if(!o.ok)throw o;return i!=null&&i.noResolveJson?o:o.json()}).then(o=>r(o)).catch(o=>gE(o,l,i))})})}function Gr(e,t,n,i){return J(this,void 0,void 0,function*(){return ol(e,"GET",t,n,i)})}function Hn(e,t,n,i,a){return J(this,void 0,void 0,function*(){return ol(e,"POST",t,i,a,n)})}function Hd(e,t,n,i,a){return J(this,void 0,void 0,function*(){return ol(e,"PUT",t,i,a,n)})}function yE(e,t,n,i){return J(this,void 0,void 0,function*(){return ol(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function ih(e,t,n,i,a){return J(this,void 0,void 0,function*(){return ol(e,"DELETE",t,i,a,n)})}class pE{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return J(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(rt(t))return{data:null,error:t};throw t}})}}var Z0;class bE{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[Z0]="BlobDownloadBuilder",this.promise=null}asStream(){return new pE(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return J(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(rt(t))return{data:null,error:t};throw t}})}}Z0=Symbol.toStringTag;const _E={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},wg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wE{constructor(t,n={},i,a){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=i,this.fetch=nh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,i,a){return J(this,void 0,void 0,function*(){try{let s;const r=Object.assign(Object.assign({},wg),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(r.upsert)});const o=r.metadata;typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",r.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",r.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=i,l["cache-control"]=`max-age=${r.cacheControl}`,l["content-type"]=r.contentType,o&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),f=yield(t=="PUT"?Hd:Hn)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:l},r!=null&&r.duplex?{duplex:r.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(rt(s))return{data:null,error:s};throw s}})}upload(t,n,i){return J(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,a){return J(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),r=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${r}`);l.searchParams.set("token",n);try{let o;const c=Object.assign({upsert:wg.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",c.cacheControl)):(o=i,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield Hd(this.fetch,l.toString(),o,{headers:d});return{data:{path:s,fullPath:f.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(rt(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(t,n){return J(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const s=yield Hn(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),r=new URL(this.url+s.url),l=r.searchParams.get("token");if(!l)throw new th("No token returned by API");return{data:{signedUrl:r.toString(),path:t,token:l},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(rt(i))return{data:null,error:i};throw i}})}update(t,n,i){return J(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return J(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(rt(a))return{data:null,error:a};throw a}})}copy(t,n,i){return J(this,void 0,void 0,function*(){try{return{data:{path:(yield Hn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(rt(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,i){return J(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),s=yield Hn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const r=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${r}`)},{data:s,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(rt(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,i){return J(this,void 0,void 0,function*(){try{const a=yield Hn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${s}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(rt(a))return{data:null,error:a};throw a}})}download(t,n){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),r=s?`?${s}`:"",l=this._getFinalPath(t),o=()=>Gr(this.fetch,`${this.url}/${a}/${l}${r}`,{headers:this.headers,noResolveJson:!0});return new bE(o,this.shouldThrowOnError)}info(t){return J(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield Gr(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Bd(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(rt(i))return{data:null,error:i};throw i}})}exists(t){return J(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield yE(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(rt(i)&&i instanceof Ld){const a=i.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),a=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&a.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&a.push(o);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${i}${c}`)}}}remove(t){return J(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}})}list(t,n,i){return J(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},_E),n),{prefix:t||""});return{data:yield Hn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(rt(a))return{data:null,error:a};throw a}})}listV2(t,n){return J(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield Hn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(rt(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const F0="2.78.0",W0={"X-Client-Info":`storage-js/${F0}`};class SE{constructor(t,n={},i,a){this.shouldThrowOnError=!1;const s=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},W0),n),this.fetch=nh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return J(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Gr(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}})}getBucket(t){return J(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}})}createBucket(t){return J(this,arguments,void 0,function*(n,i={public:!1}){try{return{data:yield Hn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(rt(a))return{data:null,error:a};throw a}})}updateBucket(t,n){return J(this,void 0,void 0,function*(){try{return{data:yield Hd(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(rt(i))return{data:null,error:i};throw i}})}emptyBucket(t){return J(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return J(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class xE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},W0),n),this.fetch=nh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return J(this,void 0,void 0,function*(){try{return{data:yield Hn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}})}listBuckets(t){return J(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const i=n.toString(),a=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Gr(this.fetch,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return J(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(rt(n))return{data:null,error:n};throw n}})}}const ah={"X-Client-Info":`storage-js/${F0}`,"Content-Type":"application/json"};class eb extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function dn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class _u extends eb{constructor(t,n,i){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class EE extends eb{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Sg;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Sg||(Sg={}));const sh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Is(async()=>{const{default:i}=await Promise.resolve().then(()=>ka);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},TE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},xg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jE=(e,t,n)=>J(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const a=e.status||500,s=e;if(typeof s.json=="function")s.json().then(r=>{const l=(r==null?void 0:r.statusCode)||(r==null?void 0:r.code)||a+"";t(new _u(xg(r),a,l))}).catch(()=>{const r=a+"",l=s.statusText||`HTTP ${a} error`;t(new _u(l,a,r))});else{const r=a+"",l=s.statusText||`HTTP ${a} error`;t(new _u(l,a,r))}}else t(new EE(xg(e),e))}),OE=(e,t,n,i)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return i?(TE(i)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(i)):a.body=i,Object.assign(Object.assign({},a),n)):a};function AE(e,t,n,i,a,s){return J(this,void 0,void 0,function*(){return new Promise((r,l)=>{e(n,OE(t,i,a,s)).then(o=>{if(!o.ok)throw o;if(i!=null&&i.noResolveJson)return o;const c=o.headers.get("content-type");return!c||!c.includes("application/json")?{}:o.json()}).then(o=>r(o)).catch(o=>jE(o,l,i))})})}function fn(e,t,n,i,a){return J(this,void 0,void 0,function*(){return AE(e,"POST",t,i,a,n)})}class NE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ah),n),this.fetch=sh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return J(this,void 0,void 0,function*(){try{return{data:(yield fn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}getIndex(t,n){return J(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dn(i))return{data:null,error:i};throw i}})}listIndexes(t){return J(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return J(this,void 0,void 0,function*(){try{return{data:(yield fn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(dn(i))return{data:null,error:i};throw i}})}}class CE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ah),n),this.fetch=sh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return J(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield fn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}getVectors(t){return J(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}listVectors(t){return J(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield fn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}queryVectors(t){return J(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}deleteVectors(t){return J(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield fn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}}class DE{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ah),n),this.fetch=sh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return J(this,void 0,void 0,function*(){try{return{data:(yield fn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}getBucket(t){return J(this,void 0,void 0,function*(){try{return{data:yield fn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}listBuckets(){return J(this,arguments,void 0,function*(t={}){try{return{data:yield fn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return J(this,void 0,void 0,function*(){try{return{data:(yield fn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}})}}class RE extends DE{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new ME(this.url,this.headers,t,this.fetch)}}class ME extends NE{constructor(t,n,i,a){super(t,n,a),this.vectorBucketName=i}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return J(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return J(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return J(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return J(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new kE(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class kE extends CE{constructor(t,n,i,a,s){super(t,n,s),this.vectorBucketName=i,this.indexName=a}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return J(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return J(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return J(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return J(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return J(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class UE extends SE{constructor(t,n={},i,a){super(t,n,i,a)}from(t){return new wE(this.url,this.headers,t,this.fetch)}get vectors(){return new RE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new xE(this.url+"/iceberg",this.headers,this.fetch)}}const zE="2.78.0";let ur="";typeof Deno<"u"?ur="deno":typeof document<"u"?ur="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ur="react-native":ur="node";const LE={"X-Client-Info":`supabase-js-${ur}/${zE}`},BE={headers:LE},HE={schema:"public"},qE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$E={},IE=e=>{let t;return e?t=e:typeof fetch>"u"?t=N0:t=fetch,(...n)=>t(...n)},VE=()=>typeof Headers>"u"?C0:Headers,YE=(e,t,n)=>{const i=IE(n),a=VE();return async(s,r)=>{var l;const o=(l=await t())!==null&&l!==void 0?l:e;let c=new a(r==null?void 0:r.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),i(s,Object.assign(Object.assign({},r),{headers:c}))}};function GE(e){return e.endsWith("/")?e:e+"/"}function KE(e,t){var n,i;const{db:a,auth:s,realtime:r,global:l}=e,{db:o,auth:c,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},o),a),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),r),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(i=l==null?void 0:l.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function XE(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(GE(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const tb="2.78.0",Ja=30*1e3,qd=3,wu=qd*Ja,QE="http://localhost:9999",JE="supabase.auth.token",PE={"X-Client-Info":`gotrue-js/${tb}`},$d="X-Supabase-Api-Version",nb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ZE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,FE=10*60*1e3;class Kr extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function ne(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class WE extends Kr{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function eT(e){return ne(e)&&e.name==="AuthApiError"}class va extends Kr{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class na extends Kr{constructor(t,n,i,a){super(t,i,a),this.name=n,this.status=i}}class Ln extends na{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function tT(e){return ne(e)&&e.name==="AuthSessionMissingError"}class qa extends na{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kl extends na{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Xl extends na{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function nT(e){return ne(e)&&e.name==="AuthImplicitGrantRedirectError"}class Eg extends na{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Id extends na{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Su(e){return ne(e)&&e.name==="AuthRetryableFetchError"}class Tg extends na{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Vd extends na{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jg=` 	
\r=`.split(""),iT=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<jg.length;t+=1)e[jg[t].charCodeAt(0)]=-2;for(let t=0;t<Yo.length;t+=1)e[Yo[t].charCodeAt(0)]=t;return e})();function Og(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Yo[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Yo[i]),t.queuedBits-=6}}function ib(e,t,n){const i=iT[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ag(e){const t=[],n=r=>{t.push(String.fromCodePoint(r))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=r=>{rT(r,i,n)};for(let r=0;r<e.length;r+=1)ib(e.charCodeAt(r),a,s);return t.join("")}function aT(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function sT(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}aT(i,t)}}function rT(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if(!(e>>7-i&1)){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ys(e){const t=[],n={queue:0,queuedBits:0},i=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)ib(e.charCodeAt(a),n,i);return new Uint8Array(t)}function lT(e){const t=[];return sT(e,n=>t.push(n)),new Uint8Array(t)}function pa(e){const t=[],n={queue:0,queuedBits:0},i=a=>{t.push(a)};return e.forEach(a=>Og(a,n,i)),Og(null,n,i),t.join("")}function oT(e){return Math.round(Date.now()/1e3)+e}function cT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Kt=()=>typeof window<"u"&&typeof document<"u",la={tested:!1,writable:!1},ab=()=>{if(!Kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(la.tested)return la.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),la.tested=!0,la.writable=!0}catch{la.tested=!0,la.writable=!1}return la.writable};function uT(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return n.searchParams.forEach((i,a)=>{t[a]=i}),t}const sb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Is(async()=>{const{default:i}=await Promise.resolve().then(()=>ka);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},dT=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Pa=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},oa=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ti=async(e,t)=>{await e.removeItem(t)};class _c{constructor(){this.promise=new _c.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}_c.promiseConstructor=Promise;function xu(e){const t=e.split(".");if(t.length!==3)throw new Vd("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!ZE.test(t[i]))throw new Vd("JWT not in base64url format");return{header:JSON.parse(Ag(t[0])),payload:JSON.parse(Ag(t[1])),signature:ys(t[2]),raw:{header:t[0],payload:t[1]}}}async function fT(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function hT(e,t){return new Promise((i,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const r=await e(s);if(!t(s,null,r)){i(r);return}}catch(r){if(!t(s,r)){a(r);return}}})()})}function mT(e){return("0"+e.toString(16)).substr(-2)}function gT(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let a="";for(let s=0;s<56;s++)a+=n.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(t),Array.from(t,mT).join("")}async function vT(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(i);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function yT(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await vT(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $a(e,t,n=!1){const i=gT();let a=i;n&&(a+="/PASSWORD_RECOVERY"),await Pa(e,`${t}-code-verifier`,a);const s=await yT(i);return[s,i===s?"plain":"s256"]}const pT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function bT(e){const t=e.headers.get($d);if(!t||!t.match(pT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function _T(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function wT(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ST=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ia(e){if(!ST.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Eu(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xT(e,t){return new Proxy(e,{get:(n,i,a)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,a)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,a)}})}function Ng(e){return JSON.parse(JSON.stringify(e))}const ha=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ET=[502,503,504];async function Cg(e){var t;if(!dT(e))throw new Id(ha(e),0);if(ET.includes(e.status))throw new Id(ha(e),e.status);let n;try{n=await e.json()}catch(s){throw new va(ha(s),s)}let i;const a=bT(e);if(a&&a.getTime()>=nb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Tg(ha(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Ln}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0))throw new Tg(ha(n),e.status,n.weak_password.reasons);throw new WE(ha(n),e.status||500,i)}const TT=(e,t,n,i)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),n))};async function ue(e,t,n,i){var a;const s=Object.assign({},i==null?void 0:i.headers);s[$d]||(s[$d]=nb["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const r=(a=i==null?void 0:i.query)!==null&&a!==void 0?a:{};i!=null&&i.redirectTo&&(r.redirect_to=i.redirectTo);const l=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",o=await jT(e,t,n+l,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(o):{data:Object.assign({},o),error:null}}async function jT(e,t,n,i,a,s){const r=TT(t,i,a,s);let l;try{l=await e(n,Object.assign({},r))}catch(o){throw console.error(o),new Id(ha(o),0)}if(l.ok||await Cg(l),i!=null&&i.noResolveJson)return l;try{return await l.json()}catch(o){await Cg(o)}}function Bn(e){var t;let n=null;NT(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=oT(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function Dg(e){const t=Bn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Mi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function OT(e){return{data:e,error:null}}function AT(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:a,verification_type:s}=e,r=$s(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:i,redirect_to:a,verification_type:s},o=Object.assign({},r);return{data:{properties:l,user:o},error:null}}function Rg(e){return e}function NT(e){return e.access_token&&e.refresh_token&&e.expires_in}const Tu=["global","local","others"];class CT{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=sb(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Tu[0]){if(Tu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tu.join(", ")}`);try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Mi})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=$s(t,["options"]),a=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(a.new_email=i==null?void 0:i.newEmail,delete a.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:AT,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ne(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Mi})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,a,s,r,l,o;try{const c={nextPage:null,lastPage:0,total:0},d=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:Rg});if(d.error)throw d.error;const f=await d.json(),h=(r=d.headers.get("x-total-count"))!==null&&r!==void 0?r:0,m=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return m.length>0&&(m.forEach(p=>{const _=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);c[`${w}Page`]=_}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ne(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Ia(t);try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Mi})}catch(n){if(ne(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ia(t);try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Mi})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){Ia(t);try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Mi})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Ia(t.userId);try{const{data:n,error:i}=await ue(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:i}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ia(t.userId),Ia(t.id);try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,a,s,r,l,o;try{const c={nextPage:null,lastPage:0,total:0},d=await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:Rg});if(d.error)throw d.error;const f=await d.json(),h=(r=d.headers.get("x-total-count"))!==null&&r!==void 0?r:0,m=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return m.length>0&&(m.forEach(p=>{const _=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);c[`${w}Page`]=_}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ne(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}}function Mg(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Va={debug:!!(globalThis&&ab()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class DT extends rb{}async function RT(e,t,n){Va.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Va.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){Va.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{Va.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Va.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new DT(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Va.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function MT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function lb(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function kT(e){return parseInt(e,16)}function UT(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function zT(e){var t;const{chainId:n,domain:i,expirationTime:a,issuedAt:s=new Date,nonce:r,notBefore:l,requestId:o,resources:c,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(r&&r.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${r}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=lb(e.address),p=d?`${d}://${i}`:i,_=e.statement?`${e.statement}
`:"",w=`${p} wants you to sign in with your Ethereum account:
${m}

${_}`;let y=`URI: ${f}
Version: ${h}
Chain ID: ${n}${r?`
Nonce: ${r}`:""}
Issued At: ${s.toISOString()}`;if(a&&(y+=`
Expiration Time: ${a.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),o&&(y+=`
Request ID: ${o}`),c){let g=`
Resources:`;for(const v of c){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);g+=`
- ${v}`}y+=g}return`${w}
${y}`}class vt extends Error{constructor({message:t,code:n,cause:i,name:a}){var s;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(s=a??(i instanceof Error?i.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Go extends vt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function LT({error:e,options:t}){var n,i,a;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new vt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new vt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new vt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=s.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new vt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new vt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new vt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new vt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new vt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(ob(r)){if(s.rp.id!==r)return new vt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new vt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new vt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function BT({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new vt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new vt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(ob(i)){if(n.rpId!==i)return new vt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new vt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class HT{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const qT=new HT;function $T(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,a=$s(e,["challenge","user","excludeCredentials"]),s=ys(t).buffer,r=Object.assign(Object.assign({},n),{id:ys(n.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:s,user:r});if(i&&i.length>0){l.excludeCredentials=new Array(i.length);for(let o=0;o<i.length;o++){const c=i[o];l.excludeCredentials[o]=Object.assign(Object.assign({},c),{id:ys(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return l}function IT(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=$s(e,["challenge","allowCredentials"]),a=ys(t).buffer,s=Object.assign(Object.assign({},i),{challenge:a});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let r=0;r<n.length;r++){const l=n[r];s.allowCredentials[r]=Object.assign(Object.assign({},l),{id:ys(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function VT(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:pa(new Uint8Array(e.response.attestationObject)),clientDataJSON:pa(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function YT(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:pa(new Uint8Array(a.authenticatorData)),clientDataJSON:pa(new Uint8Array(a.clientDataJSON)),signature:pa(new Uint8Array(a.signature)),userHandle:a.userHandle?pa(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ob(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function kg(){var e,t;return!!(Kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function GT(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Go("Browser returned unexpected credential type",t)}:{data:null,error:new Go("Empty credential response",t)}}catch(t){return{data:null,error:LT({error:t,options:e})}}}async function KT(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Go("Browser returned unexpected credential type",t)}:{data:null,error:new Go("Empty credential response",t)}}catch(t){return{data:null,error:BT({error:t,options:e})}}}const XT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},QT={userVerification:"preferred",hints:["security-key"]};function Ko(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),i={};for(const a of e)if(a)for(const s in a){const r=a[s];if(r!==void 0)if(Array.isArray(r))i[s]=r;else if(n(r))i[s]=r;else if(t(r)){const l=i[s];t(l)?i[s]=Ko(l,r):i[s]=Ko(r)}else i[s]=r}return i}function JT(e,t){return Ko(XT,e,t||{})}function PT(e,t){return Ko(QT,e,t||{})}class ZT{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:a},s){try{const{data:r,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!r)return{data:null,error:l};const o=a??qT.createNewAbortSignal();if(r.webauthn.type==="create"){const{user:c}=r.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${i}`),c.displayName||(c.displayName=c.name)}switch(r.webauthn.type){case"create":{const c=JT(r.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:f}=await GT({publicKey:c,signal:o});return d?{data:{factorId:t,challengeId:r.id,webauthn:{type:r.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const c=PT(r.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:f}=await KT(Object.assign(Object.assign({},r.webauthn.credential_options),{publicKey:c,signal:o}));return d?{data:{factorId:t,challengeId:r.id,webauthn:{type:r.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(r){return ne(r)?{data:null,error:r}:{data:null,error:new va("Unexpected error in challenge",r)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}},s){if(!n)return{data:null,error:new Kr("rpId is required for WebAuthn authentication")};try{if(!kg())return{data:null,error:new va("Browser does not support WebAuthn",null)};const{data:r,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:a},{request:s});if(!r)return{data:null,error:l};const{webauthn:o}=r;return this._verify({factorId:t,challengeId:r.challengeId,webauthn:{type:o.type,rpId:n,rpOrigins:i,credential_response:o.credential_response}})}catch(r){return ne(r)?{data:null,error:r}:{data:null,error:new va("Unexpected error in authenticate",r)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a},s){if(!n)return{data:null,error:new Kr("rpId is required for WebAuthn registration")};try{if(!kg())return{data:null,error:new va("Browser does not support WebAuthn",null)};const{data:r,error:l}=await this._enroll({friendlyName:t});if(!r)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:o,error:c}=await this._challenge({factorId:r.id,friendlyName:r.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:a},{create:s});return o?this._verify({factorId:r.id,challengeId:o.challengeId,webauthn:{rpId:n,rpOrigins:i,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:c}}catch(r){return ne(r)?{data:null,error:r}:{data:null,error:new va("Unexpected error in register",r)}}}}MT();const FT={url:QE,storageKey:JE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:PE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ug(e,t,n){return await n()}const Ya={};class Xr{get jwks(){var t,n;return(n=(t=Ya[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Ya[this.storageKey]=Object.assign(Object.assign({},Ya[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Ya[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ya[this.storageKey]=Object.assign(Object.assign({},Ya[this.storageKey]),{cachedAt:t})}constructor(t){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Xr.nextInstanceID,Xr.nextInstanceID+=1,this.instanceID>0&&Kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},FT),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new CT({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=sb(a.fetch),this.lock=a.lock||Ug,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Kt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=RT:this.lock=Ug,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ZT(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:ab()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mg(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Mg(this.memoryStorage)),Kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tb}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=uT(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),Kt()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:s}=await this._getSessionFromURL(n,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),nT(s)){const o=(t=s.details)===null||t===void 0?void 0:t.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:r,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",r,"redirect type",l),await this._saveSession(r),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ne(n)?{error:n}:{error:new va("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,a;try{const s=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Bn}),{data:r,error:l}=s;if(l||!r)return{data:{user:null,session:null},error:l};const o=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,i,a;try{let s;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await $a(this.storage,this.storageKey)),s=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:p},xform:Bn})}else if("phone"in t){const{phone:d,password:f,options:h}=t;s=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(i=h==null?void 0:h.data)!==null&&i!==void 0?i:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Bn})}else throw new Kl("You must provide either an email or phone number and a password");const{data:r,error:l}=s;if(l||!r)return{data:{user:null,session:null},error:l};const o=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(s){if(ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:r,options:l}=t;n=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Dg})}else if("phone"in t){const{phone:s,password:r,options:l}=t;n=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Dg})}else throw new Kl("You must provide either an email or phone number and a password");const{data:i,error:a}=n;return a?{data:{user:null,session:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new qa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,i,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,a,s,r,l,o,c,d,f,h;let m,p;if("message"in t)m=t.message,p=t.signature;else{const{chain:_,wallet:w,statement:y,options:g}=t;let v;if(Kt())if(typeof w=="object")v=w;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")v=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=w}const S=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),x=await v.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||x.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=lb(x[0]);let E=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!E){const A=await v.request({method:"eth_chainId"});E=kT(A)}const j={domain:S.host,address:T,statement:y,uri:S.href,version:"1",chainId:E,nonce:(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(r=(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.notBefore,requestId:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=zT(j),p=await v.request({method:"personal_sign",params:[UT(m),T]})}try{const{data:_,error:w}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:p},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Bn});if(w)throw w;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new qa}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:w})}catch(_){if(ne(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(t){var n,i,a,s,r,l,o,c,d,f,h,m;let p,_;if("message"in t)p=t.message,_=t.signature;else{const{chain:w,wallet:y,statement:g,options:v}=t;let S;if(Kt())if(typeof y=="object")S=y;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))S=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const x=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const T=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),g?{statement:g}:null));let E;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")E=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)E=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),_=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${x.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(a=(i=v==null?void 0:v.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=v==null?void 0:v.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((r=v==null?void 0:v.signInWithSolana)===null||r===void 0)&&r.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const T=await S.signMessage(new TextEncoder().encode(p),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=T}}try{const{data:w,error:y}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:pa(_)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Bn});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new qa}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(ne(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const n=await oa(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(n??"").split("/");try{const{data:s,error:r}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Bn});if(await Ti(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new qa}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:r})}catch(s){if(ne(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:i,token:a,access_token:s,nonce:r}=t,l=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:s,nonce:r,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Bn}),{data:o,error:c}=l;return c?{data:{user:null,session:null},error:c}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new qa}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:c})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,i,a,s,r;try{if("email"in t){const{email:l,options:o}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await $a(this.storage,this.storageKey));const{error:f}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:o}=t,{data:c,error:d}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=o==null?void 0:o.data)!==null&&a!==void 0?a:{},create_user:(s=o==null?void 0:o.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(r=o==null?void 0:o.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Kl("You must provide either an email or phone number.")}catch(l){if(ne(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,i;try{let a,s;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:r,error:l}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:Bn});if(l)throw l;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,c=r.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,i,a;try{let s=null,r=null;return this.flowType==="pkce"&&([s,r]=await $a(this.storage,this.storageKey)),await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:r}),headers:this.headers,xform:OT})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new Ln;const{error:a}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(ne(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:a,options:s}=t,{error:r}=await ue(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in t){const{phone:i,type:a,options:s}=t,{data:r,error:l}=await ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:r==null?void 0:r.message_id},error:l}}throw new Kl("You must provide either an email or phone number and a type")}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await oa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<wu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const r=await oa(this.userStorage,this.storageKey+"-user");r!=null&&r.user?t.user=r.user:t.user=Eu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const r={value:this.suppressGetSessionWarning};t.user=xT(t.user,r),r.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Mi}):await this._useSession(async n=>{var i,a,s;const{data:r,error:l}=n;if(l)throw l;return!(!((i=r.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ln}:await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=r.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:Mi})})}catch(n){if(ne(n))return tT(n)&&(await this._removeSession(),await Ti(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:a,error:s}=i;if(s)throw s;if(!a.session)throw new Ln;const r=a.session;let l=null,o=null;this.flowType==="pkce"&&t.email!=null&&([l,o]=await $a(this.storage,this.storageKey));const{data:c,error:d}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:o}),jwt:r.access_token,xform:Mi});if(d)throw d;return r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(i){if(ne(i))return{data:{user:null},error:i};throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ln;const n=Date.now()/1e3;let i=n,a=!0,s=null;const{payload:r}=xu(t.access_token);if(r.exp&&(i=r.exp,a=i<=n),a){const{data:l,error:o}=await this._callRefreshToken(t.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:o}=await this._getUser(t.access_token);if(o)throw o;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(ne(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:r,error:l}=n;if(l)throw l;t=(i=r.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new Ln;const{data:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ne(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Kt())throw new Xl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Xl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Eg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Eg("No code detected.");const{data:g,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:s,refresh_token:r,expires_in:l,expires_at:o,token_type:c}=t;if(!s||!l||!r||!c)throw new Xl("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;o&&(h=parseInt(o));const m=h-d;m*1e3<=Ja&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const p=h-f;d-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,d):d-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,d);const{data:_,error:w}=await this._getUser(s);if(w)throw w;const y={provider_token:i,provider_refresh_token:a,access_token:s,expires_in:f,expires_at:h,refresh_token:r,token_type:c,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(i){if(ne(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await oa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:a,error:s}=n;if(s)return{error:s};const r=(i=a.session)===null||i===void 0?void 0:i.access_token;if(r){const{error:l}=await this.admin.signOut(r,t);if(l&&!(eT(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ti(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=cT(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,a;try{const{data:{session:s},error:r}=n;if(r)throw r;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await $a(this.storage,this.storageKey,!0));try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ne(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ne(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:a}=await this._useSession(async s=>{var r,l,o,c,d;const{data:f,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Kt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:t.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(ne(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:a,data:{session:s}}=n;if(a)throw a;const{options:r,provider:l,token:o,access_token:c,nonce:d}=t,f=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s==null?void 0:s.access_token)!==null&&i!==void 0?i:void 0,body:{provider:l,id_token:o,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Bn}),{data:h,error:m}=f;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new qa}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:m})}catch(a){if(ne(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,a;const{data:s,error:r}=n;if(r)throw r;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await hT(async a=>(a>0&&await fT(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Bn})),(a,s)=>{const r=200*Math.pow(2,a);return s&&Su(s)&&Date.now()+r-i<Ja})}catch(i){if(this._debug(n,"error",i),ne(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),Kt()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await oa(this.storage,this.storageKey);if(a&&this.userStorage){let r=await oa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!r&&(r={user:a.user},await Pa(this.userStorage,this.storageKey+"-user",r)),a.user=(t=r==null?void 0:r.user)!==null&&t!==void 0?t:Eu()}else if(a&&!a.user&&!a.user){const r=await oa(this.storage,this.storageKey+"-user");r&&(r!=null&&r.user)?(a.user=r.user,await Ti(this.storage,this.storageKey+"-user"),await Pa(this.storage,this.storageKey,a)):a.user=Eu()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const s=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<wu;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${wu}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:r}=await this._callRefreshToken(a.refresh_token);r&&(console.error(r),Su(r)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",r),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:r,error:l}=await this._getUser(a.access_token);!l&&(r!=null&&r.user)?(a.user=r.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(i,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new Ln;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new _c;const{data:s,error:r}=await this._refreshAccessToken(t);if(r)throw r;if(!s.session)throw new Ln;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(a,"error",s),ne(s)){const r={data:null,error:s};return Su(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(r),r}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,i=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],r=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(o){s.push(o)}});if(await Promise.all(r),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Pa(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const s=Ng(a);await Pa(this.storage,this.storageKey,s)}else{const a=Ng(n);await Pa(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ti(this.storage,this.storageKey),await Ti(this.storage,this.storageKey+"-code-verifier"),await Ti(this.storage,this.storageKey+"-user"),this.userStorage&&await Ti(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ja);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-t)/Ja);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ja}ms, refresh threshold is ${qd} ticks`),a<=qd&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const a=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,r]=await $a(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(r)}`});a.push(l.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);a.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:a,error:s}=n;return s?{data:null,error:s}:await ue(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,a;const{data:s,error:r}=n;if(r)return{data:null,error:r};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:o,error:c}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&o.type==="totp"&&(!((a=o==null?void 0:o.totp)===null||a===void 0)&&a.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:s}=n;if(s)return{data:null,error:s};const r=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?VT(t.webauthn.credential_response):YT(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:o}=await ue(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:r,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(n){if(ne(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:s}=n;if(s)return{data:null,error:s};const r=await ue(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});if(r.error)return r;const{data:l}=r;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:$T(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:IT(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ne(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const a={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])a.all.push(s),s.status==="verified"&&a[s.factor_type].push(s);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:i},error:a}=await this.getSession();if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=xu(i.access_token);let r=null;s.aal&&(r=s.aal);let l=r;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=s.amr||[];return{data:{currentLevel:r,nextLevel:l,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?{data:null,error:a}:i?await ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):{data:null,error:new Ln}})}catch(n){if(ne(n))return{data:null,error:n};throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:a},error:s}=i;if(s)return{data:null,error:s};if(!a)return{data:null,error:new Ln};const r=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return r.data&&r.data.redirect_url&&Kt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(r.data.redirect_url),r})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:a},error:s}=i;if(s)return{data:null,error:s};if(!a)return{data:null,error:new Ln};const r=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return r.data&&r.data.redirect_url&&Kt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(r.data.redirect_url),r})}catch(i){if(ne(i))return{data:null,error:i};throw i}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(l=>l.kid===t);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(l=>l.kid===t),i&&this.jwks_cached_at+FE>a)return i;const{data:s,error:r}=await ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,i=s.keys.find(l=>l.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};i=m.session.access_token}const{header:a,payload:s,signature:r,raw:{header:l,payload:o}}=xu(i);n!=null&&n.allowExpired||_T(s.exp);const c=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:m}=await this.getUser(i);if(m)throw m;return{data:{claims:s,header:a,signature:r},error:null}}const d=wT(a.alg),f=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,r,lT(`${l}.${o}`)))throw new Vd("Invalid JWT signature");return{data:{claims:s,header:a,signature:r},error:null}}catch(i){if(ne(i))return{data:null,error:i};throw i}}}Xr.nextInstanceID=0;const WT=Xr;class e1 extends WT{constructor(t){super(t)}}class t1{constructor(t,n,i){var a,s,r;this.supabaseUrl=t,this.supabaseKey=n;const l=XE(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const o=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:HE,realtime:$E,auth:Object.assign(Object.assign({},qE),{storageKey:o}),global:BE},d=KE(i??{},c);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=d.auth)!==null&&r!==void 0?r:{},this.headers,d.global.fetch),this.fetch=YE(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Qx(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new UE(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new qx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,i)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(n=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:a,userStorage:s,storageKey:r,flowType:l,lock:o,debug:c},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new e1({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:r,autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:a,userStorage:s,flowType:l,lock:o,debug:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new dE(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,n,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const n1=(e,t,n)=>new t1(e,t,n);function i1(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}i1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const a1="https://vqpubtahhvtkftafdlrp.supabase.co",s1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZxcHVidGFoaHZ0a2Z0YWZkbHJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMjQ2NjUsImV4cCI6MjA3NzgwMDY2NX0.o2905IF2CWRJ-krYtA6MnL7_KALlNiwD211Sw-of7mI",qe=n1(a1,s1);function r1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.useMemo(()=>i=>{t.forEach(a=>a(i))},t)}const wc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Gs(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function rh(e){return"nodeType"in e}function Zt(e){var t,n;return e?Gs(e)?e:rh(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function lh(e){const{Document:t}=Zt(e);return e instanceof t}function cl(e){return Gs(e)?!1:e instanceof Zt(e).HTMLElement}function cb(e){return e instanceof Zt(e).SVGElement}function Ks(e){return e?Gs(e)?e.document:rh(e)?lh(e)?e:cl(e)||cb(e)?e.ownerDocument:document:document:document}const In=wc?b.useLayoutEffect:b.useEffect;function Sc(e){const t=b.useRef(e);return In(()=>{t.current=e}),b.useCallback(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t.current==null?void 0:t.current(...i)},[])}function l1(){const e=b.useRef(null),t=b.useCallback((i,a)=>{e.current=setInterval(i,a)},[]),n=b.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Qr(e,t){t===void 0&&(t=[e]);const n=b.useRef(e);return In(()=>{n.current!==e&&(n.current=e)},t),n}function ul(e,t){const n=b.useRef();return b.useMemo(()=>{const i=e(n.current);return n.current=i,i},[...t])}function Xo(e){const t=Sc(e),n=b.useRef(null),i=b.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,i]}function Qo(e){const t=b.useRef();return b.useEffect(()=>{t.current=e},[e]),t.current}let ju={};function dl(e,t){return b.useMemo(()=>{if(t)return t;const n=ju[e]==null?0:ju[e]+1;return ju[e]=n,e+"-"+n},[e,t])}function ub(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i.reduce((s,r)=>{const l=Object.entries(r);for(const[o,c]of l){const d=s[o];d!=null&&(s[o]=d+e*c)}return s},{...t})}}const ps=ub(1),Jr=ub(-1);function o1(e){return"clientX"in e&&"clientY"in e}function xc(e){if(!e)return!1;const{KeyboardEvent:t}=Zt(e.target);return t&&e instanceof t}function c1(e){if(!e)return!1;const{TouchEvent:t}=Zt(e.target);return t&&e instanceof t}function Jo(e){if(c1(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return o1(e)?{x:e.clientX,y:e.clientY}:null}const Wi=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Wi.Translate.toString(e),Wi.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:i}=e;return t+" "+n+"ms "+i}}}),zg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function u1(e){return e.matches(zg)?e:e.querySelector(zg)}const d1={display:"none"};function f1(e){let{id:t,value:n}=e;return lt.createElement("div",{id:t,style:d1},n)}function h1(e){let{id:t,announcement:n,ariaLiveType:i="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return lt.createElement("div",{id:t,style:a,role:"status","aria-live":i,"aria-atomic":!0},n)}function m1(){const[e,t]=b.useState("");return{announce:b.useCallback(i=>{i!=null&&t(i)},[]),announcement:e}}const db=b.createContext(null);function g1(e){const t=b.useContext(db);b.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function v1(){const[e]=b.useState(()=>new Set),t=b.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[b.useCallback(i=>{let{type:a,event:s}=i;e.forEach(r=>{var l;return(l=r[a])==null?void 0:l.call(r,s)})},[e]),t]}const y1={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},p1={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function b1(e){let{announcements:t=p1,container:n,hiddenTextDescribedById:i,screenReaderInstructions:a=y1}=e;const{announce:s,announcement:r}=m1(),l=dl("DndLiveRegion"),[o,c]=b.useState(!1);if(b.useEffect(()=>{c(!0)},[]),g1(b.useMemo(()=>({onDragStart(f){let{active:h}=f;s(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:m}=f;t.onDragMove&&s(t.onDragMove({active:h,over:m}))},onDragOver(f){let{active:h,over:m}=f;s(t.onDragOver({active:h,over:m}))},onDragEnd(f){let{active:h,over:m}=f;s(t.onDragEnd({active:h,over:m}))},onDragCancel(f){let{active:h,over:m}=f;s(t.onDragCancel({active:h,over:m}))}}),[s,t])),!o)return null;const d=lt.createElement(lt.Fragment,null,lt.createElement(f1,{id:i,value:a.draggable}),lt.createElement(h1,{id:l,announcement:r}));return n?ya.createPortal(d,n):d}var Tt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Tt||(Tt={}));function Po(){}function Ou(e,t){return b.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function _1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.useMemo(()=>[...t].filter(i=>i!=null),[...t])}const Vn=Object.freeze({x:0,y:0});function fb(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function w1(e,t){const n=Jo(e);if(!n)return"0 0";const i={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return i.x+"% "+i.y+"%"}function hb(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return n-i}function S1(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return i-n}function Lg(e){let{left:t,top:n,height:i,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+i},{x:t+a,y:n+i}]}function mb(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Bg(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const x1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const a=Bg(t,t.left,t.top),s=[];for(const r of i){const{id:l}=r,o=n.get(l);if(o){const c=fb(Bg(o),a);s.push({id:l,data:{droppableContainer:r,value:c}})}}return s.sort(hb)},E1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const a=Lg(t),s=[];for(const r of i){const{id:l}=r,o=n.get(l);if(o){const c=Lg(o),d=a.reduce((h,m,p)=>h+fb(c[p],m),0),f=Number((d/4).toFixed(4));s.push({id:l,data:{droppableContainer:r,value:f}})}}return s.sort(hb)};function T1(e,t){const n=Math.max(t.top,e.top),i=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),r=a-i,l=s-n;if(i<a&&n<s){const o=t.width*t.height,c=e.width*e.height,d=r*l,f=d/(o+c-d);return Number(f.toFixed(4))}return 0}const j1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const a=[];for(const s of i){const{id:r}=s,l=n.get(r);if(l){const o=T1(l,t);o>0&&a.push({id:r,data:{droppableContainer:s,value:o}})}}return a.sort(S1)};function O1(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function gb(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Vn}function A1(e){return function(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return a.reduce((r,l)=>({...r,top:r.top+e*l.y,bottom:r.bottom+e*l.y,left:r.left+e*l.x,right:r.right+e*l.x}),{...n})}}const N1=A1(1);function vb(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function C1(e,t,n){const i=vb(t);if(!i)return e;const{scaleX:a,scaleY:s,x:r,y:l}=i,o=e.left-r-(1-a)*parseFloat(n),c=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,f=s?e.height/s:e.height;return{width:d,height:f,top:c,right:o+d,bottom:c+f,left:o}}const D1={ignoreTransform:!1};function Xs(e,t){t===void 0&&(t=D1);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:d}=Zt(e).getComputedStyle(e);c&&(n=C1(n,c,d))}const{top:i,left:a,width:s,height:r,bottom:l,right:o}=n;return{top:i,left:a,width:s,height:r,bottom:l,right:o}}function Hg(e){return Xs(e,{ignoreTransform:!0})}function R1(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function M1(e,t){return t===void 0&&(t=Zt(e).getComputedStyle(e)),t.position==="fixed"}function k1(e,t){t===void 0&&(t=Zt(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const s=t[a];return typeof s=="string"?n.test(s):!1})}function Ec(e,t){const n=[];function i(a){if(t!=null&&n.length>=t||!a)return n;if(lh(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!cl(a)||cb(a)||n.includes(a))return n;const s=Zt(e).getComputedStyle(a);return a!==e&&k1(a,s)&&n.push(a),M1(a,s)?n:i(a.parentNode)}return e?i(e):n}function yb(e){const[t]=Ec(e,1);return t??null}function Au(e){return!wc||!e?null:Gs(e)?e:rh(e)?lh(e)||e===Ks(e).scrollingElement?window:cl(e)?e:null:null}function pb(e){return Gs(e)?e.scrollX:e.scrollLeft}function bb(e){return Gs(e)?e.scrollY:e.scrollTop}function Yd(e){return{x:pb(e),y:bb(e)}}var Ct;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ct||(Ct={}));function _b(e){return!wc||!e?!1:e===document.scrollingElement}function wb(e){const t={x:0,y:0},n=_b(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,r=e.scrollTop>=i.y,l=e.scrollLeft>=i.x;return{isTop:a,isLeft:s,isBottom:r,isRight:l,maxScroll:i,minScroll:t}}const U1={x:.2,y:.2};function z1(e,t,n,i,a){let{top:s,left:r,right:l,bottom:o}=n;i===void 0&&(i=10),a===void 0&&(a=U1);const{isTop:c,isBottom:d,isLeft:f,isRight:h}=wb(e),m={x:0,y:0},p={x:0,y:0},_={height:t.height*a.y,width:t.width*a.x};return!c&&s<=t.top+_.height?(m.y=Ct.Backward,p.y=i*Math.abs((t.top+_.height-s)/_.height)):!d&&o>=t.bottom-_.height&&(m.y=Ct.Forward,p.y=i*Math.abs((t.bottom-_.height-o)/_.height)),!h&&l>=t.right-_.width?(m.x=Ct.Forward,p.x=i*Math.abs((t.right-_.width-l)/_.width)):!f&&r<=t.left+_.width&&(m.x=Ct.Backward,p.x=i*Math.abs((t.left+_.width-r)/_.width)),{direction:m,speed:p}}function L1(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:r}=window;return{top:0,left:0,right:s,bottom:r,width:s,height:r}}const{top:t,left:n,right:i,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:i,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Sb(e){return e.reduce((t,n)=>ps(t,Yd(n)),Vn)}function B1(e){return e.reduce((t,n)=>t+pb(n),0)}function H1(e){return e.reduce((t,n)=>t+bb(n),0)}function xb(e,t){if(t===void 0&&(t=Xs),!e)return;const{top:n,left:i,bottom:a,right:s}=t(e);yb(e)&&(a<=0||s<=0||n>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const q1=[["x",["left","right"],B1],["y",["top","bottom"],H1]];class oh{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Ec(n),a=Sb(i);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,r,l]of q1)for(const o of r)Object.defineProperty(this,o,{get:()=>{const c=l(i),d=a[s]-c;return this.rect[o]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ar{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=t}add(t,n,i){var a;(a=this.target)==null||a.addEventListener(t,n,i),this.listeners.push([t,n,i])}}function $1(e){const{EventTarget:t}=Zt(e);return e instanceof t?e:Ks(e)}function Nu(e,t){const n=Math.abs(e.x),i=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+i**2)>t:"x"in t&&"y"in t?n>t.x&&i>t.y:"x"in t?n>t.x:"y"in t?i>t.y:!1}var jn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(jn||(jn={}));function qg(e){e.preventDefault()}function I1(e){e.stopPropagation()}var Re;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Re||(Re={}));const Eb={start:[Re.Space,Re.Enter],cancel:[Re.Esc],end:[Re.Space,Re.Enter,Re.Tab]},V1=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Re.Right:return{...n,x:n.x+25};case Re.Left:return{...n,x:n.x-25};case Re.Down:return{...n,y:n.y+25};case Re.Up:return{...n,y:n.y-25}}};class ch{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ar(Ks(n)),this.windowListeners=new Ar(Zt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(jn.Resize,this.handleCancel),this.windowListeners.add(jn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(jn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,i=t.node.current;i&&xb(i),n(Vn)}handleKeyDown(t){if(xc(t)){const{active:n,context:i,options:a}=this.props,{keyboardCodes:s=Eb,coordinateGetter:r=V1,scrollBehavior:l="smooth"}=a,{code:o}=t;if(s.end.includes(o)){this.handleEnd(t);return}if(s.cancel.includes(o)){this.handleCancel(t);return}const{collisionRect:c}=i.current,d=c?{x:c.left,y:c.top}:Vn;this.referenceCoordinates||(this.referenceCoordinates=d);const f=r(t,{active:n,context:i.current,currentCoordinates:d});if(f){const h=Jr(f,d),m={x:0,y:0},{scrollableAncestors:p}=i.current;for(const _ of p){const w=t.code,{isTop:y,isRight:g,isLeft:v,isBottom:S,maxScroll:x,minScroll:T}=wb(_),E=L1(_),j={x:Math.min(w===Re.Right?E.right-E.width/2:E.right,Math.max(w===Re.Right?E.left:E.left+E.width/2,f.x)),y:Math.min(w===Re.Down?E.bottom-E.height/2:E.bottom,Math.max(w===Re.Down?E.top:E.top+E.height/2,f.y))},A=w===Re.Right&&!g||w===Re.Left&&!v,k=w===Re.Down&&!S||w===Re.Up&&!y;if(A&&j.x!==f.x){const Z=_.scrollLeft+h.x,me=w===Re.Right&&Z<=x.x||w===Re.Left&&Z>=T.x;if(me&&!h.y){_.scrollTo({left:Z,behavior:l});return}me?m.x=_.scrollLeft-Z:m.x=w===Re.Right?_.scrollLeft-x.x:_.scrollLeft-T.x,m.x&&_.scrollBy({left:-m.x,behavior:l});break}else if(k&&j.y!==f.y){const Z=_.scrollTop+h.y,me=w===Re.Down&&Z<=x.y||w===Re.Up&&Z>=T.y;if(me&&!h.x){_.scrollTo({top:Z,behavior:l});return}me?m.y=_.scrollTop-Z:m.y=w===Re.Down?_.scrollTop-x.y:_.scrollTop-T.y,m.y&&_.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,ps(Jr(f,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:i}=this.props;t.preventDefault(),i(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ch.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:i=Eb,onActivation:a}=t,{active:s}=n;const{code:r}=e.nativeEvent;if(i.start.includes(r)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function $g(e){return!!(e&&"distance"in e)}function Ig(e){return!!(e&&"delay"in e)}class uh{constructor(t,n,i){var a;i===void 0&&(i=$1(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:r}=s;this.props=t,this.events=n,this.document=Ks(r),this.documentListeners=new Ar(this.document),this.listeners=new Ar(i),this.windowListeners=new Ar(Zt(r)),this.initialCoordinates=(a=Jo(s))!=null?a:Vn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(jn.Resize,this.handleCancel),this.windowListeners.add(jn.DragStart,qg),this.windowListeners.add(jn.VisibilityChange,this.handleCancel),this.windowListeners.add(jn.ContextMenu,qg),this.documentListeners.add(jn.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ig(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if($g(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:i,onPending:a}=this.props;a(i,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(jn.Click,I1,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(jn.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:i,initialCoordinates:a,props:s}=this,{onMove:r,options:{activationConstraint:l}}=s;if(!a)return;const o=(n=Jo(t))!=null?n:Vn,c=Jr(a,o);if(!i&&l){if($g(l)){if(l.tolerance!=null&&Nu(c,l.tolerance))return this.handleCancel();if(Nu(c,l.distance))return this.handleStart()}if(Ig(l)&&Nu(c,l.tolerance))return this.handleCancel();this.handlePending(l,c);return}t.cancelable&&t.preventDefault(),r(o)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Re.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Y1={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class dh extends uh{constructor(t){const{event:n}=t,i=Ks(n.target);super(t,Y1,i)}}dh.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return!n.isPrimary||n.button!==0?!1:(i==null||i({event:n}),!0)}}];const G1={move:{name:"mousemove"},end:{name:"mouseup"}};var Gd;(function(e){e[e.RightClick=2]="RightClick"})(Gd||(Gd={}));class K1 extends uh{constructor(t){super(t,G1,Ks(t.event.target))}}K1.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return n.button===Gd.RightClick?!1:(i==null||i({event:n}),!0)}}];const Cu={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Tb extends uh{constructor(t){super(t,Cu)}static setup(){return window.addEventListener(Cu.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Cu.move.name,t)};function t(){}}}Tb.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;const{touches:a}=n;return a.length>1?!1:(i==null||i({event:n}),!0)}}];var Nr;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Nr||(Nr={}));var Zo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Zo||(Zo={}));function X1(e){let{acceleration:t,activator:n=Nr.Pointer,canScroll:i,draggingRect:a,enabled:s,interval:r=5,order:l=Zo.TreeOrder,pointerCoordinates:o,scrollableAncestors:c,scrollableAncestorRects:d,delta:f,threshold:h}=e;const m=J1({delta:f,disabled:!s}),[p,_]=l1(),w=b.useRef({x:0,y:0}),y=b.useRef({x:0,y:0}),g=b.useMemo(()=>{switch(n){case Nr.Pointer:return o?{top:o.y,bottom:o.y,left:o.x,right:o.x}:null;case Nr.DraggableRect:return a}},[n,a,o]),v=b.useRef(null),S=b.useCallback(()=>{const T=v.current;if(!T)return;const E=w.current.x*y.current.x,j=w.current.y*y.current.y;T.scrollBy(E,j)},[]),x=b.useMemo(()=>l===Zo.TreeOrder?[...c].reverse():c,[l,c]);b.useEffect(()=>{if(!s||!c.length||!g){_();return}for(const T of x){if((i==null?void 0:i(T))===!1)continue;const E=c.indexOf(T),j=d[E];if(!j)continue;const{direction:A,speed:k}=z1(T,j,g,t,h);for(const Z of["x","y"])m[Z][A[Z]]||(k[Z]=0,A[Z]=0);if(k.x>0||k.y>0){_(),v.current=T,p(S,r),w.current=k,y.current=A;return}}w.current={x:0,y:0},y.current={x:0,y:0},_()},[t,S,i,_,s,r,JSON.stringify(g),JSON.stringify(m),p,c,x,d,JSON.stringify(h)])}const Q1={x:{[Ct.Backward]:!1,[Ct.Forward]:!1},y:{[Ct.Backward]:!1,[Ct.Forward]:!1}};function J1(e){let{delta:t,disabled:n}=e;const i=Qo(t);return ul(a=>{if(n||!i||!a)return Q1;const s={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[Ct.Backward]:a.x[Ct.Backward]||s.x===-1,[Ct.Forward]:a.x[Ct.Forward]||s.x===1},y:{[Ct.Backward]:a.y[Ct.Backward]||s.y===-1,[Ct.Forward]:a.y[Ct.Forward]||s.y===1}}},[n,t,i])}function P1(e,t){const n=t!=null?e.get(t):void 0,i=n?n.node.current:null;return ul(a=>{var s;return t==null?null:(s=i??a)!=null?s:null},[i,t])}function Z1(e,t){return b.useMemo(()=>e.reduce((n,i)=>{const{sensor:a}=i,s=a.activators.map(r=>({eventName:r.eventName,handler:t(r.handler,i)}));return[...n,...s]},[]),[e,t])}var Rs;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Rs||(Rs={}));var Kd;(function(e){e.Optimized="optimized"})(Kd||(Kd={}));const Vg=new Map;function F1(e,t){let{dragging:n,dependencies:i,config:a}=t;const[s,r]=b.useState(null),{frequency:l,measure:o,strategy:c}=a,d=b.useRef(e),f=w(),h=Qr(f),m=b.useCallback(function(y){y===void 0&&(y=[]),!h.current&&r(g=>g===null?y:g.concat(y.filter(v=>!g.includes(v))))},[h]),p=b.useRef(null),_=ul(y=>{if(f&&!n)return Vg;if(!y||y===Vg||d.current!==e||s!=null){const g=new Map;for(let v of e){if(!v)continue;if(s&&s.length>0&&!s.includes(v.id)&&v.rect.current){g.set(v.id,v.rect.current);continue}const S=v.node.current,x=S?new oh(o(S),S):null;v.rect.current=x,x&&g.set(v.id,x)}return g}return y},[e,s,n,f,o]);return b.useEffect(()=>{d.current=e},[e]),b.useEffect(()=>{f||m()},[n,f]),b.useEffect(()=>{s&&s.length>0&&r(null)},[JSON.stringify(s)]),b.useEffect(()=>{f||typeof l!="number"||p.current!==null||(p.current=setTimeout(()=>{m(),p.current=null},l))},[l,f,m,...i]),{droppableRects:_,measureDroppableContainers:m,measuringScheduled:s!=null};function w(){switch(c){case Rs.Always:return!1;case Rs.BeforeDragging:return n;default:return!n}}}function fh(e,t){return ul(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function W1(e,t){return fh(e,t)}function ej(e){let{callback:t,disabled:n}=e;const i=Sc(t),a=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(i)},[i,n]);return b.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Tc(e){let{callback:t,disabled:n}=e;const i=Sc(t),a=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(i)},[n]);return b.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function tj(e){return new oh(Xs(e),e)}function Yg(e,t,n){t===void 0&&(t=tj);const[i,a]=b.useState(null);function s(){a(o=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=o??n)!=null?c:null}const d=t(e);return JSON.stringify(o)===JSON.stringify(d)?o:d})}const r=ej({callback(o){if(e)for(const c of o){const{type:d,target:f}=c;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){s();break}}}}),l=Tc({callback:s});return In(()=>{s(),e?(l==null||l.observe(e),r==null||r.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),r==null||r.disconnect())},[e]),i}function nj(e){const t=fh(e);return gb(e,t)}const Gg=[];function ij(e){const t=b.useRef(e),n=ul(i=>e?i&&i!==Gg&&e&&t.current&&e.parentNode===t.current.parentNode?i:Ec(e):Gg,[e]);return b.useEffect(()=>{t.current=e},[e]),n}function aj(e){const[t,n]=b.useState(null),i=b.useRef(e),a=b.useCallback(s=>{const r=Au(s.target);r&&n(l=>l?(l.set(r,Yd(r)),new Map(l)):null)},[]);return b.useEffect(()=>{const s=i.current;if(e!==s){r(s);const l=e.map(o=>{const c=Au(o);return c?(c.addEventListener("scroll",a,{passive:!0}),[c,Yd(c)]):null}).filter(o=>o!=null);n(l.length?new Map(l):null),i.current=e}return()=>{r(e),r(s)};function r(l){l.forEach(o=>{const c=Au(o);c==null||c.removeEventListener("scroll",a)})}},[a,e]),b.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,r)=>ps(s,r),Vn):Sb(e):Vn,[e,t])}function Kg(e,t){t===void 0&&(t=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},t),b.useEffect(()=>{const i=e!==Vn;i&&!n.current&&(n.current=e),!i&&n.current&&(n.current=null)},[e]),n.current?Jr(e,n.current):Vn}function sj(e){b.useEffect(()=>{if(!wc)return;const t=e.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function rj(e,t){return b.useMemo(()=>e.reduce((n,i)=>{let{eventName:a,handler:s}=i;return n[a]=r=>{s(r,t)},n},{}),[e,t])}function jb(e){return b.useMemo(()=>e?R1(e):null,[e])}const Xg=[];function lj(e,t){t===void 0&&(t=Xs);const[n]=e,i=jb(n?Zt(n):null),[a,s]=b.useState(Xg);function r(){s(()=>e.length?e.map(o=>_b(o)?i:new oh(t(o),o)):Xg)}const l=Tc({callback:r});return In(()=>{l==null||l.disconnect(),r(),e.forEach(o=>l==null?void 0:l.observe(o))},[e]),a}function Ob(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return cl(t)?t:e}function oj(e){let{measure:t}=e;const[n,i]=b.useState(null),a=b.useCallback(c=>{for(const{target:d}of c)if(cl(d)){i(f=>{const h=t(d);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),s=Tc({callback:a}),r=b.useCallback(c=>{const d=Ob(c);s==null||s.disconnect(),d&&(s==null||s.observe(d)),i(d?t(d):null)},[t,s]),[l,o]=Xo(r);return b.useMemo(()=>({nodeRef:l,rect:n,setRef:o}),[n,l,o])}const cj=[{sensor:dh,options:{}},{sensor:ch,options:{}}],uj={current:{}},fo={draggable:{measure:Hg},droppable:{measure:Hg,strategy:Rs.WhileDragging,frequency:Kd.Optimized},dragOverlay:{measure:Xs}};class Cr extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,i;return(n=(i=this.get(t))==null?void 0:i.node.current)!=null?n:void 0}}const dj={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Cr,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Po},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:fo,measureDroppableContainers:Po,windowRect:null,measuringScheduled:!1},Ab={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Po,draggableNodes:new Map,over:null,measureDroppableContainers:Po},fl=b.createContext(Ab),Nb=b.createContext(dj);function fj(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Cr}}}function hj(e,t){switch(t.type){case Tt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Tt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Tt.DragEnd:case Tt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Tt.RegisterDroppable:{const{element:n}=t,{id:i}=n,a=new Cr(e.droppable.containers);return a.set(i,n),{...e,droppable:{...e.droppable,containers:a}}}case Tt.SetDroppableDisabled:{const{id:n,key:i,disabled:a}=t,s=e.droppable.containers.get(n);if(!s||i!==s.key)return e;const r=new Cr(e.droppable.containers);return r.set(n,{...s,disabled:a}),{...e,droppable:{...e.droppable,containers:r}}}case Tt.UnregisterDroppable:{const{id:n,key:i}=t,a=e.droppable.containers.get(n);if(!a||i!==a.key)return e;const s=new Cr(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function mj(e){let{disabled:t}=e;const{active:n,activatorEvent:i,draggableNodes:a}=b.useContext(fl),s=Qo(i),r=Qo(n==null?void 0:n.id);return b.useEffect(()=>{if(!t&&!i&&s&&r!=null){if(!xc(s)||document.activeElement===s.target)return;const l=a.get(r);if(!l)return;const{activatorNode:o,node:c}=l;if(!o.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[o.current,c.current]){if(!d)continue;const f=u1(d);if(f){f.focus();break}}})}},[i,t,a,r,s]),null}function Cb(e,t){let{transform:n,...i}=t;return e!=null&&e.length?e.reduce((a,s)=>s({transform:a,...i}),n):n}function gj(e){return b.useMemo(()=>({draggable:{...fo.draggable,...e==null?void 0:e.draggable},droppable:{...fo.droppable,...e==null?void 0:e.droppable},dragOverlay:{...fo.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function vj(e){let{activeNode:t,measure:n,initialRect:i,config:a=!0}=e;const s=b.useRef(!1),{x:r,y:l}=typeof a=="boolean"?{x:a,y:a}:a;In(()=>{if(!r&&!l||!t){s.current=!1;return}if(s.current||!i)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const d=n(c),f=gb(d,i);if(r||(f.x=0),l||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=yb(c);h&&h.scrollBy({top:f.y,left:f.x})}},[t,r,l,i,n])}const jc=b.createContext({...Vn,scaleX:1,scaleY:1});var Ai;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ai||(Ai={}));const yj=b.memo(function(t){var n,i,a,s;let{id:r,accessibility:l,autoScroll:o=!0,children:c,sensors:d=cj,collisionDetection:f=j1,measuring:h,modifiers:m,...p}=t;const _=b.useReducer(hj,void 0,fj),[w,y]=_,[g,v]=v1(),[S,x]=b.useState(Ai.Uninitialized),T=S===Ai.Initialized,{draggable:{active:E,nodes:j,translate:A},droppable:{containers:k}}=w,Z=E!=null?j.get(E):null,me=b.useRef({initial:null,translated:null}),ae=b.useMemo(()=>{var at;return E!=null?{id:E,data:(at=Z==null?void 0:Z.data)!=null?at:uj,rect:me}:null},[E,Z]),fe=b.useRef(null),[q,D]=b.useState(null),[B,G]=b.useState(null),he=Qr(p,Object.values(p)),Q=dl("DndDescribedBy",r),nt=b.useMemo(()=>k.getEnabled(),[k]),Oe=gj(h),{droppableRects:Ge,measureDroppableContainers:Be,measuringScheduled:z}=F1(nt,{dragging:T,dependencies:[A.x,A.y],config:Oe.droppable}),P=P1(j,E),De=b.useMemo(()=>B?Jo(B):null,[B]),ge=xi(),ke=W1(P,Oe.draggable.measure);vj({activeNode:E!=null?j.get(E):null,config:ge.layoutShiftCompensation,initialRect:ke,measure:Oe.draggable.measure});const W=Yg(P,Oe.draggable.measure,ke),Ae=Yg(P?P.parentElement:null),Ue=b.useRef({activatorEvent:null,active:null,activeNode:P,collisionRect:null,collisions:null,droppableRects:Ge,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ot=k.getNodeFor((n=Ue.current.over)==null?void 0:n.id),Fe=oj({measure:Oe.dragOverlay.measure}),wt=(i=Fe.nodeRef.current)!=null?i:P,St=T?(a=Fe.rect)!=null?a:W:null,F=!!(Fe.nodeRef.current&&Fe.rect),se=nj(F?null:W),ve=jb(wt?Zt(wt):null),Ne=ij(T?ot??P:null),At=lj(Ne),R=Cb(m,{transform:{x:A.x-se.x,y:A.y-se.y,scaleX:1,scaleY:1},activatorEvent:B,active:ae,activeNodeRect:W,containerNodeRect:Ae,draggingNodeRect:St,over:Ue.current.over,overlayNodeRect:Fe.rect,scrollableAncestors:Ne,scrollableAncestorRects:At,windowRect:ve}),$=De?ps(De,A):null,N=aj(Ne),I=Kg(N),V=Kg(N,[W]),K=ps(R,I),Y=St?N1(St,R):null,U=ae&&Y?f({active:ae,collisionRect:Y,droppableRects:Ge,droppableContainers:nt,pointerCoordinates:$}):null,ee=mb(U,"id"),[X,re]=b.useState(null),H=F?R:ps(R,V),oe=O1(H,(s=X==null?void 0:X.rect)!=null?s:null,W),_e=b.useRef(null),it=b.useCallback((at,Mt)=>{let{sensor:kt,options:_n}=Mt;if(fe.current==null)return;const It=j.get(fe.current);if(!It)return;const ct=at.nativeEvent,Ut=new kt({active:fe.current,activeNode:It,event:ct,options:_n,context:Ue,onAbort(ft){if(!j.get(ft))return;const{onDragAbort:xt}=he.current,Vt={id:ft};xt==null||xt(Vt),g({type:"onDragAbort",event:Vt})},onPending(ft,wn,xt,Vt){if(!j.get(ft))return;const{onDragPending:xn}=he.current,En={id:ft,constraint:wn,initialCoordinates:xt,offset:Vt};xn==null||xn(En),g({type:"onDragPending",event:En})},onStart(ft){const wn=fe.current;if(wn==null)return;const xt=j.get(wn);if(!xt)return;const{onDragStart:Vt}=he.current,Sn={activatorEvent:ct,active:{id:wn,data:xt.data,rect:me}};ya.unstable_batchedUpdates(()=>{Vt==null||Vt(Sn),x(Ai.Initializing),y({type:Tt.DragStart,initialCoordinates:ft,active:wn}),g({type:"onDragStart",event:Sn}),D(_e.current),G(ct)})},onMove(ft){y({type:Tt.DragMove,coordinates:ft})},onEnd:Kn(Tt.DragEnd),onCancel:Kn(Tt.DragCancel)});_e.current=Ut;function Kn(ft){return async function(){const{active:xt,collisions:Vt,over:Sn,scrollAdjustedTranslate:xn}=Ue.current;let En=null;if(xt&&xn){const{cancelDrop:ia}=he.current;En={activatorEvent:ct,active:xt,collisions:Vt,delta:xn,over:Sn},ft===Tt.DragEnd&&typeof ia=="function"&&await Promise.resolve(ia(En))&&(ft=Tt.DragCancel)}fe.current=null,ya.unstable_batchedUpdates(()=>{y({type:ft}),x(Ai.Uninitialized),re(null),D(null),G(null),_e.current=null;const ia=ft===Tt.DragEnd?"onDragEnd":"onDragCancel";if(En){const Qs=he.current[ia];Qs==null||Qs(En),g({type:ia,event:En})}})}}},[j]),Gt=b.useCallback((at,Mt)=>(kt,_n)=>{const It=kt.nativeEvent,ct=j.get(_n);if(fe.current!==null||!ct||It.dndKit||It.defaultPrevented)return;const Ut={active:ct};at(kt,Mt.options,Ut)===!0&&(It.dndKit={capturedBy:Mt.sensor},fe.current=_n,it(kt,Mt))},[j,it]),Ft=Z1(d,Gt);sj(d),In(()=>{W&&S===Ai.Initializing&&x(Ai.Initialized)},[W,S]),b.useEffect(()=>{const{onDragMove:at}=he.current,{active:Mt,activatorEvent:kt,collisions:_n,over:It}=Ue.current;if(!Mt||!kt)return;const ct={active:Mt,activatorEvent:kt,collisions:_n,delta:{x:K.x,y:K.y},over:It};ya.unstable_batchedUpdates(()=>{at==null||at(ct),g({type:"onDragMove",event:ct})})},[K.x,K.y]),b.useEffect(()=>{const{active:at,activatorEvent:Mt,collisions:kt,droppableContainers:_n,scrollAdjustedTranslate:It}=Ue.current;if(!at||fe.current==null||!Mt||!It)return;const{onDragOver:ct}=he.current,Ut=_n.get(ee),Kn=Ut&&Ut.rect.current?{id:Ut.id,rect:Ut.rect.current,data:Ut.data,disabled:Ut.disabled}:null,ft={active:at,activatorEvent:Mt,collisions:kt,delta:{x:It.x,y:It.y},over:Kn};ya.unstable_batchedUpdates(()=>{re(Kn),ct==null||ct(ft),g({type:"onDragOver",event:ft})})},[ee]),In(()=>{Ue.current={activatorEvent:B,active:ae,activeNode:P,collisionRect:Y,collisions:U,droppableRects:Ge,draggableNodes:j,draggingNode:wt,draggingNodeRect:St,droppableContainers:k,over:X,scrollableAncestors:Ne,scrollAdjustedTranslate:K},me.current={initial:St,translated:Y}},[ae,P,U,Y,j,wt,St,Ge,k,X,Ne,K]),X1({...ge,delta:A,draggingRect:Y,pointerCoordinates:$,scrollableAncestors:Ne,scrollableAncestorRects:At});const Gn=b.useMemo(()=>({active:ae,activeNode:P,activeNodeRect:W,activatorEvent:B,collisions:U,containerNodeRect:Ae,dragOverlay:Fe,draggableNodes:j,droppableContainers:k,droppableRects:Ge,over:X,measureDroppableContainers:Be,scrollableAncestors:Ne,scrollableAncestorRects:At,measuringConfiguration:Oe,measuringScheduled:z,windowRect:ve}),[ae,P,W,B,U,Ae,Fe,j,k,Ge,X,Be,Ne,At,Oe,z,ve]),Ua=b.useMemo(()=>({activatorEvent:B,activators:Ft,active:ae,activeNodeRect:W,ariaDescribedById:{draggable:Q},dispatch:y,draggableNodes:j,over:X,measureDroppableContainers:Be}),[B,Ft,ae,W,y,Q,j,X,Be]);return lt.createElement(db.Provider,{value:v},lt.createElement(fl.Provider,{value:Ua},lt.createElement(Nb.Provider,{value:Gn},lt.createElement(jc.Provider,{value:oe},c)),lt.createElement(mj,{disabled:(l==null?void 0:l.restoreFocus)===!1})),lt.createElement(b1,{...l,hiddenTextDescribedById:Q}));function xi(){const at=(q==null?void 0:q.autoScrollEnabled)===!1,Mt=typeof o=="object"?o.enabled===!1:o===!1,kt=T&&!at&&!Mt;return typeof o=="object"?{...o,enabled:kt}:{enabled:kt}}}),pj=b.createContext(null),Qg="button",bj="Draggable";function _j(e){let{id:t,data:n,disabled:i=!1,attributes:a}=e;const s=dl(bj),{activators:r,activatorEvent:l,active:o,activeNodeRect:c,ariaDescribedById:d,draggableNodes:f,over:h}=b.useContext(fl),{role:m=Qg,roleDescription:p="draggable",tabIndex:_=0}=a??{},w=(o==null?void 0:o.id)===t,y=b.useContext(w?jc:pj),[g,v]=Xo(),[S,x]=Xo(),T=rj(r,t),E=Qr(n);In(()=>(f.set(t,{id:t,key:s,node:g,activatorNode:S,data:E}),()=>{const A=f.get(t);A&&A.key===s&&f.delete(t)}),[f,t]);const j=b.useMemo(()=>({role:m,tabIndex:_,"aria-disabled":i,"aria-pressed":w&&m===Qg?!0:void 0,"aria-roledescription":p,"aria-describedby":d.draggable}),[i,m,_,w,p,d.draggable]);return{active:o,activatorEvent:l,activeNodeRect:c,attributes:j,isDragging:w,listeners:i?void 0:T,node:g,over:h,setNodeRef:v,setActivatorNodeRef:x,transform:y}}function Db(){return b.useContext(Nb)}const wj="Droppable",Sj={timeout:25};function Rb(e){let{data:t,disabled:n=!1,id:i,resizeObserverConfig:a}=e;const s=dl(wj),{active:r,dispatch:l,over:o,measureDroppableContainers:c}=b.useContext(fl),d=b.useRef({disabled:n}),f=b.useRef(!1),h=b.useRef(null),m=b.useRef(null),{disabled:p,updateMeasurementsFor:_,timeout:w}={...Sj,...a},y=Qr(_??i),g=b.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(y.current)?y.current:[y.current]),m.current=null},w)},[w]),v=Tc({callback:g,disabled:p||!r}),S=b.useCallback((j,A)=>{v&&(A&&(v.unobserve(A),f.current=!1),j&&v.observe(j))},[v]),[x,T]=Xo(S),E=Qr(t);return b.useEffect(()=>{!v||!x.current||(v.disconnect(),f.current=!1,v.observe(x.current))},[x,v]),b.useEffect(()=>(l({type:Tt.RegisterDroppable,element:{id:i,key:s,disabled:n,node:x,rect:h,data:E}}),()=>l({type:Tt.UnregisterDroppable,key:s,id:i})),[i]),b.useEffect(()=>{n!==d.current.disabled&&(l({type:Tt.SetDroppableDisabled,id:i,key:s,disabled:n}),d.current.disabled=n)},[i,s,n,l]),{active:r,rect:h,isOver:(o==null?void 0:o.id)===i,node:x,over:o,setNodeRef:T}}function xj(e){let{animation:t,children:n}=e;const[i,a]=b.useState(null),[s,r]=b.useState(null),l=Qo(n);return!n&&!i&&l&&a(l),In(()=>{if(!s)return;const o=i==null?void 0:i.key,c=i==null?void 0:i.props.id;if(o==null||c==null){a(null);return}Promise.resolve(t(c,s)).then(()=>{a(null)})},[t,i,s]),lt.createElement(lt.Fragment,null,n,i?b.cloneElement(i,{ref:r}):null)}const Ej={x:0,y:0,scaleX:1,scaleY:1};function Tj(e){let{children:t}=e;return lt.createElement(fl.Provider,{value:Ab},lt.createElement(jc.Provider,{value:Ej},t))}const jj={position:"fixed",touchAction:"none"},Oj=e=>xc(e)?"transform 250ms ease":void 0,Aj=b.forwardRef((e,t)=>{let{as:n,activatorEvent:i,adjustScale:a,children:s,className:r,rect:l,style:o,transform:c,transition:d=Oj}=e;if(!l)return null;const f=a?c:{...c,scaleX:1,scaleY:1},h={...jj,width:l.width,height:l.height,top:l.top,left:l.left,transform:Wi.Transform.toString(f),transformOrigin:a&&i?w1(i,l):void 0,transition:typeof d=="function"?d(i):d,...o};return lt.createElement(n,{className:r,style:h,ref:t},s)}),Nj=e=>t=>{let{active:n,dragOverlay:i}=t;const a={},{styles:s,className:r}=e;if(s!=null&&s.active)for(const[l,o]of Object.entries(s.active))o!==void 0&&(a[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,o));if(s!=null&&s.dragOverlay)for(const[l,o]of Object.entries(s.dragOverlay))o!==void 0&&i.node.style.setProperty(l,o);return r!=null&&r.active&&n.node.classList.add(r.active),r!=null&&r.dragOverlay&&i.node.classList.add(r.dragOverlay),function(){for(const[o,c]of Object.entries(a))n.node.style.setProperty(o,c);r!=null&&r.active&&n.node.classList.remove(r.active)}},Cj=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Wi.Transform.toString(t)},{transform:Wi.Transform.toString(n)}]},Dj={duration:250,easing:"ease",keyframes:Cj,sideEffects:Nj({styles:{active:{opacity:"0"}}})};function Rj(e){let{config:t,draggableNodes:n,droppableContainers:i,measuringConfiguration:a}=e;return Sc((s,r)=>{if(t===null)return;const l=n.get(s);if(!l)return;const o=l.node.current;if(!o)return;const c=Ob(r);if(!c)return;const{transform:d}=Zt(r).getComputedStyle(r),f=vb(d);if(!f)return;const h=typeof t=="function"?t:Mj(t);return xb(o,a.draggable.measure),h({active:{id:s,data:l.data,node:o,rect:a.draggable.measure(o)},draggableNodes:n,dragOverlay:{node:r,rect:a.dragOverlay.measure(c)},droppableContainers:i,measuringConfiguration:a,transform:f})})}function Mj(e){const{duration:t,easing:n,sideEffects:i,keyframes:a}={...Dj,...e};return s=>{let{active:r,dragOverlay:l,transform:o,...c}=s;if(!t)return;const d={x:l.rect.left-r.rect.left,y:l.rect.top-r.rect.top},f={scaleX:o.scaleX!==1?r.rect.width*o.scaleX/l.rect.width:1,scaleY:o.scaleY!==1?r.rect.height*o.scaleY/l.rect.height:1},h={x:o.x-d.x,y:o.y-d.y,...f},m=a({...c,active:r,dragOverlay:l,transform:{initial:o,final:h}}),[p]=m,_=m[m.length-1];if(JSON.stringify(p)===JSON.stringify(_))return;const w=i==null?void 0:i({active:r,dragOverlay:l,...c}),y=l.node.animate(m,{duration:t,easing:n,fill:"forwards"});return new Promise(g=>{y.onfinish=()=>{w==null||w(),g()}})}}let Jg=0;function kj(e){return b.useMemo(()=>{if(e!=null)return Jg++,Jg},[e])}const Uj=lt.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:i,style:a,transition:s,modifiers:r,wrapperElement:l="div",className:o,zIndex:c=999}=e;const{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggableNodes:p,droppableContainers:_,dragOverlay:w,over:y,measuringConfiguration:g,scrollableAncestors:v,scrollableAncestorRects:S,windowRect:x}=Db(),T=b.useContext(jc),E=kj(f==null?void 0:f.id),j=Cb(r,{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggingNodeRect:w.rect,over:y,overlayNodeRect:w.rect,scrollableAncestors:v,scrollableAncestorRects:S,transform:T,windowRect:x}),A=fh(h),k=Rj({config:i,draggableNodes:p,droppableContainers:_,measuringConfiguration:g}),Z=A?w.setRef:void 0;return lt.createElement(Tj,null,lt.createElement(xj,{animation:k},f&&E?lt.createElement(Aj,{key:E,id:f.id,ref:Z,as:l,activatorEvent:d,adjustScale:t,className:o,transition:s,rect:A,style:{zIndex:c,...a},transform:j},n):null))});function Hi(e,t,n){const i=e.slice();return i.splice(n<0?i.length+n:n,0,i.splice(t,1)[0]),i}function zj(e,t){return e.reduce((n,i,a)=>{const s=t.get(i);return s&&(n[a]=s),n},Array(e.length))}function Ql(e){return e!==null&&e>=0}function Lj(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Bj(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Mb=e=>{let{rects:t,activeIndex:n,overIndex:i,index:a}=e;const s=Hi(t,i,n),r=t[a],l=s[a];return!l||!r?null:{x:l.left-r.left,y:l.top-r.top,scaleX:l.width/r.width,scaleY:l.height/r.height}},Jl={scaleX:1,scaleY:1},ir=e=>{var t;let{activeIndex:n,activeNodeRect:i,index:a,rects:s,overIndex:r}=e;const l=(t=s[n])!=null?t:i;if(!l)return null;if(a===n){const c=s[r];return c?{x:0,y:n<r?c.top+c.height-(l.top+l.height):c.top-l.top,...Jl}:null}const o=Hj(s,a,n);return a>n&&a<=r?{x:0,y:-l.height-o,...Jl}:a<n&&a>=r?{x:0,y:l.height+o,...Jl}:{x:0,y:0,...Jl}};function Hj(e,t,n){const i=e[t],a=e[t-1],s=e[t+1];return i?n<t?a?i.top-(a.top+a.height):s?s.top-(i.top+i.height):0:s?s.top-(i.top+i.height):a?i.top-(a.top+a.height):0:0}const kb="Sortable",Ub=lt.createContext({activeIndex:-1,containerId:kb,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Mb,disabled:{draggable:!1,droppable:!1}});function ar(e){let{children:t,id:n,items:i,strategy:a=Mb,disabled:s=!1}=e;const{active:r,dragOverlay:l,droppableRects:o,over:c,measureDroppableContainers:d}=Db(),f=dl(kb,n),h=l.rect!==null,m=b.useMemo(()=>i.map(T=>typeof T=="object"&&"id"in T?T.id:T),[i]),p=r!=null,_=r?m.indexOf(r.id):-1,w=c?m.indexOf(c.id):-1,y=b.useRef(m),g=!Lj(m,y.current),v=w!==-1&&_===-1||g,S=Bj(s);In(()=>{g&&p&&d(m)},[g,m,p,d]),b.useEffect(()=>{y.current=m},[m]);const x=b.useMemo(()=>({activeIndex:_,containerId:f,disabled:S,disableTransforms:v,items:m,overIndex:w,useDragOverlay:h,sortedRects:zj(m,o),strategy:a}),[_,f,S.draggable,S.droppable,v,m,w,o,h,a]);return lt.createElement(Ub.Provider,{value:x},t)}const qj=e=>{let{id:t,items:n,activeIndex:i,overIndex:a}=e;return Hi(n,i,a).indexOf(t)},$j=e=>{let{containerId:t,isSorting:n,wasDragging:i,index:a,items:s,newIndex:r,previousItems:l,previousContainerId:o,transition:c}=e;return!c||!i||l!==s&&a===r?!1:n?!0:r!==a&&t===o},Ij={duration:200,easing:"ease"},zb="transform",Vj=Wi.Transition.toString({property:zb,duration:0,easing:"linear"}),Yj={roleDescription:"sortable"};function Gj(e){let{disabled:t,index:n,node:i,rect:a}=e;const[s,r]=b.useState(null),l=b.useRef(n);return In(()=>{if(!t&&n!==l.current&&i.current){const o=a.current;if(o){const c=Xs(i.current,{ignoreTransform:!0}),d={x:o.left-c.left,y:o.top-c.top,scaleX:o.width/c.width,scaleY:o.height/c.height};(d.x||d.y)&&r(d)}}n!==l.current&&(l.current=n)},[t,n,i,a]),b.useEffect(()=>{s&&r(null)},[s]),s}function Lb(e){let{animateLayoutChanges:t=$j,attributes:n,disabled:i,data:a,getNewIndex:s=qj,id:r,strategy:l,resizeObserverConfig:o,transition:c=Ij}=e;const{items:d,containerId:f,activeIndex:h,disabled:m,disableTransforms:p,sortedRects:_,overIndex:w,useDragOverlay:y,strategy:g}=b.useContext(Ub),v=Kj(i,m),S=d.indexOf(r),x=b.useMemo(()=>({sortable:{containerId:f,index:S,items:d},...a}),[f,a,S,d]),T=b.useMemo(()=>d.slice(d.indexOf(r)),[d,r]),{rect:E,node:j,isOver:A,setNodeRef:k}=Rb({id:r,data:x,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...o}}),{active:Z,activatorEvent:me,activeNodeRect:ae,attributes:fe,setNodeRef:q,listeners:D,isDragging:B,over:G,setActivatorNodeRef:he,transform:Q}=_j({id:r,data:x,attributes:{...Yj,...n},disabled:v.draggable}),nt=r1(k,q),Oe=!!Z,Ge=Oe&&!p&&Ql(h)&&Ql(w),Be=!y&&B,z=Be&&Ge?Q:null,De=Ge?z??(l??g)({rects:_,activeNodeRect:ae,activeIndex:h,overIndex:w,index:S}):null,ge=Ql(h)&&Ql(w)?s({id:r,items:d,activeIndex:h,overIndex:w}):S,ke=Z==null?void 0:Z.id,W=b.useRef({activeId:ke,items:d,newIndex:ge,containerId:f}),Ae=d!==W.current.items,Ue=t({active:Z,containerId:f,isDragging:B,isSorting:Oe,id:r,index:S,items:d,newIndex:W.current.newIndex,previousItems:W.current.items,previousContainerId:W.current.containerId,transition:c,wasDragging:W.current.activeId!=null}),ot=Gj({disabled:!Ue,index:S,node:j,rect:E});return b.useEffect(()=>{Oe&&W.current.newIndex!==ge&&(W.current.newIndex=ge),f!==W.current.containerId&&(W.current.containerId=f),d!==W.current.items&&(W.current.items=d)},[Oe,ge,f,d]),b.useEffect(()=>{if(ke===W.current.activeId)return;if(ke!=null&&W.current.activeId==null){W.current.activeId=ke;return}const wt=setTimeout(()=>{W.current.activeId=ke},50);return()=>clearTimeout(wt)},[ke]),{active:Z,activeIndex:h,attributes:fe,data:x,rect:E,index:S,newIndex:ge,items:d,isOver:A,isSorting:Oe,isDragging:B,listeners:D,node:j,overIndex:w,over:G,setNodeRef:nt,setActivatorNodeRef:he,setDroppableNodeRef:k,setDraggableNodeRef:q,transform:ot??De,transition:Fe()};function Fe(){if(ot||Ae&&W.current.newIndex===S)return Vj;if(!(Be&&!xc(me)||!c)&&(Oe||Ue))return Wi.Transition.toString({...c,property:zb})}}function Kj(e,t){var n,i;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(i=e==null?void 0:e.droppable)!=null?i:t.droppable}}function Fo(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Xj=[Re.Down,Re.Right,Re.Up,Re.Left],Qj=(e,t)=>{let{context:{active:n,collisionRect:i,droppableRects:a,droppableContainers:s,over:r,scrollableAncestors:l}}=t;if(Xj.includes(e.code)){if(e.preventDefault(),!n||!i)return;const o=[];s.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const h=a.get(f.id);if(h)switch(e.code){case Re.Down:i.top<h.top&&o.push(f);break;case Re.Up:i.top>h.top&&o.push(f);break;case Re.Left:i.left>h.left&&o.push(f);break;case Re.Right:i.left<h.left&&o.push(f);break}});const c=E1({collisionRect:i,droppableRects:a,droppableContainers:o});let d=mb(c,"id");if(d===(r==null?void 0:r.id)&&c.length>1&&(d=c[1].id),d!=null){const f=s.get(n.id),h=s.get(d),m=h?a.get(h.id):null,p=h==null?void 0:h.node.current;if(p&&m&&f&&h){const w=Ec(p).some((T,E)=>l[E]!==T),y=Bb(f,h),g=Jj(f,h),v=w||!y?{x:0,y:0}:{x:g?i.width-m.width:0,y:g?i.height-m.height:0},S={x:m.left,y:m.top};return v.x&&v.y?S:Jr(S,v)}}}};function Bb(e,t){return!Fo(e)||!Fo(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Jj(e,t){return!Fo(e)||!Fo(t)||!Bb(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const we=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`},ma=e=>{const t=String(e.getFullYear()).slice(2),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),s=["","","","","","",""][e.getDay()];return`${t}.${n}.${i}(${s})`},Ga=e=>{const t=new Date(e),n=String(t.getFullYear()).slice(2),i=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),o=["","","","","","",""][t.getDay()];return`${n}.${i}.${a}(${o}) ${s}:${r}`},Pj=e=>{const t=new Date;return we(e)===we(t)},Zj=()=>{const[e,t]=b.useState(null),[n,i]=b.useState(!0);return b.useEffect(()=>{qe.auth.getSession().then(({data:{session:l}})=>{t(l),i(!1)});const{data:{subscription:r}}=qe.auth.onAuthStateChange((l,o)=>{t(o)});return()=>r.unsubscribe()},[]),{session:e,authLoading:n,handleGoogleLogin:async()=>{try{const{error:r}=await qe.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/todo-note/"}});if(r)throw r}catch(r){alert(" : "+r.message)}},handleLogout:async()=>{try{const{error:r}=await qe.auth.signOut();if(r)throw r}catch(r){alert(" : "+r.message)}}}};function Fj({showSidebar:e,setShowSidebar:t,session:n,viewMode:i,setViewMode:a,onOpenRoutine:s,onOpenGanttChart:r,onOpenEncouragementModal:l,onOpenAddSection:o,onOpenHiddenSections:c,onLogout:d}){var f,h;return u.jsxs(u.Fragment,{children:[e&&u.jsx("div",{className:"sidebar-overlay",onClick:()=>t(!1)}),u.jsxs("div",{className:`sidebar ${e?"open":""}`,children:[u.jsxs("div",{className:"sidebar-header",children:[u.jsx("h2",{children:""}),u.jsx("button",{className:"sidebar-close",onClick:()=>t(!1),children:""})]}),n&&n.user&&u.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[((f=n.user.user_metadata)==null?void 0:f.avatar_url)&&u.jsx("img",{src:n.user.user_metadata.avatar_url,alt:"",style:{width:"40px",height:"40px",borderRadius:"50%"}}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((h=n.user.user_metadata)==null?void 0:h.full_name)||n.user.email}),u.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.user.email})]})]}),u.jsxs("div",{className:"sidebar-content",children:[u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{const m=i==="vertical"?"horizontal":"vertical";a(m),localStorage.setItem("viewMode",m),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:i==="vertical"?"":""}),u.jsx("span",{children:i==="vertical"?" ":" "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{o(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:" "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{c(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:"  "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{s(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:" "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{r(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:" "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{l(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:"  "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{confirm(" ?")&&d()},style:{marginTop:"auto",borderTop:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 100, 100, 0.9)"},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:""})]})]})]})]})}function Wj({selectedDate:e,onDateChange:t,onPrevDay:n,onNextDay:i}){return u.jsxs("div",{className:"date-nav-section",children:[u.jsxs("div",{className:"date-display-wrapper",children:[u.jsx("span",{className:"date-display",children:ma(e)}),u.jsx("input",{type:"date",value:we(e),onChange:t,className:"date-picker-input"})]}),u.jsx("button",{onClick:n,className:"date-nav-button",children:""}),u.jsx("button",{onClick:i,className:"date-nav-button",children:""})]})}function eO({showSidebar:e,setShowSidebar:t,selectedDate:n,setSelectedDate:i,onDateChange:a,onPrevDay:s,onNextDay:r,showEncouragementEmoji:l,currentEncouragementMessage:o,onEncouragementClick:c,onQuickAdd:d,onOpenMemo:f}){const[h,m]=b.useState(""),[p,_]=b.useState(!1),w=async y=>{if(y.key==="Enter"&&!y.shiftKey&&h.trim()){y.preventDefault(),_(!0);try{await d(h.trim()),m("")}catch(g){console.error("Quick add error:",g)}finally{_(!1)}}};return u.jsx("div",{className:"header-fixed",children:u.jsxs("div",{className:"settings-bar",children:[u.jsx("button",{className:"hamburger-menu",onClick:()=>t(!e),title:"",children:u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("rect",{x:"2",y:"4",width:"16",height:"2",rx:"1",fill:"currentColor"}),u.jsx("rect",{x:"2",y:"9",width:"16",height:"2",rx:"1",fill:"currentColor"}),u.jsx("rect",{x:"2",y:"14",width:"16",height:"2",rx:"1",fill:"currentColor"})]})}),u.jsx(Wj,{selectedDate:n,onDateChange:a,onPrevDay:s,onNextDay:r}),u.jsx("div",{className:"encouragement-section",children:Pj(n)?u.jsx("div",{className:"encouragement-message",onClick:c,title:"    !",children:l?u.jsx("span",{className:"encouragement-emoji",children:"  "}):o||"!"}):u.jsx("button",{onClick:()=>i(new Date),className:"today-link",title:" ",children:"  "})}),u.jsx("div",{className:"quick-input-wrapper",children:u.jsx("input",{type:"text",value:h,onChange:y=>m(y.target.value),onKeyDown:w,placeholder:" Quick   (Enter )",className:"quick-input",disabled:p})}),u.jsx("button",{className:"header-memo-button",onClick:f,title:" ",children:"  "})]})})}function tO({viewMode:e,currentSectionIndex:t,sectionsContainerRef:n,visibleSectionCount:i=3}){return e!=="horizontal"?null:u.jsx("div",{className:"section-pagination-dots",onTouchStart:a=>{const s=a.touches[0];a.currentTarget.dataset.touchStartX=s.clientX,a.currentTarget.dataset.touchStartTime=Date.now()},onTouchMove:a=>{a.currentTarget.dataset.touchMoved="true"},onTouchEnd:a=>{const s=parseFloat(a.currentTarget.dataset.touchStartX||"0"),r=parseInt(a.currentTarget.dataset.touchStartTime||"0"),l=a.currentTarget.dataset.touchMoved==="true",o=a.changedTouches[0].clientX,c=Date.now()-r;if(delete a.currentTarget.dataset.touchStartX,delete a.currentTarget.dataset.touchStartTime,delete a.currentTarget.dataset.touchMoved,l&&c<500){const d=s-o,f=n.current;if(!f)return;const h=f.querySelectorAll(".section-block");Math.abs(d)>50&&(d>0&&t<h.length-1?h[t+1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}):d<0&&t>0&&h[t-1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}))}},children:Array.from({length:i},(a,s)=>u.jsx("button",{className:`pagination-dot ${t===s?"active":""}`,onClick:()=>{const r=n.current;if(!r)return;const l=r.querySelectorAll(".section-block");l[s]&&l[s].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},s))})}const Qn={async get(e,t=null){try{const{data:n,error:i}=await qe.from("user_settings").select("setting_value").eq("setting_key",e).maybeSingle();return i?(console.error(`   [${e}]:`,i.message),t):n&&n.setting_value?JSON.parse(n.setting_value):t}catch(n){return console.error(`   [${e}]:`,n.message),t}},async set(e,t,n){if(!n)return console.warn(`   [${e}]:  ID `),!1;try{const{data:i,error:a}=await qe.from("user_settings").select("id").eq("setting_key",e).maybeSingle();if(a)return console.error(`   [${e}]:`,a.message),!1;const s=JSON.stringify(t);if(i){const{error:r}=await qe.from("user_settings").update({setting_value:s,updated_at:new Date().toISOString()}).eq("setting_key",e);if(r)return console.error(`   [${e}]:`,r.message),!1}else{const{error:r}=await qe.from("user_settings").insert([{setting_key:e,setting_value:s,user_id:n}]);if(r)return console.error(`   [${e}]:`,r.message),!1}return!0}catch(i){return console.error(`   [${e}]:`,i.message),!1}},async remove(e){try{const{error:t}=await qe.from("user_settings").delete().eq("setting_key",e);return t?(console.error(`   [${e}]:`,t.message),!1):!0}catch(t){return console.error(`   [${e}]:`,t.message),!1}}},Jn={SECTION_ORDER:"section_order",SECTION_TITLES:"section_titles",SECTION_ICONS:"section_icons",CUSTOM_SECTIONS:"custom_sections",HIDDEN_SECTIONS:"hidden_sections"},Du={timeline:"",routine:"",normal:""},Xd=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function Qd({title:e,icon:t,sectionId:n,onIconChange:i,editable:a=!1,onTitleChange:s,showHideButton:r=!1,onHide:l,showDeleteButton:o=!1,onDelete:c,customActions:d,settingsMenuItems:f=[]}){var A,k,Z,me;const[h,m]=b.useState(!1),[p,_]=b.useState(e),[w,y]=b.useState(!1),[g,v]=b.useState(!1),S=b.useRef(null),x=b.useRef(null),T=()=>{p.trim()&&p!==e&&(s==null||s(p.trim())),m(!1)},E=()=>{_(e),m(!1)};b.useEffect(()=>{const ae=fe=>{if(w&&S.current&&!S.current.contains(fe.target)){const q=document.querySelector(".section-settings-dropdown");q&&!q.contains(fe.target)&&y(!1)}if(g&&x.current&&!x.current.contains(fe.target)){const q=document.querySelector(".emoji-picker-dropdown");q&&!q.contains(fe.target)&&v(!1)}};return document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae)}},[w,g]);const j=ae=>{i&&n&&i(n,ae),v(!1)};return u.jsxs("div",{className:"section-header",children:[u.jsxs("div",{className:"section-title-container",children:[t&&i&&u.jsxs("div",{style:{position:"relative"},children:[u.jsx("span",{ref:x,className:"section-icon-button",onClick:()=>v(!g),title:" ",children:t}),g&&Uu.createPortal(u.jsx("div",{className:"emoji-picker-dropdown",style:{position:"fixed",top:`${((A=x.current)==null?void 0:A.getBoundingClientRect().bottom)+5}px`,left:`${(k=x.current)==null?void 0:k.getBoundingClientRect().left}px`},children:Xd.map((ae,fe)=>u.jsx("button",{className:"emoji-option",onClick:()=>j(ae),children:ae},fe))}),document.body)]}),t&&!i&&u.jsx("span",{className:"section-icon",children:t}),h?u.jsx("div",{className:"section-title-edit-wrapper",children:u.jsx("input",{type:"text",value:p,onChange:ae=>_(ae.target.value),onBlur:T,onKeyDown:ae=>{ae.key==="Enter"?T():ae.key==="Escape"&&E()},className:"section-title-input",autoFocus:!0})}):u.jsx("h2",{className:`section-title ${a?"editable":""}`,onClick:()=>a&&m(!0),children:e})]}),u.jsxs("div",{className:"section-actions",children:[d,f.length>0&&u.jsxs("div",{style:{position:"relative"},children:[u.jsx("button",{ref:S,className:"section-action-button settings-button",onClick:()=>y(!w),title:"",children:""}),w&&Uu.createPortal(u.jsx("div",{className:"section-settings-dropdown",style:{position:"fixed",top:`${((Z=S.current)==null?void 0:Z.getBoundingClientRect().bottom)+5}px`,left:`${(me=S.current)==null?void 0:me.getBoundingClientRect().left}px`},children:f.map((ae,fe)=>u.jsxs("button",{className:"settings-menu-item",onClick:()=>{ae.onClick(),y(!1)},children:[u.jsx("span",{children:ae.icon}),u.jsx("span",{children:ae.label})]},fe))}),document.body)]})]})]})}function Ru({title:e,icon:t,sectionId:n,onIconChange:i,className:a,inputValue:s,setInputValue:r,onAddTodo:l,isAdding:o,placeholder:c,children:d,editable:f=!1,onTitleChange:h,settingsMenuItems:m=[],headerActions:p}){return u.jsxs("div",{className:a,children:[u.jsx(Qd,{title:e,icon:t,sectionId:n,onIconChange:i,editable:f,onTitleChange:h,settingsMenuItems:m,customActions:p}),u.jsxs("div",{className:"section-input",children:[u.jsx("input",{type:"text",value:s,onChange:_=>r(_.target.value),onKeyDown:_=>{_.key==="Enter"&&l()},placeholder:c,className:"todo-input",disabled:o}),u.jsx("button",{onClick:l,className:"add-button",disabled:o,children:""})]}),d]})}function nO({todo:e,index:t,totalCount:n,hour:i,startHour:a,endHour:s,onToggle:r,onRemoveFromTimeline:l,onMoveUpInTimeline:o,onMoveDownInTimeline:c}){const[d,f]=b.useState(!1),{attributes:h,listeners:m,setNodeRef:p,transform:_,transition:w,isDragging:y}=Lb({id:`timeline-todo-${e.id}`,data:{type:"timeline-todo",todo:e}}),g={transform:Wi.Transform.toString(_),transition:w,opacity:y?.5:1},v=!(t===0&&i<=a),S=!(t===n-1&&i>=s);return b.useEffect(()=>{const x=T=>{d&&!T.target.closest(".timeline-todo-handle-wrapper")&&f(!1)};return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[d]),u.jsxs("div",{ref:p,style:g,className:`timeline-scheduled-todo ${y?"dragging":""}`,children:[u.jsxs("div",{className:"timeline-todo-handle-wrapper",children:[u.jsx("span",{className:"timeline-todo-handle",...h,...m,onClick:x=>{x.stopPropagation(),f(!d)},title:":   /  : "}),d&&u.jsxs("div",{className:"timeline-move-menu",children:[v&&u.jsxs("button",{className:"timeline-move-menu-item move-to-top",onClick:x=>{x.stopPropagation(),o(e.id),f(!1)},children:[u.jsx("span",{children:""})," "]}),S&&u.jsxs("button",{className:"timeline-move-menu-item move-to-bottom",onClick:x=>{x.stopPropagation(),c(e.id),f(!1)},children:[u.jsx("span",{children:""})," "]}),u.jsxs("button",{className:"timeline-move-menu-item remove",onClick:x=>{x.stopPropagation(),l(e.id),f(!1)},children:[u.jsx("span",{children:""})," "]})]})]}),u.jsxs("label",{className:"timeline-todo-checkbox",children:[u.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>r(e.id)}),u.jsx("span",{className:"timeline-checkbox-custom"})]}),u.jsx("span",{className:`timeline-todo-text ${e.completed?"completed":""}`,children:e.text}),u.jsx("button",{className:"timeline-todo-remove-button",onClick:x=>{x.stopPropagation(),l(e.id)},title:" ",children:""})]})}function iO({hour:e,startHour:t,endHour:n,scheduledTodos:i,onToggle:a,onRemoveFromTimeline:s,onMoveUpInTimeline:r,onMoveDownInTimeline:l}){const{isOver:o,setNodeRef:c}=Rb({id:`timeline-${e}`,data:{type:"timeline",hour:e}}),d=i.filter(f=>f.scheduled_time?parseInt(f.scheduled_time.split(":")[0],10)===e:!1).sort((f,h)=>{const m=parseInt(f.scheduled_time.split(":")[1],10),p=parseInt(h.scheduled_time.split(":")[1],10);return m-p});return u.jsxs("div",{ref:c,className:`timeline-hour-slot ${o?"timeline-drop-active":""}`,children:[u.jsx("div",{className:"timeline-hour-label",children:e===24?"00:00":`${e.toString().padStart(2,"0")}:00`}),u.jsx("div",{className:"timeline-hour-content",children:d.map((f,h)=>u.jsx(nO,{todo:f,index:h,totalCount:d.length,hour:e,startHour:t,endHour:n,onToggle:a,onRemoveFromTimeline:s,onMoveUpInTimeline:r,onMoveDownInTimeline:l},f.id))})]})}const Pg=b.forwardRef(function({startHour:t=6,endHour:n=24,scheduledTodos:i=[],onToggle:a,onRemoveFromTimeline:s,onMoveUpInTimeline:r,onMoveDownInTimeline:l},o){const[c,d]=b.useState(new Date),f=b.useRef(null),h=b.useRef(null),m=()=>{if(h.current&&f.current){const g=f.current,v=h.current,S=g.clientHeight,x=v.offsetTop;g.scrollTo({top:x-S/2,behavior:"smooth"})}};b.useImperativeHandle(o,()=>({scrollToNow:m})),b.useEffect(()=>{const g=setInterval(()=>{d(new Date)},6e4);return()=>clearInterval(g)},[]),b.useEffect(()=>{if(h.current&&f.current){const g=f.current,v=h.current,S=g.clientHeight,x=v.offsetTop;g.scrollTop=x-S/2}},[]);const p=[];for(let g=t;g<=n;g++)p.push(g);const _=()=>{const g=c.getHours(),v=c.getMinutes(),S=g*60+v,x=t*60,T=n*60,E=T-x;return S<x?0:S>T?100:(S-x)/E*100},w=()=>{const g=c.getHours();return g>=t&&g<=n},y=()=>c.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1});return u.jsx("div",{className:"timeline-view",ref:f,children:u.jsxs("div",{className:"timeline-grid",children:[p.map(g=>u.jsx(iO,{hour:g,startHour:t,endHour:n,scheduledTodos:i,onToggle:a,onRemoveFromTimeline:s,onMoveUpInTimeline:r,onMoveDownInTimeline:l},g)),w()&&u.jsxs("div",{ref:h,className:"timeline-current-time",style:{top:`${_()}%`},children:[u.jsx("div",{className:"timeline-current-time-dot"}),u.jsx("div",{className:"timeline-current-time-line"}),u.jsx("div",{className:"timeline-current-time-label",children:y()})]})]})})});function aO({todoId:e,isFirst:t,isLast:n,onMoveUp:i,onMoveDown:a,onMoveToTop:s,onMoveToBottom:r,onDelete:l,onClose:o}){const c=d=>{d(),o()};return u.jsxs("div",{className:"move-menu",children:[!t&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:"move-menu-item move-to-top",onClick:d=>{d.stopPropagation(),c(()=>s&&s(e))},children:[u.jsx("span",{className:"move-menu-icon",children:""}),"  "]}),u.jsxs("button",{className:"move-menu-item",onClick:d=>{d.stopPropagation(),c(()=>i&&i(e))},children:[u.jsx("span",{className:"move-menu-icon",children:""})," "]})]}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:"move-menu-item",onClick:d=>{d.stopPropagation(),c(()=>a&&a(e))},children:[u.jsx("span",{className:"move-menu-icon",children:""})," "]}),u.jsxs("button",{className:"move-menu-item move-to-bottom",onClick:d=>{d.stopPropagation(),c(()=>r&&r(e))},children:[u.jsx("span",{className:"move-menu-icon",children:""}),"  "]})]}),u.jsxs("button",{className:"move-menu-item delete",onClick:d=>{d.stopPropagation(),window.confirm("  ?")&&l(e),o()},children:[u.jsx("span",{className:"move-menu-icon",children:""})," "]})]})}const Oc=[{key:"mon",label:""},{key:"tue",label:""},{key:"wed",label:""},{key:"thu",label:""},{key:"fri",label:""},{key:"sat",label:""},{key:"sun",label:""}],Mu={THIS_ONLY:"this-only",FROM_NOW:"from-now",ALL:"all"},sO="09",rO="00";function hh({value:e,onChange:t}){const n=b.useRef(null),i=b.useRef(null),a=b.useRef(e),s=b.useRef(!1),[r,l]=b.useState(()=>e&&e.includes(":")?e.split(":")[0]:sO),[o,c]=b.useState(()=>e&&e.includes(":")?e.split(":")[1]:rO);b.useEffect(()=>{if(e&&e.includes(":")&&e!==a.current){const[g,v]=e.split(":");a.current=e,l(g),c(v)}},[e]),b.useEffect(()=>{if(!s.current){s.current=!0;return}const g=`${r}:${o}`;a.current=g,t&&t(g)},[r,o]);const d=(g,v,S)=>{if(!g.current)return;const x=g.current.scrollTop,E=Math.round(x/40),j=String(E).padStart(2,"0");v(j)},f=(g,v)=>{if(!g.current)return;const S=40,x=parseInt(v,10);g.current.scrollTop=x*S};b.useEffect(()=>{f(n,r)},[]),b.useEffect(()=>{f(i,o)},[]);const h=Array.from({length:24},(g,v)=>String(v).padStart(2,"0")),m=Array.from({length:60},(g,v)=>String(v).padStart(2,"0")),p=()=>{const g=(parseInt(r,10)+1)%24,v=String(g).padStart(2,"0");l(v),f(n,v)},_=()=>{const g=(parseInt(r,10)-1+24)%24,v=String(g).padStart(2,"0");l(v),f(n,v)},w=()=>{const g=(parseInt(o,10)+1)%60,v=String(g).padStart(2,"0");c(v),f(i,v)},y=()=>{const g=(parseInt(o,10)-1+60)%60,v=String(g).padStart(2,"0");c(v),f(i,v)};return u.jsxs("div",{className:"apple-time-picker",children:[u.jsxs("div",{className:"picker-arrows-top",children:[u.jsx("button",{className:"picker-arrow-button",onClick:p,children:""}),u.jsx("div",{style:{width:"20px"}}),u.jsx("button",{className:"picker-arrow-button",onClick:w,children:""})]}),u.jsxs("div",{className:"picker-container",children:[u.jsxs("div",{className:"picker-column",ref:n,onScroll:()=>d(n,l),children:[u.jsx("div",{className:"picker-spacer"}),h.map(g=>u.jsx("div",{className:`picker-item ${g===r?"selected":""}`,onClick:()=>{l(g),f(n,g)},children:g},g)),u.jsx("div",{className:"picker-spacer"})]}),u.jsx("div",{className:"picker-separator",children:":"}),u.jsxs("div",{className:"picker-column",ref:i,onScroll:()=>d(i,c),children:[u.jsx("div",{className:"picker-spacer"}),m.map(g=>u.jsx("div",{className:`picker-item ${g===o?"selected":""}`,onClick:()=>{c(g),f(i,g)},children:g},g)),u.jsx("div",{className:"picker-spacer"})]})]}),u.jsxs("div",{className:"picker-arrows-bottom",children:[u.jsx("button",{className:"picker-arrow-button",onClick:_,children:""}),u.jsx("div",{style:{width:"20px"}}),u.jsx("button",{className:"picker-arrow-button",onClick:y,children:""})]}),u.jsx("div",{className:"picker-selection-indicator"})]})}function Wo({selectedDays:e=[],onToggle:t,disabled:n=!1,variant:i="default"}){const a=(l,o)=>{l.stopPropagation(),t(o)},s=i==="inline"?"day-selector-inline":"day-selector",r=i==="inline"?"day-button-inline":"day-button";return u.jsx("div",{className:s,children:Oc.map(l=>u.jsx("button",{onClick:o=>a(o,l.key),className:`${r} ${e.includes(l.key)?"selected":""}`,disabled:n,type:"button",children:l.label},l.key))})}const lO=[{value:"this-only",label:" ",description:" ",tooltip:"  ,  ,   "},{value:"from-now",label:"   ",description:" ",tooltip:"  ,  ,   "},{value:"all",label:" ",description:" ",tooltip:"  ,  ,   "}],ri={container:{display:"flex",flexDirection:"column",gap:"0.75rem"},option:e=>({display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:e?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"}),radio:{width:"16px",height:"16px",cursor:"pointer"},labelContainer:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},labelRow:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},label:{fontWeight:"600"},description:{fontSize:"0.85rem",color:"#9ca3af"},helpButton:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},tooltip:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"}};function oO({selectedOption:e,onChange:t,name:n="delete-option"}){const[i,a]=b.useState(null);return u.jsx("div",{style:ri.container,children:lO.map(s=>u.jsxs("div",{style:ri.option(e===s.value),onClick:()=>t(s.value),children:[u.jsx("input",{type:"radio",name:n,value:s.value,checked:e===s.value,onChange:r=>t(r.target.value),style:ri.radio}),u.jsx("div",{style:ri.labelContainer,children:u.jsxs("div",{style:ri.labelRow,children:[u.jsx("span",{style:ri.label,children:s.label}),u.jsx("span",{style:ri.description,children:s.description})]})}),u.jsx("button",{onMouseEnter:()=>a(s.value),onMouseLeave:()=>a(null),onClick:r=>{r.stopPropagation(),a(i===s.value?null:s.value)},style:ri.helpButton,children:"?"}),i===s.value&&u.jsx("div",{style:ri.tooltip,children:s.tooltip})]},s.value))})}function cO({todo:e,isOpen:t,onClose:n,onEdit:i,onToggle:a,onDelete:s,onAddSubTodo:r,onCreateRoutine:l,subtodos:o,routines:c,formatDate:d,formatDateOnly:f}){var Be;const[h,m]=b.useState(e.text),[p,_]=b.useState(null),[w,y]=b.useState(""),[g,v]=b.useState("this-only"),[S,x]=b.useState(!1),[T,E]=b.useState([]),[j,A]=b.useState(""),[k,Z]=b.useState([]),[me,ae]=b.useState(!1),[fe,q]=b.useState([]),[D,B]=b.useState([]),[G,he]=b.useState(null),Q=e.routine_id?c.find(z=>z.id===e.routine_id):null,nt=z=>["sun","mon","tue","wed","thu","fri","sat"][z],Oe=z=>{E(P=>P.includes(z)?P.filter(De=>De!==z):[...P,z])};b.useEffect(()=>{p==="history"&&k.length===0&&!me&&(async()=>{ae(!0);try{const{data:P,error:De}=await qe.from("todo_history").select("*").eq("todo_id",e.id).order("changed_at",{ascending:!1});if(De)throw De;Z(P||[])}catch(P){console.error("Error fetching history:",P)}finally{ae(!1)}})()},[p,e.id,k.length,me]),b.useEffect(()=>{p==="routine-stats"&&Q&&(!G||G.id!==Q.id)&&(async()=>{try{const{data:P,error:De}=await qe.from("todos").select("*").eq("routine_id",Q.id).eq("deleted",!1).maybeSingle();if(De)throw De;if(P&&P.visible_dates){const ge=P.visible_dates.sort().map(ke=>{var W;return{id:`${P.id}-${ke}`,date:ke,text:P.text,completed:((W=P.completed_dates)==null?void 0:W.includes(ke))||!1}});B(ge),he(Q)}}catch(P){console.error("Error fetching routine history:",P)}})()},[p,Q,G]);const Ge=z=>{q(P=>P.includes(z)?P.filter(De=>De!==z):[...P,z])};return t?Uu.createPortal(u.jsx("div",{className:"modal-overlay",onClick:n,children:u.jsxs("div",{className:"actions-modal-content",onClick:z=>z.stopPropagation(),children:[u.jsxs("div",{className:"actions-modal-header",children:[u.jsx("h3",{children:" "}),u.jsx("button",{onClick:n,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"todo-edit-section",children:u.jsx("textarea",{value:h,onChange:z=>m(z.target.value),onBlur:()=>{h.trim()!==""&&h!==e.text?i(e.id,h):h.trim()===""&&m(e.text)},className:"todo-edit-textarea",placeholder:"  ...",rows:3})}),u.jsxs("div",{className:"actions-modal-body",children:[u.jsxs("div",{className:"actions-menu",children:[u.jsxs("button",{className:`action-menu-item ${p==="nanotodo"?"active":""}`,onClick:()=>_("nanotodo"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),u.jsxs("button",{className:`action-menu-item ${p==="routine"?"active":""}`,onClick:()=>{_("routine"),Q?(E(Q.days||[]),A(Q.time_slot||""),x(!1)):(E([]),A(""),x(!0))},children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),u.jsxs("button",{className:`action-menu-item ${p==="history"?"active":""}`,onClick:()=>_("history"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),(((Be=e.timeline_history)==null?void 0:Be.length)>0||e.scheduled_time)&&u.jsxs("button",{className:`action-menu-item ${p==="timeline-history"?"active":""}`,onClick:()=>_("timeline-history"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),e.routine_id&&Q&&u.jsxs("button",{className:`action-menu-item ${p==="routine-stats"?"active":""}`,onClick:()=>_("routine-stats"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),u.jsxs("button",{className:`action-menu-item delete ${p==="delete"?"active":""}`,onClick:()=>_("delete"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]})]}),u.jsxs("div",{className:"actions-detail",children:[!p&&u.jsx("div",{className:"actions-detail-empty",children:u.jsx("p",{children:"  "})}),p==="nanotodo"&&u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:" "}),u.jsxs("div",{className:"nanotodo-section-in-modal",children:[o&&o.length>0&&u.jsx("div",{className:"subtodo-list-in-modal",children:o.map(z=>u.jsxs("div",{className:"subtodo-item-in-modal",children:[u.jsx("input",{type:"checkbox",checked:z.completed,onChange:()=>a(z.id),className:"subtodo-checkbox-modal"}),u.jsx("span",{className:`subtodo-text-modal ${z.completed?"completed":""}`,children:z.text}),u.jsx("button",{onClick:()=>s(z.id),className:"subtodo-delete-modal",title:"",children:""})]},z.id))}),u.jsxs("div",{className:"subtodo-input-section-modal",children:[u.jsx("input",{type:"text",value:w,onChange:z=>y(z.target.value),onKeyDown:z=>{z.key==="Enter"&&w.trim()&&(r(e.id,w.trim()),y(""))},placeholder:" ...",className:"subtodo-input-modal"}),u.jsx("button",{onClick:()=>{w.trim()&&(r(e.id,w.trim()),y(""))},className:"subtodo-add-button-modal",children:""})]})]})]}),p==="routine"&&u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"  "}),u.jsx("div",{className:"routine-setup-inline",children:Q&&!S?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"routine-current-info",children:[u.jsx("div",{className:"routine-info-title",children:" :"}),u.jsx("div",{className:"routine-days-display",children:Oc.filter(z=>Q.days.includes(z.key)).map(z=>u.jsx("span",{className:"routine-day-badge",children:z.label},z.key))}),Q.time_slot&&u.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",Q.time_slot]})]}),u.jsxs("div",{className:"routine-setup-actions",children:[u.jsx("button",{onClick:z=>{z.stopPropagation(),E(Q.days),A(Q.time_slot||""),x(!0)},className:"routine-confirm-button",children:""}),u.jsx("button",{onClick:async z=>{z.stopPropagation(),await l(e.id,e.text,[],null,!0),n()},className:"routine-remove-button",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"routine-setup-title",children:S&&Q?" :":"  :"}),u.jsx(Wo,{selectedDays:T,onToggle:Oe,variant:"inline"}),u.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[u.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),u.jsx(hh,{value:j,onChange:z=>A(z)})]}),u.jsxs("div",{className:"routine-setup-actions",children:[u.jsx("button",{onClick:async z=>{z.stopPropagation(),S&&Q?await l(e.id,e.text,T,Q.id,!1,j):await l(e.id,e.text,T,null,!1,j),x(!1),n()},className:"routine-confirm-button",children:""}),u.jsx("button",{onClick:z=>{z.stopPropagation(),x(!1),E([]),A("")},className:"routine-cancel-button",children:""})]})]})})]}),p==="history"&&(()=>{const z=e.visible_dates&&e.visible_dates.length>0?e.visible_dates:[e.date],P=z[0],De=z.map(ge=>({id:`${e.id}-${ge}`,date:ge}));return me?u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"  "}),u.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:" ..."})]}):u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"  "}),u.jsxs("div",{className:"todo-history",children:[u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:":"}),u.jsx("span",{className:"history-value",children:d(e.created_at)})]}),u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:f(P?new Date(P+"T00:00:00"):new Date(e.date+"T00:00:00"))})]}),De.length>0&&u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:De.map((ge,ke)=>{const W=ge.date===e.date,Ae=f(new Date(ge.date+"T00:00:00"));return u.jsxs("span",{children:[ke>0&&"  ",u.jsxs("span",{style:W?{fontWeight:"bold",color:"#4CAF50"}:{},children:[Ae.split("(")[0],W?"()":""]})]},ge.id)})})]}),k.length>0&&u.jsxs("div",{className:"history-changes-list",children:[u.jsxs("div",{className:"history-changes-header",children:["  (",k.length,")"]}),k.map(ge=>u.jsxs("div",{className:"history-record-compact",children:[u.jsxs("div",{className:"history-record-summary",children:[u.jsxs("div",{className:"history-change-time",children:[d(ge.changed_at),ge.changed_on_date&&u.jsxs("span",{className:"history-page-info",children:[" (: ",f(new Date(ge.changed_on_date+"T00:00:00")),")"]})]}),u.jsx("button",{className:"history-detail-button",onClick:ke=>{ke.stopPropagation(),Ge(ge.id)},children:fe.includes(ge.id)?"":""})]}),fe.includes(ge.id)&&u.jsxs("div",{className:"history-change",children:[u.jsxs("div",{className:"history-change-item history-before",children:[u.jsx("span",{className:"change-badge",children:""}),u.jsx("span",{className:"change-text",children:ge.previous_text})]}),u.jsx("div",{className:"history-change-arrow",children:""}),u.jsxs("div",{className:"history-change-item history-after",children:[u.jsx("span",{className:"change-badge",children:""}),u.jsx("span",{className:"change-text",children:ge.new_text})]})]})]},ge.id))]})]})]})})(),p==="timeline-history"&&u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"  "}),u.jsxs("div",{className:"todo-history",children:[e.scheduled_time&&e.scheduled_date&&u.jsxs("div",{className:"history-item",style:{marginBottom:"1rem",padding:"0.75rem",background:"rgba(99, 102, 241, 0.1)",borderRadius:"8px"},children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsxs("span",{className:"history-value",children:[u.jsx("span",{style:{color:"#60a5fa"},children:f(new Date(e.scheduled_date+"T00:00:00"))}),u.jsx("span",{style:{marginLeft:"0.5rem",color:"#fbbf24",fontWeight:"600"},children:e.scheduled_time})]})]}),e.timeline_history&&e.timeline_history.length>0?u.jsxs("div",{className:"history-changes-list",children:[u.jsxs("div",{className:"history-changes-header",children:["  (",e.timeline_history.length,")"]}),e.timeline_history.slice().reverse().map((z,P)=>{const De=new Date(z.scheduled_date+"T00:00:00"),ge=f(De);return u.jsx("div",{className:"history-record-compact",children:u.jsxs("div",{className:"history-record-summary",children:[u.jsxs("div",{className:"history-change-time",children:[u.jsx("span",{style:{color:"#60a5fa"},children:ge}),u.jsx("span",{style:{marginLeft:"0.5rem",color:"#fbbf24"},children:z.scheduled_time})]}),u.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.5)"},children:[d(z.assigned_at)," "]})]})},P)})]}):u.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.5)"},children:"   ."})]})]}),p==="routine-stats"&&Q&&(()=>{if(!G||G.id!==Q.id||D.length===0)return u.jsxs("div",{className:"actions-detail-content",children:[u.jsxs("h4",{children:[" ",Q.text," "]}),u.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:!G||G.id!==Q.id?" ...":" ."})]});const z=D[0],P=new Date(z.date),De=new Date,ge={};D.forEach(Ae=>{ge[Ae.date]=Ae.completed});const ke=[];let W=new Date(P);for(;W<=De;){const Ae=W.getFullYear(),Ue=W.getMonth(),ot=`${Ae}-${Ue+1}`;ke.find(ve=>ve.key===ot)||ke.push({key:ot,year:Ae,month:Ue,days:[]});const Fe=ke.find(ve=>ve.key===ot),wt=we(W),St=W.getDay(),F=nt(St),se=Q.days.includes(F);Fe.days.push({date:new Date(W),dateStr:wt,day:W.getDate(),dayOfWeek:St,isCompleted:ge[wt]===!0,isRoutineDay:se,hasTodo:ge[wt]!==void 0}),W.setDate(W.getDate()+1)}return u.jsxs("div",{className:"actions-detail-content",children:[u.jsxs("h4",{children:[" ",Q.text," "]}),u.jsxs("div",{className:"routine-history-content",children:[u.jsx("div",{className:"routine-history-calendar",children:ke.map(Ae=>u.jsxs("div",{className:"history-month",children:[u.jsxs("h3",{className:"history-month-title",children:[Ae.year," ",Ae.month+1,""]}),u.jsxs("div",{className:"history-calendar-grid",children:[u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),Ae.days.length>0&&Array(Ae.days[0].dayOfWeek).fill(null).map((Ue,ot)=>u.jsx("div",{className:"history-day-cell empty"},`empty-${ot}`)),Ae.days.map(Ue=>u.jsxs("div",{className:`history-day-cell ${Ue.isCompleted?"completed":""} ${Ue.isRoutineDay?"":"not-routine-day"}`,title:`${Ue.dateStr}${Ue.isRoutineDay?"":" (  )"}${Ue.isCompleted?" - ":Ue.hasTodo?" - ":""}`,children:[u.jsx("span",{className:"day-number",children:Ue.day}),Ue.isCompleted&&u.jsx("span",{className:"check-mark",children:""})]},Ue.dateStr))]})]},Ae.key))}),u.jsxs("div",{className:"routine-history-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:" :"}),u.jsxs("span",{className:"stat-value",children:[D.length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value completed",children:[D.filter(Ae=>Ae.completed).length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value incomplete",children:[D.filter(Ae=>!Ae.completed).length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value",children:[D.length>0?Math.round(D.filter(Ae=>Ae.completed).length/D.length*100):0,"%"]})]})]})]})]})})(),p==="delete"&&u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"   "}),u.jsxs("p",{style:{fontSize:"0.9rem",color:"#9ca3af",marginBottom:"1rem",lineHeight:"1.6"},children:["    .",u.jsx("br",{}),"    ."]}),u.jsx(oO,{selectedOption:g,onChange:v}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("button",{onClick:n,style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#9ca3af",cursor:"pointer",fontSize:"0.9rem"},children:""}),u.jsx("button",{onClick:async()=>{window.confirm(` ?

  5    .`)&&(await s(e.id,g),n())},style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:""})]})]})]})]})]})}),document.body):null}function Za({todo:e,index:t,onToggle:n,onDelete:i,onEdit:a,formatDate:s,formatDateOnly:r,isFocused:l,onFocus:o,onAddSubTodo:c,subtodos:d,level:f=0,onCreateRoutine:h,routines:m,onShowRoutineHistory:p,onOpenRoutineSetupModal:_,onOpenHistoryModal:w,currentPageDate:y,isPendingRoutine:g=!1,onRemoveFromUI:v,showSuccessMessage:S,activeId:x,overId:T,hideNumber:E=!1,onMoveUp:j,onMoveDown:A,onMoveToTop:k,onMoveToBottom:Z,isFirst:me,isLast:ae}){const[fe,q]=b.useState(!1),[D,B]=b.useState(!1),[G,he]=b.useState(!1),[Q,nt]=b.useState(e.text),[Oe,Ge]=b.useState(!1),[Be,z]=b.useState(!1),[P,De]=b.useState(""),[ge,ke]=b.useState(!1),W=e.routine_id?m.find(N=>N.id===e.routine_id):null,{attributes:Ae,listeners:Ue,setNodeRef:ot,transform:Fe,transition:wt,isDragging:St}=Lb({id:e.id}),F=e.id===x,se=e.id===T&&x&&x!==T,ve={cursor:"grab",opacity:F?.4:1},Ne=e.text.length>30,At=()=>{he(!0),nt(e.text)},R=async()=>{Q.trim()&&Q!==e.text&&await a(e.id,Q.trim()),he(!1)},$=async N=>{N.key==="Enter"&&!N.shiftKey?(N.preventDefault(),await R()):N.key==="Escape"&&(he(!1),nt(e.text))};return b.useEffect(()=>{const N=I=>{D&&!I.target.closest(".drag-handle-wrapper")&&B(!1)};return document.addEventListener("click",N),()=>document.removeEventListener("click",N)},[D]),u.jsxs("div",{ref:ot,style:{...ve,borderTop:se?"2px solid rgba(99, 102, 241, 0.8)":"2px solid transparent"},className:"todo-item-container",children:[u.jsxs("div",{className:"drag-handle-wrapper",children:[u.jsx("span",{className:"drag-handle",...Ae,...Ue,onClick:N=>{N.stopPropagation(),B(!D)},title:":   /  : "}),D&&u.jsx(aO,{todoId:e.id,isFirst:me,isLast:ae,onMoveUp:j,onMoveDown:A,onMoveToTop:k,onMoveToBottom:Z,onDelete:i,onClose:()=>B(!1)})]}),!E&&u.jsx("span",{className:"todo-number",children:t+1}),u.jsx("div",{className:"todo-item-wrapper",children:u.jsxs("div",{className:`todo-item ${e.completed?"completed":""} ${fe?"expanded":""} ${St?"drag-mode":""} ${e.scheduled_time&&e.scheduled_date===y?"has-timeline":""}`,children:[u.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>n(e.id),className:"todo-checkbox"}),u.jsx("div",{className:"todo-content",onClick:()=>!G&&Ne&&q(!fe),onDoubleClick:At,style:{cursor:G?"text":Ne?"pointer":"default"},children:G?u.jsx("textarea",{value:Q,onChange:N=>nt(N.target.value),onBlur:R,onKeyDown:$,className:"todo-edit-input",autoFocus:!0,rows:1,style:{minHeight:"1.35em",resize:"vertical",overflow:"hidden"},onInput:N=>{N.target.style.height="auto",N.target.style.height=N.target.scrollHeight+"px"}}):u.jsx("span",{className:`todo-text ${fe?"expanded":""}`,children:e.text})}),(()=>{const N=e.completed&&e.completed_at&&new Date(e.completed_at).toISOString().split("T")[0]!==e.date,I=e.routine_id&&W,V=g||e.is_pending_routine;return(d.length>0||N||I||V)&&u.jsxs("div",{className:"todo-badges",children:[N&&(()=>{const K=new Date(e.completed_at).toISOString().split("T")[0],Y=new Date(e.completed_at).getDate();return u.jsxs("span",{className:"completed-date-badge",title:`${K} `,children:[Y,""]})})(),I&&(()=>{const K=y||e.date,Y=new Date(K+"T00:00:00"),U=Y.getMonth()+1,ee=Y.getDate(),re=["","","","","","",""][Y.getDay()],H=`${U}/${ee}(${re})`;return u.jsxs("span",{className:"routine-date-badge",title:`${W.text} `,children:["for ",H]})})(),V&&u.jsx("span",{className:"pending-routine-badge",title:"  ",children:""}),d.length>0&&u.jsx("span",{className:"todo-badge clickable",title:" ",onClick:K=>{K.stopPropagation(),Oe?(Ge(!1),z(!1)):(Ge(!0),z(!1))},children:""})]})})(),!G&&!e.parent_id&&u.jsx("button",{className:"todo-more-button",onClick:N=>{N.stopPropagation(),ke(!0)},title:"",children:""}),Oe&&!e.parent_id&&u.jsxs("div",{className:"subtodos-in-item",children:[d&&d.length>0&&d.map((N,I)=>u.jsx(Za,{todo:N,index:I,onToggle:n,onDelete:i,onEdit:a,formatDate:s,formatDateOnly:r,isFocused:l,onFocus:o,onAddSubTodo:c,subtodos:[],level:f+1,routines:m,onShowRoutineHistory:p,showSuccessMessage:S,onOpenRoutineSetupModal:_,onOpenHistoryModal:w,currentPageDate:y},N.id)),Be&&u.jsxs("div",{className:"subtodo-input-section",children:[u.jsx("input",{type:"text",value:P,onChange:N=>De(N.target.value),onKeyDown:N=>{N.key==="Enter"&&P.trim()&&(c(e.id,P.trim()),De(""))},placeholder:" ...",className:"subtodo-input",autoFocus:!0}),u.jsx("button",{onClick:()=>{P.trim()&&(c(e.id,P.trim()),De(""))},className:"subtodo-add-button",children:""}),u.jsx("button",{onClick:()=>De(""),className:"subtodo-cancel-button",children:""})]})]})]})}),u.jsx(cO,{todo:e,isOpen:ge,onClose:()=>ke(!1),onEdit:a,onToggle:n,onDelete:i,onAddSubTodo:c,onCreateRoutine:h,subtodos:d,routines:m,formatDate:s,formatDateOnly:r})]})}function Zg({message:e,onUndo:t,variant:n="default"}){const i=n==="success"?"undo-toast success-toast":"undo-toast";return u.jsxs("div",{className:i,children:[u.jsx("span",{children:e}),t&&u.jsx("button",{onClick:t,className:"undo-button",children:""})]})}function Fg({todo:e,onClose:t,onDeleteThisOnly:n,onDeleteFromNow:i,onDeleteAll:a}){const[s,r]=b.useState("this-only"),[l,o]=b.useState(null),c=()=>{s==="this-only"?n(e):s==="from-now"?i(e):s==="all"&&a(e),t()},d=[{id:"this-only",label:" ",subtitle:" ",tooltip:"  ,  ,   "},{id:"from-now",label:"   ",subtitle:" ",tooltip:"  ,  ,   "},{id:"all",label:" ",subtitle:" ",tooltip:"  ,  ,   "}];return u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content delete-confirm-modal-v2",onClick:f=>f.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsxs("div",{className:"delete-confirm-content-v2",children:[u.jsxs("p",{className:"delete-info-text",children:["    .",u.jsx("br",{}),"    ."]}),u.jsx("div",{className:"delete-options-v2",children:d.map(f=>u.jsxs("div",{className:"delete-option-item",children:[u.jsxs("label",{className:"delete-option-label",children:[u.jsx("input",{type:"radio",name:"delete-option",value:f.id,checked:s===f.id,onChange:h=>r(h.target.value)}),u.jsxs("div",{className:"option-text",children:[u.jsx("span",{className:"option-main",children:f.label}),u.jsx("span",{className:"option-sub",children:f.subtitle})]})]}),u.jsx("button",{className:"option-help-btn",onMouseEnter:()=>o(f.id),onMouseLeave:()=>o(null),onClick:h=>{h.preventDefault(),o(l===f.id?null:f.id)},children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[u.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("text",{x:"8",y:"11.5",textAnchor:"middle",fontSize:"11",fill:"currentColor",fontWeight:"600",children:"?"})]})}),l===f.id&&u.jsx("div",{className:"option-tooltip",children:f.tooltip})]},f.id))}),u.jsxs("div",{className:"delete-modal-actions",children:[u.jsx("button",{className:"btn-cancel",onClick:t,children:""}),u.jsx("button",{className:"btn-confirm",onClick:c,children:""})]})]})]})})}function uO({showRoutineModal:e,onClose:t,routineInput:n,setRoutineInput:i,isAddingRoutine:a,selectedDays:s,onToggleDay:r,selectedTimeSlot:l,setSelectedTimeSlot:o,onAddRoutine:c,routines:d,editingRoutineId:f,editingRoutineText:h,setEditingRoutineText:m,editingRoutineDays:p,onToggleEditDay:_,onStartEdit:w,onSaveEdit:y,onCancelEdit:g,onDelete:v,onShowHistory:S}){return e?u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content routine-modal",onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsxs("div",{className:"routine-add-section",children:[u.jsx("input",{type:"text",value:n,onChange:x=>i(x.target.value),placeholder:"  ...",className:"routine-input",disabled:a}),u.jsx(Wo,{selectedDays:s,onToggle:r,disabled:a}),u.jsxs("div",{className:"time-slot-selector",children:[u.jsx("label",{className:"time-slot-label",children:"  ()"}),u.jsx(hh,{value:l,onChange:x=>o(x)})]}),u.jsx("button",{onClick:c,className:"add-routine-button",disabled:a||n.trim()==="",children:" "})]}),u.jsx("div",{className:"routine-list",children:d.length===0?u.jsx("p",{className:"empty-message",children:"  ."}):d.map(x=>u.jsx("div",{className:"routine-item",children:f===x.id?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"routine-edit-content",children:[u.jsx("input",{type:"text",value:h,onChange:T=>m(T.target.value),className:"routine-edit-input",placeholder:" "}),u.jsx(Wo,{selectedDays:p,onToggle:_,variant:"inline"})]}),u.jsxs("div",{className:"routine-item-actions",children:[u.jsx("button",{onClick:y,className:"routine-save-button",disabled:h.trim()===""||p.length===0,children:""}),u.jsx("button",{onClick:g,className:"routine-cancel-edit-button",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"routine-item-content",children:[u.jsx("span",{className:"routine-text",children:x.text}),u.jsxs("div",{className:"routine-meta",children:[u.jsx("div",{className:"routine-days",children:Oc.filter(T=>x.days.includes(T.key)).map(T=>u.jsx("span",{className:"routine-day-badge",children:T.label},T.key))}),x.time_slot&&u.jsx("span",{className:"routine-time-slot",children:x.time_slot})]})]}),u.jsxs("div",{className:"routine-item-actions",children:[u.jsx("button",{onClick:()=>S(x),className:"routine-history-button",title:" ",children:""}),u.jsx("button",{onClick:()=>w(x),className:"routine-edit-button",title:"",children:""}),u.jsx("button",{onClick:()=>v(x.id),className:"routine-delete-button",title:"",children:""})]})]})},x.id))})]})}):null}const dO=e=>["sun","mon","tue","wed","thu","fri","sat"][e];function fO({showRoutineHistory:e,onClose:t,selectedRoutine:n,routineHistoryData:i}){return!e||!n?null:u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content routine-history-modal",onClick:a=>a.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("h2",{children:[" ",n.text," "]}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsxs("div",{className:"routine-history-content",children:[(()=>{if(i.length===0)return u.jsx("p",{className:"empty-message",children:"   ."});const a=i[0],s=new Date(a.date),r=new Date,l={};i.forEach(d=>{l[d.date]=d.completed});const o=[];let c=new Date(s);for(;c<=r;){const d=c.getFullYear(),f=c.getMonth(),h=`${d}-${f+1}`;o.find(g=>g.key===h)||o.push({key:h,year:d,month:f,days:[]});const m=o.find(g=>g.key===h),p=we(c),_=c.getDay(),w=dO(_),y=n.days.includes(w);m.days.push({date:new Date(c),dateStr:p,day:c.getDate(),dayOfWeek:_,isCompleted:l[p]===!0,isRoutineDay:y,hasTodo:l[p]!==void 0}),c.setDate(c.getDate()+1)}return u.jsx("div",{className:"routine-history-calendar",children:o.map(d=>u.jsxs("div",{className:"history-month",children:[u.jsxs("h3",{className:"history-month-title",children:[d.year," ",d.month+1,""]}),u.jsxs("div",{className:"history-calendar-grid",children:[u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),d.days.length>0&&Array(d.days[0].dayOfWeek).fill(null).map((f,h)=>u.jsx("div",{className:"history-day-cell empty"},`empty-${h}`)),d.days.map((f,h)=>{if(h>0&&f.day===1){const p=6-d.days[h-1].dayOfWeek;return u.jsxs(u.Fragment,{children:[Array(p).fill(null).map((_,w)=>u.jsx("div",{className:"history-day-cell empty"},`empty-end-${h}-${w}`)),u.jsx("div",{className:"history-day-header",children:""},f.dateStr),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsxs("div",{className:`history-day-cell ${f.isCompleted?"completed":""} ${f.isRoutineDay?"":"not-routine-day"}`,children:[u.jsx("span",{className:"day-number",children:f.day}),f.isCompleted&&u.jsx("span",{className:"check-mark",children:""})]})]})}return u.jsxs("div",{className:`history-day-cell ${f.isCompleted?"completed":""} ${f.isRoutineDay?"":"not-routine-day"}`,title:`${f.dateStr}${f.isRoutineDay?"":" (  )"}${f.isCompleted?" - ":f.hasTodo?" - ":""}`,children:[u.jsx("span",{className:"day-number",children:f.day}),f.isCompleted&&u.jsx("span",{className:"check-mark",children:""})]},f.dateStr)})]})]},d.key))})})(),u.jsxs("div",{className:"routine-history-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:" :"}),u.jsxs("span",{className:"stat-value",children:[i.length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value completed",children:[i.filter(a=>a.completed).length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value incomplete",children:[i.filter(a=>!a.completed).length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value",children:[i.length>0?Math.round(i.filter(a=>a.completed).length/i.length*100):0,"%"]})]})]})]})]})})}function hO({show:e,onClose:t,content:n,setContent:i,isSaving:a,placeholder:s=" ..."}){const r=b.useRef(null);return b.useEffect(()=>{r.current&&e&&(r.current.style.height="auto",r.current.style.height=Math.min(r.current.scrollHeight,window.innerHeight*.6)+"px")},[n,e]),b.useEffect(()=>{e&&r.current&&r.current.focus()},[e]),b.useEffect(()=>{const l=o=>{o.key==="Escape"&&e&&t()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[e,t]),e?u.jsx("div",{className:"memo-modal-overlay",onClick:t,children:u.jsxs("div",{className:"memo-modal",onClick:l=>l.stopPropagation(),children:[u.jsxs("div",{className:"memo-modal-header",children:[u.jsx("h3",{children:"  "}),u.jsxs("div",{className:"memo-modal-actions",children:[a&&u.jsx("span",{className:"memo-saving-indicator",children:" ..."}),u.jsx("button",{className:"memo-modal-close",onClick:t,children:""})]})]}),u.jsx("textarea",{ref:r,value:n,onChange:l=>i(l.target.value),className:"memo-modal-textarea",placeholder:s})]})}):null}function mO({showGanttChart:e,onClose:t,ganttData:n,ganttPeriod:i,setGanttPeriod:a,formatDateOnly:s}){return e?u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content gantt-modal",onClick:r=>r.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  -  "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"gantt-filter",children:u.jsx("div",{className:"gantt-period-buttons",children:[{value:"1week",label:" 1"},{value:"2weeks",label:" 2"},{value:"1month",label:" 1"},{value:"3months",label:" 3"},{value:"6months",label:" 6"},{value:"all",label:""}].map(r=>u.jsx("button",{className:`period-button ${i===r.value?"active":""}`,onClick:()=>a(r.value),children:r.label},r.value))})}),u.jsx("div",{className:"gantt-content",children:n.length===0?u.jsx("p",{className:"empty-message",children:" ."}):u.jsx("div",{className:"gantt-chart",children:(()=>{const r=n.flatMap(f=>f.dates),l=[...new Set(r)].sort((f,h)=>new Date(f)-new Date(h));if(l.length===0)return u.jsx("p",{className:"empty-message",children:"  ."});const o=new Date(l[0]),c=new Date(l[l.length-1]),d=[];for(let f=new Date(o);f<=c;f.setDate(f.getDate()+1))d.push(new Date(f).toISOString().split("T")[0]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"gantt-header",children:[u.jsx("div",{className:"gantt-task-column",children:" "}),u.jsx("div",{className:"gantt-timeline",children:d.map(f=>u.jsx("div",{className:"gantt-date-cell",children:s(new Date(f+"T00:00:00")).split("(")[0]},f))})]}),n.map((f,h)=>{const m=new Set(f.dates);return u.jsxs("div",{className:"gantt-row",children:[u.jsx("div",{className:"gantt-task-column",title:f.text,children:u.jsx("span",{className:f.completed?"completed-task":"",children:f.text})}),u.jsx("div",{className:"gantt-timeline",children:d.map(p=>{if(!m.has(p))return u.jsx("div",{className:"gantt-date-cell"},p);const w=p===f.startDate,y=p===f.completedDate;let g="gantt-date-cell has-task";return w?g+=" start-date":y?g+=" completed-date":g+=" middle-date",u.jsx("div",{className:g,children:y?u.jsx("span",{className:"completed-circle",children:""}):""},p)})})]},f.originalId)})]})})()})})]})}):null}function gO({showEncouragementModal:e,onClose:t,encouragementMessages:n,newEncouragementMessage:i,setNewEncouragementMessage:a,onAddEncouragementMessage:s,editingEncouragementId:r,editingEncouragementText:l,setEditingEncouragementId:o,setEditingEncouragementText:c,onUpdateEncouragementMessage:d,onDeleteEncouragementMessage:f}){return e?u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content encouragement-modal",onClick:h=>h.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"   "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsxs("div",{className:"encouragement-add-section",children:[u.jsx("input",{type:"text",value:i,onChange:h=>a(h.target.value),placeholder:"   ...",className:"encouragement-input",onKeyDown:async h=>{h.key==="Enter"&&i.trim()!==""&&(await s(i.trim()),a(""))}}),u.jsx("button",{onClick:async()=>{i.trim()!==""&&(await s(i.trim()),a(""))},className:"add-encouragement-button",disabled:i.trim()==="",children:""})]}),u.jsx("div",{className:"encouragement-list",children:n.length===0?u.jsx("p",{className:"empty-message",children:"   ."}):n.map((h,m)=>u.jsx("div",{className:"encouragement-item",children:r===m?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"text",value:l,onChange:p=>c(p.target.value),className:"encouragement-edit-input",placeholder:" "}),u.jsxs("div",{className:"encouragement-item-actions",children:[u.jsx("button",{onClick:async()=>{l.trim()!==""&&(await d(m,l.trim()),o(null),c(""))},className:"encouragement-save-button",disabled:l.trim()==="",children:""}),u.jsx("button",{onClick:()=>{o(null),c("")},className:"encouragement-cancel-button",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"encouragement-text",children:h}),u.jsxs("div",{className:"encouragement-item-actions",children:[u.jsx("button",{onClick:()=>{o(m),c(h)},className:"encouragement-edit-button",title:"",children:""}),u.jsx("button",{onClick:async()=>{window.confirm("   ?")&&await f(m)},className:"encouragement-delete-button",title:"",children:""})]})]})},m))})]})}):null}function vO({isOpen:e,onClose:t,onAddSection:n}){const[i,a]=b.useState(""),[s,r]=b.useState(""),l=["","","","","","","","","","","",""],o=c=>{c.preventDefault(),i.trim()&&(n({name:i.trim(),icon:s}),a(""),r(""),t())};return e?u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content add-section-modal",onClick:c=>c.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{className:"modal-close-button",onClick:t,children:""})]}),u.jsxs("form",{onSubmit:o,className:"add-section-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:" "}),u.jsx("input",{type:"text",value:i,onChange:c=>a(c.target.value),placeholder:": ,  , ...",className:"section-name-input",autoFocus:!0,maxLength:20})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:" "}),u.jsx("div",{className:"emoji-grid",children:l.map(c=>u.jsx("button",{type:"button",className:`emoji-button ${s===c?"selected":""}`,onClick:()=>r(c),children:c},c))})]}),u.jsxs("div",{className:"modal-actions",children:[u.jsx("button",{type:"button",onClick:t,className:"cancel-button",children:""}),u.jsx("button",{type:"submit",className:"submit-button",disabled:!i.trim(),children:""})]})]})]})}):null}function yO({show:e,onClose:t,hiddenSections:n,sectionOrder:i,sectionTitles:a,customSections:s,onShowSection:r}){if(!e)return null;const l=o=>{if(a[o])return a[o];const c=s.find(d=>d.id===o);return c?`${c.icon} ${c.name}`:o};return n.length===0?u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"   "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"modal-body",children:u.jsx("p",{className:"empty-message",children:"  ."})})]})}):u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"   "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"modal-body",children:u.jsx("div",{className:"hidden-sections-list",children:n.map(o=>u.jsxs("div",{className:"hidden-section-item",children:[u.jsx("span",{className:"hidden-section-title",children:l(o)}),u.jsx("button",{className:"show-section-button",onClick:()=>{r(o)},title:" ",children:" "})]},o))})})]})})}function pO({todo:e,todoHistory:t,expandedHistoryIds:n,toggleHistoryDetail:i,formatDate:a,formatDateOnly:s,onClose:r}){const l=e.visible_dates&&e.visible_dates.length>0?e.visible_dates:[e.date],o=l[0],c=l.map(f=>({id:`${e.id}-${f}`,date:f})),d=t[e.id]||[];return u.jsx("div",{className:"modal-overlay",onClick:r,children:u.jsxs("div",{className:"modal-content",onClick:f=>f.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{onClick:r,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"modal-body",children:u.jsxs("div",{className:"todo-history",children:[u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:":"}),u.jsx("span",{className:"history-value",children:a(e.created_at)})]}),u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:s(o?new Date(o+"T00:00:00"):new Date(e.date+"T00:00:00"))})]}),c.length>0&&u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:c.map((f,h)=>{const m=f.date===e.date,p=s(new Date(f.date+"T00:00:00"));return u.jsxs("span",{children:[h>0&&"  ",u.jsxs("span",{style:m?{fontWeight:"bold",color:"#4CAF50"}:{},children:[p.split("(")[0],m?"()":""]})]},f.id)})})]}),(()=>{const f=new Date(e.created_at).toISOString().split("T")[0],h=e.date;return f!==h&&c.length===0?u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:s(new Date(e.date+"T00:00:00"))})]}):null})(),d.length>0&&u.jsxs("div",{className:"history-changes-list",children:[u.jsxs("div",{className:"history-changes-header",children:["  (",d.length,")"]}),d.map(f=>u.jsxs("div",{className:"history-record-compact",children:[u.jsxs("div",{className:"history-record-summary",children:[u.jsxs("div",{className:"history-change-time",children:[a(f.changed_at),f.changed_on_date&&u.jsxs("span",{className:"history-page-info",children:[" (: ",s(new Date(f.changed_on_date+"T00:00:00")),")"]})]}),u.jsx("button",{className:"history-detail-button",onClick:h=>{h.stopPropagation(),i(f.id)},children:n.includes(f.id)?"":""})]}),n.includes(f.id)&&u.jsxs("div",{className:"history-change",children:[u.jsxs("div",{className:"history-change-item history-before",children:[u.jsx("span",{className:"change-badge",children:""}),u.jsx("span",{className:"change-text",children:f.previous_text})]}),u.jsx("div",{className:"history-change-arrow",children:""}),u.jsxs("div",{className:"history-change-item history-after",children:[u.jsx("span",{className:"change-badge",children:""}),u.jsx("span",{className:"change-text",children:f.new_text})]})]})]},f.id))]})]})})]})})}function bO({todo:e,routines:t,routineDaysForModal:n,isEditingRoutineInModal:i,routineTimeSlotForModal:a,onToggleDay:s,setRoutineTimeSlotForModal:r,setRoutineDaysForModal:l,setIsEditingRoutineInModal:o,handleCreateRoutineFromTodo:c,onClose:d}){const f=t.find(h=>h.id===e.routine_id);return u.jsx("div",{className:"modal-overlay",onClick:d,children:u.jsxs("div",{className:"modal-content",onClick:h=>h.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{onClick:d,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"modal-body",children:u.jsx("div",{className:"routine-setup-inline",children:f&&!i?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"routine-current-info",children:[u.jsx("div",{className:"routine-info-title",children:" :"}),u.jsx("div",{className:"routine-days-display",children:Oc.filter(h=>f.days.includes(h.key)).map(h=>u.jsx("span",{className:"routine-day-badge",children:h.label},h.key))}),f.time_slot&&u.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",f.time_slot]})]}),u.jsxs("div",{className:"routine-setup-actions",children:[u.jsx("button",{onClick:h=>{h.stopPropagation(),l(f.days),r(f.time_slot||""),o(!0)},className:"routine-confirm-button",children:""}),u.jsx("button",{onClick:async h=>{h.stopPropagation(),await c(e.id,e.text,[],null,!0),d()},className:"routine-remove-button",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"routine-setup-title",children:i?" :":"  :"}),u.jsx(Wo,{selectedDays:n,onToggle:s,variant:"inline"}),u.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[u.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),u.jsx(hh,{value:a,onChange:h=>r(h)})]}),u.jsxs("div",{className:"routine-setup-actions",children:[u.jsx("button",{onClick:async h=>{h.stopPropagation(),i&&f?await c(e.id,e.text,n,f.id,!1,a):await c(e.id,e.text,n,null,!1,a),d()},className:"routine-confirm-button",children:""}),u.jsx("button",{onClick:h=>{h.stopPropagation(),d()},className:"routine-cancel-button",children:""})]})]})})})]})})}function _O({showUndoToast:e,showSuccessToast:t,successToastMessage:n,lastDeleteAction:i,handleUndoDelete:a,handleUndoRoutineDelete:s,showDeleteConfirmModal:r,todoToDelete:l,setShowDeleteConfirmModal:o,deleteThisOnly:c,deleteFromNow:d,deleteAll:f,showRoutineDeleteModal:h,routineToDelete:m,setShowRoutineDeleteModal:p,deleteRoutineThisOnly:_,deleteRoutineFromNow:w,deleteRoutineAll:y,showTodoHistoryModal:g,selectedTodoForModal:v,todoHistory:S,expandedHistoryIds:x,toggleHistoryDetail:T,handleCloseTodoHistoryModal:E,formatDate:j,formatDateOnly:A,showTodoRoutineSetupModal:k,routines:Z,routineDaysForModal:me,isEditingRoutineInModal:ae,routineTimeSlotForModal:fe,handleToggleRoutineDayInModal:q,setRoutineTimeSlotForModal:D,setRoutineDaysForModal:B,setIsEditingRoutineInModal:G,handleCreateRoutineFromTodo:he,handleCloseTodoRoutineSetupModal:Q,showRoutineModal:nt,handleCloseRoutine:Oe,routineInput:Ge,setRoutineInput:Be,isAddingRoutine:z,selectedDays:P,handleToggleDay:De,selectedTimeSlot:ge,setSelectedTimeSlot:ke,handleAddRoutine:W,editingRoutineId:Ae,editingRoutineText:Ue,setEditingRoutineText:ot,editingRoutineDays:Fe,handleToggleEditDay:wt,handleStartEditRoutine:St,handleSaveEditRoutine:F,handleCancelEditRoutine:se,handleDeleteRoutine:ve,fetchRoutineHistory:Ne,showRoutineHistory:At,handleCloseRoutineHistory:R,selectedRoutineForHistory:$,routineHistoryData:N,showMemoModal:I,setShowMemoModal:V,memoContent:K,setMemoContent:Y,isSavingMemo:U,showGanttChart:ee,handleCloseGanttChart:X,ganttData:re,ganttPeriod:H,setGanttPeriod:oe,showEncouragementModal:_e,setShowEncouragementModal:it,encouragementMessages:Gt,newEncouragementMessage:Ft,setNewEncouragementMessage:Gn,addEncouragementMessage:Ua,editingEncouragementId:xi,editingEncouragementText:at,setEditingEncouragementId:Mt,setEditingEncouragementText:kt,updateEncouragementMessage:_n,deleteEncouragementMessage:It,showAddSectionModal:ct,setShowAddSectionModal:Ut,handleAddSection:Kn,showHiddenSectionsModal:ft,setShowHiddenSectionsModal:wn,hiddenSections:xt,sectionOrder:Vt,sectionTitles:Sn,customSections:xn,handleShowSection:En}){return u.jsxs(u.Fragment,{children:[e&&u.jsx(Zg,{message:"",onUndo:a}),t&&u.jsx(Zg,{message:n,onUndo:i?s:null,variant:"success"}),r&&l&&u.jsx(Fg,{todo:l,onClose:()=>o(!1),onDeleteThisOnly:c,onDeleteFromNow:d,onDeleteAll:f}),h&&m&&u.jsx(Fg,{todo:m,onClose:()=>p(!1),onDeleteThisOnly:_,onDeleteFromNow:w,onDeleteAll:y}),g&&v&&u.jsx(pO,{todo:v,todoHistory:S,expandedHistoryIds:x,toggleHistoryDetail:T,formatDate:j,formatDateOnly:A,onClose:E}),k&&v&&u.jsx(bO,{todo:v,routines:Z,routineDaysForModal:me,isEditingRoutineInModal:ae,routineTimeSlotForModal:fe,onToggleDay:q,setRoutineTimeSlotForModal:D,setRoutineDaysForModal:B,setIsEditingRoutineInModal:G,handleCreateRoutineFromTodo:he,onClose:Q}),u.jsx(uO,{showRoutineModal:nt,onClose:Oe,routineInput:Ge,setRoutineInput:Be,isAddingRoutine:z,selectedDays:P,onToggleDay:De,selectedTimeSlot:ge,setSelectedTimeSlot:ke,onAddRoutine:W,routines:Z,editingRoutineId:Ae,editingRoutineText:Ue,setEditingRoutineText:ot,editingRoutineDays:Fe,onToggleEditDay:wt,onStartEdit:St,onSaveEdit:F,onCancelEdit:se,onDelete:ve,onShowHistory:Ne}),u.jsx(fO,{showRoutineHistory:At,onClose:R,selectedRoutine:$,routineHistoryData:N}),u.jsx(hO,{show:I,onClose:()=>V(!1),content:K,setContent:Y,isSaving:U,placeholder:" ..."}),u.jsx(mO,{showGanttChart:ee,onClose:X,ganttData:re,ganttPeriod:H,setGanttPeriod:oe,formatDateOnly:A}),u.jsx(gO,{showEncouragementModal:_e,onClose:()=>it(!1),encouragementMessages:Gt,newEncouragementMessage:Ft,setNewEncouragementMessage:Gn,onAddEncouragementMessage:Ua,editingEncouragementId:xi,editingEncouragementText:at,setEditingEncouragementId:Mt,setEditingEncouragementText:kt,onUpdateEncouragementMessage:_n,onDeleteEncouragementMessage:It}),u.jsx(vO,{isOpen:ct,onClose:()=>Ut(!1),onAddSection:Kn}),u.jsx(yO,{show:ft,onClose:()=>wn(!1),hiddenSections:xt,sectionOrder:Vt,sectionTitles:Sn,customSections:xn,onShowSection:En})]})}function wO({authLoading:e,session:t,handleGoogleLogin:n}){return e?u.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),u.jsx("div",{children:" ..."})]})}):t?null:u.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:u.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",maxWidth:"400px"},children:[u.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"1rem"},children:" Todo Note"}),u.jsx("p",{style:{fontSize:"1.1rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"2rem"},children:"     "}),u.jsxs("button",{onClick:n,style:{padding:"1rem 2rem",fontSize:"1.1rem",background:"#646cff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 auto"},children:[u.jsx("span",{children:""}),"Google "]})]})})}const Wg=["timeline","routine","normal"];function SO(e){const[t,n]=b.useState(Wg),[i,a]=b.useState(Du),[s,r]=b.useState(!1),l=async()=>{var g;if(!((g=e==null?void 0:e.user)!=null&&g.id))return;const w=await Qn.get(Jn.SECTION_ORDER);if(w){const v=Wg.filter(S=>!w.includes(S));if(v.length>0){const S=[...v,...w];n(S),o(S)}else n(w)}const y=await Qn.get(Jn.SECTION_ICONS);y&&a({...Du,...y})},o=async w=>{var y;(y=e==null?void 0:e.user)!=null&&y.id&&await Qn.set(Jn.SECTION_ORDER,w,e.user.id)};return{sectionOrder:t,setSectionOrder:n,sectionIcons:i,isReorderMode:s,setIsReorderMode:r,fetchSectionOrder:l,saveSectionOrder:o,changeSectionIcon:async(w,y)=>{var v;if(!((v=e==null?void 0:e.user)!=null&&v.id))return;const g={...i,[w]:y};a(g),await Qn.set(Jn.SECTION_ICONS,g,e.user.id)},getSectionIcon:w=>i[w]||Du[w]||"",getRandomIcon:()=>{const w=Math.floor(Math.random()*Xd.length);return Xd[w]},moveSectionLeft:w=>{n(y=>{const g=y.indexOf(w);if(g<=0)return y;const v=[...y];return[v[g-1],v[g]]=[v[g],v[g-1]],o(v),v})},moveSectionRight:w=>{n(y=>{const g=y.indexOf(w);if(g===-1||g>=y.length-1)return y;const v=[...y];return[v[g],v[g+1]]=[v[g+1],v[g]],o(v),v})},handleSectionDragEnd:w=>{const{active:y,over:g}=w;s&&t.includes(y.id)&&g&&y.id!==(g==null?void 0:g.id)&&n(v=>{const S=v.indexOf(y.id),x=v.indexOf(g.id),T=Hi(v,S,x);return o(T),T})},handleSectionsContainerDoubleClick:w=>{s&&w.target===w.currentTarget&&r(!1)}}}function xO(e){const[t,n]=b.useState(""),[i,a]=b.useState(!1),[s,r]=b.useState(""),l=b.useRef(null),o=b.useRef(null),c=async()=>{try{const{data:f,error:h}=await qe.from("spec_memos").select("content").order("created_at",{ascending:!1}).limit(1);if(h)throw h;const m=f&&f.length>0?f[0].content:"";n(m),r(m)}catch(f){console.error("Error fetching memo:",f.message),n(""),r("")}},d=b.useCallback(async f=>{var h;if(f!==s)try{a(!0);const{data:m}=await qe.from("spec_memos").select("id").order("created_at",{ascending:!1}).limit(1);m&&m.length>0?await qe.from("spec_memos").update({content:f,updated_at:new Date().toISOString()}).eq("id",m[0].id):await qe.from("spec_memos").insert([{content:f,user_id:(h=e==null?void 0:e.user)==null?void 0:h.id}]),r(f)}catch(m){console.error("Error saving memo:",m.message)}finally{a(!1)}},[e,s]);return b.useEffect(()=>{if(t!==s)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{d(t)},1e3),()=>{o.current&&clearTimeout(o.current)}},[t,d,s]),b.useEffect(()=>()=>{o.current&&clearTimeout(o.current),t!==s&&d(t)},[]),{memoContent:t,setMemoContent:n,isSavingMemo:i,memoTextareaRef:l,fetchMemoContent:c}}const Hb=({type:e,supabase:t,selectedDate:n,onDeleteSuccess:i})=>({deleteThisOnly:async l=>{try{const o=we(n),d=[...l.hidden_dates||[],o],f=e==="todo"?"todos":"routines",{error:h}=await t.from(f).update({hidden_dates:d}).eq("id",l.id);if(h)throw h;return i&&i(l.id,Mu.THIS_ONLY),{success:!0}}catch(o){return console.error(`${e}   (THIS_ONLY):`,o.message),{success:!1,error:o}}},deleteFromNow:async l=>{try{const o=we(n),d=(l.visible_dates||[]).filter(m=>m<o),f=e==="todo"?"todos":"routines",{error:h}=await t.from(f).update({visible_dates:d,stop_carryover_from:o}).eq("id",l.id);if(h)throw h;return i&&i(l.id,Mu.FROM_NOW),{success:!0}}catch(o){return console.error(`${e}   (FROM_NOW):`,o.message),{success:!1,error:o}}},deleteAll:async l=>{try{const o=we(n),c=e==="todo"?"todos":"routines",{error:d}=await t.from(c).update({deleted:!0,deleted_date:o}).eq("id",l.id);if(d)throw d;return e==="routine"&&await t.from("todos").update({routine_id:null}).eq("routine_id",l.id),i&&i(l.id,Mu.ALL),{success:!0}}catch(o){return console.error(`${e}   (ALL):`,o.message),{success:!1,error:o}}}}),EO=e=>["sun","mon","tue","wed","thu","fri","sat"][e],TO=({session:e,supabase:t,selectedDate:n,setTodos:i,setSuccessToastMessage:a,setShowSuccessToast:s})=>{const[r,l]=b.useState([]),[o,c]=b.useState(""),[d,f]=b.useState([]),[h,m]=b.useState(""),[p,_]=b.useState(!1),[w,y]=b.useState(!1),[g,v]=b.useState(null),[S,x]=b.useState(""),[T,E]=b.useState([]),[j,A]=b.useState(!1),[k,Z]=b.useState(null),[me,ae]=b.useState([]),[fe,q]=b.useState(!1),[D,B]=b.useState(null),G=b.useRef(new Set),{deleteThisOnly:he,deleteFromNow:Q,deleteAll:nt}=Hb({type:"routine",supabase:t,selectedDate:n,onDeleteSuccess:(F,se)=>{l(ve=>ve.filter(Ne=>Ne.id!==F)),a(" "),s(!0)}}),Oe=async()=>{var F;if((F=e==null?void 0:e.user)!=null&&F.id)try{const{data:se,error:ve}=await t.from("routines").select("*").eq("deleted",!1).order("created_at",{ascending:!1});if(ve)throw ve;l(se||[])}catch(se){console.error("  :",se.message)}},Ge=async()=>{var F;if(!(o.trim()===""||p))try{_(!0);const se={text:o,days:d,start_date:we(n),user_id:(F=e==null?void 0:e.user)==null?void 0:F.id};h&&(se.time_slot=h);const{data:ve,error:Ne}=await t.from("routines").insert([se]).select();if(Ne)throw Ne;l([ve[0],...r]),c(""),f([]),m("")}catch(se){console.error("  :",se.message)}finally{_(!1)}},Be=async(F,se,ve,Ne=null,At=!1,R="",$=null)=>{var N;try{if(At){const{error:I}=await t.from("todos").update({routine_id:null}).eq("id",F);if(I)throw I;i(V=>V.map(K=>K.id===F?{...K,routine_id:null}:K));return}if(Ne){const{error:I}=await t.from("routines").update({days:ve,time_slot:R}).eq("id",Ne);if(I)throw I;const{error:V}=await t.from("todos").update({is_pending_routine:ve.length===0}).eq("id",F);if(V)throw V;l(K=>K.map(Y=>Y.id===Ne?{...Y,days:ve,time_slot:R}:Y)),i(K=>K.map(Y=>Y.id===F?{...Y,is_pending_routine:ve.length===0}:Y))}else{const I={text:se,days:ve,time_slot:R,start_date:$||we(n),user_id:(N=e==null?void 0:e.user)==null?void 0:N.id},{data:V,error:K}=await t.from("routines").insert([I]).select();if(K)throw K;const{error:Y}=await t.from("todos").update({routine_id:V[0].id,is_pending_routine:ve.length===0}).eq("id",F);if(Y)throw Y;i(U=>U.map(ee=>ee.id===F?{...ee,routine_id:V[0].id,is_pending_routine:ve.length===0}:ee)),l(U=>[V[0],...U])}}catch(I){console.error("  :",I.message)}},z=F=>{v(F.id),x(F.text),E(F.days)},P=()=>{v(null),x(""),E([])},De=async()=>{if(!(!g||S.trim()===""||T.length===0))try{const{error:F}=await t.from("routines").update({text:S.trim(),days:T}).eq("id",g);if(F)throw F;l(r.map(se=>se.id===g?{...se,text:S.trim(),days:T}:se)),P()}catch(F){console.error("  :",F.message)}},ge=F=>{E(se=>se.includes(F)?se.filter(ve=>ve!==F):[...se,F])},ke=async F=>{const se=r.find(ve=>ve.id===F);se&&(B(se),q(!0))},W=async F=>{var se;if(!G.current.has(F))try{G.current.add(F);const ve=new Date(F),Ne=EO(ve.getDay()),{data:At,error:R}=await t.from("routines").select("*").eq("deleted",!1);if(R)throw R;const $=At.filter(N=>{const I=N.days||[],V=I.length===0||I.includes(Ne);if(N.start_date){const K=new Date(N.start_date),Y=ve>=K;return V&&Y}return V});if($.length===0)return;for(const N of $){const I=N.text,{data:V,error:K}=await t.from("todos").select("*").eq("routine_id",N.id).eq("deleted",!1);if(K)throw K;if(V&&V.length>1){console.warn(` ${N.id}    (${V.length}).     .`);for(let U=1;U<V.length;U++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",V[U].id)}const Y=V&&V.length>0?V[0]:null;if(Y){const U=Y.visible_dates||[],ee=!N.days||N.days.length===0,X=ee?"pending_routine":"routine";if(U.includes(F)){(Y.is_pending_routine!==ee||Y.section_type!==X)&&await t.from("todos").update({is_pending_routine:ee,section_type:X}).eq("id",Y.id);continue}const re=[...U,F].sort(),{error:H}=await t.from("todos").update({visible_dates:re,is_pending_routine:ee,section_type:ee?"pending_routine":"routine"}).eq("id",Y.id);H&&console.error("    :",H.message)}else{const U=!N.days||N.days.length===0,{error:ee}=await t.from("todos").insert([{text:I,completed:!1,date:F,visible_dates:[F],hidden_dates:[],order_index:0,routine_id:N.id,is_pending_routine:U,section_type:U?"pending_routine":"routine",user_id:(se=e==null?void 0:e.user)==null?void 0:se.id}]);ee&&console.error("   :",ee.message)}}}catch(ve){console.error("   :",ve.message)}finally{setTimeout(()=>{G.current.delete(F)},1e3)}},Ae=async()=>{const se=we(new Date);await W(se)},Ue=async F=>{try{const{data:se,error:ve}=await t.from("todos").select("*").eq("routine_id",F.id).eq("deleted",!1);if(ve)throw ve;const Ne=se&&se.length>0?se[0]:null;if(Ne&&Ne.visible_dates){const At=Ne.visible_dates.sort().map(R=>({id:`${Ne.id}-${R}`,date:R,text:Ne.text,completed:Ne.completed,routine_id:Ne.routine_id}));ae(At)}else ae([]);Z(F),A(!0)}catch(se){console.error("   :",se.message),alert("   : "+se.message)}},ot=()=>{A(!1),Z(null),ae([])},Fe=()=>{y(!0),Oe()},wt=()=>{y(!1),c(""),f([])},St=F=>{f(se=>se.includes(F)?se.filter(ve=>ve!==F):[...se,F])};return b.useEffect(()=>{e&&Oe()},[e]),{routines:r,setRoutines:l,routineInput:o,selectedDays:d,selectedTimeSlot:h,isAddingRoutine:p,showRoutineModal:w,editingRoutineId:g,editingRoutineText:S,editingRoutineDays:T,showRoutineHistory:j,selectedRoutineForHistory:k,routineHistoryData:me,routineCreationInProgress:G,showDeleteConfirmModal:fe,setShowDeleteConfirmModal:q,routineToDelete:D,setRoutineToDelete:B,setRoutineInput:c,setSelectedTimeSlot:m,fetchRoutines:Oe,handleAddRoutine:Ge,handleDeleteRoutine:ke,deleteThisOnly:he,deleteFromNow:Q,deleteAll:nt,handleStartEditRoutine:z,handleSaveEditRoutine:De,handleCancelEditRoutine:P,handleToggleEditDay:ge,handleCreateRoutineFromTodo:Be,createRoutineTodosForDate:W,createRoutineTodos:Ae,fetchRoutineHistory:Ue,handleCloseRoutineHistory:ot,handleOpenRoutine:Fe,handleCloseRoutine:wt,handleToggleDay:St}};function jO(e,t,n){const i=(c,d)=>e.filter(f=>!(f.parent_id||f.section_type!==c||c==="custom"&&f.section_id!==d)).sort((f,h)=>f.order_index-h.order_index),a=async c=>{let d=[...e];c.forEach((f,h)=>{const m=d.findIndex(p=>p.id===f.id);m!==-1&&(d[m]={...d[m],order_index:h+1})}),t(d);try{for(let f=0;f<c.length;f++)await n.from("todos").update({order_index:f+1}).eq("id",c[f].id)}catch(f){console.error("  :",f.message),t(e)}};return{handleMoveUp:async(c,d,f)=>{if(!e.find(w=>w.id===c))return;const m=i(d,f),p=m.findIndex(w=>w.id===c);if(p<=0)return;const _=Hi(m,p,p-1);await a(_)},handleMoveDown:async(c,d,f)=>{if(!e.find(w=>w.id===c))return;const m=i(d,f),p=m.findIndex(w=>w.id===c);if(p>=m.length-1)return;const _=Hi(m,p,p+1);await a(_)},handleMoveToTop:async(c,d,f)=>{if(!e.find(w=>w.id===c))return;const m=i(d,f),p=m.findIndex(w=>w.id===c);if(p<=0)return;const _=Hi(m,p,0);await a(_)},handleMoveToBottom:async(c,d,f)=>{if(!e.find(w=>w.id===c))return;const m=i(d,f),p=m.findIndex(w=>w.id===c);if(p>=m.length-1)return;const _=Hi(m,p,m.length-1);await a(_)},updateTodoOrder:a}}function OO(e,t,n,i){const[a,s]=b.useState(!1),[r,l]=b.useState(null),[o,c]=b.useState(null);return{isDraggingAny:a,activeTodoId:r,overId:o,handleDragStart:p=>{const{active:_}=p;s(!0),l(_.id)},handleDragOver:p=>{const{over:_}=p;c((_==null?void 0:_.id)||null)},handleDragCancel:()=>{s(!1),l(null),c(null)},handleDragEnd:async p=>{s(!1),l(null),c(null);const{active:_,over:w}=p;if(!w)return;if(w.id&&String(w.id).startsWith("timeline-")){const q=parseInt(String(w.id).replace("timeline-",""),10),D=e.find(B=>B.id===_.id);D&&i&&i(D.id,q);return}if(_.id===w.id)return;const y=e.find(q=>q.id===_.id),g=e.find(q=>q.id===w.id);if(!y||!g)return;const v=y.section_type,S=y.section_id||null,x=g.section_type,T=g.section_id||null,E=v!==x||v==="custom"&&S!==T,j=x,A=T,k=e.filter(q=>!(q.parent_id||q.section_type!==j||j==="custom"&&q.section_id!==A)).sort((q,D)=>q.order_index-D.order_index),Z=k.findIndex(q=>q.id===_.id),me=k.findIndex(q=>q.id===w.id);let ae=[...k];E?ae.splice(me,0,{...y,section_type:j,section_id:A,routine_id:j==="routine"||j==="pending_routine"?y.routine_id:null}):ae=Hi(k,Z,me);let fe=[...e];if(ae.forEach((q,D)=>{const B=fe.findIndex(G=>G.id===q.id);B!==-1&&(fe[B]={...q,order_index:D+1})}),E){const q=fe.findIndex(D=>D.id===_.id);q!==-1&&(fe[q]={...fe[q],section_type:j,section_id:A,routine_id:j==="routine"||j==="pending_routine"?fe[q].routine_id:null})}t(fe);try{if(E){const q={section_type:j,section_id:A};j!=="routine"&&j!=="pending_routine"&&(q.routine_id=null,q.is_pending_routine=!1),await n.from("todos").update(q).eq("id",_.id)}for(let q=0;q<ae.length;q++)await n.from("todos").update({order_index:q+1}).eq("id",ae[q].id)}catch(q){console.error("  :",q.message),t(e)}}}}const AO=(e,t,n,i,a,s,r,l,o)=>{const c=jO(i,a,t),d=async(R,$)=>{const N=we(n),I=i.filter(re=>!re.scheduled_time||re.scheduled_date!==N?!1:parseInt(re.scheduled_time.split(":")[0],10)===$);let V=0;I.length>0&&(V=Math.max(...I.map(H=>parseInt(H.scheduled_time.split(":")[1],10)))+1);const K=`${$.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`,Y=i.find(re=>re.id===R),U=(Y==null?void 0:Y.timeline_history)||[],ee={scheduled_date:N,scheduled_time:K,assigned_at:new Date().toISOString()},X=[...U,ee];a(re=>re.map(H=>H.id===R?{...H,scheduled_time:K,scheduled_date:N,timeline_history:X}:H));try{await t.from("todos").update({scheduled_time:K,scheduled_date:N,timeline_history:X}).eq("id",R)}catch(re){console.error("  :",re.message)}},f=async R=>{a($=>$.map(N=>N.id===R?{...N,scheduled_time:null,scheduled_date:null}:N));try{await t.from("todos").update({scheduled_time:null,scheduled_date:null}).eq("id",R)}catch($){console.error("  :",$.message)}},h=async(R,$=6)=>{const N=i.find(U=>U.id===R);if(!(N!=null&&N.scheduled_time))return;const I=parseInt(N.scheduled_time.split(":")[0],10),V=parseInt(N.scheduled_time.split(":")[1],10),K=i.filter(U=>U.scheduled_time&&parseInt(U.scheduled_time.split(":")[0],10)===I).sort((U,ee)=>{const X=parseInt(U.scheduled_time.split(":")[1],10),re=parseInt(ee.scheduled_time.split(":")[1],10);return X-re}),Y=K.findIndex(U=>U.id===R);if(Y>0){const U=K[Y-1],ee=parseInt(U.scheduled_time.split(":")[1],10),X=`${I.toString().padStart(2,"0")}:${ee.toString().padStart(2,"0")}`,re=`${I.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`;a(H=>H.map(oe=>oe.id===R?{...oe,scheduled_time:X}:oe.id===U.id?{...oe,scheduled_time:re}:oe));try{await t.from("todos").update({scheduled_time:X}).eq("id",R),await t.from("todos").update({scheduled_time:re}).eq("id",U.id)}catch(H){console.error("   :",H.message)}}else{if(I<=$)return;const U=I-1,ee=i.filter(H=>H.scheduled_time&&parseInt(H.scheduled_time.split(":")[0],10)===U);let X=0;ee.length>0&&(X=Math.max(...ee.map(oe=>parseInt(oe.scheduled_time.split(":")[1],10)))+1);const re=`${U.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`;a(H=>H.map(oe=>oe.id===R?{...oe,scheduled_time:re}:oe));try{await t.from("todos").update({scheduled_time:re}).eq("id",R)}catch(H){console.error("   :",H.message)}}},m=async(R,$=24)=>{const N=i.find(U=>U.id===R);if(!(N!=null&&N.scheduled_time))return;const I=parseInt(N.scheduled_time.split(":")[0],10),V=parseInt(N.scheduled_time.split(":")[1],10),K=i.filter(U=>U.scheduled_time&&parseInt(U.scheduled_time.split(":")[0],10)===I).sort((U,ee)=>{const X=parseInt(U.scheduled_time.split(":")[1],10),re=parseInt(ee.scheduled_time.split(":")[1],10);return X-re}),Y=K.findIndex(U=>U.id===R);if(Y<K.length-1){const U=K[Y+1],ee=parseInt(U.scheduled_time.split(":")[1],10),X=`${I.toString().padStart(2,"0")}:${ee.toString().padStart(2,"0")}`,re=`${I.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`;a(H=>H.map(oe=>oe.id===R?{...oe,scheduled_time:X}:oe.id===U.id?{...oe,scheduled_time:re}:oe));try{await t.from("todos").update({scheduled_time:X}).eq("id",R),await t.from("todos").update({scheduled_time:re}).eq("id",U.id)}catch(H){console.error("   :",H.message)}}else{if(I>=$)return;const U=I+1,ee=i.filter(H=>H.scheduled_time&&parseInt(H.scheduled_time.split(":")[0],10)===U);let X=0;if(ee.length>0){const H=Math.min(...ee.map(oe=>parseInt(oe.scheduled_time.split(":")[1],10)));if(X=H>0?H-1:0,X===0&&H===0){const oe=ee.map(_e=>({..._e,scheduled_time:`${U.toString().padStart(2,"0")}:${(parseInt(_e.scheduled_time.split(":")[1],10)+1).toString().padStart(2,"0")}`}));a(_e=>_e.map(it=>it.id===R?{...it,scheduled_time:`${U.toString().padStart(2,"0")}:00`}:oe.find(Ft=>Ft.id===it.id)||it));try{await t.from("todos").update({scheduled_time:`${U.toString().padStart(2,"0")}:00`}).eq("id",R);for(const _e of oe)await t.from("todos").update({scheduled_time:_e.scheduled_time}).eq("id",_e.id)}catch(_e){console.error("   :",_e.message)}return}}const re=`${U.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`;a(H=>H.map(oe=>oe.id===R?{...oe,scheduled_time:re}:oe));try{await t.from("todos").update({scheduled_time:re}).eq("id",R)}catch(H){console.error("   :",H.message)}}},p=OO(i,a,t,d),[_,w]=b.useState(""),[y,g]=b.useState(""),[v,S]=b.useState(""),[x,T]=b.useState(!0),[E,j]=b.useState(!1),[A,k]=b.useState(null),[Z,me]=b.useState(!1),[ae,fe]=b.useState(!1),[q,D]=b.useState(""),[B,G]=b.useState(null),[he,Q]=b.useState(null),[nt,Oe]=b.useState(!1),[Ge,Be]=b.useState(null),z=b.useRef(new Set),P=b.useRef(new Set),{deleteThisOnly:De,deleteFromNow:ge,deleteAll:ke}=Hb({type:"todo",supabase:t,selectedDate:n,onDeleteSuccess:(R,$)=>{const N=i.find(I=>I.id===R);N&&(k(N),G({id:R,deleteType:$,item:N}),me(!0),setTimeout(()=>{me(!1),k(null),G(null)},5e3)),a(I=>I.filter(V=>V.id!==R)),Oe(!1),Be(null)}}),W=R=>["sun","mon","tue","wed","thu","fri","sat"][R],Ae=async R=>{var $;if(!z.current.has(R))try{z.current.add(R);const N=new Date(R),I=W(N.getDay()),{data:V,error:K}=await t.from("routines").select("*").eq("deleted",!1);if(K)throw K;const Y=V.filter(U=>{const ee=U.days||[],X=ee.length===0||ee.includes(I);if(U.start_date){const re=new Date(U.start_date),H=N>=re;return X&&H}return X});if(Y.length===0)return;for(const U of Y){const ee=U.text,{data:X,error:re}=await t.from("todos").select("*").eq("routine_id",U.id).eq("deleted",!1);if(re)throw re;if(X&&X.length>1){console.warn(` ${U.id}    (${X.length}).     .`);for(let oe=1;oe<X.length;oe++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",X[oe].id)}const H=X&&X.length>0?X[0]:null;if(H){if((H.hidden_dates||[]).includes(R)||H.stop_carryover_from&&R>=H.stop_carryover_from)continue;const _e=!U.days||U.days.length===0,it=H.visible_dates||[],Gt=_e?"pending_routine":"routine";if(it.includes(R)){if(H.is_pending_routine!==_e||H.section_type!==Gt){const{error:xi}=await t.from("todos").update({is_pending_routine:_e,section_type:Gt}).eq("id",H.id);xi&&console.error(" :",xi)}continue}const Ft=[...it,R].sort(),{error:Gn}=await t.from("todos").update({visible_dates:Ft,is_pending_routine:_e,section_type:_e?"pending_routine":"routine"}).eq("id",H.id);Gn&&console.error("    :",Gn.message)}else{const oe=!U.days||U.days.length===0,{error:_e}=await t.from("todos").insert([{text:ee,completed:!1,date:R,visible_dates:[R],hidden_dates:[],order_index:0,routine_id:U.id,is_pending_routine:oe,section_type:oe?"pending_routine":"routine",user_id:($=e==null?void 0:e.user)==null?void 0:$.id}]);_e&&console.error("   :",_e.message)}}}catch(N){console.error("   :",N.message)}finally{setTimeout(()=>{z.current.delete(R)},1e3)}},Ue=async()=>{var R;if(!((R=e==null?void 0:e.user)!=null&&R.id)){T(!1);return}try{T(!0);const $=we(n);await Ae($);const{data:N,error:I}=await t.from("todos").select("*").eq("deleted",!1);if(I)throw I;const V=(N||[]).filter(H=>H.routine_id),K=[...new Set(V.map(H=>H.routine_id))];let Y={};if(K.length>0){const{data:H}=await t.from("routines").select("*").in("id",K);Y=(H||[]).reduce((oe,_e)=>(oe[_e.id]=_e,oe),{})}const U=new Date($),ee=W(U.getDay()),X=(N||[]).filter(H=>{if(H.stop_carryover_from&&$>=H.stop_carryover_from||H.hidden_dates&&Array.isArray(H.hidden_dates)&&H.hidden_dates.includes($))return!1;if(H.routine_id){const _e=Y[H.routine_id];if(_e){const it=_e.days||[];if(it.length>0&&!it.includes(ee))return!1}}return H.visible_dates&&Array.isArray(H.visible_dates)?H.visible_dates.includes($):H.date===$}),re=X.filter(H=>H.routine_id);if(re.length>0){const H=[...new Set(re.map(_e=>_e.routine_id))],{data:oe}=await t.from("routines").select("*").in("id",H);for(const _e of re){const it=oe==null?void 0:oe.find(Gn=>Gn.id===_e.routine_id);if(!it)continue;const Gt=!it.days||it.days.length===0,Ft=Gt?"pending_routine":"routine";(_e.section_type!==Ft||_e.is_pending_routine!==Gt)&&(await t.from("todos").update({section_type:Ft,is_pending_routine:Gt}).eq("id",_e.id),_e.section_type=Ft,_e.is_pending_routine=Gt)}}a(X)}catch($){console.error("   :",$.message)}finally{T(!1)}},ot=async()=>{var R;if(!(_.trim()===""||E))try{j(!0);const $=i.filter(Y=>!Y.parent_id&&Y.section_type==="normal"),N=$.length>0?Math.max(...$.map(Y=>Y.order_index))+1:1,I=we(n),{data:V,error:K}=await t.from("todos").insert([{text:_,completed:!1,order_index:N,date:I,visible_dates:[I],hidden_dates:[],section_type:"normal",user_id:(R=e==null?void 0:e.user)==null?void 0:R.id}]).select();if(K)throw K;a([...i,V[0]]),w("")}catch($){console.error("   :",$.message)}finally{j(!1)}},Fe=async()=>{var R,$;if(!(y.trim()===""||E))try{j(!0);const N=we(n),{data:I,error:V}=await t.from("routines").insert([{text:y,days:[],start_date:N,user_id:(R=e==null?void 0:e.user)==null?void 0:R.id}]).select();if(V)throw V;const K=I[0],Y=i.filter(re=>!re.parent_id&&re.section_type==="pending_routine"),U=Y.length>0?Math.max(...Y.map(re=>re.order_index))+1:1,{data:ee,error:X}=await t.from("todos").insert([{text:y,completed:!1,order_index:U,date:N,visible_dates:[N],hidden_dates:[],routine_id:K.id,is_pending_routine:!0,section_type:"pending_routine",user_id:($=e==null?void 0:e.user)==null?void 0:$.id}]).select();if(X)throw X;r([K,...s]),a([...i,ee[0]]),g("")}catch(N){console.error("   :",N.message)}finally{j(!1)}},wt=async()=>{var R;if(!(v.trim()===""||E))try{j(!0);const $=i.filter(Y=>!Y.parent_id&&Y.section_type==="normal"),N=$.length>0?Math.max(...$.map(Y=>Y.order_index))+1:1,I=we(n),{data:V,error:K}=await t.from("todos").insert([{text:v,completed:!1,order_index:N,date:I,visible_dates:[I],hidden_dates:[],section_type:"normal",user_id:(R=e==null?void 0:e.user)==null?void 0:R.id}]).select();if(K)throw K;a([...i,V[0]]),S("")}catch($){console.error("   :",$.message)}finally{j(!1)}},St=async R=>{const $=i.find(N=>N.id===R);if($)try{const N=!$.completed,I=N?new Date().toISOString():null,{error:V}=await t.from("todos").update({completed:N,completed_at:I}).eq("id",R);if(V)throw V;a(i.map(K=>K.id===R?{...K,completed:N,completed_at:I}:K))}catch(N){console.error("   :",N.message)}},F=R=>{a(i.filter($=>$.id!==R))},se=async(R,$)=>{const N=i.find(I=>I.id===R);N&&($?$==="this-only"?await De(N):$==="from-now"?await ge(N):$==="all"&&await ke(N):(Be(N),Oe(!0)))},ve=async()=>{if(!(!A||!B))try{const{deleteType:R}=B,$=we(n);if(R==="this-only"){const N=(A.hidden_dates||[]).filter(V=>V!==$),{error:I}=await t.from("todos").update({hidden_dates:N}).eq("id",A.id);if(I)throw I}else if(R==="from-now"){const{error:N}=await t.from("todos").update({visible_dates:A.visible_dates,stop_carryover_from:null}).eq("id",A.id);if(N)throw N}else if(R==="all"){const{error:N}=await t.from("todos").update({deleted:!1,deleted_date:null}).eq("id",A.id);if(N)throw N}a(N=>{const I={...A};return[...N,I].sort((K,Y)=>K.order_index-Y.order_index)}),me(!1),k(null),G(null)}catch(R){console.error("  :",R.message)}},Ne=async(R,$)=>{var N,I;try{let V=null;P.current.add(R);const K=new Date().toISOString();if(a(ee=>(V=ee.find(X=>X.id===R),!V||V.text===$?(P.current.delete(R),ee):ee.map(X=>X.id===R?{...X,text:$,updated_at:K}:X))),!V||V.text===$)return;const{error:Y}=await t.from("todo_history").insert([{todo_id:R,previous_text:V.text,new_text:$,changed_on_date:V.date,user_id:(N=e==null?void 0:e.user)==null?void 0:N.id}]);if(Y&&console.error("  :",Y.message),V.original_todo_id){const{data:ee,error:X}=await t.from("todos").select("text, date").eq("id",V.original_todo_id).single();!X&&ee&&await t.from("todo_history").insert([{todo_id:V.original_todo_id,previous_text:V.text,new_text:$,changed_on_date:V.date,user_id:(I=e==null?void 0:e.user)==null?void 0:I.id}])}const{error:U}=await t.from("todos").update({text:$}).eq("id",R);U?(console.error("   :",U.message),a(ee=>ee.map(X=>X.id===R?V:X)),P.current.delete(R)):setTimeout(()=>{P.current.delete(R)},5e3)}catch(V){console.error("   :",V.message),P.current.delete(R)}},At=async(R,$)=>{var N;if(!(!$||$.trim()===""))try{const V=i.filter(ee=>ee.parent_id===R).length+1,K=we(n),{data:Y,error:U}=await t.from("todos").insert([{text:$.trim(),completed:!1,order_index:V,date:K,parent_id:R,user_id:(N=e==null?void 0:e.user)==null?void 0:N.id}]).select();if(U)throw U;a([...i,Y[0]])}catch(I){console.error("    :",I.message)}};return{inputValue:_,setInputValue:w,routineInputValue:y,setRoutineInputValue:g,normalInputValue:v,setNormalInputValue:S,loading:x,isAdding:E,deletedTodo:A,showUndoToast:Z,showSuccessToast:ae,successToastMessage:q,lastDeleteAction:B,focusedTodoId:he,setFocusedTodoId:Q,selectedTodoForModal:l,showDeleteConfirmModal:nt,setShowDeleteConfirmModal:Oe,todoToDelete:Ge,setTodoToDelete:Be,isDraggingAny:p.isDraggingAny,activeTodoId:p.activeTodoId,overId:p.overId,fetchTodos:Ue,handleAddTodo:ot,handleAddRoutineTodo:Fe,handleAddNormalTodo:wt,handleToggleTodo:St,handleDeleteTodo:se,deleteThisOnly:De,deleteFromNow:ge,deleteAll:ke,handleUndoDelete:ve,handleEditTodo:Ne,handleAddSubTodo:At,handleRemoveTodoFromUI:F,handleDragStart:p.handleDragStart,handleDragOver:p.handleDragOver,handleDragCancel:p.handleDragCancel,handleDragEnd:p.handleDragEnd,handleMoveUp:c.handleMoveUp,handleMoveDown:c.handleMoveDown,handleMoveToTop:c.handleMoveToTop,handleMoveToBottom:c.handleMoveToBottom,handleRemoveFromTimeline:f,handleMoveUpInTimeline:h,handleMoveDownInTimeline:m}},NO=({session:e,supabase:t,selectedTodoForModal:n,setSelectedTodoForModal:i})=>{const[a,s]=b.useState(!1),[r,l]=b.useState({}),[o,c]=b.useState([]);return{showTodoHistoryModal:a,todoHistory:r,expandedHistoryIds:o,handleOpenTodoHistoryModal:async m=>{i(m);try{const{data:p,error:_}=await t.from("todo_history").select("*").eq("todo_id",m.id).order("changed_at",{ascending:!1});if(_)throw _;l(w=>({...w,[m.id]:p||[]}))}catch(p){console.error("Error fetching history:",p)}s(!0)},handleCloseTodoHistoryModal:()=>{s(!1),i(null),c([])},toggleHistoryDetail:m=>{c(p=>p.includes(m)?p.filter(_=>_!==m):[...p,m])}}},CO=({selectedTodoForModal:e,setSelectedTodoForModal:t,routines:n})=>{const[i,a]=b.useState(!1),[s,r]=b.useState([]),[l,o]=b.useState(!1),[c,d]=b.useState("");return{showTodoRoutineSetupModal:i,routineDaysForModal:s,setRoutineDaysForModal:r,isEditingRoutineInModal:l,setIsEditingRoutineInModal:o,routineTimeSlotForModal:c,setRoutineTimeSlotForModal:d,handleOpenTodoRoutineSetupModal:p=>{t(p);const _=n.find(w=>w.id===p.routine_id);_?(r(_.days||[]),d(_.time_slot||""),o(!1)):(r([]),d(""),o(!0)),a(!0)},handleCloseTodoRoutineSetupModal:()=>{a(!1),t(null),r([]),d(""),o(!1)},handleToggleRoutineDayInModal:p=>{r(_=>_.includes(p)?_.filter(w=>w!==p):[..._,p])}}},DO=({session:e,supabase:t,selectedDate:n})=>{const i=b.useRef(!1);return{carryOverInProgress:i,carryOverIncompleteTodos:async r=>{if(!i.current)try{i.current=!0;const{data:l,error:o}=await t.from("todos").select("*").eq("deleted",!1).eq("completed",!1);if(o)throw o;if(!l||l.length===0)return;const c=l.filter(d=>(d.hidden_dates||[]).includes(r)?!1:d.visible_dates&&Array.isArray(d.visible_dates)&&d.visible_dates.length>0?d.visible_dates.includes(r)?!1:d.visible_dates.some(m=>m<r):!!(d.date&&d.date<r));if(c.length===0)return;for(const d of c){let f=[];d.visible_dates&&Array.isArray(d.visible_dates)&&d.visible_dates.length>0?f=[...d.visible_dates,r]:f=d.date?[d.date,r]:[r];const{error:h}=await t.from("todos").update({visible_dates:f}).eq("id",d.id);h&&console.error(` ${d.id}  :`,h.message)}}catch(l){console.error("  :",l.message)}finally{i.current=!1}},movePastIncompleteTodosToToday:async()=>{if(!i.current)try{i.current=!0;const r=new Date,l=we(r),{data:o,error:c}=await t.from("todos").select("date").lt("date",l).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("date",{ascending:!0}).limit(1);if(c)throw c;if(!o||o.length===0)return;const d=new Date(o[0].date+"T00:00:00");let f=new Date(d);const h=new Date(r);h.setDate(h.getDate()-1);let m=0;for(;f<=h;){const p=we(f),_=new Date(f);_.setDate(_.getDate()+1);const w=we(_),{data:y,error:g}=await t.from("todos").select("*").eq("date",p).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("order_index",{ascending:!0});if(g)throw g;if(y&&y.length>0){const{data:v,error:S}=await t.from("todos").select("*").eq("date",w).eq("deleted",!1).order("order_index",{ascending:!0});if(S)throw S;const x=new Set;v==null||v.forEach(E=>{E.original_todo_id!==null&&x.add(E.original_todo_id)});const T=y.filter(E=>{if(E.stop_carryover_from&&p>=E.stop_carryover_from)return!1;const j=E.original_todo_id||E.id;return!x.has(j)});if(T.length>0){const E=T.map(q=>q.original_todo_id||q.id).filter((q,D,B)=>B.indexOf(q)===D),{data:j,error:A}=await t.from("todos").select("id, created_at").in("id",E);if(A)throw A;const k={};j==null||j.forEach(q=>{k[q.id]=q.created_at});const me=(v?v.length:0)+1,ae=T.map((q,D)=>{const B=q.original_todo_id||q.id;return{text:q.text,completed:!1,date:w,created_at:k[B]||q.created_at,order_index:me+D,original_todo_id:B,parent_id:null,routine_id:null}}),{error:fe}=await t.from("todos").insert(ae);if(fe)throw fe;m+=T.length}}f.setDate(f.getDate()+1)}m>0}catch(r){console.error("    :",r.message)}finally{i.current=!1}}}};function RO(e,t){const[n,i]=b.useState([]),[a,s]=b.useState(!1),[r,l]=b.useState(""),[o,c]=b.useState(null),[d,f]=b.useState(""),[h,m]=b.useState(!1),[p,_]=b.useState(""),w=()=>{if(n.length===0)return"";const T=Math.floor(Math.random()*n.length);return n[T]},y=()=>{let T=0;m(!0),setTimeout(()=>{let E=w();for(;E===p&&n.length>1&&T<10;)E=w(),T++;m(!1),_(E)},300)},g=async()=>{try{const{data:T,error:E}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(E)throw E;if(T&&T.length>0){const j=T.map(A=>A.message);i(j),p||_(j[0])}}catch(T){console.error("   :",T.message)}},v=async T=>{var E;try{const{data:j}=await t.from("encouragement_messages").select("order_index").order("order_index",{ascending:!1}).limit(1),A=j&&j.length>0?j[0].order_index:0,{error:k}=await t.from("encouragement_messages").insert([{message:T,order_index:A+1,user_id:(E=e==null?void 0:e.user)==null?void 0:E.id}]);if(k)throw k;await g()}catch(j){console.error("   :",j.message),alert("   .")}},S=async(T,E)=>{try{const{data:j}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!j||T>=j.length)throw new Error("   .");const A=j[T],{error:k}=await t.from("encouragement_messages").update({message:E}).eq("id",A.id);if(k)throw k;await g()}catch(j){console.error("   :",j.message),alert("   .")}},x=async T=>{try{const{data:E}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!E||T>=E.length)throw new Error("   .");const j=E[T],{error:A}=await t.from("encouragement_messages").delete().eq("id",j.id);if(A)throw A;await g()}catch(E){console.error("   :",E.message),alert("   .")}};return b.useEffect(()=>{n.length>0&&!p&&_(w())},[n]),{encouragementMessages:n,showEncouragementModal:a,setShowEncouragementModal:s,newEncouragementMessage:r,setNewEncouragementMessage:l,editingEncouragementId:o,setEditingEncouragementId:c,editingEncouragementText:d,setEditingEncouragementText:f,showEncouragementEmoji:h,currentEncouragementMessage:p,handleEncouragementClick:y,fetchEncouragementMessages:g,addEncouragementMessage:v,updateEncouragementMessage:S,deleteEncouragementMessage:x}}function MO(e){const[t,n]=b.useState(!1),[i,a]=b.useState([]),[s,r]=b.useState("1week"),l=async()=>{try{const d=new Date,f=we(d);let h=null;if(s!=="all")switch(h=new Date(d),s){case"1week":h.setDate(d.getDate()-7);break;case"2weeks":h.setDate(d.getDate()-14);break;case"1month":h.setMonth(d.getMonth()-1);break;case"3months":h.setMonth(d.getMonth()-3);break;case"6months":h.setMonth(d.getMonth()-6);break}let m=e.from("todos").select("*").eq("deleted",!1).is("routine_id",null).order("created_at",{ascending:!0});h&&(m=m.gte("date",we(h)));const{data:p,error:_}=await m;if(_)throw _;const w={};for(const g of p||[]){const v=g.original_todo_id||g.id;w[v]||(w[v]=[]),w[v].push(g)}const y=Object.entries(w).map(([g,v])=>{const S=v.sort((A,k)=>new Date(A.date)-new Date(k.date)),x=S[0],T=S.map(A=>A.date);let E=null;for(const A of S)if(A.completed&&A.completed_at){const k=new Date(A.completed_at);E=we(k);break}const j=S.find(A=>A.date===f);return{text:x.text,originalId:parseInt(g),createdAt:x.created_at,startDate:T[0],endDate:T[T.length-1],dates:T,completed:(j==null?void 0:j.completed)||!1,completedDate:E}}).sort((g,v)=>new Date(g.createdAt)-new Date(v.createdAt));a(y)}catch(d){console.error("   :",d.message)}};return{showGanttChart:t,ganttData:i,ganttPeriod:s,setGanttPeriod:r,handleOpenGanttChart:async()=>{n(!0),await l()},handleCloseGanttChart:()=>{n(!1),a([])},fetchGanttData:l}}function kO(){const{session:e,authLoading:t,handleGoogleLogin:n,handleLogout:i}=Zj(),[a,s]=b.useState(new Date),[r,l]=b.useState(!1),o=b.useRef(new Set),c=_1(Ou(dh,{activationConstraint:{delay:120,tolerance:5}}),Ou(Tb,{activationConstraint:{delay:120,tolerance:5}}),Ou(ch,{coordinateGetter:Qj})),[d,f]=b.useState([]),[h,m]=b.useState(null),{showTodoHistoryModal:p,todoHistory:_,expandedHistoryIds:w,handleOpenTodoHistoryModal:y,handleCloseTodoHistoryModal:g,toggleHistoryDetail:v}=NO({session:e,supabase:qe,selectedTodoForModal:h,setSelectedTodoForModal:m}),{showRoutineModal:S,routines:x,setRoutines:T,routineInput:E,setRoutineInput:j,selectedDays:A,selectedTimeSlot:k,setSelectedTimeSlot:Z,isAddingRoutine:me,editingRoutineId:ae,editingRoutineText:fe,setEditingRoutineText:q,showRoutineHistory:D,selectedRoutineForHistory:B,routineHistoryData:G,editingRoutineDays:he,showDeleteConfirmModal:Q,setShowDeleteConfirmModal:nt,routineToDelete:Oe,fetchRoutines:Ge,handleAddRoutine:Be,handleCreateRoutineFromTodo:z,handleStartEditRoutine:P,handleCancelEditRoutine:De,handleSaveEditRoutine:ge,handleToggleEditDay:ke,handleDeleteRoutine:W,deleteThisOnly:Ae,deleteFromNow:Ue,deleteAll:ot,fetchRoutineHistory:Fe,handleCloseRoutineHistory:wt,handleOpenRoutine:St,handleCloseRoutine:F,handleToggleDay:se,createRoutineTodos:ve}=TO({session:e,supabase:qe,selectedDate:a,setTodos:f,setSuccessToastMessage:()=>{},setShowSuccessToast:()=>{}}),{showTodoRoutineSetupModal:Ne,routineDaysForModal:At,setRoutineDaysForModal:R,isEditingRoutineInModal:$,setIsEditingRoutineInModal:N,routineTimeSlotForModal:I,setRoutineTimeSlotForModal:V,handleOpenTodoRoutineSetupModal:K,handleCloseTodoRoutineSetupModal:Y,handleToggleRoutineDayInModal:U}=CO({selectedTodoForModal:h,setSelectedTodoForModal:m,routines:x}),{carryOverIncompleteTodos:ee}=DO({session:e,supabase:qe,selectedDate:a}),{routineInputValue:X,setRoutineInputValue:re,normalInputValue:H,setNormalInputValue:oe,loading:_e,isDraggingAny:it,isAdding:Gt,showUndoToast:Ft,showSuccessToast:Gn,successToastMessage:Ua,lastDeleteAction:xi,focusedTodoId:at,setFocusedTodoId:Mt,showDeleteConfirmModal:kt,setShowDeleteConfirmModal:_n,todoToDelete:It,activeTodoId:ct,overId:Ut,fetchTodos:Kn,handleAddRoutineTodo:ft,handleAddNormalTodo:wn,handleToggleTodo:xt,handleDeleteTodo:Vt,handleAddSubTodo:Sn,handleEditTodo:xn,handleDragStart:En,handleDragOver:ia,handleDragCancel:Qs,handleDragEnd:qb,handleUndoDelete:mh,deleteThisOnly:$b,deleteFromNow:Ib,deleteAll:Vb,handleRemoveTodoFromUI:hl,handleMoveUp:ml,handleMoveDown:gl,handleMoveToTop:vl,handleMoveToBottom:yl,handleRemoveFromTimeline:gh,handleMoveUpInTimeline:vh,handleMoveDownInTimeline:yh}=AO(e,qe,a,d,f,x,T,h),pl=O=>{Mt(O)},bl=O=>{},Yb=()=>{mh()},{showGanttChart:ph,ganttData:Gb,ganttPeriod:bh,setGanttPeriod:Kb,handleOpenGanttChart:Xb,handleCloseGanttChart:Qb,fetchGanttData:Jb}=MO(qe),[Pb,_h]=b.useState(!1),{memoContent:Zb,setMemoContent:Fb,isSavingMemo:Wb,fetchMemoContent:e_}=xO(e),{encouragementMessages:t_,showEncouragementModal:n_,setShowEncouragementModal:wh,newEncouragementMessage:i_,setNewEncouragementMessage:a_,editingEncouragementId:s_,setEditingEncouragementId:r_,editingEncouragementText:l_,setEditingEncouragementText:o_,showEncouragementEmoji:c_,currentEncouragementMessage:u_,handleEncouragementClick:d_,fetchEncouragementMessages:f_,addEncouragementMessage:h_,updateEncouragementMessage:m_,deleteEncouragementMessage:g_}=RO(e,qe),v_=async O=>{var L,ie;try{const te=we(a),M=d.filter(xe=>!xe.parent_id&&xe.section_type==="normal"),le=M.length>0?Math.max(...M.map(xe=>xe.order_index))+1:1,We=`temp_${Date.now()}_${Math.random()}`,Se={id:We,text:O,completed:!1,order_index:le,date:te,visible_dates:[te],hidden_dates:[],section_type:"normal",user_id:(L=e==null?void 0:e.user)==null?void 0:L.id,_isOptimistic:!0};if(f(xe=>[...xe,Se]),(ie=e==null?void 0:e.user)!=null&&ie.id&&qe){const{data:xe,error:et}=await qe.from("todos").insert([{text:O,completed:!1,order_index:le,date:te,visible_dates:[te],hidden_dates:[],section_type:"normal",user_id:e.user.id}]).select();if(et)throw et;f(Yt=>Yt.map(Ee=>Ee.id===We?xe[0]:Ee))}else{const xe=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");xe.push({text:O,dateStr:te,timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(xe))}}catch(te){console.error("Quick add error:",te);const M=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");M.push({text:O,dateStr:we(a),timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(M))}},[Xn,y_]=b.useState(()=>localStorage.getItem("viewMode")||"horizontal"),[Ac,Sh]=b.useState({normal:" ",routine:" "}),[aa,Js]=b.useState([]),[p_,xh]=b.useState(!1),[Eh,Th]=b.useState(!1),[jh,Oh]=b.useState({}),b_=SO(e),{sectionOrder:za,setSectionOrder:Ah,fetchSectionOrder:__,saveSectionOrder:Nh,moveSectionLeft:Nc,moveSectionRight:Cc,changeSectionIcon:_l,getSectionIcon:wl}=b_,La=b.useRef(null),[w_,S_]=b.useState(0),Dc=b.useRef(null),Ch=b.useRef(null),[sa,Rc]=b.useState([]),[x_,Dh]=b.useState(!1),Rh=async O=>{var L;(L=e==null?void 0:e.user)!=null&&L.id&&await Qn.set(Jn.HIDDEN_SECTIONS,O,e.user.id)},E_=async()=>{var L;if(!((L=e==null?void 0:e.user)!=null&&L.id))return;const O=await Qn.get(Jn.HIDDEN_SECTIONS);O&&Rc(O)},Mc=O=>{const L=[...sa,O];Rc(L),Rh(L)},T_=O=>{const L=sa.filter(ie=>ie!==O);Rc(L),Rh(L)},j_=()=>{const O=new Date(a);O.setDate(O.getDate()-1),s(O)},O_=()=>{const O=new Date(a);O.setDate(O.getDate()+1),s(O)},A_=O=>{const L=new Date(O.target.value+"T00:00:00");s(L)},N_=async()=>{var L;if(!((L=e==null?void 0:e.user)!=null&&L.id))return;const O=await Qn.get(Jn.SECTION_TITLES);O&&Sh(ie=>({...ie,...O}))},C_=async(O,L)=>{var te;if(!((te=e==null?void 0:e.user)!=null&&te.id))return;const ie={...Ac,[O]:L};Sh(ie),await Qn.set(Jn.SECTION_TITLES,ie,e.user.id)},D_=async()=>{var L;if(!((L=e==null?void 0:e.user)!=null&&L.id))return;const O=await Qn.get(Jn.CUSTOM_SECTIONS);O&&Js(O)},Sl=async O=>{var L;(L=e==null?void 0:e.user)!=null&&L.id&&await Qn.set(Jn.CUSTOM_SECTIONS,O,e.user.id)},R_=({name:O,icon:L})=>{const ie={id:`custom-${Date.now()}`,name:O,icon:L},te=[...aa,ie];Js(te),Sl(te);const M=[...za,ie.id];Ah(M),Nh(M)},M_=async O=>{const L=jh[O]||"";if(!(!L.trim()||Eh)){if(!e){alert(" ");return}Th(!0);try{const ie=d.filter(xe=>!xe.parent_id&&xe.section_type==="custom"&&xe.section_id===O),te=ie.length>0?Math.max(...ie.map(xe=>xe.order_index))+1:1,M=we(a),le={text:L.trim(),completed:!1,order_index:te,date:M,visible_dates:[M],hidden_dates:[],user_id:e.user.id,section_id:O,section_type:"custom"},{data:We,error:Se}=await qe.from("todos").insert([le]).select();if(Se)throw Se;We&&We.length>0&&(f(xe=>[...xe,We[0]]),Oh(xe=>({...xe,[O]:""})))}catch(ie){console.error("  :",ie.message)}finally{Th(!1)}}},k_=async O=>{if(!confirm("  ?      ."))return;try{const{error:te}=await qe.from("todos").delete().eq("section_id",O);if(te){console.error("   :",te.message);return}}catch(te){console.error("   :",te.message);return}const L=aa.filter(te=>te.id!==O);Js(L),Sl(L);const ie=za.filter(te=>te!==O);Ah(ie),Nh(ie),f(te=>te.filter(M=>M.section_id!==O))},U_=async(O,L)=>{try{const ie=we(O),te=we(L),{data:M,error:le}=await qe.from("todos").select("*").eq("deleted",!1).eq("completed",!1).is("routine_id",null);if(le)throw le;const We=(M||[]).filter(Se=>Se.stop_carryover_from&&ie>=Se.stop_carryover_from?!1:Se.visible_dates&&Array.isArray(Se.visible_dates)&&Se.visible_dates.length>0?Se.visible_dates.includes(ie):Se.date===ie);if(We.length===0)return;for(const Se of We){let xe=Se.visible_dates||[Se.date];if(xe.includes(te))continue;const et=[...xe,te].sort(),{error:Yt}=await qe.from("todos").update({visible_dates:et}).eq("id",Se.id);Yt&&console.error(` ${Se.id}  :`,Yt.message)}}catch(ie){console.error("   :",ie.message)}};b.useEffect(()=>{let O=null;const L=()=>{document.body.classList.add("is-scrolling"),O&&clearTimeout(O),O=setTimeout(()=>{document.body.classList.remove("is-scrolling")},1e3)};return window.addEventListener("scroll",L),()=>{window.removeEventListener("scroll",L),O&&clearTimeout(O)}},[]),b.useEffect(()=>{e&&(f_(),e_(),Ge(),__(),N_(),D_(),E_())},[e]),b.useEffect(()=>{if(!La.current)return;const O=La.current,L=Xn==="horizontal";let ie=!1,te=0,M=0,le=0;const We=ye=>ye.type.includes("touch")?L?ye.touches[0].pageX:ye.touches[0].pageY:L?ye.pageX:ye.pageY,Se=ye=>{ye.target.closest(".section-block")||(ie=!0,te=We(ye),M=L?O.scrollLeft:O.scrollTop,O.style.transition="none",O.style.transform=L?"translateX(0)":"translateY(0)",le=0)},xe=()=>{ie&&le!==0&&(O.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",O.style.transform=L?"translateX(0)":"translateY(0)",setTimeout(()=>{O.style.transition="none",le=0},300)),ie=!1},et=()=>{le!==0&&(O.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",O.style.transform=L?"translateX(0)":"translateY(0)",setTimeout(()=>{O.style.transition="none",le=0},300)),ie=!1},Yt=ye=>{if(!ie)return;ye.preventDefault();const ce=(We(ye)-te)*1.5,ht=M-ce,st=L?O.scrollWidth-O.clientWidth:O.scrollHeight-O.clientHeight;if(ht<0){const zt=-ht;le=Math.min(zt*.3,100),L?(O.scrollLeft=0,O.style.transform=`translateX(${le}px)`):(O.scrollTop=0,O.style.transform=`translateY(${le}px)`)}else if(ht>st){const zt=ht-st;le=-Math.min(zt*.3,100),L?(O.scrollLeft=st,O.style.transform=`translateX(${le}px)`):(O.scrollTop=st,O.style.transform=`translateY(${le}px)`)}else le=0,O.style.transform=L?"translateX(0)":"translateY(0)",L?O.scrollLeft=ht:O.scrollTop=ht},Ee=ye=>{L&&ye.target.closest(".section-block")&&ye.deltaX!==0&&ye.preventDefault()};return O.addEventListener("mousedown",Se),document.addEventListener("mouseup",et),document.addEventListener("mouseleave",xe),O.addEventListener("mousemove",Yt),O.addEventListener("touchstart",Se,{passive:!0}),O.addEventListener("touchmove",Yt,{passive:!1}),O.addEventListener("touchend",et),O.addEventListener("touchcancel",et),O.addEventListener("wheel",Ee,{passive:!1}),()=>{O.removeEventListener("mousedown",Se),document.removeEventListener("mouseup",et),document.removeEventListener("mouseleave",xe),O.removeEventListener("mousemove",Yt),O.removeEventListener("touchstart",Se),O.removeEventListener("touchmove",Yt),O.removeEventListener("touchend",et),O.removeEventListener("touchcancel",et),O.removeEventListener("wheel",Ee)}},[Xn,d,x]),b.useEffect(()=>{if(Xn!=="horizontal"||!La.current)return;const O=La.current,L=()=>{const ie=O.querySelectorAll(".section-block");if(ie.length===0)return;const te=O.getBoundingClientRect(),M=te.left+te.width/2;let le=0,We=1/0;ie.forEach((Se,xe)=>{const et=Se.getBoundingClientRect(),Yt=et.left+et.width/2,Ee=Math.abs(Yt-M);Ee<We&&(We=Ee,le=xe)}),S_(le)};return O.addEventListener("scroll",L),L(),()=>O.removeEventListener("scroll",L)},[Xn,d,x]),b.useEffect(()=>{if(!Dc.current)return;const O=Dc.current;let L=!1,ie=0,te=0,M=0;const le=et=>{et.target.closest(".section-block")||(L=!0,ie=et.pageY,te=O.scrollTop,O.style.transition="none",O.style.transform="translateY(0)",M=0)},We=()=>{L&&M!==0&&(O.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",O.style.transform="translateY(0)",setTimeout(()=>{O.style.transition="none",M=0},300)),L=!1},Se=()=>{M!==0&&(O.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",O.style.transform="translateY(0)",setTimeout(()=>{O.style.transition="none",M=0},300)),L=!1},xe=et=>{if(!L)return;et.preventDefault();const Ee=(et.pageY-ie)*1.5,ye=te-Ee,Wt=O.scrollHeight-O.clientHeight;if(ye<0){const ce=-ye;M=Math.min(ce*.3,100),O.scrollTop=0,O.style.transform=`translateY(${M}px)`}else if(ye>Wt){const ce=ye-Wt;M=-Math.min(ce*.3,100),O.scrollTop=Wt,O.style.transform=`translateY(${M}px)`}else M=0,O.style.transform="translateY(0)",O.scrollTop=ye};return O.addEventListener("mousedown",le),document.addEventListener("mouseup",Se),document.addEventListener("mouseleave",We),O.addEventListener("mousemove",xe),()=>{O.removeEventListener("mousedown",le),document.removeEventListener("mouseup",Se),document.removeEventListener("mouseleave",We),O.removeEventListener("mousemove",xe)}},[d,x]),b.useEffect(()=>{ph&&Jb()},[bh]),b.useEffect(()=>{const O=async()=>{const ie=new Date,te=new Date(ie);te.setHours(24,0,0,0);const M=te.getTime()-ie.getTime();return setTimeout(async()=>{const We=new Date(ie),Se=new Date(ie);Se.setDate(Se.getDate()+1),await U_(We,Se),await ve(),s(new Date),O()},M)},L=O();return()=>clearTimeout(L)},[]),b.useEffect(()=>{(async()=>{var Se;const te=we(a),le=we(new Date);te===le&&((Se=e==null?void 0:e.user)!=null&&Se.id)&&await ee(te),await Kn()})();const L=we(a),ie=qe.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"todos",filter:`date=eq.${L}`},te=>{te.eventType==="INSERT"?f(M=>M.some(le=>le.id===te.new.id)?M:[...M,te.new]):te.eventType==="UPDATE"?f(M=>o.current.has(te.new.id)?M:M.map(le=>le.id===te.new.id?te.new:le)):te.eventType==="DELETE"&&f(M=>M.filter(le=>le.id!==te.old.id))}).subscribe(te=>{});return()=>{qe.removeChannel(ie)}},[a,e]),b.useEffect(()=>{if(it){const O=window.scrollY,L=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${O}px`,document.body.style.left="0",document.body.style.right="0",L>0&&(document.body.style.paddingRight=`${L}px`),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.paddingRight="",window.scrollTo(0,O)}}},[it]);const Mh=wO({authLoading:t,session:e,handleGoogleLogin:n});return Mh||u.jsxs("div",{className:`app ${it?"dragging-active":""}`,children:[u.jsx(Fj,{showSidebar:r,setShowSidebar:l,session:e,viewMode:Xn,setViewMode:y_,onOpenRoutine:St,onOpenGanttChart:Xb,onOpenEncouragementModal:()=>wh(!0),onOpenAddSection:()=>xh(!0),onOpenHiddenSections:()=>Dh(!0),onLogout:i}),u.jsxs("div",{className:`container ${Xn==="horizontal"?"container-wide":""}`,children:[u.jsx(eO,{showSidebar:r,setShowSidebar:l,selectedDate:a,onDateChange:A_,onPrevDay:j_,onNextDay:O_,showEncouragementEmoji:c_,currentEncouragementMessage:u_,onEncouragementClick:d_,setSelectedDate:s,onQuickAdd:v_,onOpenMemo:()=>_h(!0)}),u.jsxs(yj,{sensors:c,collisionDetection:x1,onDragStart:En,onDragOver:ia,onDragEnd:qb,onDragCancel:Qs,measuring:{droppable:{strategy:Rs.Always}},children:[Xn==="horizontal"&&!sa.includes("timeline")&&u.jsxs("div",{className:"timeline-sidebar",children:[u.jsx(Qd,{title:"",icon:wl("timeline"),sectionId:"timeline",onIconChange:_l,customActions:u.jsx("button",{className:"section-action-button scroll-to-now-button",onClick:()=>{var O;return(O=Ch.current)==null?void 0:O.scrollToNow()},title:" ",children:""})}),u.jsx("div",{className:"timeline-content",children:u.jsx(Pg,{ref:Ch,startHour:0,endHour:24,scheduledTodos:d.filter(O=>O.scheduled_time&&!O.parent_id&&O.scheduled_date===we(a)),onToggle:xt,onRemoveFromTimeline:gh,onMoveUpInTimeline:vh,onMoveDownInTimeline:yh})})]}),u.jsxs("div",{className:"content-scrollable",ref:Dc,children:[u.jsx("div",{ref:La,className:`sections-container ${Xn==="horizontal"?"horizontal-layout":"vertical-layout"}`,children:u.jsx("div",{className:"todo-list",children:_e?u.jsx("div",{className:"loading-container",children:u.jsxs("div",{className:"loading-dots",children:[u.jsx("span",{}),u.jsx("span",{}),u.jsx("span",{})]})}):(()=>{const O=d.filter(M=>!M.parent_id&&M.section_type==="routine").sort((M,le)=>M.order_index-le.order_index),L=d.filter(M=>!M.parent_id&&M.section_type==="pending_routine").sort((M,le)=>M.order_index-le.order_index),ie=d.filter(M=>!M.parent_id&&M.section_type==="normal").sort((M,le)=>M.order_index-le.order_index),te=[...O.map(M=>M.id),...L.map(M=>M.id),...ie.map(M=>M.id),...aa.flatMap(M=>d.filter(le=>!le.parent_id&&le.section_type==="custom"&&le.section_id===M.id).map(le=>le.id))];return u.jsx(ar,{items:te,strategy:ir,children:za.filter(M=>!sa.includes(M)).filter(M=>!(Xn==="horizontal"&&M==="timeline")).map((M,le)=>{const We=za.filter(Ee=>!sa.includes(Ee)),Se=We.indexOf(M),xe=Se===0,et=Se===We.length-1,Yt=[...xe?[]:[{icon:"",label:" ",onClick:()=>Nc(M)}],...et?[]:[{icon:"",label:" ",onClick:()=>Cc(M)}],{icon:"",label:"",onClick:()=>Mc(M)}];if(M==="timeline")return u.jsxs("div",{className:"timeline-section section-block",children:[u.jsx(Qd,{title:"",icon:wl("timeline"),sectionId:"timeline",onIconChange:_l,settingsMenuItems:Yt}),u.jsx("div",{className:"timeline-content",children:u.jsx(Pg,{startHour:0,endHour:24,scheduledTodos:d.filter(Ee=>Ee.scheduled_time&&!Ee.parent_id&&Ee.scheduled_date===we(a)),onToggle:xt,onRemoveFromTimeline:gh,onMoveUpInTimeline:vh,onMoveDownInTimeline:yh})})]},"timeline");if(M==="routine")return u.jsx("div",{children:u.jsxs(Ru,{title:"",icon:wl("routine"),sectionId:"routine",onIconChange:_l,className:"routine-section section-block",inputValue:X,setInputValue:re,onAddTodo:ft,isAdding:Gt,placeholder:"   ...",settingsMenuItems:Yt,children:[O.length>0&&u.jsx(ar,{items:O.map(Ee=>Ee.id),strategy:ir,children:O.map((Ee,ye)=>{const Wt=d.filter(ce=>ce.parent_id===Ee.id);return u.jsx(Za,{todo:Ee,index:ye,onToggle:xt,onDelete:Vt,onEdit:xn,formatDate:Ga,formatDateOnly:ma,isFocused:at===Ee.id,onFocus:pl,onAddSubTodo:Sn,subtodos:Wt,level:0,onCreateRoutine:z,routines:x,onShowRoutineHistory:Fe,onOpenRoutineSetupModal:K,onOpenHistoryModal:y,currentPageDate:we(a),onRemoveFromUI:hl,showSuccessMessage:bl,activeId:ct,overId:Ut,onMoveUp:ce=>ml(ce,"routine",null),onMoveDown:ce=>gl(ce,"routine",null),onMoveToTop:ce=>vl(ce,"routine",null),onMoveToBottom:ce=>yl(ce,"routine",null),isFirst:ye===0,isLast:ye===O.length-1},Ee.id)})}),O.length>0&&L.length>0&&u.jsx("div",{style:{margin:"1rem 0",padding:"0 1rem"},children:u.jsx("div",{className:"separator-line"})}),L.length>0&&u.jsx(ar,{items:L.map(Ee=>Ee.id),strategy:ir,children:L.map((Ee,ye)=>{const Wt=d.filter(ce=>ce.parent_id===Ee.id);return u.jsx(Za,{todo:Ee,index:ye,onToggle:xt,onDelete:Vt,onEdit:xn,formatDate:Ga,formatDateOnly:ma,isFocused:at===Ee.id,onFocus:pl,onAddSubTodo:Sn,subtodos:Wt,level:0,onCreateRoutine:z,routines:x,onShowRoutineHistory:Fe,onOpenRoutineSetupModal:K,onOpenHistoryModal:y,currentPageDate:we(a),isPendingRoutine:!0,onRemoveFromUI:hl,showSuccessMessage:bl,activeId:ct,overId:Ut,onMoveUp:ce=>ml(ce,"pending_routine",null),onMoveDown:ce=>gl(ce,"pending_routine",null),onMoveToTop:ce=>vl(ce,"pending_routine",null),onMoveToBottom:ce=>yl(ce,"pending_routine",null),isFirst:ye===0,isLast:ye===L.length-1},Ee.id)})})]})},"routine");if(M==="normal"){const Ee=[...xe?[]:[{icon:"",label:" ",onClick:()=>Nc(M)}],...et?[]:[{icon:"",label:" ",onClick:()=>Cc(M)}],{icon:"",label:"",onClick:()=>{confirm(`    ?

      .`)&&Mc("normal")}},{icon:"",label:"",onClick:()=>{alert(`      .

   ""  .`)}}];return u.jsx("div",{children:u.jsx(Ru,{title:Ac.normal,icon:wl("normal"),sectionId:"normal",onIconChange:_l,className:"normal-section section-block",inputValue:H,setInputValue:oe,onAddTodo:wn,isAdding:Gt,placeholder:"   ...",editable:!0,onTitleChange:ye=>C_("normal",ye),settingsMenuItems:Ee,children:ie.length>0&&u.jsx(ar,{items:ie.map(ye=>ye.id),strategy:ir,children:ie.map((ye,Wt)=>{const ce=d.filter(st=>st.parent_id===ye.id),ht=we(a);return u.jsx(Za,{todo:ye,index:Wt,onToggle:xt,onDelete:Vt,onEdit:xn,formatDate:Ga,formatDateOnly:ma,isFocused:at===ye.id,onFocus:pl,onAddSubTodo:Sn,subtodos:ce,level:0,onCreateRoutine:z,routines:x,onShowRoutineHistory:Fe,onOpenRoutineSetupModal:K,onOpenHistoryModal:y,currentPageDate:ht,onRemoveFromUI:hl,showSuccessMessage:bl,activeId:ct,overId:Ut,onMoveUp:st=>ml(st,"normal",null),onMoveDown:st=>gl(st,"normal",null),onMoveToTop:st=>vl(st,"normal",null),onMoveToBottom:st=>yl(st,"normal",null),isFirst:Wt===0,isLast:Wt===ie.length-1},ye.id)})})})},"normal")}else{const Ee=aa.find(ce=>ce.id===M);if(!Ee)return null;const ye=d.filter(ce=>!ce.parent_id&&ce.section_type==="custom"&&ce.section_id===M).sort((ce,ht)=>ce.order_index-ht.order_index),Wt=[...xe?[]:[{icon:"",label:" ",onClick:()=>Nc(M)}],...et?[]:[{icon:"",label:" ",onClick:()=>Cc(M)}],{icon:"",label:"",onClick:()=>Mc(M)},{icon:"",label:"",onClick:()=>k_(M)}];return u.jsx("div",{children:u.jsx(Ru,{title:Ee.name,icon:Ee.icon,sectionId:M,onIconChange:(ce,ht)=>{const st=aa.map(zt=>zt.id===ce?{...zt,icon:ht}:zt);Js(st),Sl(st)},className:"custom-section section-block",inputValue:jh[M]||"",setInputValue:ce=>Oh(ht=>({...ht,[M]:ce})),onAddTodo:()=>M_(M),isAdding:Eh,placeholder:`${Ee.name}   ...`,editable:!0,onTitleChange:ce=>{const ht=aa.map(st=>st.id===M?{...st,name:ce}:st);Js(ht),Sl(ht)},settingsMenuItems:Wt,children:ye.length>0&&u.jsx(ar,{items:ye.map(ce=>ce.id),strategy:ir,children:ye.map((ce,ht)=>{const st=d.filter(zt=>zt.parent_id===ce.id);return u.jsx(Za,{todo:ce,index:ht,onToggle:xt,onDelete:Vt,onEdit:xn,formatDate:Ga,formatDateOnly:ma,isFocused:at===ce.id,onFocus:pl,onAddSubTodo:Sn,subtodos:st,level:0,onCreateRoutine:z,routines:x,onShowRoutineHistory:Fe,onOpenRoutineSetupModal:K,onOpenHistoryModal:y,currentPageDate:we(a),onRemoveFromUI:hl,showSuccessMessage:bl,activeId:ct,overId:Ut,onMoveUp:zt=>ml(zt,"custom",M),onMoveDown:zt=>gl(zt,"custom",M),onMoveToTop:zt=>vl(zt,"custom",M),onMoveToBottom:zt=>yl(zt,"custom",M),isFirst:ht===0,isLast:ht===ye.length-1},ce.id)})})})},M)}})})})()})}),u.jsx(Uj,{zIndex:1e4,children:ct?(()=>{const O=d.find(ie=>ie.id===ct);if(!O)return null;const L=d.filter(ie=>ie.parent_id===O.id);return u.jsx("div",{className:"drag-overlay-todo",children:u.jsx(Za,{todo:O,index:0,onToggle:()=>{},onDelete:()=>{},onEdit:()=>{},formatDate:Ga,formatDateOnly:ma,isFocused:!1,onFocus:()=>{},onAddSubTodo:()=>{},subtodos:L,level:0,onCreateRoutine:()=>{},routines:x,onShowRoutineHistory:()=>{},onOpenRoutineSetupModal:()=>{},onOpenHistoryModal:()=>{},currentPageDate:we(a),onRemoveFromUI:()=>{},showSuccessMessage:()=>{},hideNumber:!0})})})():null}),u.jsx(tO,{viewMode:Xn,currentSectionIndex:w_,sectionsContainerRef:La,visibleSectionCount:za.filter(O=>!sa.includes(O)).length})]})]}),u.jsx(_O,{showUndoToast:Ft,showSuccessToast:Gn,successToastMessage:Ua,lastDeleteAction:xi,handleUndoDelete:mh,handleUndoRoutineDelete:Yb,showDeleteConfirmModal:kt,todoToDelete:It,setShowDeleteConfirmModal:_n,deleteThisOnly:$b,deleteFromNow:Ib,deleteAll:Vb,showRoutineDeleteModal:Q,routineToDelete:Oe,setShowRoutineDeleteModal:nt,deleteRoutineThisOnly:Ae,deleteRoutineFromNow:Ue,deleteRoutineAll:ot,showTodoHistoryModal:p,selectedTodoForModal:h,todoHistory:_,expandedHistoryIds:w,toggleHistoryDetail:v,handleCloseTodoHistoryModal:g,formatDate:Ga,formatDateOnly:ma,showTodoRoutineSetupModal:Ne,routines:x,routineDaysForModal:At,isEditingRoutineInModal:$,routineTimeSlotForModal:I,handleToggleRoutineDayInModal:U,setRoutineTimeSlotForModal:V,setRoutineDaysForModal:R,setIsEditingRoutineInModal:N,handleCreateRoutineFromTodo:z,handleCloseTodoRoutineSetupModal:Y,showRoutineModal:S,handleCloseRoutine:F,routineInput:E,setRoutineInput:j,isAddingRoutine:me,selectedDays:A,handleToggleDay:se,selectedTimeSlot:k,setSelectedTimeSlot:Z,handleAddRoutine:Be,editingRoutineId:ae,editingRoutineText:fe,setEditingRoutineText:q,editingRoutineDays:he,handleToggleEditDay:ke,handleStartEditRoutine:P,handleSaveEditRoutine:ge,handleCancelEditRoutine:De,handleDeleteRoutine:W,fetchRoutineHistory:Fe,showRoutineHistory:D,handleCloseRoutineHistory:wt,selectedRoutineForHistory:B,routineHistoryData:G,showMemoModal:Pb,setShowMemoModal:_h,memoContent:Zb,setMemoContent:Fb,isSavingMemo:Wb,showGanttChart:ph,handleCloseGanttChart:Qb,ganttData:Gb,ganttPeriod:bh,setGanttPeriod:Kb,showEncouragementModal:n_,setShowEncouragementModal:wh,encouragementMessages:t_,newEncouragementMessage:i_,setNewEncouragementMessage:a_,addEncouragementMessage:h_,editingEncouragementId:s_,editingEncouragementText:l_,setEditingEncouragementId:r_,setEditingEncouragementText:o_,updateEncouragementMessage:m_,deleteEncouragementMessage:g_,showAddSectionModal:p_,setShowAddSectionModal:xh,handleAddSection:R_,showHiddenSectionsModal:x_,setShowHiddenSectionsModal:Dh,hiddenSections:sa,sectionOrder:za,sectionTitles:Ac,customSections:aa,handleShowSection:T_})]})]})}Rx.createRoot(document.getElementById("root")).render(u.jsx(b.StrictMode,{children:u.jsx(kO,{})}));

function $_(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(i,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();function iv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function av(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),n}var sv={exports:{}},ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I_=Symbol.for("react.transitional.element"),V_=Symbol.for("react.fragment");function rv(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var a in t)a!=="key"&&(n[a]=t[a])}else n=t;return t=n.ref,{$$typeof:I_,type:e,key:i,ref:t!==void 0?t:null,props:n}}ec.Fragment=V_;ec.jsx=rv;ec.jsxs=rv;sv.exports=ec;var c=sv.exports,lv={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd=Symbol.for("react.transitional.element"),Y_=Symbol.for("react.portal"),G_=Symbol.for("react.fragment"),K_=Symbol.for("react.strict_mode"),X_=Symbol.for("react.profiler"),Q_=Symbol.for("react.consumer"),J_=Symbol.for("react.context"),P_=Symbol.for("react.forward_ref"),Z_=Symbol.for("react.suspense"),F_=Symbol.for("react.memo"),ov=Symbol.for("react.lazy"),W_=Symbol.for("react.activity"),Lh=Symbol.iterator;function ew(e){return e===null||typeof e!="object"?null:(e=Lh&&e[Lh]||e["@@iterator"],typeof e=="function"?e:null)}var cv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uv=Object.assign,dv={};function Ms(e,t,n){this.props=e,this.context=t,this.refs=dv,this.updater=n||cv}Ms.prototype.isReactComponent={};Ms.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ms.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fv(){}fv.prototype=Ms.prototype;function Pd(e,t,n){this.props=e,this.context=t,this.refs=dv,this.updater=n||cv}var Zd=Pd.prototype=new fv;Zd.constructor=Pd;uv(Zd,Ms.prototype);Zd.isPureReactComponent=!0;var Bh=Array.isArray;function ku(){}var We={H:null,A:null,T:null,S:null},hv=Object.prototype.hasOwnProperty;function Fd(e,t,n){var i=n.ref;return{$$typeof:Jd,type:e,key:t,ref:i!==void 0?i:null,props:n}}function tw(e,t){return Fd(e.type,t,e.props)}function Wd(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jd}function nw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hh=/\/+/g;function kc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nw(""+e.key):t.toString(36)}function iw(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(ku,ku):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Ka(e,t,n,i,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(s){case"bigint":case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case Jd:case Y_:r=!0;break;case ov:return r=e._init,Ka(r(e._payload),t,n,i,a)}}if(r)return a=a(e),r=i===""?"."+kc(e,0):i,Bh(a)?(n="",r!=null&&(n=r.replace(Hh,"$&/")+"/"),Ka(a,t,n,"",function(u){return u})):a!=null&&(Wd(a)&&(a=tw(a,n+(a.key==null||e&&e.key===a.key?"":(""+a.key).replace(Hh,"$&/")+"/")+r)),t.push(a)),1;r=0;var l=i===""?".":i+":";if(Bh(e))for(var o=0;o<e.length;o++)i=e[o],s=l+kc(i,o),r+=Ka(i,t,n,s,a);else if(o=ew(e),typeof o=="function")for(e=o.call(e),o=0;!(i=e.next()).done;)i=i.value,s=l+kc(i,o++),r+=Ka(i,t,n,s,a);else if(s==="object"){if(typeof e.then=="function")return Ka(iw(e),t,n,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function xl(e,t,n){if(e==null)return e;var i=[],a=0;return Ka(e,i,"","",function(s){return t.call(n,s,a++)}),i}function aw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var qh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},sw={map:xl,forEach:function(e,t,n){xl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xl(e,function(){t++}),t},toArray:function(e){return xl(e,function(t){return t})||[]},only:function(e){if(!Wd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pe.Activity=W_;pe.Children=sw;pe.Component=Ms;pe.Fragment=G_;pe.Profiler=X_;pe.PureComponent=Pd;pe.StrictMode=K_;pe.Suspense=Z_;pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=We;pe.__COMPILER_RUNTIME={__proto__:null,c:function(e){return We.H.useMemoCache(e)}};pe.cache=function(e){return function(){return e.apply(null,arguments)}};pe.cacheSignal=function(){return null};pe.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=uv({},e.props),a=e.key;if(t!=null)for(s in t.key!==void 0&&(a=""+t.key),t)!hv.call(t,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&t.ref===void 0||(i[s]=t[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var r=Array(s),l=0;l<s;l++)r[l]=arguments[l+2];i.children=r}return Fd(e.type,a,i)};pe.createContext=function(e){return e={$$typeof:J_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:Q_,_context:e},e};pe.createElement=function(e,t,n){var i,a={},s=null;if(t!=null)for(i in t.key!==void 0&&(s=""+t.key),t)hv.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(a[i]=t[i]);var r=arguments.length-2;if(r===1)a.children=n;else if(1<r){for(var l=Array(r),o=0;o<r;o++)l[o]=arguments[o+2];a.children=l}if(e&&e.defaultProps)for(i in r=e.defaultProps,r)a[i]===void 0&&(a[i]=r[i]);return Fd(e,s,a)};pe.createRef=function(){return{current:null}};pe.forwardRef=function(e){return{$$typeof:P_,render:e}};pe.isValidElement=Wd;pe.lazy=function(e){return{$$typeof:ov,_payload:{_status:-1,_result:e},_init:aw}};pe.memo=function(e,t){return{$$typeof:F_,type:e,compare:t===void 0?null:t}};pe.startTransition=function(e){var t=We.T,n={};We.T=n;try{var i=e(),a=We.S;a!==null&&a(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(ku,qh)}catch(s){qh(s)}finally{t!==null&&n.types!==null&&(t.types=n.types),We.T=t}};pe.unstable_useCacheRefresh=function(){return We.H.useCacheRefresh()};pe.use=function(e){return We.H.use(e)};pe.useActionState=function(e,t,n){return We.H.useActionState(e,t,n)};pe.useCallback=function(e,t){return We.H.useCallback(e,t)};pe.useContext=function(e){return We.H.useContext(e)};pe.useDebugValue=function(){};pe.useDeferredValue=function(e,t){return We.H.useDeferredValue(e,t)};pe.useEffect=function(e,t){return We.H.useEffect(e,t)};pe.useEffectEvent=function(e){return We.H.useEffectEvent(e)};pe.useId=function(){return We.H.useId()};pe.useImperativeHandle=function(e,t,n){return We.H.useImperativeHandle(e,t,n)};pe.useInsertionEffect=function(e,t){return We.H.useInsertionEffect(e,t)};pe.useLayoutEffect=function(e,t){return We.H.useLayoutEffect(e,t)};pe.useMemo=function(e,t){return We.H.useMemo(e,t)};pe.useOptimistic=function(e,t){return We.H.useOptimistic(e,t)};pe.useReducer=function(e,t,n){return We.H.useReducer(e,t,n)};pe.useRef=function(e){return We.H.useRef(e)};pe.useState=function(e){return We.H.useState(e)};pe.useSyncExternalStore=function(e,t,n){return We.H.useSyncExternalStore(e,t,n)};pe.useTransition=function(){return We.H.useTransition()};pe.version="19.2.0";lv.exports=pe;var _=lv.exports;const at=iv(_);var mv={exports:{}},tc={},gv={exports:{}},vv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,$){var K=N.length;N.push($);e:for(;0<K;){var me=K-1>>>1,J=N[me];if(0<a(J,$))N[me]=$,N[K]=J,K=me;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var $=N[0],K=N.pop();if(K!==$){N[0]=K;e:for(var me=0,J=N.length,st=J>>>1;me<st;){var De=2*(me+1)-1,Xe=N[De],Le=De+1,Pe=N[Le];if(0>a(Xe,K))Le<J&&0>a(Pe,Xe)?(N[me]=Pe,N[Le]=K,me=Le):(N[me]=Xe,N[De]=K,me=De);else if(Le<J&&0>a(Pe,K))N[me]=Pe,N[Le]=K,me=Le;else break e}}return $}function a(N,$){var K=N.sortIndex-$.sortIndex;return K!==0?K:N.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var r=Date,l=r.now();e.unstable_now=function(){return r.now()-l}}var o=[],u=[],d=1,f=null,h=3,m=!1,v=!1,b=!1,w=!1,p=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function S(N){for(var $=n(u);$!==null;){if($.callback===null)i(u);else if($.startTime<=N)i(u),$.sortIndex=$.expirationTime,t(o,$);else break;$=n(u)}}function T(N){if(b=!1,S(N),!v)if(n(o)!==null)v=!0,E||(E=!0,G());else{var $=n(u);$!==null&&z(T,$.startTime-N)}}var E=!1,x=-1,j=5,A=-1;function M(){return w?!0:!(e.unstable_now()-A<j)}function P(){if(w=!1,E){var N=e.unstable_now();A=N;var $=!0;try{e:{v=!1,b&&(b=!1,g(x),x=-1),m=!0;var K=h;try{t:{for(S(N),f=n(o);f!==null&&!(f.expirationTime>N&&M());){var me=f.callback;if(typeof me=="function"){f.callback=null,h=f.priorityLevel;var J=me(f.expirationTime<=N);if(N=e.unstable_now(),typeof J=="function"){f.callback=J,S(N),$=!0;break t}f===n(o)&&i(o),S(N)}else i(o);f=n(o)}if(f!==null)$=!0;else{var st=n(u);st!==null&&z(T,st.startTime-N),$=!1}}break e}finally{f=null,h=K,m=!1}$=void 0}}finally{$?G():E=!1}}}var G;if(typeof y=="function")G=function(){y(P)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,re=Q.port2;Q.port1.onmessage=P,G=function(){re.postMessage(null)}}else G=function(){p(P,0)};function z(N,$){x=p(function(){N(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(N){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var K=h;h=$;try{return N()}finally{h=K}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(N,$){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var K=h;h=N;try{return $()}finally{h=K}},e.unstable_scheduleCallback=function(N,$,K){var me=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?me+K:me):K=me,N){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=K+J,N={id:d++,callback:$,priorityLevel:N,startTime:K,expirationTime:J,sortIndex:-1},K>me?(N.sortIndex=K,t(u,N),n(o)===null&&N===n(u)&&(b?(g(x),x=-1):b=!0,z(T,K-me))):(N.sortIndex=J,t(o,N),v||m||(v=!0,E||(E=!0,G()))),N},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(N){var $=h;return function(){var K=h;h=$;try{return N.apply(this,arguments)}finally{h=K}}}})(vv);gv.exports=vv;var rw=gv.exports,yv={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lw=_;function pv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ei(){}var Pt={d:{f:Ei,r:function(){throw Error(pv(522))},D:Ei,C:Ei,L:Ei,m:Ei,X:Ei,S:Ei,M:Ei},p:0,findDOMNode:null},ow=Symbol.for("react.portal");function cw(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ow,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var dr=lw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function nc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Pt;Zt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(pv(299));return cw(e,t,null,n)};Zt.flushSync=function(e){var t=dr.T,n=Pt.p;try{if(dr.T=null,Pt.p=2,e)return e()}finally{dr.T=t,Pt.p=n,Pt.d.f()}};Zt.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Pt.d.C(e,t))};Zt.prefetchDNS=function(e){typeof e=="string"&&Pt.d.D(e)};Zt.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=nc(n,t.crossOrigin),a=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?Pt.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:a,fetchPriority:s}):n==="script"&&Pt.d.X(e,{crossOrigin:i,integrity:a,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Zt.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=nc(t.as,t.crossOrigin);Pt.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Pt.d.M(e)};Zt.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=nc(n,t.crossOrigin);Pt.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Zt.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=nc(t.as,t.crossOrigin);Pt.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Pt.d.m(e)};Zt.requestFormReset=function(e){Pt.d.r(e)};Zt.unstable_batchedUpdates=function(e,t){return e(t)};Zt.useFormState=function(e,t,n){return dr.H.useFormState(e,t,n)};Zt.useFormStatus=function(){return dr.H.useHostTransitionStatus()};Zt.version="19.2.0";function bv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bv)}catch(e){console.error(e)}}bv(),yv.exports=Zt;var ya=yv.exports;const Uu=iv(ya);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct=rw,_v=_,uw=ya;function D(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function wv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Sv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xv(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $h(e){if(Pr(e)!==e)throw Error(D(188))}function dw(e){var t=e.alternate;if(!t){if(t=Pr(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return $h(a),e;if(s===i)return $h(a),t;s=s.sibling}throw Error(D(188))}if(n.return!==i.return)n=a,i=s;else{for(var r=!1,l=a.child;l;){if(l===n){r=!0,n=a,i=s;break}if(l===i){r=!0,i=a,n=s;break}l=l.sibling}if(!r){for(l=s.child;l;){if(l===n){r=!0,n=s,i=a;break}if(l===i){r=!0,i=s,n=a;break}l=l.sibling}if(!r)throw Error(D(189))}}if(n.alternate!==i)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Tv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=Tv(e),t!==null)return t;e=e.sibling}return null}var et=Object.assign,fw=Symbol.for("react.element"),Tl=Symbol.for("react.transitional.element"),sr=Symbol.for("react.portal"),Fa=Symbol.for("react.fragment"),Ev=Symbol.for("react.strict_mode"),zu=Symbol.for("react.profiler"),jv=Symbol.for("react.consumer"),fi=Symbol.for("react.context"),ef=Symbol.for("react.forward_ref"),Lu=Symbol.for("react.suspense"),Bu=Symbol.for("react.suspense_list"),tf=Symbol.for("react.memo"),Oi=Symbol.for("react.lazy"),Hu=Symbol.for("react.activity"),hw=Symbol.for("react.memo_cache_sentinel"),Ih=Symbol.iterator;function Ps(e){return e===null||typeof e!="object"?null:(e=Ih&&e[Ih]||e["@@iterator"],typeof e=="function"?e:null)}var mw=Symbol.for("react.client.reference");function qu(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===mw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fa:return"Fragment";case zu:return"Profiler";case Ev:return"StrictMode";case Lu:return"Suspense";case Bu:return"SuspenseList";case Hu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case sr:return"Portal";case fi:return e.displayName||"Context";case jv:return(e._context.displayName||"Context")+".Consumer";case ef:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tf:return t=e.displayName||null,t!==null?t:qu(e.type)||"Memo";case Oi:t=e._payload,e=e._init;try{return qu(e(t))}catch{}}return null}var rr=Array.isArray,he=_v.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,He=uw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ba={pending:!1,data:null,method:null,action:null},$u=[],Wa=-1;function ti(e){return{current:e}}function kt(e){0>Wa||(e.current=$u[Wa],$u[Wa]=null,Wa--)}function Je(e,t){Wa++,$u[Wa]=e.current,e.current=t}var ei=ti(null),Nr=ti(null),$i=ti(null),ho=ti(null);function mo(e,t){switch(Je($i,t),Je(Nr,e),Je(ei,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Qm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Qm(t),e=Kp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}kt(ei),Je(ei,e)}function bs(){kt(ei),kt(Nr),kt($i)}function Iu(e){e.memoizedState!==null&&Je(ho,e);var t=ei.current,n=Kp(t,e.type);t!==n&&(Je(Nr,e),Je(ei,n))}function go(e){Nr.current===e&&(kt(ei),kt(Nr)),ho.current===e&&(kt(ho),Ir._currentValue=ba)}var Uc,Vh;function ca(e){if(Uc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Uc=t&&t[1]||"",Vh=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Uc+e+Vh}var zc=!1;function Lc(e,t){if(!e||zc)return"";zc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(m){var h=m}Reflect.construct(e,[],f)}else{try{f.call()}catch(m){h=m}e.call(f.prototype)}}else{try{throw Error()}catch(m){h=m}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(m){if(m&&h&&typeof m.stack=="string")return[m.stack,h.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),r=s[0],l=s[1];if(r&&l){var o=r.split(`
`),u=l.split(`
`);for(a=i=0;i<o.length&&!o[i].includes("DetermineComponentFrameRoot");)i++;for(;a<u.length&&!u[a].includes("DetermineComponentFrameRoot");)a++;if(i===o.length||a===u.length)for(i=o.length-1,a=u.length-1;1<=i&&0<=a&&o[i]!==u[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==u[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==u[a]){var d=`
`+o[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=i&&0<=a);break}}}finally{zc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ca(n):""}function gw(e,t){switch(e.tag){case 26:case 27:case 5:return ca(e.type);case 16:return ca("Lazy");case 13:return e.child!==t&&t!==null?ca("Suspense Fallback"):ca("Suspense");case 19:return ca("SuspenseList");case 0:case 15:return Lc(e.type,!1);case 11:return Lc(e.type.render,!1);case 1:return Lc(e.type,!0);case 31:return ca("Activity");default:return""}}function Yh(e){try{var t="",n=null;do t+=gw(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Vu=Object.prototype.hasOwnProperty,nf=Ct.unstable_scheduleCallback,Bc=Ct.unstable_cancelCallback,vw=Ct.unstable_shouldYield,yw=Ct.unstable_requestPaint,yn=Ct.unstable_now,pw=Ct.unstable_getCurrentPriorityLevel,Ov=Ct.unstable_ImmediatePriority,Av=Ct.unstable_UserBlockingPriority,vo=Ct.unstable_NormalPriority,bw=Ct.unstable_LowPriority,Cv=Ct.unstable_IdlePriority,_w=Ct.log,ww=Ct.unstable_setDisableYieldValue,Zr=null,pn=null;function Ui(e){if(typeof _w=="function"&&ww(e),pn&&typeof pn.setStrictMode=="function")try{pn.setStrictMode(Zr,e)}catch{}}var bn=Math.clz32?Math.clz32:Tw,Sw=Math.log,xw=Math.LN2;function Tw(e){return e>>>=0,e===0?32:31-(Sw(e)/xw|0)|0}var El=256,jl=262144,Ol=4194304;function ua(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ic(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var a=0,s=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~s,i!==0?a=ua(i):(r&=l,r!==0?a=ua(r):n||(n=l&~e,n!==0&&(a=ua(n))))):(l=i&~s,l!==0?a=ua(l):r!==0?a=ua(r):n||(n=i&~e,n!==0&&(a=ua(n)))),a===0?0:t!==0&&t!==a&&!(t&s)&&(s=a&-a,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:a}function Fr(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ew(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dv(){var e=Ol;return Ol<<=1,!(Ol&62914560)&&(Ol=4194304),e}function Hc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Wr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function jw(e,t,n,i,a,s){var r=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,u=e.hiddenUpdates;for(n=r&~n;0<n;){var d=31-bn(n),f=1<<d;l[d]=0,o[d]=-1;var h=u[d];if(h!==null)for(u[d]=null,d=0;d<h.length;d++){var m=h[d];m!==null&&(m.lane&=-536870913)}n&=~f}i!==0&&Nv(e,i,0),s!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=s&~(r&~t))}function Nv(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-bn(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function Rv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-bn(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}function Mv(e,t){var n=t&-t;return n=n&42?1:af(n),n&(e.suspendedLanes|t)?0:n}function af(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function sf(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function kv(){var e=He.p;return e!==0?e:(e=window.event,e===void 0?32:i0(e.type))}function Gh(e,t){var n=He.p;try{return He.p=e,t()}finally{He.p=n}}var ta=Math.random().toString(36).slice(2),Ht="__reactFiber$"+ta,ln="__reactProps$"+ta,ks="__reactContainer$"+ta,Yu="__reactEvents$"+ta,Ow="__reactListeners$"+ta,Aw="__reactHandles$"+ta,Kh="__reactResources$"+ta,el="__reactMarker$"+ta;function rf(e){delete e[Ht],delete e[ln],delete e[Yu],delete e[Ow],delete e[Aw]}function es(e){var t=e[Ht];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ks]||n[Ht]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Wm(e);e!==null;){if(n=e[Ht])return n;e=Wm(e)}return t}e=n,n=e.parentNode}return null}function Us(e){if(e=e[Ht]||e[ks]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function lr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(D(33))}function us(e){var t=e[Kh];return t||(t=e[Kh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Mt(e){e[el]=!0}var Uv=new Set,zv={};function Ca(e,t){_s(e,t),_s(e+"Capture",t)}function _s(e,t){for(zv[e]=t,e=0;e<t.length;e++)Uv.add(t[e])}var Cw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xh={},Qh={};function Dw(e){return Vu.call(Qh,e)?!0:Vu.call(Xh,e)?!1:Cw.test(e)?Qh[e]=!0:(Xh[e]=!0,!1)}function Pl(e,t,n){if(Dw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Al(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ii(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function Cn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nw(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(r){n=""+r,s.call(this,r)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gu(e){if(!e._valueTracker){var t=Lv(e)?"checked":"value";e._valueTracker=Nw(e,t,""+e[t])}}function Bv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=Lv(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function yo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Rw=/[\n"\\]/g;function Rn(e){return e.replace(Rw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ku(e,t,n,i,a,s,r,l){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Cn(t)):e.value!==""+Cn(t)&&(e.value=""+Cn(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?Xu(e,r,Cn(t)):n!=null?Xu(e,r,Cn(n)):i!=null&&e.removeAttribute("value"),a==null&&s!=null&&(e.defaultChecked=!!s),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Cn(l):e.removeAttribute("name")}function Hv(e,t,n,i,a,s,r,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){Gu(e);return}n=n!=null?""+Cn(n):"",t=t!=null?""+Cn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??a,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),Gu(e)}function Xu(e,t,n){t==="number"&&yo(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ds(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Cn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function qv(e,t,n){if(t!=null&&(t=""+Cn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Cn(n):""}function $v(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(D(92));if(rr(i)){if(1<i.length)throw Error(D(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Cn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),Gu(e)}function ws(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Mw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jh(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Mw.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Iv(e,t,n){if(t!=null&&typeof t!="object")throw Error(D(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var a in t)i=t[a],t.hasOwnProperty(a)&&n[a]!==i&&Jh(e,a,i)}else for(var s in t)t.hasOwnProperty(s)&&Jh(e,s,t[s])}function lf(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zl(e){return Uw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function hi(){}var Qu=null;function of(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ts=null,fs=null;function Ph(e){var t=Us(e);if(t&&(e=t.stateNode)){var n=e[ln]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ku(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Rn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=i[ln]||null;if(!a)throw Error(D(90));Ku(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&Bv(i)}break e;case"textarea":qv(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ds(e,!!n.multiple,t,!1)}}}var qc=!1;function Vv(e,t,n){if(qc)return e(t,n);qc=!0;try{var i=e(t);return i}finally{if(qc=!1,(ts!==null||fs!==null)&&(gc(),ts&&(t=ts,e=fs,fs=ts=null,Ph(t),e)))for(t=0;t<e.length;t++)Ph(e[t])}}function Rr(e,t){var n=e.stateNode;if(n===null)return null;var i=n[ln]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ju=!1;if(pi)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){Ju=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{Ju=!1}var zi=null,cf=null,Fl=null;function Yv(){if(Fl)return Fl;var e,t=cf,n=t.length,i,a="value"in zi?zi.value:zi.textContent,s=a.length;for(e=0;e<n&&t[e]===a[e];e++);var r=n-e;for(i=1;i<=r&&t[n-i]===a[s-i];i++);return Fl=a.slice(e,1<i?1-i:void 0)}function Wl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cl(){return!0}function Zh(){return!1}function on(e){function t(n,i,a,s,r){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Cl:Zh,this.isPropagationStopped=Zh,this}return et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),t}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ac=on(Da),tl=et({},Da,{view:0,detail:0}),zw=on(tl),$c,Ic,Fs,sc=et({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fs&&(Fs&&e.type==="mousemove"?($c=e.screenX-Fs.screenX,Ic=e.screenY-Fs.screenY):Ic=$c=0,Fs=e),$c)},movementY:function(e){return"movementY"in e?e.movementY:Ic}}),Fh=on(sc),Lw=et({},sc,{dataTransfer:0}),Bw=on(Lw),Hw=et({},tl,{relatedTarget:0}),Vc=on(Hw),qw=et({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),$w=on(qw),Iw=et({},Da,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vw=on(Iw),Yw=et({},Da,{data:0}),Wh=on(Yw),Gw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xw[e])?!!t[e]:!1}function uf(){return Qw}var Jw=et({},tl,{key:function(e){if(e.key){var t=Gw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Kw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uf,charCode:function(e){return e.type==="keypress"?Wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Pw=on(Jw),Zw=et({},sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),em=on(Zw),Fw=et({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uf}),Ww=on(Fw),eS=et({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),tS=on(eS),nS=et({},sc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iS=on(nS),aS=et({},Da,{newState:0,oldState:0}),sS=on(aS),rS=[9,13,27,32],df=pi&&"CompositionEvent"in window,fr=null;pi&&"documentMode"in document&&(fr=document.documentMode);var lS=pi&&"TextEvent"in window&&!fr,Gv=pi&&(!df||fr&&8<fr&&11>=fr),tm=" ",nm=!1;function Kv(e,t){switch(e){case"keyup":return rS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ns=!1;function oS(e,t){switch(e){case"compositionend":return Xv(t);case"keypress":return t.which!==32?null:(nm=!0,tm);case"textInput":return e=t.data,e===tm&&nm?null:e;default:return null}}function cS(e,t){if(ns)return e==="compositionend"||!df&&Kv(e,t)?(e=Yv(),Fl=cf=zi=null,ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gv&&t.locale!=="ko"?null:t.data;default:return null}}var uS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function im(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uS[e.type]:t==="textarea"}function Qv(e,t,n,i){ts?fs?fs.push(i):fs=[i]:ts=i,t=Uo(t,"onChange"),0<t.length&&(n=new ac("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var hr=null,Mr=null;function dS(e){Vp(e,0)}function rc(e){var t=lr(e);if(Bv(t))return e}function am(e,t){if(e==="change")return t}var Jv=!1;if(pi){var Yc;if(pi){var Gc="oninput"in document;if(!Gc){var sm=document.createElement("div");sm.setAttribute("oninput","return;"),Gc=typeof sm.oninput=="function"}Yc=Gc}else Yc=!1;Jv=Yc&&(!document.documentMode||9<document.documentMode)}function rm(){hr&&(hr.detachEvent("onpropertychange",Pv),Mr=hr=null)}function Pv(e){if(e.propertyName==="value"&&rc(Mr)){var t=[];Qv(t,Mr,e,of(e)),Vv(dS,t)}}function fS(e,t,n){e==="focusin"?(rm(),hr=t,Mr=n,hr.attachEvent("onpropertychange",Pv)):e==="focusout"&&rm()}function hS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rc(Mr)}function mS(e,t){if(e==="click")return rc(t)}function gS(e,t){if(e==="input"||e==="change")return rc(t)}function vS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wn=typeof Object.is=="function"?Object.is:vS;function kr(e,t){if(wn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!Vu.call(t,a)||!wn(e[a],t[a]))return!1}return!0}function lm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function om(e,t){var n=lm(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lm(n)}}function Zv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fv(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=yo(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=yo(e.document)}return t}function ff(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var yS=pi&&"documentMode"in document&&11>=document.documentMode,is=null,Pu=null,mr=null,Zu=!1;function cm(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zu||is==null||is!==yo(i)||(i=is,"selectionStart"in i&&ff(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),mr&&kr(mr,i)||(mr=i,i=Uo(Pu,"onSelect"),0<i.length&&(t=new ac("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=is)))}function ra(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var as={animationend:ra("Animation","AnimationEnd"),animationiteration:ra("Animation","AnimationIteration"),animationstart:ra("Animation","AnimationStart"),transitionrun:ra("Transition","TransitionRun"),transitionstart:ra("Transition","TransitionStart"),transitioncancel:ra("Transition","TransitionCancel"),transitionend:ra("Transition","TransitionEnd")},Kc={},Wv={};pi&&(Wv=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function Na(e){if(Kc[e])return Kc[e];if(!as[e])return e;var t=as[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Wv)return Kc[e]=t[n];return e}var ey=Na("animationend"),ty=Na("animationiteration"),ny=Na("animationstart"),pS=Na("transitionrun"),bS=Na("transitionstart"),_S=Na("transitioncancel"),iy=Na("transitionend"),ay=new Map,Fu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fu.push("scrollEnd");function Xn(e,t){ay.set(e,t),Ca(t,[e])}var po=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},On=[],ss=0,hf=0;function lc(){for(var e=ss,t=hf=ss=0;t<e;){var n=On[t];On[t++]=null;var i=On[t];On[t++]=null;var a=On[t];On[t++]=null;var s=On[t];if(On[t++]=null,i!==null&&a!==null){var r=i.pending;r===null?a.next=a:(a.next=r.next,r.next=a),i.pending=a}s!==0&&sy(n,a,s)}}function oc(e,t,n,i){On[ss++]=e,On[ss++]=t,On[ss++]=n,On[ss++]=i,hf|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function mf(e,t,n,i){return oc(e,t,n,i),bo(e)}function Ra(e,t){return oc(e,null,null,t),bo(e)}function sy(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var a=!1,s=e.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(a=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,a&&t!==null&&(a=31-bn(n),e=s.hiddenUpdates,i=e[a],i===null?e[a]=[t]:i.push(t),t.lane=n|536870912),s):null}function bo(e){if(50<xr)throw xr=0,bd=null,Error(D(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var rs={};function wS(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(e,t,n,i){return new wS(e,t,n,i)}function gf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gi(e,t){var n=e.alternate;return n===null?(n=hn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ry(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function eo(e,t,n,i,a,s){var r=0;if(i=e,typeof e=="function")gf(e)&&(r=1);else if(typeof e=="string")r=jx(e,n,ei.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Hu:return e=hn(31,n,t,a),e.elementType=Hu,e.lanes=s,e;case Fa:return _a(n.children,a,s,t);case Ev:r=8,a|=24;break;case zu:return e=hn(12,n,t,a|2),e.elementType=zu,e.lanes=s,e;case Lu:return e=hn(13,n,t,a),e.elementType=Lu,e.lanes=s,e;case Bu:return e=hn(19,n,t,a),e.elementType=Bu,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fi:r=10;break e;case jv:r=9;break e;case ef:r=11;break e;case tf:r=14;break e;case Oi:r=16,i=null;break e}r=29,n=Error(D(130,e===null?"null":typeof e,"")),i=null}return t=hn(r,n,t,a),t.elementType=e,t.type=i,t.lanes=s,t}function _a(e,t,n,i){return e=hn(7,e,i,t),e.lanes=n,e}function Xc(e,t,n){return e=hn(6,e,null,t),e.lanes=n,e}function ly(e){var t=hn(18,null,null,0);return t.stateNode=e,t}function Qc(e,t,n){return t=hn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var um=new WeakMap;function Mn(e,t){if(typeof e=="object"&&e!==null){var n=um.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Yh(t)},um.set(e,t),t)}return{value:e,source:t,stack:Yh(t)}}var ls=[],os=0,_o=null,Ur=0,Dn=[],Nn=0,Pi=null,Zn=1,Fn="";function ui(e,t){ls[os++]=Ur,ls[os++]=_o,_o=e,Ur=t}function oy(e,t,n){Dn[Nn++]=Zn,Dn[Nn++]=Fn,Dn[Nn++]=Pi,Pi=e;var i=Zn;e=Fn;var a=32-bn(i)-1;i&=~(1<<a),n+=1;var s=32-bn(t)+a;if(30<s){var r=a-a%5;s=(i&(1<<r)-1).toString(32),i>>=r,a-=r,Zn=1<<32-bn(t)+a|n<<a|i,Fn=s+e}else Zn=1<<s|n<<a|i,Fn=e}function vf(e){e.return!==null&&(ui(e,1),oy(e,1,0))}function yf(e){for(;e===_o;)_o=ls[--os],ls[os]=null,Ur=ls[--os],ls[os]=null;for(;e===Pi;)Pi=Dn[--Nn],Dn[Nn]=null,Fn=Dn[--Nn],Dn[Nn]=null,Zn=Dn[--Nn],Dn[Nn]=null}function cy(e,t){Dn[Nn++]=Zn,Dn[Nn++]=Fn,Dn[Nn++]=Pi,Zn=t.id,Fn=t.overflow,Pi=e}var qt=null,Fe=null,Me=!1,Ii=null,kn=!1,Wu=Error(D(519));function Zi(e){var t=Error(D(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zr(Mn(t,e)),Wu}function dm(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Ht]=e,t[ln]=i,n){case"dialog":Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":case"embed":Ae("load",t);break;case"video":case"audio":for(n=0;n<qr.length;n++)Ae(qr[n],t);break;case"source":Ae("error",t);break;case"img":case"image":case"link":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"input":Ae("invalid",t),Hv(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Ae("invalid",t);break;case"textarea":Ae("invalid",t),$v(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||Gp(t.textContent,n)?(i.popover!=null&&(Ae("beforetoggle",t),Ae("toggle",t)),i.onScroll!=null&&Ae("scroll",t),i.onScrollEnd!=null&&Ae("scrollend",t),i.onClick!=null&&(t.onclick=hi),t=!0):t=!1,t||Zi(e,!0)}function fm(e){for(qt=e.return;qt;)switch(qt.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:qt=qt.return}}function Ba(e){if(e!==qt)return!1;if(!Me)return fm(e),Me=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Td(e.type,e.memoizedProps)),n=!n),n&&Fe&&Zi(e),fm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));Fe=Fm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));Fe=Fm(e)}else t===27?(t=Fe,na(e.type)?(e=Ad,Ad=null,Fe=e):Fe=t):Fe=qt?zn(e.stateNode.nextSibling):null;return!0}function Ta(){Fe=qt=null,Me=!1}function Jc(){var e=Ii;return e!==null&&(sn===null?sn=e:sn.push.apply(sn,e),Ii=null),e}function zr(e){Ii===null?Ii=[e]:Ii.push(e)}var ed=ti(null),Ma=null,mi=null;function Di(e,t,n){Je(ed,t._currentValue),t._currentValue=n}function vi(e){e._currentValue=ed.current,kt(ed)}function td(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function nd(e,t,n,i){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){var r=a.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=a;for(var o=0;o<t.length;o++)if(l.context===t[o]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),td(s.return,n,e),i||(r=null);break e}s=l.next}}else if(a.tag===18){if(r=a.return,r===null)throw Error(D(341));r.lanes|=n,s=r.alternate,s!==null&&(s.lanes|=n),td(r,n,e),r=null}else r=a.child;if(r!==null)r.return=a;else for(r=a;r!==null;){if(r===e){r=null;break}if(a=r.sibling,a!==null){a.return=r.return,r=a;break}r=r.return}a=r}}function zs(e,t,n,i){e=null;for(var a=t,s=!1;a!==null;){if(!s){if(a.flags&524288)s=!0;else if(a.flags&262144)break}if(a.tag===10){var r=a.alternate;if(r===null)throw Error(D(387));if(r=r.memoizedProps,r!==null){var l=a.type;wn(a.pendingProps.value,r.value)||(e!==null?e.push(l):e=[l])}}else if(a===ho.current){if(r=a.alternate,r===null)throw Error(D(387));r.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(Ir):e=[Ir])}a=a.return}e!==null&&nd(t,e,n,i),t.flags|=262144}function wo(e){for(e=e.firstContext;e!==null;){if(!wn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ea(e){Ma=e,mi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $t(e){return uy(Ma,e)}function Dl(e,t){return Ma===null&&Ea(e),uy(e,t)}function uy(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},mi===null){if(e===null)throw Error(D(308));mi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else mi=mi.next=t;return n}var SS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},xS=Ct.unstable_scheduleCallback,TS=Ct.unstable_NormalPriority,xt={$$typeof:fi,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pf(){return{controller:new SS,data:new Map,refCount:0}}function nl(e){e.refCount--,e.refCount===0&&xS(TS,function(){e.controller.abort()})}var gr=null,id=0,Ss=0,hs=null;function ES(e,t){if(gr===null){var n=gr=[];id=0,Ss=Vf(),hs={status:"pending",value:void 0,then:function(i){n.push(i)}}}return id++,t.then(hm,hm),t}function hm(){if(--id===0&&gr!==null){hs!==null&&(hs.status="fulfilled");var e=gr;gr=null,Ss=0,hs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function jS(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var a=0;a<n.length;a++)(0,n[a])(t)},function(a){for(i.status="rejected",i.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),i}var mm=he.S;he.S=function(e,t){Tp=yn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ES(e,t),mm!==null&&mm(e,t)};var wa=ti(null);function bf(){var e=wa.current;return e!==null?e:Ke.pooledCache}function to(e,t){t===null?Je(wa,wa.current):Je(wa,t.pool)}function dy(){var e=bf();return e===null?null:{parent:xt._currentValue,pool:e}}var Ls=Error(D(460)),_f=Error(D(474)),cc=Error(D(542)),So={then:function(){}};function gm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function fy(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(hi,hi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ym(e),e;default:if(typeof t.status=="string")t.then(hi,hi);else{if(e=Ke,e!==null&&100<e.shellSuspendCounter)throw Error(D(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=i}},function(i){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ym(e),e}throw Sa=t,Ls}}function da(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Sa=n,Ls):n}}var Sa=null;function vm(){if(Sa===null)throw Error(D(459));var e=Sa;return Sa=null,e}function ym(e){if(e===Ls||e===cc)throw Error(D(483))}var ms=null,Lr=0;function Nl(e){var t=Lr;return Lr+=1,ms===null&&(ms=[]),fy(ms,e,t)}function Ws(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Rl(e,t){throw t.$$typeof===fw?Error(D(525)):(e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function hy(e){function t(p,g){if(e){var y=p.deletions;y===null?(p.deletions=[g],p.flags|=16):y.push(g)}}function n(p,g){if(!e)return null;for(;g!==null;)t(p,g),g=g.sibling;return null}function i(p){for(var g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function a(p,g){return p=gi(p,g),p.index=0,p.sibling=null,p}function s(p,g,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<g?(p.flags|=67108866,g):y):(p.flags|=67108866,g)):(p.flags|=1048576,g)}function r(p){return e&&p.alternate===null&&(p.flags|=67108866),p}function l(p,g,y,S){return g===null||g.tag!==6?(g=Xc(y,p.mode,S),g.return=p,g):(g=a(g,y),g.return=p,g)}function o(p,g,y,S){var T=y.type;return T===Fa?d(p,g,y.props.children,S,y.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Oi&&da(T)===g.type)?(g=a(g,y.props),Ws(g,y),g.return=p,g):(g=eo(y.type,y.key,y.props,null,p.mode,S),Ws(g,y),g.return=p,g)}function u(p,g,y,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Qc(y,p.mode,S),g.return=p,g):(g=a(g,y.children||[]),g.return=p,g)}function d(p,g,y,S,T){return g===null||g.tag!==7?(g=_a(y,p.mode,S,T),g.return=p,g):(g=a(g,y),g.return=p,g)}function f(p,g,y){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=Xc(""+g,p.mode,y),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Tl:return y=eo(g.type,g.key,g.props,null,p.mode,y),Ws(y,g),y.return=p,y;case sr:return g=Qc(g,p.mode,y),g.return=p,g;case Oi:return g=da(g),f(p,g,y)}if(rr(g)||Ps(g))return g=_a(g,p.mode,y,null),g.return=p,g;if(typeof g.then=="function")return f(p,Nl(g),y);if(g.$$typeof===fi)return f(p,Dl(p,g),y);Rl(p,g)}return null}function h(p,g,y,S){var T=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return T!==null?null:l(p,g,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Tl:return y.key===T?o(p,g,y,S):null;case sr:return y.key===T?u(p,g,y,S):null;case Oi:return y=da(y),h(p,g,y,S)}if(rr(y)||Ps(y))return T!==null?null:d(p,g,y,S,null);if(typeof y.then=="function")return h(p,g,Nl(y),S);if(y.$$typeof===fi)return h(p,g,Dl(p,y),S);Rl(p,y)}return null}function m(p,g,y,S,T){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return p=p.get(y)||null,l(g,p,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Tl:return p=p.get(S.key===null?y:S.key)||null,o(g,p,S,T);case sr:return p=p.get(S.key===null?y:S.key)||null,u(g,p,S,T);case Oi:return S=da(S),m(p,g,y,S,T)}if(rr(S)||Ps(S))return p=p.get(y)||null,d(g,p,S,T,null);if(typeof S.then=="function")return m(p,g,y,Nl(S),T);if(S.$$typeof===fi)return m(p,g,y,Dl(g,S),T);Rl(g,S)}return null}function v(p,g,y,S){for(var T=null,E=null,x=g,j=g=0,A=null;x!==null&&j<y.length;j++){x.index>j?(A=x,x=null):A=x.sibling;var M=h(p,x,y[j],S);if(M===null){x===null&&(x=A);break}e&&x&&M.alternate===null&&t(p,x),g=s(M,g,j),E===null?T=M:E.sibling=M,E=M,x=A}if(j===y.length)return n(p,x),Me&&ui(p,j),T;if(x===null){for(;j<y.length;j++)x=f(p,y[j],S),x!==null&&(g=s(x,g,j),E===null?T=x:E.sibling=x,E=x);return Me&&ui(p,j),T}for(x=i(x);j<y.length;j++)A=m(x,p,j,y[j],S),A!==null&&(e&&A.alternate!==null&&x.delete(A.key===null?j:A.key),g=s(A,g,j),E===null?T=A:E.sibling=A,E=A);return e&&x.forEach(function(P){return t(p,P)}),Me&&ui(p,j),T}function b(p,g,y,S){if(y==null)throw Error(D(151));for(var T=null,E=null,x=g,j=g=0,A=null,M=y.next();x!==null&&!M.done;j++,M=y.next()){x.index>j?(A=x,x=null):A=x.sibling;var P=h(p,x,M.value,S);if(P===null){x===null&&(x=A);break}e&&x&&P.alternate===null&&t(p,x),g=s(P,g,j),E===null?T=P:E.sibling=P,E=P,x=A}if(M.done)return n(p,x),Me&&ui(p,j),T;if(x===null){for(;!M.done;j++,M=y.next())M=f(p,M.value,S),M!==null&&(g=s(M,g,j),E===null?T=M:E.sibling=M,E=M);return Me&&ui(p,j),T}for(x=i(x);!M.done;j++,M=y.next())M=m(x,p,j,M.value,S),M!==null&&(e&&M.alternate!==null&&x.delete(M.key===null?j:M.key),g=s(M,g,j),E===null?T=M:E.sibling=M,E=M);return e&&x.forEach(function(G){return t(p,G)}),Me&&ui(p,j),T}function w(p,g,y,S){if(typeof y=="object"&&y!==null&&y.type===Fa&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Tl:e:{for(var T=y.key;g!==null;){if(g.key===T){if(T=y.type,T===Fa){if(g.tag===7){n(p,g.sibling),S=a(g,y.props.children),S.return=p,p=S;break e}}else if(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Oi&&da(T)===g.type){n(p,g.sibling),S=a(g,y.props),Ws(S,y),S.return=p,p=S;break e}n(p,g);break}else t(p,g);g=g.sibling}y.type===Fa?(S=_a(y.props.children,p.mode,S,y.key),S.return=p,p=S):(S=eo(y.type,y.key,y.props,null,p.mode,S),Ws(S,y),S.return=p,p=S)}return r(p);case sr:e:{for(T=y.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(p,g.sibling),S=a(g,y.children||[]),S.return=p,p=S;break e}else{n(p,g);break}else t(p,g);g=g.sibling}S=Qc(y,p.mode,S),S.return=p,p=S}return r(p);case Oi:return y=da(y),w(p,g,y,S)}if(rr(y))return v(p,g,y,S);if(Ps(y)){if(T=Ps(y),typeof T!="function")throw Error(D(150));return y=T.call(y),b(p,g,y,S)}if(typeof y.then=="function")return w(p,g,Nl(y),S);if(y.$$typeof===fi)return w(p,g,Dl(p,y),S);Rl(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,g!==null&&g.tag===6?(n(p,g.sibling),S=a(g,y),S.return=p,p=S):(n(p,g),S=Xc(y,p.mode,S),S.return=p,p=S),r(p)):n(p,g)}return function(p,g,y,S){try{Lr=0;var T=w(p,g,y,S);return ms=null,T}catch(x){if(x===Ls||x===cc)throw x;var E=hn(29,x,null,p.mode);return E.lanes=S,E.return=p,E}finally{}}}var ja=hy(!0),my=hy(!1),Ai=!1;function wf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Vi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Yi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Be&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,t=bo(e),sy(e,null,n),t}return oc(e,i,t,n),bo(e)}function vr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Rv(e,n)}}function Pc(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?a=s=r:s=s.next=r,n=n.next}while(n!==null);s===null?a=s=t:s=s.next=t}else a=s=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var sd=!1;function yr(){if(sd){var e=hs;if(e!==null)throw e}}function pr(e,t,n,i){sd=!1;var a=e.updateQueue;Ai=!1;var s=a.firstBaseUpdate,r=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var o=l,u=o.next;o.next=null,r===null?s=u:r.next=u,r=o;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==r&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=o))}if(s!==null){var f=a.baseState;r=0,d=u=o=null,l=s;do{var h=l.lane&-536870913,m=h!==l.lane;if(m?(Ne&h)===h:(i&h)===h){h!==0&&h===Ss&&(sd=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var v=e,b=l;h=t;var w=n;switch(b.tag){case 1:if(v=b.payload,typeof v=="function"){f=v.call(w,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,h=typeof v=="function"?v.call(w,f,h):v,h==null)break e;f=et({},f,h);break e;case 2:Ai=!0}}h=l.callback,h!==null&&(e.flags|=64,m&&(e.flags|=8192),m=a.callbacks,m===null?a.callbacks=[h]:m.push(h))}else m={lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,o=f):d=d.next=m,r|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);d===null&&(o=f),a.baseState=o,a.firstBaseUpdate=u,a.lastBaseUpdate=d,s===null&&(a.shared.lanes=0),Wi|=r,e.lanes=r,e.memoizedState=f}}function gy(e,t){if(typeof e!="function")throw Error(D(191,e));e.call(t)}function vy(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)gy(n[e],t)}var xs=ti(null),xo=ti(0);function pm(e,t){e=Si,Je(xo,e),Je(xs,t),Si=e|t.baseLanes}function rd(){Je(xo,Si),Je(xs,xs.current)}function Sf(){Si=xo.current,kt(xs),kt(xo)}var Sn=ti(null),Un=null;function Ni(e){var t=e.alternate;Je(vt,vt.current&1),Je(Sn,e),Un===null&&(t===null||xs.current!==null||t.memoizedState!==null)&&(Un=e)}function ld(e){Je(vt,vt.current),Je(Sn,e),Un===null&&(Un=e)}function yy(e){e.tag===22?(Je(vt,vt.current),Je(Sn,e),Un===null&&(Un=e)):Ri()}function Ri(){Je(vt,vt.current),Je(Sn,Sn.current)}function fn(e){kt(Sn),Un===e&&(Un=null),kt(vt)}var vt=ti(0);function To(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||jd(n)||Od(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bi=0,be=null,Ye=null,wt=null,Eo=!1,gs=!1,Oa=!1,jo=0,Br=0,vs=null,OS=0;function dt(){throw Error(D(321))}function xf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wn(e[n],t[n]))return!1;return!0}function Tf(e,t,n,i,a,s){return bi=s,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,he.H=e===null||e.memoizedState===null?Qy:Uf,Oa=!1,s=n(i,a),Oa=!1,gs&&(s=by(t,n,i,a)),py(e),s}function py(e){he.H=Hr;var t=Ye!==null&&Ye.next!==null;if(bi=0,wt=Ye=be=null,Eo=!1,Br=0,vs=null,t)throw Error(D(300));e===null||Tt||(e=e.dependencies,e!==null&&wo(e)&&(Tt=!0))}function by(e,t,n,i){be=e;var a=0;do{if(gs&&(vs=null),Br=0,gs=!1,25<=a)throw Error(D(301));if(a+=1,wt=Ye=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}he.H=Jy,s=t(n,i)}while(gs);return s}function AS(){var e=he.H,t=e.useState()[0];return t=typeof t.then=="function"?il(t):t,e=e.useState()[0],(Ye!==null?Ye.memoizedState:null)!==e&&(be.flags|=1024),t}function Ef(){var e=jo!==0;return jo=0,e}function jf(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Of(e){if(Eo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Eo=!1}bi=0,wt=Ye=be=null,gs=!1,Br=jo=0,vs=null}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?be.memoizedState=wt=e:wt=wt.next=e,wt}function yt(){if(Ye===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=wt===null?be.memoizedState:wt.next;if(t!==null)wt=t,Ye=e;else{if(e===null)throw be.alternate===null?Error(D(467)):Error(D(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},wt===null?be.memoizedState=wt=e:wt=wt.next=e}return wt}function uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function il(e){var t=Br;return Br+=1,vs===null&&(vs=[]),e=fy(vs,e,t),t=be,(wt===null?t.memoizedState:wt.next)===null&&(t=t.alternate,he.H=t===null||t.memoizedState===null?Qy:Uf),e}function dc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return il(e);if(e.$$typeof===fi)return $t(e)}throw Error(D(438,String(e)))}function Af(e){var t=null,n=be.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=be.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=uc(),be.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=hw;return t.index++,n}function _i(e,t){return typeof t=="function"?t(e):t}function no(e){var t=yt();return Cf(t,Ye,e)}function Cf(e,t,n){var i=e.queue;if(i===null)throw Error(D(311));i.lastRenderedReducer=n;var a=e.baseQueue,s=i.pending;if(s!==null){if(a!==null){var r=a.next;a.next=s.next,s.next=r}t.baseQueue=a=s,i.pending=null}if(s=e.baseState,a===null)e.memoizedState=s;else{t=a.next;var l=r=null,o=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(Ne&f)===f:(bi&f)===f){var h=u.revertLane;if(h===0)o!==null&&(o=o.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===Ss&&(d=!0);else if((bi&h)===h){u=u.next,h===Ss&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(l=o=f,r=s):o=o.next=f,be.lanes|=h,Wi|=h;f=u.action,Oa&&n(s,f),s=u.hasEagerState?u.eagerState:n(s,f)}else h={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(l=o=h,r=s):o=o.next=h,be.lanes|=f,Wi|=f;u=u.next}while(u!==null&&u!==t);if(o===null?r=s:o.next=l,!wn(s,e.memoizedState)&&(Tt=!0,d&&(n=hs,n!==null)))throw n;e.memoizedState=s,e.baseState=r,e.baseQueue=o,i.lastRenderedState=s}return a===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Zc(e){var t=yt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,s=t.memoizedState;if(a!==null){n.pending=null;var r=a=a.next;do s=e(s,r.action),r=r.next;while(r!==a);wn(s,t.memoizedState)||(Tt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function _y(e,t,n){var i=be,a=yt(),s=Me;if(s){if(n===void 0)throw Error(D(407));n=n()}else n=t();var r=!wn((Ye||a).memoizedState,n);if(r&&(a.memoizedState=n,Tt=!0),a=a.queue,Df(xy.bind(null,i,a,e),[e]),a.getSnapshot!==t||r||wt!==null&&wt.memoizedState.tag&1){if(i.flags|=2048,Ts(9,{destroy:void 0},Sy.bind(null,i,a,n,t),null),Ke===null)throw Error(D(349));s||bi&127||wy(i,t,n)}return n}function wy(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=be.updateQueue,t===null?(t=uc(),be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Sy(e,t,n,i){t.value=n,t.getSnapshot=i,Ty(t)&&Ey(e)}function xy(e,t,n){return n(function(){Ty(t)&&Ey(e)})}function Ty(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wn(e,n)}catch{return!0}}function Ey(e){var t=Ra(e,2);t!==null&&rn(t,e,2)}function od(e){var t=Qt();if(typeof e=="function"){var n=e;if(e=n(),Oa){Ui(!0);try{n()}finally{Ui(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:e},t}function jy(e,t,n,i){return e.baseState=n,Cf(e,Ye,typeof i=="function"?i:_i)}function CS(e,t,n,i,a){if(hc(e))throw Error(D(485));if(e=t.action,e!==null){var s={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){s.listeners.push(r)}};he.T!==null?n(!0):s.isTransition=!1,i(s),n=t.pending,n===null?(s.next=t.pending=s,Oy(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Oy(e,t){var n=t.action,i=t.payload,a=e.state;if(t.isTransition){var s=he.T,r={};he.T=r;try{var l=n(a,i),o=he.S;o!==null&&o(r,l),bm(e,t,l)}catch(u){cd(e,t,u)}finally{s!==null&&r.types!==null&&(s.types=r.types),he.T=s}}else try{s=n(a,i),bm(e,t,s)}catch(u){cd(e,t,u)}}function bm(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){_m(e,t,i)},function(i){return cd(e,t,i)}):_m(e,t,n)}function _m(e,t,n){t.status="fulfilled",t.value=n,Ay(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Oy(e,n)))}function cd(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Ay(t),t=t.next;while(t!==i)}e.action=null}function Ay(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Cy(e,t){return t}function wm(e,t){if(Me){var n=Ke.formState;if(n!==null){e:{var i=be;if(Me){if(Fe){t:{for(var a=Fe,s=kn;a.nodeType!==8;){if(!s){a=null;break t}if(a=zn(a.nextSibling),a===null){a=null;break t}}s=a.data,a=s==="F!"||s==="F"?a:null}if(a){Fe=zn(a.nextSibling),i=a.data==="F!";break e}}Zi(i)}i=!1}i&&(t=n[0])}}return n=Qt(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cy,lastRenderedState:t},n.queue=i,n=Gy.bind(null,be,i),i.dispatch=n,i=od(!1),s=kf.bind(null,be,!1,i.queue),i=Qt(),a={state:t,dispatch:null,action:e,pending:null},i.queue=a,n=CS.bind(null,be,a,s,n),a.dispatch=n,i.memoizedState=e,[t,n,!1]}function Sm(e){var t=yt();return Dy(t,Ye,e)}function Dy(e,t,n){if(t=Cf(e,t,Cy)[0],e=no(_i)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=il(t)}catch(r){throw r===Ls?cc:r}else i=t;t=yt();var a=t.queue,s=a.dispatch;return n!==t.memoizedState&&(be.flags|=2048,Ts(9,{destroy:void 0},DS.bind(null,a,n),null)),[i,s,e]}function DS(e,t){e.action=t}function xm(e){var t=yt(),n=Ye;if(n!==null)return Dy(t,n,e);yt(),t=t.memoizedState,n=yt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Ts(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=be.updateQueue,t===null&&(t=uc(),be.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ny(){return yt().memoizedState}function io(e,t,n,i){var a=Qt();be.flags|=e,a.memoizedState=Ts(1|t,{destroy:void 0},n,i===void 0?null:i)}function fc(e,t,n,i){var a=yt();i=i===void 0?null:i;var s=a.memoizedState.inst;Ye!==null&&i!==null&&xf(i,Ye.memoizedState.deps)?a.memoizedState=Ts(t,s,n,i):(be.flags|=e,a.memoizedState=Ts(1|t,s,n,i))}function Tm(e,t){io(8390656,8,e,t)}function Df(e,t){fc(2048,8,e,t)}function NS(e){be.flags|=4;var t=be.updateQueue;if(t===null)t=uc(),be.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Ry(e){var t=yt().memoizedState;return NS({ref:t,nextImpl:e}),function(){if(Be&2)throw Error(D(440));return t.impl.apply(void 0,arguments)}}function My(e,t){return fc(4,2,e,t)}function ky(e,t){return fc(4,4,e,t)}function Uy(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zy(e,t,n){n=n!=null?n.concat([e]):null,fc(4,4,Uy.bind(null,t,e),n)}function Nf(){}function Ly(e,t){var n=yt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&xf(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function By(e,t){var n=yt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&xf(t,i[1]))return i[0];if(i=e(),Oa){Ui(!0);try{e()}finally{Ui(!1)}}return n.memoizedState=[i,t],i}function Rf(e,t,n){return n===void 0||bi&1073741824&&!(Ne&261930)?e.memoizedState=t:(e.memoizedState=n,e=jp(),be.lanes|=e,Wi|=e,n)}function Hy(e,t,n,i){return wn(n,t)?n:xs.current!==null?(e=Rf(e,n,i),wn(e,t)||(Tt=!0),e):!(bi&42)||bi&1073741824&&!(Ne&261930)?(Tt=!0,e.memoizedState=n):(e=jp(),be.lanes|=e,Wi|=e,t)}function qy(e,t,n,i,a){var s=He.p;He.p=s!==0&&8>s?s:8;var r=he.T,l={};he.T=l,kf(e,!1,t,n);try{var o=a(),u=he.S;if(u!==null&&u(l,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=jS(o,i);br(e,t,d,_n(e))}else br(e,t,i,_n(e))}catch(f){br(e,t,{then:function(){},status:"rejected",reason:f},_n())}finally{He.p=s,r!==null&&l.types!==null&&(r.types=l.types),he.T=r}}function RS(){}function ud(e,t,n,i){if(e.tag!==5)throw Error(D(476));var a=$y(e).queue;qy(e,a,t,ba,n===null?RS:function(){return Iy(e),n(i)})}function $y(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ba,baseState:ba,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:ba},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Iy(e){var t=$y(e);t.next===null&&(t=e.alternate.memoizedState),br(e,t.next.queue,{},_n())}function Mf(){return $t(Ir)}function Vy(){return yt().memoizedState}function Yy(){return yt().memoizedState}function MS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=_n();e=Vi(n);var i=Yi(t,e,n);i!==null&&(rn(i,t,n),vr(i,t,n)),t={cache:pf()},e.payload=t;return}t=t.return}}function kS(e,t,n){var i=_n();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hc(e)?Ky(t,n):(n=mf(e,t,n,i),n!==null&&(rn(n,e,i),Xy(n,t,i)))}function Gy(e,t,n){var i=_n();br(e,t,n,i)}function br(e,t,n,i){var a={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(hc(e))Ky(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var r=t.lastRenderedState,l=s(r,n);if(a.hasEagerState=!0,a.eagerState=l,wn(l,r))return oc(e,t,a,0),Ke===null&&lc(),!1}catch{}finally{}if(n=mf(e,t,a,i),n!==null)return rn(n,e,i),Xy(n,t,i),!0}return!1}function kf(e,t,n,i){if(i={lane:2,revertLane:Vf(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},hc(e)){if(t)throw Error(D(479))}else t=mf(e,n,i,2),t!==null&&rn(t,e,2)}function hc(e){var t=e.alternate;return e===be||t!==null&&t===be}function Ky(e,t){gs=Eo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xy(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Rv(e,n)}}var Hr={readContext:$t,use:dc,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt};Hr.useEffectEvent=dt;var Qy={readContext:$t,use:dc,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:Tm,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,io(4194308,4,Uy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return io(4194308,4,e,t)},useInsertionEffect:function(e,t){io(4,2,e,t)},useMemo:function(e,t){var n=Qt();t=t===void 0?null:t;var i=e();if(Oa){Ui(!0);try{e()}finally{Ui(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Qt();if(n!==void 0){var a=n(t);if(Oa){Ui(!0);try{n(t)}finally{Ui(!1)}}}else a=t;return i.memoizedState=i.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},i.queue=e,e=e.dispatch=kS.bind(null,be,e),[i.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:function(e){e=od(e);var t=e.queue,n=Gy.bind(null,be,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Nf,useDeferredValue:function(e,t){var n=Qt();return Rf(n,e,t)},useTransition:function(){var e=od(!1);return e=qy.bind(null,be,e.queue,!0,!1),Qt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=be,a=Qt();if(Me){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Ke===null)throw Error(D(349));Ne&127||wy(i,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,Tm(xy.bind(null,i,s,e),[e]),i.flags|=2048,Ts(9,{destroy:void 0},Sy.bind(null,i,s,n,t),null),n},useId:function(){var e=Qt(),t=Ke.identifierPrefix;if(Me){var n=Fn,i=Zn;n=(i&~(1<<32-bn(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=jo++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=OS++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Mf,useFormState:wm,useActionState:wm,useOptimistic:function(e){var t=Qt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=kf.bind(null,be,!0,n),n.dispatch=t,[e,t]},useMemoCache:Af,useCacheRefresh:function(){return Qt().memoizedState=MS.bind(null,be)},useEffectEvent:function(e){var t=Qt(),n={impl:e};return t.memoizedState=n,function(){if(Be&2)throw Error(D(440));return n.impl.apply(void 0,arguments)}}},Uf={readContext:$t,use:dc,useCallback:Ly,useContext:$t,useEffect:Df,useImperativeHandle:zy,useInsertionEffect:My,useLayoutEffect:ky,useMemo:By,useReducer:no,useRef:Ny,useState:function(){return no(_i)},useDebugValue:Nf,useDeferredValue:function(e,t){var n=yt();return Hy(n,Ye.memoizedState,e,t)},useTransition:function(){var e=no(_i)[0],t=yt().memoizedState;return[typeof e=="boolean"?e:il(e),t]},useSyncExternalStore:_y,useId:Vy,useHostTransitionStatus:Mf,useFormState:Sm,useActionState:Sm,useOptimistic:function(e,t){var n=yt();return jy(n,Ye,e,t)},useMemoCache:Af,useCacheRefresh:Yy};Uf.useEffectEvent=Ry;var Jy={readContext:$t,use:dc,useCallback:Ly,useContext:$t,useEffect:Df,useImperativeHandle:zy,useInsertionEffect:My,useLayoutEffect:ky,useMemo:By,useReducer:Zc,useRef:Ny,useState:function(){return Zc(_i)},useDebugValue:Nf,useDeferredValue:function(e,t){var n=yt();return Ye===null?Rf(n,e,t):Hy(n,Ye.memoizedState,e,t)},useTransition:function(){var e=Zc(_i)[0],t=yt().memoizedState;return[typeof e=="boolean"?e:il(e),t]},useSyncExternalStore:_y,useId:Vy,useHostTransitionStatus:Mf,useFormState:xm,useActionState:xm,useOptimistic:function(e,t){var n=yt();return Ye!==null?jy(n,Ye,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Af,useCacheRefresh:Yy};Jy.useEffectEvent=Ry;function Fc(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:et({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var dd={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=_n(),a=Vi(i);a.payload=t,n!=null&&(a.callback=n),t=Yi(e,a,i),t!==null&&(rn(t,e,i),vr(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=_n(),a=Vi(i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Yi(e,a,i),t!==null&&(rn(t,e,i),vr(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_n(),i=Vi(n);i.tag=2,t!=null&&(i.callback=t),t=Yi(e,i,n),t!==null&&(rn(t,e,n),vr(t,e,n))}};function Em(e,t,n,i,a,s,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,r):t.prototype&&t.prototype.isPureReactComponent?!kr(n,i)||!kr(a,s):!0}function jm(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&dd.enqueueReplaceState(t,t.state,null)}function Aa(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=et({},n));for(var a in e)n[a]===void 0&&(n[a]=e[a])}return n}function Py(e){po(e)}function Zy(e){console.error(e)}function Fy(e){po(e)}function Oo(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Om(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function fd(e,t,n){return n=Vi(n),n.tag=3,n.payload={element:null},n.callback=function(){Oo(e,t)},n}function Wy(e){return e=Vi(e),e.tag=3,e}function ep(e,t,n,i){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var s=i.value;e.payload=function(){return a(s)},e.callback=function(){Om(t,n,i)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Om(t,n,i),typeof a!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function US(e,t,n,i,a){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&zs(t,n,a,!0),n=Sn.current,n!==null){switch(n.tag){case 31:case 13:return Un===null?Ro():n.alternate===null&&ft===0&&(ft=3),n.flags&=-257,n.flags|=65536,n.lanes=a,i===So?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),cu(e,i,a)),!1;case 22:return n.flags|=65536,i===So?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),cu(e,i,a)),!1}throw Error(D(435,n.tag))}return cu(e,i,a),Ro(),!1}if(Me)return t=Sn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,i!==Wu&&(e=Error(D(422),{cause:i}),zr(Mn(e,n)))):(i!==Wu&&(t=Error(D(423),{cause:i}),zr(Mn(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,i=Mn(i,n),a=fd(e.stateNode,i,a),Pc(e,a),ft!==4&&(ft=2)),!1;var s=Error(D(520),{cause:i});if(s=Mn(s,n),Sr===null?Sr=[s]:Sr.push(s),ft!==4&&(ft=2),t===null)return!0;i=Mn(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=fd(n.stateNode,i,e),Pc(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Gi===null||!Gi.has(s))))return n.flags|=65536,a&=-a,n.lanes|=a,a=Wy(a),ep(a,e,n,i),Pc(n,a),!1}n=n.return}while(n!==null);return!1}var zf=Error(D(461)),Tt=!1;function Bt(e,t,n,i){t.child=e===null?my(t,null,n,i):ja(t,e.child,n,i)}function Am(e,t,n,i,a){n=n.render;var s=t.ref;if("ref"in i){var r={};for(var l in i)l!=="ref"&&(r[l]=i[l])}else r=i;return Ea(t),i=Tf(e,t,n,r,s,a),l=Ef(),e!==null&&!Tt?(jf(e,t,a),wi(e,t,a)):(Me&&l&&vf(t),t.flags|=1,Bt(e,t,i,a),t.child)}function Cm(e,t,n,i,a){if(e===null){var s=n.type;return typeof s=="function"&&!gf(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,tp(e,t,s,i,a)):(e=eo(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!Lf(e,a)){var r=s.memoizedProps;if(n=n.compare,n=n!==null?n:kr,n(r,i)&&e.ref===t.ref)return wi(e,t,a)}return t.flags|=1,e=gi(s,i),e.ref=t.ref,e.return=t,t.child=e}function tp(e,t,n,i,a){if(e!==null){var s=e.memoizedProps;if(kr(s,i)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=i=s,Lf(e,a))e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,wi(e,t,a)}return hd(e,t,n,i,a)}function np(e,t,n,i){var a=i.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(t.flags&128){if(s=s!==null?s.baseLanes|n:n,e!==null){for(i=t.child=e.child,a=0;i!==null;)a=a|i.lanes|i.childLanes,i=i.sibling;i=a&~s}else i=0,t.child=null;return Dm(e,t,s,n,i)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&to(t,s!==null?s.cachePool:null),s!==null?pm(t,s):rd(),yy(t);else return i=t.lanes=536870912,Dm(e,t,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(to(t,s.cachePool),pm(t,s),Ri(),t.memoizedState=null):(e!==null&&to(t,null),rd(),Ri());return Bt(e,t,a,n),t.child}function or(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Dm(e,t,n,i,a){var s=bf();return s=s===null?null:{parent:xt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&to(t,null),rd(),yy(t),e!==null&&zs(e,t,i,!0),t.childLanes=a,null}function ao(e,t){return t=Ao({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Nm(e,t,n){return ja(t,e.child,null,n),e=ao(t,t.pendingProps),e.flags|=2,fn(t),t.memoizedState=null,e}function zS(e,t,n){var i=t.pendingProps,a=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Me){if(i.mode==="hidden")return e=ao(t,i),t.lanes=536870912,or(null,e);if(ld(t),(e=Fe)?(e=Qp(e,kn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Pi!==null?{id:Zn,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},n=ly(e),n.return=t,t.child=n,qt=t,Fe=null)):e=null,e===null)throw Zi(t);return t.lanes=536870912,null}return ao(t,i)}var s=e.memoizedState;if(s!==null){var r=s.dehydrated;if(ld(t),a)if(t.flags&256)t.flags&=-257,t=Nm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(D(558));else if(Tt||zs(e,t,n,!1),a=(n&e.childLanes)!==0,Tt||a){if(i=Ke,i!==null&&(r=Mv(i,n),r!==0&&r!==s.retryLane))throw s.retryLane=r,Ra(e,r),rn(i,e,r),zf;Ro(),t=Nm(e,t,n)}else e=s.treeContext,Fe=zn(r.nextSibling),qt=t,Me=!0,Ii=null,kn=!1,e!==null&&cy(t,e),t=ao(t,i),t.flags|=4096;return t}return e=gi(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function so(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(D(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function hd(e,t,n,i,a){return Ea(t),n=Tf(e,t,n,i,void 0,a),i=Ef(),e!==null&&!Tt?(jf(e,t,a),wi(e,t,a)):(Me&&i&&vf(t),t.flags|=1,Bt(e,t,n,a),t.child)}function Rm(e,t,n,i,a,s){return Ea(t),t.updateQueue=null,n=by(t,i,n,a),py(e),i=Ef(),e!==null&&!Tt?(jf(e,t,s),wi(e,t,s)):(Me&&i&&vf(t),t.flags|=1,Bt(e,t,n,s),t.child)}function Mm(e,t,n,i,a){if(Ea(t),t.stateNode===null){var s=rs,r=n.contextType;typeof r=="object"&&r!==null&&(s=$t(r)),s=new n(i,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=dd,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},wf(t),r=n.contextType,s.context=typeof r=="object"&&r!==null?$t(r):rs,s.state=t.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(Fc(t,n,r,i),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&dd.enqueueReplaceState(s,s.state,null),pr(t,i,s,a),yr(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,o=Aa(n,l);s.props=o;var u=s.context,d=n.contextType;r=rs,typeof d=="object"&&d!==null&&(r=$t(d));var f=n.getDerivedStateFromProps;d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||u!==r)&&jm(t,s,i,r),Ai=!1;var h=t.memoizedState;s.state=h,pr(t,i,s,a),yr(),u=t.memoizedState,l||h!==u||Ai?(typeof f=="function"&&(Fc(t,n,f,i),u=t.memoizedState),(o=Ai||Em(t,n,o,i,h,u,r))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),s.props=i,s.state=u,s.context=r,i=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,ad(e,t),r=t.memoizedProps,d=Aa(n,r),s.props=d,f=t.pendingProps,h=s.context,u=n.contextType,o=rs,typeof u=="object"&&u!==null&&(o=$t(u)),l=n.getDerivedStateFromProps,(u=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r!==f||h!==o)&&jm(t,s,i,o),Ai=!1,h=t.memoizedState,s.state=h,pr(t,i,s,a),yr();var m=t.memoizedState;r!==f||h!==m||Ai||e!==null&&e.dependencies!==null&&wo(e.dependencies)?(typeof l=="function"&&(Fc(t,n,l,i),m=t.memoizedState),(d=Ai||Em(t,n,d,i,h,m,o)||e!==null&&e.dependencies!==null&&wo(e.dependencies))?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,m,o),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,m,o)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),s.props=i,s.state=m,s.context=o,i=d):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,so(e,t),i=(t.flags&128)!==0,s||i?(s=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&i?(t.child=ja(t,e.child,null,a),t.child=ja(t,null,n,a)):Bt(e,t,n,a),t.memoizedState=s.state,e=t.child):e=wi(e,t,a),e}function km(e,t,n,i){return Ta(),t.flags|=256,Bt(e,t,n,i),t.child}var Wc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function eu(e){return{baseLanes:e,cachePool:dy()}}function tu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=vn),e}function ip(e,t,n){var i=t.pendingProps,a=!1,s=(t.flags&128)!==0,r;if((r=s)||(r=e!==null&&e.memoizedState===null?!1:(vt.current&2)!==0),r&&(a=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(Me){if(a?Ni(t):Ri(),(e=Fe)?(e=Qp(e,kn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Pi!==null?{id:Zn,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},n=ly(e),n.return=t,t.child=n,qt=t,Fe=null)):e=null,e===null)throw Zi(t);return Od(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,a?(Ri(),a=t.mode,l=Ao({mode:"hidden",children:l},a),i=_a(i,a,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,i=t.child,i.memoizedState=eu(n),i.childLanes=tu(e,r,n),t.memoizedState=Wc,or(null,i)):(Ni(t),md(t,l))}var o=e.memoizedState;if(o!==null&&(l=o.dehydrated,l!==null)){if(s)t.flags&256?(Ni(t),t.flags&=-257,t=nu(e,t,n)):t.memoizedState!==null?(Ri(),t.child=e.child,t.flags|=128,t=null):(Ri(),l=i.fallback,a=t.mode,i=Ao({mode:"visible",children:i.children},a),l=_a(l,a,n,null),l.flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,ja(t,e.child,null,n),i=t.child,i.memoizedState=eu(n),i.childLanes=tu(e,r,n),t.memoizedState=Wc,t=or(null,i));else if(Ni(t),Od(l)){if(r=l.nextSibling&&l.nextSibling.dataset,r)var u=r.dgst;r=u,i=Error(D(419)),i.stack="",i.digest=r,zr({value:i,source:null,stack:null}),t=nu(e,t,n)}else if(Tt||zs(e,t,n,!1),r=(n&e.childLanes)!==0,Tt||r){if(r=Ke,r!==null&&(i=Mv(r,n),i!==0&&i!==o.retryLane))throw o.retryLane=i,Ra(e,i),rn(r,e,i),zf;jd(l)||Ro(),t=nu(e,t,n)}else jd(l)?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,Fe=zn(l.nextSibling),qt=t,Me=!0,Ii=null,kn=!1,e!==null&&cy(t,e),t=md(t,i.children),t.flags|=4096);return t}return a?(Ri(),l=i.fallback,a=t.mode,o=e.child,u=o.sibling,i=gi(o,{mode:"hidden",children:i.children}),i.subtreeFlags=o.subtreeFlags&65011712,u!==null?l=gi(u,l):(l=_a(l,a,n,null),l.flags|=2),l.return=t,i.return=t,i.sibling=l,t.child=i,or(null,i),i=t.child,l=e.child.memoizedState,l===null?l=eu(n):(a=l.cachePool,a!==null?(o=xt._currentValue,a=a.parent!==o?{parent:o,pool:o}:a):a=dy(),l={baseLanes:l.baseLanes|n,cachePool:a}),i.memoizedState=l,i.childLanes=tu(e,r,n),t.memoizedState=Wc,or(e.child,i)):(Ni(t),n=e.child,e=n.sibling,n=gi(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function md(e,t){return t=Ao({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ao(e,t){return e=hn(22,e,null,t),e.lanes=0,e}function nu(e,t,n){return ja(t,e.child,null,n),e=md(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Um(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),td(e.return,t,n)}function iu(e,t,n,i,a,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a,treeForkCount:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=a,r.treeForkCount=s)}function ap(e,t,n){var i=t.pendingProps,a=i.revealOrder,s=i.tail;i=i.children;var r=vt.current,l=(r&2)!==0;if(l?(r=r&1|2,t.flags|=128):r&=1,Je(vt,r),Bt(e,t,i,n),i=Me?Ur:0,!l&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Um(e,n,t);else if(e.tag===19)Um(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&To(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),iu(t,!1,a,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&To(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}iu(t,!0,n,null,s,i);break;case"together":iu(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function wi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Wi|=t.lanes,!(n&t.childLanes))if(e!==null){if(zs(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=gi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Lf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&wo(e)))}function LS(e,t,n){switch(t.tag){case 3:mo(t,t.stateNode.containerInfo),Di(t,xt,e.memoizedState.cache),Ta();break;case 27:case 5:Iu(t);break;case 4:mo(t,t.stateNode.containerInfo);break;case 10:Di(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ld(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ni(t),t.flags|=128,null):n&t.child.childLanes?ip(e,t,n):(Ni(t),e=wi(e,t,n),e!==null?e.sibling:null);Ni(t);break;case 19:var a=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(zs(e,t,n,!1),i=(n&t.childLanes)!==0),a){if(i)return ap(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Je(vt,vt.current),i)break;return null;case 22:return t.lanes=0,np(e,t,n,t.pendingProps);case 24:Di(t,xt,e.memoizedState.cache)}return wi(e,t,n)}function sp(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Tt=!0;else{if(!Lf(e,n)&&!(t.flags&128))return Tt=!1,LS(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,Me&&t.flags&1048576&&oy(t,Ur,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=da(t.elementType),t.type=e,typeof e=="function")gf(e)?(i=Aa(e,i),t.tag=1,t=Mm(null,t,e,i,n)):(t.tag=0,t=hd(null,t,e,i,n));else{if(e!=null){var a=e.$$typeof;if(a===ef){t.tag=11,t=Am(null,t,e,i,n);break e}else if(a===tf){t.tag=14,t=Cm(null,t,e,i,n);break e}}throw t=qu(e)||e,Error(D(306,t,""))}}return t;case 0:return hd(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,a=Aa(i,t.pendingProps),Mm(e,t,i,a,n);case 3:e:{if(mo(t,t.stateNode.containerInfo),e===null)throw Error(D(387));i=t.pendingProps;var s=t.memoizedState;a=s.element,ad(e,t),pr(t,i,null,n);var r=t.memoizedState;if(i=r.cache,Di(t,xt,i),i!==s.cache&&nd(t,[xt],n,!0),yr(),i=r.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=km(e,t,i,n);break e}else if(i!==a){a=Mn(Error(D(424)),t),zr(a),t=km(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Fe=zn(e.firstChild),qt=t,Me=!0,Ii=null,kn=!0,n=my(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ta(),i===a){t=wi(e,t,n);break e}Bt(e,t,i,n)}t=t.child}return t;case 26:return so(e,t),e===null?(n=tg(t.type,null,t.pendingProps,null))?t.memoizedState=n:Me||(n=t.type,e=t.pendingProps,i=zo($i.current).createElement(n),i[Ht]=t,i[ln]=e,It(i,n,e),Mt(i),t.stateNode=i):t.memoizedState=tg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Iu(t),e===null&&Me&&(i=t.stateNode=Jp(t.type,t.pendingProps,$i.current),qt=t,kn=!0,a=Fe,na(t.type)?(Ad=a,Fe=zn(i.firstChild)):Fe=a),Bt(e,t,t.pendingProps.children,n),so(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Me&&((a=i=Fe)&&(i=hx(i,t.type,t.pendingProps,kn),i!==null?(t.stateNode=i,qt=t,Fe=zn(i.firstChild),kn=!1,a=!0):a=!1),a||Zi(t)),Iu(t),a=t.type,s=t.pendingProps,r=e!==null?e.memoizedProps:null,i=s.children,Td(a,s)?i=null:r!==null&&Td(a,r)&&(t.flags|=32),t.memoizedState!==null&&(a=Tf(e,t,AS,null,null,n),Ir._currentValue=a),so(e,t),Bt(e,t,i,n),t.child;case 6:return e===null&&Me&&((e=n=Fe)&&(n=mx(n,t.pendingProps,kn),n!==null?(t.stateNode=n,qt=t,Fe=null,e=!0):e=!1),e||Zi(t)),null;case 13:return ip(e,t,n);case 4:return mo(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=ja(t,null,i,n):Bt(e,t,i,n),t.child;case 11:return Am(e,t,t.type,t.pendingProps,n);case 7:return Bt(e,t,t.pendingProps,n),t.child;case 8:return Bt(e,t,t.pendingProps.children,n),t.child;case 12:return Bt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Di(t,t.type,i.value),Bt(e,t,i.children,n),t.child;case 9:return a=t.type._context,i=t.pendingProps.children,Ea(t),a=$t(a),i=i(a),t.flags|=1,Bt(e,t,i,n),t.child;case 14:return Cm(e,t,t.type,t.pendingProps,n);case 15:return tp(e,t,t.type,t.pendingProps,n);case 19:return ap(e,t,n);case 31:return zS(e,t,n);case 22:return np(e,t,n,t.pendingProps);case 24:return Ea(t),i=$t(xt),e===null?(a=bf(),a===null&&(a=Ke,s=pf(),a.pooledCache=s,s.refCount++,s!==null&&(a.pooledCacheLanes|=n),a=s),t.memoizedState={parent:i,cache:a},wf(t),Di(t,xt,a)):(e.lanes&n&&(ad(e,t),pr(t,null,null,n),yr()),a=e.memoizedState,s=t.memoizedState,a.parent!==i?(a={parent:i,cache:i},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Di(t,xt,i)):(i=s.cache,Di(t,xt,i),i!==a.cache&&nd(t,[xt],n,!0))),Bt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(D(156,t.tag))}function ai(e){e.flags|=4}function au(e,t,n,i,a){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(a&335544128)===a)if(e.stateNode.complete)e.flags|=8192;else if(Cp())e.flags|=8192;else throw Sa=So,_f}else e.flags&=-16777217}function zm(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Fp(t))if(Cp())e.flags|=8192;else throw Sa=So,_f}function Ml(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Dv():536870912,e.lanes|=t,Es|=t)}function er(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&65011712,i|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function BS(e,t,n){var i=t.pendingProps;switch(yf(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return Ze(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),vi(xt),bs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ba(t)?ai(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jc())),Ze(t),null;case 26:var a=t.type,s=t.memoizedState;return e===null?(ai(t),s!==null?(Ze(t),zm(t,s)):(Ze(t),au(t,a,null,i,n))):s?s!==e.memoizedState?(ai(t),Ze(t),zm(t,s)):(Ze(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&ai(t),Ze(t),au(t,a,e,i,n)),null;case 27:if(go(t),n=$i.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ai(t);else{if(!i){if(t.stateNode===null)throw Error(D(166));return Ze(t),null}e=ei.current,Ba(t)?dm(t):(e=Jp(a,i,n),t.stateNode=e,ai(t))}return Ze(t),null;case 5:if(go(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ai(t);else{if(!i){if(t.stateNode===null)throw Error(D(166));return Ze(t),null}if(s=ei.current,Ba(t))dm(t);else{var r=zo($i.current);switch(s){case 1:s=r.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:s=r.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":s=r.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":s=r.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":s=r.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?r.createElement(a,{is:i.is}):r.createElement(a)}}s[Ht]=t,s[ln]=i;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=s;e:switch(It(s,a,i),a){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ai(t)}}return Ze(t),au(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&ai(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(D(166));if(e=$i.current,Ba(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,a=qt,a!==null)switch(a.tag){case 27:case 5:i=a.memoizedProps}e[Ht]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Gp(e.nodeValue,n)),e||Zi(t,!0)}else e=zo(e).createTextNode(i),e[Ht]=t,t.stateNode=e}return Ze(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=Ba(t),n!==null){if(e===null){if(!i)throw Error(D(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(557));e[Ht]=t}else Ta(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),e=!1}else n=Jc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(fn(t),t):(fn(t),null);if(t.flags&128)throw Error(D(558))}return Ze(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Ba(t),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(D(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(D(317));a[Ht]=t}else Ta(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),a=!1}else a=Jc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(fn(t),t):(fn(t),null)}return fn(t),t.flags&128?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,a=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(a=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==a&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Ml(t,t.updateQueue),Ze(t),null);case 4:return bs(),e===null&&Yf(t.stateNode.containerInfo),Ze(t),null;case 10:return vi(t.type),Ze(t),null;case 19:if(kt(vt),i=t.memoizedState,i===null)return Ze(t),null;if(a=(t.flags&128)!==0,s=i.rendering,s===null)if(a)er(i,!1);else{if(ft!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=To(e),s!==null){for(t.flags|=128,er(i,!1),e=s.updateQueue,t.updateQueue=e,Ml(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ry(n,e),n=n.sibling;return Je(vt,vt.current&1|2),Me&&ui(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&yn()>Do&&(t.flags|=128,a=!0,er(i,!1),t.lanes=4194304)}else{if(!a)if(e=To(s),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Ml(t,e),er(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Me)return Ze(t),null}else 2*yn()-i.renderingStartTime>Do&&n!==536870912&&(t.flags|=128,a=!0,er(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(e=i.last,e!==null?e.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yn(),e.sibling=null,n=vt.current,Je(vt,a?n&1|2:n&1),Me&&ui(t,i.treeForkCount),e):(Ze(t),null);case 22:case 23:return fn(t),Sf(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),n=t.updateQueue,n!==null&&Ml(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&kt(wa),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),vi(xt),Ze(t),null;case 25:return null;case 30:return null}throw Error(D(156,t.tag))}function HS(e,t){switch(yf(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vi(xt),bs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return go(t),null;case 31:if(t.memoizedState!==null){if(fn(t),t.alternate===null)throw Error(D(340));Ta()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(fn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Ta()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return kt(vt),null;case 4:return bs(),null;case 10:return vi(t.type),null;case 22:case 23:return fn(t),Sf(),e!==null&&kt(wa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return vi(xt),null;case 25:return null;default:return null}}function rp(e,t){switch(yf(t),t.tag){case 3:vi(xt),bs();break;case 26:case 27:case 5:go(t);break;case 4:bs();break;case 31:t.memoizedState!==null&&fn(t);break;case 13:fn(t);break;case 19:kt(vt);break;case 10:vi(t.type);break;case 22:case 23:fn(t),Sf(),e!==null&&kt(wa);break;case 24:vi(xt)}}function al(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var a=i.next;n=a;do{if((n.tag&e)===e){i=void 0;var s=n.create,r=n.inst;i=s(),r.destroy=i}n=n.next}while(n!==a)}}catch(l){Ie(t,t.return,l)}}function Fi(e,t,n){try{var i=t.updateQueue,a=i!==null?i.lastEffect:null;if(a!==null){var s=a.next;i=s;do{if((i.tag&e)===e){var r=i.inst,l=r.destroy;if(l!==void 0){r.destroy=void 0,a=t;var o=n,u=l;try{u()}catch(d){Ie(a,o,d)}}}i=i.next}while(i!==s)}}catch(d){Ie(t,t.return,d)}}function lp(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{vy(t,n)}catch(i){Ie(e,e.return,i)}}}function op(e,t,n){n.props=Aa(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){Ie(e,t,i)}}function _r(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(a){Ie(e,t,a)}}function Wn(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(a){Ie(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){Ie(e,t,a)}else n.current=null}function cp(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(a){Ie(e,e.return,a)}}function su(e,t,n){try{var i=e.stateNode;lx(i,e.type,n,t),i[ln]=t}catch(a){Ie(e,e.return,a)}}function up(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&na(e.type)||e.tag===4}function ru(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||up(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&na(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=hi));else if(i!==4&&(i===27&&na(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(gd(e,t,n),e=e.sibling;e!==null;)gd(e,t,n),e=e.sibling}function Co(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&na(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Co(e,t,n),e=e.sibling;e!==null;)Co(e,t,n),e=e.sibling}function dp(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);It(t,i,n),t[Ht]=e,t[ln]=n}catch(s){Ie(e,e.return,s)}}var di=!1,St=!1,lu=!1,Lm=typeof WeakSet=="function"?WeakSet:Set,Nt=null;function qS(e,t){if(e=e.containerInfo,Sd=qo,e=Fv(e),ff(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var r=0,l=-1,o=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(l=r+a),f!==s||i!==0&&f.nodeType!==3||(o=r+i),f.nodeType===3&&(r+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++u===a&&(l=r),h===s&&++d===i&&(o=r),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=l===-1||o===-1?null:{start:l,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(xd={focusedElem:e,selectionRange:n},qo=!1,Nt=t;Nt!==null;)if(t=Nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Nt=e;else for(;Nt!==null;){switch(t=Nt,s=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,a=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var v=Aa(n.type,a);e=i.getSnapshotBeforeUpdate(v,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(b){Ie(n,n.return,b)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Ed(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ed(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(D(163))}if(e=t.sibling,e!==null){e.return=t.return,Nt=e;break}Nt=t.return}}function fp(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:ri(e,n),i&4&&al(5,n);break;case 1:if(ri(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(r){Ie(n,n.return,r)}else{var a=Aa(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){Ie(n,n.return,r)}}i&64&&lp(n),i&512&&_r(n,n.return);break;case 3:if(ri(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{vy(e,t)}catch(r){Ie(n,n.return,r)}}break;case 27:t===null&&i&4&&dp(n);case 26:case 5:ri(e,n),t===null&&i&4&&cp(n),i&512&&_r(n,n.return);break;case 12:ri(e,n);break;case 31:ri(e,n),i&4&&gp(e,n);break;case 13:ri(e,n),i&4&&vp(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=JS.bind(null,n),gx(e,n))));break;case 22:if(i=n.memoizedState!==null||di,!i){t=t!==null&&t.memoizedState!==null||St,a=di;var s=St;di=i,(St=t)&&!s?oi(e,n,(n.subtreeFlags&8772)!==0):ri(e,n),di=a,St=s}break;case 30:break;default:ri(e,n)}}function hp(e){var t=e.alternate;t!==null&&(e.alternate=null,hp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&rf(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var it=null,an=!1;function si(e,t,n){for(n=n.child;n!==null;)mp(e,t,n),n=n.sibling}function mp(e,t,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Zr,n)}catch{}switch(n.tag){case 26:St||Wn(n,t),si(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:St||Wn(n,t);var i=it,a=an;na(n.type)&&(it=n.stateNode,an=!1),si(e,t,n),Tr(n.stateNode),it=i,an=a;break;case 5:St||Wn(n,t);case 6:if(i=it,a=an,it=null,si(e,t,n),it=i,an=a,it!==null)if(an)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(n.stateNode)}catch(s){Ie(n,t,s)}else try{it.removeChild(n.stateNode)}catch(s){Ie(n,t,s)}break;case 18:it!==null&&(an?(e=it,Pm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Cs(e)):Pm(it,n.stateNode));break;case 4:i=it,a=an,it=n.stateNode.containerInfo,an=!0,si(e,t,n),it=i,an=a;break;case 0:case 11:case 14:case 15:Fi(2,n,t),St||Fi(4,n,t),si(e,t,n);break;case 1:St||(Wn(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&op(n,t,i)),si(e,t,n);break;case 21:si(e,t,n);break;case 22:St=(i=St)||n.memoizedState!==null,si(e,t,n),St=i;break;default:si(e,t,n)}}function gp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Cs(e)}catch(n){Ie(t,t.return,n)}}}function vp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Cs(e)}catch(n){Ie(t,t.return,n)}}function $S(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Lm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Lm),t;default:throw Error(D(435,e.tag))}}function kl(e,t){var n=$S(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var a=PS.bind(null,e,i);i.then(a,a)}})}function tn(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i],s=e,r=t,l=r;e:for(;l!==null;){switch(l.tag){case 27:if(na(l.type)){it=l.stateNode,an=!1;break e}break;case 5:it=l.stateNode,an=!1;break e;case 3:case 4:it=l.stateNode.containerInfo,an=!0;break e}l=l.return}if(it===null)throw Error(D(160));mp(s,r,a),it=null,an=!1,s=a.alternate,s!==null&&(s.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)yp(t,e),t=t.sibling}var Vn=null;function yp(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:tn(t,e),nn(e),i&4&&(Fi(3,e,e.return),al(3,e),Fi(5,e,e.return));break;case 1:tn(t,e),nn(e),i&512&&(St||n===null||Wn(n,n.return)),i&64&&di&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var a=Vn;if(tn(t,e),nn(e),i&512&&(St||n===null||Wn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(i){case"title":s=a.getElementsByTagName("title")[0],(!s||s[el]||s[Ht]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=a.createElement(i),a.head.insertBefore(s,a.querySelector("head > title"))),It(s,i,n),s[Ht]=e,Mt(s),i=s;break e;case"link":var r=ig("link","href",a).get(i+(n.href||""));if(r){for(var l=0;l<r.length;l++)if(s=r[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(l,1);break t}}s=a.createElement(i),It(s,i,n),a.head.appendChild(s);break;case"meta":if(r=ig("meta","content",a).get(i+(n.content||""))){for(l=0;l<r.length;l++)if(s=r[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(l,1);break t}}s=a.createElement(i),It(s,i,n),a.head.appendChild(s);break;default:throw Error(D(468,i))}s[Ht]=e,Mt(s),i=s}e.stateNode=i}else ag(a,e.type,e.stateNode);else e.stateNode=ng(a,i,e.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?ag(a,e.type,e.stateNode):ng(a,i,e.memoizedProps)):i===null&&e.stateNode!==null&&su(e,e.memoizedProps,n.memoizedProps)}break;case 27:tn(t,e),nn(e),i&512&&(St||n===null||Wn(n,n.return)),n!==null&&i&4&&su(e,e.memoizedProps,n.memoizedProps);break;case 5:if(tn(t,e),nn(e),i&512&&(St||n===null||Wn(n,n.return)),e.flags&32){a=e.stateNode;try{ws(a,"")}catch(v){Ie(e,e.return,v)}}i&4&&e.stateNode!=null&&(a=e.memoizedProps,su(e,a,n!==null?n.memoizedProps:a)),i&1024&&(lu=!0);break;case 6:if(tn(t,e),nn(e),i&4){if(e.stateNode===null)throw Error(D(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(v){Ie(e,e.return,v)}}break;case 3:if(oo=null,a=Vn,Vn=Lo(t.containerInfo),tn(t,e),Vn=a,nn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Cs(t.containerInfo)}catch(v){Ie(e,e.return,v)}lu&&(lu=!1,pp(e));break;case 4:i=Vn,Vn=Lo(e.stateNode.containerInfo),tn(t,e),nn(e),Vn=i;break;case 12:tn(t,e),nn(e);break;case 31:tn(t,e),nn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,kl(e,i)));break;case 13:tn(t,e),nn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(mc=yn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,kl(e,i)));break;case 22:a=e.memoizedState!==null;var o=n!==null&&n.memoizedState!==null,u=di,d=St;if(di=u||a,St=d||o,tn(t,e),St=d,di=u,nn(e),i&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||o||di||St||fa(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){o=n=t;try{if(s=o.stateNode,a)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{l=o.stateNode;var f=o.memoizedProps.style,h=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(v){Ie(o,o.return,v)}}}else if(t.tag===6){if(n===null){o=t;try{o.stateNode.nodeValue=a?"":o.memoizedProps}catch(v){Ie(o,o.return,v)}}}else if(t.tag===18){if(n===null){o=t;try{var m=o.stateNode;a?Zm(m,!0):Zm(o.stateNode,!1)}catch(v){Ie(o,o.return,v)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,kl(e,n))));break;case 19:tn(t,e),nn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,kl(e,i)));break;case 30:break;case 21:break;default:tn(t,e),nn(e)}}function nn(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(up(i)){n=i;break}i=i.return}if(n==null)throw Error(D(160));switch(n.tag){case 27:var a=n.stateNode,s=ru(e);Co(e,s,a);break;case 5:var r=n.stateNode;n.flags&32&&(ws(r,""),n.flags&=-33);var l=ru(e);Co(e,l,r);break;case 3:case 4:var o=n.stateNode.containerInfo,u=ru(e);gd(e,u,o);break;default:throw Error(D(161))}}catch(d){Ie(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;pp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ri(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)fp(e,t.alternate,t),t=t.sibling}function fa(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Fi(4,t,t.return),fa(t);break;case 1:Wn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&op(t,t.return,n),fa(t);break;case 27:Tr(t.stateNode);case 26:case 5:Wn(t,t.return),fa(t);break;case 22:t.memoizedState===null&&fa(t);break;case 30:fa(t);break;default:fa(t)}e=e.sibling}}function oi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,a=e,s=t,r=s.flags;switch(s.tag){case 0:case 11:case 15:oi(a,s,n),al(4,s);break;case 1:if(oi(a,s,n),i=s,a=i.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(u){Ie(i,i.return,u)}if(i=s,a=i.updateQueue,a!==null){var l=i.stateNode;try{var o=a.shared.hiddenCallbacks;if(o!==null)for(a.shared.hiddenCallbacks=null,a=0;a<o.length;a++)gy(o[a],l)}catch(u){Ie(i,i.return,u)}}n&&r&64&&lp(s),_r(s,s.return);break;case 27:dp(s);case 26:case 5:oi(a,s,n),n&&i===null&&r&4&&cp(s),_r(s,s.return);break;case 12:oi(a,s,n);break;case 31:oi(a,s,n),n&&r&4&&gp(a,s);break;case 13:oi(a,s,n),n&&r&4&&vp(a,s);break;case 22:s.memoizedState===null&&oi(a,s,n),_r(s,s.return);break;case 30:break;default:oi(a,s,n)}t=t.sibling}}function Bf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&nl(n))}function Hf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e))}function Hn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)bp(e,t,n,i),t=t.sibling}function bp(e,t,n,i){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Hn(e,t,n,i),a&2048&&al(9,t);break;case 1:Hn(e,t,n,i);break;case 3:Hn(e,t,n,i),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&nl(e)));break;case 12:if(a&2048){Hn(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,r=s.id,l=s.onPostCommit;typeof l=="function"&&l(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(o){Ie(t,t.return,o)}}else Hn(e,t,n,i);break;case 31:Hn(e,t,n,i);break;case 13:Hn(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,r=t.alternate,t.memoizedState!==null?s._visibility&2?Hn(e,t,n,i):wr(e,t):s._visibility&2?Hn(e,t,n,i):(s._visibility|=2,Xa(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),a&2048&&Bf(r,t);break;case 24:Hn(e,t,n,i),a&2048&&Hf(t.alternate,t);break;default:Hn(e,t,n,i)}}function Xa(e,t,n,i,a){for(a=a&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,r=t,l=n,o=i,u=r.flags;switch(r.tag){case 0:case 11:case 15:Xa(s,r,l,o,a),al(8,r);break;case 23:break;case 22:var d=r.stateNode;r.memoizedState!==null?d._visibility&2?Xa(s,r,l,o,a):wr(s,r):(d._visibility|=2,Xa(s,r,l,o,a)),a&&u&2048&&Bf(r.alternate,r);break;case 24:Xa(s,r,l,o,a),a&&u&2048&&Hf(r.alternate,r);break;default:Xa(s,r,l,o,a)}t=t.sibling}}function wr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,a=i.flags;switch(i.tag){case 22:wr(n,i),a&2048&&Bf(i.alternate,i);break;case 24:wr(n,i),a&2048&&Hf(i.alternate,i);break;default:wr(n,i)}t=t.sibling}}var cr=8192;function Ha(e,t,n){if(e.subtreeFlags&cr)for(e=e.child;e!==null;)_p(e,t,n),e=e.sibling}function _p(e,t,n){switch(e.tag){case 26:Ha(e,t,n),e.flags&cr&&e.memoizedState!==null&&Ox(n,Vn,e.memoizedState,e.memoizedProps);break;case 5:Ha(e,t,n);break;case 3:case 4:var i=Vn;Vn=Lo(e.stateNode.containerInfo),Ha(e,t,n),Vn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=cr,cr=16777216,Ha(e,t,n),cr=i):Ha(e,t,n));break;default:Ha(e,t,n)}}function wp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function tr(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Nt=i,xp(i,e)}wp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Sp(e),e=e.sibling}function Sp(e){switch(e.tag){case 0:case 11:case 15:tr(e),e.flags&2048&&Fi(9,e,e.return);break;case 3:tr(e);break;case 12:tr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ro(e)):tr(e);break;default:tr(e)}}function ro(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Nt=i,xp(i,e)}wp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Fi(8,t,t.return),ro(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ro(t));break;default:ro(t)}e=e.sibling}}function xp(e,t){for(;Nt!==null;){var n=Nt;switch(n.tag){case 0:case 11:case 15:Fi(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:nl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Nt=i;else e:for(n=e;Nt!==null;){i=Nt;var a=i.sibling,s=i.return;if(hp(i),i===n){Nt=null;break e}if(a!==null){a.return=s,Nt=a;break e}Nt=s}}}var IS={getCacheForType:function(e){var t=$t(xt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return $t(xt).controller.signal}},VS=typeof WeakMap=="function"?WeakMap:Map,Be=0,Ke=null,Ce=null,Ne=0,$e=0,dn=null,Li=!1,Bs=!1,qf=!1,Si=0,ft=0,Wi=0,xa=0,$f=0,vn=0,Es=0,Sr=null,sn=null,vd=!1,mc=0,Tp=0,Do=1/0,No=null,Gi=null,At=0,Ki=null,js=null,yi=0,yd=0,pd=null,Ep=null,xr=0,bd=null;function _n(){return Be&2&&Ne!==0?Ne&-Ne:he.T!==null?Vf():kv()}function jp(){if(vn===0)if(!(Ne&536870912)||Me){var e=jl;jl<<=1,!(jl&3932160)&&(jl=262144),vn=e}else vn=536870912;return e=Sn.current,e!==null&&(e.flags|=32),vn}function rn(e,t,n){(e===Ke&&($e===2||$e===9)||e.cancelPendingCommit!==null)&&(Os(e,0),Bi(e,Ne,vn,!1)),Wr(e,n),(!(Be&2)||e!==Ke)&&(e===Ke&&(!(Be&2)&&(xa|=n),ft===4&&Bi(e,Ne,vn,!1)),ni(e))}function Op(e,t,n){if(Be&6)throw Error(D(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Fr(e,t),a=i?KS(e,t):ou(e,t,!0),s=i;do{if(a===0){Bs&&!i&&Bi(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!YS(n)){a=ou(e,t,!1),s=!1;continue}if(a===2){if(s=t,e.errorRecoveryDisabledLanes&s)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;e:{var l=e;a=Sr;var o=l.current.memoizedState.isDehydrated;if(o&&(Os(l,r).flags|=256),r=ou(l,r,!1),r!==2){if(qf&&!o){l.errorRecoveryDisabledLanes|=s,xa|=s,a=4;break e}s=sn,sn=a,s!==null&&(sn===null?sn=s:sn.push.apply(sn,s))}a=r}if(s=!1,a!==2)continue}}if(a===1){Os(e,0),Bi(e,t,0,!0);break}e:{switch(i=e,s=a,s){case 0:case 1:throw Error(D(345));case 4:if((t&4194048)!==t)break;case 6:Bi(i,t,vn,!Li);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(D(329))}if((t&62914560)===t&&(a=mc+300-yn(),10<a)){if(Bi(i,t,vn,!Li),ic(i,0,!0)!==0)break e;yi=t,i.timeoutHandle=Xp(Bm.bind(null,i,n,sn,No,vd,t,vn,xa,Es,Li,s,"Throttled",-0,0),a);break e}Bm(i,n,sn,No,vd,t,vn,xa,Es,Li,s,null,-0,0)}}break}while(!0);ni(e)}function Bm(e,t,n,i,a,s,r,l,o,u,d,f,h,m){if(e.timeoutHandle=-1,f=t.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},_p(t,s,f);var v=(s&62914560)===s?mc-yn():(s&4194048)===s?Tp-yn():0;if(v=Ax(f,v),v!==null){yi=s,e.cancelPendingCommit=v(qm.bind(null,e,t,s,n,i,a,r,l,o,d,f,null,h,m)),Bi(e,s,r,!u);return}}qm(e,t,s,n,i,a,r,l,o)}function YS(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var a=n[i],s=a.getSnapshot;a=a.value;try{if(!wn(s(),a))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bi(e,t,n,i){t&=~$f,t&=~xa,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var a=t;0<a;){var s=31-bn(a),r=1<<s;i[s]=-1,a&=~r}n!==0&&Nv(e,n,t)}function gc(){return Be&6?!0:(sl(0),!1)}function If(){if(Ce!==null){if($e===0)var e=Ce.return;else e=Ce,mi=Ma=null,Of(e),ms=null,Lr=0,e=Ce;for(;e!==null;)rp(e.alternate,e),e=e.return;Ce=null}}function Os(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,ux(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),yi=0,If(),Ke=e,Ce=n=gi(e.current,null),Ne=t,$e=0,dn=null,Li=!1,Bs=Fr(e,t),qf=!1,Es=vn=$f=xa=Wi=ft=0,sn=Sr=null,vd=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var a=31-bn(i),s=1<<a;t|=e[a],i&=~s}return Si=t,lc(),n}function Ap(e,t){be=null,he.H=Hr,t===Ls||t===cc?(t=vm(),$e=3):t===_f?(t=vm(),$e=4):$e=t===zf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,dn=t,Ce===null&&(ft=1,Oo(e,Mn(t,e.current)))}function Cp(){var e=Sn.current;return e===null?!0:(Ne&4194048)===Ne?Un===null:(Ne&62914560)===Ne||Ne&536870912?e===Un:!1}function Dp(){var e=he.H;return he.H=Hr,e===null?Hr:e}function Np(){var e=he.A;return he.A=IS,e}function Ro(){ft=4,Li||(Ne&4194048)!==Ne&&Sn.current!==null||(Bs=!0),!(Wi&134217727)&&!(xa&134217727)||Ke===null||Bi(Ke,Ne,vn,!1)}function ou(e,t,n){var i=Be;Be|=2;var a=Dp(),s=Np();(Ke!==e||Ne!==t)&&(No=null,Os(e,t)),t=!1;var r=ft;e:do try{if($e!==0&&Ce!==null){var l=Ce,o=dn;switch($e){case 8:If(),r=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(t=!0);var u=$e;if($e=0,dn=null,cs(e,l,o,u),n&&Bs){r=0;break e}break;default:u=$e,$e=0,dn=null,cs(e,l,o,u)}}GS(),r=ft;break}catch(d){Ap(e,d)}while(!0);return t&&e.shellSuspendCounter++,mi=Ma=null,Be=i,he.H=a,he.A=s,Ce===null&&(Ke=null,Ne=0,lc()),r}function GS(){for(;Ce!==null;)Rp(Ce)}function KS(e,t){var n=Be;Be|=2;var i=Dp(),a=Np();Ke!==e||Ne!==t?(No=null,Do=yn()+500,Os(e,t)):Bs=Fr(e,t);e:do try{if($e!==0&&Ce!==null){t=Ce;var s=dn;t:switch($e){case 1:$e=0,dn=null,cs(e,t,s,1);break;case 2:case 9:if(gm(s)){$e=0,dn=null,Hm(t);break}t=function(){$e!==2&&$e!==9||Ke!==e||($e=7),ni(e)},s.then(t,t);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:gm(s)?($e=0,dn=null,Hm(t)):($e=0,dn=null,cs(e,t,s,7));break;case 5:var r=null;switch(Ce.tag){case 26:r=Ce.memoizedState;case 5:case 27:var l=Ce;if(r?Fp(r):l.stateNode.complete){$e=0,dn=null;var o=l.sibling;if(o!==null)Ce=o;else{var u=l.return;u!==null?(Ce=u,vc(u)):Ce=null}break t}}$e=0,dn=null,cs(e,t,s,5);break;case 6:$e=0,dn=null,cs(e,t,s,6);break;case 8:If(),ft=6;break e;default:throw Error(D(462))}}XS();break}catch(d){Ap(e,d)}while(!0);return mi=Ma=null,he.H=i,he.A=a,Be=n,Ce!==null?0:(Ke=null,Ne=0,lc(),ft)}function XS(){for(;Ce!==null&&!vw();)Rp(Ce)}function Rp(e){var t=sp(e.alternate,e,Si);e.memoizedProps=e.pendingProps,t===null?vc(e):Ce=t}function Hm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Rm(n,t,t.pendingProps,t.type,void 0,Ne);break;case 11:t=Rm(n,t,t.pendingProps,t.type.render,t.ref,Ne);break;case 5:Of(t);default:rp(n,t),t=Ce=ry(t,Si),t=sp(n,t,Si)}e.memoizedProps=e.pendingProps,t===null?vc(e):Ce=t}function cs(e,t,n,i){mi=Ma=null,Of(t),ms=null,Lr=0;var a=t.return;try{if(US(e,a,t,n,Ne)){ft=1,Oo(e,Mn(n,e.current)),Ce=null;return}}catch(s){if(a!==null)throw Ce=a,s;ft=1,Oo(e,Mn(n,e.current)),Ce=null;return}t.flags&32768?(Me||i===1?e=!0:Bs||Ne&536870912?e=!1:(Li=e=!0,(i===2||i===9||i===3||i===6)&&(i=Sn.current,i!==null&&i.tag===13&&(i.flags|=16384))),Mp(t,e)):vc(t)}function vc(e){var t=e;do{if(t.flags&32768){Mp(t,Li);return}e=t.return;var n=BS(t.alternate,t,Si);if(n!==null){Ce=n;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);ft===0&&(ft=5)}function Mp(e,t){do{var n=HS(e.alternate,e);if(n!==null){n.flags&=32767,Ce=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ce=e;return}Ce=e=n}while(e!==null);ft=6,Ce=null}function qm(e,t,n,i,a,s,r,l,o){e.cancelPendingCommit=null;do yc();while(At!==0);if(Be&6)throw Error(D(327));if(t!==null){if(t===e.current)throw Error(D(177));if(s=t.lanes|t.childLanes,s|=hf,jw(e,n,s,r,l,o),e===Ke&&(Ce=Ke=null,Ne=0),js=t,Ki=e,yi=n,yd=s,pd=a,Ep=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,ZS(vo,function(){return Bp(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=he.T,he.T=null,a=He.p,He.p=2,r=Be,Be|=4;try{qS(e,t,n)}finally{Be=r,He.p=a,he.T=i}}At=1,kp(),Up(),zp()}}function kp(){if(At===1){At=0;var e=Ki,t=js,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=he.T,he.T=null;var i=He.p;He.p=2;var a=Be;Be|=4;try{yp(t,e);var s=xd,r=Fv(e.containerInfo),l=s.focusedElem,o=s.selectionRange;if(r!==l&&l&&l.ownerDocument&&Zv(l.ownerDocument.documentElement,l)){if(o!==null&&ff(l)){var u=o.start,d=o.end;if(d===void 0&&(d=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(d,l.value.length);else{var f=l.ownerDocument||document,h=f&&f.defaultView||window;if(h.getSelection){var m=h.getSelection(),v=l.textContent.length,b=Math.min(o.start,v),w=o.end===void 0?b:Math.min(o.end,v);!m.extend&&b>w&&(r=w,w=b,b=r);var p=om(l,b),g=om(l,w);if(p&&g&&(m.rangeCount!==1||m.anchorNode!==p.node||m.anchorOffset!==p.offset||m.focusNode!==g.node||m.focusOffset!==g.offset)){var y=f.createRange();y.setStart(p.node,p.offset),m.removeAllRanges(),b>w?(m.addRange(y),m.extend(g.node,g.offset)):(y.setEnd(g.node,g.offset),m.addRange(y))}}}}for(f=[],m=l;m=m.parentNode;)m.nodeType===1&&f.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var S=f[l];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}qo=!!Sd,xd=Sd=null}finally{Be=a,He.p=i,he.T=n}}e.current=t,At=2}}function Up(){if(At===2){At=0;var e=Ki,t=js,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=he.T,he.T=null;var i=He.p;He.p=2;var a=Be;Be|=4;try{fp(e,t.alternate,t)}finally{Be=a,He.p=i,he.T=n}}At=3}}function zp(){if(At===4||At===3){At=0,yw();var e=Ki,t=js,n=yi,i=Ep;t.subtreeFlags&10256||t.flags&10256?At=5:(At=0,js=Ki=null,Lp(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(Gi=null),sf(n),t=t.stateNode,pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Zr,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=he.T,a=He.p,He.p=2,he.T=null;try{for(var s=e.onRecoverableError,r=0;r<i.length;r++){var l=i[r];s(l.value,{componentStack:l.stack})}}finally{he.T=t,He.p=a}}yi&3&&yc(),ni(e),a=e.pendingLanes,n&261930&&a&42?e===bd?xr++:(xr=0,bd=e):xr=0,sl(0)}}function Lp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,nl(t)))}function yc(){return kp(),Up(),zp(),Bp()}function Bp(){if(At!==5)return!1;var e=Ki,t=yd;yd=0;var n=sf(yi),i=he.T,a=He.p;try{He.p=32>n?32:n,he.T=null,n=pd,pd=null;var s=Ki,r=yi;if(At=0,js=Ki=null,yi=0,Be&6)throw Error(D(331));var l=Be;if(Be|=4,Sp(s.current),bp(s,s.current,r,n),Be=l,sl(0,!1),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Zr,s)}catch{}return!0}finally{He.p=a,he.T=i,Lp(e,t)}}function $m(e,t,n){t=Mn(n,t),t=fd(e.stateNode,t,2),e=Yi(e,t,2),e!==null&&(Wr(e,2),ni(e))}function Ie(e,t,n){if(e.tag===3)$m(e,e,n);else for(;t!==null;){if(t.tag===3){$m(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Gi===null||!Gi.has(i))){e=Mn(n,e),n=Wy(2),i=Yi(t,n,2),i!==null&&(ep(n,i,t,e),Wr(i,2),ni(i));break}}t=t.return}}function cu(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new VS;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(qf=!0,a.add(n),e=QS.bind(null,e,t,n),t.then(e,e))}function QS(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ke===e&&(Ne&n)===n&&(ft===4||ft===3&&(Ne&62914560)===Ne&&300>yn()-mc?!(Be&2)&&Os(e,0):$f|=n,Es===Ne&&(Es=0)),ni(e)}function Hp(e,t){t===0&&(t=Dv()),e=Ra(e,t),e!==null&&(Wr(e,t),ni(e))}function JS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Hp(e,n)}function PS(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(D(314))}i!==null&&i.delete(t),Hp(e,n)}function ZS(e,t){return nf(e,t)}var Mo=null,Qa=null,_d=!1,ko=!1,uu=!1,Hi=0;function ni(e){e!==Qa&&e.next===null&&(Qa===null?Mo=Qa=e:Qa=Qa.next=e),ko=!0,_d||(_d=!0,WS())}function sl(e,t){if(!uu&&ko){uu=!0;do for(var n=!1,i=Mo;i!==null;){if(e!==0){var a=i.pendingLanes;if(a===0)var s=0;else{var r=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-bn(42|e)+1)-1,s&=a&~(r&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Im(i,s))}else s=Ne,s=ic(i,i===Ke?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Fr(i,s)||(n=!0,Im(i,s));i=i.next}while(n);uu=!1}}function FS(){qp()}function qp(){ko=_d=!1;var e=0;Hi!==0&&cx()&&(e=Hi);for(var t=yn(),n=null,i=Mo;i!==null;){var a=i.next,s=$p(i,t);s===0?(i.next=null,n===null?Mo=a:n.next=a,a===null&&(Qa=n)):(n=i,(e!==0||s&3)&&(ko=!0)),i=a}At!==0&&At!==5||sl(e),Hi!==0&&(Hi=0)}function $p(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var r=31-bn(s),l=1<<r,o=a[r];o===-1?(!(l&n)||l&i)&&(a[r]=Ew(l,t)):o<=t&&(e.expiredLanes|=l),s&=~l}if(t=Ke,n=Ne,n=ic(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&($e===2||$e===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Bc(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Fr(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Bc(i),sf(n)){case 2:case 8:n=Av;break;case 32:n=vo;break;case 268435456:n=Cv;break;default:n=vo}return i=Ip.bind(null,e),n=nf(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Bc(i),e.callbackPriority=2,e.callbackNode=null,2}function Ip(e,t){if(At!==0&&At!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(yc()&&e.callbackNode!==n)return null;var i=Ne;return i=ic(e,e===Ke?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Op(e,i,t),$p(e,yn()),e.callbackNode!=null&&e.callbackNode===n?Ip.bind(null,e):null)}function Im(e,t){if(yc())return null;Op(e,t,!0)}function WS(){dx(function(){Be&6?nf(Ov,FS):qp()})}function Vf(){if(Hi===0){var e=Ss;e===0&&(e=El,El<<=1,!(El&261888)&&(El=256)),Hi=e}return Hi}function Vm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Zl(""+e)}function Ym(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function ex(e,t,n,i,a){if(t==="submit"&&n&&n.stateNode===a){var s=Vm((a[ln]||null).action),r=i.submitter;r&&(t=(t=r[ln]||null)?Vm(t.formAction):r.getAttribute("formAction"),t!==null&&(s=t,r=null));var l=new ac("action","action",null,i,a);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Hi!==0){var o=r?Ym(a,r):new FormData(a);ud(n,{pending:!0,data:o,method:a.method,action:s},null,o)}}else typeof s=="function"&&(l.preventDefault(),o=r?Ym(a,r):new FormData(a),ud(n,{pending:!0,data:o,method:a.method,action:s},s,o))},currentTarget:a}]})}}for(var du=0;du<Fu.length;du++){var fu=Fu[du],tx=fu.toLowerCase(),nx=fu[0].toUpperCase()+fu.slice(1);Xn(tx,"on"+nx)}Xn(ey,"onAnimationEnd");Xn(ty,"onAnimationIteration");Xn(ny,"onAnimationStart");Xn("dblclick","onDoubleClick");Xn("focusin","onFocus");Xn("focusout","onBlur");Xn(pS,"onTransitionRun");Xn(bS,"onTransitionStart");Xn(_S,"onTransitionCancel");Xn(iy,"onTransitionEnd");_s("onMouseEnter",["mouseout","mouseover"]);_s("onMouseLeave",["mouseout","mouseover"]);_s("onPointerEnter",["pointerout","pointerover"]);_s("onPointerLeave",["pointerout","pointerover"]);Ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ca("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ix=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qr));function Vp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var r=i.length-1;0<=r;r--){var l=i[r],o=l.instance,u=l.currentTarget;if(l=l.listener,o!==s&&a.isPropagationStopped())break e;s=l,a.currentTarget=u;try{s(a)}catch(d){po(d)}a.currentTarget=null,s=o}else for(r=0;r<i.length;r++){if(l=i[r],o=l.instance,u=l.currentTarget,l=l.listener,o!==s&&a.isPropagationStopped())break e;s=l,a.currentTarget=u;try{s(a)}catch(d){po(d)}a.currentTarget=null,s=o}}}}function Ae(e,t){var n=t[Yu];n===void 0&&(n=t[Yu]=new Set);var i=e+"__bubble";n.has(i)||(Yp(t,e,2,!1),n.add(i))}function hu(e,t,n){var i=0;t&&(i|=4),Yp(n,e,i,t)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function Yf(e){if(!e[Ul]){e[Ul]=!0,Uv.forEach(function(n){n!=="selectionchange"&&(ix.has(n)||hu(n,!1,e),hu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ul]||(t[Ul]=!0,hu("selectionchange",!1,t))}}function Yp(e,t,n,i){switch(i0(t)){case 2:var a=Nx;break;case 8:a=Rx;break;default:a=Qf}n=a.bind(null,t,n,e),a=void 0,!Ju||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function mu(e,t,n,i,a){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var l=i.stateNode.containerInfo;if(l===a)break;if(r===4)for(r=i.return;r!==null;){var o=r.tag;if((o===3||o===4)&&r.stateNode.containerInfo===a)return;r=r.return}for(;l!==null;){if(r=es(l),r===null)return;if(o=r.tag,o===5||o===6||o===26||o===27){i=s=r;continue e}l=l.parentNode}}i=i.return}Vv(function(){var u=s,d=of(n),f=[];e:{var h=ay.get(e);if(h!==void 0){var m=ac,v=e;switch(e){case"keypress":if(Wl(n)===0)break e;case"keydown":case"keyup":m=Pw;break;case"focusin":v="focus",m=Vc;break;case"focusout":v="blur",m=Vc;break;case"beforeblur":case"afterblur":m=Vc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Fh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Bw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Ww;break;case ey:case ty:case ny:m=$w;break;case iy:m=tS;break;case"scroll":case"scrollend":m=zw;break;case"wheel":m=iS;break;case"copy":case"cut":case"paste":m=Vw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=em;break;case"toggle":case"beforetoggle":m=sS}var b=(t&4)!==0,w=!b&&(e==="scroll"||e==="scrollend"),p=b?h!==null?h+"Capture":null:h;b=[];for(var g=u,y;g!==null;){var S=g;if(y=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||y===null||p===null||(S=Rr(g,p),S!=null&&b.push($r(g,S,y))),w)break;g=g.return}0<b.length&&(h=new m(h,v,null,n,d),f.push({event:h,listeners:b}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==Qu&&(v=n.relatedTarget||n.fromElement)&&(es(v)||v[ks]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?es(v):null,v!==null&&(w=Pr(v),b=v.tag,v!==w||b!==5&&b!==27&&b!==6)&&(v=null)):(m=null,v=u),m!==v)){if(b=Fh,S="onMouseLeave",p="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(b=em,S="onPointerLeave",p="onPointerEnter",g="pointer"),w=m==null?h:lr(m),y=v==null?h:lr(v),h=new b(S,g+"leave",m,n,d),h.target=w,h.relatedTarget=y,S=null,es(d)===u&&(b=new b(p,g+"enter",v,n,d),b.target=y,b.relatedTarget=w,S=b),w=S,m&&v)t:{for(b=ax,p=m,g=v,y=0,S=p;S;S=b(S))y++;S=0;for(var T=g;T;T=b(T))S++;for(;0<y-S;)p=b(p),y--;for(;0<S-y;)g=b(g),S--;for(;y--;){if(p===g||g!==null&&p===g.alternate){b=p;break t}p=b(p),g=b(g)}b=null}else b=null;m!==null&&Gm(f,h,m,b,!1),v!==null&&w!==null&&Gm(f,w,v,b,!0)}}e:{if(h=u?lr(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var E=am;else if(im(h))if(Jv)E=gS;else{E=hS;var x=fS}else m=h.nodeName,!m||m.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?u&&lf(u.elementType)&&(E=am):E=mS;if(E&&(E=E(e,u))){Qv(f,E,n,d);break e}x&&x(e,h,u),e==="focusout"&&u&&h.type==="number"&&u.memoizedProps.value!=null&&Xu(h,"number",h.value)}switch(x=u?lr(u):window,e){case"focusin":(im(x)||x.contentEditable==="true")&&(is=x,Pu=u,mr=null);break;case"focusout":mr=Pu=is=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,cm(f,n,d);break;case"selectionchange":if(yS)break;case"keydown":case"keyup":cm(f,n,d)}var j;if(df)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ns?Kv(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Gv&&n.locale!=="ko"&&(ns||A!=="onCompositionStart"?A==="onCompositionEnd"&&ns&&(j=Yv()):(zi=d,cf="value"in zi?zi.value:zi.textContent,ns=!0)),x=Uo(u,A),0<x.length&&(A=new Wh(A,e,null,n,d),f.push({event:A,listeners:x}),j?A.data=j:(j=Xv(n),j!==null&&(A.data=j)))),(j=lS?oS(e,n):cS(e,n))&&(A=Uo(u,"onBeforeInput"),0<A.length&&(x=new Wh("onBeforeInput","beforeinput",null,n,d),f.push({event:x,listeners:A}),x.data=j)),ex(f,e,u,n,d)}Vp(f,t)})}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Uo(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,s=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||s===null||(a=Rr(e,n),a!=null&&i.unshift($r(e,a,s)),a=Rr(e,t),a!=null&&i.push($r(e,a,s))),e.tag===3)return i;e=e.return}return[]}function ax(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Gm(e,t,n,i,a){for(var s=t._reactName,r=[];n!==null&&n!==i;){var l=n,o=l.alternate,u=l.stateNode;if(l=l.tag,o!==null&&o===i)break;l!==5&&l!==26&&l!==27||u===null||(o=u,a?(u=Rr(n,s),u!=null&&r.unshift($r(n,u,o))):a||(u=Rr(n,s),u!=null&&r.push($r(n,u,o)))),n=n.return}r.length!==0&&e.push({event:t,listeners:r})}var sx=/\r\n?/g,rx=/\u0000|\uFFFD/g;function Km(e){return(typeof e=="string"?e:""+e).replace(sx,`
`).replace(rx,"")}function Gp(e,t){return t=Km(t),Km(e)===t}function Ve(e,t,n,i,a,s){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ws(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ws(e,""+i);break;case"className":Al(e,"class",i);break;case"tabIndex":Al(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Al(e,n,i);break;case"style":Iv(e,i,s);break;case"data":if(t!=="object"){Al(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Zl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&Ve(e,t,"name",a.name,a,null),Ve(e,t,"formEncType",a.formEncType,a,null),Ve(e,t,"formMethod",a.formMethod,a,null),Ve(e,t,"formTarget",a.formTarget,a,null)):(Ve(e,t,"encType",a.encType,a,null),Ve(e,t,"method",a.method,a,null),Ve(e,t,"target",a.target,a,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Zl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=hi);break;case"onScroll":i!=null&&Ae("scroll",e);break;case"onScrollEnd":i!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(D(61));if(n=i.__html,n!=null){if(a.children!=null)throw Error(D(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Zl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),Pl(e,"popover",i);break;case"xlinkActuate":ii(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ii(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ii(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ii(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ii(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ii(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ii(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ii(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ii(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Pl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=kw.get(n)||n,Pl(e,n,i))}}function wd(e,t,n,i,a,s){switch(n){case"style":Iv(e,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(D(61));if(n=i.__html,n!=null){if(a.children!=null)throw Error(D(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ws(e,i):(typeof i=="number"||typeof i=="bigint")&&ws(e,""+i);break;case"onScroll":i!=null&&Ae("scroll",e);break;case"onScrollEnd":i!=null&&Ae("scrollend",e);break;case"onClick":i!=null&&(e.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zv.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),s=e[ln]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,a),typeof i=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,a);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Pl(e,n,i)}}}function It(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var i=!1,a=!1,s;for(s in n)if(n.hasOwnProperty(s)){var r=n[s];if(r!=null)switch(s){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(D(137,t));default:Ve(e,t,s,r,n,null)}}a&&Ve(e,t,"srcSet",n.srcSet,n,null),i&&Ve(e,t,"src",n.src,n,null);return;case"input":Ae("invalid",e);var l=s=r=a=null,o=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":a=d;break;case"type":r=d;break;case"checked":o=d;break;case"defaultChecked":u=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(D(137,t));break;default:Ve(e,t,i,d,n,null)}}Hv(e,s,l,o,u,r,a,!1);return;case"select":Ae("invalid",e),i=r=s=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":s=l;break;case"defaultValue":r=l;break;case"multiple":i=l;default:Ve(e,t,a,l,n,null)}t=s,n=r,e.multiple=!!i,t!=null?ds(e,!!i,t,!1):n!=null&&ds(e,!!i,n,!0);return;case"textarea":Ae("invalid",e),s=a=i=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":i=l;break;case"defaultValue":a=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(D(91));break;default:Ve(e,t,r,l,n,null)}$v(e,i,a,s);return;case"option":for(o in n)if(n.hasOwnProperty(o)&&(i=n[o],i!=null))switch(o){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ve(e,t,o,i,n,null)}return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(i=0;i<qr.length;i++)Ae(qr[i],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(D(137,t));default:Ve(e,t,u,i,n,null)}return;default:if(lf(t)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&wd(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&Ve(e,t,l,i,n,null))}function lx(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,s=null,r=null,l=null,o=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":o=f;default:i.hasOwnProperty(m)||Ve(e,t,m,null,i,f)}}for(var h in i){var m=i[h];if(f=n[h],i.hasOwnProperty(h)&&(m!=null||f!=null))switch(h){case"type":s=m;break;case"name":a=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":r=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(D(137,t));break;default:m!==f&&Ve(e,t,h,m,i,f)}}Ku(e,r,l,o,u,d,s,a);return;case"select":m=r=l=h=null;for(s in n)if(o=n[s],n.hasOwnProperty(s)&&o!=null)switch(s){case"value":break;case"multiple":m=o;default:i.hasOwnProperty(s)||Ve(e,t,s,null,i,o)}for(a in i)if(s=i[a],o=n[a],i.hasOwnProperty(a)&&(s!=null||o!=null))switch(a){case"value":h=s;break;case"defaultValue":l=s;break;case"multiple":r=s;default:s!==o&&Ve(e,t,a,s,i,o)}t=l,n=r,i=m,h!=null?ds(e,!!n,h,!1):!!i!=!!n&&(t!=null?ds(e,!!n,t,!0):ds(e,!!n,n?[]:"",!1));return;case"textarea":m=h=null;for(l in n)if(a=n[l],n.hasOwnProperty(l)&&a!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ve(e,t,l,null,i,a)}for(r in i)if(a=i[r],s=n[r],i.hasOwnProperty(r)&&(a!=null||s!=null))switch(r){case"value":h=a;break;case"defaultValue":m=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(D(91));break;default:a!==s&&Ve(e,t,r,a,i,s)}qv(e,h,m);return;case"option":for(var v in n)if(h=n[v],n.hasOwnProperty(v)&&h!=null&&!i.hasOwnProperty(v))switch(v){case"selected":e.selected=!1;break;default:Ve(e,t,v,null,i,h)}for(o in i)if(h=i[o],m=n[o],i.hasOwnProperty(o)&&h!==m&&(h!=null||m!=null))switch(o){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ve(e,t,o,h,i,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in n)h=n[b],n.hasOwnProperty(b)&&h!=null&&!i.hasOwnProperty(b)&&Ve(e,t,b,null,i,h);for(u in i)if(h=i[u],m=n[u],i.hasOwnProperty(u)&&h!==m&&(h!=null||m!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(D(137,t));break;default:Ve(e,t,u,h,i,m)}return;default:if(lf(t)){for(var w in n)h=n[w],n.hasOwnProperty(w)&&h!==void 0&&!i.hasOwnProperty(w)&&wd(e,t,w,void 0,i,h);for(d in i)h=i[d],m=n[d],!i.hasOwnProperty(d)||h===m||h===void 0&&m===void 0||wd(e,t,d,h,i,m);return}}for(var p in n)h=n[p],n.hasOwnProperty(p)&&h!=null&&!i.hasOwnProperty(p)&&Ve(e,t,p,null,i,h);for(f in i)h=i[f],m=n[f],!i.hasOwnProperty(f)||h===m||h==null&&m==null||Ve(e,t,f,h,i,m)}function Xm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ox(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var a=n[i],s=a.transferSize,r=a.initiatorType,l=a.duration;if(s&&l&&Xm(r)){for(r=0,l=a.responseEnd,i+=1;i<n.length;i++){var o=n[i],u=o.startTime;if(u>l)break;var d=o.transferSize,f=o.initiatorType;d&&Xm(f)&&(o=o.responseEnd,r+=d*(o<l?1:(l-u)/(o-u)))}if(--i,t+=8*(s+r)/(a.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Sd=null,xd=null;function zo(e){return e.nodeType===9?e:e.ownerDocument}function Qm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Td(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var gu=null;function cx(){var e=window.event;return e&&e.type==="popstate"?e===gu?!1:(gu=e,!0):(gu=null,!1)}var Xp=typeof setTimeout=="function"?setTimeout:void 0,ux=typeof clearTimeout=="function"?clearTimeout:void 0,Jm=typeof Promise=="function"?Promise:void 0,dx=typeof queueMicrotask=="function"?queueMicrotask:typeof Jm<"u"?function(e){return Jm.resolve(null).then(e).catch(fx)}:Xp;function fx(e){setTimeout(function(){throw e})}function na(e){return e==="head"}function Pm(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(a),Cs(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Tr(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Tr(n);for(var s=n.firstChild;s;){var r=s.nextSibling,l=s.nodeName;s[el]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=r}}else n==="body"&&Tr(e.ownerDocument.body);n=a}while(n);Cs(t)}function Zm(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function Ed(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ed(n),rf(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function hx(e,t,n,i){for(;e.nodeType===1;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[el])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=zn(e.nextSibling),e===null)break}return null}function mx(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=zn(e.nextSibling),e===null))return null;return e}function Qp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=zn(e.nextSibling),e===null))return null;return e}function jd(e){return e.data==="$?"||e.data==="$~"}function Od(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function gx(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ad=null;function Fm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return zn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Wm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Jp(e,t,n){switch(t=zo(n),e){case"html":if(e=t.documentElement,!e)throw Error(D(452));return e;case"head":if(e=t.head,!e)throw Error(D(453));return e;case"body":if(e=t.body,!e)throw Error(D(454));return e;default:throw Error(D(451))}}function Tr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);rf(e)}var Ln=new Map,eg=new Set;function Lo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xi=He.d;He.d={f:vx,r:yx,D:px,C:bx,L:_x,m:wx,X:xx,S:Sx,M:Tx};function vx(){var e=xi.f(),t=gc();return e||t}function yx(e){var t=Us(e);t!==null&&t.tag===5&&t.type==="form"?Iy(t):xi.r(e)}var Hs=typeof document>"u"?null:document;function Pp(e,t,n){var i=Hs;if(i&&typeof t=="string"&&t){var a=Rn(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),eg.has(a)||(eg.add(a),e={rel:e,crossOrigin:n,href:t},i.querySelector(a)===null&&(t=i.createElement("link"),It(t,"link",e),Mt(t),i.head.appendChild(t)))}}function px(e){xi.D(e),Pp("dns-prefetch",e,null)}function bx(e,t){xi.C(e,t),Pp("preconnect",e,t)}function _x(e,t,n){xi.L(e,t,n);var i=Hs;if(i&&e&&t){var a='link[rel="preload"][as="'+Rn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+Rn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+Rn(n.imageSizes)+'"]')):a+='[href="'+Rn(e)+'"]';var s=a;switch(t){case"style":s=As(e);break;case"script":s=qs(e)}Ln.has(s)||(e=et({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Ln.set(s,e),i.querySelector(a)!==null||t==="style"&&i.querySelector(rl(s))||t==="script"&&i.querySelector(ll(s))||(t=i.createElement("link"),It(t,"link",e),Mt(t),i.head.appendChild(t)))}}function wx(e,t){xi.m(e,t);var n=Hs;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+Rn(i)+'"][href="'+Rn(e)+'"]',s=a;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=qs(e)}if(!Ln.has(s)&&(e=et({rel:"modulepreload",href:e},t),Ln.set(s,e),n.querySelector(a)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ll(s)))return}i=n.createElement("link"),It(i,"link",e),Mt(i),n.head.appendChild(i)}}}function Sx(e,t,n){xi.S(e,t,n);var i=Hs;if(i&&e){var a=us(i).hoistableStyles,s=As(e);t=t||"default";var r=a.get(s);if(!r){var l={loading:0,preload:null};if(r=i.querySelector(rl(s)))l.loading=5;else{e=et({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ln.get(s))&&Gf(e,n);var o=r=i.createElement("link");Mt(o),It(o,"link",e),o._p=new Promise(function(u,d){o.onload=u,o.onerror=d}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,lo(r,t,i)}r={type:"stylesheet",instance:r,count:1,state:l},a.set(s,r)}}}function xx(e,t){xi.X(e,t);var n=Hs;if(n&&e){var i=us(n).hoistableScripts,a=qs(e),s=i.get(a);s||(s=n.querySelector(ll(a)),s||(e=et({src:e,async:!0},t),(t=Ln.get(a))&&Kf(e,t),s=n.createElement("script"),Mt(s),It(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(a,s))}}function Tx(e,t){xi.M(e,t);var n=Hs;if(n&&e){var i=us(n).hoistableScripts,a=qs(e),s=i.get(a);s||(s=n.querySelector(ll(a)),s||(e=et({src:e,async:!0,type:"module"},t),(t=Ln.get(a))&&Kf(e,t),s=n.createElement("script"),Mt(s),It(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(a,s))}}function tg(e,t,n,i){var a=(a=$i.current)?Lo(a):null;if(!a)throw Error(D(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=As(n.href),n=us(a).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=As(n.href);var s=us(a).hoistableStyles,r=s.get(e);if(r||(a=a.ownerDocument||a,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,r),(s=a.querySelector(rl(e)))&&!s._p&&(r.instance=s,r.state.loading=5),Ln.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ln.set(e,n),s||Ex(a,e,n,r.state))),t&&i===null)throw Error(D(528,""));return r}if(t&&i!==null)throw Error(D(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=qs(n),n=us(a).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(D(444,e))}}function As(e){return'href="'+Rn(e)+'"'}function rl(e){return'link[rel="stylesheet"]['+e+"]"}function Zp(e){return et({},e,{"data-precedence":e.precedence,precedence:null})}function Ex(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),It(t,"link",n),Mt(t),e.head.appendChild(t))}function qs(e){return'[src="'+Rn(e)+'"]'}function ll(e){return"script[async]"+e}function ng(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Rn(n.href)+'"]');if(i)return t.instance=i,Mt(i),i;var a=et({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Mt(i),It(i,"style",a),lo(i,n.precedence,e),t.instance=i;case"stylesheet":a=As(n.href);var s=e.querySelector(rl(a));if(s)return t.state.loading|=4,t.instance=s,Mt(s),s;i=Zp(n),(a=Ln.get(a))&&Gf(i,a),s=(e.ownerDocument||e).createElement("link"),Mt(s);var r=s;return r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),It(s,"link",i),t.state.loading|=4,lo(s,n.precedence,e),t.instance=s;case"script":return s=qs(n.src),(a=e.querySelector(ll(s)))?(t.instance=a,Mt(a),a):(i=n,(a=Ln.get(s))&&(i=et({},n),Kf(i,a)),e=e.ownerDocument||e,a=e.createElement("script"),Mt(a),It(a,"link",i),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(D(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,lo(i,n.precedence,e));return t.instance}function lo(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=i.length?i[i.length-1]:null,s=a,r=0;r<i.length;r++){var l=i[r];if(l.dataset.precedence===t)s=l;else if(s!==a)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Gf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Kf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var oo=null;function ig(e,t,n){if(oo===null){var i=new Map,a=oo=new Map;a.set(n,i)}else a=oo,i=a.get(n),i||(i=new Map,a.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var s=n[a];if(!(s[el]||s[Ht]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var r=s.getAttribute(t)||"";r=e+r;var l=i.get(r);l?l.push(s):i.set(r,[s])}}return i}function ag(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function jx(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Fp(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function Ox(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var a=As(i.href),s=t.querySelector(rl(a));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Bo.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,Mt(s);return}s=t.ownerDocument||t,i=Zp(i),(a=Ln.get(a))&&Gf(i,a),s=s.createElement("link"),Mt(s);var r=s;r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),It(s,"link",i),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Bo.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var vu=0;function Ax(e,t){return e.stylesheets&&e.count===0&&co(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&co(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&vu===0&&(vu=62500*ox());var a=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&co(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>vu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(a)}}:null}function Bo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)co(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ho=null;function co(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ho=new Map,t.forEach(Cx,e),Ho=null,Bo.call(e))}function Cx(e,t){if(!(t.state.loading&4)){var n=Ho.get(e);if(n)var i=n.get(null);else{n=new Map,Ho.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<a.length;s++){var r=a[s];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),i=r)}i&&n.set(null,i)}a=t.instance,r=a.getAttribute("data-precedence"),s=n.get(r)||i,s===i&&n.set(null,a),n.set(r,a),this.count++,i=Bo.bind(this),a.addEventListener("load",i),a.addEventListener("error",i),s?s.parentNode.insertBefore(a,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var Ir={$$typeof:fi,Provider:null,Consumer:null,_currentValue:ba,_currentValue2:ba,_threadCount:0};function Dx(e,t,n,i,a,s,r,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hc(0),this.hiddenUpdates=Hc(null),this.identifierPrefix=i,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Wp(e,t,n,i,a,s,r,l,o,u,d,f){return e=new Dx(e,t,n,r,o,u,d,f,l),t=1,s===!0&&(t|=24),s=hn(3,null,null,t),e.current=s,s.stateNode=e,t=pf(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},wf(s),e}function e0(e){return e?(e=rs,e):rs}function t0(e,t,n,i,a,s){a=e0(a),i.context===null?i.context=a:i.pendingContext=a,i=Vi(t),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Yi(e,i,t),n!==null&&(rn(n,e,t),vr(n,e,t))}function sg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Xf(e,t){sg(e,t),(e=e.alternate)&&sg(e,t)}function n0(e){if(e.tag===13||e.tag===31){var t=Ra(e,67108864);t!==null&&rn(t,e,67108864),Xf(e,67108864)}}function rg(e){if(e.tag===13||e.tag===31){var t=_n();t=af(t);var n=Ra(e,t);n!==null&&rn(n,e,t),Xf(e,t)}}var qo=!0;function Nx(e,t,n,i){var a=he.T;he.T=null;var s=He.p;try{He.p=2,Qf(e,t,n,i)}finally{He.p=s,he.T=a}}function Rx(e,t,n,i){var a=he.T;he.T=null;var s=He.p;try{He.p=8,Qf(e,t,n,i)}finally{He.p=s,he.T=a}}function Qf(e,t,n,i){if(qo){var a=Cd(i);if(a===null)mu(e,t,i,$o,n),lg(e,i);else if(kx(a,e,t,n,i))i.stopPropagation();else if(lg(e,i),t&4&&-1<Mx.indexOf(e)){for(;a!==null;){var s=Us(a);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var r=ua(s.pendingLanes);if(r!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;r;){var o=1<<31-bn(r);l.entanglements[1]|=o,r&=~o}ni(s),!(Be&6)&&(Do=yn()+500,sl(0))}}break;case 31:case 13:l=Ra(s,2),l!==null&&rn(l,s,2),gc(),Xf(s,2)}if(s=Cd(i),s===null&&mu(e,t,i,$o,n),s===a)break;a=s}a!==null&&i.stopPropagation()}else mu(e,t,i,null,n)}}function Cd(e){return e=of(e),Jf(e)}var $o=null;function Jf(e){if($o=null,e=es(e),e!==null){var t=Pr(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Sv(t),e!==null)return e;e=null}else if(n===31){if(e=xv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return $o=e,null}function i0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pw()){case Ov:return 2;case Av:return 8;case vo:case bw:return 32;case Cv:return 268435456;default:return 32}default:return 32}}var Dd=!1,Xi=null,Qi=null,Ji=null,Vr=new Map,Yr=new Map,Mi=[],Mx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lg(e,t){switch(e){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":Vr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(t.pointerId)}}function nr(e,t,n,i,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[a]},t!==null&&(t=Us(t),t!==null&&n0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function kx(e,t,n,i,a){switch(t){case"focusin":return Xi=nr(Xi,e,t,n,i,a),!0;case"dragenter":return Qi=nr(Qi,e,t,n,i,a),!0;case"mouseover":return Ji=nr(Ji,e,t,n,i,a),!0;case"pointerover":var s=a.pointerId;return Vr.set(s,nr(Vr.get(s)||null,e,t,n,i,a)),!0;case"gotpointercapture":return s=a.pointerId,Yr.set(s,nr(Yr.get(s)||null,e,t,n,i,a)),!0}return!1}function a0(e){var t=es(e.target);if(t!==null){var n=Pr(t);if(n!==null){if(t=n.tag,t===13){if(t=Sv(n),t!==null){e.blockedOn=t,Gh(e.priority,function(){rg(n)});return}}else if(t===31){if(t=xv(n),t!==null){e.blockedOn=t,Gh(e.priority,function(){rg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Cd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Qu=i,n.target.dispatchEvent(i),Qu=null}else return t=Us(n),t!==null&&n0(t),e.blockedOn=n,!1;t.shift()}return!0}function og(e,t,n){uo(e)&&n.delete(t)}function Ux(){Dd=!1,Xi!==null&&uo(Xi)&&(Xi=null),Qi!==null&&uo(Qi)&&(Qi=null),Ji!==null&&uo(Ji)&&(Ji=null),Vr.forEach(og),Yr.forEach(og)}function zl(e,t){e.blockedOn===t&&(e.blockedOn=null,Dd||(Dd=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,Ux)))}var Ll=null;function cg(e){Ll!==e&&(Ll=e,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,function(){Ll===e&&(Ll=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],a=e[t+2];if(typeof i!="function"){if(Jf(i||n)===null)continue;break}var s=Us(n);s!==null&&(e.splice(t,3),t-=3,ud(s,{pending:!0,data:a,method:n.method,action:i},i,a))}}))}function Cs(e){function t(o){return zl(o,e)}Xi!==null&&zl(Xi,e),Qi!==null&&zl(Qi,e),Ji!==null&&zl(Ji,e),Vr.forEach(t),Yr.forEach(t);for(var n=0;n<Mi.length;n++){var i=Mi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Mi.length&&(n=Mi[0],n.blockedOn===null);)a0(n),n.blockedOn===null&&Mi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var a=n[i],s=n[i+1],r=a[ln]||null;if(typeof s=="function")r||cg(n);else if(r){var l=null;if(s&&s.hasAttribute("formAction")){if(a=s,r=s[ln]||null)l=r.formAction;else if(Jf(a)!==null)continue}else l=r.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),cg(n)}}}function s0(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(r){return a=r})},focusReset:"manual",scroll:"manual"})}function t(){a!==null&&(a(),a=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),a!==null&&(a(),a=null)}}}function Pf(e){this._internalRoot=e}pc.prototype.render=Pf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));var n=t.current,i=_n();t0(n,i,e,t,null,null)};pc.prototype.unmount=Pf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;t0(e.current,2,null,e,null,null),gc(),t[ks]=null}};function pc(e){this._internalRoot=e}pc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mi.length&&t!==0&&t<Mi[n].priority;n++);Mi.splice(n,0,e),n===0&&a0(e)}};var ug=_v.version;if(ug!=="19.2.0")throw Error(D(527,ug,"19.2.0"));He.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=dw(t),e=e!==null?Tv(e):null,e=e===null?null:e.stateNode,e};var zx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:he,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{Zr=Bl.inject(zx),pn=Bl}catch{}}tc.createRoot=function(e,t){if(!wv(e))throw Error(D(299));var n=!1,i="",a=Py,s=Zy,r=Fy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Wp(e,1,!1,null,null,n,i,null,a,s,r,s0),e[ks]=t.current,Yf(e),new Pf(t)};tc.hydrateRoot=function(e,t,n){if(!wv(e))throw Error(D(299));var i=!1,a="",s=Py,r=Zy,l=Fy,o=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(o=n.formState)),t=Wp(e,1,!0,t,n??null,i,a,o,s,r,l,s0),t.context=e0(null),n=t.current,i=_n(),i=af(i),a=Vi(i),a.callback=null,Yi(n,a,i),n=i,t.current.lanes=n,Wr(t,n),ni(t),e[ks]=t.current,Yf(e),new pc(t)};tc.version="19.2.0";function r0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r0)}catch(e){console.error(e)}}r0(),mv.exports=tc;var Lx=mv.exports,Nd=function(e,t){return Nd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},Nd(e,t)};function l0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Nd(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Io=function(){return Io=Object.assign||function(t){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Io.apply(this,arguments)};function $s(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]]);return n}function o0(e,t,n,i){var a=arguments.length,s=a<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(a<3?r(s):a>3?r(t,n,s):r(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s}function c0(e,t){return function(n,i){t(n,i,e)}}function u0(e,t,n,i,a,s){function r(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var l=i.kind,o=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?i.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,i.name):{}),f,h=!1,m=n.length-1;m>=0;m--){var v={};for(var b in i)v[b]=b==="access"?{}:i[b];for(var b in i.access)v.access[b]=i.access[b];v.addInitializer=function(p){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(r(p||null))};var w=(0,n[m])(l==="accessor"?{get:d.get,set:d.set}:d[o],v);if(l==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(f=r(w.get))&&(d.get=f),(f=r(w.set))&&(d.set=f),(f=r(w.init))&&a.unshift(f)}else(f=r(w))&&(l==="field"?a.unshift(f):d[o]=f)}u&&Object.defineProperty(u,i.name,d),h=!0}function d0(e,t,n){for(var i=arguments.length>2,a=0;a<t.length;a++)n=i?t[a].call(e,n):t[a].call(e);return i?n:void 0}function f0(e){return typeof e=="symbol"?e:"".concat(e)}function h0(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function m0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function F(e,t,n,i){function a(s){return s instanceof n?s:new n(function(r){r(s)})}return new(n||(n=Promise))(function(s,r){function l(d){try{u(i.next(d))}catch(f){r(f)}}function o(d){try{u(i.throw(d))}catch(f){r(f)}}function u(d){d.done?s(d.value):a(d.value).then(l,o)}u((i=i.apply(e,t||[])).next())})}function g0(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,r=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return r.next=l(0),r.throw=l(1),r.return=l(2),typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function l(u){return function(d){return o([u,d])}}function o(u){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,u[0]&&(n=0)),n;)try{if(i=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(d){u=[6,d],a=0}finally{i=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var bc=Object.create?function(e,t,n,i){i===void 0&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]};function v0(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&bc(t,e,n)}function Vo(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zf(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),a,s=[],r;try{for(;(t===void 0||t-- >0)&&!(a=i.next()).done;)s.push(a.value)}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function y0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Zf(arguments[t]));return e}function p0(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),a=0,t=0;t<n;t++)for(var s=arguments[t],r=0,l=s.length;r<l;r++,a++)i[a]=s[r];return i}function b0(e,t,n){if(n||arguments.length===2)for(var i=0,a=t.length,s;i<a;i++)(s||!(i in t))&&(s||(s=Array.prototype.slice.call(t,0,i)),s[i]=t[i]);return e.concat(s||Array.prototype.slice.call(t))}function Ds(e){return this instanceof Ds?(this.v=e,this):new Ds(e)}function _0(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",r),a[Symbol.asyncIterator]=function(){return this},a;function r(m){return function(v){return Promise.resolve(v).then(m,f)}}function l(m,v){i[m]&&(a[m]=function(b){return new Promise(function(w,p){s.push([m,b,w,p])>1||o(m,b)})},v&&(a[m]=v(a[m])))}function o(m,v){try{u(i[m](v))}catch(b){h(s[0][3],b)}}function u(m){m.value instanceof Ds?Promise.resolve(m.value.v).then(d,f):h(s[0][2],m)}function d(m){o("next",m)}function f(m){o("throw",m)}function h(m,v){m(v),s.shift(),s.length&&o(s[0][0],s[0][1])}}function w0(e){var t,n;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,s){t[a]=e[a]?function(r){return(n=!n)?{value:Ds(e[a](r)),done:!1}:s?s(r):r}:s}}function S0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Vo=="function"?Vo(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=e[s]&&function(r){return new Promise(function(l,o){r=e[s](r),a(l,o,r.done,r.value)})}}function a(s,r,l,o){Promise.resolve(o).then(function(u){s({value:u,done:l})},r)}}function x0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Bx=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Rd=function(e){return Rd=Object.getOwnPropertyNames||function(t){var n=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[n.length]=i);return n},Rd(e)};function T0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Rd(e),i=0;i<n.length;i++)n[i]!=="default"&&bc(t,e,n[i]);return Bx(t,e),t}function E0(e){return e&&e.__esModule?e:{default:e}}function j0(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)}function O0(e,t,n,i,a){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?a.call(e,n):a?a.value=n:t.set(e,n),n}function A0(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function C0(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],n&&(a=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");a&&(i=function(){try{a.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t}var Hx=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var i=new Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function D0(e){function t(s){e.error=e.hasError?new Hx(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var n,i=0;function a(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(a);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(s).then(a,function(r){return t(r),a()})}else i|=1}catch(r){t(r)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function N0(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,a,s,r){return i?t?".jsx":".js":a&&(!s||!r)?n:a+s+"."+r.toLowerCase()+"js"}):e}const qx={__extends:l0,__assign:Io,__rest:$s,__decorate:o0,__param:c0,__esDecorate:u0,__runInitializers:d0,__propKey:f0,__setFunctionName:h0,__metadata:m0,__awaiter:F,__generator:g0,__createBinding:bc,__exportStar:v0,__values:Vo,__read:Zf,__spread:y0,__spreadArrays:p0,__spreadArray:b0,__await:Ds,__asyncGenerator:_0,__asyncDelegator:w0,__asyncValues:S0,__makeTemplateObject:x0,__importStar:T0,__importDefault:E0,__classPrivateFieldGet:j0,__classPrivateFieldSet:O0,__classPrivateFieldIn:A0,__addDisposableResource:C0,__disposeResources:D0,__rewriteRelativeImportExtension:N0},$x=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:C0,get __assign(){return Io},__asyncDelegator:w0,__asyncGenerator:_0,__asyncValues:S0,__await:Ds,__awaiter:F,__classPrivateFieldGet:j0,__classPrivateFieldIn:A0,__classPrivateFieldSet:O0,__createBinding:bc,__decorate:o0,__disposeResources:D0,__esDecorate:u0,__exportStar:v0,__extends:l0,__generator:g0,__importDefault:E0,__importStar:T0,__makeTemplateObject:x0,__metadata:m0,__param:c0,__propKey:f0,__read:Zf,__rest:$s,__rewriteRelativeImportExtension:N0,__runInitializers:d0,__setFunctionName:h0,__spread:y0,__spreadArray:b0,__spreadArrays:p0,__values:Vo,default:qx},Symbol.toStringTag,{value:"Module"})),Ix="modulepreload",Vx=function(e){return"/todo-note/"+e},dg={},Is=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));a=Promise.allSettled(n.map(o=>{if(o=Vx(o),o in dg)return;dg[o]=!0;const u=o.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Ix,u||(f.as="script"),f.crossOrigin="",f.href=o,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}function s(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return a.then(r=>{for(const l of r||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},Yx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Is(async()=>{const{default:i}=await Promise.resolve().then(()=>ka);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)};class Ff extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class fg extends Ff{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class hg extends Ff{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class mg extends Ff{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Md;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Md||(Md={}));class Gx{constructor(t,{headers:n={},customFetch:i,region:a=Md.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=Yx(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return F(this,arguments,void 0,function*(n,i={}){var a;try{const{headers:s,method:r,body:l,signal:o}=i;let u={},{region:d}=i;d||(d=this.region);const f=new URL(`${this.url}/${n}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let h;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)):h=l;const m=yield this.fetch(f.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:h,signal:o}).catch(p=>{throw p.name==="AbortError"?p:new fg(p)}),v=m.headers.get("x-relay-error");if(v&&v==="true")throw new hg(m);if(!m.ok)throw new mg(m);let b=((a=m.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield m.json():b==="application/octet-stream"||b==="application/pdf"?w=yield m.blob():b==="text/event-stream"?w=m:b==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new fg(s)}:{data:null,error:s,response:s instanceof mg||s instanceof hg?s.context:void 0}}})}}var Jt={};const Vs=av($x);var Hl={},ql={},$l={},Il={},Vl={},Kx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ns=Kx();const Xx=Ns.fetch,R0=Ns.fetch.bind(Ns),M0=Ns.Headers,Qx=Ns.Request,Jx=Ns.Response,ka=Object.freeze(Object.defineProperty({__proto__:null,Headers:M0,Request:Qx,Response:Jx,default:R0,fetch:Xx},Symbol.toStringTag,{value:"Module"})),Px=av(ka);var Yl={},gg;function k0(){if(gg)return Yl;gg=1,Object.defineProperty(Yl,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Yl.default=e,Yl}var vg;function U0(){if(vg)return Vl;vg=1,Object.defineProperty(Vl,"__esModule",{value:!0});const e=Vs,t=e.__importDefault(Px),n=e.__importDefault(k0());class i{constructor(s){var r,l;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(r=s.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=s.signal,this.isMaybeSingle=(l=s.isMaybeSingle)!==null&&l!==void 0?l:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,r){return this.headers=new Headers(this.headers),this.headers.set(s,r),this}then(s,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,f,h,m;let v=null,b=null,w=null,p=u.status,g=u.statusText;if(u.ok){if(this.method!=="HEAD"){const E=await u.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?b=E:b=JSON.parse(E))}const S=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),T=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");S&&T&&T.length>1&&(w=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(v={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,w=null,p=406,g="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const S=await u.text();try{v=JSON.parse(S),Array.isArray(v)&&u.status===404&&(b=[],v=null,p=200,g="OK")}catch{u.status===404&&S===""?(p=204,g="No Content"):v={message:S}}if(v&&this.isMaybeSingle&&(!((m=v==null?void 0:v.details)===null||m===void 0)&&m.includes("0 rows"))&&(v=null,p=200,g="OK"),v&&this.shouldThrowOnError)throw new n.default(v)}return{error:v,data:b,count:w,status:p,statusText:g}});return this.shouldThrowOnError||(o=o.catch(u=>{var d,f,h;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(f=u==null?void 0:u.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(h=u==null?void 0:u.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),o.then(s,r)}returns(){return this}overrideTypes(){return this}}return Vl.default=i,Vl}var yg;function z0(){if(yg)return Il;yg=1,Object.defineProperty(Il,"__esModule",{value:!0});const t=Vs.__importDefault(U0());class n extends t.default{select(a){let s=!1;const r=(a??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:s=!0,nullsFirst:r,foreignTable:l,referencedTable:o=l}={}){const u=o?`${o}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:s,referencedTable:r=s}={}){const l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,s,{foreignTable:r,referencedTable:l=r}={}){const o=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${a}`),this.url.searchParams.set(u,`${s-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:s=!1,settings:r=!1,buffers:l=!1,wal:o=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,s?"verbose":null,r?"settings":null,l?"buffers":null,o?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Il.default=n,Il}var pg;function Wf(){if(pg)return $l;pg=1,Object.defineProperty($l,"__esModule",{value:!0});const t=Vs.__importDefault(z0()),n=new RegExp("[,()]");class i extends t.default{eq(s,r){return this.url.searchParams.append(s,`eq.${r}`),this}neq(s,r){return this.url.searchParams.append(s,`neq.${r}`),this}gt(s,r){return this.url.searchParams.append(s,`gt.${r}`),this}gte(s,r){return this.url.searchParams.append(s,`gte.${r}`),this}lt(s,r){return this.url.searchParams.append(s,`lt.${r}`),this}lte(s,r){return this.url.searchParams.append(s,`lte.${r}`),this}like(s,r){return this.url.searchParams.append(s,`like.${r}`),this}likeAllOf(s,r){return this.url.searchParams.append(s,`like(all).{${r.join(",")}}`),this}likeAnyOf(s,r){return this.url.searchParams.append(s,`like(any).{${r.join(",")}}`),this}ilike(s,r){return this.url.searchParams.append(s,`ilike.${r}`),this}ilikeAllOf(s,r){return this.url.searchParams.append(s,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(s,r){return this.url.searchParams.append(s,`ilike(any).{${r.join(",")}}`),this}is(s,r){return this.url.searchParams.append(s,`is.${r}`),this}in(s,r){const l=Array.from(new Set(r)).map(o=>typeof o=="string"&&n.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,r){return typeof r=="string"?this.url.searchParams.append(s,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(s,`cs.{${r.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(r)}`),this}containedBy(s,r){return typeof r=="string"?this.url.searchParams.append(s,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(s,`cd.{${r.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(r)}`),this}rangeGt(s,r){return this.url.searchParams.append(s,`sr.${r}`),this}rangeGte(s,r){return this.url.searchParams.append(s,`nxl.${r}`),this}rangeLt(s,r){return this.url.searchParams.append(s,`sl.${r}`),this}rangeLte(s,r){return this.url.searchParams.append(s,`nxr.${r}`),this}rangeAdjacent(s,r){return this.url.searchParams.append(s,`adj.${r}`),this}overlaps(s,r){return typeof r=="string"?this.url.searchParams.append(s,`ov.${r}`):this.url.searchParams.append(s,`ov.{${r.join(",")}}`),this}textSearch(s,r,{config:l,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${u}fts${d}.${r}`),this}match(s){return Object.entries(s).forEach(([r,l])=>{this.url.searchParams.append(r,`eq.${l}`)}),this}not(s,r,l){return this.url.searchParams.append(s,`not.${r}.${l}`),this}or(s,{foreignTable:r,referencedTable:l=r}={}){const o=l?`${l}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,r,l){return this.url.searchParams.append(s,`${r}.${l}`),this}}return $l.default=i,$l}var bg;function L0(){if(bg)return ql;bg=1,Object.defineProperty(ql,"__esModule",{value:!0});const t=Vs.__importDefault(Wf());class n{constructor(a,{headers:s={},schema:r,fetch:l}){this.url=a,this.headers=new Headers(s),this.schema=r,this.fetch=l}select(a,s){const{head:r=!1,count:l}=s??{},o=r?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:s,defaultToNull:r=!0}={}){var l;const o="POST";if(s&&this.headers.append("Prefer",`count=${s}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:s,ignoreDuplicates:r=!1,count:l,defaultToNull:o=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),l&&this.headers.append("Prefer",`count=${l}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:s}={}){var r;const l="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:a}={}){var s;const r="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return ql.default=n,ql}var _g;function Zx(){if(_g)return Hl;_g=1,Object.defineProperty(Hl,"__esModule",{value:!0});const e=Vs,t=e.__importDefault(L0()),n=e.__importDefault(Wf());class i{constructor(s,{headers:r={},schema:l,fetch:o}={}){this.url=s,this.headers=new Headers(r),this.schemaName=l,this.fetch=o}from(s){const r=new URL(`${this.url}/${s}`);return new t.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new i(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,r={},{head:l=!1,get:o=!1,count:u}={}){var d;let f;const h=new URL(`${this.url}/rpc/${s}`);let m;l||o?(f=l?"HEAD":"GET",Object.entries(r).filter(([b,w])=>w!==void 0).map(([b,w])=>[b,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([b,w])=>{h.searchParams.append(b,w)})):(f="POST",m=r);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new n.default({method:f,url:h,headers:v,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Hl.default=i,Hl}Object.defineProperty(Jt,"__esModule",{value:!0});var B0=Jt.PostgrestError=Q0=Jt.PostgrestBuilder=K0=Jt.PostgrestTransformBuilder=Y0=Jt.PostgrestFilterBuilder=I0=Jt.PostgrestQueryBuilder=q0=Jt.PostgrestClient=void 0;const Ys=Vs,H0=Ys.__importDefault(Zx());var q0=Jt.PostgrestClient=H0.default;const $0=Ys.__importDefault(L0());var I0=Jt.PostgrestQueryBuilder=$0.default;const V0=Ys.__importDefault(Wf());var Y0=Jt.PostgrestFilterBuilder=V0.default;const G0=Ys.__importDefault(z0());var K0=Jt.PostgrestTransformBuilder=G0.default;const X0=Ys.__importDefault(U0());var Q0=Jt.PostgrestBuilder=X0.default;const J0=Ys.__importDefault(k0());B0=Jt.PostgrestError=J0.default;var P0=Jt.default={PostgrestClient:H0.default,PostgrestQueryBuilder:$0.default,PostgrestFilterBuilder:V0.default,PostgrestTransformBuilder:G0.default,PostgrestBuilder:X0.default,PostgrestError:J0.default};const Fx=$_({__proto__:null,get PostgrestBuilder(){return Q0},get PostgrestClient(){return q0},get PostgrestError(){return B0},get PostgrestFilterBuilder(){return Y0},get PostgrestQueryBuilder(){return I0},get PostgrestTransformBuilder(){return K0},default:P0},[Jt]),{PostgrestClient:Wx,PostgrestQueryBuilder:qO,PostgrestFilterBuilder:$O,PostgrestTransformBuilder:IO,PostgrestBuilder:VO,PostgrestError:YO}=P0||Fx;class eT{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const tT="2.78.0",nT=`realtime-js/${tT}`,iT="1.0.0",kd=1e4,aT=1e3,sT=100;var Er;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Er||(Er={}));var jt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(jt||(jt={}));var Yn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Yn||(Yn={}));var Ud;(function(e){e.websocket="websocket"})(Ud||(Ud={}));var ga;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ga||(ga={}));class rT{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,n,i)}_decodeBroadcast(t,n,i){const a=n.getUint8(1),s=n.getUint8(2);let r=this.HEADER_LENGTH+2;const l=i.decode(t.slice(r,r+a));r=r+a;const o=i.decode(t.slice(r,r+s));r=r+s;const u=JSON.parse(i.decode(t.slice(r,t.byteLength)));return{ref:null,topic:l,event:o,payload:u}}}class Z0{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Qe||(Qe={}));const wg=(e,t,n={})=>{var i;const a=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((s,r)=>(s[r]=lT(r,e,t,a),s),{}):{}},lT=(e,t,n,i)=>{const a=t.find(l=>l.name===e),s=a==null?void 0:a.type,r=n[e];return s&&!i.includes(s)?F0(s,r):zd(r)},F0=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return dT(t,n)}switch(e){case Qe.bool:return oT(t);case Qe.float4:case Qe.float8:case Qe.int2:case Qe.int4:case Qe.int8:case Qe.numeric:case Qe.oid:return cT(t);case Qe.json:case Qe.jsonb:return uT(t);case Qe.timestamp:return fT(t);case Qe.abstime:case Qe.date:case Qe.daterange:case Qe.int4range:case Qe.int8range:case Qe.money:case Qe.reltime:case Qe.text:case Qe.time:case Qe.timestamptz:case Qe.timetz:case Qe.tsrange:case Qe.tstzrange:return zd(t);default:return zd(t)}},zd=e=>e,oT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},cT=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},uT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},dT=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let s;const r=e.slice(1,n);try{s=JSON.parse("["+r+"]")}catch{s=r?r.split(","):[]}return s.map(l=>F0(t,l))}return e},fT=e=>typeof e=="string"?e.replace(" ","T"):e,W0=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class yu{constructor(t,n,i={},a=kd){this.channel=t,this.event=n,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Sg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Sg||(Sg={}));class jr{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:s,onLeave:r,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jr.syncState(this.state,a,s,r),this.pendingDiffs.forEach(o=>{this.state=jr.syncDiff(this.state,o,s,r)}),this.pendingDiffs=[],l()}),this.channel._on(i.diff,{},a=>{const{onJoin:s,onLeave:r,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=jr.syncDiff(this.state,a,s,r),l())}),this.onJoin((a,s,r)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:r})}),this.onLeave((a,s,r)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,a){const s=this.cloneDeep(t),r=this.transformState(n),l={},o={};return this.map(s,(u,d)=>{r[u]||(o[u]=d)}),this.map(r,(u,d)=>{const f=s[u];if(f){const h=d.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),v=d.filter(w=>m.indexOf(w.presence_ref)<0),b=f.filter(w=>h.indexOf(w.presence_ref)<0);v.length>0&&(l[u]=v),b.length>0&&(o[u]=b)}else l[u]=d}),this.syncDiff(s,{joins:l,leaves:o},i,a)}static syncDiff(t,n,i,a){const{joins:s,leaves:r}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(s,(l,o)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(o),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}i(l,d,o)}),this.map(r,(l,o)=>{let u=t[l];if(!u)return;const d=o.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,o),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const a=t[i];return"metas"in a?n[i]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[i]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(xg||(xg={}));var Or;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Or||(Or={}));var ci;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ci||(ci={}));class eh{constructor(t,n={config:{}},i){var a,s;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new yu(this,Yn.join,this.params,this.timeout),this.rejoinTimer=new Z0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=jt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yn.reply,{},(r,l)=>{this._trigger(this._replyEventName(l),r)}),this.presence=new jr(this),this.broadcastEndpointURL=W0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,a,s;if(this.socket.isConnected()||this.socket.connect(),this.state==jt.closed){const{config:{broadcast:r,presence:l,private:o}}=this.params,u=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Or.PRESENCE]&&this.bindings[Or.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},h={broadcast:r,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:o};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ci.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ci.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket.setAuth(),m===void 0){t==null||t(ci.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,w=(v=b==null?void 0:b.length)!==null&&v!==void 0?v:0,p=[];for(let g=0;g<w;g++){const y=b[g],{filter:{event:S,schema:T,table:E,filter:x}}=y,j=m&&m[g];if(j&&j.event===S&&j.schema===T&&j.table===E&&j.filter===x)p.push(Object.assign(Object.assign({},y),{id:j.id}));else{this.unsubscribe(),this.state=jt.errored,t==null||t(ci.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,t&&t(ci.SUBSCRIBED);return}}).receive("error",m=>{this.state=jt.errored,t==null||t(ci.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ci.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===jt.joined&&t===Or.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var a;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const r={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,r,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let o=l.statusText;try{const u=await l.json();o=u.error||u.message||o}catch{}return Promise.reject(new Error(o))}async send(t,n={}){var i,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:r}=t,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:r,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var r,l,o;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((o=(l=(r=this.params)===null||r===void 0?void 0:r.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=jt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new yu(this,Yn.leave,{},t),i.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=jt.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const a=new AbortController,s=setTimeout(()=>a.abort(),i),r=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(s),r}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new yu(this,t,n,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>sT){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var a,s;const r=t.toLocaleLowerCase(),{close:l,error:o,leave:u,join:d}=Yn;if(i&&[l,o,u,d].indexOf(r)>=0&&i!==this._joinRef())return;let h=this._onMessage(r,n,i);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var v,b,w;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(b=m.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===r}).map(m=>m.callback(h,i)):(s=this.bindings[r])===null||s===void 0||s.filter(m=>{var v,b,w,p,g,y;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in m){const S=m.id,T=(v=m.filter)===null||v===void 0?void 0:v.event;return S&&((b=n.ids)===null||b===void 0?void 0:b.includes(S))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const S=(g=(p=m==null?void 0:m.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===r}).map(m=>{if(typeof h=="object"&&"ids"in h){const v=h.data,{schema:b,table:w,commit_timestamp:p,type:g,errors:y}=v;h=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:p,eventType:g,new:{},old:{},errors:y}),this._getPayloadRecords(v))}m.callback(h,i)})}_isClosed(){return this.state===jt.closed}_isJoined(){return this.state===jt.joined}_isJoining(){return this.state===jt.joining}_isLeaving(){return this.state===jt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const a=t.toLocaleLowerCase(),s={type:a,filter:n,callback:i};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&eh.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Yn.close,{},t)}_onError(t){this._on(Yn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=jt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=wg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=wg(t.columns,t.old_record)),n}}const pu=()=>{},Gl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hT=[1e3,2e3,5e3,1e4],mT=1e4,gT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vT{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=kd,this.transport=null,this.heartbeatIntervalMs=Gl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=pu,this.ref=0,this.reconnectTimer=null,this.logger=pu,this.conn=null,this.sendBuffer=[],this.serializer=new rT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...r)=>Is(async()=>{const{default:l}=await Promise.resolve().then(()=>ka);return{default:l}},void 0).then(({default:l})=>l(...r)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...r)=>s(...r)},!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Ud.websocket}`,this.httpEndpoint=W0(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=eT.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:iT}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Er.connecting:return ga.Connecting;case Er.open:return ga.Open;case Er.closing:return ga.Closing;default:return ga.Closed}}isConnected(){return this.connectionState()===ga.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===i);if(a)return a;{const s=new eh(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:i,payload:a,ref:s}=t,r=()=>{this.encode(t,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${n} ${i} (${s})`,a),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(aT,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Gl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:a,payload:s,ref:r}=n,l=r?`(${r})`:"",o=s.status||"";this.log("receive",`${o} ${i} ${a} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(i)).forEach(u=>u._trigger(a,s,r)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Yn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${i}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([gT],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const a={access_token:n,version:nT};n&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(Yn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Z0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,a,s,r,l,o,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:kd,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Gl.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(r=t==null?void 0:t.accessToken)!==null&&r!==void 0?r:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:pu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=t==null?void 0:t.reconnectAfterMs)!==null&&o!==void 0?o:f=>hT[f-1]||mT,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(f,h)=>h(JSON.stringify(f)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class th extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ot(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class yT extends th{constructor(t,n,i){super(t),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ld extends th{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const nh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Is(async()=>{const{default:i}=await Promise.resolve().then(()=>ka);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},pT=()=>F(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Is(()=>Promise.resolve().then(()=>ka),void 0)).Response:Response}),Bd=e=>{if(Array.isArray(e))return e.map(n=>Bd(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const a=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=Bd(i)}),t},bT=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},bu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},_T=(e,t,n)=>F(void 0,void 0,void 0,function*(){const i=yield pT();e instanceof i&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const s=e.status||500,r=(a==null?void 0:a.statusCode)||s+"";t(new yT(bu(a),s,r))}).catch(a=>{t(new Ld(bu(a),a))}):t(new Ld(bu(e),e))}),wT=(e,t,n,i)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!i?a:(bT(i)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(i)):a.body=i,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function ol(e,t,n,i,a,s){return F(this,void 0,void 0,function*(){return new Promise((r,l)=>{e(n,wT(t,i,a,s)).then(o=>{if(!o.ok)throw o;return i!=null&&i.noResolveJson?o:o.json()}).then(o=>r(o)).catch(o=>_T(o,l,i))})})}function Gr(e,t,n,i){return F(this,void 0,void 0,function*(){return ol(e,"GET",t,n,i)})}function In(e,t,n,i,a){return F(this,void 0,void 0,function*(){return ol(e,"POST",t,i,a,n)})}function Hd(e,t,n,i,a){return F(this,void 0,void 0,function*(){return ol(e,"PUT",t,i,a,n)})}function ST(e,t,n,i){return F(this,void 0,void 0,function*(){return ol(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function ih(e,t,n,i,a){return F(this,void 0,void 0,function*(){return ol(e,"DELETE",t,i,a,n)})}class xT{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return F(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ot(t))return{data:null,error:t};throw t}})}}var eb;class TT{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[eb]="BlobDownloadBuilder",this.promise=null}asStream(){return new xT(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return F(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ot(t))return{data:null,error:t};throw t}})}}eb=Symbol.toStringTag;const ET={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Tg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jT{constructor(t,n={},i,a){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=i,this.fetch=nh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,i,a){return F(this,void 0,void 0,function*(){try{let s;const r=Object.assign(Object.assign({},Tg),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(r.upsert)});const o=r.metadata;typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",r.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",r.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=i,l["cache-control"]=`max-age=${r.cacheControl}`,l["content-type"]=r.contentType,o&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield(t=="PUT"?Hd:In)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:l},r!=null&&r.duplex?{duplex:r.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ot(s))return{data:null,error:s};throw s}})}upload(t,n,i){return F(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,a){return F(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),r=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${r}`);l.searchParams.set("token",n);try{let o;const u=Object.assign({upsert:Tg.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",u.cacheControl)):(o=i,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Hd(this.fetch,l.toString(),o,{headers:d});return{data:{path:s,fullPath:f.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ot(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(t,n){return F(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const s=yield In(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),r=new URL(this.url+s.url),l=r.searchParams.get("token");if(!l)throw new th("No token returned by API");return{data:{signedUrl:r.toString(),path:t,token:l},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}update(t,n,i){return F(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return F(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}copy(t,n,i){return F(this,void 0,void 0,function*(){try{return{data:{path:(yield In(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,i){return F(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),s=yield In(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const r=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${r}`)},{data:s,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,i){return F(this,void 0,void 0,function*(){try{const a=yield In(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${s}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}download(t,n){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),r=s?`?${s}`:"",l=this._getFinalPath(t),o=()=>Gr(this.fetch,`${this.url}/${a}/${l}${r}`,{headers:this.headers,noResolveJson:!0});return new TT(o,this.shouldThrowOnError)}info(t){return F(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield Gr(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Bd(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}exists(t){return F(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield ST(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i)&&i instanceof Ld){const a=i.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),a=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&a.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&a.push(o);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${i}${u}`)}}}remove(t){return F(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}list(t,n,i){return F(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},ET),n),{prefix:t||""});return{data:yield In(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}listV2(t,n){return F(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield In(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const tb="2.78.0",nb={"X-Client-Info":`storage-js/${tb}`};class OT{constructor(t,n={},i,a){this.shouldThrowOnError=!1;const s=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},nb),n),this.fetch=nh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return F(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield Gr(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}getBucket(t){return F(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}createBucket(t){return F(this,arguments,void 0,function*(n,i={public:!1}){try{return{data:yield In(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ot(a))return{data:null,error:a};throw a}})}updateBucket(t,n){return F(this,void 0,void 0,function*(){try{return{data:yield Hd(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ot(i))return{data:null,error:i};throw i}})}emptyBucket(t){return F(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}deleteBucket(t){return F(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class AT{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},nb),n),this.fetch=nh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return F(this,void 0,void 0,function*(){try{return{data:yield In(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}listBuckets(t){return F(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const i=n.toString(),a=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Gr(this.fetch,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}deleteBucket(t){return F(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ot(n))return{data:null,error:n};throw n}})}}const ah={"X-Client-Info":`storage-js/${tb}`,"Content-Type":"application/json"};class ib extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function mn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class _u extends ib{constructor(t,n,i){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class CT extends ib{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Eg;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Eg||(Eg={}));const sh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Is(async()=>{const{default:i}=await Promise.resolve().then(()=>ka);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},DT=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},jg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),NT=(e,t,n)=>F(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const a=e.status||500,s=e;if(typeof s.json=="function")s.json().then(r=>{const l=(r==null?void 0:r.statusCode)||(r==null?void 0:r.code)||a+"";t(new _u(jg(r),a,l))}).catch(()=>{const r=a+"",l=s.statusText||`HTTP ${a} error`;t(new _u(l,a,r))});else{const r=a+"",l=s.statusText||`HTTP ${a} error`;t(new _u(l,a,r))}}else t(new CT(jg(e),e))}),RT=(e,t,n,i)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return i?(DT(i)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(i)):a.body=i,Object.assign(Object.assign({},a),n)):a};function MT(e,t,n,i,a,s){return F(this,void 0,void 0,function*(){return new Promise((r,l)=>{e(n,RT(t,i,a,s)).then(o=>{if(!o.ok)throw o;if(i!=null&&i.noResolveJson)return o;const u=o.headers.get("content-type");return!u||!u.includes("application/json")?{}:o.json()}).then(o=>r(o)).catch(o=>NT(o,l,i))})})}function gn(e,t,n,i,a){return F(this,void 0,void 0,function*(){return MT(e,"POST",t,i,a,n)})}class kT{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ah),n),this.fetch=sh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return F(this,void 0,void 0,function*(){try{return{data:(yield gn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}getIndex(t,n){return F(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}listIndexes(t){return F(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return F(this,void 0,void 0,function*(){try{return{data:(yield gn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mn(i))return{data:null,error:i};throw i}})}}class UT{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ah),n),this.fetch=sh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return F(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield gn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}getVectors(t){return F(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}listVectors(t){return F(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield gn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}queryVectors(t){return F(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}deleteVectors(t){return F(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield gn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}}class zT{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ah),n),this.fetch=sh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return F(this,void 0,void 0,function*(){try{return{data:(yield gn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}getBucket(t){return F(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}listBuckets(){return F(this,arguments,void 0,function*(t={}){try{return{data:yield gn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return F(this,void 0,void 0,function*(){try{return{data:(yield gn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mn(n))return{data:null,error:n};throw n}})}}class LT extends zT{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new BT(this.url,this.headers,t,this.fetch)}}class BT extends kT{constructor(t,n,i,a){super(t,n,a),this.vectorBucketName=i}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return F(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return F(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return F(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return F(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new HT(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class HT extends UT{constructor(t,n,i,a,s){super(t,n,s),this.vectorBucketName=i,this.indexName=a}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return F(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return F(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return F(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return F(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return F(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class qT extends OT{constructor(t,n={},i,a){super(t,n,i,a)}from(t){return new jT(this.url,this.headers,t,this.fetch)}get vectors(){return new LT(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new AT(this.url+"/iceberg",this.headers,this.fetch)}}const $T="2.78.0";let ur="";typeof Deno<"u"?ur="deno":typeof document<"u"?ur="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ur="react-native":ur="node";const IT={"X-Client-Info":`supabase-js-${ur}/${$T}`},VT={headers:IT},YT={schema:"public"},GT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},KT={},XT=e=>{let t;return e?t=e:typeof fetch>"u"?t=R0:t=fetch,(...n)=>t(...n)},QT=()=>typeof Headers>"u"?M0:Headers,JT=(e,t,n)=>{const i=XT(n),a=QT();return async(s,r)=>{var l;const o=(l=await t())!==null&&l!==void 0?l:e;let u=new a(r==null?void 0:r.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${o}`),i(s,Object.assign(Object.assign({},r),{headers:u}))}};function PT(e){return e.endsWith("/")?e:e+"/"}function ZT(e,t){var n,i;const{db:a,auth:s,realtime:r,global:l}=e,{db:o,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},o),a),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},d),r),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(i=l==null?void 0:l.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function FT(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(PT(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ab="2.78.0",Ja=30*1e3,qd=3,wu=qd*Ja,WT="http://localhost:9999",eE="supabase.auth.token",tE={"X-Client-Info":`gotrue-js/${ab}`},$d="X-Supabase-Api-Version",sb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,iE=10*60*1e3;class Kr extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function ie(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class aE extends Kr{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function sE(e){return ie(e)&&e.name==="AuthApiError"}class va extends Kr{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ia extends Kr{constructor(t,n,i,a){super(t,i,a),this.name=n,this.status=i}}class qn extends ia{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function rE(e){return ie(e)&&e.name==="AuthSessionMissingError"}class qa extends ia{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kl extends ia{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Xl extends ia{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lE(e){return ie(e)&&e.name==="AuthImplicitGrantRedirectError"}class Og extends ia{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Id extends ia{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Su(e){return ie(e)&&e.name==="AuthRetryableFetchError"}class Ag extends ia{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Vd extends ia{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Cg=` 	
\r=`.split(""),oE=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Cg.length;t+=1)e[Cg[t].charCodeAt(0)]=-2;for(let t=0;t<Yo.length;t+=1)e[Yo[t].charCodeAt(0)]=t;return e})();function Dg(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Yo[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Yo[i]),t.queuedBits-=6}}function rb(e,t,n){const i=oE[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ng(e){const t=[],n=r=>{t.push(String.fromCodePoint(r))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=r=>{dE(r,i,n)};for(let r=0;r<e.length;r+=1)rb(e.charCodeAt(r),a,s);return t.join("")}function cE(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function uE(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}cE(i,t)}}function dE(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if(!(e>>7-i&1)){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ys(e){const t=[],n={queue:0,queuedBits:0},i=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)rb(e.charCodeAt(a),n,i);return new Uint8Array(t)}function fE(e){const t=[];return uE(e,n=>t.push(n)),new Uint8Array(t)}function pa(e){const t=[],n={queue:0,queuedBits:0},i=a=>{t.push(a)};return e.forEach(a=>Dg(a,n,i)),Dg(null,n,i),t.join("")}function hE(e){return Math.round(Date.now()/1e3)+e}function mE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Xt=()=>typeof window<"u"&&typeof document<"u",la={tested:!1,writable:!1},lb=()=>{if(!Xt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(la.tested)return la.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),la.tested=!0,la.writable=!0}catch{la.tested=!0,la.writable=!1}return la.writable};function gE(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return n.searchParams.forEach((i,a)=>{t[a]=i}),t}const ob=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Is(async()=>{const{default:i}=await Promise.resolve().then(()=>ka);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},vE=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Pa=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},oa=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ji=async(e,t)=>{await e.removeItem(t)};class _c{constructor(){this.promise=new _c.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}_c.promiseConstructor=Promise;function xu(e){const t=e.split(".");if(t.length!==3)throw new Vd("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!nE.test(t[i]))throw new Vd("JWT not in base64url format");return{header:JSON.parse(Ng(t[0])),payload:JSON.parse(Ng(t[1])),signature:ys(t[2]),raw:{header:t[0],payload:t[1]}}}async function yE(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function pE(e,t){return new Promise((i,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const r=await e(s);if(!t(s,null,r)){i(r);return}}catch(r){if(!t(s,r)){a(r);return}}})()})}function bE(e){return("0"+e.toString(16)).substr(-2)}function _E(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let a="";for(let s=0;s<56;s++)a+=n.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(t),Array.from(t,bE).join("")}async function wE(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(i);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function SE(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await wE(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $a(e,t,n=!1){const i=_E();let a=i;n&&(a+="/PASSWORD_RECOVERY"),await Pa(e,`${t}-code-verifier`,a);const s=await SE(i);return[s,i===s?"plain":"s256"]}const xE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function TE(e){const t=e.headers.get($d);if(!t||!t.match(xE))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function EE(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function jE(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const OE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ia(e){if(!OE.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Tu(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function AE(e,t){return new Proxy(e,{get:(n,i,a)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const s=i.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,a)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,a)}})}function Rg(e){return JSON.parse(JSON.stringify(e))}const ha=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),CE=[502,503,504];async function Mg(e){var t;if(!vE(e))throw new Id(ha(e),0);if(CE.includes(e.status))throw new Id(ha(e),e.status);let n;try{n=await e.json()}catch(s){throw new va(ha(s),s)}let i;const a=TE(e);if(a&&a.getTime()>=sb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Ag(ha(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new qn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0))throw new Ag(ha(n),e.status,n.weak_password.reasons);throw new aE(ha(n),e.status||500,i)}const DE=(e,t,n,i)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),n))};async function fe(e,t,n,i){var a;const s=Object.assign({},i==null?void 0:i.headers);s[$d]||(s[$d]=sb["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const r=(a=i==null?void 0:i.query)!==null&&a!==void 0?a:{};i!=null&&i.redirectTo&&(r.redirect_to=i.redirectTo);const l=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",o=await NE(e,t,n+l,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(o):{data:Object.assign({},o),error:null}}async function NE(e,t,n,i,a,s){const r=DE(t,i,a,s);let l;try{l=await e(n,Object.assign({},r))}catch(o){throw console.error(o),new Id(ha(o),0)}if(l.ok||await Mg(l),i!=null&&i.noResolveJson)return l;try{return await l.json()}catch(o){await Mg(o)}}function $n(e){var t;let n=null;kE(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=hE(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function kg(e){const t=$n(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ki(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function RE(e){return{data:e,error:null}}function ME(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:a,verification_type:s}=e,r=$s(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:i,redirect_to:a,verification_type:s},o=Object.assign({},r);return{data:{properties:l,user:o},error:null}}function Ug(e){return e}function kE(e){return e.access_token&&e.refresh_token&&e.expires_in}const Eu=["global","local","others"];class UE{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=ob(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Eu[0]){if(Eu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Eu.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ki})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=$s(t,["options"]),a=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(a.new_email=i==null?void 0:i.newEmail,delete a.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:ME,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ki})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,a,s,r,l,o;try{const u={nextPage:null,lastPage:0,total:0},d=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:Ug});if(d.error)throw d.error;const f=await d.json(),h=(r=d.headers.get("x-total-count"))!==null&&r!==void 0?r:0,m=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return m.length>0&&(m.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=b}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ie(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ia(t);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ki})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ia(t);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:ki})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){Ia(t);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:ki})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Ia(t.userId);try{const{data:n,error:i}=await fe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:i}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ia(t.userId),Ia(t.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,a,s,r,l,o;try{const u={nextPage:null,lastPage:0,total:0},d=await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:Ug});if(d.error)throw d.error;const f=await d.json(),h=(r=d.headers.get("x-total-count"))!==null&&r!==void 0?r:0,m=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return m.length>0&&(m.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=b}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(ie(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await fe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ie(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await fe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}}function zg(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Va={debug:!!(globalThis&&lb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class cb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class zE extends cb{}async function LE(e,t,n){Va.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Va.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){Va.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{Va.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Va.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new zE(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Va.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function BE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ub(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function HE(e){return parseInt(e,16)}function qE(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function $E(e){var t;const{chainId:n,domain:i,expirationTime:a,issuedAt:s=new Date,nonce:r,notBefore:l,requestId:o,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(r&&r.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${r}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=ub(e.address),v=d?`${d}://${i}`:i,b=e.statement?`${e.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${m}

${b}`;let p=`URI: ${f}
Version: ${h}
Chain ID: ${n}${r?`
Nonce: ${r}`:""}
Issued At: ${s.toISOString()}`;if(a&&(p+=`
Expiration Time: ${a.toISOString()}`),l&&(p+=`
Not Before: ${l.toISOString()}`),o&&(p+=`
Request ID: ${o}`),u){let g=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);g+=`
- ${y}`}p+=g}return`${w}
${p}`}class _t extends Error{constructor({message:t,code:n,cause:i,name:a}){var s;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(s=a??(i instanceof Error?i.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Go extends _t{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function IE({error:e,options:t}){var n,i,a;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new _t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new _t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=s.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new _t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new _t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new _t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new _t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new _t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(db(r)){if(s.rp.id!==r)return new _t({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new _t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function VE({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new _t({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(db(i)){if(n.rpId!==i)return new _t({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new _t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class YE{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const GE=new YE;function KE(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,a=$s(e,["challenge","user","excludeCredentials"]),s=ys(t).buffer,r=Object.assign(Object.assign({},n),{id:ys(n.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:s,user:r});if(i&&i.length>0){l.excludeCredentials=new Array(i.length);for(let o=0;o<i.length;o++){const u=i[o];l.excludeCredentials[o]=Object.assign(Object.assign({},u),{id:ys(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function XE(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=$s(e,["challenge","allowCredentials"]),a=ys(t).buffer,s=Object.assign(Object.assign({},i),{challenge:a});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let r=0;r<n.length;r++){const l=n[r];s.allowCredentials[r]=Object.assign(Object.assign({},l),{id:ys(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function QE(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:pa(new Uint8Array(e.response.attestationObject)),clientDataJSON:pa(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function JE(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:pa(new Uint8Array(a.authenticatorData)),clientDataJSON:pa(new Uint8Array(a.clientDataJSON)),signature:pa(new Uint8Array(a.signature)),userHandle:a.userHandle?pa(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function db(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Lg(){var e,t;return!!(Xt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function PE(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Go("Browser returned unexpected credential type",t)}:{data:null,error:new Go("Empty credential response",t)}}catch(t){return{data:null,error:IE({error:t,options:e})}}}async function ZE(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Go("Browser returned unexpected credential type",t)}:{data:null,error:new Go("Empty credential response",t)}}catch(t){return{data:null,error:VE({error:t,options:e})}}}const FE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},WE={userVerification:"preferred",hints:["security-key"]};function Ko(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),i={};for(const a of e)if(a)for(const s in a){const r=a[s];if(r!==void 0)if(Array.isArray(r))i[s]=r;else if(n(r))i[s]=r;else if(t(r)){const l=i[s];t(l)?i[s]=Ko(l,r):i[s]=Ko(r)}else i[s]=r}return i}function e1(e,t){return Ko(FE,e,t||{})}function t1(e,t){return Ko(WE,e,t||{})}class n1{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:a},s){try{const{data:r,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!r)return{data:null,error:l};const o=a??GE.createNewAbortSignal();if(r.webauthn.type==="create"){const{user:u}=r.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${i}`),u.displayName||(u.displayName=u.name)}switch(r.webauthn.type){case"create":{const u=e1(r.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:f}=await PE({publicKey:u,signal:o});return d?{data:{factorId:t,challengeId:r.id,webauthn:{type:r.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=t1(r.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:f}=await ZE(Object.assign(Object.assign({},r.webauthn.credential_options),{publicKey:u,signal:o}));return d?{data:{factorId:t,challengeId:r.id,webauthn:{type:r.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(r){return ie(r)?{data:null,error:r}:{data:null,error:new va("Unexpected error in challenge",r)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}},s){if(!n)return{data:null,error:new Kr("rpId is required for WebAuthn authentication")};try{if(!Lg())return{data:null,error:new va("Browser does not support WebAuthn",null)};const{data:r,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:a},{request:s});if(!r)return{data:null,error:l};const{webauthn:o}=r;return this._verify({factorId:t,challengeId:r.challengeId,webauthn:{type:o.type,rpId:n,rpOrigins:i,credential_response:o.credential_response}})}catch(r){return ie(r)?{data:null,error:r}:{data:null,error:new va("Unexpected error in authenticate",r)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a},s){if(!n)return{data:null,error:new Kr("rpId is required for WebAuthn registration")};try{if(!Lg())return{data:null,error:new va("Browser does not support WebAuthn",null)};const{data:r,error:l}=await this._enroll({friendlyName:t});if(!r)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:o,error:u}=await this._challenge({factorId:r.id,friendlyName:r.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:a},{create:s});return o?this._verify({factorId:r.id,challengeId:o.challengeId,webauthn:{rpId:n,rpOrigins:i,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:u}}catch(r){return ie(r)?{data:null,error:r}:{data:null,error:new va("Unexpected error in register",r)}}}}BE();const i1={url:WT,storageKey:eE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Bg(e,t,n){return await n()}const Ya={};class Xr{get jwks(){var t,n;return(n=(t=Ya[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Ya[this.storageKey]=Object.assign(Object.assign({},Ya[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Ya[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ya[this.storageKey]=Object.assign(Object.assign({},Ya[this.storageKey]),{cachedAt:t})}constructor(t){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Xr.nextInstanceID,Xr.nextInstanceID+=1,this.instanceID>0&&Xt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},i1),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new UE({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=ob(a.fetch),this.lock=a.lock||Bg,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Xt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=LE:this.lock=Bg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new n1(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:lb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zg(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=zg(this.memoryStorage)),Xt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ab}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=gE(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),Xt()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:s}=await this._getSessionFromURL(n,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),lE(s)){const o=(t=s.details)===null||t===void 0?void 0:t.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:r,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",r,"redirect type",l),await this._saveSession(r),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ie(n)?{error:n}:{error:new va("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,a;try{const s=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:$n}),{data:r,error:l}=s;if(l||!r)return{data:{user:null,session:null},error:l};const o=r.session,u=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,i,a;try{let s;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await $a(this.storage,this.storageKey)),s=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:v},xform:$n})}else if("phone"in t){const{phone:d,password:f,options:h}=t;s=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(i=h==null?void 0:h.data)!==null&&i!==void 0?i:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:$n})}else throw new Kl("You must provide either an email or phone number and a password");const{data:r,error:l}=s;if(l||!r)return{data:{user:null,session:null},error:l};const o=r.session,u=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:r,options:l}=t;n=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:kg})}else if("phone"in t){const{phone:s,password:r,options:l}=t;n=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:kg})}else throw new Kl("You must provide either an email or phone number and a password");const{data:i,error:a}=n;return a?{data:{user:null,session:null},error:a}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new qa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,i,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,a,s,r,l,o,u,d,f,h;let m,v;if("message"in t)m=t.message,v=t.signature;else{const{chain:b,wallet:w,statement:p,options:g}=t;let y;if(Xt())if(typeof w=="object")y=w;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")y=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=w}const S=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),T=await y.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=ub(T[0]);let x=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!x){const A=await y.request({method:"eth_chainId"});x=HE(A)}const j={domain:S.host,address:E,statement:p,uri:S.href,version:"1",chainId:x,nonce:(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(r=(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=$E(j),v=await y.request({method:"personal_sign",params:[qE(m),E]})}try{const{data:b,error:w}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:v},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:$n});if(w)throw w;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new qa}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:w})}catch(b){if(ie(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(t){var n,i,a,s,r,l,o,u,d,f,h,m;let v,b;if("message"in t)v=t.message,b=t.signature;else{const{chain:w,wallet:p,statement:g,options:y}=t;let S;if(Xt())if(typeof p=="object")S=p;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))S=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=p}const T=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const E=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),g?{statement:g}:null));let x;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")x=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)x=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in x&&"signature"in x&&(typeof x.signedMessage=="string"||x.signedMessage instanceof Uint8Array)&&x.signature instanceof Uint8Array)v=typeof x.signedMessage=="string"?x.signedMessage:new TextDecoder().decode(x.signedMessage),b=x.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${T.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(a=(i=y==null?void 0:y.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=y==null?void 0:y.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((r=y==null?void 0:y.signInWithSolana)===null||r===void 0)&&r.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((f=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...y.signInWithSolana.resources.map(x=>`- ${x}`)]:[]].join(`
`);const E=await S.signMessage(new TextEncoder().encode(v),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=E}}try{const{data:w,error:p}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:pa(b)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:$n});if(p)throw p;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new qa}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:p})}catch(w){if(ie(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const n=await oa(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(n??"").split("/");try{const{data:s,error:r}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:$n});if(await ji(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new qa}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:r})}catch(s){if(ie(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:i,token:a,access_token:s,nonce:r}=t,l=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:s,nonce:r,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:$n}),{data:o,error:u}=l;return u?{data:{user:null,session:null},error:u}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new qa}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:u})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,i,a,s,r;try{if("email"in t){const{email:l,options:o}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await $a(this.storage,this.storageKey));const{error:f}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:o}=t,{data:u,error:d}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=o==null?void 0:o.data)!==null&&a!==void 0?a:{},create_user:(s=o==null?void 0:o.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(r=o==null?void 0:o.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Kl("You must provide either an email or phone number.")}catch(l){if(ie(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,i;try{let a,s;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:r,error:l}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:$n});if(l)throw l;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,u=r.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(a){if(ie(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,i,a;try{let s=null,r=null;return this.flowType==="pkce"&&([s,r]=await $a(this.storage,this.storageKey)),await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:r}),headers:this.headers,xform:RE})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new qn;const{error:a}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(ie(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:a,options:s}=t,{error:r}=await fe(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in t){const{phone:i,type:a,options:s}=t,{data:r,error:l}=await fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:r==null?void 0:r.message_id},error:l}}throw new Kl("You must provide either an email or phone number and a type")}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await oa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<wu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const r=await oa(this.userStorage,this.storageKey+"-user");r!=null&&r.user?t.user=r.user:t.user=Tu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const r={value:this.suppressGetSessionWarning};t.user=AE(t.user,r),r.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ki}):await this._useSession(async n=>{var i,a,s;const{data:r,error:l}=n;if(l)throw l;return!(!((i=r.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qn}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=r.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:ki})})}catch(n){if(ie(n))return rE(n)&&(await this._removeSession(),await ji(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:a,error:s}=i;if(s)throw s;if(!a.session)throw new qn;const r=a.session;let l=null,o=null;this.flowType==="pkce"&&t.email!=null&&([l,o]=await $a(this.storage,this.storageKey));const{data:u,error:d}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:o}),jwt:r.access_token,xform:ki});if(d)throw d;return r.user=u.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(i){if(ie(i))return{data:{user:null},error:i};throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new qn;const n=Date.now()/1e3;let i=n,a=!0,s=null;const{payload:r}=xu(t.access_token);if(r.exp&&(i=r.exp,a=i<=n),a){const{data:l,error:o}=await this._callRefreshToken(t.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:o}=await this._getUser(t.access_token);if(o)throw o;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:r,error:l}=n;if(l)throw l;t=(i=r.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new qn;const{data:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Xt())throw new Xl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Xl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Og("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Og("No code detected.");const{data:g,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:s,refresh_token:r,expires_in:l,expires_at:o,token_type:u}=t;if(!s||!l||!r||!u)throw new Xl("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;o&&(h=parseInt(o));const m=h-d;m*1e3<=Ja&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const v=h-f;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,h,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,h,d);const{data:b,error:w}=await this._getUser(s);if(w)throw w;const p={provider_token:i,provider_refresh_token:a,access_token:s,expires_in:f,expires_at:h,refresh_token:r,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(i){if(ie(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await oa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:a,error:s}=n;if(s)return{error:s};const r=(i=a.session)===null||i===void 0?void 0:i.access_token;if(r){const{error:l}=await this.admin.signOut(r,t);if(l&&!(sE(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await ji(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=mE(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,a;try{const{data:{session:s},error:r}=n;if(r)throw r;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await $a(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:a}=await this._useSession(async s=>{var r,l,o,u,d;const{data:f,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Xt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:t.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(ie(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:a,data:{session:s}}=n;if(a)throw a;const{options:r,provider:l,token:o,access_token:u,nonce:d}=t,f=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s==null?void 0:s.access_token)!==null&&i!==void 0?i:void 0,body:{provider:l,id_token:o,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:$n}),{data:h,error:m}=f;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new qa}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:m})}catch(a){if(ie(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,a;const{data:s,error:r}=n;if(r)throw r;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await pE(async a=>(a>0&&await yE(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:$n})),(a,s)=>{const r=200*Math.pow(2,a);return s&&Su(s)&&Date.now()+r-i<Ja})}catch(i){if(this._debug(n,"error",i),ie(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),Xt()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await oa(this.storage,this.storageKey);if(a&&this.userStorage){let r=await oa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!r&&(r={user:a.user},await Pa(this.userStorage,this.storageKey+"-user",r)),a.user=(t=r==null?void 0:r.user)!==null&&t!==void 0?t:Tu()}else if(a&&!a.user&&!a.user){const r=await oa(this.storage,this.storageKey+"-user");r&&(r!=null&&r.user)?(a.user=r.user,await ji(this.storage,this.storageKey+"-user"),await Pa(this.storage,this.storageKey,a)):a.user=Tu()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const s=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<wu;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${wu}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:r}=await this._callRefreshToken(a.refresh_token);r&&(console.error(r),Su(r)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",r),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:r,error:l}=await this._getUser(a.access_token);!l&&(r!=null&&r.user)?(a.user=r.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(i,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new qn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new _c;const{data:s,error:r}=await this._refreshAccessToken(t);if(r)throw r;if(!s.session)throw new qn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(a,"error",s),ie(s)){const r={data:null,error:s};return Su(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(r),r}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,i=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],r=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(o){s.push(o)}});if(await Promise.all(r),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Pa(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const s=Rg(a);await Pa(this.storage,this.storageKey,s)}else{const a=Rg(n);await Pa(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ji(this.storage,this.storageKey),await ji(this.storage,this.storageKey+"-code-verifier"),await ji(this.storage,this.storageKey+"-user"),this.userStorage&&await ji(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Xt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ja);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-t)/Ja);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ja}ms, refresh threshold is ${qd} ticks`),a<=qd&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof cb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const a=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,r]=await $a(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(r)}`});a.push(l.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);a.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:a,error:s}=n;return s?{data:null,error:s}:await fe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,a;const{data:s,error:r}=n;if(r)return{data:null,error:r};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:o,error:u}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&o.type==="totp"&&(!((a=o==null?void 0:o.totp)===null||a===void 0)&&a.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:s}=n;if(s)return{data:null,error:s};const r=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?QE(t.webauthn.credential_response):JE(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:o}=await fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:r,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(n){if(ie(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:s}=n;if(s)return{data:null,error:s};const r=await fe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});if(r.error)return r;const{data:l}=r;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:KE(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:XE(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const a={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])a.all.push(s),s.status==="verified"&&a[s.factor_type].push(s);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:i},error:a}=await this.getSession();if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=xu(i.access_token);let r=null;s.aal&&(r=s.aal);let l=r;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=s.amr||[];return{data:{currentLevel:r,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?{data:null,error:a}:i?await fe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):{data:null,error:new qn}})}catch(n){if(ie(n))return{data:null,error:n};throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:a},error:s}=i;if(s)return{data:null,error:s};if(!a)return{data:null,error:new qn};const r=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return r.data&&r.data.redirect_url&&Xt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(r.data.redirect_url),r})}catch(i){if(ie(i))return{data:null,error:i};throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:a},error:s}=i;if(s)return{data:null,error:s};if(!a)return{data:null,error:new qn};const r=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return r.data&&r.data.redirect_url&&Xt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(r.data.redirect_url),r})}catch(i){if(ie(i))return{data:null,error:i};throw i}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(l=>l.kid===t);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(l=>l.kid===t),i&&this.jwks_cached_at+iE>a)return i;const{data:s,error:r}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,i=s.keys.find(l=>l.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};i=m.session.access_token}const{header:a,payload:s,signature:r,raw:{header:l,payload:o}}=xu(i);n!=null&&n.allowExpired||EE(s.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(i);if(m)throw m;return{data:{claims:s,header:a,signature:r},error:null}}const d=jE(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,r,fE(`${l}.${o}`)))throw new Vd("Invalid JWT signature");return{data:{claims:s,header:a,signature:r},error:null}}catch(i){if(ie(i))return{data:null,error:i};throw i}}}Xr.nextInstanceID=0;const a1=Xr;class s1 extends a1{constructor(t){super(t)}}class r1{constructor(t,n,i){var a,s,r;this.supabaseUrl=t,this.supabaseKey=n;const l=FT(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const o=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:YT,realtime:KT,auth:Object.assign(Object.assign({},GT),{storageKey:o}),global:VT},d=ZT(i??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=d.auth)!==null&&r!==void 0?r:{},this.headers,d.global.fetch),this.fetch=JT(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Wx(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new qT(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Gx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,i)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(n=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:a,userStorage:s,storageKey:r,flowType:l,lock:o,debug:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new s1({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:r,autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:a,userStorage:s,flowType:l,lock:o,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new vT(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,n,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const l1=(e,t,n)=>new r1(e,t,n);function o1(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}o1()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const c1="https://vqpubtahhvtkftafdlrp.supabase.co",u1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZxcHVidGFoaHZ0a2Z0YWZkbHJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMjQ2NjUsImV4cCI6MjA3NzgwMDY2NX0.o2905IF2CWRJ-krYtA6MnL7_KALlNiwD211Sw-of7mI",qe=l1(c1,u1);function d1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _.useMemo(()=>i=>{t.forEach(a=>a(i))},t)}const wc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Gs(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function rh(e){return"nodeType"in e}function Ft(e){var t,n;return e?Gs(e)?e:rh(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function lh(e){const{Document:t}=Ft(e);return e instanceof t}function cl(e){return Gs(e)?!1:e instanceof Ft(e).HTMLElement}function fb(e){return e instanceof Ft(e).SVGElement}function Ks(e){return e?Gs(e)?e.document:rh(e)?lh(e)?e:cl(e)||fb(e)?e.ownerDocument:document:document:document}const Gn=wc?_.useLayoutEffect:_.useEffect;function Sc(e){const t=_.useRef(e);return Gn(()=>{t.current=e}),_.useCallback(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t.current==null?void 0:t.current(...i)},[])}function f1(){const e=_.useRef(null),t=_.useCallback((i,a)=>{e.current=setInterval(i,a)},[]),n=_.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Qr(e,t){t===void 0&&(t=[e]);const n=_.useRef(e);return Gn(()=>{n.current!==e&&(n.current=e)},t),n}function ul(e,t){const n=_.useRef();return _.useMemo(()=>{const i=e(n.current);return n.current=i,i},[...t])}function Xo(e){const t=Sc(e),n=_.useRef(null),i=_.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,i]}function Qo(e){const t=_.useRef();return _.useEffect(()=>{t.current=e},[e]),t.current}let ju={};function dl(e,t){return _.useMemo(()=>{if(t)return t;const n=ju[e]==null?0:ju[e]+1;return ju[e]=n,e+"-"+n},[e,t])}function hb(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i.reduce((s,r)=>{const l=Object.entries(r);for(const[o,u]of l){const d=s[o];d!=null&&(s[o]=d+e*u)}return s},{...t})}}const ps=hb(1),Jr=hb(-1);function h1(e){return"clientX"in e&&"clientY"in e}function xc(e){if(!e)return!1;const{KeyboardEvent:t}=Ft(e.target);return t&&e instanceof t}function m1(e){if(!e)return!1;const{TouchEvent:t}=Ft(e.target);return t&&e instanceof t}function Jo(e){if(m1(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return h1(e)?{x:e.clientX,y:e.clientY}:null}const ea=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[ea.Translate.toString(e),ea.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:i}=e;return t+" "+n+"ms "+i}}}),Hg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function g1(e){return e.matches(Hg)?e:e.querySelector(Hg)}const v1={display:"none"};function y1(e){let{id:t,value:n}=e;return at.createElement("div",{id:t,style:v1},n)}function p1(e){let{id:t,announcement:n,ariaLiveType:i="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return at.createElement("div",{id:t,style:a,role:"status","aria-live":i,"aria-atomic":!0},n)}function b1(){const[e,t]=_.useState("");return{announce:_.useCallback(i=>{i!=null&&t(i)},[]),announcement:e}}const mb=_.createContext(null);function _1(e){const t=_.useContext(mb);_.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function w1(){const[e]=_.useState(()=>new Set),t=_.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[_.useCallback(i=>{let{type:a,event:s}=i;e.forEach(r=>{var l;return(l=r[a])==null?void 0:l.call(r,s)})},[e]),t]}const S1={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},x1={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function T1(e){let{announcements:t=x1,container:n,hiddenTextDescribedById:i,screenReaderInstructions:a=S1}=e;const{announce:s,announcement:r}=b1(),l=dl("DndLiveRegion"),[o,u]=_.useState(!1);if(_.useEffect(()=>{u(!0)},[]),_1(_.useMemo(()=>({onDragStart(f){let{active:h}=f;s(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:m}=f;t.onDragMove&&s(t.onDragMove({active:h,over:m}))},onDragOver(f){let{active:h,over:m}=f;s(t.onDragOver({active:h,over:m}))},onDragEnd(f){let{active:h,over:m}=f;s(t.onDragEnd({active:h,over:m}))},onDragCancel(f){let{active:h,over:m}=f;s(t.onDragCancel({active:h,over:m}))}}),[s,t])),!o)return null;const d=at.createElement(at.Fragment,null,at.createElement(y1,{id:i,value:a.draggable}),at.createElement(p1,{id:l,announcement:r}));return n?ya.createPortal(d,n):d}var Ot;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ot||(Ot={}));function Po(){}function Ou(e,t){return _.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function E1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _.useMemo(()=>[...t].filter(i=>i!=null),[...t])}const Kn=Object.freeze({x:0,y:0});function gb(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function j1(e,t){const n=Jo(e);if(!n)return"0 0";const i={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return i.x+"% "+i.y+"%"}function vb(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return n-i}function O1(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return i-n}function qg(e){let{left:t,top:n,height:i,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+i},{x:t+a,y:n+i}]}function yb(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function $g(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const A1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const a=$g(t,t.left,t.top),s=[];for(const r of i){const{id:l}=r,o=n.get(l);if(o){const u=gb($g(o),a);s.push({id:l,data:{droppableContainer:r,value:u}})}}return s.sort(vb)},C1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const a=qg(t),s=[];for(const r of i){const{id:l}=r,o=n.get(l);if(o){const u=qg(o),d=a.reduce((h,m,v)=>h+gb(u[v],m),0),f=Number((d/4).toFixed(4));s.push({id:l,data:{droppableContainer:r,value:f}})}}return s.sort(vb)};function D1(e,t){const n=Math.max(t.top,e.top),i=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),r=a-i,l=s-n;if(i<a&&n<s){const o=t.width*t.height,u=e.width*e.height,d=r*l,f=d/(o+u-d);return Number(f.toFixed(4))}return 0}const N1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const a=[];for(const s of i){const{id:r}=s,l=n.get(r);if(l){const o=D1(l,t);o>0&&a.push({id:r,data:{droppableContainer:s,value:o}})}}return a.sort(O1)};function R1(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function pb(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Kn}function M1(e){return function(n){for(var i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];return a.reduce((r,l)=>({...r,top:r.top+e*l.y,bottom:r.bottom+e*l.y,left:r.left+e*l.x,right:r.right+e*l.x}),{...n})}}const k1=M1(1);function bb(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function U1(e,t,n){const i=bb(t);if(!i)return e;const{scaleX:a,scaleY:s,x:r,y:l}=i,o=e.left-r-(1-a)*parseFloat(n),u=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,f=s?e.height/s:e.height;return{width:d,height:f,top:u,right:o+d,bottom:u+f,left:o}}const z1={ignoreTransform:!1};function Xs(e,t){t===void 0&&(t=z1);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Ft(e).getComputedStyle(e);u&&(n=U1(n,u,d))}const{top:i,left:a,width:s,height:r,bottom:l,right:o}=n;return{top:i,left:a,width:s,height:r,bottom:l,right:o}}function Ig(e){return Xs(e,{ignoreTransform:!0})}function L1(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function B1(e,t){return t===void 0&&(t=Ft(e).getComputedStyle(e)),t.position==="fixed"}function H1(e,t){t===void 0&&(t=Ft(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const s=t[a];return typeof s=="string"?n.test(s):!1})}function Tc(e,t){const n=[];function i(a){if(t!=null&&n.length>=t||!a)return n;if(lh(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!cl(a)||fb(a)||n.includes(a))return n;const s=Ft(e).getComputedStyle(a);return a!==e&&H1(a,s)&&n.push(a),B1(a,s)?n:i(a.parentNode)}return e?i(e):n}function _b(e){const[t]=Tc(e,1);return t??null}function Au(e){return!wc||!e?null:Gs(e)?e:rh(e)?lh(e)||e===Ks(e).scrollingElement?window:cl(e)?e:null:null}function wb(e){return Gs(e)?e.scrollX:e.scrollLeft}function Sb(e){return Gs(e)?e.scrollY:e.scrollTop}function Yd(e){return{x:wb(e),y:Sb(e)}}var Rt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Rt||(Rt={}));function xb(e){return!wc||!e?!1:e===document.scrollingElement}function Tb(e){const t={x:0,y:0},n=xb(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,r=e.scrollTop>=i.y,l=e.scrollLeft>=i.x;return{isTop:a,isLeft:s,isBottom:r,isRight:l,maxScroll:i,minScroll:t}}const q1={x:.2,y:.2};function $1(e,t,n,i,a){let{top:s,left:r,right:l,bottom:o}=n;i===void 0&&(i=10),a===void 0&&(a=q1);const{isTop:u,isBottom:d,isLeft:f,isRight:h}=Tb(e),m={x:0,y:0},v={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!u&&s<=t.top+b.height?(m.y=Rt.Backward,v.y=i*Math.abs((t.top+b.height-s)/b.height)):!d&&o>=t.bottom-b.height&&(m.y=Rt.Forward,v.y=i*Math.abs((t.bottom-b.height-o)/b.height)),!h&&l>=t.right-b.width?(m.x=Rt.Forward,v.x=i*Math.abs((t.right-b.width-l)/b.width)):!f&&r<=t.left+b.width&&(m.x=Rt.Backward,v.x=i*Math.abs((t.left+b.width-r)/b.width)),{direction:m,speed:v}}function I1(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:r}=window;return{top:0,left:0,right:s,bottom:r,width:s,height:r}}const{top:t,left:n,right:i,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:i,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Eb(e){return e.reduce((t,n)=>ps(t,Yd(n)),Kn)}function V1(e){return e.reduce((t,n)=>t+wb(n),0)}function Y1(e){return e.reduce((t,n)=>t+Sb(n),0)}function jb(e,t){if(t===void 0&&(t=Xs),!e)return;const{top:n,left:i,bottom:a,right:s}=t(e);_b(e)&&(a<=0||s<=0||n>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const G1=[["x",["left","right"],V1],["y",["top","bottom"],Y1]];class oh{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Tc(n),a=Eb(i);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,r,l]of G1)for(const o of r)Object.defineProperty(this,o,{get:()=>{const u=l(i),d=a[s]-u;return this.rect[o]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ar{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=t}add(t,n,i){var a;(a=this.target)==null||a.addEventListener(t,n,i),this.listeners.push([t,n,i])}}function K1(e){const{EventTarget:t}=Ft(e);return e instanceof t?e:Ks(e)}function Cu(e,t){const n=Math.abs(e.x),i=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+i**2)>t:"x"in t&&"y"in t?n>t.x&&i>t.y:"x"in t?n>t.x:"y"in t?i>t.y:!1}var An;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(An||(An={}));function Vg(e){e.preventDefault()}function X1(e){e.stopPropagation()}var Re;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Re||(Re={}));const Ob={start:[Re.Space,Re.Enter],cancel:[Re.Esc],end:[Re.Space,Re.Enter,Re.Tab]},Q1=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Re.Right:return{...n,x:n.x+25};case Re.Left:return{...n,x:n.x-25};case Re.Down:return{...n,y:n.y+25};case Re.Up:return{...n,y:n.y-25}}};class ch{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ar(Ks(n)),this.windowListeners=new Ar(Ft(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(An.Resize,this.handleCancel),this.windowListeners.add(An.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(An.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,i=t.node.current;i&&jb(i),n(Kn)}handleKeyDown(t){if(xc(t)){const{active:n,context:i,options:a}=this.props,{keyboardCodes:s=Ob,coordinateGetter:r=Q1,scrollBehavior:l="smooth"}=a,{code:o}=t;if(s.end.includes(o)){this.handleEnd(t);return}if(s.cancel.includes(o)){this.handleCancel(t);return}const{collisionRect:u}=i.current,d=u?{x:u.left,y:u.top}:Kn;this.referenceCoordinates||(this.referenceCoordinates=d);const f=r(t,{active:n,context:i.current,currentCoordinates:d});if(f){const h=Jr(f,d),m={x:0,y:0},{scrollableAncestors:v}=i.current;for(const b of v){const w=t.code,{isTop:p,isRight:g,isLeft:y,isBottom:S,maxScroll:T,minScroll:E}=Tb(b),x=I1(b),j={x:Math.min(w===Re.Right?x.right-x.width/2:x.right,Math.max(w===Re.Right?x.left:x.left+x.width/2,f.x)),y:Math.min(w===Re.Down?x.bottom-x.height/2:x.bottom,Math.max(w===Re.Down?x.top:x.top+x.height/2,f.y))},A=w===Re.Right&&!g||w===Re.Left&&!y,M=w===Re.Down&&!S||w===Re.Up&&!p;if(A&&j.x!==f.x){const P=b.scrollLeft+h.x,G=w===Re.Right&&P<=T.x||w===Re.Left&&P>=E.x;if(G&&!h.y){b.scrollTo({left:P,behavior:l});return}G?m.x=b.scrollLeft-P:m.x=w===Re.Right?b.scrollLeft-T.x:b.scrollLeft-E.x,m.x&&b.scrollBy({left:-m.x,behavior:l});break}else if(M&&j.y!==f.y){const P=b.scrollTop+h.y,G=w===Re.Down&&P<=T.y||w===Re.Up&&P>=E.y;if(G&&!h.x){b.scrollTo({top:P,behavior:l});return}G?m.y=b.scrollTop-P:m.y=w===Re.Down?b.scrollTop-T.y:b.scrollTop-E.y,m.y&&b.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,ps(Jr(f,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:i}=this.props;t.preventDefault(),i(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ch.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:i=Ob,onActivation:a}=t,{active:s}=n;const{code:r}=e.nativeEvent;if(i.start.includes(r)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function Yg(e){return!!(e&&"distance"in e)}function Gg(e){return!!(e&&"delay"in e)}class uh{constructor(t,n,i){var a;i===void 0&&(i=K1(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:r}=s;this.props=t,this.events=n,this.document=Ks(r),this.documentListeners=new Ar(this.document),this.listeners=new Ar(i),this.windowListeners=new Ar(Ft(r)),this.initialCoordinates=(a=Jo(s))!=null?a:Kn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(An.Resize,this.handleCancel),this.windowListeners.add(An.DragStart,Vg),this.windowListeners.add(An.VisibilityChange,this.handleCancel),this.windowListeners.add(An.ContextMenu,Vg),this.documentListeners.add(An.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Gg(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Yg(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:i,onPending:a}=this.props;a(i,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(An.Click,X1,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(An.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:i,initialCoordinates:a,props:s}=this,{onMove:r,options:{activationConstraint:l}}=s;if(!a)return;const o=(n=Jo(t))!=null?n:Kn,u=Jr(a,o);if(!i&&l){if(Yg(l)){if(l.tolerance!=null&&Cu(u,l.tolerance))return this.handleCancel();if(Cu(u,l.distance))return this.handleStart()}if(Gg(l)&&Cu(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),r(o)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Re.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const J1={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class dh extends uh{constructor(t){const{event:n}=t,i=Ks(n.target);super(t,J1,i)}}dh.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return!n.isPrimary||n.button!==0?!1:(i==null||i({event:n}),!0)}}];const P1={move:{name:"mousemove"},end:{name:"mouseup"}};var Gd;(function(e){e[e.RightClick=2]="RightClick"})(Gd||(Gd={}));class Z1 extends uh{constructor(t){super(t,P1,Ks(t.event.target))}}Z1.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return n.button===Gd.RightClick?!1:(i==null||i({event:n}),!0)}}];const Du={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ab extends uh{constructor(t){super(t,Du)}static setup(){return window.addEventListener(Du.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Du.move.name,t)};function t(){}}}Ab.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;const{touches:a}=n;return a.length>1?!1:(i==null||i({event:n}),!0)}}];var Cr;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Cr||(Cr={}));var Zo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Zo||(Zo={}));function F1(e){let{acceleration:t,activator:n=Cr.Pointer,canScroll:i,draggingRect:a,enabled:s,interval:r=5,order:l=Zo.TreeOrder,pointerCoordinates:o,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:h}=e;const m=ej({delta:f,disabled:!s}),[v,b]=f1(),w=_.useRef({x:0,y:0}),p=_.useRef({x:0,y:0}),g=_.useMemo(()=>{switch(n){case Cr.Pointer:return o?{top:o.y,bottom:o.y,left:o.x,right:o.x}:null;case Cr.DraggableRect:return a}},[n,a,o]),y=_.useRef(null),S=_.useCallback(()=>{const E=y.current;if(!E)return;const x=w.current.x*p.current.x,j=w.current.y*p.current.y;E.scrollBy(x,j)},[]),T=_.useMemo(()=>l===Zo.TreeOrder?[...u].reverse():u,[l,u]);_.useEffect(()=>{if(!s||!u.length||!g){b();return}for(const E of T){if((i==null?void 0:i(E))===!1)continue;const x=u.indexOf(E),j=d[x];if(!j)continue;const{direction:A,speed:M}=$1(E,j,g,t,h);for(const P of["x","y"])m[P][A[P]]||(M[P]=0,A[P]=0);if(M.x>0||M.y>0){b(),y.current=E,v(S,r),w.current=M,p.current=A;return}}w.current={x:0,y:0},p.current={x:0,y:0},b()},[t,S,i,b,s,r,JSON.stringify(g),JSON.stringify(m),v,u,T,d,JSON.stringify(h)])}const W1={x:{[Rt.Backward]:!1,[Rt.Forward]:!1},y:{[Rt.Backward]:!1,[Rt.Forward]:!1}};function ej(e){let{delta:t,disabled:n}=e;const i=Qo(t);return ul(a=>{if(n||!i||!a)return W1;const s={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[Rt.Backward]:a.x[Rt.Backward]||s.x===-1,[Rt.Forward]:a.x[Rt.Forward]||s.x===1},y:{[Rt.Backward]:a.y[Rt.Backward]||s.y===-1,[Rt.Forward]:a.y[Rt.Forward]||s.y===1}}},[n,t,i])}function tj(e,t){const n=t!=null?e.get(t):void 0,i=n?n.node.current:null;return ul(a=>{var s;return t==null?null:(s=i??a)!=null?s:null},[i,t])}function nj(e,t){return _.useMemo(()=>e.reduce((n,i)=>{const{sensor:a}=i,s=a.activators.map(r=>({eventName:r.eventName,handler:t(r.handler,i)}));return[...n,...s]},[]),[e,t])}var Rs;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Rs||(Rs={}));var Kd;(function(e){e.Optimized="optimized"})(Kd||(Kd={}));const Kg=new Map;function ij(e,t){let{dragging:n,dependencies:i,config:a}=t;const[s,r]=_.useState(null),{frequency:l,measure:o,strategy:u}=a,d=_.useRef(e),f=w(),h=Qr(f),m=_.useCallback(function(p){p===void 0&&(p=[]),!h.current&&r(g=>g===null?p:g.concat(p.filter(y=>!g.includes(y))))},[h]),v=_.useRef(null),b=ul(p=>{if(f&&!n)return Kg;if(!p||p===Kg||d.current!==e||s!=null){const g=new Map;for(let y of e){if(!y)continue;if(s&&s.length>0&&!s.includes(y.id)&&y.rect.current){g.set(y.id,y.rect.current);continue}const S=y.node.current,T=S?new oh(o(S),S):null;y.rect.current=T,T&&g.set(y.id,T)}return g}return p},[e,s,n,f,o]);return _.useEffect(()=>{d.current=e},[e]),_.useEffect(()=>{f||m()},[n,f]),_.useEffect(()=>{s&&s.length>0&&r(null)},[JSON.stringify(s)]),_.useEffect(()=>{f||typeof l!="number"||v.current!==null||(v.current=setTimeout(()=>{m(),v.current=null},l))},[l,f,m,...i]),{droppableRects:b,measureDroppableContainers:m,measuringScheduled:s!=null};function w(){switch(u){case Rs.Always:return!1;case Rs.BeforeDragging:return n;default:return!n}}}function fh(e,t){return ul(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function aj(e,t){return fh(e,t)}function sj(e){let{callback:t,disabled:n}=e;const i=Sc(t),a=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(i)},[i,n]);return _.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Ec(e){let{callback:t,disabled:n}=e;const i=Sc(t),a=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(i)},[n]);return _.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function rj(e){return new oh(Xs(e),e)}function Xg(e,t,n){t===void 0&&(t=rj);const[i,a]=_.useState(null);function s(){a(o=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=o??n)!=null?u:null}const d=t(e);return JSON.stringify(o)===JSON.stringify(d)?o:d})}const r=sj({callback(o){if(e)for(const u of o){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){s();break}}}}),l=Ec({callback:s});return Gn(()=>{s(),e?(l==null||l.observe(e),r==null||r.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),r==null||r.disconnect())},[e]),i}function lj(e){const t=fh(e);return pb(e,t)}const Qg=[];function oj(e){const t=_.useRef(e),n=ul(i=>e?i&&i!==Qg&&e&&t.current&&e.parentNode===t.current.parentNode?i:Tc(e):Qg,[e]);return _.useEffect(()=>{t.current=e},[e]),n}function cj(e){const[t,n]=_.useState(null),i=_.useRef(e),a=_.useCallback(s=>{const r=Au(s.target);r&&n(l=>l?(l.set(r,Yd(r)),new Map(l)):null)},[]);return _.useEffect(()=>{const s=i.current;if(e!==s){r(s);const l=e.map(o=>{const u=Au(o);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,Yd(u)]):null}).filter(o=>o!=null);n(l.length?new Map(l):null),i.current=e}return()=>{r(e),r(s)};function r(l){l.forEach(o=>{const u=Au(o);u==null||u.removeEventListener("scroll",a)})}},[a,e]),_.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,r)=>ps(s,r),Kn):Eb(e):Kn,[e,t])}function Jg(e,t){t===void 0&&(t=[]);const n=_.useRef(null);return _.useEffect(()=>{n.current=null},t),_.useEffect(()=>{const i=e!==Kn;i&&!n.current&&(n.current=e),!i&&n.current&&(n.current=null)},[e]),n.current?Jr(e,n.current):Kn}function uj(e){_.useEffect(()=>{if(!wc)return;const t=e.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function dj(e,t){return _.useMemo(()=>e.reduce((n,i)=>{let{eventName:a,handler:s}=i;return n[a]=r=>{s(r,t)},n},{}),[e,t])}function Cb(e){return _.useMemo(()=>e?L1(e):null,[e])}const Pg=[];function fj(e,t){t===void 0&&(t=Xs);const[n]=e,i=Cb(n?Ft(n):null),[a,s]=_.useState(Pg);function r(){s(()=>e.length?e.map(o=>xb(o)?i:new oh(t(o),o)):Pg)}const l=Ec({callback:r});return Gn(()=>{l==null||l.disconnect(),r(),e.forEach(o=>l==null?void 0:l.observe(o))},[e]),a}function Db(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return cl(t)?t:e}function hj(e){let{measure:t}=e;const[n,i]=_.useState(null),a=_.useCallback(u=>{for(const{target:d}of u)if(cl(d)){i(f=>{const h=t(d);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),s=Ec({callback:a}),r=_.useCallback(u=>{const d=Db(u);s==null||s.disconnect(),d&&(s==null||s.observe(d)),i(d?t(d):null)},[t,s]),[l,o]=Xo(r);return _.useMemo(()=>({nodeRef:l,rect:n,setRef:o}),[n,l,o])}const mj=[{sensor:dh,options:{}},{sensor:ch,options:{}}],gj={current:{}},fo={draggable:{measure:Ig},droppable:{measure:Ig,strategy:Rs.WhileDragging,frequency:Kd.Optimized},dragOverlay:{measure:Xs}};class Dr extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,i;return(n=(i=this.get(t))==null?void 0:i.node.current)!=null?n:void 0}}const vj={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Dr,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Po},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:fo,measureDroppableContainers:Po,windowRect:null,measuringScheduled:!1},Nb={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Po,draggableNodes:new Map,over:null,measureDroppableContainers:Po},fl=_.createContext(Nb),Rb=_.createContext(vj);function yj(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Dr}}}function pj(e,t){switch(t.type){case Ot.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ot.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ot.DragEnd:case Ot.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ot.RegisterDroppable:{const{element:n}=t,{id:i}=n,a=new Dr(e.droppable.containers);return a.set(i,n),{...e,droppable:{...e.droppable,containers:a}}}case Ot.SetDroppableDisabled:{const{id:n,key:i,disabled:a}=t,s=e.droppable.containers.get(n);if(!s||i!==s.key)return e;const r=new Dr(e.droppable.containers);return r.set(n,{...s,disabled:a}),{...e,droppable:{...e.droppable,containers:r}}}case Ot.UnregisterDroppable:{const{id:n,key:i}=t,a=e.droppable.containers.get(n);if(!a||i!==a.key)return e;const s=new Dr(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function bj(e){let{disabled:t}=e;const{active:n,activatorEvent:i,draggableNodes:a}=_.useContext(fl),s=Qo(i),r=Qo(n==null?void 0:n.id);return _.useEffect(()=>{if(!t&&!i&&s&&r!=null){if(!xc(s)||document.activeElement===s.target)return;const l=a.get(r);if(!l)return;const{activatorNode:o,node:u}=l;if(!o.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[o.current,u.current]){if(!d)continue;const f=g1(d);if(f){f.focus();break}}})}},[i,t,a,r,s]),null}function Mb(e,t){let{transform:n,...i}=t;return e!=null&&e.length?e.reduce((a,s)=>s({transform:a,...i}),n):n}function _j(e){return _.useMemo(()=>({draggable:{...fo.draggable,...e==null?void 0:e.draggable},droppable:{...fo.droppable,...e==null?void 0:e.droppable},dragOverlay:{...fo.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function wj(e){let{activeNode:t,measure:n,initialRect:i,config:a=!0}=e;const s=_.useRef(!1),{x:r,y:l}=typeof a=="boolean"?{x:a,y:a}:a;Gn(()=>{if(!r&&!l||!t){s.current=!1;return}if(s.current||!i)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),f=pb(d,i);if(r||(f.x=0),l||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=_b(u);h&&h.scrollBy({top:f.y,left:f.x})}},[t,r,l,i,n])}const jc=_.createContext({...Kn,scaleX:1,scaleY:1});var Ci;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ci||(Ci={}));const Sj=_.memo(function(t){var n,i,a,s;let{id:r,accessibility:l,autoScroll:o=!0,children:u,sensors:d=mj,collisionDetection:f=N1,measuring:h,modifiers:m,...v}=t;const b=_.useReducer(pj,void 0,yj),[w,p]=b,[g,y]=w1(),[S,T]=_.useState(Ci.Uninitialized),E=S===Ci.Initialized,{draggable:{active:x,nodes:j,translate:A},droppable:{containers:M}}=w,P=x!=null?j.get(x):null,G=_.useRef({initial:null,translated:null}),Q=_.useMemo(()=>{var rt;return x!=null?{id:x,data:(rt=P==null?void 0:P.data)!=null?rt:gj,rect:G}:null},[x,P]),re=_.useRef(null),[z,N]=_.useState(null),[$,K]=_.useState(null),me=Qr(v,Object.values(v)),J=dl("DndDescribedBy",r),st=_.useMemo(()=>M.getEnabled(),[M]),De=_j(h),{droppableRects:Xe,measureDroppableContainers:Le,measuringScheduled:Pe}=ij(st,{dragging:E,dependencies:[A.x,A.y],config:De.droppable}),Ee=tj(j,x),ht=_.useMemo(()=>$?Jo($):null,[$]),I=Ua(),ce=aj(Ee,De.draggable.measure);wj({activeNode:x!=null?j.get(x):null,config:I.layoutShiftCompensation,initialRect:ce,measure:De.draggable.measure});const te=Xg(Ee,De.draggable.measure,ce),_e=Xg(Ee?Ee.parentElement:null),ke=_.useRef({activatorEvent:null,active:null,activeNode:Ee,collisionRect:null,collisions:null,droppableRects:Xe,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ze=M.getNodeFor((n=ke.current.over)==null?void 0:n.id),xe=hj({measure:De.dragOverlay.measure}),Ue=(i=xe.nodeRef.current)!=null?i:Ee,ct=E?(a=xe.rect)!=null?a:te:null,ee=!!(xe.nodeRef.current&&xe.rect),oe=lj(ee?null:te),ge=Cb(Ue?Ft(Ue):null),Te=oj(E?ze??Ee:null),pt=fj(Te),Ge=Mb(m,{transform:{x:A.x-oe.x,y:A.y-oe.y,scaleX:1,scaleY:1},activatorEvent:$,active:Q,activeNodeRect:te,containerNodeRect:_e,draggingNodeRect:ct,over:ke.current.over,overlayNodeRect:xe.rect,scrollableAncestors:Te,scrollableAncestorRects:pt,windowRect:ge}),k=ht?ps(ht,A):null,C=cj(Te),R=Jg(C),B=Jg(C,[te]),V=ps(Ge,R),H=ct?k1(ct,Ge):null,X=Q&&H?f({active:Q,collisionRect:H,droppableRects:Xe,droppableContainers:st,pointerCoordinates:k}):null,L=yb(X,"id"),[ae,Z]=_.useState(null),le=ee?Ge:ps(Ge,B),Y=R1(le,(s=ae==null?void 0:ae.rect)!=null?s:null,te),W=_.useRef(null),ve=_.useCallback((rt,bt)=>{let{sensor:Ut,options:xn}=bt;if(re.current==null)return;const Yt=j.get(re.current);if(!Yt)return;const zt=rt.nativeEvent,Et=new Ut({active:re.current,activeNode:Yt,event:zt,options:xn,context:ke,onAbort(mt){if(!j.get(mt))return;const{onDragAbort:Wt}=me.current,Dt={id:mt};Wt==null||Wt(Dt),g({type:"onDragAbort",event:Dt})},onPending(mt,Tn,Wt,Dt){if(!j.get(mt))return;const{onDragPending:jn}=me.current,Kt={id:mt,constraint:Tn,initialCoordinates:Wt,offset:Dt};jn==null||jn(Kt),g({type:"onDragPending",event:Kt})},onStart(mt){const Tn=re.current;if(Tn==null)return;const Wt=j.get(Tn);if(!Wt)return;const{onDragStart:Dt}=me.current,En={activatorEvent:zt,active:{id:Tn,data:Wt.data,rect:G}};ya.unstable_batchedUpdates(()=>{Dt==null||Dt(En),T(Ci.Initializing),p({type:Ot.DragStart,initialCoordinates:mt,active:Tn}),g({type:"onDragStart",event:En}),N(W.current),K(zt)})},onMove(mt){p({type:Ot.DragMove,coordinates:mt})},onEnd:un(Ot.DragEnd),onCancel:un(Ot.DragCancel)});W.current=Et;function un(mt){return async function(){const{active:Wt,collisions:Dt,over:En,scrollAdjustedTranslate:jn}=ke.current;let Kt=null;if(Wt&&jn){const{cancelDrop:aa}=me.current;Kt={activatorEvent:zt,active:Wt,collisions:Dt,delta:jn,over:En},mt===Ot.DragEnd&&typeof aa=="function"&&await Promise.resolve(aa(Kt))&&(mt=Ot.DragCancel)}re.current=null,ya.unstable_batchedUpdates(()=>{p({type:mt}),T(Ci.Uninitialized),Z(null),N(null),K(null),W.current=null;const aa=mt===Ot.DragEnd?"onDragEnd":"onDragCancel";if(Kt){const Qs=me.current[aa];Qs==null||Qs(Kt),g({type:aa,event:Kt})}})}}},[j]),ut=_.useCallback((rt,bt)=>(Ut,xn)=>{const Yt=Ut.nativeEvent,zt=j.get(xn);if(re.current!==null||!zt||Yt.dndKit||Yt.defaultPrevented)return;const Et={active:zt};rt(Ut,bt.options,Et)===!0&&(Yt.dndKit={capturedBy:bt.sensor},re.current=xn,ve(Ut,bt))},[j,ve]),Vt=nj(d,ut);uj(d),Gn(()=>{te&&S===Ci.Initializing&&T(Ci.Initialized)},[te,S]),_.useEffect(()=>{const{onDragMove:rt}=me.current,{active:bt,activatorEvent:Ut,collisions:xn,over:Yt}=ke.current;if(!bt||!Ut)return;const zt={active:bt,activatorEvent:Ut,collisions:xn,delta:{x:V.x,y:V.y},over:Yt};ya.unstable_batchedUpdates(()=>{rt==null||rt(zt),g({type:"onDragMove",event:zt})})},[V.x,V.y]),_.useEffect(()=>{const{active:rt,activatorEvent:bt,collisions:Ut,droppableContainers:xn,scrollAdjustedTranslate:Yt}=ke.current;if(!rt||re.current==null||!bt||!Yt)return;const{onDragOver:zt}=me.current,Et=xn.get(L),un=Et&&Et.rect.current?{id:Et.id,rect:Et.rect.current,data:Et.data,disabled:Et.disabled}:null,mt={active:rt,activatorEvent:bt,collisions:Ut,delta:{x:Yt.x,y:Yt.y},over:un};ya.unstable_batchedUpdates(()=>{Z(un),zt==null||zt(mt),g({type:"onDragOver",event:mt})})},[L]),Gn(()=>{ke.current={activatorEvent:$,active:Q,activeNode:Ee,collisionRect:H,collisions:X,droppableRects:Xe,draggableNodes:j,draggingNode:Ue,draggingNodeRect:ct,droppableContainers:M,over:ae,scrollableAncestors:Te,scrollAdjustedTranslate:V},G.current={initial:ct,translated:H}},[Q,Ee,X,H,j,Ue,ct,Xe,M,ae,Te,V]),F1({...I,delta:A,draggingRect:H,pointerCoordinates:k,scrollableAncestors:Te,scrollableAncestorRects:pt});const cn=_.useMemo(()=>({active:Q,activeNode:Ee,activeNodeRect:te,activatorEvent:$,collisions:X,containerNodeRect:_e,dragOverlay:xe,draggableNodes:j,droppableContainers:M,droppableRects:Xe,over:ae,measureDroppableContainers:Le,scrollableAncestors:Te,scrollableAncestorRects:pt,measuringConfiguration:De,measuringScheduled:Pe,windowRect:ge}),[Q,Ee,te,$,X,_e,xe,j,M,Xe,ae,Le,Te,pt,De,Pe,ge]),Qn=_.useMemo(()=>({activatorEvent:$,activators:Vt,active:Q,activeNodeRect:te,ariaDescribedById:{draggable:J},dispatch:p,draggableNodes:j,over:ae,measureDroppableContainers:Le}),[$,Vt,Q,te,p,J,j,ae,Le]);return at.createElement(mb.Provider,{value:y},at.createElement(fl.Provider,{value:Qn},at.createElement(Rb.Provider,{value:cn},at.createElement(jc.Provider,{value:Y},u)),at.createElement(bj,{disabled:(l==null?void 0:l.restoreFocus)===!1})),at.createElement(T1,{...l,hiddenTextDescribedById:J}));function Ua(){const rt=(z==null?void 0:z.autoScrollEnabled)===!1,bt=typeof o=="object"?o.enabled===!1:o===!1,Ut=E&&!rt&&!bt;return typeof o=="object"?{...o,enabled:Ut}:{enabled:Ut}}}),xj=_.createContext(null),Zg="button",Tj="Draggable";function Ej(e){let{id:t,data:n,disabled:i=!1,attributes:a}=e;const s=dl(Tj),{activators:r,activatorEvent:l,active:o,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:h}=_.useContext(fl),{role:m=Zg,roleDescription:v="draggable",tabIndex:b=0}=a??{},w=(o==null?void 0:o.id)===t,p=_.useContext(w?jc:xj),[g,y]=Xo(),[S,T]=Xo(),E=dj(r,t),x=Qr(n);Gn(()=>(f.set(t,{id:t,key:s,node:g,activatorNode:S,data:x}),()=>{const A=f.get(t);A&&A.key===s&&f.delete(t)}),[f,t]);const j=_.useMemo(()=>({role:m,tabIndex:b,"aria-disabled":i,"aria-pressed":w&&m===Zg?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[i,m,b,w,v,d.draggable]);return{active:o,activatorEvent:l,activeNodeRect:u,attributes:j,isDragging:w,listeners:i?void 0:E,node:g,over:h,setNodeRef:y,setActivatorNodeRef:T,transform:p}}function kb(){return _.useContext(Rb)}const jj="Droppable",Oj={timeout:25};function Ub(e){let{data:t,disabled:n=!1,id:i,resizeObserverConfig:a}=e;const s=dl(jj),{active:r,dispatch:l,over:o,measureDroppableContainers:u}=_.useContext(fl),d=_.useRef({disabled:n}),f=_.useRef(!1),h=_.useRef(null),m=_.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:w}={...Oj,...a},p=Qr(b??i),g=_.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(p.current)?p.current:[p.current]),m.current=null},w)},[w]),y=Ec({callback:g,disabled:v||!r}),S=_.useCallback((j,A)=>{y&&(A&&(y.unobserve(A),f.current=!1),j&&y.observe(j))},[y]),[T,E]=Xo(S),x=Qr(t);return _.useEffect(()=>{!y||!T.current||(y.disconnect(),f.current=!1,y.observe(T.current))},[T,y]),_.useEffect(()=>(l({type:Ot.RegisterDroppable,element:{id:i,key:s,disabled:n,node:T,rect:h,data:x}}),()=>l({type:Ot.UnregisterDroppable,key:s,id:i})),[i]),_.useEffect(()=>{n!==d.current.disabled&&(l({type:Ot.SetDroppableDisabled,id:i,key:s,disabled:n}),d.current.disabled=n)},[i,s,n,l]),{active:r,rect:h,isOver:(o==null?void 0:o.id)===i,node:T,over:o,setNodeRef:E}}function Aj(e){let{animation:t,children:n}=e;const[i,a]=_.useState(null),[s,r]=_.useState(null),l=Qo(n);return!n&&!i&&l&&a(l),Gn(()=>{if(!s)return;const o=i==null?void 0:i.key,u=i==null?void 0:i.props.id;if(o==null||u==null){a(null);return}Promise.resolve(t(u,s)).then(()=>{a(null)})},[t,i,s]),at.createElement(at.Fragment,null,n,i?_.cloneElement(i,{ref:r}):null)}const Cj={x:0,y:0,scaleX:1,scaleY:1};function Dj(e){let{children:t}=e;return at.createElement(fl.Provider,{value:Nb},at.createElement(jc.Provider,{value:Cj},t))}const Nj={position:"fixed",touchAction:"none"},Rj=e=>xc(e)?"transform 250ms ease":void 0,Mj=_.forwardRef((e,t)=>{let{as:n,activatorEvent:i,adjustScale:a,children:s,className:r,rect:l,style:o,transform:u,transition:d=Rj}=e;if(!l)return null;const f=a?u:{...u,scaleX:1,scaleY:1},h={...Nj,width:l.width,height:l.height,top:l.top,left:l.left,transform:ea.Transform.toString(f),transformOrigin:a&&i?j1(i,l):void 0,transition:typeof d=="function"?d(i):d,...o};return at.createElement(n,{className:r,style:h,ref:t},s)}),kj=e=>t=>{let{active:n,dragOverlay:i}=t;const a={},{styles:s,className:r}=e;if(s!=null&&s.active)for(const[l,o]of Object.entries(s.active))o!==void 0&&(a[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,o));if(s!=null&&s.dragOverlay)for(const[l,o]of Object.entries(s.dragOverlay))o!==void 0&&i.node.style.setProperty(l,o);return r!=null&&r.active&&n.node.classList.add(r.active),r!=null&&r.dragOverlay&&i.node.classList.add(r.dragOverlay),function(){for(const[o,u]of Object.entries(a))n.node.style.setProperty(o,u);r!=null&&r.active&&n.node.classList.remove(r.active)}},Uj=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:ea.Transform.toString(t)},{transform:ea.Transform.toString(n)}]},zj={duration:250,easing:"ease",keyframes:Uj,sideEffects:kj({styles:{active:{opacity:"0"}}})};function Lj(e){let{config:t,draggableNodes:n,droppableContainers:i,measuringConfiguration:a}=e;return Sc((s,r)=>{if(t===null)return;const l=n.get(s);if(!l)return;const o=l.node.current;if(!o)return;const u=Db(r);if(!u)return;const{transform:d}=Ft(r).getComputedStyle(r),f=bb(d);if(!f)return;const h=typeof t=="function"?t:Bj(t);return jb(o,a.draggable.measure),h({active:{id:s,data:l.data,node:o,rect:a.draggable.measure(o)},draggableNodes:n,dragOverlay:{node:r,rect:a.dragOverlay.measure(u)},droppableContainers:i,measuringConfiguration:a,transform:f})})}function Bj(e){const{duration:t,easing:n,sideEffects:i,keyframes:a}={...zj,...e};return s=>{let{active:r,dragOverlay:l,transform:o,...u}=s;if(!t)return;const d={x:l.rect.left-r.rect.left,y:l.rect.top-r.rect.top},f={scaleX:o.scaleX!==1?r.rect.width*o.scaleX/l.rect.width:1,scaleY:o.scaleY!==1?r.rect.height*o.scaleY/l.rect.height:1},h={x:o.x-d.x,y:o.y-d.y,...f},m=a({...u,active:r,dragOverlay:l,transform:{initial:o,final:h}}),[v]=m,b=m[m.length-1];if(JSON.stringify(v)===JSON.stringify(b))return;const w=i==null?void 0:i({active:r,dragOverlay:l,...u}),p=l.node.animate(m,{duration:t,easing:n,fill:"forwards"});return new Promise(g=>{p.onfinish=()=>{w==null||w(),g()}})}}let Fg=0;function Hj(e){return _.useMemo(()=>{if(e!=null)return Fg++,Fg},[e])}const qj=at.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:i,style:a,transition:s,modifiers:r,wrapperElement:l="div",className:o,zIndex:u=999}=e;const{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggableNodes:v,droppableContainers:b,dragOverlay:w,over:p,measuringConfiguration:g,scrollableAncestors:y,scrollableAncestorRects:S,windowRect:T}=kb(),E=_.useContext(jc),x=Hj(f==null?void 0:f.id),j=Mb(r,{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggingNodeRect:w.rect,over:p,overlayNodeRect:w.rect,scrollableAncestors:y,scrollableAncestorRects:S,transform:E,windowRect:T}),A=fh(h),M=Lj({config:i,draggableNodes:v,droppableContainers:b,measuringConfiguration:g}),P=A?w.setRef:void 0;return at.createElement(Dj,null,at.createElement(Aj,{animation:M},f&&x?at.createElement(Mj,{key:x,id:f.id,ref:P,as:l,activatorEvent:d,adjustScale:t,className:o,transition:s,rect:A,style:{zIndex:u,...a},transform:j},n):null))});function qi(e,t,n){const i=e.slice();return i.splice(n<0?i.length+n:n,0,i.splice(t,1)[0]),i}function $j(e,t){return e.reduce((n,i,a)=>{const s=t.get(i);return s&&(n[a]=s),n},Array(e.length))}function Ql(e){return e!==null&&e>=0}function Ij(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Vj(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const zb=e=>{let{rects:t,activeIndex:n,overIndex:i,index:a}=e;const s=qi(t,i,n),r=t[a],l=s[a];return!l||!r?null:{x:l.left-r.left,y:l.top-r.top,scaleX:l.width/r.width,scaleY:l.height/r.height}},Jl={scaleX:1,scaleY:1},ir=e=>{var t;let{activeIndex:n,activeNodeRect:i,index:a,rects:s,overIndex:r}=e;const l=(t=s[n])!=null?t:i;if(!l)return null;if(a===n){const u=s[r];return u?{x:0,y:n<r?u.top+u.height-(l.top+l.height):u.top-l.top,...Jl}:null}const o=Yj(s,a,n);return a>n&&a<=r?{x:0,y:-l.height-o,...Jl}:a<n&&a>=r?{x:0,y:l.height+o,...Jl}:{x:0,y:0,...Jl}};function Yj(e,t,n){const i=e[t],a=e[t-1],s=e[t+1];return i?n<t?a?i.top-(a.top+a.height):s?s.top-(i.top+i.height):0:s?s.top-(i.top+i.height):a?i.top-(a.top+a.height):0:0}const Lb="Sortable",Bb=at.createContext({activeIndex:-1,containerId:Lb,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:zb,disabled:{draggable:!1,droppable:!1}});function ar(e){let{children:t,id:n,items:i,strategy:a=zb,disabled:s=!1}=e;const{active:r,dragOverlay:l,droppableRects:o,over:u,measureDroppableContainers:d}=kb(),f=dl(Lb,n),h=l.rect!==null,m=_.useMemo(()=>i.map(E=>typeof E=="object"&&"id"in E?E.id:E),[i]),v=r!=null,b=r?m.indexOf(r.id):-1,w=u?m.indexOf(u.id):-1,p=_.useRef(m),g=!Ij(m,p.current),y=w!==-1&&b===-1||g,S=Vj(s);Gn(()=>{g&&v&&d(m)},[g,m,v,d]),_.useEffect(()=>{p.current=m},[m]);const T=_.useMemo(()=>({activeIndex:b,containerId:f,disabled:S,disableTransforms:y,items:m,overIndex:w,useDragOverlay:h,sortedRects:$j(m,o),strategy:a}),[b,f,S.draggable,S.droppable,y,m,w,o,h,a]);return at.createElement(Bb.Provider,{value:T},t)}const Gj=e=>{let{id:t,items:n,activeIndex:i,overIndex:a}=e;return qi(n,i,a).indexOf(t)},Kj=e=>{let{containerId:t,isSorting:n,wasDragging:i,index:a,items:s,newIndex:r,previousItems:l,previousContainerId:o,transition:u}=e;return!u||!i||l!==s&&a===r?!1:n?!0:r!==a&&t===o},Xj={duration:200,easing:"ease"},Hb="transform",Qj=ea.Transition.toString({property:Hb,duration:0,easing:"linear"}),Jj={roleDescription:"sortable"};function Pj(e){let{disabled:t,index:n,node:i,rect:a}=e;const[s,r]=_.useState(null),l=_.useRef(n);return Gn(()=>{if(!t&&n!==l.current&&i.current){const o=a.current;if(o){const u=Xs(i.current,{ignoreTransform:!0}),d={x:o.left-u.left,y:o.top-u.top,scaleX:o.width/u.width,scaleY:o.height/u.height};(d.x||d.y)&&r(d)}}n!==l.current&&(l.current=n)},[t,n,i,a]),_.useEffect(()=>{s&&r(null)},[s]),s}function qb(e){let{animateLayoutChanges:t=Kj,attributes:n,disabled:i,data:a,getNewIndex:s=Gj,id:r,strategy:l,resizeObserverConfig:o,transition:u=Xj}=e;const{items:d,containerId:f,activeIndex:h,disabled:m,disableTransforms:v,sortedRects:b,overIndex:w,useDragOverlay:p,strategy:g}=_.useContext(Bb),y=Zj(i,m),S=d.indexOf(r),T=_.useMemo(()=>({sortable:{containerId:f,index:S,items:d},...a}),[f,a,S,d]),E=_.useMemo(()=>d.slice(d.indexOf(r)),[d,r]),{rect:x,node:j,isOver:A,setNodeRef:M}=Ub({id:r,data:T,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...o}}),{active:P,activatorEvent:G,activeNodeRect:Q,attributes:re,setNodeRef:z,listeners:N,isDragging:$,over:K,setActivatorNodeRef:me,transform:J}=Ej({id:r,data:T,attributes:{...Jj,...n},disabled:y.draggable}),st=d1(M,z),De=!!P,Xe=De&&!v&&Ql(h)&&Ql(w),Le=!p&&$,Pe=Le&&Xe?J:null,ht=Xe?Pe??(l??g)({rects:b,activeNodeRect:Q,activeIndex:h,overIndex:w,index:S}):null,I=Ql(h)&&Ql(w)?s({id:r,items:d,activeIndex:h,overIndex:w}):S,ce=P==null?void 0:P.id,te=_.useRef({activeId:ce,items:d,newIndex:I,containerId:f}),_e=d!==te.current.items,ke=t({active:P,containerId:f,isDragging:$,isSorting:De,id:r,index:S,items:d,newIndex:te.current.newIndex,previousItems:te.current.items,previousContainerId:te.current.containerId,transition:u,wasDragging:te.current.activeId!=null}),ze=Pj({disabled:!ke,index:S,node:j,rect:x});return _.useEffect(()=>{De&&te.current.newIndex!==I&&(te.current.newIndex=I),f!==te.current.containerId&&(te.current.containerId=f),d!==te.current.items&&(te.current.items=d)},[De,I,f,d]),_.useEffect(()=>{if(ce===te.current.activeId)return;if(ce!=null&&te.current.activeId==null){te.current.activeId=ce;return}const Ue=setTimeout(()=>{te.current.activeId=ce},50);return()=>clearTimeout(Ue)},[ce]),{active:P,activeIndex:h,attributes:re,data:T,rect:x,index:S,newIndex:I,items:d,isOver:A,isSorting:De,isDragging:$,listeners:N,node:j,overIndex:w,over:K,setNodeRef:st,setActivatorNodeRef:me,setDroppableNodeRef:M,setDraggableNodeRef:z,transform:ze??ht,transition:xe()};function xe(){if(ze||_e&&te.current.newIndex===S)return Qj;if(!(Le&&!xc(G)||!u)&&(De||ke))return ea.Transition.toString({...u,property:Hb})}}function Zj(e,t){var n,i;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(i=e==null?void 0:e.droppable)!=null?i:t.droppable}}function Fo(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Fj=[Re.Down,Re.Right,Re.Up,Re.Left],Wj=(e,t)=>{let{context:{active:n,collisionRect:i,droppableRects:a,droppableContainers:s,over:r,scrollableAncestors:l}}=t;if(Fj.includes(e.code)){if(e.preventDefault(),!n||!i)return;const o=[];s.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const h=a.get(f.id);if(h)switch(e.code){case Re.Down:i.top<h.top&&o.push(f);break;case Re.Up:i.top>h.top&&o.push(f);break;case Re.Left:i.left>h.left&&o.push(f);break;case Re.Right:i.left<h.left&&o.push(f);break}});const u=C1({collisionRect:i,droppableRects:a,droppableContainers:o});let d=yb(u,"id");if(d===(r==null?void 0:r.id)&&u.length>1&&(d=u[1].id),d!=null){const f=s.get(n.id),h=s.get(d),m=h?a.get(h.id):null,v=h==null?void 0:h.node.current;if(v&&m&&f&&h){const w=Tc(v).some((E,x)=>l[x]!==E),p=$b(f,h),g=eO(f,h),y=w||!p?{x:0,y:0}:{x:g?i.width-m.width:0,y:g?i.height-m.height:0},S={x:m.left,y:m.top};return y.x&&y.y?S:Jr(S,y)}}}};function $b(e,t){return!Fo(e)||!Fo(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function eO(e,t){return!Fo(e)||!Fo(t)||!$b(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Se=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`},ma=e=>{const t=String(e.getFullYear()).slice(2),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),s=["","","","","","",""][e.getDay()];return`${t}.${n}.${i}(${s})`},Ga=e=>{const t=new Date(e),n=String(t.getFullYear()).slice(2),i=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),o=["","","","","","",""][t.getDay()];return`${n}.${i}.${a}(${o}) ${s}:${r}`},tO=e=>{const t=new Date;return Se(e)===Se(t)},nO=()=>{const[e,t]=_.useState(null),[n,i]=_.useState(!0);return _.useEffect(()=>{qe.auth.getSession().then(({data:{session:o}})=>{t(o),i(!1)});const{data:{subscription:l}}=qe.auth.onAuthStateChange((o,u)=>{t(u)});return()=>l.unsubscribe()},[]),{session:e,authLoading:n,handleGoogleLogin:async()=>{try{const{error:l}=await qe.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/todo-note/"}});if(l)throw l}catch(l){alert(" : "+l.message)}},handleAppleLogin:async()=>{try{const{error:l}=await qe.auth.signInWithOAuth({provider:"apple",options:{redirectTo:window.location.origin+"/todo-note/"}});if(l)throw l}catch(l){alert(" : "+l.message)}},handleLogout:async()=>{try{const{error:l}=await qe.auth.signOut();if(l)throw l}catch(l){alert(" : "+l.message)}}}};function iO({showSidebar:e,setShowSidebar:t,session:n,viewMode:i,setViewMode:a,onOpenRoutine:s,onOpenGanttChart:r,onOpenEncouragementModal:l,onOpenAddSection:o,onOpenHiddenSections:u,onLogout:d}){var f,h;return c.jsxs(c.Fragment,{children:[e&&c.jsx("div",{className:"sidebar-overlay",onClick:()=>t(!1)}),c.jsxs("div",{className:`sidebar ${e?"open":""}`,children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsx("h2",{children:""}),c.jsx("button",{className:"sidebar-close",onClick:()=>t(!1),children:""})]}),n&&n.user&&c.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[((f=n.user.user_metadata)==null?void 0:f.avatar_url)&&c.jsx("img",{src:n.user.user_metadata.avatar_url,alt:"",style:{width:"40px",height:"40px",borderRadius:"50%"}}),c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((h=n.user.user_metadata)==null?void 0:h.full_name)||n.user.email}),c.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.user.email})]})]}),c.jsxs("div",{className:"sidebar-content",children:[c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{const m=i==="vertical"?"horizontal":"vertical";a(m),localStorage.setItem("viewMode",m),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:i==="vertical"?"":""}),c.jsx("span",{children:i==="vertical"?" ":" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{o(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{u(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:"  "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{s(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{r(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{l(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:"  "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{confirm(" ?")&&d()},style:{marginTop:"auto",borderTop:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 100, 100, 0.9)"},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:""})]})]})]})]})}function aO({selectedDate:e,onDateChange:t,onPrevDay:n,onNextDay:i}){return c.jsxs("div",{className:"date-nav-section",children:[c.jsxs("div",{className:"date-display-wrapper",children:[c.jsx("span",{className:"date-display",children:ma(e)}),c.jsx("input",{type:"date",value:Se(e),onChange:t,className:"date-picker-input"})]}),c.jsx("button",{onClick:n,className:"date-nav-button",children:""}),c.jsx("button",{onClick:i,className:"date-nav-button",children:""})]})}function sO({showSidebar:e,setShowSidebar:t,selectedDate:n,setSelectedDate:i,onDateChange:a,onPrevDay:s,onNextDay:r,showEncouragementEmoji:l,currentEncouragementMessage:o,onEncouragementClick:u,onQuickAdd:d,onOpenMemo:f}){const[h,m]=_.useState(""),[v,b]=_.useState(!1),w=async p=>{if(p.key==="Enter"&&!p.shiftKey&&h.trim()){p.preventDefault(),b(!0);try{await d(h.trim()),m("")}catch(g){console.error("Quick add error:",g)}finally{b(!1)}}};return c.jsx("div",{className:"header-fixed",children:c.jsxs("div",{className:"settings-bar",children:[c.jsxs("div",{className:"header-row header-row-1",children:[c.jsx("button",{className:"hamburger-menu",onClick:()=>t(!e),title:"",children:c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{x:"2",y:"4",width:"16",height:"2",rx:"1",fill:"currentColor"}),c.jsx("rect",{x:"2",y:"9",width:"16",height:"2",rx:"1",fill:"currentColor"}),c.jsx("rect",{x:"2",y:"14",width:"16",height:"2",rx:"1",fill:"currentColor"})]})}),c.jsx(aO,{selectedDate:n,onDateChange:a,onPrevDay:s,onNextDay:r})]}),c.jsxs("div",{className:"header-row header-row-2",children:[c.jsx("div",{className:"encouragement-section",children:tO(n)?c.jsx("div",{className:"encouragement-message",onClick:u,title:"    !",children:l?c.jsx("span",{className:"encouragement-emoji",children:"  "}):o||"!"}):c.jsx("button",{onClick:()=>i(new Date),className:"today-link",title:" ",children:"  "})}),c.jsx("button",{className:"header-memo-button",onClick:f,title:" ",children:"  "})]}),c.jsx("div",{className:"header-row header-row-3",children:c.jsx("div",{className:"quick-input-wrapper",children:c.jsx("input",{type:"text",value:h,onChange:p=>m(p.target.value),onKeyDown:w,placeholder:" Quick   (Enter )",className:"quick-input",disabled:v})})})]})})}function rO({viewMode:e,currentSectionIndex:t,sectionsContainerRef:n,visibleSectionCount:i=3}){return e!=="horizontal"?null:c.jsx("div",{className:"section-pagination-dots",onTouchStart:a=>{const s=a.touches[0];a.currentTarget.dataset.touchStartX=s.clientX,a.currentTarget.dataset.touchStartTime=Date.now()},onTouchMove:a=>{a.currentTarget.dataset.touchMoved="true"},onTouchEnd:a=>{const s=parseFloat(a.currentTarget.dataset.touchStartX||"0"),r=parseInt(a.currentTarget.dataset.touchStartTime||"0"),l=a.currentTarget.dataset.touchMoved==="true",o=a.changedTouches[0].clientX,u=Date.now()-r;if(delete a.currentTarget.dataset.touchStartX,delete a.currentTarget.dataset.touchStartTime,delete a.currentTarget.dataset.touchMoved,l&&u<500){const d=s-o,f=n.current;if(!f)return;const h=f.querySelectorAll(".section-block");Math.abs(d)>50&&(d>0&&t<h.length-1?h[t+1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}):d<0&&t>0&&h[t-1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}))}},children:Array.from({length:i},(a,s)=>c.jsx("button",{className:`pagination-dot ${t===s?"active":""}`,onClick:()=>{const r=n.current;if(!r)return;const l=r.querySelectorAll(".section-block");l[s]&&l[s].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},s))})}const Jn={async get(e,t=null){try{const{data:n,error:i}=await qe.from("user_settings").select("setting_value").eq("setting_key",e).maybeSingle();return i?(console.error(`   [${e}]:`,i.message),t):n&&n.setting_value?JSON.parse(n.setting_value):t}catch(n){return console.error(`   [${e}]:`,n.message),t}},async set(e,t,n){if(!n)return console.warn(`   [${e}]:  ID `),!1;try{const{data:i,error:a}=await qe.from("user_settings").select("id").eq("setting_key",e).maybeSingle();if(a)return console.error(`   [${e}]:`,a.message),!1;const s=JSON.stringify(t);if(i){const{error:r}=await qe.from("user_settings").update({setting_value:s,updated_at:new Date().toISOString()}).eq("setting_key",e);if(r)return console.error(`   [${e}]:`,r.message),!1}else{const{error:r}=await qe.from("user_settings").insert([{setting_key:e,setting_value:s,user_id:n}]);if(r)return console.error(`   [${e}]:`,r.message),!1}return!0}catch(i){return console.error(`   [${e}]:`,i.message),!1}},async remove(e){try{const{error:t}=await qe.from("user_settings").delete().eq("setting_key",e);return t?(console.error(`   [${e}]:`,t.message),!1):!0}catch(t){return console.error(`   [${e}]:`,t.message),!1}}},Pn={SECTION_ORDER:"section_order",SECTION_TITLES:"section_titles",SECTION_ICONS:"section_icons",CUSTOM_SECTIONS:"custom_sections",HIDDEN_SECTIONS:"hidden_sections"},Nu={timeline:"",routine:"",normal:""},Xd=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function Qd({title:e,icon:t,sectionId:n,onIconChange:i,editable:a=!1,onTitleChange:s,showHideButton:r=!1,onHide:l,showDeleteButton:o=!1,onDelete:u,customActions:d,settingsMenuItems:f=[]}){var A,M,P,G;const[h,m]=_.useState(!1),[v,b]=_.useState(e),[w,p]=_.useState(!1),[g,y]=_.useState(!1),S=_.useRef(null),T=_.useRef(null),E=()=>{v.trim()&&v!==e&&(s==null||s(v.trim())),m(!1)},x=()=>{b(e),m(!1)};_.useEffect(()=>{const Q=re=>{if(w&&S.current&&!S.current.contains(re.target)){const z=document.querySelector(".section-settings-dropdown");z&&!z.contains(re.target)&&p(!1)}if(g&&T.current&&!T.current.contains(re.target)){const z=document.querySelector(".emoji-picker-dropdown");z&&!z.contains(re.target)&&y(!1)}};return document.addEventListener("mousedown",Q),()=>{document.removeEventListener("mousedown",Q)}},[w,g]);const j=Q=>{i&&n&&i(n,Q),y(!1)};return c.jsxs("div",{className:"section-header",children:[c.jsxs("div",{className:"section-title-container",children:[t&&i&&c.jsxs("div",{style:{position:"relative"},children:[c.jsx("span",{ref:T,className:"section-icon-button",onClick:()=>y(!g),title:" ",children:t}),g&&Uu.createPortal(c.jsx("div",{className:"emoji-picker-dropdown",style:{position:"fixed",top:`${((A=T.current)==null?void 0:A.getBoundingClientRect().bottom)+5}px`,left:`${(M=T.current)==null?void 0:M.getBoundingClientRect().left}px`},children:Xd.map((Q,re)=>c.jsx("button",{className:"emoji-option",onClick:()=>j(Q),children:Q},re))}),document.body)]}),t&&!i&&c.jsx("span",{className:"section-icon",children:t}),h?c.jsx("div",{className:"section-title-edit-wrapper",children:c.jsx("input",{type:"text",value:v,onChange:Q=>b(Q.target.value),onBlur:E,onKeyDown:Q=>{Q.key==="Enter"?E():Q.key==="Escape"&&x()},className:"section-title-input",autoFocus:!0})}):c.jsx("h2",{className:`section-title ${a?"editable":""}`,onClick:()=>a&&m(!0),children:e})]}),c.jsxs("div",{className:"section-actions",children:[d,f.length>0&&c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{ref:S,className:"section-action-button settings-button",onClick:()=>p(!w),title:"",children:""}),w&&Uu.createPortal(c.jsx("div",{className:"section-settings-dropdown",style:{position:"fixed",top:`${((P=S.current)==null?void 0:P.getBoundingClientRect().bottom)+5}px`,left:`${(G=S.current)==null?void 0:G.getBoundingClientRect().left}px`},children:f.map((Q,re)=>c.jsxs("button",{className:"settings-menu-item",onClick:()=>{Q.onClick(),p(!1)},children:[c.jsx("span",{children:Q.icon}),c.jsx("span",{children:Q.label})]},re))}),document.body)]})]})]})}function Ru({title:e,icon:t,sectionId:n,onIconChange:i,className:a,inputValue:s,setInputValue:r,onAddTodo:l,isAdding:o,placeholder:u,children:d,editable:f=!1,onTitleChange:h,settingsMenuItems:m=[],headerActions:v}){return c.jsxs("div",{className:a,children:[c.jsx(Qd,{title:e,icon:t,sectionId:n,onIconChange:i,editable:f,onTitleChange:h,settingsMenuItems:m,customActions:v}),c.jsxs("div",{className:"section-input",children:[c.jsx("input",{type:"text",value:s,onChange:b=>r(b.target.value),onKeyDown:b=>{b.key==="Enter"&&l()},placeholder:u,className:"todo-input",disabled:o}),c.jsx("button",{onClick:l,className:"add-button",disabled:o,children:""})]}),d]})}function lO({todo:e,index:t,totalCount:n,hour:i,startHour:a,endHour:s,onToggle:r,onRemoveFromTimeline:l,onMoveUpInTimeline:o,onMoveDownInTimeline:u}){const[d,f]=_.useState(!1),{attributes:h,listeners:m,setNodeRef:v,transform:b,transition:w,isDragging:p}=qb({id:`timeline-todo-${e.id}`,data:{type:"timeline-todo",todo:e}}),g={transform:ea.Transform.toString(b),transition:w,opacity:p?.5:1},y=!(t===0&&i<=a),S=!(t===n-1&&i>=s);return _.useEffect(()=>{const T=E=>{d&&!E.target.closest(".timeline-todo-handle-wrapper")&&f(!1)};return document.addEventListener("click",T),()=>document.removeEventListener("click",T)},[d]),c.jsxs("div",{ref:v,style:g,className:`timeline-scheduled-todo ${p?"dragging":""}`,children:[c.jsxs("div",{className:"timeline-todo-handle-wrapper",children:[c.jsx("span",{className:"timeline-todo-handle",...h,...m,onClick:T=>{T.stopPropagation(),f(!d)},title:":   /  : "}),d&&c.jsxs("div",{className:"timeline-move-menu",children:[y&&c.jsxs("button",{className:"timeline-move-menu-item move-to-top",onClick:T=>{T.stopPropagation(),o(e.id),f(!1)},children:[c.jsx("span",{children:""})," "]}),S&&c.jsxs("button",{className:"timeline-move-menu-item move-to-bottom",onClick:T=>{T.stopPropagation(),u(e.id),f(!1)},children:[c.jsx("span",{children:""})," "]}),c.jsxs("button",{className:"timeline-move-menu-item remove",onClick:T=>{T.stopPropagation(),l(e.id),f(!1)},children:[c.jsx("span",{children:""})," "]})]})]}),c.jsxs("label",{className:"timeline-todo-checkbox",children:[c.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>r(e.id)}),c.jsx("span",{className:"timeline-checkbox-custom"})]}),c.jsx("span",{className:`timeline-todo-text ${e.completed?"completed":""}`,children:e.text}),c.jsx("button",{className:"timeline-todo-remove-button",onClick:T=>{T.stopPropagation(),l(e.id)},title:" ",children:""})]})}function oO({hour:e,startHour:t,endHour:n,scheduledTodos:i,onToggle:a,onRemoveFromTimeline:s,onMoveUpInTimeline:r,onMoveDownInTimeline:l,onDoubleClick:o}){const{isOver:u,setNodeRef:d}=Ub({id:`timeline-${e}`,data:{type:"timeline",hour:e}}),f=m=>{m.target.closest(".timeline-scheduled-todo")||o==null||o(e)},h=i.filter(m=>m.scheduled_time?parseInt(m.scheduled_time.split(":")[0],10)===e:!1).sort((m,v)=>{const b=parseInt(m.scheduled_time.split(":")[1],10),w=parseInt(v.scheduled_time.split(":")[1],10);return b-w});return c.jsxs("div",{ref:d,className:`timeline-hour-slot ${u?"timeline-drop-active":""}`,onDoubleClick:f,children:[c.jsx("div",{className:"timeline-hour-label",children:e===24?"00:00":`${e.toString().padStart(2,"0")}:00`}),c.jsx("div",{className:"timeline-hour-content",children:h.map((m,v)=>c.jsx(lO,{todo:m,index:v,totalCount:h.length,hour:e,startHour:t,endHour:n,onToggle:a,onRemoveFromTimeline:s,onMoveUpInTimeline:r,onMoveDownInTimeline:l},m.id))})]})}const Wg=_.forwardRef(function({startHour:t=6,endHour:n=24,scheduledTodos:i=[],onToggle:a,onRemoveFromTimeline:s,onMoveUpInTimeline:r,onMoveDownInTimeline:l,onAddTodo:o},u){const[d,f]=_.useState(new Date),[h,m]=_.useState(null),[v,b]=_.useState(""),w=_.useRef(null),p=_.useRef(null),g=_.useRef(null),y=G=>{m(G),b("")};_.useEffect(()=>{h!==null&&w.current&&w.current.focus()},[h]);const S=async()=>{v.trim()&&o&&await o(h,v.trim()),m(null),b("")},T=G=>{G.key==="Enter"?(G.preventDefault(),S()):G.key==="Escape"&&(m(null),b(""))},E=()=>{setTimeout(()=>{v.trim()?S():(m(null),b(""))},100)},x=()=>{if(g.current&&p.current){const G=p.current,Q=g.current,re=G.clientHeight,z=Q.offsetTop;G.scrollTo({top:z-re/2,behavior:"smooth"})}};_.useImperativeHandle(u,()=>({scrollToNow:x})),_.useEffect(()=>{const G=setInterval(()=>{f(new Date)},6e4);return()=>clearInterval(G)},[]),_.useEffect(()=>{if(g.current&&p.current){const G=p.current,Q=g.current,re=G.clientHeight,z=Q.offsetTop;G.scrollTop=z-re/2}},[]);const j=[];for(let G=t;G<=n;G++)j.push(G);const A=()=>{const G=d.getHours(),Q=d.getMinutes(),re=G*60+Q,z=t*60,N=n*60,$=N-z;return re<z?0:re>N?100:(re-z)/$*100},M=()=>{const G=d.getHours();return G>=t&&G<=n},P=()=>d.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1});return c.jsx("div",{className:"timeline-view",ref:p,children:c.jsxs("div",{className:"timeline-grid",children:[j.map(G=>c.jsxs(at.Fragment,{children:[c.jsx(oO,{hour:G,startHour:t,endHour:n,scheduledTodos:i,onToggle:a,onRemoveFromTimeline:s,onMoveUpInTimeline:r,onMoveDownInTimeline:l,onDoubleClick:y}),h===G&&c.jsx("div",{className:"timeline-add-input-container",children:c.jsx("input",{ref:w,type:"text",value:v,onChange:Q=>b(Q.target.value),onKeyDown:T,onBlur:E,placeholder:"  ...",className:"timeline-add-input"})})]},G)),M()&&c.jsxs("div",{ref:g,className:"timeline-current-time",style:{top:`${A()}%`},children:[c.jsx("div",{className:"timeline-current-time-dot"}),c.jsx("div",{className:"timeline-current-time-line"}),c.jsx("div",{className:"timeline-current-time-label",children:P()})]})]})})});function cO({todoId:e,isFirst:t,isLast:n,onMoveUp:i,onMoveDown:a,onMoveToTop:s,onMoveToBottom:r,onDelete:l,onClose:o}){const u=d=>{d(),o()};return c.jsxs("div",{className:"move-menu",children:[!t&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"move-menu-item move-to-top",onClick:d=>{d.stopPropagation(),u(()=>s&&s(e))},children:[c.jsx("span",{className:"move-menu-icon",children:""}),"  "]}),c.jsxs("button",{className:"move-menu-item",onClick:d=>{d.stopPropagation(),u(()=>i&&i(e))},children:[c.jsx("span",{className:"move-menu-icon",children:""})," "]})]}),!n&&c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"move-menu-item",onClick:d=>{d.stopPropagation(),u(()=>a&&a(e))},children:[c.jsx("span",{className:"move-menu-icon",children:""})," "]}),c.jsxs("button",{className:"move-menu-item move-to-bottom",onClick:d=>{d.stopPropagation(),u(()=>r&&r(e))},children:[c.jsx("span",{className:"move-menu-icon",children:""}),"  "]})]}),c.jsxs("button",{className:"move-menu-item delete",onClick:d=>{d.stopPropagation(),window.confirm("  ?")&&l(e),o()},children:[c.jsx("span",{className:"move-menu-icon",children:""})," "]})]})}const Oc=[{key:"mon",label:""},{key:"tue",label:""},{key:"wed",label:""},{key:"thu",label:""},{key:"fri",label:""},{key:"sat",label:""},{key:"sun",label:""}],Mu={THIS_ONLY:"this-only",FROM_NOW:"from-now",ALL:"all"},uO="09",dO="00";function hh({value:e,onChange:t}){const n=_.useRef(null),i=_.useRef(null),a=_.useRef(e),s=_.useRef(!1),[r,l]=_.useState(()=>e&&e.includes(":")?e.split(":")[0]:uO),[o,u]=_.useState(()=>e&&e.includes(":")?e.split(":")[1]:dO);_.useEffect(()=>{if(e&&e.includes(":")&&e!==a.current){const[g,y]=e.split(":");a.current=e,l(g),u(y)}},[e]),_.useEffect(()=>{if(!s.current){s.current=!0;return}const g=`${r}:${o}`;a.current=g,t&&t(g)},[r,o]);const d=(g,y,S)=>{if(!g.current)return;const T=g.current.scrollTop,x=Math.round(T/40),j=String(x).padStart(2,"0");y(j)},f=(g,y)=>{if(!g.current)return;const S=40,T=parseInt(y,10);g.current.scrollTop=T*S};_.useEffect(()=>{f(n,r)},[]),_.useEffect(()=>{f(i,o)},[]);const h=Array.from({length:24},(g,y)=>String(y).padStart(2,"0")),m=Array.from({length:60},(g,y)=>String(y).padStart(2,"0")),v=()=>{const g=(parseInt(r,10)+1)%24,y=String(g).padStart(2,"0");l(y),f(n,y)},b=()=>{const g=(parseInt(r,10)-1+24)%24,y=String(g).padStart(2,"0");l(y),f(n,y)},w=()=>{const g=(parseInt(o,10)+1)%60,y=String(g).padStart(2,"0");u(y),f(i,y)},p=()=>{const g=(parseInt(o,10)-1+60)%60,y=String(g).padStart(2,"0");u(y),f(i,y)};return c.jsxs("div",{className:"apple-time-picker",children:[c.jsxs("div",{className:"picker-arrows-top",children:[c.jsx("button",{className:"picker-arrow-button",onClick:v,children:""}),c.jsx("div",{style:{width:"20px"}}),c.jsx("button",{className:"picker-arrow-button",onClick:w,children:""})]}),c.jsxs("div",{className:"picker-container",children:[c.jsxs("div",{className:"picker-column",ref:n,onScroll:()=>d(n,l),children:[c.jsx("div",{className:"picker-spacer"}),h.map(g=>c.jsx("div",{className:`picker-item ${g===r?"selected":""}`,onClick:()=>{l(g),f(n,g)},children:g},g)),c.jsx("div",{className:"picker-spacer"})]}),c.jsx("div",{className:"picker-separator",children:":"}),c.jsxs("div",{className:"picker-column",ref:i,onScroll:()=>d(i,u),children:[c.jsx("div",{className:"picker-spacer"}),m.map(g=>c.jsx("div",{className:`picker-item ${g===o?"selected":""}`,onClick:()=>{u(g),f(i,g)},children:g},g)),c.jsx("div",{className:"picker-spacer"})]})]}),c.jsxs("div",{className:"picker-arrows-bottom",children:[c.jsx("button",{className:"picker-arrow-button",onClick:b,children:""}),c.jsx("div",{style:{width:"20px"}}),c.jsx("button",{className:"picker-arrow-button",onClick:p,children:""})]}),c.jsx("div",{className:"picker-selection-indicator"})]})}function Wo({selectedDays:e=[],onToggle:t,disabled:n=!1,variant:i="default"}){const a=(l,o)=>{l.stopPropagation(),t(o)},s=i==="inline"?"day-selector-inline":"day-selector",r=i==="inline"?"day-button-inline":"day-button";return c.jsx("div",{className:s,children:Oc.map(l=>c.jsx("button",{onClick:o=>a(o,l.key),className:`${r} ${e.includes(l.key)?"selected":""}`,disabled:n,type:"button",children:l.label},l.key))})}const fO=[{value:"this-only",label:" ",description:" ",tooltip:"  ,  ,   "},{value:"from-now",label:"   ",description:" ",tooltip:"  ,  ,   "},{value:"all",label:" ",description:" ",tooltip:"  ,  ,   "}],li={container:{display:"flex",flexDirection:"column",gap:"0.75rem"},option:e=>({display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:e?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"}),radio:{width:"16px",height:"16px",cursor:"pointer"},labelContainer:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},labelRow:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},label:{fontWeight:"600"},description:{fontSize:"0.85rem",color:"#9ca3af"},helpButton:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},tooltip:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"}};function hO({selectedOption:e,onChange:t,name:n="delete-option"}){const[i,a]=_.useState(null);return c.jsx("div",{style:li.container,children:fO.map(s=>c.jsxs("div",{style:li.option(e===s.value),onClick:()=>t(s.value),children:[c.jsx("input",{type:"radio",name:n,value:s.value,checked:e===s.value,onChange:r=>t(r.target.value),style:li.radio}),c.jsx("div",{style:li.labelContainer,children:c.jsxs("div",{style:li.labelRow,children:[c.jsx("span",{style:li.label,children:s.label}),c.jsx("span",{style:li.description,children:s.description})]})}),c.jsx("button",{onMouseEnter:()=>a(s.value),onMouseLeave:()=>a(null),onClick:r=>{r.stopPropagation(),a(i===s.value?null:s.value)},style:li.helpButton,children:"?"}),i===s.value&&c.jsx("div",{style:li.tooltip,children:s.tooltip})]},s.value))})}function mO({todo:e,isOpen:t,onClose:n,onEdit:i,onToggle:a,onDelete:s,onAddSubTodo:r,onCreateRoutine:l,subtodos:o,routines:u,formatDate:d,formatDateOnly:f}){var ht;const[h,m]=_.useState(e.text),[v,b]=_.useState(null),[w,p]=_.useState(""),[g,y]=_.useState("this-only"),[S,T]=_.useState(!1),[E,x]=_.useState([]),[j,A]=_.useState(""),[M,P]=_.useState([]),[G,Q]=_.useState(!1),[re,z]=_.useState([]),[N,$]=_.useState([]),[K,me]=_.useState(null),J=e.routine_id?u.find(I=>I.id===e.routine_id):null,st=I=>["sun","mon","tue","wed","thu","fri","sat"][I],De=I=>{x(ce=>ce.includes(I)?ce.filter(te=>te!==I):[...ce,I])};_.useEffect(()=>{v==="history"&&M.length===0&&!G&&(async()=>{Q(!0);try{const{data:ce,error:te}=await qe.from("todo_history").select("*").eq("todo_id",e.id).order("changed_at",{ascending:!1});if(te)throw te;P(ce||[])}catch(ce){console.error("Error fetching history:",ce)}finally{Q(!1)}})()},[v,e.id,M.length,G]),_.useEffect(()=>{v==="routine-stats"&&J&&(!K||K.id!==J.id)&&(async()=>{try{const{data:ce,error:te}=await qe.from("todos").select("*").eq("routine_id",J.id).eq("deleted",!1).maybeSingle();if(te)throw te;if(ce&&ce.visible_dates){const _e=ce.visible_dates.sort().map(ke=>{var ze;return{id:`${ce.id}-${ke}`,date:ke,text:ce.text,completed:((ze=ce.completed_dates)==null?void 0:ze.includes(ke))||!1}});$(_e),me(J)}}catch(ce){console.error("Error fetching routine history:",ce)}})()},[v,J,K]);const Xe=I=>{z(ce=>ce.includes(I)?ce.filter(te=>te!==I):[...ce,I])},Le=_.useRef(!1),Pe=I=>{I.target===I.currentTarget&&(Le.current=!0)},Ee=I=>{I.target===I.currentTarget&&Le.current&&n(),Le.current=!1};return t?Uu.createPortal(c.jsx("div",{className:"modal-overlay",onMouseDown:Pe,onClick:Ee,children:c.jsxs("div",{className:"actions-modal-content",onClick:I=>I.stopPropagation(),children:[c.jsxs("div",{className:"actions-modal-header",children:[c.jsx("h3",{children:" "}),c.jsx("button",{onClick:n,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"todo-edit-section",children:c.jsx("textarea",{value:h,onChange:I=>m(I.target.value),onBlur:()=>{h.trim()!==""&&h!==e.text?i(e.id,h):h.trim()===""&&m(e.text)},className:"todo-edit-textarea",placeholder:"  ...",rows:3})}),c.jsxs("div",{className:"actions-modal-body",children:[c.jsxs("div",{className:"actions-menu",children:[c.jsxs("button",{className:`action-menu-item ${v==="nanotodo"?"active":""}`,onClick:()=>b("nanotodo"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item ${v==="routine"?"active":""}`,onClick:()=>{b("routine"),J?(x(J.days||[]),A(J.time_slot||""),T(!1)):(x([]),A(""),T(!0))},children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item ${v==="history"?"active":""}`,onClick:()=>b("history"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),(((ht=e.timeline_history)==null?void 0:ht.length)>0||e.scheduled_time)&&c.jsxs("button",{className:`action-menu-item ${v==="timeline-history"?"active":""}`,onClick:()=>b("timeline-history"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),e.routine_id&&J&&c.jsxs("button",{className:`action-menu-item ${v==="routine-stats"?"active":""}`,onClick:()=>b("routine-stats"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item delete ${v==="delete"?"active":""}`,onClick:()=>b("delete"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]})]}),c.jsxs("div",{className:"actions-detail",children:[!v&&c.jsx("div",{className:"actions-detail-empty",children:c.jsx("p",{children:"  "})}),v==="nanotodo"&&c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:" "}),c.jsxs("div",{className:"nanotodo-section-in-modal",children:[o&&o.length>0&&c.jsx("div",{className:"subtodo-list-in-modal",children:o.map(I=>c.jsxs("div",{className:"subtodo-item-in-modal",children:[c.jsx("input",{type:"checkbox",checked:I.completed,onChange:()=>a(I.id),className:"subtodo-checkbox-modal"}),c.jsx("span",{className:`subtodo-text-modal ${I.completed?"completed":""}`,children:I.text}),c.jsx("button",{onClick:()=>s(I.id),className:"subtodo-delete-modal",title:"",children:""})]},I.id))}),c.jsxs("div",{className:"subtodo-input-section-modal",children:[c.jsx("input",{type:"text",value:w,onChange:I=>p(I.target.value),onKeyDown:I=>{I.key==="Enter"&&w.trim()&&(r(e.id,w.trim()),p(""))},placeholder:" ...",className:"subtodo-input-modal"}),c.jsx("button",{onClick:()=>{w.trim()&&(r(e.id,w.trim()),p(""))},className:"subtodo-add-button-modal",children:""})]})]})]}),v==="routine"&&c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsx("div",{className:"routine-setup-inline",children:J&&!S?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-current-info",children:[c.jsx("div",{className:"routine-info-title",children:" :"}),c.jsx("div",{className:"routine-days-display",children:Oc.filter(I=>J.days.includes(I.key)).map(I=>c.jsx("span",{className:"routine-day-badge",children:I.label},I.key))}),J.time_slot&&c.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",J.time_slot]})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:I=>{I.stopPropagation(),x(J.days),A(J.time_slot||""),T(!0)},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:async I=>{I.stopPropagation(),await l(e.id,e.text,[],null,!0),n()},className:"routine-remove-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"routine-setup-title",children:S&&J?" :":"  :"}),c.jsx(Wo,{selectedDays:E,onToggle:De,variant:"inline"}),c.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[c.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),c.jsx(hh,{value:j,onChange:I=>A(I)})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:async I=>{I.stopPropagation(),S&&J?await l(e.id,e.text,E,J.id,!1,j):await l(e.id,e.text,E,null,!1,j),T(!1),n()},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:I=>{I.stopPropagation(),T(!1),x([]),A("")},className:"routine-cancel-button",children:""})]})]})})]}),v==="history"&&(()=>{const I=e.visible_dates&&e.visible_dates.length>0?e.visible_dates:[e.date],ce=I[0],te=I.map(_e=>({id:`${e.id}-${_e}`,date:_e}));return G?c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:" ..."})]}):c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsxs("div",{className:"todo-history",children:[c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:":"}),c.jsx("span",{className:"history-value",children:d(e.created_at)})]}),c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:f(ce?new Date(ce+"T00:00:00"):new Date(e.date+"T00:00:00"))})]}),te.length>0&&c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:te.map((_e,ke)=>{const ze=_e.date===e.date,xe=f(new Date(_e.date+"T00:00:00"));return c.jsxs("span",{children:[ke>0&&"  ",c.jsxs("span",{style:ze?{fontWeight:"bold",color:"#4CAF50"}:{},children:[xe.split("(")[0],ze?"()":""]})]},_e.id)})})]}),M.length>0&&c.jsxs("div",{className:"history-changes-list",children:[c.jsxs("div",{className:"history-changes-header",children:["  (",M.length,")"]}),M.map(_e=>c.jsxs("div",{className:"history-record-compact",children:[c.jsxs("div",{className:"history-record-summary",children:[c.jsxs("div",{className:"history-change-time",children:[d(_e.changed_at),_e.changed_on_date&&c.jsxs("span",{className:"history-page-info",children:[" (: ",f(new Date(_e.changed_on_date+"T00:00:00")),")"]})]}),c.jsx("button",{className:"history-detail-button",onClick:ke=>{ke.stopPropagation(),Xe(_e.id)},children:re.includes(_e.id)?"":""})]}),re.includes(_e.id)&&c.jsxs("div",{className:"history-change",children:[c.jsxs("div",{className:"history-change-item history-before",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:_e.previous_text})]}),c.jsx("div",{className:"history-change-arrow",children:""}),c.jsxs("div",{className:"history-change-item history-after",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:_e.new_text})]})]})]},_e.id))]})]})]})})(),v==="timeline-history"&&c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsxs("div",{className:"todo-history",children:[e.scheduled_time&&e.scheduled_date&&c.jsxs("div",{className:"history-item",style:{marginBottom:"1rem",padding:"0.75rem",background:"rgba(99, 102, 241, 0.1)",borderRadius:"8px"},children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsxs("span",{className:"history-value",children:[c.jsx("span",{style:{color:"#60a5fa"},children:f(new Date(e.scheduled_date+"T00:00:00"))}),c.jsx("span",{style:{marginLeft:"0.5rem",color:"#fbbf24",fontWeight:"600"},children:e.scheduled_time})]})]}),e.timeline_history&&e.timeline_history.length>0?c.jsxs("div",{className:"history-changes-list",children:[c.jsxs("div",{className:"history-changes-header",children:["  (",e.timeline_history.length,")"]}),e.timeline_history.slice().reverse().map((I,ce)=>{const te=new Date(I.scheduled_date+"T00:00:00"),_e=f(te);return c.jsx("div",{className:"history-record-compact",children:c.jsxs("div",{className:"history-record-summary",children:[c.jsxs("div",{className:"history-change-time",children:[c.jsx("span",{style:{color:"#60a5fa"},children:_e}),c.jsx("span",{style:{marginLeft:"0.5rem",color:"#fbbf24"},children:I.scheduled_time})]}),c.jsxs("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.5)"},children:[d(I.assigned_at)," "]})]})},ce)})]}):c.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.5)"},children:"   ."})]})]}),v==="routine-stats"&&J&&(()=>{if(!K||K.id!==J.id||N.length===0)return c.jsxs("div",{className:"actions-detail-content",children:[c.jsxs("h4",{children:[" ",J.text," "]}),c.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:!K||K.id!==J.id?" ...":" ."})]});const I=N[0],ce=new Date(I.date),te=new Date,_e={};N.forEach(xe=>{_e[xe.date]=xe.completed});const ke=[];let ze=new Date(ce);for(;ze<=te;){const xe=ze.getFullYear(),Ue=ze.getMonth(),ct=`${xe}-${Ue+1}`;ke.find(Ge=>Ge.key===ct)||ke.push({key:ct,year:xe,month:Ue,days:[]});const ee=ke.find(Ge=>Ge.key===ct),oe=Se(ze),ge=ze.getDay(),Te=st(ge),pt=J.days.includes(Te);ee.days.push({date:new Date(ze),dateStr:oe,day:ze.getDate(),dayOfWeek:ge,isCompleted:_e[oe]===!0,isRoutineDay:pt,hasTodo:_e[oe]!==void 0}),ze.setDate(ze.getDate()+1)}return c.jsxs("div",{className:"actions-detail-content",children:[c.jsxs("h4",{children:[" ",J.text," "]}),c.jsxs("div",{className:"routine-history-content",children:[c.jsx("div",{className:"routine-history-calendar",children:ke.map(xe=>c.jsxs("div",{className:"history-month",children:[c.jsxs("h3",{className:"history-month-title",children:[xe.year," ",xe.month+1,""]}),c.jsxs("div",{className:"history-calendar-grid",children:[c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),xe.days.length>0&&Array(xe.days[0].dayOfWeek).fill(null).map((Ue,ct)=>c.jsx("div",{className:"history-day-cell empty"},`empty-${ct}`)),xe.days.map(Ue=>c.jsxs("div",{className:`history-day-cell ${Ue.isCompleted?"completed":""} ${Ue.isRoutineDay?"":"not-routine-day"}`,title:`${Ue.dateStr}${Ue.isRoutineDay?"":" (  )"}${Ue.isCompleted?" - ":Ue.hasTodo?" - ":""}`,children:[c.jsx("span",{className:"day-number",children:Ue.day}),Ue.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]},Ue.dateStr))]})]},xe.key))}),c.jsxs("div",{className:"routine-history-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:" :"}),c.jsxs("span",{className:"stat-value",children:[N.length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value completed",children:[N.filter(xe=>xe.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value incomplete",children:[N.filter(xe=>!xe.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value",children:[N.length>0?Math.round(N.filter(xe=>xe.completed).length/N.length*100):0,"%"]})]})]})]})]})})(),v==="delete"&&c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"   "}),c.jsxs("p",{style:{fontSize:"0.9rem",color:"#9ca3af",marginBottom:"1rem",lineHeight:"1.6"},children:["    .",c.jsx("br",{}),"    ."]}),c.jsx(hO,{selectedOption:g,onChange:y}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[c.jsx("button",{onClick:n,style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#9ca3af",cursor:"pointer",fontSize:"0.9rem"},children:""}),c.jsx("button",{onClick:async()=>{window.confirm(` ?

  5    .`)&&(await s(e.id,g),n())},style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:""})]})]})]})]})]})}),document.body):null}function Za({todo:e,index:t,onToggle:n,onDelete:i,onEdit:a,formatDate:s,formatDateOnly:r,isFocused:l,onFocus:o,onAddSubTodo:u,subtodos:d,level:f=0,onCreateRoutine:h,routines:m,onShowRoutineHistory:v,onOpenRoutineSetupModal:b,onOpenHistoryModal:w,currentPageDate:p,isPendingRoutine:g=!1,onRemoveFromUI:y,showSuccessMessage:S,activeId:T,overId:E,hideNumber:x=!1,onMoveUp:j,onMoveDown:A,onMoveToTop:M,onMoveToBottom:P,isFirst:G,isLast:Q}){const[re,z]=_.useState(!1),[N,$]=_.useState(!1),[K,me]=_.useState(!1),[J,st]=_.useState(e.text),[De,Xe]=_.useState(!1),[Le,Pe]=_.useState(!1),[Ee,ht]=_.useState(""),[I,ce]=_.useState(!1),te=e.routine_id?m.find(C=>C.id===e.routine_id):null,{attributes:_e,listeners:ke,setNodeRef:ze,transform:xe,transition:Ue,isDragging:ct}=qb({id:e.id}),ee=e.id===T,oe=e.id===E&&T&&T!==E,ge={cursor:"grab",opacity:ee?.4:1},Te=e.text.length>30,pt=()=>{me(!0),st(e.text)},Ge=async()=>{J.trim()&&J!==e.text&&await a(e.id,J.trim()),me(!1)},k=async C=>{C.key==="Enter"&&!C.shiftKey?(C.preventDefault(),await Ge()):C.key==="Escape"&&(me(!1),st(e.text))};return _.useEffect(()=>{const C=R=>{N&&!R.target.closest(".drag-handle-wrapper")&&$(!1)};return document.addEventListener("click",C),()=>document.removeEventListener("click",C)},[N]),c.jsxs("div",{ref:ze,style:{...ge,borderTop:oe?"2px solid rgba(99, 102, 241, 0.8)":"2px solid transparent"},className:"todo-item-container",children:[c.jsxs("div",{className:"drag-handle-wrapper",children:[c.jsx("span",{className:"drag-handle",..._e,...ke,onClick:C=>{C.stopPropagation(),$(!N)},title:":   /  : "}),N&&c.jsx(cO,{todoId:e.id,isFirst:G,isLast:Q,onMoveUp:j,onMoveDown:A,onMoveToTop:M,onMoveToBottom:P,onDelete:i,onClose:()=>$(!1)})]}),!x&&c.jsx("span",{className:"todo-number",children:t+1}),c.jsx("div",{className:"todo-item-wrapper",children:c.jsxs("div",{className:`todo-item ${e.completed?"completed":""} ${re?"expanded":""} ${ct?"drag-mode":""} ${e.scheduled_time&&e.scheduled_date===p?"has-timeline":""}`,children:[c.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>n(e.id),className:"todo-checkbox"}),c.jsx("div",{className:"todo-content",onClick:()=>!K&&Te&&z(!re),onDoubleClick:pt,style:{cursor:K?"text":Te?"pointer":"default"},children:K?c.jsx("textarea",{value:J,onChange:C=>st(C.target.value),onBlur:Ge,onKeyDown:k,className:"todo-edit-input",autoFocus:!0,rows:1,style:{minHeight:"1.35em",resize:"vertical",overflow:"hidden"},onInput:C=>{C.target.style.height="auto",C.target.style.height=C.target.scrollHeight+"px"}}):c.jsx("span",{className:`todo-text ${re?"expanded":""}`,children:e.text})}),(()=>{const C=e.completed&&e.completed_at&&new Date(e.completed_at).toISOString().split("T")[0]!==e.date,R=e.routine_id&&te,B=g||e.is_pending_routine;return(d.length>0||C||R||B)&&c.jsxs("div",{className:"todo-badges",children:[C&&(()=>{const V=new Date(e.completed_at).toISOString().split("T")[0],H=new Date(e.completed_at).getDate();return c.jsxs("span",{className:"completed-date-badge",title:`${V} `,children:[H,""]})})(),R&&(()=>{const V=p||e.date,H=new Date(V+"T00:00:00"),X=H.getMonth()+1,L=H.getDate(),Z=["","","","","","",""][H.getDay()],le=`${X}/${L}(${Z})`;return c.jsxs("span",{className:"routine-date-badge",title:`${te.text} `,children:["for ",le]})})(),B&&c.jsx("span",{className:"pending-routine-badge",title:"  ",children:""}),d.length>0&&c.jsx("span",{className:"todo-badge clickable",title:" ",onClick:V=>{V.stopPropagation(),De?(Xe(!1),Pe(!1)):(Xe(!0),Pe(!1))},children:""})]})})(),!K&&!e.parent_id&&c.jsx("button",{className:"todo-more-button",onClick:C=>{C.stopPropagation(),ce(!0)},title:"",children:""}),De&&!e.parent_id&&c.jsxs("div",{className:"subtodos-in-item",children:[d&&d.length>0&&d.map((C,R)=>c.jsx(Za,{todo:C,index:R,onToggle:n,onDelete:i,onEdit:a,formatDate:s,formatDateOnly:r,isFocused:l,onFocus:o,onAddSubTodo:u,subtodos:[],level:f+1,routines:m,onShowRoutineHistory:v,showSuccessMessage:S,onOpenRoutineSetupModal:b,onOpenHistoryModal:w,currentPageDate:p},C.id)),Le&&c.jsxs("div",{className:"subtodo-input-section",children:[c.jsx("input",{type:"text",value:Ee,onChange:C=>ht(C.target.value),onKeyDown:C=>{C.key==="Enter"&&Ee.trim()&&(u(e.id,Ee.trim()),ht(""))},placeholder:" ...",className:"subtodo-input",autoFocus:!0}),c.jsx("button",{onClick:()=>{Ee.trim()&&(u(e.id,Ee.trim()),ht(""))},className:"subtodo-add-button",children:""}),c.jsx("button",{onClick:()=>ht(""),className:"subtodo-cancel-button",children:""})]})]})]})}),c.jsx(mO,{todo:e,isOpen:I,onClose:()=>ce(!1),onEdit:a,onToggle:n,onDelete:i,onAddSubTodo:u,onCreateRoutine:h,subtodos:d,routines:m,formatDate:s,formatDateOnly:r})]})}function ev({message:e,onUndo:t,variant:n="default"}){const i=n==="success"?"undo-toast success-toast":"undo-toast";return c.jsxs("div",{className:i,children:[c.jsx("span",{children:e}),t&&c.jsx("button",{onClick:t,className:"undo-button",children:""})]})}function tv({todo:e,onClose:t,onDeleteThisOnly:n,onDeleteFromNow:i,onDeleteAll:a}){const[s,r]=_.useState("this-only"),[l,o]=_.useState(null),u=_.useRef(!1),d=v=>{v.target===v.currentTarget&&(u.current=!0)},f=v=>{v.target===v.currentTarget&&u.current&&t(),u.current=!1},h=()=>{s==="this-only"?n(e):s==="from-now"?i(e):s==="all"&&a(e),t()},m=[{id:"this-only",label:" ",subtitle:" ",tooltip:"  ,  ,   "},{id:"from-now",label:"   ",subtitle:" ",tooltip:"  ,  ,   "},{id:"all",label:" ",subtitle:" ",tooltip:"  ,  ,   "}];return c.jsx("div",{className:"modal-overlay",onMouseDown:d,onClick:f,children:c.jsxs("div",{className:"modal-content delete-confirm-modal-v2",onClick:v=>v.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"delete-confirm-content-v2",children:[c.jsxs("p",{className:"delete-info-text",children:["    .",c.jsx("br",{}),"    ."]}),c.jsx("div",{className:"delete-options-v2",children:m.map(v=>c.jsxs("div",{className:"delete-option-item",children:[c.jsxs("label",{className:"delete-option-label",children:[c.jsx("input",{type:"radio",name:"delete-option",value:v.id,checked:s===v.id,onChange:b=>r(b.target.value)}),c.jsxs("div",{className:"option-text",children:[c.jsx("span",{className:"option-main",children:v.label}),c.jsx("span",{className:"option-sub",children:v.subtitle})]})]}),c.jsx("button",{className:"option-help-btn",onMouseEnter:()=>o(v.id),onMouseLeave:()=>o(null),onClick:b=>{b.preventDefault(),o(l===v.id?null:v.id)},children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[c.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("text",{x:"8",y:"11.5",textAnchor:"middle",fontSize:"11",fill:"currentColor",fontWeight:"600",children:"?"})]})}),l===v.id&&c.jsx("div",{className:"option-tooltip",children:v.tooltip})]},v.id))}),c.jsxs("div",{className:"delete-modal-actions",children:[c.jsx("button",{className:"btn-cancel",onClick:t,children:""}),c.jsx("button",{className:"btn-confirm",onClick:h,children:""})]})]})]})})}function gO({showRoutineModal:e,onClose:t,routineInput:n,setRoutineInput:i,isAddingRoutine:a,selectedDays:s,onToggleDay:r,selectedTimeSlot:l,setSelectedTimeSlot:o,onAddRoutine:u,routines:d,editingRoutineId:f,editingRoutineText:h,setEditingRoutineText:m,editingRoutineDays:v,onToggleEditDay:b,onStartEdit:w,onSaveEdit:p,onCancelEdit:g,onDelete:y,onShowHistory:S}){const T=_.useRef(!1),E=j=>{j.target===j.currentTarget&&(T.current=!0)},x=j=>{j.target===j.currentTarget&&T.current&&t(),T.current=!1};return e?c.jsx("div",{className:"modal-overlay",onMouseDown:E,onClick:x,children:c.jsxs("div",{className:"modal-content routine-modal",onClick:j=>j.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-add-section",children:[c.jsx("input",{type:"text",value:n,onChange:j=>i(j.target.value),placeholder:"  ...",className:"routine-input",disabled:a}),c.jsx(Wo,{selectedDays:s,onToggle:r,disabled:a}),c.jsxs("div",{className:"time-slot-selector",children:[c.jsx("label",{className:"time-slot-label",children:"  ()"}),c.jsx(hh,{value:l,onChange:j=>o(j)})]}),c.jsx("button",{onClick:u,className:"add-routine-button",disabled:a||n.trim()==="",children:" "})]}),c.jsx("div",{className:"routine-list",children:d.length===0?c.jsx("p",{className:"empty-message",children:"  ."}):d.map(j=>c.jsx("div",{className:"routine-item",children:f===j.id?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-edit-content",children:[c.jsx("input",{type:"text",value:h,onChange:A=>m(A.target.value),className:"routine-edit-input",placeholder:" "}),c.jsx(Wo,{selectedDays:v,onToggle:b,variant:"inline"})]}),c.jsxs("div",{className:"routine-item-actions",children:[c.jsx("button",{onClick:p,className:"routine-save-button",disabled:h.trim()===""||v.length===0,children:""}),c.jsx("button",{onClick:g,className:"routine-cancel-edit-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-item-content",children:[c.jsx("span",{className:"routine-text",children:j.text}),c.jsxs("div",{className:"routine-meta",children:[c.jsx("div",{className:"routine-days",children:Oc.filter(A=>j.days.includes(A.key)).map(A=>c.jsx("span",{className:"routine-day-badge",children:A.label},A.key))}),j.time_slot&&c.jsx("span",{className:"routine-time-slot",children:j.time_slot})]})]}),c.jsxs("div",{className:"routine-item-actions",children:[c.jsx("button",{onClick:()=>S(j),className:"routine-history-button",title:" ",children:""}),c.jsx("button",{onClick:()=>w(j),className:"routine-edit-button",title:"",children:""}),c.jsx("button",{onClick:()=>y(j.id),className:"routine-delete-button",title:"",children:""})]})]})},j.id))})]})}):null}const vO=e=>["sun","mon","tue","wed","thu","fri","sat"][e];function yO({showRoutineHistory:e,onClose:t,selectedRoutine:n,routineHistoryData:i}){const a=_.useRef(!1),s=l=>{l.target===l.currentTarget&&(a.current=!0)},r=l=>{l.target===l.currentTarget&&a.current&&t(),a.current=!1};return!e||!n?null:c.jsx("div",{className:"modal-overlay",onMouseDown:s,onClick:r,children:c.jsxs("div",{className:"modal-content routine-history-modal",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:[" ",n.text," "]}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-history-content",children:[(()=>{if(i.length===0)return c.jsx("p",{className:"empty-message",children:"   ."});const l=i[0],o=new Date(l.date),u=new Date,d={};i.forEach(m=>{d[m.date]=m.completed});const f=[];let h=new Date(o);for(;h<=u;){const m=h.getFullYear(),v=h.getMonth(),b=`${m}-${v+1}`;f.find(T=>T.key===b)||f.push({key:b,year:m,month:v,days:[]});const w=f.find(T=>T.key===b),p=Se(h),g=h.getDay(),y=vO(g),S=n.days.includes(y);w.days.push({date:new Date(h),dateStr:p,day:h.getDate(),dayOfWeek:g,isCompleted:d[p]===!0,isRoutineDay:S,hasTodo:d[p]!==void 0}),h.setDate(h.getDate()+1)}return c.jsx("div",{className:"routine-history-calendar",children:f.map(m=>c.jsxs("div",{className:"history-month",children:[c.jsxs("h3",{className:"history-month-title",children:[m.year," ",m.month+1,""]}),c.jsxs("div",{className:"history-calendar-grid",children:[c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),m.days.length>0&&Array(m.days[0].dayOfWeek).fill(null).map((v,b)=>c.jsx("div",{className:"history-day-cell empty"},`empty-${b}`)),m.days.map((v,b)=>{if(b>0&&v.day===1){const p=6-m.days[b-1].dayOfWeek;return c.jsxs(c.Fragment,{children:[Array(p).fill(null).map((g,y)=>c.jsx("div",{className:"history-day-cell empty"},`empty-end-${b}-${y}`)),c.jsx("div",{className:"history-day-header",children:""},v.dateStr),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsxs("div",{className:`history-day-cell ${v.isCompleted?"completed":""} ${v.isRoutineDay?"":"not-routine-day"}`,children:[c.jsx("span",{className:"day-number",children:v.day}),v.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]})]})}return c.jsxs("div",{className:`history-day-cell ${v.isCompleted?"completed":""} ${v.isRoutineDay?"":"not-routine-day"}`,title:`${v.dateStr}${v.isRoutineDay?"":" (  )"}${v.isCompleted?" - ":v.hasTodo?" - ":""}`,children:[c.jsx("span",{className:"day-number",children:v.day}),v.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]},v.dateStr)})]})]},m.key))})})(),c.jsxs("div",{className:"routine-history-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:" :"}),c.jsxs("span",{className:"stat-value",children:[i.length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value completed",children:[i.filter(l=>l.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value incomplete",children:[i.filter(l=>!l.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value",children:[i.length>0?Math.round(i.filter(l=>l.completed).length/i.length*100):0,"%"]})]})]})]})]})})}function pO({show:e,onClose:t,content:n,setContent:i,isSaving:a,placeholder:s=" ..."}){const r=_.useRef(null),l=_.useRef(!1);if(_.useEffect(()=>{r.current&&e&&(r.current.style.height="auto",r.current.style.height=Math.min(r.current.scrollHeight,window.innerHeight*.6)+"px")},[n,e]),_.useEffect(()=>{e&&r.current&&r.current.focus()},[e]),_.useEffect(()=>{const d=f=>{f.key==="Escape"&&e&&t()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[e,t]),!e)return null;const o=d=>{d.target===d.currentTarget&&(l.current=!0)},u=d=>{d.target===d.currentTarget&&l.current&&t(),l.current=!1};return c.jsx("div",{className:"memo-modal-overlay",onMouseDown:o,onClick:u,children:c.jsxs("div",{className:"memo-modal",onClick:d=>d.stopPropagation(),children:[c.jsxs("div",{className:"memo-modal-header",children:[c.jsx("h3",{children:"  "}),c.jsxs("div",{className:"memo-modal-actions",children:[a&&c.jsx("span",{className:"memo-saving-indicator",children:" ..."}),c.jsx("button",{className:"memo-modal-close",onClick:t,children:""})]})]}),c.jsx("textarea",{ref:r,value:n,onChange:d=>i(d.target.value),className:"memo-modal-textarea",placeholder:s})]})})}function bO({showGanttChart:e,onClose:t,ganttData:n,ganttPeriod:i,setGanttPeriod:a,formatDateOnly:s}){const r=_.useRef(!1),l=u=>{u.target===u.currentTarget&&(r.current=!0)},o=u=>{u.target===u.currentTarget&&r.current&&t(),r.current=!1};return e?c.jsx("div",{className:"modal-overlay",onMouseDown:l,onClick:o,children:c.jsxs("div",{className:"modal-content gantt-modal",onClick:u=>u.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  -  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"gantt-filter",children:c.jsx("div",{className:"gantt-period-buttons",children:[{value:"1week",label:" 1"},{value:"2weeks",label:" 2"},{value:"1month",label:" 1"},{value:"3months",label:" 3"},{value:"6months",label:" 6"},{value:"all",label:""}].map(u=>c.jsx("button",{className:`period-button ${i===u.value?"active":""}`,onClick:()=>a(u.value),children:u.label},u.value))})}),c.jsx("div",{className:"gantt-content",children:n.length===0?c.jsx("p",{className:"empty-message",children:" ."}):c.jsx("div",{className:"gantt-chart",children:(()=>{const u=n.flatMap(v=>v.dates),d=[...new Set(u)].sort((v,b)=>new Date(v)-new Date(b));if(d.length===0)return c.jsx("p",{className:"empty-message",children:"  ."});const f=new Date(d[0]),h=new Date(d[d.length-1]),m=[];for(let v=new Date(f);v<=h;v.setDate(v.getDate()+1))m.push(new Date(v).toISOString().split("T")[0]);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"gantt-header",children:[c.jsx("div",{className:"gantt-task-column",children:" "}),c.jsx("div",{className:"gantt-timeline",children:m.map(v=>c.jsx("div",{className:"gantt-date-cell",children:s(new Date(v+"T00:00:00")).split("(")[0]},v))})]}),n.map((v,b)=>{const w=new Set(v.dates);return c.jsxs("div",{className:"gantt-row",children:[c.jsx("div",{className:"gantt-task-column",title:v.text,children:c.jsx("span",{className:v.completed?"completed-task":"",children:v.text})}),c.jsx("div",{className:"gantt-timeline",children:m.map(p=>{if(!w.has(p))return c.jsx("div",{className:"gantt-date-cell"},p);const y=p===v.startDate,S=p===v.completedDate;let T="gantt-date-cell has-task";return y?T+=" start-date":S?T+=" completed-date":T+=" middle-date",c.jsx("div",{className:T,children:S?c.jsx("span",{className:"completed-circle",children:""}):""},p)})})]},v.originalId)})]})})()})})]})}):null}function _O({showEncouragementModal:e,onClose:t,encouragementMessages:n,newEncouragementMessage:i,setNewEncouragementMessage:a,onAddEncouragementMessage:s,editingEncouragementId:r,editingEncouragementText:l,setEditingEncouragementId:o,setEditingEncouragementText:u,onUpdateEncouragementMessage:d,onDeleteEncouragementMessage:f}){const h=_.useRef(!1),m=b=>{b.target===b.currentTarget&&(h.current=!0)},v=b=>{b.target===b.currentTarget&&h.current&&t(),h.current=!1};return e?c.jsx("div",{className:"modal-overlay",onMouseDown:m,onClick:v,children:c.jsxs("div",{className:"modal-content encouragement-modal",onClick:b=>b.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"encouragement-add-section",children:[c.jsx("input",{type:"text",value:i,onChange:b=>a(b.target.value),placeholder:"   ...",className:"encouragement-input",onKeyDown:async b=>{b.key==="Enter"&&i.trim()!==""&&(await s(i.trim()),a(""))}}),c.jsx("button",{onClick:async()=>{i.trim()!==""&&(await s(i.trim()),a(""))},className:"add-encouragement-button",disabled:i.trim()==="",children:""})]}),c.jsx("div",{className:"encouragement-list",children:n.length===0?c.jsx("p",{className:"empty-message",children:"   ."}):n.map((b,w)=>c.jsx("div",{className:"encouragement-item",children:r===w?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"text",value:l,onChange:p=>u(p.target.value),className:"encouragement-edit-input",placeholder:" "}),c.jsxs("div",{className:"encouragement-item-actions",children:[c.jsx("button",{onClick:async()=>{l.trim()!==""&&(await d(w,l.trim()),o(null),u(""))},className:"encouragement-save-button",disabled:l.trim()==="",children:""}),c.jsx("button",{onClick:()=>{o(null),u("")},className:"encouragement-cancel-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"encouragement-text",children:b}),c.jsxs("div",{className:"encouragement-item-actions",children:[c.jsx("button",{onClick:()=>{o(w),u(b)},className:"encouragement-edit-button",title:"",children:""}),c.jsx("button",{onClick:async()=>{window.confirm("   ?")&&await f(w)},className:"encouragement-delete-button",title:"",children:""})]})]})},w))})]})}):null}function wO({isOpen:e,onClose:t,onAddSection:n}){const[i,a]=_.useState(""),[s,r]=_.useState(""),l=["","","","","","","","","","","",""],o=h=>{h.preventDefault(),i.trim()&&(n({name:i.trim(),icon:s}),a(""),r(""),t())},u=_.useRef(!1),d=h=>{h.target===h.currentTarget&&(u.current=!0)},f=h=>{h.target===h.currentTarget&&u.current&&t(),u.current=!1};return e?c.jsx("div",{className:"modal-overlay",onMouseDown:d,onClick:f,children:c.jsxs("div",{className:"modal-content add-section-modal",onClick:h=>h.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{className:"modal-close-button",onClick:t,children:""})]}),c.jsxs("form",{onSubmit:o,className:"add-section-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" "}),c.jsx("input",{type:"text",value:i,onChange:h=>a(h.target.value),placeholder:": ,  , ...",className:"section-name-input",autoFocus:!0,maxLength:20})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" "}),c.jsx("div",{className:"emoji-grid",children:l.map(h=>c.jsx("button",{type:"button",className:`emoji-button ${s===h?"selected":""}`,onClick:()=>r(h),children:h},h))})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{type:"button",onClick:t,className:"cancel-button",children:""}),c.jsx("button",{type:"submit",className:"submit-button",disabled:!i.trim(),children:""})]})]})]})}):null}function SO({show:e,onClose:t,hiddenSections:n,sectionOrder:i,sectionTitles:a,customSections:s,onShowSection:r}){const l=_.useRef(!1),o=f=>{f.target===f.currentTarget&&(l.current=!0)},u=f=>{f.target===f.currentTarget&&l.current&&t(),l.current=!1};if(!e)return null;const d=f=>{if(a[f])return a[f];const h=s.find(m=>m.id===f);return h?`${h.icon} ${h.name}`:f};return n.length===0?c.jsx("div",{className:"modal-overlay",onMouseDown:o,onClick:u,children:c.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("p",{className:"empty-message",children:"  ."})})]})}):c.jsx("div",{className:"modal-overlay",onMouseDown:o,onClick:u,children:c.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:f=>f.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("div",{className:"hidden-sections-list",children:n.map(f=>c.jsxs("div",{className:"hidden-section-item",children:[c.jsx("span",{className:"hidden-section-title",children:d(f)}),c.jsx("button",{className:"show-section-button",onClick:()=>{r(f)},title:" ",children:" "})]},f))})})]})})}function xO({todo:e,todoHistory:t,expandedHistoryIds:n,toggleHistoryDetail:i,formatDate:a,formatDateOnly:s,onClose:r}){const l=_.useRef(!1),o=e.visible_dates&&e.visible_dates.length>0?e.visible_dates:[e.date],u=o[0],d=o.map(v=>({id:`${e.id}-${v}`,date:v})),f=t[e.id]||[],h=v=>{v.target===v.currentTarget&&(l.current=!0)},m=v=>{v.target===v.currentTarget&&l.current&&r(),l.current=!1};return c.jsx("div",{className:"modal-overlay",onMouseDown:h,onClick:m,children:c.jsxs("div",{className:"modal-content",onClick:v=>v.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:r,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsxs("div",{className:"todo-history",children:[c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:":"}),c.jsx("span",{className:"history-value",children:a(e.created_at)})]}),c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:s(u?new Date(u+"T00:00:00"):new Date(e.date+"T00:00:00"))})]}),d.length>0&&c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:d.map((v,b)=>{const w=v.date===e.date,p=s(new Date(v.date+"T00:00:00"));return c.jsxs("span",{children:[b>0&&"  ",c.jsxs("span",{style:w?{fontWeight:"bold",color:"#4CAF50"}:{},children:[p.split("(")[0],w?"()":""]})]},v.id)})})]}),(()=>{const v=new Date(e.created_at).toISOString().split("T")[0],b=e.date;return v!==b&&d.length===0?c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:s(new Date(e.date+"T00:00:00"))})]}):null})(),f.length>0&&c.jsxs("div",{className:"history-changes-list",children:[c.jsxs("div",{className:"history-changes-header",children:["  (",f.length,")"]}),f.map(v=>c.jsxs("div",{className:"history-record-compact",children:[c.jsxs("div",{className:"history-record-summary",children:[c.jsxs("div",{className:"history-change-time",children:[a(v.changed_at),v.changed_on_date&&c.jsxs("span",{className:"history-page-info",children:[" (: ",s(new Date(v.changed_on_date+"T00:00:00")),")"]})]}),c.jsx("button",{className:"history-detail-button",onClick:b=>{b.stopPropagation(),i(v.id)},children:n.includes(v.id)?"":""})]}),n.includes(v.id)&&c.jsxs("div",{className:"history-change",children:[c.jsxs("div",{className:"history-change-item history-before",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:v.previous_text})]}),c.jsx("div",{className:"history-change-arrow",children:""}),c.jsxs("div",{className:"history-change-item history-after",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:v.new_text})]})]})]},v.id))]})]})})]})})}function TO({todo:e,routines:t,routineDaysForModal:n,isEditingRoutineInModal:i,routineTimeSlotForModal:a,onToggleDay:s,setRoutineTimeSlotForModal:r,setRoutineDaysForModal:l,setIsEditingRoutineInModal:o,handleCreateRoutineFromTodo:u,onClose:d}){const f=_.useRef(!1),h=t.find(b=>b.id===e.routine_id),m=b=>{b.target===b.currentTarget&&(f.current=!0)},v=b=>{b.target===b.currentTarget&&f.current&&d(),f.current=!1};return c.jsx("div",{className:"modal-overlay",onMouseDown:m,onClick:v,children:c.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:d,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("div",{className:"routine-setup-inline",children:h&&!i?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-current-info",children:[c.jsx("div",{className:"routine-info-title",children:" :"}),c.jsx("div",{className:"routine-days-display",children:Oc.filter(b=>h.days.includes(b.key)).map(b=>c.jsx("span",{className:"routine-day-badge",children:b.label},b.key))}),h.time_slot&&c.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",h.time_slot]})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:b=>{b.stopPropagation(),l(h.days),r(h.time_slot||""),o(!0)},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:async b=>{b.stopPropagation(),await u(e.id,e.text,[],null,!0),d()},className:"routine-remove-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"routine-setup-title",children:i?" :":"  :"}),c.jsx(Wo,{selectedDays:n,onToggle:s,variant:"inline"}),c.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[c.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),c.jsx(hh,{value:a,onChange:b=>r(b)})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:async b=>{b.stopPropagation(),i&&h?await u(e.id,e.text,n,h.id,!1,a):await u(e.id,e.text,n,null,!1,a),d()},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:b=>{b.stopPropagation(),d()},className:"routine-cancel-button",children:""})]})]})})})]})})}function EO({showUndoToast:e,showSuccessToast:t,successToastMessage:n,lastDeleteAction:i,handleUndoDelete:a,handleUndoRoutineDelete:s,showDeleteConfirmModal:r,todoToDelete:l,setShowDeleteConfirmModal:o,deleteThisOnly:u,deleteFromNow:d,deleteAll:f,showRoutineDeleteModal:h,routineToDelete:m,setShowRoutineDeleteModal:v,deleteRoutineThisOnly:b,deleteRoutineFromNow:w,deleteRoutineAll:p,showTodoHistoryModal:g,selectedTodoForModal:y,todoHistory:S,expandedHistoryIds:T,toggleHistoryDetail:E,handleCloseTodoHistoryModal:x,formatDate:j,formatDateOnly:A,showTodoRoutineSetupModal:M,routines:P,routineDaysForModal:G,isEditingRoutineInModal:Q,routineTimeSlotForModal:re,handleToggleRoutineDayInModal:z,setRoutineTimeSlotForModal:N,setRoutineDaysForModal:$,setIsEditingRoutineInModal:K,handleCreateRoutineFromTodo:me,handleCloseTodoRoutineSetupModal:J,showRoutineModal:st,handleCloseRoutine:De,routineInput:Xe,setRoutineInput:Le,isAddingRoutine:Pe,selectedDays:Ee,handleToggleDay:ht,selectedTimeSlot:I,setSelectedTimeSlot:ce,handleAddRoutine:te,editingRoutineId:_e,editingRoutineText:ke,setEditingRoutineText:ze,editingRoutineDays:xe,handleToggleEditDay:Ue,handleStartEditRoutine:ct,handleSaveEditRoutine:ee,handleCancelEditRoutine:oe,handleDeleteRoutine:ge,fetchRoutineHistory:Te,showRoutineHistory:pt,handleCloseRoutineHistory:Ge,selectedRoutineForHistory:k,routineHistoryData:C,showMemoModal:R,setShowMemoModal:B,memoContent:V,setMemoContent:H,isSavingMemo:X,showGanttChart:L,handleCloseGanttChart:ae,ganttData:Z,ganttPeriod:le,setGanttPeriod:Y,showEncouragementModal:W,setShowEncouragementModal:ve,encouragementMessages:ut,newEncouragementMessage:Vt,setNewEncouragementMessage:cn,addEncouragementMessage:Qn,editingEncouragementId:Ua,editingEncouragementText:rt,setEditingEncouragementId:bt,setEditingEncouragementText:Ut,updateEncouragementMessage:xn,deleteEncouragementMessage:Yt,showAddSectionModal:zt,setShowAddSectionModal:Et,handleAddSection:un,showHiddenSectionsModal:mt,setShowHiddenSectionsModal:Tn,hiddenSections:Wt,sectionOrder:Dt,sectionTitles:En,customSections:jn,handleShowSection:Kt}){return c.jsxs(c.Fragment,{children:[e&&c.jsx(ev,{message:"",onUndo:a}),t&&c.jsx(ev,{message:n,onUndo:i?s:null,variant:"success"}),r&&l&&c.jsx(tv,{todo:l,onClose:()=>o(!1),onDeleteThisOnly:u,onDeleteFromNow:d,onDeleteAll:f}),h&&m&&c.jsx(tv,{todo:m,onClose:()=>v(!1),onDeleteThisOnly:b,onDeleteFromNow:w,onDeleteAll:p}),g&&y&&c.jsx(xO,{todo:y,todoHistory:S,expandedHistoryIds:T,toggleHistoryDetail:E,formatDate:j,formatDateOnly:A,onClose:x}),M&&y&&c.jsx(TO,{todo:y,routines:P,routineDaysForModal:G,isEditingRoutineInModal:Q,routineTimeSlotForModal:re,onToggleDay:z,setRoutineTimeSlotForModal:N,setRoutineDaysForModal:$,setIsEditingRoutineInModal:K,handleCreateRoutineFromTodo:me,onClose:J}),c.jsx(gO,{showRoutineModal:st,onClose:De,routineInput:Xe,setRoutineInput:Le,isAddingRoutine:Pe,selectedDays:Ee,onToggleDay:ht,selectedTimeSlot:I,setSelectedTimeSlot:ce,onAddRoutine:te,routines:P,editingRoutineId:_e,editingRoutineText:ke,setEditingRoutineText:ze,editingRoutineDays:xe,onToggleEditDay:Ue,onStartEdit:ct,onSaveEdit:ee,onCancelEdit:oe,onDelete:ge,onShowHistory:Te}),c.jsx(yO,{showRoutineHistory:pt,onClose:Ge,selectedRoutine:k,routineHistoryData:C}),c.jsx(pO,{show:R,onClose:()=>B(!1),content:V,setContent:H,isSaving:X,placeholder:" ..."}),c.jsx(bO,{showGanttChart:L,onClose:ae,ganttData:Z,ganttPeriod:le,setGanttPeriod:Y,formatDateOnly:A}),c.jsx(_O,{showEncouragementModal:W,onClose:()=>ve(!1),encouragementMessages:ut,newEncouragementMessage:Vt,setNewEncouragementMessage:cn,onAddEncouragementMessage:Qn,editingEncouragementId:Ua,editingEncouragementText:rt,setEditingEncouragementId:bt,setEditingEncouragementText:Ut,onUpdateEncouragementMessage:xn,onDeleteEncouragementMessage:Yt}),c.jsx(wO,{isOpen:zt,onClose:()=>Et(!1),onAddSection:un}),c.jsx(SO,{show:mt,onClose:()=>Tn(!1),hiddenSections:Wt,sectionOrder:Dt,sectionTitles:En,customSections:jn,onShowSection:Kt})]})}function jO({authLoading:e,session:t,handleGoogleLogin:n,handleAppleLogin:i}){return e?c.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),c.jsx("div",{children:" ..."})]})}):t?null:c.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:c.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",maxWidth:"400px",width:"90%"},children:[c.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"1rem"},children:" Todo Note"}),c.jsx("p",{style:{fontSize:"1.1rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"2rem"},children:"     "}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[c.jsxs("button",{onClick:i,style:{padding:"0.875rem 1.5rem",fontSize:"1rem",background:"#000000",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",fontWeight:"500"},children:[c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"})}),"Apple "]}),c.jsxs("button",{onClick:n,style:{padding:"0.875rem 1.5rem",fontSize:"1rem",background:"#ffffff",color:"#333333",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",fontWeight:"500"},children:[c.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google "]})]}),c.jsx("p",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.4)",marginTop:"2rem",lineHeight:"1.5"},children:"      ."})]})})}const nv=["timeline","routine","normal"];function OO(e){const[t,n]=_.useState(nv),[i,a]=_.useState(Nu),[s,r]=_.useState(!1),l=async()=>{var g;if(!((g=e==null?void 0:e.user)!=null&&g.id))return;const w=await Jn.get(Pn.SECTION_ORDER);if(w){const y=nv.filter(S=>!w.includes(S));if(y.length>0){const S=[...y,...w];n(S),o(S)}else n(w)}const p=await Jn.get(Pn.SECTION_ICONS);p&&a({...Nu,...p})},o=async w=>{var p;(p=e==null?void 0:e.user)!=null&&p.id&&await Jn.set(Pn.SECTION_ORDER,w,e.user.id)};return{sectionOrder:t,setSectionOrder:n,sectionIcons:i,isReorderMode:s,setIsReorderMode:r,fetchSectionOrder:l,saveSectionOrder:o,changeSectionIcon:async(w,p)=>{var y;if(!((y=e==null?void 0:e.user)!=null&&y.id))return;const g={...i,[w]:p};a(g),await Jn.set(Pn.SECTION_ICONS,g,e.user.id)},getSectionIcon:w=>i[w]||Nu[w]||"",getRandomIcon:()=>{const w=Math.floor(Math.random()*Xd.length);return Xd[w]},moveSectionLeft:w=>{n(p=>{const g=p.indexOf(w);if(g<=0)return p;const y=[...p];return[y[g-1],y[g]]=[y[g],y[g-1]],o(y),y})},moveSectionRight:w=>{n(p=>{const g=p.indexOf(w);if(g===-1||g>=p.length-1)return p;const y=[...p];return[y[g],y[g+1]]=[y[g+1],y[g]],o(y),y})},handleSectionDragEnd:w=>{const{active:p,over:g}=w;s&&t.includes(p.id)&&g&&p.id!==(g==null?void 0:g.id)&&n(y=>{const S=y.indexOf(p.id),T=y.indexOf(g.id),E=qi(y,S,T);return o(E),E})},handleSectionsContainerDoubleClick:w=>{s&&w.target===w.currentTarget&&r(!1)}}}function AO(e){const[t,n]=_.useState(""),[i,a]=_.useState(!1),[s,r]=_.useState(""),l=_.useRef(null),o=_.useRef(null),u=async()=>{try{const{data:f,error:h}=await qe.from("spec_memos").select("content").order("created_at",{ascending:!1}).limit(1);if(h)throw h;const m=f&&f.length>0?f[0].content:"";n(m),r(m)}catch(f){console.error("Error fetching memo:",f.message),n(""),r("")}},d=_.useCallback(async f=>{var h;if(f!==s)try{a(!0);const{data:m}=await qe.from("spec_memos").select("id").order("created_at",{ascending:!1}).limit(1);m&&m.length>0?await qe.from("spec_memos").update({content:f,updated_at:new Date().toISOString()}).eq("id",m[0].id):await qe.from("spec_memos").insert([{content:f,user_id:(h=e==null?void 0:e.user)==null?void 0:h.id}]),r(f)}catch(m){console.error("Error saving memo:",m.message)}finally{a(!1)}},[e,s]);return _.useEffect(()=>{if(t!==s)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{d(t)},1e3),()=>{o.current&&clearTimeout(o.current)}},[t,d,s]),_.useEffect(()=>()=>{o.current&&clearTimeout(o.current),t!==s&&d(t)},[]),{memoContent:t,setMemoContent:n,isSavingMemo:i,memoTextareaRef:l,fetchMemoContent:u}}const Ib=({type:e,supabase:t,selectedDate:n,onDeleteSuccess:i})=>({deleteThisOnly:async l=>{try{const o=Se(n),d=[...l.hidden_dates||[],o],f=e==="todo"?"todos":"routines",{error:h}=await t.from(f).update({hidden_dates:d}).eq("id",l.id);if(h)throw h;return i&&i(l.id,Mu.THIS_ONLY),{success:!0}}catch(o){return console.error(`${e}   (THIS_ONLY):`,o.message),{success:!1,error:o}}},deleteFromNow:async l=>{try{const o=Se(n),d=(l.visible_dates||[]).filter(m=>m<o),f=e==="todo"?"todos":"routines",{error:h}=await t.from(f).update({visible_dates:d,stop_carryover_from:o}).eq("id",l.id);if(h)throw h;return i&&i(l.id,Mu.FROM_NOW),{success:!0}}catch(o){return console.error(`${e}   (FROM_NOW):`,o.message),{success:!1,error:o}}},deleteAll:async l=>{try{const o=Se(n),u=e==="todo"?"todos":"routines",{error:d}=await t.from(u).update({deleted:!0,deleted_date:o}).eq("id",l.id);if(d)throw d;return e==="routine"&&await t.from("todos").update({routine_id:null}).eq("routine_id",l.id),i&&i(l.id,Mu.ALL),{success:!0}}catch(o){return console.error(`${e}   (ALL):`,o.message),{success:!1,error:o}}}}),CO=e=>["sun","mon","tue","wed","thu","fri","sat"][e],DO=({session:e,supabase:t,selectedDate:n,setTodos:i,setSuccessToastMessage:a,setShowSuccessToast:s})=>{const[r,l]=_.useState([]),[o,u]=_.useState(""),[d,f]=_.useState([]),[h,m]=_.useState(""),[v,b]=_.useState(!1),[w,p]=_.useState(!1),[g,y]=_.useState(null),[S,T]=_.useState(""),[E,x]=_.useState([]),[j,A]=_.useState(!1),[M,P]=_.useState(null),[G,Q]=_.useState([]),[re,z]=_.useState(!1),[N,$]=_.useState(null),K=_.useRef(new Set),{deleteThisOnly:me,deleteFromNow:J,deleteAll:st}=Ib({type:"routine",supabase:t,selectedDate:n,onDeleteSuccess:(ee,oe)=>{l(ge=>ge.filter(Te=>Te.id!==ee)),a(" "),s(!0)}}),De=async()=>{var ee;if((ee=e==null?void 0:e.user)!=null&&ee.id)try{const{data:oe,error:ge}=await t.from("routines").select("*").eq("deleted",!1).order("created_at",{ascending:!1});if(ge)throw ge;l(oe||[])}catch(oe){console.error("  :",oe.message)}},Xe=async()=>{var ee;if(!(o.trim()===""||v))try{b(!0);const oe={text:o,days:d,start_date:Se(n),user_id:(ee=e==null?void 0:e.user)==null?void 0:ee.id};h&&(oe.time_slot=h);const{data:ge,error:Te}=await t.from("routines").insert([oe]).select();if(Te)throw Te;l([ge[0],...r]),u(""),f([]),m("")}catch(oe){console.error("  :",oe.message)}finally{b(!1)}},Le=async(ee,oe,ge,Te=null,pt=!1,Ge="",k=null)=>{var C;try{if(pt){const{error:R}=await t.from("todos").update({routine_id:null}).eq("id",ee);if(R)throw R;i(B=>B.map(V=>V.id===ee?{...V,routine_id:null}:V));return}if(Te){const{error:R}=await t.from("routines").update({days:ge,time_slot:Ge}).eq("id",Te);if(R)throw R;const{error:B}=await t.from("todos").update({is_pending_routine:ge.length===0}).eq("id",ee);if(B)throw B;l(V=>V.map(H=>H.id===Te?{...H,days:ge,time_slot:Ge}:H)),i(V=>V.map(H=>H.id===ee?{...H,is_pending_routine:ge.length===0}:H))}else{const R={text:oe,days:ge,time_slot:Ge,start_date:k||Se(n),user_id:(C=e==null?void 0:e.user)==null?void 0:C.id},{data:B,error:V}=await t.from("routines").insert([R]).select();if(V)throw V;const{error:H}=await t.from("todos").update({routine_id:B[0].id,is_pending_routine:ge.length===0}).eq("id",ee);if(H)throw H;i(X=>X.map(L=>L.id===ee?{...L,routine_id:B[0].id,is_pending_routine:ge.length===0}:L)),l(X=>[B[0],...X])}}catch(R){console.error("  :",R.message)}},Pe=ee=>{y(ee.id),T(ee.text),x(ee.days)},Ee=()=>{y(null),T(""),x([])},ht=async()=>{if(!(!g||S.trim()===""||E.length===0))try{const{error:ee}=await t.from("routines").update({text:S.trim(),days:E}).eq("id",g);if(ee)throw ee;l(r.map(oe=>oe.id===g?{...oe,text:S.trim(),days:E}:oe)),Ee()}catch(ee){console.error("  :",ee.message)}},I=ee=>{x(oe=>oe.includes(ee)?oe.filter(ge=>ge!==ee):[...oe,ee])},ce=async ee=>{const oe=r.find(ge=>ge.id===ee);oe&&($(oe),z(!0))},te=async ee=>{var oe;if(!K.current.has(ee))try{K.current.add(ee);const ge=new Date(ee),Te=CO(ge.getDay()),{data:pt,error:Ge}=await t.from("routines").select("*").eq("deleted",!1);if(Ge)throw Ge;const k=pt.filter(C=>{const R=C.days||[],B=R.length===0||R.includes(Te);if(C.start_date){const V=new Date(C.start_date),H=ge>=V;return B&&H}return B});if(k.length===0)return;for(const C of k){const R=C.text,{data:B,error:V}=await t.from("todos").select("*").eq("routine_id",C.id).eq("deleted",!1);if(V)throw V;if(B&&B.length>1){console.warn(` ${C.id}    (${B.length}).     .`);for(let X=1;X<B.length;X++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",B[X].id)}const H=B&&B.length>0?B[0]:null;if(H){const X=H.visible_dates||[],L=!C.days||C.days.length===0,ae=L?"pending_routine":"routine";if(X.includes(ee)){(H.is_pending_routine!==L||H.section_type!==ae)&&await t.from("todos").update({is_pending_routine:L,section_type:ae}).eq("id",H.id);continue}const Z=[...X,ee].sort(),{error:le}=await t.from("todos").update({visible_dates:Z,is_pending_routine:L,section_type:L?"pending_routine":"routine"}).eq("id",H.id);le&&console.error("    :",le.message)}else{const X=!C.days||C.days.length===0,{error:L}=await t.from("todos").insert([{text:R,completed:!1,date:ee,visible_dates:[ee],hidden_dates:[],order_index:0,routine_id:C.id,is_pending_routine:X,section_type:X?"pending_routine":"routine",user_id:(oe=e==null?void 0:e.user)==null?void 0:oe.id}]);L&&console.error("   :",L.message)}}}catch(ge){console.error("   :",ge.message)}finally{setTimeout(()=>{K.current.delete(ee)},1e3)}},_e=async()=>{const oe=Se(new Date);await te(oe)},ke=async ee=>{try{const{data:oe,error:ge}=await t.from("todos").select("*").eq("routine_id",ee.id).eq("deleted",!1);if(ge)throw ge;const Te=oe&&oe.length>0?oe[0]:null;if(Te&&Te.visible_dates){const pt=Te.visible_dates.sort().map(Ge=>({id:`${Te.id}-${Ge}`,date:Ge,text:Te.text,completed:Te.completed,routine_id:Te.routine_id}));Q(pt)}else Q([]);P(ee),A(!0)}catch(oe){console.error("   :",oe.message),alert("   : "+oe.message)}},ze=()=>{A(!1),P(null),Q([])},xe=()=>{p(!0),De()},Ue=()=>{p(!1),u(""),f([])},ct=ee=>{f(oe=>oe.includes(ee)?oe.filter(ge=>ge!==ee):[...oe,ee])};return _.useEffect(()=>{e&&De()},[e]),{routines:r,setRoutines:l,routineInput:o,selectedDays:d,selectedTimeSlot:h,isAddingRoutine:v,showRoutineModal:w,editingRoutineId:g,editingRoutineText:S,editingRoutineDays:E,showRoutineHistory:j,selectedRoutineForHistory:M,routineHistoryData:G,routineCreationInProgress:K,showDeleteConfirmModal:re,setShowDeleteConfirmModal:z,routineToDelete:N,setRoutineToDelete:$,setRoutineInput:u,setSelectedTimeSlot:m,fetchRoutines:De,handleAddRoutine:Xe,handleDeleteRoutine:ce,deleteThisOnly:me,deleteFromNow:J,deleteAll:st,handleStartEditRoutine:Pe,handleSaveEditRoutine:ht,handleCancelEditRoutine:Ee,handleToggleEditDay:I,handleCreateRoutineFromTodo:Le,createRoutineTodosForDate:te,createRoutineTodos:_e,fetchRoutineHistory:ke,handleCloseRoutineHistory:ze,handleOpenRoutine:xe,handleCloseRoutine:Ue,handleToggleDay:ct}};function NO(e,t,n){const i=(u,d)=>e.filter(f=>!(f.parent_id||f.section_type!==u||u==="custom"&&f.section_id!==d)).sort((f,h)=>f.order_index-h.order_index),a=async u=>{let d=[...e];u.forEach((f,h)=>{const m=d.findIndex(v=>v.id===f.id);m!==-1&&(d[m]={...d[m],order_index:h+1})}),t(d);try{for(let f=0;f<u.length;f++)await n.from("todos").update({order_index:f+1}).eq("id",u[f].id)}catch(f){console.error("  :",f.message),t(e)}};return{handleMoveUp:async(u,d,f)=>{if(!e.find(w=>w.id===u))return;const m=i(d,f),v=m.findIndex(w=>w.id===u);if(v<=0)return;const b=qi(m,v,v-1);await a(b)},handleMoveDown:async(u,d,f)=>{if(!e.find(w=>w.id===u))return;const m=i(d,f),v=m.findIndex(w=>w.id===u);if(v>=m.length-1)return;const b=qi(m,v,v+1);await a(b)},handleMoveToTop:async(u,d,f)=>{if(!e.find(w=>w.id===u))return;const m=i(d,f),v=m.findIndex(w=>w.id===u);if(v<=0)return;const b=qi(m,v,0);await a(b)},handleMoveToBottom:async(u,d,f)=>{if(!e.find(w=>w.id===u))return;const m=i(d,f),v=m.findIndex(w=>w.id===u);if(v>=m.length-1)return;const b=qi(m,v,m.length-1);await a(b)},updateTodoOrder:a}}function RO(e,t,n,i){const[a,s]=_.useState(!1),[r,l]=_.useState(null),[o,u]=_.useState(null);return{isDraggingAny:a,activeTodoId:r,overId:o,handleDragStart:v=>{const{active:b}=v;s(!0),l(b.id)},handleDragOver:v=>{const{over:b}=v;u((b==null?void 0:b.id)||null)},handleDragCancel:()=>{s(!1),l(null),u(null)},handleDragEnd:async v=>{s(!1),l(null),u(null);const{active:b,over:w}=v;if(!w)return;if(w.id&&String(w.id).startsWith("timeline-")){const z=parseInt(String(w.id).replace("timeline-",""),10),N=e.find($=>$.id===b.id);N&&i&&i(N.id,z);return}if(b.id===w.id)return;const p=e.find(z=>z.id===b.id),g=e.find(z=>z.id===w.id);if(!p||!g)return;const y=p.section_type,S=p.section_id||null,T=g.section_type,E=g.section_id||null,x=y!==T||y==="custom"&&S!==E,j=T,A=E,M=e.filter(z=>!(z.parent_id||z.section_type!==j||j==="custom"&&z.section_id!==A)).sort((z,N)=>z.order_index-N.order_index),P=M.findIndex(z=>z.id===b.id),G=M.findIndex(z=>z.id===w.id);let Q=[...M];x?Q.splice(G,0,{...p,section_type:j,section_id:A,routine_id:j==="routine"||j==="pending_routine"?p.routine_id:null}):Q=qi(M,P,G);let re=[...e];if(Q.forEach((z,N)=>{const $=re.findIndex(K=>K.id===z.id);$!==-1&&(re[$]={...z,order_index:N+1})}),x){const z=re.findIndex(N=>N.id===b.id);z!==-1&&(re[z]={...re[z],section_type:j,section_id:A,routine_id:j==="routine"||j==="pending_routine"?re[z].routine_id:null})}t(re);try{if(x){const z={section_type:j,section_id:A};j!=="routine"&&j!=="pending_routine"&&(z.routine_id=null,z.is_pending_routine=!1),await n.from("todos").update(z).eq("id",b.id)}for(let z=0;z<Q.length;z++)await n.from("todos").update({order_index:z+1}).eq("id",Q[z].id)}catch(z){console.error("  :",z.message),t(e)}}}}const MO=(e,t,n,i,a,s,r,l,o)=>{const u=NO(i,a,t),d=async(k,C)=>{const R=Se(n),B=i.filter(le=>!le.scheduled_time||le.scheduled_date!==R?!1:parseInt(le.scheduled_time.split(":")[0],10)===C);let V=0;B.length>0&&(V=Math.max(...B.map(Y=>parseInt(Y.scheduled_time.split(":")[1],10)))+1);const H=`${C.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`,X=i.find(le=>le.id===k),L=(X==null?void 0:X.timeline_history)||[],ae={scheduled_date:R,scheduled_time:H,assigned_at:new Date().toISOString()},Z=[...L,ae];a(le=>le.map(Y=>Y.id===k?{...Y,scheduled_time:H,scheduled_date:R,timeline_history:Z}:Y));try{await t.from("todos").update({scheduled_time:H,scheduled_date:R,timeline_history:Z}).eq("id",k)}catch(le){console.error("  :",le.message)}},f=async k=>{a(C=>C.map(R=>R.id===k?{...R,scheduled_time:null,scheduled_date:null}:R));try{await t.from("todos").update({scheduled_time:null,scheduled_date:null}).eq("id",k)}catch(C){console.error("  :",C.message)}},h=async(k,C=6)=>{const R=i.find(L=>L.id===k);if(!(R!=null&&R.scheduled_time))return;const B=parseInt(R.scheduled_time.split(":")[0],10),V=parseInt(R.scheduled_time.split(":")[1],10),H=i.filter(L=>L.scheduled_time&&parseInt(L.scheduled_time.split(":")[0],10)===B).sort((L,ae)=>{const Z=parseInt(L.scheduled_time.split(":")[1],10),le=parseInt(ae.scheduled_time.split(":")[1],10);return Z-le}),X=H.findIndex(L=>L.id===k);if(X>0){const L=H[X-1],ae=parseInt(L.scheduled_time.split(":")[1],10),Z=`${B.toString().padStart(2,"0")}:${ae.toString().padStart(2,"0")}`,le=`${B.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`;a(Y=>Y.map(W=>W.id===k?{...W,scheduled_time:Z}:W.id===L.id?{...W,scheduled_time:le}:W));try{await t.from("todos").update({scheduled_time:Z}).eq("id",k),await t.from("todos").update({scheduled_time:le}).eq("id",L.id)}catch(Y){console.error("   :",Y.message)}}else{if(B<=C)return;const L=B-1,ae=i.filter(Y=>Y.scheduled_time&&parseInt(Y.scheduled_time.split(":")[0],10)===L);let Z=0;ae.length>0&&(Z=Math.max(...ae.map(W=>parseInt(W.scheduled_time.split(":")[1],10)))+1);const le=`${L.toString().padStart(2,"0")}:${Z.toString().padStart(2,"0")}`;a(Y=>Y.map(W=>W.id===k?{...W,scheduled_time:le}:W));try{await t.from("todos").update({scheduled_time:le}).eq("id",k)}catch(Y){console.error("   :",Y.message)}}},m=async(k,C=24)=>{const R=i.find(L=>L.id===k);if(!(R!=null&&R.scheduled_time))return;const B=parseInt(R.scheduled_time.split(":")[0],10),V=parseInt(R.scheduled_time.split(":")[1],10),H=i.filter(L=>L.scheduled_time&&parseInt(L.scheduled_time.split(":")[0],10)===B).sort((L,ae)=>{const Z=parseInt(L.scheduled_time.split(":")[1],10),le=parseInt(ae.scheduled_time.split(":")[1],10);return Z-le}),X=H.findIndex(L=>L.id===k);if(X<H.length-1){const L=H[X+1],ae=parseInt(L.scheduled_time.split(":")[1],10),Z=`${B.toString().padStart(2,"0")}:${ae.toString().padStart(2,"0")}`,le=`${B.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`;a(Y=>Y.map(W=>W.id===k?{...W,scheduled_time:Z}:W.id===L.id?{...W,scheduled_time:le}:W));try{await t.from("todos").update({scheduled_time:Z}).eq("id",k),await t.from("todos").update({scheduled_time:le}).eq("id",L.id)}catch(Y){console.error("   :",Y.message)}}else{if(B>=C)return;const L=B+1,ae=i.filter(Y=>Y.scheduled_time&&parseInt(Y.scheduled_time.split(":")[0],10)===L);let Z=0;if(ae.length>0){const Y=Math.min(...ae.map(W=>parseInt(W.scheduled_time.split(":")[1],10)));if(Z=Y>0?Y-1:0,Z===0&&Y===0){const W=ae.map(ve=>({...ve,scheduled_time:`${L.toString().padStart(2,"0")}:${(parseInt(ve.scheduled_time.split(":")[1],10)+1).toString().padStart(2,"0")}`}));a(ve=>ve.map(ut=>ut.id===k?{...ut,scheduled_time:`${L.toString().padStart(2,"0")}:00`}:W.find(cn=>cn.id===ut.id)||ut));try{await t.from("todos").update({scheduled_time:`${L.toString().padStart(2,"0")}:00`}).eq("id",k);for(const ve of W)await t.from("todos").update({scheduled_time:ve.scheduled_time}).eq("id",ve.id)}catch(ve){console.error("   :",ve.message)}return}}const le=`${L.toString().padStart(2,"0")}:${Z.toString().padStart(2,"0")}`;a(Y=>Y.map(W=>W.id===k?{...W,scheduled_time:le}:W));try{await t.from("todos").update({scheduled_time:le}).eq("id",k)}catch(Y){console.error("   :",Y.message)}}},v=RO(i,a,t,d),[b,w]=_.useState(""),[p,g]=_.useState(""),[y,S]=_.useState(""),[T,E]=_.useState(!0),[x,j]=_.useState(!1),[A,M]=_.useState(null),[P,G]=_.useState(!1),[Q,re]=_.useState(!1),[z,N]=_.useState(""),[$,K]=_.useState(null),[me,J]=_.useState(null),[st,De]=_.useState(!1),[Xe,Le]=_.useState(null),Pe=_.useRef(new Set),Ee=_.useRef(new Set),{deleteThisOnly:ht,deleteFromNow:I,deleteAll:ce}=Ib({type:"todo",supabase:t,selectedDate:n,onDeleteSuccess:(k,C)=>{const R=i.find(B=>B.id===k);R&&(M(R),K({id:k,deleteType:C,item:R}),G(!0),setTimeout(()=>{G(!1),M(null),K(null)},5e3)),a(B=>B.filter(V=>V.id!==k)),De(!1),Le(null)}}),te=k=>["sun","mon","tue","wed","thu","fri","sat"][k],_e=async k=>{var C;if(!Pe.current.has(k))try{Pe.current.add(k);const R=new Date(k),B=te(R.getDay()),{data:V,error:H}=await t.from("routines").select("*").eq("deleted",!1);if(H)throw H;const X=V.filter(L=>{const ae=L.days||[],Z=ae.length===0||ae.includes(B);if(L.start_date){const le=new Date(L.start_date),Y=R>=le;return Z&&Y}return Z});if(X.length===0)return;for(const L of X){const ae=L.text,{data:Z,error:le}=await t.from("todos").select("*").eq("routine_id",L.id).eq("deleted",!1);if(le)throw le;if(Z&&Z.length>1){console.warn(` ${L.id}    (${Z.length}).     .`);for(let W=1;W<Z.length;W++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",Z[W].id)}const Y=Z&&Z.length>0?Z[0]:null;if(Y){if((Y.hidden_dates||[]).includes(k)||Y.stop_carryover_from&&k>=Y.stop_carryover_from)continue;const ve=!L.days||L.days.length===0,ut=Y.visible_dates||[],Vt=ve?"pending_routine":"routine";if(ut.includes(k)){if(Y.is_pending_routine!==ve||Y.section_type!==Vt){const{error:rt}=await t.from("todos").update({is_pending_routine:ve,section_type:Vt}).eq("id",Y.id);rt&&console.error(" :",rt)}continue}const cn=[...ut,k].sort(),{error:Qn}=await t.from("todos").update({visible_dates:cn,is_pending_routine:ve,section_type:ve?"pending_routine":"routine"}).eq("id",Y.id);Qn&&console.error("    :",Qn.message)}else{const W=!L.days||L.days.length===0,{error:ve}=await t.from("todos").insert([{text:ae,completed:!1,date:k,visible_dates:[k],hidden_dates:[],order_index:0,routine_id:L.id,is_pending_routine:W,section_type:W?"pending_routine":"routine",user_id:(C=e==null?void 0:e.user)==null?void 0:C.id}]);ve&&console.error("   :",ve.message)}}}catch(R){console.error("   :",R.message)}finally{setTimeout(()=>{Pe.current.delete(k)},1e3)}},ke=async()=>{var k;if(!((k=e==null?void 0:e.user)!=null&&k.id)){E(!1);return}try{E(!0);const C=Se(n);await _e(C);const{data:R,error:B}=await t.from("todos").select("*").eq("deleted",!1);if(B)throw B;const V=(R||[]).filter(Y=>Y.routine_id),H=[...new Set(V.map(Y=>Y.routine_id))];let X={};if(H.length>0){const{data:Y}=await t.from("routines").select("*").in("id",H);X=(Y||[]).reduce((W,ve)=>(W[ve.id]=ve,W),{})}const L=new Date(C),ae=te(L.getDay()),Z=(R||[]).filter(Y=>{if(Y.stop_carryover_from&&C>=Y.stop_carryover_from||Y.hidden_dates&&Array.isArray(Y.hidden_dates)&&Y.hidden_dates.includes(C))return!1;if(Y.routine_id){const ve=X[Y.routine_id];if(ve){const ut=ve.days||[];if(ut.length>0&&!ut.includes(ae))return!1}}return Y.visible_dates&&Array.isArray(Y.visible_dates)?Y.visible_dates.includes(C):Y.date===C}),le=Z.filter(Y=>Y.routine_id);if(le.length>0){const Y=[...new Set(le.map(ve=>ve.routine_id))],{data:W}=await t.from("routines").select("*").in("id",Y);for(const ve of le){const ut=W==null?void 0:W.find(Qn=>Qn.id===ve.routine_id);if(!ut)continue;const Vt=!ut.days||ut.days.length===0,cn=Vt?"pending_routine":"routine";(ve.section_type!==cn||ve.is_pending_routine!==Vt)&&(await t.from("todos").update({section_type:cn,is_pending_routine:Vt}).eq("id",ve.id),ve.section_type=cn,ve.is_pending_routine=Vt)}}a(Z)}catch(C){console.error("   :",C.message)}finally{E(!1)}},ze=async()=>{var k;if(!(b.trim()===""||x))try{j(!0);const C=i.filter(X=>!X.parent_id&&X.section_type==="normal"),R=C.length>0?Math.max(...C.map(X=>X.order_index))+1:1,B=Se(n),{data:V,error:H}=await t.from("todos").insert([{text:b,completed:!1,order_index:R,date:B,visible_dates:[B],hidden_dates:[],section_type:"normal",user_id:(k=e==null?void 0:e.user)==null?void 0:k.id}]).select();if(H)throw H;a([...i,V[0]]),w("")}catch(C){console.error("   :",C.message)}finally{j(!1)}},xe=async()=>{var k,C;if(!(p.trim()===""||x))try{j(!0);const R=Se(n),{data:B,error:V}=await t.from("routines").insert([{text:p,days:[],start_date:R,user_id:(k=e==null?void 0:e.user)==null?void 0:k.id}]).select();if(V)throw V;const H=B[0],X=i.filter(le=>!le.parent_id&&le.section_type==="pending_routine"),L=X.length>0?Math.max(...X.map(le=>le.order_index))+1:1,{data:ae,error:Z}=await t.from("todos").insert([{text:p,completed:!1,order_index:L,date:R,visible_dates:[R],hidden_dates:[],routine_id:H.id,is_pending_routine:!0,section_type:"pending_routine",user_id:(C=e==null?void 0:e.user)==null?void 0:C.id}]).select();if(Z)throw Z;r([H,...s]),a([...i,ae[0]]),g("")}catch(R){console.error("   :",R.message)}finally{j(!1)}},Ue=async(k,C)=>{var R;if(!(!C||C.trim()===""))try{const B=i.filter(W=>!W.parent_id&&W.section_type==="normal"),V=B.length>0?Math.max(...B.map(W=>W.order_index))+1:1,H=Se(n),X=i.filter(W=>!W.scheduled_time||W.scheduled_date!==H?!1:parseInt(W.scheduled_time.split(":")[0],10)===k);let L=0;X.length>0&&(L=Math.max(...X.map(ve=>parseInt(ve.scheduled_time.split(":")[1],10)))+1);const ae=`${k.toString().padStart(2,"0")}:${L.toString().padStart(2,"0")}`,Z={scheduled_date:H,scheduled_time:ae,assigned_at:new Date().toISOString()},{data:le,error:Y}=await t.from("todos").insert([{text:C.trim(),completed:!1,order_index:V,date:H,visible_dates:[H],hidden_dates:[],section_type:"normal",scheduled_time:ae,scheduled_date:H,timeline_history:[Z],user_id:(R=e==null?void 0:e.user)==null?void 0:R.id}]).select();if(Y)throw Y;return a([...i,le[0]]),le[0]}catch(B){return console.error("   :",B.message),null}},ct=async()=>{var k;if(!(y.trim()===""||x))try{j(!0);const C=i.filter(X=>!X.parent_id&&X.section_type==="normal"),R=C.length>0?Math.max(...C.map(X=>X.order_index))+1:1,B=Se(n),{data:V,error:H}=await t.from("todos").insert([{text:y,completed:!1,order_index:R,date:B,visible_dates:[B],hidden_dates:[],section_type:"normal",user_id:(k=e==null?void 0:e.user)==null?void 0:k.id}]).select();if(H)throw H;a([...i,V[0]]),S("")}catch(C){console.error("   :",C.message)}finally{j(!1)}},ee=async k=>{const C=i.find(R=>R.id===k);if(C)try{const R=!C.completed,B=R?new Date().toISOString():null,{error:V}=await t.from("todos").update({completed:R,completed_at:B}).eq("id",k);if(V)throw V;a(i.map(H=>H.id===k?{...H,completed:R,completed_at:B}:H))}catch(R){console.error("   :",R.message)}},oe=k=>{a(i.filter(C=>C.id!==k))},ge=async(k,C)=>{const R=i.find(B=>B.id===k);R&&(C?C==="this-only"?await ht(R):C==="from-now"?await I(R):C==="all"&&await ce(R):(Le(R),De(!0)))},Te=async()=>{if(!(!A||!$))try{const{deleteType:k}=$,C=Se(n);if(k==="this-only"){const R=(A.hidden_dates||[]).filter(V=>V!==C),{error:B}=await t.from("todos").update({hidden_dates:R}).eq("id",A.id);if(B)throw B}else if(k==="from-now"){const{error:R}=await t.from("todos").update({visible_dates:A.visible_dates,stop_carryover_from:null}).eq("id",A.id);if(R)throw R}else if(k==="all"){const{error:R}=await t.from("todos").update({deleted:!1,deleted_date:null}).eq("id",A.id);if(R)throw R}a(R=>{const B={...A};return[...R,B].sort((H,X)=>H.order_index-X.order_index)}),G(!1),M(null),K(null)}catch(k){console.error("  :",k.message)}},pt=async(k,C)=>{var R,B;try{let V=null;Ee.current.add(k);const H=new Date().toISOString();if(a(ae=>(V=ae.find(Z=>Z.id===k),!V||V.text===C?(Ee.current.delete(k),ae):ae.map(Z=>Z.id===k?{...Z,text:C,updated_at:H}:Z))),!V||V.text===C)return;const{error:X}=await t.from("todo_history").insert([{todo_id:k,previous_text:V.text,new_text:C,changed_on_date:V.date,user_id:(R=e==null?void 0:e.user)==null?void 0:R.id}]);if(X&&console.error("  :",X.message),V.original_todo_id){const{data:ae,error:Z}=await t.from("todos").select("text, date").eq("id",V.original_todo_id).single();!Z&&ae&&await t.from("todo_history").insert([{todo_id:V.original_todo_id,previous_text:V.text,new_text:C,changed_on_date:V.date,user_id:(B=e==null?void 0:e.user)==null?void 0:B.id}])}const{error:L}=await t.from("todos").update({text:C}).eq("id",k);L?(console.error("   :",L.message),a(ae=>ae.map(Z=>Z.id===k?V:Z)),Ee.current.delete(k)):setTimeout(()=>{Ee.current.delete(k)},5e3)}catch(V){console.error("   :",V.message),Ee.current.delete(k)}},Ge=async(k,C)=>{var R;if(!(!C||C.trim()===""))try{const V=i.filter(ae=>ae.parent_id===k).length+1,H=Se(n),{data:X,error:L}=await t.from("todos").insert([{text:C.trim(),completed:!1,order_index:V,date:H,parent_id:k,user_id:(R=e==null?void 0:e.user)==null?void 0:R.id}]).select();if(L)throw L;a([...i,X[0]])}catch(B){console.error("    :",B.message)}};return{inputValue:b,setInputValue:w,routineInputValue:p,setRoutineInputValue:g,normalInputValue:y,setNormalInputValue:S,loading:T,isAdding:x,deletedTodo:A,showUndoToast:P,showSuccessToast:Q,successToastMessage:z,lastDeleteAction:$,focusedTodoId:me,setFocusedTodoId:J,selectedTodoForModal:l,showDeleteConfirmModal:st,setShowDeleteConfirmModal:De,todoToDelete:Xe,setTodoToDelete:Le,isDraggingAny:v.isDraggingAny,activeTodoId:v.activeTodoId,overId:v.overId,fetchTodos:ke,handleAddTodo:ze,handleAddRoutineTodo:xe,handleAddNormalTodo:ct,handleToggleTodo:ee,handleDeleteTodo:ge,deleteThisOnly:ht,deleteFromNow:I,deleteAll:ce,handleUndoDelete:Te,handleEditTodo:pt,handleAddSubTodo:Ge,handleRemoveTodoFromUI:oe,handleDragStart:v.handleDragStart,handleDragOver:v.handleDragOver,handleDragCancel:v.handleDragCancel,handleDragEnd:v.handleDragEnd,handleMoveUp:u.handleMoveUp,handleMoveDown:u.handleMoveDown,handleMoveToTop:u.handleMoveToTop,handleMoveToBottom:u.handleMoveToBottom,handleRemoveFromTimeline:f,handleMoveUpInTimeline:h,handleMoveDownInTimeline:m,handleAddTodoFromTimeline:Ue}},kO=({session:e,supabase:t,selectedTodoForModal:n,setSelectedTodoForModal:i})=>{const[a,s]=_.useState(!1),[r,l]=_.useState({}),[o,u]=_.useState([]);return{showTodoHistoryModal:a,todoHistory:r,expandedHistoryIds:o,handleOpenTodoHistoryModal:async m=>{i(m);try{const{data:v,error:b}=await t.from("todo_history").select("*").eq("todo_id",m.id).order("changed_at",{ascending:!1});if(b)throw b;l(w=>({...w,[m.id]:v||[]}))}catch(v){console.error("Error fetching history:",v)}s(!0)},handleCloseTodoHistoryModal:()=>{s(!1),i(null),u([])},toggleHistoryDetail:m=>{u(v=>v.includes(m)?v.filter(b=>b!==m):[...v,m])}}},UO=({selectedTodoForModal:e,setSelectedTodoForModal:t,routines:n})=>{const[i,a]=_.useState(!1),[s,r]=_.useState([]),[l,o]=_.useState(!1),[u,d]=_.useState("");return{showTodoRoutineSetupModal:i,routineDaysForModal:s,setRoutineDaysForModal:r,isEditingRoutineInModal:l,setIsEditingRoutineInModal:o,routineTimeSlotForModal:u,setRoutineTimeSlotForModal:d,handleOpenTodoRoutineSetupModal:v=>{t(v);const b=n.find(w=>w.id===v.routine_id);b?(r(b.days||[]),d(b.time_slot||""),o(!1)):(r([]),d(""),o(!0)),a(!0)},handleCloseTodoRoutineSetupModal:()=>{a(!1),t(null),r([]),d(""),o(!1)},handleToggleRoutineDayInModal:v=>{r(b=>b.includes(v)?b.filter(w=>w!==v):[...b,v])}}},zO=({session:e,supabase:t,selectedDate:n})=>{const i=_.useRef(!1);return{carryOverInProgress:i,carryOverIncompleteTodos:async r=>{if(!i.current)try{i.current=!0;const{data:l,error:o}=await t.from("todos").select("*").eq("deleted",!1).eq("completed",!1);if(o)throw o;if(!l||l.length===0)return;const u=l.filter(d=>(d.hidden_dates||[]).includes(r)?!1:d.visible_dates&&Array.isArray(d.visible_dates)&&d.visible_dates.length>0?d.visible_dates.includes(r)?!1:d.visible_dates.some(m=>m<r):!!(d.date&&d.date<r));if(u.length===0)return;for(const d of u){let f=[];d.visible_dates&&Array.isArray(d.visible_dates)&&d.visible_dates.length>0?f=[...d.visible_dates,r]:f=d.date?[d.date,r]:[r];const{error:h}=await t.from("todos").update({visible_dates:f}).eq("id",d.id);h&&console.error(` ${d.id}  :`,h.message)}}catch(l){console.error("  :",l.message)}finally{i.current=!1}},movePastIncompleteTodosToToday:async()=>{if(!i.current)try{i.current=!0;const r=new Date,l=Se(r),{data:o,error:u}=await t.from("todos").select("date").lt("date",l).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("date",{ascending:!0}).limit(1);if(u)throw u;if(!o||o.length===0)return;const d=new Date(o[0].date+"T00:00:00");let f=new Date(d);const h=new Date(r);h.setDate(h.getDate()-1);let m=0;for(;f<=h;){const v=Se(f),b=new Date(f);b.setDate(b.getDate()+1);const w=Se(b),{data:p,error:g}=await t.from("todos").select("*").eq("date",v).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("order_index",{ascending:!0});if(g)throw g;if(p&&p.length>0){const{data:y,error:S}=await t.from("todos").select("*").eq("date",w).eq("deleted",!1).order("order_index",{ascending:!0});if(S)throw S;const T=new Set;y==null||y.forEach(x=>{x.original_todo_id!==null&&T.add(x.original_todo_id)});const E=p.filter(x=>{if(x.stop_carryover_from&&v>=x.stop_carryover_from)return!1;const j=x.original_todo_id||x.id;return!T.has(j)});if(E.length>0){const x=E.map(z=>z.original_todo_id||z.id).filter((z,N,$)=>$.indexOf(z)===N),{data:j,error:A}=await t.from("todos").select("id, created_at").in("id",x);if(A)throw A;const M={};j==null||j.forEach(z=>{M[z.id]=z.created_at});const G=(y?y.length:0)+1,Q=E.map((z,N)=>{const $=z.original_todo_id||z.id;return{text:z.text,completed:!1,date:w,created_at:M[$]||z.created_at,order_index:G+N,original_todo_id:$,parent_id:null,routine_id:null}}),{error:re}=await t.from("todos").insert(Q);if(re)throw re;m+=E.length}}f.setDate(f.getDate()+1)}m>0}catch(r){console.error("    :",r.message)}finally{i.current=!1}}}};function LO(e,t){const[n,i]=_.useState([]),[a,s]=_.useState(!1),[r,l]=_.useState(""),[o,u]=_.useState(null),[d,f]=_.useState(""),[h,m]=_.useState(!1),[v,b]=_.useState(""),w=()=>{if(n.length===0)return"";const E=Math.floor(Math.random()*n.length);return n[E]},p=()=>{let E=0;m(!0),setTimeout(()=>{let x=w();for(;x===v&&n.length>1&&E<10;)x=w(),E++;m(!1),b(x)},300)},g=async()=>{try{const{data:E,error:x}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(x)throw x;if(E&&E.length>0){const j=E.map(A=>A.message);i(j),v||b(j[0])}}catch(E){console.error("   :",E.message)}},y=async E=>{var x;try{const{data:j}=await t.from("encouragement_messages").select("order_index").order("order_index",{ascending:!1}).limit(1),A=j&&j.length>0?j[0].order_index:0,{error:M}=await t.from("encouragement_messages").insert([{message:E,order_index:A+1,user_id:(x=e==null?void 0:e.user)==null?void 0:x.id}]);if(M)throw M;await g()}catch(j){console.error("   :",j.message),alert("   .")}},S=async(E,x)=>{try{const{data:j}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!j||E>=j.length)throw new Error("   .");const A=j[E],{error:M}=await t.from("encouragement_messages").update({message:x}).eq("id",A.id);if(M)throw M;await g()}catch(j){console.error("   :",j.message),alert("   .")}},T=async E=>{try{const{data:x}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!x||E>=x.length)throw new Error("   .");const j=x[E],{error:A}=await t.from("encouragement_messages").delete().eq("id",j.id);if(A)throw A;await g()}catch(x){console.error("   :",x.message),alert("   .")}};return _.useEffect(()=>{n.length>0&&!v&&b(w())},[n]),{encouragementMessages:n,showEncouragementModal:a,setShowEncouragementModal:s,newEncouragementMessage:r,setNewEncouragementMessage:l,editingEncouragementId:o,setEditingEncouragementId:u,editingEncouragementText:d,setEditingEncouragementText:f,showEncouragementEmoji:h,currentEncouragementMessage:v,handleEncouragementClick:p,fetchEncouragementMessages:g,addEncouragementMessage:y,updateEncouragementMessage:S,deleteEncouragementMessage:T}}function BO(e){const[t,n]=_.useState(!1),[i,a]=_.useState([]),[s,r]=_.useState("1week"),l=async()=>{try{const d=new Date,f=Se(d);let h=null;if(s!=="all")switch(h=new Date(d),s){case"1week":h.setDate(d.getDate()-7);break;case"2weeks":h.setDate(d.getDate()-14);break;case"1month":h.setMonth(d.getMonth()-1);break;case"3months":h.setMonth(d.getMonth()-3);break;case"6months":h.setMonth(d.getMonth()-6);break}let m=e.from("todos").select("*").eq("deleted",!1).is("routine_id",null).order("created_at",{ascending:!0});h&&(m=m.gte("date",Se(h)));const{data:v,error:b}=await m;if(b)throw b;const w={};for(const g of v||[]){const y=g.original_todo_id||g.id;w[y]||(w[y]=[]),w[y].push(g)}const p=Object.entries(w).map(([g,y])=>{const S=y.sort((A,M)=>new Date(A.date)-new Date(M.date)),T=S[0],E=S.map(A=>A.date);let x=null;for(const A of S)if(A.completed&&A.completed_at){const M=new Date(A.completed_at);x=Se(M);break}const j=S.find(A=>A.date===f);return{text:T.text,originalId:parseInt(g),createdAt:T.created_at,startDate:E[0],endDate:E[E.length-1],dates:E,completed:(j==null?void 0:j.completed)||!1,completedDate:x}}).sort((g,y)=>new Date(g.createdAt)-new Date(y.createdAt));a(p)}catch(d){console.error("   :",d.message)}};return{showGanttChart:t,ganttData:i,ganttPeriod:s,setGanttPeriod:r,handleOpenGanttChart:async()=>{n(!0),await l()},handleCloseGanttChart:()=>{n(!1),a([])},fetchGanttData:l}}function HO(){const{session:e,authLoading:t,handleGoogleLogin:n,handleAppleLogin:i,handleLogout:a}=nO(),[s,r]=_.useState(new Date),[l,o]=_.useState(!1),u=_.useRef(new Set),d=E1(Ou(dh,{activationConstraint:{delay:120,tolerance:5}}),Ou(Ab,{activationConstraint:{delay:120,tolerance:5}}),Ou(ch,{coordinateGetter:Wj})),[f,h]=_.useState([]),[m,v]=_.useState(null),{showTodoHistoryModal:b,todoHistory:w,expandedHistoryIds:p,handleOpenTodoHistoryModal:g,handleCloseTodoHistoryModal:y,toggleHistoryDetail:S}=kO({session:e,supabase:qe,selectedTodoForModal:m,setSelectedTodoForModal:v}),{showRoutineModal:T,routines:E,setRoutines:x,routineInput:j,setRoutineInput:A,selectedDays:M,selectedTimeSlot:P,setSelectedTimeSlot:G,isAddingRoutine:Q,editingRoutineId:re,editingRoutineText:z,setEditingRoutineText:N,showRoutineHistory:$,selectedRoutineForHistory:K,routineHistoryData:me,editingRoutineDays:J,showDeleteConfirmModal:st,setShowDeleteConfirmModal:De,routineToDelete:Xe,fetchRoutines:Le,handleAddRoutine:Pe,handleCreateRoutineFromTodo:Ee,handleStartEditRoutine:ht,handleCancelEditRoutine:I,handleSaveEditRoutine:ce,handleToggleEditDay:te,handleDeleteRoutine:_e,deleteThisOnly:ke,deleteFromNow:ze,deleteAll:xe,fetchRoutineHistory:Ue,handleCloseRoutineHistory:ct,handleOpenRoutine:ee,handleCloseRoutine:oe,handleToggleDay:ge,createRoutineTodos:Te}=DO({session:e,supabase:qe,selectedDate:s,setTodos:h,setSuccessToastMessage:()=>{},setShowSuccessToast:()=>{}}),{showTodoRoutineSetupModal:pt,routineDaysForModal:Ge,setRoutineDaysForModal:k,isEditingRoutineInModal:C,setIsEditingRoutineInModal:R,routineTimeSlotForModal:B,setRoutineTimeSlotForModal:V,handleOpenTodoRoutineSetupModal:H,handleCloseTodoRoutineSetupModal:X,handleToggleRoutineDayInModal:L}=UO({selectedTodoForModal:m,setSelectedTodoForModal:v,routines:E}),{carryOverIncompleteTodos:ae}=zO({session:e,supabase:qe,selectedDate:s}),{routineInputValue:Z,setRoutineInputValue:le,normalInputValue:Y,setNormalInputValue:W,loading:ve,isDraggingAny:ut,isAdding:Vt,showUndoToast:cn,showSuccessToast:Qn,successToastMessage:Ua,lastDeleteAction:rt,focusedTodoId:bt,setFocusedTodoId:Ut,showDeleteConfirmModal:xn,setShowDeleteConfirmModal:Yt,todoToDelete:zt,activeTodoId:Et,overId:un,fetchTodos:mt,handleAddRoutineTodo:Tn,handleAddNormalTodo:Wt,handleToggleTodo:Dt,handleDeleteTodo:En,handleAddSubTodo:jn,handleEditTodo:Kt,handleDragStart:aa,handleDragOver:Qs,handleDragCancel:Vb,handleDragEnd:Yb,handleUndoDelete:mh,deleteThisOnly:Gb,deleteFromNow:Kb,deleteAll:Xb,handleRemoveTodoFromUI:hl,handleMoveUp:ml,handleMoveDown:gl,handleMoveToTop:vl,handleMoveToBottom:yl,handleRemoveFromTimeline:gh,handleMoveUpInTimeline:vh,handleMoveDownInTimeline:yh,handleAddTodoFromTimeline:ph}=MO(e,qe,s,f,h,E,x,m),pl=O=>{Ut(O)},bl=O=>{},Qb=()=>{mh()},{showGanttChart:bh,ganttData:Jb,ganttPeriod:_h,setGanttPeriod:Pb,handleOpenGanttChart:Zb,handleCloseGanttChart:Fb,fetchGanttData:Wb}=BO(qe),[e_,wh]=_.useState(!1),{memoContent:t_,setMemoContent:n_,isSavingMemo:i_,fetchMemoContent:a_}=AO(e),{encouragementMessages:s_,showEncouragementModal:r_,setShowEncouragementModal:Sh,newEncouragementMessage:l_,setNewEncouragementMessage:o_,editingEncouragementId:c_,setEditingEncouragementId:u_,editingEncouragementText:d_,setEditingEncouragementText:f_,showEncouragementEmoji:h_,currentEncouragementMessage:m_,handleEncouragementClick:g_,fetchEncouragementMessages:v_,addEncouragementMessage:y_,updateEncouragementMessage:p_,deleteEncouragementMessage:b_}=LO(e,qe),__=async O=>{var q,se;try{const ne=Se(s),U=f.filter(Oe=>!Oe.parent_id&&Oe.section_type==="normal"),ue=U.length>0?Math.max(...U.map(Oe=>Oe.order_index))+1:1,tt=`temp_${Date.now()}_${Math.random()}`,je={id:tt,text:O,completed:!1,order_index:ue,date:ne,visible_dates:[ne],hidden_dates:[],section_type:"normal",user_id:(q=e==null?void 0:e.user)==null?void 0:q.id,_isOptimistic:!0};if(h(Oe=>[...Oe,je]),(se=e==null?void 0:e.user)!=null&&se.id&&qe){const{data:Oe,error:nt}=await qe.from("todos").insert([{text:O,completed:!1,order_index:ue,date:ne,visible_dates:[ne],hidden_dates:[],section_type:"normal",user_id:e.user.id}]).select();if(nt)throw nt;h(Gt=>Gt.map(we=>we.id===tt?Oe[0]:we))}else{const Oe=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");Oe.push({text:O,dateStr:ne,timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(Oe))}}catch(ne){console.error("Quick add error:",ne);const U=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");U.push({text:O,dateStr:Se(s),timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(U))}},[Bn,w_]=_.useState(()=>localStorage.getItem("viewMode")||"horizontal"),[Ac,xh]=_.useState({normal:" ",routine:" "}),[Ti,Js]=_.useState([]),[S_,Th]=_.useState(!1),[Eh,jh]=_.useState(!1),[Oh,Ah]=_.useState({}),x_=OO(e),{sectionOrder:za,setSectionOrder:Ch,fetchSectionOrder:T_,saveSectionOrder:Dh,moveSectionLeft:Cc,moveSectionRight:Dc,changeSectionIcon:_l,getSectionIcon:wl}=x_,La=_.useRef(null),[E_,j_]=_.useState(0),Nc=_.useRef(null),Nh=_.useRef(null),Rh=_.useRef(null),[Mh,O_]=_.useState(()=>window.innerWidth>=769);_.useEffect(()=>{const O=()=>O_(window.innerWidth>=769);return window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]);const[sa,Rc]=_.useState([]),[A_,kh]=_.useState(!1),Uh=async O=>{var q;(q=e==null?void 0:e.user)!=null&&q.id&&await Jn.set(Pn.HIDDEN_SECTIONS,O,e.user.id)},C_=async()=>{var q;if(!((q=e==null?void 0:e.user)!=null&&q.id))return;const O=await Jn.get(Pn.HIDDEN_SECTIONS);O&&Rc(O)},Mc=O=>{const q=[...sa,O];Rc(q),Uh(q)},D_=O=>{const q=sa.filter(se=>se!==O);Rc(q),Uh(q)},N_=()=>{const O=new Date(s);O.setDate(O.getDate()-1),r(O)},R_=()=>{const O=new Date(s);O.setDate(O.getDate()+1),r(O)},M_=O=>{const q=new Date(O.target.value+"T00:00:00");r(q)},k_=async()=>{var q;if(!((q=e==null?void 0:e.user)!=null&&q.id))return;const O=await Jn.get(Pn.SECTION_TITLES);O&&xh(se=>({...se,...O}))},U_=async(O,q)=>{var ne;if(!((ne=e==null?void 0:e.user)!=null&&ne.id))return;const se={...Ac,[O]:q};xh(se),await Jn.set(Pn.SECTION_TITLES,se,e.user.id)},z_=async()=>{var q;if(!((q=e==null?void 0:e.user)!=null&&q.id))return;const O=await Jn.get(Pn.CUSTOM_SECTIONS);O&&Js(O)},Sl=async O=>{var q;(q=e==null?void 0:e.user)!=null&&q.id&&await Jn.set(Pn.CUSTOM_SECTIONS,O,e.user.id)},L_=({name:O,icon:q})=>{const se={id:`custom-${Date.now()}`,name:O,icon:q},ne=[...Ti,se];Js(ne),Sl(ne);const U=[...za,se.id];Ch(U),Dh(U)},B_=async O=>{const q=Oh[O]||"";if(!(!q.trim()||Eh)){if(!e){alert(" ");return}jh(!0);try{const se=f.filter(Oe=>!Oe.parent_id&&Oe.section_type==="custom"&&Oe.section_id===O),ne=se.length>0?Math.max(...se.map(Oe=>Oe.order_index))+1:1,U=Se(s),ue={text:q.trim(),completed:!1,order_index:ne,date:U,visible_dates:[U],hidden_dates:[],user_id:e.user.id,section_id:O,section_type:"custom"},{data:tt,error:je}=await qe.from("todos").insert([ue]).select();if(je)throw je;tt&&tt.length>0&&(h(Oe=>[...Oe,tt[0]]),Ah(Oe=>({...Oe,[O]:""})))}catch(se){console.error("  :",se.message)}finally{jh(!1)}}},H_=async O=>{if(!confirm("  ?      ."))return;try{const{error:ne}=await qe.from("todos").delete().eq("section_id",O);if(ne){console.error("   :",ne.message);return}}catch(ne){console.error("   :",ne.message);return}const q=Ti.filter(ne=>ne.id!==O);Js(q),Sl(q);const se=za.filter(ne=>ne!==O);Ch(se),Dh(se),h(ne=>ne.filter(U=>U.section_id!==O))},q_=async(O,q)=>{try{const se=Se(O),ne=Se(q),{data:U,error:ue}=await qe.from("todos").select("*").eq("deleted",!1).eq("completed",!1).is("routine_id",null);if(ue)throw ue;const tt=(U||[]).filter(je=>je.stop_carryover_from&&se>=je.stop_carryover_from?!1:je.visible_dates&&Array.isArray(je.visible_dates)&&je.visible_dates.length>0?je.visible_dates.includes(se):je.date===se);if(tt.length===0)return;for(const je of tt){let Oe=je.visible_dates||[je.date];if(Oe.includes(ne))continue;const nt=[...Oe,ne].sort(),{error:Gt}=await qe.from("todos").update({visible_dates:nt}).eq("id",je.id);Gt&&console.error(` ${je.id}  :`,Gt.message)}}catch(se){console.error("   :",se.message)}};_.useEffect(()=>{let O=null;const q=()=>{document.body.classList.add("is-scrolling"),O&&clearTimeout(O),O=setTimeout(()=>{document.body.classList.remove("is-scrolling")},1e3)};return window.addEventListener("scroll",q),()=>{window.removeEventListener("scroll",q),O&&clearTimeout(O)}},[]),_.useEffect(()=>{e&&(v_(),a_(),Le(),T_(),k_(),z_(),C_())},[e]),_.useEffect(()=>{if(!La.current)return;const O=La.current,q=Bn==="horizontal";let se=!1,ne=0,U=0,ue=0;const tt=ye=>ye.type.includes("touch")?q?ye.touches[0].pageX:ye.touches[0].pageY:q?ye.pageX:ye.pageY,je=ye=>{ye.target.closest(".section-block")||(se=!0,ne=tt(ye),U=q?O.scrollLeft:O.scrollTop,O.style.transition="none",O.style.transform=q?"translateX(0)":"translateY(0)",ue=0)},Oe=()=>{se&&ue!==0&&(O.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",O.style.transform=q?"translateX(0)":"translateY(0)",setTimeout(()=>{O.style.transition="none",ue=0},300)),se=!1},nt=()=>{ue!==0&&(O.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",O.style.transform=q?"translateX(0)":"translateY(0)",setTimeout(()=>{O.style.transition="none",ue=0},300)),se=!1},Gt=ye=>{if(!se)return;ye.preventDefault();const de=(tt(ye)-ne)*1.5,gt=U-de,lt=q?O.scrollWidth-O.clientWidth:O.scrollHeight-O.clientHeight;if(gt<0){const Lt=-gt;ue=Math.min(Lt*.3,100),q?(O.scrollLeft=0,O.style.transform=`translateX(${ue}px)`):(O.scrollTop=0,O.style.transform=`translateY(${ue}px)`)}else if(gt>lt){const Lt=gt-lt;ue=-Math.min(Lt*.3,100),q?(O.scrollLeft=lt,O.style.transform=`translateX(${ue}px)`):(O.scrollTop=lt,O.style.transform=`translateY(${ue}px)`)}else ue=0,O.style.transform=q?"translateX(0)":"translateY(0)",q?O.scrollLeft=gt:O.scrollTop=gt},we=ye=>{q&&ye.target.closest(".section-block")&&ye.deltaX!==0&&ye.preventDefault()};return O.addEventListener("mousedown",je),document.addEventListener("mouseup",nt),document.addEventListener("mouseleave",Oe),O.addEventListener("mousemove",Gt),O.addEventListener("touchstart",je,{passive:!0}),O.addEventListener("touchmove",Gt,{passive:!1}),O.addEventListener("touchend",nt),O.addEventListener("touchcancel",nt),O.addEventListener("wheel",we,{passive:!1}),()=>{O.removeEventListener("mousedown",je),document.removeEventListener("mouseup",nt),document.removeEventListener("mouseleave",Oe),O.removeEventListener("mousemove",Gt),O.removeEventListener("touchstart",je),O.removeEventListener("touchmove",Gt),O.removeEventListener("touchend",nt),O.removeEventListener("touchcancel",nt),O.removeEventListener("wheel",we)}},[Bn,f,E]),_.useEffect(()=>{if(Bn!=="horizontal"||!La.current)return;const O=La.current,q=()=>{const se=O.querySelectorAll(".section-block");if(se.length===0)return;const ne=O.getBoundingClientRect(),U=ne.left+ne.width/2;let ue=0,tt=1/0;se.forEach((je,Oe)=>{const nt=je.getBoundingClientRect(),Gt=nt.left+nt.width/2,we=Math.abs(Gt-U);we<tt&&(tt=we,ue=Oe)}),j_(ue)};return O.addEventListener("scroll",q),q(),()=>O.removeEventListener("scroll",q)},[Bn,f,E]),_.useEffect(()=>{if(!Nc.current)return;const O=Nc.current;let q=!1,se=0,ne=0,U=0;const ue=nt=>{nt.target.closest(".section-block")||(q=!0,se=nt.pageY,ne=O.scrollTop,O.style.transition="none",O.style.transform="translateY(0)",U=0)},tt=()=>{q&&U!==0&&(O.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",O.style.transform="translateY(0)",setTimeout(()=>{O.style.transition="none",U=0},300)),q=!1},je=()=>{U!==0&&(O.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",O.style.transform="translateY(0)",setTimeout(()=>{O.style.transition="none",U=0},300)),q=!1},Oe=nt=>{if(!q)return;nt.preventDefault();const we=(nt.pageY-se)*1.5,ye=ne-we,en=O.scrollHeight-O.clientHeight;if(ye<0){const de=-ye;U=Math.min(de*.3,100),O.scrollTop=0,O.style.transform=`translateY(${U}px)`}else if(ye>en){const de=ye-en;U=-Math.min(de*.3,100),O.scrollTop=en,O.style.transform=`translateY(${U}px)`}else U=0,O.style.transform="translateY(0)",O.scrollTop=ye};return O.addEventListener("mousedown",ue),document.addEventListener("mouseup",je),document.addEventListener("mouseleave",tt),O.addEventListener("mousemove",Oe),()=>{O.removeEventListener("mousedown",ue),document.removeEventListener("mouseup",je),document.removeEventListener("mouseleave",tt),O.removeEventListener("mousemove",Oe)}},[f,E]),_.useEffect(()=>{bh&&Wb()},[_h]),_.useEffect(()=>{const O=async()=>{const se=new Date,ne=new Date(se);ne.setHours(24,0,0,0);const U=ne.getTime()-se.getTime();return setTimeout(async()=>{const tt=new Date(se),je=new Date(se);je.setDate(je.getDate()+1),await q_(tt,je),await Te(),r(new Date),O()},U)},q=O();return()=>clearTimeout(q)},[]),_.useEffect(()=>{(async()=>{var je;const ne=Se(s),ue=Se(new Date);ne===ue&&((je=e==null?void 0:e.user)!=null&&je.id)&&await ae(ne),await mt()})();const q=Se(s),se=qe.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"todos",filter:`date=eq.${q}`},ne=>{ne.eventType==="INSERT"?h(U=>U.some(ue=>ue.id===ne.new.id)?U:[...U,ne.new]):ne.eventType==="UPDATE"?h(U=>u.current.has(ne.new.id)?U:U.map(ue=>ue.id===ne.new.id?ne.new:ue)):ne.eventType==="DELETE"&&h(U=>U.filter(ue=>ue.id!==ne.old.id))}).subscribe(ne=>{});return()=>{qe.removeChannel(se)}},[s,e]),_.useEffect(()=>{if(ut){const O=window.scrollY,q=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${O}px`,document.body.style.left="0",document.body.style.right="0",q>0&&(document.body.style.paddingRight=`${q}px`),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.paddingRight="",window.scrollTo(0,O)}}},[ut]);const zh=jO({authLoading:t,session:e,handleGoogleLogin:n,handleAppleLogin:i});return zh||c.jsxs("div",{className:`app ${ut?"dragging-active":""}`,children:[c.jsx(iO,{showSidebar:l,setShowSidebar:o,session:e,viewMode:Bn,setViewMode:w_,onOpenRoutine:ee,onOpenGanttChart:Zb,onOpenEncouragementModal:()=>Sh(!0),onOpenAddSection:()=>Th(!0),onOpenHiddenSections:()=>kh(!0),onLogout:a}),c.jsxs("div",{className:`container ${Bn==="horizontal"?"container-wide":""}`,children:[c.jsx(sO,{showSidebar:l,setShowSidebar:o,selectedDate:s,onDateChange:M_,onPrevDay:N_,onNextDay:R_,showEncouragementEmoji:h_,currentEncouragementMessage:m_,onEncouragementClick:g_,setSelectedDate:r,onQuickAdd:__,onOpenMemo:()=>wh(!0)}),c.jsxs(Sj,{sensors:d,collisionDetection:A1,onDragStart:aa,onDragOver:Qs,onDragEnd:Yb,onDragCancel:Vb,measuring:{droppable:{strategy:Rs.Always}},children:[Bn==="horizontal"&&!sa.includes("timeline")&&c.jsxs("div",{className:"timeline-sidebar",children:[c.jsx(Qd,{title:"",icon:wl("timeline"),sectionId:"timeline",onIconChange:_l,customActions:c.jsx("button",{className:"section-action-button scroll-to-now-button",onClick:()=>{var O;return(O=Nh.current)==null?void 0:O.scrollToNow()},title:" ",children:""})}),c.jsx("div",{className:"timeline-content",children:c.jsx(Wg,{ref:Nh,startHour:0,endHour:24,scheduledTodos:f.filter(O=>O.scheduled_time&&!O.parent_id&&O.scheduled_date===Se(s)),onToggle:Dt,onRemoveFromTimeline:gh,onMoveUpInTimeline:vh,onMoveDownInTimeline:yh,onAddTodo:ph})})]}),c.jsxs("div",{className:"content-scrollable",ref:Nc,children:[c.jsx("div",{ref:La,className:`sections-container ${Bn==="horizontal"?"horizontal-layout":"vertical-layout"}`,children:c.jsx("div",{className:"todo-list",children:ve?c.jsx("div",{className:"loading-container",children:c.jsxs("div",{className:"loading-dots",children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]})}):(()=>{const O=f.filter(U=>!U.parent_id&&U.section_type==="routine").sort((U,ue)=>U.order_index-ue.order_index),q=f.filter(U=>!U.parent_id&&U.section_type==="pending_routine").sort((U,ue)=>U.order_index-ue.order_index),se=f.filter(U=>!U.parent_id&&U.section_type==="normal").sort((U,ue)=>U.order_index-ue.order_index),ne=[...O.map(U=>U.id),...q.map(U=>U.id),...se.map(U=>U.id),...Ti.flatMap(U=>f.filter(ue=>!ue.parent_id&&ue.section_type==="custom"&&ue.section_id===U.id).map(ue=>ue.id))];return c.jsx(ar,{items:ne,strategy:ir,children:za.filter(U=>!sa.includes(U)).filter(U=>!(Mh&&Bn==="horizontal"&&U==="timeline")).map((U,ue)=>{const tt=za.filter(we=>!sa.includes(we)),je=tt.indexOf(U),Oe=je===0,nt=je===tt.length-1,Gt=[...Oe?[]:[{icon:"",label:" ",onClick:()=>Cc(U)}],...nt?[]:[{icon:"",label:" ",onClick:()=>Dc(U)}],{icon:"",label:"",onClick:()=>Mc(U)}];if(U==="timeline")return c.jsxs("div",{className:"timeline-section section-block",children:[c.jsx(Qd,{title:"",icon:wl("timeline"),sectionId:"timeline",onIconChange:_l,settingsMenuItems:Gt,customActions:c.jsx("button",{className:"section-action-button scroll-to-now-button",onClick:()=>{var we;return(we=Rh.current)==null?void 0:we.scrollToNow()},title:" ",children:""})}),c.jsx("div",{className:"timeline-content",children:c.jsx(Wg,{ref:Rh,startHour:0,endHour:24,scheduledTodos:f.filter(we=>we.scheduled_time&&!we.parent_id&&we.scheduled_date===Se(s)),onToggle:Dt,onRemoveFromTimeline:gh,onMoveUpInTimeline:vh,onMoveDownInTimeline:yh,onAddTodo:ph})})]},"timeline");if(U==="routine")return c.jsx("div",{children:c.jsxs(Ru,{title:"",icon:wl("routine"),sectionId:"routine",onIconChange:_l,className:"routine-section section-block",inputValue:Z,setInputValue:le,onAddTodo:Tn,isAdding:Vt,placeholder:"   ...",settingsMenuItems:Gt,children:[O.length>0&&c.jsx(ar,{items:O.map(we=>we.id),strategy:ir,children:O.map((we,ye)=>{const en=f.filter(de=>de.parent_id===we.id);return c.jsx(Za,{todo:we,index:ye,onToggle:Dt,onDelete:En,onEdit:Kt,formatDate:Ga,formatDateOnly:ma,isFocused:bt===we.id,onFocus:pl,onAddSubTodo:jn,subtodos:en,level:0,onCreateRoutine:Ee,routines:E,onShowRoutineHistory:Ue,onOpenRoutineSetupModal:H,onOpenHistoryModal:g,currentPageDate:Se(s),onRemoveFromUI:hl,showSuccessMessage:bl,activeId:Et,overId:un,onMoveUp:de=>ml(de,"routine",null),onMoveDown:de=>gl(de,"routine",null),onMoveToTop:de=>vl(de,"routine",null),onMoveToBottom:de=>yl(de,"routine",null),isFirst:ye===0,isLast:ye===O.length-1},we.id)})}),O.length>0&&q.length>0&&c.jsx("div",{style:{margin:"1rem 0",padding:"0 1rem"},children:c.jsx("div",{className:"separator-line"})}),q.length>0&&c.jsx(ar,{items:q.map(we=>we.id),strategy:ir,children:q.map((we,ye)=>{const en=f.filter(de=>de.parent_id===we.id);return c.jsx(Za,{todo:we,index:ye,onToggle:Dt,onDelete:En,onEdit:Kt,formatDate:Ga,formatDateOnly:ma,isFocused:bt===we.id,onFocus:pl,onAddSubTodo:jn,subtodos:en,level:0,onCreateRoutine:Ee,routines:E,onShowRoutineHistory:Ue,onOpenRoutineSetupModal:H,onOpenHistoryModal:g,currentPageDate:Se(s),isPendingRoutine:!0,onRemoveFromUI:hl,showSuccessMessage:bl,activeId:Et,overId:un,onMoveUp:de=>ml(de,"pending_routine",null),onMoveDown:de=>gl(de,"pending_routine",null),onMoveToTop:de=>vl(de,"pending_routine",null),onMoveToBottom:de=>yl(de,"pending_routine",null),isFirst:ye===0,isLast:ye===q.length-1},we.id)})})]})},"routine");if(U==="normal"){const we=[...Oe?[]:[{icon:"",label:" ",onClick:()=>Cc(U)}],...nt?[]:[{icon:"",label:" ",onClick:()=>Dc(U)}],{icon:"",label:"",onClick:()=>{confirm(`    ?

      .`)&&Mc("normal")}},{icon:"",label:"",onClick:()=>{alert(`      .

   ""  .`)}}];return c.jsx("div",{children:c.jsx(Ru,{title:Ac.normal,icon:wl("normal"),sectionId:"normal",onIconChange:_l,className:"normal-section section-block",inputValue:Y,setInputValue:W,onAddTodo:Wt,isAdding:Vt,placeholder:"   ...",editable:!0,onTitleChange:ye=>U_("normal",ye),settingsMenuItems:we,children:se.length>0&&c.jsx(ar,{items:se.map(ye=>ye.id),strategy:ir,children:se.map((ye,en)=>{const de=f.filter(lt=>lt.parent_id===ye.id),gt=Se(s);return c.jsx(Za,{todo:ye,index:en,onToggle:Dt,onDelete:En,onEdit:Kt,formatDate:Ga,formatDateOnly:ma,isFocused:bt===ye.id,onFocus:pl,onAddSubTodo:jn,subtodos:de,level:0,onCreateRoutine:Ee,routines:E,onShowRoutineHistory:Ue,onOpenRoutineSetupModal:H,onOpenHistoryModal:g,currentPageDate:gt,onRemoveFromUI:hl,showSuccessMessage:bl,activeId:Et,overId:un,onMoveUp:lt=>ml(lt,"normal",null),onMoveDown:lt=>gl(lt,"normal",null),onMoveToTop:lt=>vl(lt,"normal",null),onMoveToBottom:lt=>yl(lt,"normal",null),isFirst:en===0,isLast:en===se.length-1},ye.id)})})})},"normal")}else{const we=Ti.find(de=>de.id===U);if(!we)return null;const ye=f.filter(de=>!de.parent_id&&de.section_type==="custom"&&de.section_id===U).sort((de,gt)=>de.order_index-gt.order_index),en=[...Oe?[]:[{icon:"",label:" ",onClick:()=>Cc(U)}],...nt?[]:[{icon:"",label:" ",onClick:()=>Dc(U)}],{icon:"",label:"",onClick:()=>Mc(U)},{icon:"",label:"",onClick:()=>H_(U)}];return c.jsx("div",{children:c.jsx(Ru,{title:we.name,icon:we.icon,sectionId:U,onIconChange:(de,gt)=>{const lt=Ti.map(Lt=>Lt.id===de?{...Lt,icon:gt}:Lt);Js(lt),Sl(lt)},className:"custom-section section-block",inputValue:Oh[U]||"",setInputValue:de=>Ah(gt=>({...gt,[U]:de})),onAddTodo:()=>B_(U),isAdding:Eh,placeholder:`${we.name}   ...`,editable:!0,onTitleChange:de=>{const gt=Ti.map(lt=>lt.id===U?{...lt,name:de}:lt);Js(gt),Sl(gt)},settingsMenuItems:en,children:ye.length>0&&c.jsx(ar,{items:ye.map(de=>de.id),strategy:ir,children:ye.map((de,gt)=>{const lt=f.filter(Lt=>Lt.parent_id===de.id);return c.jsx(Za,{todo:de,index:gt,onToggle:Dt,onDelete:En,onEdit:Kt,formatDate:Ga,formatDateOnly:ma,isFocused:bt===de.id,onFocus:pl,onAddSubTodo:jn,subtodos:lt,level:0,onCreateRoutine:Ee,routines:E,onShowRoutineHistory:Ue,onOpenRoutineSetupModal:H,onOpenHistoryModal:g,currentPageDate:Se(s),onRemoveFromUI:hl,showSuccessMessage:bl,activeId:Et,overId:un,onMoveUp:Lt=>ml(Lt,"custom",U),onMoveDown:Lt=>gl(Lt,"custom",U),onMoveToTop:Lt=>vl(Lt,"custom",U),onMoveToBottom:Lt=>yl(Lt,"custom",U),isFirst:gt===0,isLast:gt===ye.length-1},de.id)})})})},U)}})})})()})}),c.jsx(qj,{zIndex:1e4,children:Et?(()=>{const O=f.find(se=>se.id===Et);if(!O)return null;const q=f.filter(se=>se.parent_id===O.id);return c.jsx("div",{className:"drag-overlay-todo",children:c.jsx(Za,{todo:O,index:0,onToggle:()=>{},onDelete:()=>{},onEdit:()=>{},formatDate:Ga,formatDateOnly:ma,isFocused:!1,onFocus:()=>{},onAddSubTodo:()=>{},subtodos:q,level:0,onCreateRoutine:()=>{},routines:E,onShowRoutineHistory:()=>{},onOpenRoutineSetupModal:()=>{},onOpenHistoryModal:()=>{},currentPageDate:Se(s),onRemoveFromUI:()=>{},showSuccessMessage:()=>{},hideNumber:!0})})})():null}),c.jsx(rO,{viewMode:Bn,currentSectionIndex:E_,sectionsContainerRef:La,visibleSectionCount:za.filter(O=>!sa.includes(O)).filter(O=>["timeline","routine","normal"].includes(O)||Ti.some(q=>q.id===O)).filter(O=>!(Mh&&Bn==="horizontal"&&O==="timeline")).length})]})]}),c.jsx(EO,{showUndoToast:cn,showSuccessToast:Qn,successToastMessage:Ua,lastDeleteAction:rt,handleUndoDelete:mh,handleUndoRoutineDelete:Qb,showDeleteConfirmModal:xn,todoToDelete:zt,setShowDeleteConfirmModal:Yt,deleteThisOnly:Gb,deleteFromNow:Kb,deleteAll:Xb,showRoutineDeleteModal:st,routineToDelete:Xe,setShowRoutineDeleteModal:De,deleteRoutineThisOnly:ke,deleteRoutineFromNow:ze,deleteRoutineAll:xe,showTodoHistoryModal:b,selectedTodoForModal:m,todoHistory:w,expandedHistoryIds:p,toggleHistoryDetail:S,handleCloseTodoHistoryModal:y,formatDate:Ga,formatDateOnly:ma,showTodoRoutineSetupModal:pt,routines:E,routineDaysForModal:Ge,isEditingRoutineInModal:C,routineTimeSlotForModal:B,handleToggleRoutineDayInModal:L,setRoutineTimeSlotForModal:V,setRoutineDaysForModal:k,setIsEditingRoutineInModal:R,handleCreateRoutineFromTodo:Ee,handleCloseTodoRoutineSetupModal:X,showRoutineModal:T,handleCloseRoutine:oe,routineInput:j,setRoutineInput:A,isAddingRoutine:Q,selectedDays:M,handleToggleDay:ge,selectedTimeSlot:P,setSelectedTimeSlot:G,handleAddRoutine:Pe,editingRoutineId:re,editingRoutineText:z,setEditingRoutineText:N,editingRoutineDays:J,handleToggleEditDay:te,handleStartEditRoutine:ht,handleSaveEditRoutine:ce,handleCancelEditRoutine:I,handleDeleteRoutine:_e,fetchRoutineHistory:Ue,showRoutineHistory:$,handleCloseRoutineHistory:ct,selectedRoutineForHistory:K,routineHistoryData:me,showMemoModal:e_,setShowMemoModal:wh,memoContent:t_,setMemoContent:n_,isSavingMemo:i_,showGanttChart:bh,handleCloseGanttChart:Fb,ganttData:Jb,ganttPeriod:_h,setGanttPeriod:Pb,showEncouragementModal:r_,setShowEncouragementModal:Sh,encouragementMessages:s_,newEncouragementMessage:l_,setNewEncouragementMessage:o_,addEncouragementMessage:y_,editingEncouragementId:c_,editingEncouragementText:d_,setEditingEncouragementId:u_,setEditingEncouragementText:f_,updateEncouragementMessage:p_,deleteEncouragementMessage:b_,showAddSectionModal:S_,setShowAddSectionModal:Th,handleAddSection:L_,showHiddenSectionsModal:A_,setShowHiddenSectionsModal:kh,hiddenSections:sa,sectionOrder:za,sectionTitles:Ac,customSections:Ti,handleShowSection:D_})]})]})}Lx.createRoot(document.getElementById("root")).render(c.jsx(_.StrictMode,{children:c.jsx(HO,{})}));

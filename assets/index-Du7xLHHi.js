function p_(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const i in a)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(a,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>a[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Qg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Jg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var i=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,i.get?i:{enumerable:!0,get:function(){return e[a]}})}),n}var Zg={exports:{}},sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_=Symbol.for("react.transitional.element"),__=Symbol.for("react.fragment");function Pg(e,t,n){var a=null;if(n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),"key"in t){n={};for(var i in t)i!=="key"&&(n[i]=t[i])}else n=t;return t=n.ref,{$$typeof:b_,type:e,key:a,ref:t!==void 0?t:null,props:n}}sc.Fragment=__;sc.jsx=Pg;sc.jsxs=Pg;Zg.exports=sc;var u=Zg.exports,Fg={exports:{}},oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wd=Symbol.for("react.transitional.element"),w_=Symbol.for("react.portal"),S_=Symbol.for("react.fragment"),x_=Symbol.for("react.strict_mode"),E_=Symbol.for("react.profiler"),T_=Symbol.for("react.consumer"),j_=Symbol.for("react.context"),O_=Symbol.for("react.forward_ref"),A_=Symbol.for("react.suspense"),C_=Symbol.for("react.memo"),Wg=Symbol.for("react.lazy"),D_=Symbol.for("react.activity"),Dh=Symbol.iterator;function N_(e){return e===null||typeof e!="object"?null:(e=Dh&&e[Dh]||e["@@iterator"],typeof e=="function"?e:null)}var ev={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tv=Object.assign,nv={};function Ks(e,t,n){this.props=e,this.context=t,this.refs=nv,this.updater=n||ev}Ks.prototype.isReactComponent={};Ks.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ks.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function av(){}av.prototype=Ks.prototype;function ef(e,t,n){this.props=e,this.context=t,this.refs=nv,this.updater=n||ev}var tf=ef.prototype=new av;tf.constructor=ef;tv(tf,Ks.prototype);tf.isPureReactComponent=!0;var Nh=Array.isArray;function $u(){}var rt={H:null,A:null,T:null,S:null},iv=Object.prototype.hasOwnProperty;function nf(e,t,n){var a=n.ref;return{$$typeof:Wd,type:e,key:t,ref:a!==void 0?a:null,props:n}}function R_(e,t){return nf(e.type,t,e.props)}function af(e){return typeof e=="object"&&e!==null&&e.$$typeof===Wd}function M_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Rh=/\/+/g;function Vc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?M_(""+e.key):t.toString(36)}function k_(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then($u,$u):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function ss(e,t,n,a,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(s){case"bigint":case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case Wd:case w_:r=!0;break;case Wg:return r=e._init,ss(r(e._payload),t,n,a,i)}}if(r)return i=i(e),r=a===""?"."+Vc(e,0):a,Nh(i)?(n="",r!=null&&(n=r.replace(Rh,"$&/")+"/"),ss(i,t,n,"",function(c){return c})):i!=null&&(af(i)&&(i=R_(i,n+(i.key==null||e&&e.key===i.key?"":(""+i.key).replace(Rh,"$&/")+"/")+r)),t.push(i)),1;r=0;var l=a===""?".":a+":";if(Nh(e))for(var o=0;o<e.length;o++)a=e[o],s=l+Vc(a,o),r+=ss(a,t,n,s,i);else if(o=N_(e),typeof o=="function")for(e=o.call(e),o=0;!(a=e.next()).done;)a=a.value,s=l+Vc(a,o++),r+=ss(a,t,n,s,i);else if(s==="object"){if(typeof e.then=="function")return ss(k_(e),t,n,a,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function Cl(e,t,n){if(e==null)return e;var a=[],i=0;return ss(e,a,"","",function(s){return t.call(n,s,i++)}),a}function U_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Mh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},z_={map:Cl,forEach:function(e,t,n){Cl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Cl(e,function(){t++}),t},toArray:function(e){return Cl(e,function(t){return t})||[]},only:function(e){if(!af(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Activity=D_;oe.Children=z_;oe.Component=Ks;oe.Fragment=S_;oe.Profiler=E_;oe.PureComponent=ef;oe.StrictMode=x_;oe.Suspense=A_;oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=rt;oe.__COMPILER_RUNTIME={__proto__:null,c:function(e){return rt.H.useMemoCache(e)}};oe.cache=function(e){return function(){return e.apply(null,arguments)}};oe.cacheSignal=function(){return null};oe.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var a=tv({},e.props),i=e.key;if(t!=null)for(s in t.key!==void 0&&(i=""+t.key),t)!iv.call(t,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&t.ref===void 0||(a[s]=t[s]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var r=Array(s),l=0;l<s;l++)r[l]=arguments[l+2];a.children=r}return nf(e.type,i,a)};oe.createContext=function(e){return e={$$typeof:j_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:T_,_context:e},e};oe.createElement=function(e,t,n){var a,i={},s=null;if(t!=null)for(a in t.key!==void 0&&(s=""+t.key),t)iv.call(t,a)&&a!=="key"&&a!=="__self"&&a!=="__source"&&(i[a]=t[a]);var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){for(var l=Array(r),o=0;o<r;o++)l[o]=arguments[o+2];i.children=l}if(e&&e.defaultProps)for(a in r=e.defaultProps,r)i[a]===void 0&&(i[a]=r[a]);return nf(e,s,i)};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:O_,render:e}};oe.isValidElement=af;oe.lazy=function(e){return{$$typeof:Wg,_payload:{_status:-1,_result:e},_init:U_}};oe.memo=function(e,t){return{$$typeof:C_,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=rt.T,n={};rt.T=n;try{var a=e(),i=rt.S;i!==null&&i(n,a),typeof a=="object"&&a!==null&&typeof a.then=="function"&&a.then($u,Mh)}catch(s){Mh(s)}finally{t!==null&&n.types!==null&&(t.types=n.types),rt.T=t}};oe.unstable_useCacheRefresh=function(){return rt.H.useCacheRefresh()};oe.use=function(e){return rt.H.use(e)};oe.useActionState=function(e,t,n){return rt.H.useActionState(e,t,n)};oe.useCallback=function(e,t){return rt.H.useCallback(e,t)};oe.useContext=function(e){return rt.H.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e,t){return rt.H.useDeferredValue(e,t)};oe.useEffect=function(e,t){return rt.H.useEffect(e,t)};oe.useEffectEvent=function(e){return rt.H.useEffectEvent(e)};oe.useId=function(){return rt.H.useId()};oe.useImperativeHandle=function(e,t,n){return rt.H.useImperativeHandle(e,t,n)};oe.useInsertionEffect=function(e,t){return rt.H.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return rt.H.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return rt.H.useMemo(e,t)};oe.useOptimistic=function(e,t){return rt.H.useOptimistic(e,t)};oe.useReducer=function(e,t,n){return rt.H.useReducer(e,t,n)};oe.useRef=function(e){return rt.H.useRef(e)};oe.useState=function(e){return rt.H.useState(e)};oe.useSyncExternalStore=function(e,t,n){return rt.H.useSyncExternalStore(e,t,n)};oe.useTransition=function(){return rt.H.useTransition()};oe.version="19.2.0";Fg.exports=oe;var p=Fg.exports;const ft=Qg(p);var sv={exports:{}},rc={},rv={exports:{}},lv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,Y){var Q=L.length;L.push(Y);e:for(;0<Q;){var fe=Q-1>>>1,ce=L[fe];if(0<i(ce,Y))L[fe]=Y,L[Q]=ce,Q=fe;else break e}}function n(L){return L.length===0?null:L[0]}function a(L){if(L.length===0)return null;var Y=L[0],Q=L.pop();if(Q!==Y){L[0]=Q;e:for(var fe=0,ce=L.length,St=ce>>>1;fe<St;){var Ue=2*(fe+1)-1,vt=L[Ue],Pe=Ue+1,Qe=L[Pe];if(0>i(vt,Q))Pe<ce&&0>i(Qe,vt)?(L[fe]=Qe,L[Pe]=Q,fe=Pe):(L[fe]=vt,L[Ue]=Q,fe=Ue);else if(Pe<ce&&0>i(Qe,Q))L[fe]=Qe,L[Pe]=Q,fe=Pe;else break e}}return Y}function i(L,Y){var Q=L.sortIndex-Y.sortIndex;return Q!==0?Q:L.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var r=Date,l=r.now();e.unstable_now=function(){return r.now()-l}}var o=[],c=[],d=1,f=null,h=3,m=!1,b=!1,_=!1,S=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function w(L){for(var Y=n(c);Y!==null;){if(Y.callback===null)a(c);else if(Y.startTime<=L)a(c),Y.sortIndex=Y.expirationTime,t(o,Y);else break;Y=n(c)}}function x(L){if(_=!1,w(L),!b)if(n(o)!==null)b=!0,j||(j=!0,qe());else{var Y=n(c);Y!==null&&ke(x,Y.startTime-L)}}var j=!1,T=-1,O=5,C=-1;function B(){return S?!0:!(e.unstable_now()-C<O)}function W(){if(S=!1,j){var L=e.unstable_now();C=L;var Y=!0;try{e:{b=!1,_&&(_=!1,g(T),T=-1),m=!0;var Q=h;try{t:{for(w(L),f=n(o);f!==null&&!(f.expirationTime>L&&B());){var fe=f.callback;if(typeof fe=="function"){f.callback=null,h=f.priorityLevel;var ce=fe(f.expirationTime<=L);if(L=e.unstable_now(),typeof ce=="function"){f.callback=ce,w(L),Y=!0;break t}f===n(o)&&a(o),w(L)}else a(o);f=n(o)}if(f!==null)Y=!0;else{var St=n(c);St!==null&&ke(x,St.startTime-L),Y=!1}}break e}finally{f=null,h=Q,m=!1}Y=void 0}}finally{Y?qe():j=!1}}}var qe;if(typeof v=="function")qe=function(){v(W)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,Xe=Ge.port2;Ge.port1.onmessage=W,qe=function(){Xe.postMessage(null)}}else qe=function(){y(W,0)};function ke(L,Y){T=y(function(){L(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(L){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var Q=h;h=Y;try{return L()}finally{h=Q}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(L,Y){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Q=h;h=L;try{return Y()}finally{h=Q}},e.unstable_scheduleCallback=function(L,Y,Q){var fe=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?fe+Q:fe):Q=fe,L){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Q+ce,L={id:d++,callback:Y,priorityLevel:L,startTime:Q,expirationTime:ce,sortIndex:-1},Q>fe?(L.sortIndex=Q,t(c,L),n(o)===null&&L===n(c)&&(_?(g(T),T=-1):_=!0,ke(x,Q-fe))):(L.sortIndex=ce,t(o,L),b||m||(b=!0,j||(j=!0,qe()))),L},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(L){var Y=h;return function(){var Q=h;h=Y;try{return L.apply(this,arguments)}finally{h=Q}}}})(lv);rv.exports=lv;var L_=rv.exports,ov={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_=p;function cv(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ka(){}var an={d:{f:ka,r:function(){throw Error(cv(522))},D:ka,C:ka,L:ka,m:ka,X:ka,S:ka,M:ka},p:0,findDOMNode:null},H_=Symbol.for("react.portal");function q_(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H_,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}var Er=B_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function lc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=an;sn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(cv(299));return q_(e,t,null,n)};sn.flushSync=function(e){var t=Er.T,n=an.p;try{if(Er.T=null,an.p=2,e)return e()}finally{Er.T=t,an.p=n,an.d.f()}};sn.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,an.d.C(e,t))};sn.prefetchDNS=function(e){typeof e=="string"&&an.d.D(e)};sn.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,a=lc(n,t.crossOrigin),i=typeof t.integrity=="string"?t.integrity:void 0,s=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?an.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:a,integrity:i,fetchPriority:s}):n==="script"&&an.d.X(e,{crossOrigin:a,integrity:i,fetchPriority:s,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};sn.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=lc(t.as,t.crossOrigin);an.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&an.d.M(e)};sn.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,a=lc(n,t.crossOrigin);an.d.L(e,n,{crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};sn.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=lc(t.as,t.crossOrigin);an.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else an.d.m(e)};sn.requestFormReset=function(e){an.d.r(e)};sn.unstable_batchedUpdates=function(e,t){return e(t)};sn.useFormState=function(e,t,n){return Er.H.useFormState(e,t,n)};sn.useFormStatus=function(){return Er.H.useHostTransitionStatus()};sn.version="19.2.0";function uv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uv)}catch(e){console.error(e)}}uv(),ov.exports=sn;var Ei=ov.exports;const dv=Qg(Ei);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lt=L_,fv=p,$_=Ei;function A(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function hv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function mv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gv(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function kh(e){if(cl(e)!==e)throw Error(A(188))}function V_(e){var t=e.alternate;if(!t){if(t=cl(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(a=i.return,a!==null){n=a;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return kh(i),e;if(s===a)return kh(i),t;s=s.sibling}throw Error(A(188))}if(n.return!==a.return)n=i,a=s;else{for(var r=!1,l=i.child;l;){if(l===n){r=!0,n=i,a=s;break}if(l===a){r=!0,a=i,n=s;break}l=l.sibling}if(!r){for(l=s.child;l;){if(l===n){r=!0,n=s,a=i;break}if(l===a){r=!0,a=s,n=i;break}l=l.sibling}if(!r)throw Error(A(189))}}if(n.alternate!==a)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function vv(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=vv(e),t!==null)return t;e=e.sibling}return null}var lt=Object.assign,Y_=Symbol.for("react.element"),Dl=Symbol.for("react.transitional.element"),pr=Symbol.for("react.portal"),ds=Symbol.for("react.fragment"),yv=Symbol.for("react.strict_mode"),Vu=Symbol.for("react.profiler"),pv=Symbol.for("react.consumer"),_a=Symbol.for("react.context"),sf=Symbol.for("react.forward_ref"),Yu=Symbol.for("react.suspense"),Gu=Symbol.for("react.suspense_list"),rf=Symbol.for("react.memo"),za=Symbol.for("react.lazy"),Iu=Symbol.for("react.activity"),G_=Symbol.for("react.memo_cache_sentinel"),Uh=Symbol.iterator;function cr(e){return e===null||typeof e!="object"?null:(e=Uh&&e[Uh]||e["@@iterator"],typeof e=="function"?e:null)}var I_=Symbol.for("react.client.reference");function Ku(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I_?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ds:return"Fragment";case Vu:return"Profiler";case yv:return"StrictMode";case Yu:return"Suspense";case Gu:return"SuspenseList";case Iu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case pr:return"Portal";case _a:return e.displayName||"Context";case pv:return(e._context.displayName||"Context")+".Consumer";case sf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rf:return t=e.displayName||null,t!==null?t:Ku(e.type)||"Memo";case za:t=e._payload,e=e._init;try{return Ku(e(t))}catch{}}return null}var br=Array.isArray,ae=fv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Be=$_.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ji={pending:!1,data:null,method:null,action:null},Xu=[],fs=-1;function oa(e){return{current:e}}function Vt(e){0>fs||(e.current=Xu[fs],Xu[fs]=null,fs--)}function tt(e,t){fs++,Xu[fs]=e.current,e.current=t}var la=oa(null),Gr=oa(null),Za=oa(null),bo=oa(null);function _o(e,t){switch(tt(Za,t),tt(Gr,e),tt(la,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?$m(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=$m(t),e=Bp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Vt(la),tt(la,e)}function Rs(){Vt(la),Vt(Gr),Vt(Za)}function Qu(e){e.memoizedState!==null&&tt(bo,e);var t=la.current,n=Bp(t,e.type);t!==n&&(tt(Gr,e),tt(la,n))}function wo(e){Gr.current===e&&(Vt(la),Vt(Gr)),bo.current===e&&(Vt(bo),tl._currentValue=ji)}var Yc,zh;function yi(e){if(Yc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Yc=t&&t[1]||"",zh=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yc+e+zh}var Gc=!1;function Ic(e,t){if(!e||Gc)return"";Gc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(m){var h=m}Reflect.construct(e,[],f)}else{try{f.call()}catch(m){h=m}e.call(f.prototype)}}else{try{throw Error()}catch(m){h=m}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(m){if(m&&h&&typeof m.stack=="string")return[m.stack,h.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=a.DetermineComponentFrameRoot(),r=s[0],l=s[1];if(r&&l){var o=r.split(`
`),c=l.split(`
`);for(i=a=0;a<o.length&&!o[a].includes("DetermineComponentFrameRoot");)a++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(a===o.length||i===c.length)for(a=o.length-1,i=c.length-1;1<=a&&0<=i&&o[a]!==c[i];)i--;for(;1<=a&&0<=i;a--,i--)if(o[a]!==c[i]){if(a!==1||i!==1)do if(a--,i--,0>i||o[a]!==c[i]){var d=`
`+o[a].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=a&&0<=i);break}}}finally{Gc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?yi(n):""}function K_(e,t){switch(e.tag){case 26:case 27:case 5:return yi(e.type);case 16:return yi("Lazy");case 13:return e.child!==t&&t!==null?yi("Suspense Fallback"):yi("Suspense");case 19:return yi("SuspenseList");case 0:case 15:return Ic(e.type,!1);case 11:return Ic(e.type.render,!1);case 1:return Ic(e.type,!0);case 31:return yi("Activity");default:return""}}function Lh(e){try{var t="",n=null;do t+=K_(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var Ju=Object.prototype.hasOwnProperty,lf=Lt.unstable_scheduleCallback,Kc=Lt.unstable_cancelCallback,X_=Lt.unstable_shouldYield,Q_=Lt.unstable_requestPaint,Cn=Lt.unstable_now,J_=Lt.unstable_getCurrentPriorityLevel,bv=Lt.unstable_ImmediatePriority,_v=Lt.unstable_UserBlockingPriority,So=Lt.unstable_NormalPriority,Z_=Lt.unstable_LowPriority,wv=Lt.unstable_IdlePriority,P_=Lt.log,F_=Lt.unstable_setDisableYieldValue,ul=null,Dn=null;function Ia(e){if(typeof P_=="function"&&F_(e),Dn&&typeof Dn.setStrictMode=="function")try{Dn.setStrictMode(ul,e)}catch{}}var Nn=Math.clz32?Math.clz32:tw,W_=Math.log,ew=Math.LN2;function tw(e){return e>>>=0,e===0?32:31-(W_(e)/ew|0)|0}var Nl=256,Rl=262144,Ml=4194304;function pi(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function oc(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var i=0,s=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var l=a&134217727;return l!==0?(a=l&~s,a!==0?i=pi(a):(r&=l,r!==0?i=pi(r):n||(n=l&~e,n!==0&&(i=pi(n))))):(l=a&~s,l!==0?i=pi(l):r!==0?i=pi(r):n||(n=a&~e,n!==0&&(i=pi(n)))),i===0?0:t!==0&&t!==i&&!(t&s)&&(s=i&-i,n=t&-t,s>=n||s===32&&(n&4194048)!==0)?t:i}function dl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function nw(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sv(){var e=Ml;return Ml<<=1,!(Ml&62914560)&&(Ml=4194304),e}function Xc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function fl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function aw(e,t,n,a,i,s){var r=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(n=r&~n;0<n;){var d=31-Nn(n),f=1<<d;l[d]=0,o[d]=-1;var h=c[d];if(h!==null)for(c[d]=null,d=0;d<h.length;d++){var m=h[d];m!==null&&(m.lane&=-536870913)}n&=~f}a!==0&&xv(e,a,0),s!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=s&~(r&~t))}function xv(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Nn(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function Ev(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Nn(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}function Tv(e,t){var n=t&-t;return n=n&42?1:of(n),n&(e.suspendedLanes|t)?0:n}function of(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function cf(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function jv(){var e=Be.p;return e!==0?e:(e=window.event,e===void 0?32:Jp(e.type))}function Bh(e,t){var n=Be.p;try{return Be.p=e,t()}finally{Be.p=n}}var ci=Math.random().toString(36).slice(2),Kt="__reactFiber$"+ci,vn="__reactProps$"+ci,Xs="__reactContainer$"+ci,Zu="__reactEvents$"+ci,iw="__reactListeners$"+ci,sw="__reactHandles$"+ci,Hh="__reactResources$"+ci,hl="__reactMarker$"+ci;function uf(e){delete e[Kt],delete e[vn],delete e[Zu],delete e[iw],delete e[sw]}function hs(e){var t=e[Kt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xs]||n[Kt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Km(e);e!==null;){if(n=e[Kt])return n;e=Km(e)}return t}e=n,n=e.parentNode}return null}function Qs(e){if(e=e[Kt]||e[Xs]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function _r(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(A(33))}function xs(e){var t=e[Hh];return t||(t=e[Hh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function $t(e){e[hl]=!0}var Ov=new Set,Av={};function Bi(e,t){Ms(e,t),Ms(e+"Capture",t)}function Ms(e,t){for(Av[e]=t,e=0;e<t.length;e++)Ov.add(t[e])}var rw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qh={},$h={};function lw(e){return Ju.call($h,e)?!0:Ju.call(qh,e)?!1:rw.test(e)?$h[e]=!0:(qh[e]=!0,!1)}function no(e,t,n){if(lw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function kl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function fa(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function qn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ow(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var i=a.get,s=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(r){n=""+r,s.call(this,r)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pu(e){if(!e._valueTracker){var t=Cv(e)?"checked":"value";e._valueTracker=ow(e,t,""+e[t])}}function Dv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=Cv(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function xo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var cw=/[\n"\\]/g;function Yn(e){return e.replace(cw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Fu(e,t,n,a,i,s,r,l){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+qn(t)):e.value!==""+qn(t)&&(e.value=""+qn(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?Wu(e,r,qn(t)):n!=null?Wu(e,r,qn(n)):a!=null&&e.removeAttribute("value"),i==null&&s!=null&&(e.defaultChecked=!!s),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+qn(l):e.removeAttribute("name")}function Nv(e,t,n,a,i,s,r,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.type=s),t!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||t!=null)){Pu(e);return}n=n!=null?""+qn(n):"",t=t!=null?""+qn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}a=a??i,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=l?e.checked:!!a,e.defaultChecked=!!a,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),Pu(e)}function Wu(e,t,n){t==="number"&&xo(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Es(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+qn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,a&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Rv(e,t,n){if(t!=null&&(t=""+qn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+qn(n):""}function Mv(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(A(92));if(br(a)){if(1<a.length)throw Error(A(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=qn(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),Pu(e)}function ks(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var uw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vh(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||uw.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function kv(e,t,n){if(t!=null&&typeof t!="object")throw Error(A(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var i in t)a=t[i],t.hasOwnProperty(i)&&n[i]!==a&&Vh(e,i,a)}else for(var s in t)t.hasOwnProperty(s)&&Vh(e,s,t[s])}function df(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ao(e){return fw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function wa(){}var ed=null;function ff(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ms=null,Ts=null;function Yh(e){var t=Qs(e);if(t&&(e=t.stateNode)){var n=e[vn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Fu(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Yn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=a[vn]||null;if(!i)throw Error(A(90));Fu(a,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Dv(a)}break e;case"textarea":Rv(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Es(e,!!n.multiple,t,!1)}}}var Qc=!1;function Uv(e,t,n){if(Qc)return e(t,n);Qc=!0;try{var a=e(t);return a}finally{if(Qc=!1,(ms!==null||Ts!==null)&&(_c(),ms&&(t=ms,e=Ts,Ts=ms=null,Yh(t),e)))for(t=0;t<e.length;t++)Yh(e[t])}}function Ir(e,t){var n=e.stateNode;if(n===null)return null;var a=n[vn]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),td=!1;if(ja)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){td=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{td=!1}var Ka=null,hf=null,io=null;function zv(){if(io)return io;var e,t=hf,n=t.length,a,i="value"in Ka?Ka.value:Ka.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var r=n-e;for(a=1;a<=r&&t[n-a]===i[s-a];a++);return io=i.slice(e,1<a?1-a:void 0)}function so(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ul(){return!0}function Gh(){return!1}function yn(e){function t(n,a,i,s,r){this._reactName=n,this._targetInst=i,this.type=a,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ul:Gh,this.isPropagationStopped=Gh,this}return lt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ul)},persist:function(){},isPersistent:Ul}),t}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cc=yn(Hi),ml=lt({},Hi,{view:0,detail:0}),hw=yn(ml),Jc,Zc,dr,uc=lt({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dr&&(dr&&e.type==="mousemove"?(Jc=e.screenX-dr.screenX,Zc=e.screenY-dr.screenY):Zc=Jc=0,dr=e),Jc)},movementY:function(e){return"movementY"in e?e.movementY:Zc}}),Ih=yn(uc),mw=lt({},uc,{dataTransfer:0}),gw=yn(mw),vw=lt({},ml,{relatedTarget:0}),Pc=yn(vw),yw=lt({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),pw=yn(yw),bw=lt({},Hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_w=yn(bw),ww=lt({},Hi,{data:0}),Kh=yn(ww),Sw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ew={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ew[e])?!!t[e]:!1}function mf(){return Tw}var jw=lt({},ml,{key:function(e){if(e.key){var t=Sw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=so(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mf,charCode:function(e){return e.type==="keypress"?so(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?so(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ow=yn(jw),Aw=lt({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xh=yn(Aw),Cw=lt({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mf}),Dw=yn(Cw),Nw=lt({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rw=yn(Nw),Mw=lt({},uc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kw=yn(Mw),Uw=lt({},Hi,{newState:0,oldState:0}),zw=yn(Uw),Lw=[9,13,27,32],gf=ja&&"CompositionEvent"in window,Tr=null;ja&&"documentMode"in document&&(Tr=document.documentMode);var Bw=ja&&"TextEvent"in window&&!Tr,Lv=ja&&(!gf||Tr&&8<Tr&&11>=Tr),Qh=" ",Jh=!1;function Bv(e,t){switch(e){case"keyup":return Lw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gs=!1;function Hw(e,t){switch(e){case"compositionend":return Hv(t);case"keypress":return t.which!==32?null:(Jh=!0,Qh);case"textInput":return e=t.data,e===Qh&&Jh?null:e;default:return null}}function qw(e,t){if(gs)return e==="compositionend"||!gf&&Bv(e,t)?(e=zv(),io=hf=Ka=null,gs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lv&&t.locale!=="ko"?null:t.data;default:return null}}var $w={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$w[e.type]:t==="textarea"}function qv(e,t,n,a){ms?Ts?Ts.push(a):Ts=[a]:ms=a,t=$o(t,"onChange"),0<t.length&&(n=new cc("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var jr=null,Kr=null;function Vw(e){Up(e,0)}function dc(e){var t=_r(e);if(Dv(t))return e}function Ph(e,t){if(e==="change")return t}var $v=!1;if(ja){var Fc;if(ja){var Wc="oninput"in document;if(!Wc){var Fh=document.createElement("div");Fh.setAttribute("oninput","return;"),Wc=typeof Fh.oninput=="function"}Fc=Wc}else Fc=!1;$v=Fc&&(!document.documentMode||9<document.documentMode)}function Wh(){jr&&(jr.detachEvent("onpropertychange",Vv),Kr=jr=null)}function Vv(e){if(e.propertyName==="value"&&dc(Kr)){var t=[];qv(t,Kr,e,ff(e)),Uv(Vw,t)}}function Yw(e,t,n){e==="focusin"?(Wh(),jr=t,Kr=n,jr.attachEvent("onpropertychange",Vv)):e==="focusout"&&Wh()}function Gw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dc(Kr)}function Iw(e,t){if(e==="click")return dc(t)}function Kw(e,t){if(e==="input"||e==="change")return dc(t)}function Xw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mn=typeof Object.is=="function"?Object.is:Xw;function Xr(e,t){if(Mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!Ju.call(t,i)||!Mn(e[i],t[i]))return!1}return!0}function em(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tm(e,t){var n=em(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=em(n)}}function Yv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Yv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Gv(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=xo(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xo(e.document)}return t}function vf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Qw=ja&&"documentMode"in document&&11>=document.documentMode,vs=null,nd=null,Or=null,ad=!1;function nm(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ad||vs==null||vs!==xo(a)||(a=vs,"selectionStart"in a&&vf(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Or&&Xr(Or,a)||(Or=a,a=$o(nd,"onSelect"),0<a.length&&(t=new cc("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=vs)))}function hi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ys={animationend:hi("Animation","AnimationEnd"),animationiteration:hi("Animation","AnimationIteration"),animationstart:hi("Animation","AnimationStart"),transitionrun:hi("Transition","TransitionRun"),transitionstart:hi("Transition","TransitionStart"),transitioncancel:hi("Transition","TransitionCancel"),transitionend:hi("Transition","TransitionEnd")},eu={},Iv={};ja&&(Iv=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function qi(e){if(eu[e])return eu[e];if(!ys[e])return e;var t=ys[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Iv)return eu[e]=t[n];return e}var Kv=qi("animationend"),Xv=qi("animationiteration"),Qv=qi("animationstart"),Jw=qi("transitionrun"),Zw=qi("transitionstart"),Pw=qi("transitioncancel"),Jv=qi("transitionend"),Zv=new Map,id="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");id.push("scrollEnd");function aa(e,t){Zv.set(e,t),Bi(t,[e])}var Eo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Bn=[],ps=0,yf=0;function fc(){for(var e=ps,t=yf=ps=0;t<e;){var n=Bn[t];Bn[t++]=null;var a=Bn[t];Bn[t++]=null;var i=Bn[t];Bn[t++]=null;var s=Bn[t];if(Bn[t++]=null,a!==null&&i!==null){var r=a.pending;r===null?i.next=i:(i.next=r.next,r.next=i),a.pending=i}s!==0&&Pv(n,i,s)}}function hc(e,t,n,a){Bn[ps++]=e,Bn[ps++]=t,Bn[ps++]=n,Bn[ps++]=a,yf|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function pf(e,t,n,a){return hc(e,t,n,a),To(e)}function $i(e,t){return hc(e,null,null,t),To(e)}function Pv(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var i=!1,s=e.return;s!==null;)s.childLanes|=n,a=s.alternate,a!==null&&(a.childLanes|=n),s.tag===22&&(e=s.stateNode,e===null||e._visibility&1||(i=!0)),e=s,s=s.return;return e.tag===3?(s=e.stateNode,i&&t!==null&&(i=31-Nn(n),e=s.hiddenUpdates,a=e[i],a===null?e[i]=[t]:a.push(t),t.lane=n|536870912),s):null}function To(e){if(50<zr)throw zr=0,Td=null,Error(A(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var bs={};function Fw(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(e,t,n,a){return new Fw(e,t,n,a)}function bf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xa(e,t){var n=e.alternate;return n===null?(n=Tn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fv(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ro(e,t,n,a,i,s){var r=0;if(a=e,typeof e=="function")bf(e)&&(r=1);else if(typeof e=="string")r=ax(e,n,la.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Iu:return e=Tn(31,n,t,i),e.elementType=Iu,e.lanes=s,e;case ds:return Oi(n.children,i,s,t);case yv:r=8,i|=24;break;case Vu:return e=Tn(12,n,t,i|2),e.elementType=Vu,e.lanes=s,e;case Yu:return e=Tn(13,n,t,i),e.elementType=Yu,e.lanes=s,e;case Gu:return e=Tn(19,n,t,i),e.elementType=Gu,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _a:r=10;break e;case pv:r=9;break e;case sf:r=11;break e;case rf:r=14;break e;case za:r=16,a=null;break e}r=29,n=Error(A(130,e===null?"null":typeof e,"")),a=null}return t=Tn(r,n,t,i),t.elementType=e,t.type=a,t.lanes=s,t}function Oi(e,t,n,a){return e=Tn(7,e,a,t),e.lanes=n,e}function tu(e,t,n){return e=Tn(6,e,null,t),e.lanes=n,e}function Wv(e){var t=Tn(18,null,null,0);return t.stateNode=e,t}function nu(e,t,n){return t=Tn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var am=new WeakMap;function Gn(e,t){if(typeof e=="object"&&e!==null){var n=am.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Lh(t)},am.set(e,t),t)}return{value:e,source:t,stack:Lh(t)}}var _s=[],ws=0,jo=null,Qr=0,$n=[],Vn=0,si=null,ia=1,sa="";function pa(e,t){_s[ws++]=Qr,_s[ws++]=jo,jo=e,Qr=t}function ey(e,t,n){$n[Vn++]=ia,$n[Vn++]=sa,$n[Vn++]=si,si=e;var a=ia;e=sa;var i=32-Nn(a)-1;a&=~(1<<i),n+=1;var s=32-Nn(t)+i;if(30<s){var r=i-i%5;s=(a&(1<<r)-1).toString(32),a>>=r,i-=r,ia=1<<32-Nn(t)+i|n<<i|a,sa=s+e}else ia=1<<s|n<<i|a,sa=e}function _f(e){e.return!==null&&(pa(e,1),ey(e,1,0))}function wf(e){for(;e===jo;)jo=_s[--ws],_s[ws]=null,Qr=_s[--ws],_s[ws]=null;for(;e===si;)si=$n[--Vn],$n[Vn]=null,sa=$n[--Vn],$n[Vn]=null,ia=$n[--Vn],$n[Vn]=null}function ty(e,t){$n[Vn++]=ia,$n[Vn++]=sa,$n[Vn++]=si,ia=t.id,sa=t.overflow,si=e}var Xt=null,st=null,Ce=!1,Pa=null,In=!1,sd=Error(A(519));function ri(e){var t=Error(A(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jr(Gn(t,e)),sd}function im(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Kt]=e,t[vn]=a,n){case"dialog":we("cancel",t),we("close",t);break;case"iframe":case"object":case"embed":we("load",t);break;case"video":case"audio":for(n=0;n<Wr.length;n++)we(Wr[n],t);break;case"source":we("error",t);break;case"img":case"image":case"link":we("error",t),we("load",t);break;case"details":we("toggle",t);break;case"input":we("invalid",t),Nv(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":we("invalid",t);break;case"textarea":we("invalid",t),Mv(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||Lp(t.textContent,n)?(a.popover!=null&&(we("beforetoggle",t),we("toggle",t)),a.onScroll!=null&&we("scroll",t),a.onScrollEnd!=null&&we("scrollend",t),a.onClick!=null&&(t.onclick=wa),t=!0):t=!1,t||ri(e,!0)}function sm(e){for(Xt=e.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:In=!1;return;case 27:case 3:In=!0;return;default:Xt=Xt.return}}function Fi(e){if(e!==Xt)return!1;if(!Ce)return sm(e),Ce=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Dd(e.type,e.memoizedProps)),n=!n),n&&st&&ri(e),sm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));st=Im(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));st=Im(e)}else t===27?(t=st,ui(e.type)?(e=kd,kd=null,st=e):st=t):st=Xt?Xn(e.stateNode.nextSibling):null;return!0}function Ri(){st=Xt=null,Ce=!1}function au(){var e=Pa;return e!==null&&(mn===null?mn=e:mn.push.apply(mn,e),Pa=null),e}function Jr(e){Pa===null?Pa=[e]:Pa.push(e)}var rd=oa(null),Vi=null,Sa=null;function Ha(e,t,n){tt(rd,t._currentValue),t._currentValue=n}function Ea(e){e._currentValue=rd.current,Vt(rd)}function ld(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function od(e,t,n,a){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){var r=i.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=i;for(var o=0;o<t.length;o++)if(l.context===t[o]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),ld(s.return,n,e),a||(r=null);break e}s=l.next}}else if(i.tag===18){if(r=i.return,r===null)throw Error(A(341));r.lanes|=n,s=r.alternate,s!==null&&(s.lanes|=n),ld(r,n,e),r=null}else r=i.child;if(r!==null)r.return=i;else for(r=i;r!==null;){if(r===e){r=null;break}if(i=r.sibling,i!==null){i.return=r.return,r=i;break}r=r.return}i=r}}function Js(e,t,n,a){e=null;for(var i=t,s=!1;i!==null;){if(!s){if(i.flags&524288)s=!0;else if(i.flags&262144)break}if(i.tag===10){var r=i.alternate;if(r===null)throw Error(A(387));if(r=r.memoizedProps,r!==null){var l=i.type;Mn(i.pendingProps.value,r.value)||(e!==null?e.push(l):e=[l])}}else if(i===bo.current){if(r=i.alternate,r===null)throw Error(A(387));r.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(tl):e=[tl])}i=i.return}e!==null&&od(t,e,n,a),t.flags|=262144}function Oo(e){for(e=e.firstContext;e!==null;){if(!Mn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Mi(e){Vi=e,Sa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Qt(e){return ny(Vi,e)}function zl(e,t){return Vi===null&&Mi(e),ny(e,t)}function ny(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Sa===null){if(e===null)throw Error(A(308));Sa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Sa=Sa.next=t;return n}var Ww=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},eS=Lt.unstable_scheduleCallback,tS=Lt.unstable_NormalPriority,Dt={$$typeof:_a,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sf(){return{controller:new Ww,data:new Map,refCount:0}}function gl(e){e.refCount--,e.refCount===0&&eS(tS,function(){e.controller.abort()})}var Ar=null,cd=0,Us=0,js=null;function nS(e,t){if(Ar===null){var n=Ar=[];cd=0,Us=Xf(),js={status:"pending",value:void 0,then:function(a){n.push(a)}}}return cd++,t.then(rm,rm),t}function rm(){if(--cd===0&&Ar!==null){js!==null&&(js.status="fulfilled");var e=Ar;Ar=null,Us=0,js=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function aS(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var i=0;i<n.length;i++)(0,n[i])(t)},function(i){for(a.status="rejected",a.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),a}var lm=ae.S;ae.S=function(e,t){vp=Cn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&nS(e,t),lm!==null&&lm(e,t)};var Ai=oa(null);function xf(){var e=Ai.current;return e!==null?e:Ze.pooledCache}function lo(e,t){t===null?tt(Ai,Ai.current):tt(Ai,t.pool)}function ay(){var e=xf();return e===null?null:{parent:Dt._currentValue,pool:e}}var Zs=Error(A(460)),Ef=Error(A(474)),mc=Error(A(542)),Ao={then:function(){}};function om(e){return e=e.status,e==="fulfilled"||e==="rejected"}function iy(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(wa,wa),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,um(e),e;default:if(typeof t.status=="string")t.then(wa,wa);else{if(e=Ze,e!==null&&100<e.shellSuspendCounter)throw Error(A(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=a}},function(a){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,um(e),e}throw Ci=t,Zs}}function bi(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ci=n,Zs):n}}var Ci=null;function cm(){if(Ci===null)throw Error(A(459));var e=Ci;return Ci=null,e}function um(e){if(e===Zs||e===mc)throw Error(A(483))}var Os=null,Zr=0;function Ll(e){var t=Zr;return Zr+=1,Os===null&&(Os=[]),iy(Os,e,t)}function fr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Bl(e,t){throw t.$$typeof===Y_?Error(A(525)):(e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function sy(e){function t(y,g){if(e){var v=y.deletions;v===null?(y.deletions=[g],y.flags|=16):v.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function a(y){for(var g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function i(y,g){return y=xa(y,g),y.index=0,y.sibling=null,y}function s(y,g,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<g?(y.flags|=67108866,g):v):(y.flags|=67108866,g)):(y.flags|=1048576,g)}function r(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function l(y,g,v,w){return g===null||g.tag!==6?(g=tu(v,y.mode,w),g.return=y,g):(g=i(g,v),g.return=y,g)}function o(y,g,v,w){var x=v.type;return x===ds?d(y,g,v.props.children,w,v.key):g!==null&&(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===za&&bi(x)===g.type)?(g=i(g,v.props),fr(g,v),g.return=y,g):(g=ro(v.type,v.key,v.props,null,y.mode,w),fr(g,v),g.return=y,g)}function c(y,g,v,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=nu(v,y.mode,w),g.return=y,g):(g=i(g,v.children||[]),g.return=y,g)}function d(y,g,v,w,x){return g===null||g.tag!==7?(g=Oi(v,y.mode,w,x),g.return=y,g):(g=i(g,v),g.return=y,g)}function f(y,g,v){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=tu(""+g,y.mode,v),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Dl:return v=ro(g.type,g.key,g.props,null,y.mode,v),fr(v,g),v.return=y,v;case pr:return g=nu(g,y.mode,v),g.return=y,g;case za:return g=bi(g),f(y,g,v)}if(br(g)||cr(g))return g=Oi(g,y.mode,v,null),g.return=y,g;if(typeof g.then=="function")return f(y,Ll(g),v);if(g.$$typeof===_a)return f(y,zl(y,g),v);Bl(y,g)}return null}function h(y,g,v,w){var x=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return x!==null?null:l(y,g,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Dl:return v.key===x?o(y,g,v,w):null;case pr:return v.key===x?c(y,g,v,w):null;case za:return v=bi(v),h(y,g,v,w)}if(br(v)||cr(v))return x!==null?null:d(y,g,v,w,null);if(typeof v.then=="function")return h(y,g,Ll(v),w);if(v.$$typeof===_a)return h(y,g,zl(y,v),w);Bl(y,v)}return null}function m(y,g,v,w,x){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return y=y.get(v)||null,l(g,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Dl:return y=y.get(w.key===null?v:w.key)||null,o(g,y,w,x);case pr:return y=y.get(w.key===null?v:w.key)||null,c(g,y,w,x);case za:return w=bi(w),m(y,g,v,w,x)}if(br(w)||cr(w))return y=y.get(v)||null,d(g,y,w,x,null);if(typeof w.then=="function")return m(y,g,v,Ll(w),x);if(w.$$typeof===_a)return m(y,g,v,zl(g,w),x);Bl(g,w)}return null}function b(y,g,v,w){for(var x=null,j=null,T=g,O=g=0,C=null;T!==null&&O<v.length;O++){T.index>O?(C=T,T=null):C=T.sibling;var B=h(y,T,v[O],w);if(B===null){T===null&&(T=C);break}e&&T&&B.alternate===null&&t(y,T),g=s(B,g,O),j===null?x=B:j.sibling=B,j=B,T=C}if(O===v.length)return n(y,T),Ce&&pa(y,O),x;if(T===null){for(;O<v.length;O++)T=f(y,v[O],w),T!==null&&(g=s(T,g,O),j===null?x=T:j.sibling=T,j=T);return Ce&&pa(y,O),x}for(T=a(T);O<v.length;O++)C=m(T,y,O,v[O],w),C!==null&&(e&&C.alternate!==null&&T.delete(C.key===null?O:C.key),g=s(C,g,O),j===null?x=C:j.sibling=C,j=C);return e&&T.forEach(function(W){return t(y,W)}),Ce&&pa(y,O),x}function _(y,g,v,w){if(v==null)throw Error(A(151));for(var x=null,j=null,T=g,O=g=0,C=null,B=v.next();T!==null&&!B.done;O++,B=v.next()){T.index>O?(C=T,T=null):C=T.sibling;var W=h(y,T,B.value,w);if(W===null){T===null&&(T=C);break}e&&T&&W.alternate===null&&t(y,T),g=s(W,g,O),j===null?x=W:j.sibling=W,j=W,T=C}if(B.done)return n(y,T),Ce&&pa(y,O),x;if(T===null){for(;!B.done;O++,B=v.next())B=f(y,B.value,w),B!==null&&(g=s(B,g,O),j===null?x=B:j.sibling=B,j=B);return Ce&&pa(y,O),x}for(T=a(T);!B.done;O++,B=v.next())B=m(T,y,O,B.value,w),B!==null&&(e&&B.alternate!==null&&T.delete(B.key===null?O:B.key),g=s(B,g,O),j===null?x=B:j.sibling=B,j=B);return e&&T.forEach(function(qe){return t(y,qe)}),Ce&&pa(y,O),x}function S(y,g,v,w){if(typeof v=="object"&&v!==null&&v.type===ds&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Dl:e:{for(var x=v.key;g!==null;){if(g.key===x){if(x=v.type,x===ds){if(g.tag===7){n(y,g.sibling),w=i(g,v.props.children),w.return=y,y=w;break e}}else if(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===za&&bi(x)===g.type){n(y,g.sibling),w=i(g,v.props),fr(w,v),w.return=y,y=w;break e}n(y,g);break}else t(y,g);g=g.sibling}v.type===ds?(w=Oi(v.props.children,y.mode,w,v.key),w.return=y,y=w):(w=ro(v.type,v.key,v.props,null,y.mode,w),fr(w,v),w.return=y,y=w)}return r(y);case pr:e:{for(x=v.key;g!==null;){if(g.key===x)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(y,g.sibling),w=i(g,v.children||[]),w.return=y,y=w;break e}else{n(y,g);break}else t(y,g);g=g.sibling}w=nu(v,y.mode,w),w.return=y,y=w}return r(y);case za:return v=bi(v),S(y,g,v,w)}if(br(v))return b(y,g,v,w);if(cr(v)){if(x=cr(v),typeof x!="function")throw Error(A(150));return v=x.call(v),_(y,g,v,w)}if(typeof v.then=="function")return S(y,g,Ll(v),w);if(v.$$typeof===_a)return S(y,g,zl(y,v),w);Bl(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,g!==null&&g.tag===6?(n(y,g.sibling),w=i(g,v),w.return=y,y=w):(n(y,g),w=tu(v,y.mode,w),w.return=y,y=w),r(y)):n(y,g)}return function(y,g,v,w){try{Zr=0;var x=S(y,g,v,w);return Os=null,x}catch(T){if(T===Zs||T===mc)throw T;var j=Tn(29,T,null,y.mode);return j.lanes=w,j.return=y,j}finally{}}}var ki=sy(!0),ry=sy(!1),La=!1;function Tf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ud(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Wa(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Le&2){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,t=To(e),Pv(e,null,n),t}return hc(e,a,t,n),To(e)}function Cr(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ev(e,n)}}function iu(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?i=s=r:s=s.next=r,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var dd=!1;function Dr(){if(dd){var e=js;if(e!==null)throw e}}function Nr(e,t,n,a){dd=!1;var i=e.updateQueue;La=!1;var s=i.firstBaseUpdate,r=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var o=l,c=o.next;o.next=null,r===null?s=c:r.next=c,r=o;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==r&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(s!==null){var f=i.baseState;r=0,d=c=o=null,l=s;do{var h=l.lane&-536870913,m=h!==l.lane;if(m?(Oe&h)===h:(a&h)===h){h!==0&&h===Us&&(dd=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var b=e,_=l;h=t;var S=n;switch(_.tag){case 1:if(b=_.payload,typeof b=="function"){f=b.call(S,f,h);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=_.payload,h=typeof b=="function"?b.call(S,f,h):b,h==null)break e;f=lt({},f,h);break e;case 2:La=!0}}h=l.callback,h!==null&&(e.flags|=64,m&&(e.flags|=8192),m=i.callbacks,m===null?i.callbacks=[h]:m.push(h))}else m={lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=m,o=f):d=d.next=m,r|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);d===null&&(o=f),i.baseState=o,i.firstBaseUpdate=c,i.lastBaseUpdate=d,s===null&&(i.shared.lanes=0),oi|=r,e.lanes=r,e.memoizedState=f}}function ly(e,t){if(typeof e!="function")throw Error(A(191,e));e.call(t)}function oy(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)ly(n[e],t)}var zs=oa(null),Co=oa(0);function dm(e,t){e=Da,tt(Co,e),tt(zs,t),Da=e|t.baseLanes}function fd(){tt(Co,Da),tt(zs,zs.current)}function jf(){Da=Co.current,Vt(zs),Vt(Co)}var kn=oa(null),Kn=null;function qa(e){var t=e.alternate;tt(xt,xt.current&1),tt(kn,e),Kn===null&&(t===null||zs.current!==null||t.memoizedState!==null)&&(Kn=e)}function hd(e){tt(xt,xt.current),tt(kn,e),Kn===null&&(Kn=e)}function cy(e){e.tag===22?(tt(xt,xt.current),tt(kn,e),Kn===null&&(Kn=e)):$a()}function $a(){tt(xt,xt.current),tt(kn,kn.current)}function En(e){Vt(kn),Kn===e&&(Kn=null),Vt(xt)}var xt=oa(0);function Do(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Rd(n)||Md(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oa=0,de=null,Ke=null,At=null,No=!1,As=!1,Ui=!1,Ro=0,Pr=0,Cs=null,iS=0;function _t(){throw Error(A(321))}function Of(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Mn(e[n],t[n]))return!1;return!0}function Af(e,t,n,a,i,s){return Oa=s,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ae.H=e===null||e.memoizedState===null?qy:Hf,Ui=!1,s=n(a,i),Ui=!1,As&&(s=dy(t,n,a,i)),uy(e),s}function uy(e){ae.H=Fr;var t=Ke!==null&&Ke.next!==null;if(Oa=0,At=Ke=de=null,No=!1,Pr=0,Cs=null,t)throw Error(A(300));e===null||Nt||(e=e.dependencies,e!==null&&Oo(e)&&(Nt=!0))}function dy(e,t,n,a){de=e;var i=0;do{if(As&&(Cs=null),Pr=0,As=!1,25<=i)throw Error(A(301));if(i+=1,At=Ke=null,e.updateQueue!=null){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}ae.H=$y,s=t(n,a)}while(As);return s}function sS(){var e=ae.H,t=e.useState()[0];return t=typeof t.then=="function"?vl(t):t,e=e.useState()[0],(Ke!==null?Ke.memoizedState:null)!==e&&(de.flags|=1024),t}function Cf(){var e=Ro!==0;return Ro=0,e}function Df(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Nf(e){if(No){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}No=!1}Oa=0,At=Ke=de=null,As=!1,Pr=Ro=0,Cs=null}function tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?de.memoizedState=At=e:At=At.next=e,At}function Et(){if(Ke===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=Ke.next;var t=At===null?de.memoizedState:At.next;if(t!==null)At=t,Ke=e;else{if(e===null)throw de.alternate===null?Error(A(467)):Error(A(310));Ke=e,e={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},At===null?de.memoizedState=At=e:At=At.next=e}return At}function gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(e){var t=Pr;return Pr+=1,Cs===null&&(Cs=[]),e=iy(Cs,e,t),t=de,(At===null?t.memoizedState:At.next)===null&&(t=t.alternate,ae.H=t===null||t.memoizedState===null?qy:Hf),e}function vc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return vl(e);if(e.$$typeof===_a)return Qt(e)}throw Error(A(438,String(e)))}function Rf(e){var t=null,n=de.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=de.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=gc(),de.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=G_;return t.index++,n}function Aa(e,t){return typeof t=="function"?t(e):t}function oo(e){var t=Et();return Mf(t,Ke,e)}function Mf(e,t,n){var a=e.queue;if(a===null)throw Error(A(311));a.lastRenderedReducer=n;var i=e.baseQueue,s=a.pending;if(s!==null){if(i!==null){var r=i.next;i.next=s.next,s.next=r}t.baseQueue=i=s,a.pending=null}if(s=e.baseState,i===null)e.memoizedState=s;else{t=i.next;var l=r=null,o=null,c=t,d=!1;do{var f=c.lane&-536870913;if(f!==c.lane?(Oe&f)===f:(Oa&f)===f){var h=c.revertLane;if(h===0)o!==null&&(o=o.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Us&&(d=!0);else if((Oa&h)===h){c=c.next,h===Us&&(d=!0);continue}else f={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},o===null?(l=o=f,r=s):o=o.next=f,de.lanes|=h,oi|=h;f=c.action,Ui&&n(s,f),s=c.hasEagerState?c.eagerState:n(s,f)}else h={lane:f,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},o===null?(l=o=h,r=s):o=o.next=h,de.lanes|=f,oi|=f;c=c.next}while(c!==null&&c!==t);if(o===null?r=s:o.next=l,!Mn(s,e.memoizedState)&&(Nt=!0,d&&(n=js,n!==null)))throw n;e.memoizedState=s,e.baseState=r,e.baseQueue=o,a.lastRenderedState=s}return i===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function su(e){var t=Et(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var r=i=i.next;do s=e(s,r.action),r=r.next;while(r!==i);Mn(s,t.memoizedState)||(Nt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,a]}function fy(e,t,n){var a=de,i=Et(),s=Ce;if(s){if(n===void 0)throw Error(A(407));n=n()}else n=t();var r=!Mn((Ke||i).memoizedState,n);if(r&&(i.memoizedState=n,Nt=!0),i=i.queue,kf(gy.bind(null,a,i,e),[e]),i.getSnapshot!==t||r||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,Ls(9,{destroy:void 0},my.bind(null,a,i,n,t),null),Ze===null)throw Error(A(349));s||Oa&127||hy(a,t,n)}return n}function hy(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=de.updateQueue,t===null?(t=gc(),de.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function my(e,t,n,a){t.value=n,t.getSnapshot=a,vy(t)&&yy(e)}function gy(e,t,n){return n(function(){vy(t)&&yy(e)})}function vy(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mn(e,n)}catch{return!0}}function yy(e){var t=$i(e,2);t!==null&&gn(t,e,2)}function md(e){var t=tn();if(typeof e=="function"){var n=e;if(e=n(),Ui){Ia(!0);try{n()}finally{Ia(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:e},t}function py(e,t,n,a){return e.baseState=n,Mf(e,Ke,typeof a=="function"?a:Aa)}function rS(e,t,n,a,i){if(pc(e))throw Error(A(485));if(e=t.action,e!==null){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){s.listeners.push(r)}};ae.T!==null?n(!0):s.isTransition=!1,a(s),n=t.pending,n===null?(s.next=t.pending=s,by(t,s)):(s.next=n.next,t.pending=n.next=s)}}function by(e,t){var n=t.action,a=t.payload,i=e.state;if(t.isTransition){var s=ae.T,r={};ae.T=r;try{var l=n(i,a),o=ae.S;o!==null&&o(r,l),fm(e,t,l)}catch(c){gd(e,t,c)}finally{s!==null&&r.types!==null&&(s.types=r.types),ae.T=s}}else try{s=n(i,a),fm(e,t,s)}catch(c){gd(e,t,c)}}function fm(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){hm(e,t,a)},function(a){return gd(e,t,a)}):hm(e,t,n)}function hm(e,t,n){t.status="fulfilled",t.value=n,_y(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,by(e,n)))}function gd(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,_y(t),t=t.next;while(t!==a)}e.action=null}function _y(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function wy(e,t){return t}function mm(e,t){if(Ce){var n=Ze.formState;if(n!==null){e:{var a=de;if(Ce){if(st){t:{for(var i=st,s=In;i.nodeType!==8;){if(!s){i=null;break t}if(i=Xn(i.nextSibling),i===null){i=null;break t}}s=i.data,i=s==="F!"||s==="F"?i:null}if(i){st=Xn(i.nextSibling),a=i.data==="F!";break e}}ri(a)}a=!1}a&&(t=n[0])}}return n=tn(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wy,lastRenderedState:t},n.queue=a,n=Ly.bind(null,de,a),a.dispatch=n,a=md(!1),s=Bf.bind(null,de,!1,a.queue),a=tn(),i={state:t,dispatch:null,action:e,pending:null},a.queue=i,n=rS.bind(null,de,i,s,n),i.dispatch=n,a.memoizedState=e,[t,n,!1]}function gm(e){var t=Et();return Sy(t,Ke,e)}function Sy(e,t,n){if(t=Mf(e,t,wy)[0],e=oo(Aa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=vl(t)}catch(r){throw r===Zs?mc:r}else a=t;t=Et();var i=t.queue,s=i.dispatch;return n!==t.memoizedState&&(de.flags|=2048,Ls(9,{destroy:void 0},lS.bind(null,i,n),null)),[a,s,e]}function lS(e,t){e.action=t}function vm(e){var t=Et(),n=Ke;if(n!==null)return Sy(t,n,e);Et(),t=t.memoizedState,n=Et();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function Ls(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=de.updateQueue,t===null&&(t=gc(),de.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function xy(){return Et().memoizedState}function co(e,t,n,a){var i=tn();de.flags|=e,i.memoizedState=Ls(1|t,{destroy:void 0},n,a===void 0?null:a)}function yc(e,t,n,a){var i=Et();a=a===void 0?null:a;var s=i.memoizedState.inst;Ke!==null&&a!==null&&Of(a,Ke.memoizedState.deps)?i.memoizedState=Ls(t,s,n,a):(de.flags|=e,i.memoizedState=Ls(1|t,s,n,a))}function ym(e,t){co(8390656,8,e,t)}function kf(e,t){yc(2048,8,e,t)}function oS(e){de.flags|=4;var t=de.updateQueue;if(t===null)t=gc(),de.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Ey(e){var t=Et().memoizedState;return oS({ref:t,nextImpl:e}),function(){if(Le&2)throw Error(A(440));return t.impl.apply(void 0,arguments)}}function Ty(e,t){return yc(4,2,e,t)}function jy(e,t){return yc(4,4,e,t)}function Oy(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ay(e,t,n){n=n!=null?n.concat([e]):null,yc(4,4,Oy.bind(null,t,e),n)}function Uf(){}function Cy(e,t){var n=Et();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&Of(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Dy(e,t){var n=Et();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&Of(t,a[1]))return a[0];if(a=e(),Ui){Ia(!0);try{e()}finally{Ia(!1)}}return n.memoizedState=[a,t],a}function zf(e,t,n){return n===void 0||Oa&1073741824&&!(Oe&261930)?e.memoizedState=t:(e.memoizedState=n,e=pp(),de.lanes|=e,oi|=e,n)}function Ny(e,t,n,a){return Mn(n,t)?n:zs.current!==null?(e=zf(e,n,a),Mn(e,t)||(Nt=!0),e):!(Oa&42)||Oa&1073741824&&!(Oe&261930)?(Nt=!0,e.memoizedState=n):(e=pp(),de.lanes|=e,oi|=e,t)}function Ry(e,t,n,a,i){var s=Be.p;Be.p=s!==0&&8>s?s:8;var r=ae.T,l={};ae.T=l,Bf(e,!1,t,n);try{var o=i(),c=ae.S;if(c!==null&&c(l,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var d=aS(o,a);Rr(e,t,d,Rn(e))}else Rr(e,t,a,Rn(e))}catch(f){Rr(e,t,{then:function(){},status:"rejected",reason:f},Rn())}finally{Be.p=s,r!==null&&l.types!==null&&(r.types=l.types),ae.T=r}}function cS(){}function vd(e,t,n,a){if(e.tag!==5)throw Error(A(476));var i=My(e).queue;Ry(e,i,t,ji,n===null?cS:function(){return ky(e),n(a)})}function My(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ji,baseState:ji,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:ji},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ky(e){var t=My(e);t.next===null&&(t=e.alternate.memoizedState),Rr(e,t.next.queue,{},Rn())}function Lf(){return Qt(tl)}function Uy(){return Et().memoizedState}function zy(){return Et().memoizedState}function uS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Rn();e=Fa(n);var a=Wa(t,e,n);a!==null&&(gn(a,t,n),Cr(a,t,n)),t={cache:Sf()},e.payload=t;return}t=t.return}}function dS(e,t,n){var a=Rn();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},pc(e)?By(t,n):(n=pf(e,t,n,a),n!==null&&(gn(n,e,a),Hy(n,t,a)))}function Ly(e,t,n){var a=Rn();Rr(e,t,n,a)}function Rr(e,t,n,a){var i={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(pc(e))By(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var r=t.lastRenderedState,l=s(r,n);if(i.hasEagerState=!0,i.eagerState=l,Mn(l,r))return hc(e,t,i,0),Ze===null&&fc(),!1}catch{}finally{}if(n=pf(e,t,i,a),n!==null)return gn(n,e,a),Hy(n,t,a),!0}return!1}function Bf(e,t,n,a){if(a={lane:2,revertLane:Xf(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},pc(e)){if(t)throw Error(A(479))}else t=pf(e,n,a,2),t!==null&&gn(t,e,2)}function pc(e){var t=e.alternate;return e===de||t!==null&&t===de}function By(e,t){As=No=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hy(e,t,n){if(n&4194048){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ev(e,n)}}var Fr={readContext:Qt,use:vc,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t};Fr.useEffectEvent=_t;var qy={readContext:Qt,use:vc,useCallback:function(e,t){return tn().memoizedState=[e,t===void 0?null:t],e},useContext:Qt,useEffect:ym,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,co(4194308,4,Oy.bind(null,t,e),n)},useLayoutEffect:function(e,t){return co(4194308,4,e,t)},useInsertionEffect:function(e,t){co(4,2,e,t)},useMemo:function(e,t){var n=tn();t=t===void 0?null:t;var a=e();if(Ui){Ia(!0);try{e()}finally{Ia(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=tn();if(n!==void 0){var i=n(t);if(Ui){Ia(!0);try{n(t)}finally{Ia(!1)}}}else i=t;return a.memoizedState=a.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=dS.bind(null,de,e),[a.memoizedState,e]},useRef:function(e){var t=tn();return e={current:e},t.memoizedState=e},useState:function(e){e=md(e);var t=e.queue,n=Ly.bind(null,de,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Uf,useDeferredValue:function(e,t){var n=tn();return zf(n,e,t)},useTransition:function(){var e=md(!1);return e=Ry.bind(null,de,e.queue,!0,!1),tn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=de,i=tn();if(Ce){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),Ze===null)throw Error(A(349));Oe&127||hy(a,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ym(gy.bind(null,a,s,e),[e]),a.flags|=2048,Ls(9,{destroy:void 0},my.bind(null,a,s,n,t),null),n},useId:function(){var e=tn(),t=Ze.identifierPrefix;if(Ce){var n=sa,a=ia;n=(a&~(1<<32-Nn(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Ro++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=iS++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Lf,useFormState:mm,useActionState:mm,useOptimistic:function(e){var t=tn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Bf.bind(null,de,!0,n),n.dispatch=t,[e,t]},useMemoCache:Rf,useCacheRefresh:function(){return tn().memoizedState=uS.bind(null,de)},useEffectEvent:function(e){var t=tn(),n={impl:e};return t.memoizedState=n,function(){if(Le&2)throw Error(A(440));return n.impl.apply(void 0,arguments)}}},Hf={readContext:Qt,use:vc,useCallback:Cy,useContext:Qt,useEffect:kf,useImperativeHandle:Ay,useInsertionEffect:Ty,useLayoutEffect:jy,useMemo:Dy,useReducer:oo,useRef:xy,useState:function(){return oo(Aa)},useDebugValue:Uf,useDeferredValue:function(e,t){var n=Et();return Ny(n,Ke.memoizedState,e,t)},useTransition:function(){var e=oo(Aa)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:vl(e),t]},useSyncExternalStore:fy,useId:Uy,useHostTransitionStatus:Lf,useFormState:gm,useActionState:gm,useOptimistic:function(e,t){var n=Et();return py(n,Ke,e,t)},useMemoCache:Rf,useCacheRefresh:zy};Hf.useEffectEvent=Ey;var $y={readContext:Qt,use:vc,useCallback:Cy,useContext:Qt,useEffect:kf,useImperativeHandle:Ay,useInsertionEffect:Ty,useLayoutEffect:jy,useMemo:Dy,useReducer:su,useRef:xy,useState:function(){return su(Aa)},useDebugValue:Uf,useDeferredValue:function(e,t){var n=Et();return Ke===null?zf(n,e,t):Ny(n,Ke.memoizedState,e,t)},useTransition:function(){var e=su(Aa)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:vl(e),t]},useSyncExternalStore:fy,useId:Uy,useHostTransitionStatus:Lf,useFormState:vm,useActionState:vm,useOptimistic:function(e,t){var n=Et();return Ke!==null?py(n,Ke,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Rf,useCacheRefresh:zy};$y.useEffectEvent=Ey;function ru(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:lt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yd={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Rn(),i=Fa(a);i.payload=t,n!=null&&(i.callback=n),t=Wa(e,i,a),t!==null&&(gn(t,e,a),Cr(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Rn(),i=Fa(a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Wa(e,i,a),t!==null&&(gn(t,e,a),Cr(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rn(),a=Fa(n);a.tag=2,t!=null&&(a.callback=t),t=Wa(e,a,n),t!==null&&(gn(t,e,n),Cr(t,e,n))}};function pm(e,t,n,a,i,s,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,s,r):t.prototype&&t.prototype.isPureReactComponent?!Xr(n,a)||!Xr(i,s):!0}function bm(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&yd.enqueueReplaceState(t,t.state,null)}function zi(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=lt({},n));for(var i in e)n[i]===void 0&&(n[i]=e[i])}return n}function Vy(e){Eo(e)}function Yy(e){console.error(e)}function Gy(e){Eo(e)}function Mo(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function _m(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function pd(e,t,n){return n=Fa(n),n.tag=3,n.payload={element:null},n.callback=function(){Mo(e,t)},n}function Iy(e){return e=Fa(e),e.tag=3,e}function Ky(e,t,n,a){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=a.value;e.payload=function(){return i(s)},e.callback=function(){_m(t,n,a)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){_m(t,n,a),typeof i!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var l=a.stack;this.componentDidCatch(a.value,{componentStack:l!==null?l:""})})}function fS(e,t,n,a,i){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&Js(t,n,i,!0),n=kn.current,n!==null){switch(n.tag){case 31:case 13:return Kn===null?Bo():n.alternate===null&&wt===0&&(wt=3),n.flags&=-257,n.flags|=65536,n.lanes=i,a===Ao?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),yu(e,a,i)),!1;case 22:return n.flags|=65536,a===Ao?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),yu(e,a,i)),!1}throw Error(A(435,n.tag))}return yu(e,a,i),Bo(),!1}if(Ce)return t=kn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=i,a!==sd&&(e=Error(A(422),{cause:a}),Jr(Gn(e,n)))):(a!==sd&&(t=Error(A(423),{cause:a}),Jr(Gn(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,a=Gn(a,n),i=pd(e.stateNode,a,i),iu(e,i),wt!==4&&(wt=2)),!1;var s=Error(A(520),{cause:a});if(s=Gn(s,n),Ur===null?Ur=[s]:Ur.push(s),wt!==4&&(wt=2),t===null)return!0;a=Gn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=pd(n.stateNode,a,e),iu(n,e),!1;case 1:if(t=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(ei===null||!ei.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,i=Iy(i),Ky(i,e,n,a),iu(n,i),!1}n=n.return}while(n!==null);return!1}var qf=Error(A(461)),Nt=!1;function It(e,t,n,a){t.child=e===null?ry(t,null,n,a):ki(t,e.child,n,a)}function wm(e,t,n,a,i){n=n.render;var s=t.ref;if("ref"in a){var r={};for(var l in a)l!=="ref"&&(r[l]=a[l])}else r=a;return Mi(t),a=Af(e,t,n,r,s,i),l=Cf(),e!==null&&!Nt?(Df(e,t,i),Ca(e,t,i)):(Ce&&l&&_f(t),t.flags|=1,It(e,t,a,i),t.child)}function Sm(e,t,n,a,i){if(e===null){var s=n.type;return typeof s=="function"&&!bf(s)&&s.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=s,Xy(e,t,s,a,i)):(e=ro(n.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!$f(e,i)){var r=s.memoizedProps;if(n=n.compare,n=n!==null?n:Xr,n(r,a)&&e.ref===t.ref)return Ca(e,t,i)}return t.flags|=1,e=xa(s,a),e.ref=t.ref,e.return=t,t.child=e}function Xy(e,t,n,a,i){if(e!==null){var s=e.memoizedProps;if(Xr(s,a)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=a=s,$f(e,i))e.flags&131072&&(Nt=!0);else return t.lanes=e.lanes,Ca(e,t,i)}return bd(e,t,n,a,i)}function Qy(e,t,n,a){var i=a.children,s=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if(t.flags&128){if(s=s!==null?s.baseLanes|n:n,e!==null){for(a=t.child=e.child,i=0;a!==null;)i=i|a.lanes|a.childLanes,a=a.sibling;a=i&~s}else a=0,t.child=null;return xm(e,t,s,n,a)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&lo(t,s!==null?s.cachePool:null),s!==null?dm(t,s):fd(),cy(t);else return a=t.lanes=536870912,xm(e,t,s!==null?s.baseLanes|n:n,n,a)}else s!==null?(lo(t,s.cachePool),dm(t,s),$a(),t.memoizedState=null):(e!==null&&lo(t,null),fd(),$a());return It(e,t,i,n),t.child}function wr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function xm(e,t,n,a,i){var s=xf();return s=s===null?null:{parent:Dt._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},e!==null&&lo(t,null),fd(),cy(t),e!==null&&Js(e,t,a,!0),t.childLanes=i,null}function uo(e,t){return t=ko({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Em(e,t,n){return ki(t,e.child,null,n),e=uo(t,t.pendingProps),e.flags|=2,En(t),t.memoizedState=null,e}function hS(e,t,n){var a=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ce){if(a.mode==="hidden")return e=uo(t,a),t.lanes=536870912,wr(null,e);if(hd(t),(e=st)?(e=qp(e,In),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:si!==null?{id:ia,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},n=Wv(e),n.return=t,t.child=n,Xt=t,st=null)):e=null,e===null)throw ri(t);return t.lanes=536870912,null}return uo(t,a)}var s=e.memoizedState;if(s!==null){var r=s.dehydrated;if(hd(t),i)if(t.flags&256)t.flags&=-257,t=Em(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(A(558));else if(Nt||Js(e,t,n,!1),i=(n&e.childLanes)!==0,Nt||i){if(a=Ze,a!==null&&(r=Tv(a,n),r!==0&&r!==s.retryLane))throw s.retryLane=r,$i(e,r),gn(a,e,r),qf;Bo(),t=Em(e,t,n)}else e=s.treeContext,st=Xn(r.nextSibling),Xt=t,Ce=!0,Pa=null,In=!1,e!==null&&ty(t,e),t=uo(t,a),t.flags|=4096;return t}return e=xa(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function fo(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(A(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function bd(e,t,n,a,i){return Mi(t),n=Af(e,t,n,a,void 0,i),a=Cf(),e!==null&&!Nt?(Df(e,t,i),Ca(e,t,i)):(Ce&&a&&_f(t),t.flags|=1,It(e,t,n,i),t.child)}function Tm(e,t,n,a,i,s){return Mi(t),t.updateQueue=null,n=dy(t,a,n,i),uy(e),a=Cf(),e!==null&&!Nt?(Df(e,t,s),Ca(e,t,s)):(Ce&&a&&_f(t),t.flags|=1,It(e,t,n,s),t.child)}function jm(e,t,n,a,i){if(Mi(t),t.stateNode===null){var s=bs,r=n.contextType;typeof r=="object"&&r!==null&&(s=Qt(r)),s=new n(a,s),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=yd,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=a,s.state=t.memoizedState,s.refs={},Tf(t),r=n.contextType,s.context=typeof r=="object"&&r!==null?Qt(r):bs,s.state=t.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(ru(t,n,r,a),s.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&yd.enqueueReplaceState(s,s.state,null),Nr(t,a,s,i),Dr(),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){s=t.stateNode;var l=t.memoizedProps,o=zi(n,l);s.props=o;var c=s.context,d=n.contextType;r=bs,typeof d=="object"&&d!==null&&(r=Qt(d));var f=n.getDerivedStateFromProps;d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||c!==r)&&bm(t,s,a,r),La=!1;var h=t.memoizedState;s.state=h,Nr(t,a,s,i),Dr(),c=t.memoizedState,l||h!==c||La?(typeof f=="function"&&(ru(t,n,f,a),c=t.memoizedState),(o=La||pm(t,n,o,a,h,c,r))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),s.props=a,s.state=c,s.context=r,a=o):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{s=t.stateNode,ud(e,t),r=t.memoizedProps,d=zi(n,r),s.props=d,f=t.pendingProps,h=s.context,c=n.contextType,o=bs,typeof c=="object"&&c!==null&&(o=Qt(c)),l=n.getDerivedStateFromProps,(c=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r!==f||h!==o)&&bm(t,s,a,o),La=!1,h=t.memoizedState,s.state=h,Nr(t,a,s,i),Dr();var m=t.memoizedState;r!==f||h!==m||La||e!==null&&e.dependencies!==null&&Oo(e.dependencies)?(typeof l=="function"&&(ru(t,n,l,a),m=t.memoizedState),(d=La||pm(t,n,d,a,h,m,o)||e!==null&&e.dependencies!==null&&Oo(e.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(a,m,o),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(a,m,o)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=m),s.props=a,s.state=m,s.context=o,a=d):(typeof s.componentDidUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return s=a,fo(e,t),a=(t.flags&128)!==0,s||a?(s=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:s.render(),t.flags|=1,e!==null&&a?(t.child=ki(t,e.child,null,i),t.child=ki(t,null,n,i)):It(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Ca(e,t,i),e}function Om(e,t,n,a){return Ri(),t.flags|=256,It(e,t,n,a),t.child}var lu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ou(e){return{baseLanes:e,cachePool:ay()}}function cu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=An),e}function Jy(e,t,n){var a=t.pendingProps,i=!1,s=(t.flags&128)!==0,r;if((r=s)||(r=e!==null&&e.memoizedState===null?!1:(xt.current&2)!==0),r&&(i=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ce){if(i?qa(t):$a(),(e=st)?(e=qp(e,In),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:si!==null?{id:ia,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},n=Wv(e),n.return=t,t.child=n,Xt=t,st=null)):e=null,e===null)throw ri(t);return Md(e)?t.lanes=32:t.lanes=536870912,null}var l=a.children;return a=a.fallback,i?($a(),i=t.mode,l=ko({mode:"hidden",children:l},i),a=Oi(a,i,n,null),l.return=t,a.return=t,l.sibling=a,t.child=l,a=t.child,a.memoizedState=ou(n),a.childLanes=cu(e,r,n),t.memoizedState=lu,wr(null,a)):(qa(t),_d(t,l))}var o=e.memoizedState;if(o!==null&&(l=o.dehydrated,l!==null)){if(s)t.flags&256?(qa(t),t.flags&=-257,t=uu(e,t,n)):t.memoizedState!==null?($a(),t.child=e.child,t.flags|=128,t=null):($a(),l=a.fallback,i=t.mode,a=ko({mode:"visible",children:a.children},i),l=Oi(l,i,n,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,ki(t,e.child,null,n),a=t.child,a.memoizedState=ou(n),a.childLanes=cu(e,r,n),t.memoizedState=lu,t=wr(null,a));else if(qa(t),Md(l)){if(r=l.nextSibling&&l.nextSibling.dataset,r)var c=r.dgst;r=c,a=Error(A(419)),a.stack="",a.digest=r,Jr({value:a,source:null,stack:null}),t=uu(e,t,n)}else if(Nt||Js(e,t,n,!1),r=(n&e.childLanes)!==0,Nt||r){if(r=Ze,r!==null&&(a=Tv(r,n),a!==0&&a!==o.retryLane))throw o.retryLane=a,$i(e,a),gn(r,e,a),qf;Rd(l)||Bo(),t=uu(e,t,n)}else Rd(l)?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,st=Xn(l.nextSibling),Xt=t,Ce=!0,Pa=null,In=!1,e!==null&&ty(t,e),t=_d(t,a.children),t.flags|=4096);return t}return i?($a(),l=a.fallback,i=t.mode,o=e.child,c=o.sibling,a=xa(o,{mode:"hidden",children:a.children}),a.subtreeFlags=o.subtreeFlags&65011712,c!==null?l=xa(c,l):(l=Oi(l,i,n,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,wr(null,a),a=t.child,l=e.child.memoizedState,l===null?l=ou(n):(i=l.cachePool,i!==null?(o=Dt._currentValue,i=i.parent!==o?{parent:o,pool:o}:i):i=ay(),l={baseLanes:l.baseLanes|n,cachePool:i}),a.memoizedState=l,a.childLanes=cu(e,r,n),t.memoizedState=lu,wr(e.child,a)):(qa(t),n=e.child,e=n.sibling,n=xa(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function _d(e,t){return t=ko({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ko(e,t){return e=Tn(22,e,null,t),e.lanes=0,e}function uu(e,t,n){return ki(t,e.child,null,n),e=_d(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Am(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),ld(e.return,t,n)}function du(e,t,n,a,i,s){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i,treeForkCount:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=n,r.tailMode=i,r.treeForkCount=s)}function Zy(e,t,n){var a=t.pendingProps,i=a.revealOrder,s=a.tail;a=a.children;var r=xt.current,l=(r&2)!==0;if(l?(r=r&1|2,t.flags|=128):r&=1,tt(xt,r),It(e,t,a,n),a=Ce?Qr:0,!l&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Am(e,n,t);else if(e.tag===19)Am(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Do(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),du(t,!1,i,n,s,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Do(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}du(t,!0,n,null,s,a);break;case"together":du(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function Ca(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),oi|=t.lanes,!(n&t.childLanes))if(e!==null){if(Js(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=xa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function $f(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Oo(e)))}function mS(e,t,n){switch(t.tag){case 3:_o(t,t.stateNode.containerInfo),Ha(t,Dt,e.memoizedState.cache),Ri();break;case 27:case 5:Qu(t);break;case 4:_o(t,t.stateNode.containerInfo);break;case 10:Ha(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,hd(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(qa(t),t.flags|=128,null):n&t.child.childLanes?Jy(e,t,n):(qa(t),e=Ca(e,t,n),e!==null?e.sibling:null);qa(t);break;case 19:var i=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(Js(e,t,n,!1),a=(n&t.childLanes)!==0),i){if(a)return Zy(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),tt(xt,xt.current),a)break;return null;case 22:return t.lanes=0,Qy(e,t,n,t.pendingProps);case 24:Ha(t,Dt,e.memoizedState.cache)}return Ca(e,t,n)}function Py(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Nt=!0;else{if(!$f(e,n)&&!(t.flags&128))return Nt=!1,mS(e,t,n);Nt=!!(e.flags&131072)}else Nt=!1,Ce&&t.flags&1048576&&ey(t,Qr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=bi(t.elementType),t.type=e,typeof e=="function")bf(e)?(a=zi(e,a),t.tag=1,t=jm(null,t,e,a,n)):(t.tag=0,t=bd(null,t,e,a,n));else{if(e!=null){var i=e.$$typeof;if(i===sf){t.tag=11,t=wm(null,t,e,a,n);break e}else if(i===rf){t.tag=14,t=Sm(null,t,e,a,n);break e}}throw t=Ku(e)||e,Error(A(306,t,""))}}return t;case 0:return bd(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,i=zi(a,t.pendingProps),jm(e,t,a,i,n);case 3:e:{if(_o(t,t.stateNode.containerInfo),e===null)throw Error(A(387));a=t.pendingProps;var s=t.memoizedState;i=s.element,ud(e,t),Nr(t,a,null,n);var r=t.memoizedState;if(a=r.cache,Ha(t,Dt,a),a!==s.cache&&od(t,[Dt],n,!0),Dr(),a=r.element,s.isDehydrated)if(s={element:a,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){t=Om(e,t,a,n);break e}else if(a!==i){i=Gn(Error(A(424)),t),Jr(i),t=Om(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(st=Xn(e.firstChild),Xt=t,Ce=!0,Pa=null,In=!0,n=ry(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ri(),a===i){t=Ca(e,t,n);break e}It(e,t,a,n)}t=t.child}return t;case 26:return fo(e,t),e===null?(n=Qm(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ce||(n=t.type,e=t.pendingProps,a=Vo(Za.current).createElement(n),a[Kt]=t,a[vn]=e,Jt(a,n,e),$t(a),t.stateNode=a):t.memoizedState=Qm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Qu(t),e===null&&Ce&&(a=t.stateNode=$p(t.type,t.pendingProps,Za.current),Xt=t,In=!0,i=st,ui(t.type)?(kd=i,st=Xn(a.firstChild)):st=i),It(e,t,t.pendingProps.children,n),fo(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ce&&((i=a=st)&&(a=GS(a,t.type,t.pendingProps,In),a!==null?(t.stateNode=a,Xt=t,st=Xn(a.firstChild),In=!1,i=!0):i=!1),i||ri(t)),Qu(t),i=t.type,s=t.pendingProps,r=e!==null?e.memoizedProps:null,a=s.children,Dd(i,s)?a=null:r!==null&&Dd(i,r)&&(t.flags|=32),t.memoizedState!==null&&(i=Af(e,t,sS,null,null,n),tl._currentValue=i),fo(e,t),It(e,t,a,n),t.child;case 6:return e===null&&Ce&&((e=n=st)&&(n=IS(n,t.pendingProps,In),n!==null?(t.stateNode=n,Xt=t,st=null,e=!0):e=!1),e||ri(t)),null;case 13:return Jy(e,t,n);case 4:return _o(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ki(t,null,a,n):It(e,t,a,n),t.child;case 11:return wm(e,t,t.type,t.pendingProps,n);case 7:return It(e,t,t.pendingProps,n),t.child;case 8:return It(e,t,t.pendingProps.children,n),t.child;case 12:return It(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Ha(t,t.type,a.value),It(e,t,a.children,n),t.child;case 9:return i=t.type._context,a=t.pendingProps.children,Mi(t),i=Qt(i),a=a(i),t.flags|=1,It(e,t,a,n),t.child;case 14:return Sm(e,t,t.type,t.pendingProps,n);case 15:return Xy(e,t,t.type,t.pendingProps,n);case 19:return Zy(e,t,n);case 31:return hS(e,t,n);case 22:return Qy(e,t,n,t.pendingProps);case 24:return Mi(t),a=Qt(Dt),e===null?(i=xf(),i===null&&(i=Ze,s=Sf(),i.pooledCache=s,s.refCount++,s!==null&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:a,cache:i},Tf(t),Ha(t,Dt,i)):(e.lanes&n&&(ud(e,t),Nr(t,null,null,n),Dr()),i=e.memoizedState,s=t.memoizedState,i.parent!==a?(i={parent:a,cache:a},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Ha(t,Dt,a)):(a=s.cache,Ha(t,Dt,a),a!==i.cache&&od(t,[Dt],n,!0))),It(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(A(156,t.tag))}function ha(e){e.flags|=4}function fu(e,t,n,a,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(wp())e.flags|=8192;else throw Ci=Ao,Ef}else e.flags&=-16777217}function Cm(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Gp(t))if(wp())e.flags|=8192;else throw Ci=Ao,Ef}function Hl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Sv():536870912,e.lanes|=t,Bs|=t)}function hr(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags&65011712,a|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function gS(e,t,n){var a=t.pendingProps;switch(wf(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return it(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Ea(Dt),Rs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Fi(t)?ha(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,au())),it(t),null;case 26:var i=t.type,s=t.memoizedState;return e===null?(ha(t),s!==null?(it(t),Cm(t,s)):(it(t),fu(t,i,null,a,n))):s?s!==e.memoizedState?(ha(t),it(t),Cm(t,s)):(it(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&ha(t),it(t),fu(t,i,e,a,n)),null;case 27:if(wo(t),n=Za.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&ha(t);else{if(!a){if(t.stateNode===null)throw Error(A(166));return it(t),null}e=la.current,Fi(t)?im(t):(e=$p(i,a,n),t.stateNode=e,ha(t))}return it(t),null;case 5:if(wo(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&ha(t);else{if(!a){if(t.stateNode===null)throw Error(A(166));return it(t),null}if(s=la.current,Fi(t))im(t);else{var r=Vo(Za.current);switch(s){case 1:s=r.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=r.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=r.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":s=r.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof a.is=="string"?r.createElement("select",{is:a.is}):r.createElement("select"),a.multiple?s.multiple=!0:a.size&&(s.size=a.size);break;default:s=typeof a.is=="string"?r.createElement(i,{is:a.is}):r.createElement(i)}}s[Kt]=t,s[vn]=a;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=s;e:switch(Jt(s,i,a),i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ha(t)}}return it(t),fu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&ha(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(A(166));if(e=Za.current,Fi(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,i=Xt,i!==null)switch(i.tag){case 27:case 5:a=i.memoizedProps}e[Kt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Lp(e.nodeValue,n)),e||ri(t,!0)}else e=Vo(e).createTextNode(a),e[Kt]=t,t.stateNode=e}return it(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=Fi(t),n!==null){if(e===null){if(!a)throw Error(A(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(557));e[Kt]=t}else Ri(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;it(t),e=!1}else n=au(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(En(t),t):(En(t),null);if(t.flags&128)throw Error(A(558))}return it(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Fi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(A(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[Kt]=t}else Ri(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;it(t),i=!1}else i=au(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(En(t),t):(En(t),null)}return En(t),t.flags&128?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,i=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(i=a.alternate.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==i&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Hl(t,t.updateQueue),it(t),null);case 4:return Rs(),e===null&&Qf(t.stateNode.containerInfo),it(t),null;case 10:return Ea(t.type),it(t),null;case 19:if(Vt(xt),a=t.memoizedState,a===null)return it(t),null;if(i=(t.flags&128)!==0,s=a.rendering,s===null)if(i)hr(a,!1);else{if(wt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Do(e),s!==null){for(t.flags|=128,hr(a,!1),e=s.updateQueue,t.updateQueue=e,Hl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Fv(n,e),n=n.sibling;return tt(xt,xt.current&1|2),Ce&&pa(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&Cn()>zo&&(t.flags|=128,i=!0,hr(a,!1),t.lanes=4194304)}else{if(!i)if(e=Do(s),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Hl(t,e),hr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Ce)return it(t),null}else 2*Cn()-a.renderingStartTime>zo&&n!==536870912&&(t.flags|=128,i=!0,hr(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(e=a.last,e!==null?e.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Cn(),e.sibling=null,n=xt.current,tt(xt,i?n&1|2:n&1),Ce&&pa(t,a.treeForkCount),e):(it(t),null);case 22:case 23:return En(t),jf(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?n&536870912&&!(t.flags&128)&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),n=t.updateQueue,n!==null&&Hl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&Vt(Ai),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ea(Dt),it(t),null;case 25:return null;case 30:return null}throw Error(A(156,t.tag))}function vS(e,t){switch(wf(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ea(Dt),Rs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return wo(t),null;case 31:if(t.memoizedState!==null){if(En(t),t.alternate===null)throw Error(A(340));Ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(En(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Vt(xt),null;case 4:return Rs(),null;case 10:return Ea(t.type),null;case 22:case 23:return En(t),jf(),e!==null&&Vt(Ai),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ea(Dt),null;case 25:return null;default:return null}}function Fy(e,t){switch(wf(t),t.tag){case 3:Ea(Dt),Rs();break;case 26:case 27:case 5:wo(t);break;case 4:Rs();break;case 31:t.memoizedState!==null&&En(t);break;case 13:En(t);break;case 19:Vt(xt);break;case 10:Ea(t.type);break;case 22:case 23:En(t),jf(),e!==null&&Vt(Ai);break;case 24:Ea(Dt)}}function yl(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&e)===e){a=void 0;var s=n.create,r=n.inst;a=s(),r.destroy=a}n=n.next}while(n!==i)}}catch(l){Ye(t,t.return,l)}}function li(e,t,n){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var s=i.next;a=s;do{if((a.tag&e)===e){var r=a.inst,l=r.destroy;if(l!==void 0){r.destroy=void 0,i=t;var o=n,c=l;try{c()}catch(d){Ye(i,o,d)}}}a=a.next}while(a!==s)}}catch(d){Ye(t,t.return,d)}}function Wy(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{oy(t,n)}catch(a){Ye(e,e.return,a)}}}function ep(e,t,n){n.props=zi(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Ye(e,t,a)}}function Mr(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(i){Ye(e,t,i)}}function ra(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(i){Ye(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Ye(e,t,i)}else n.current=null}function tp(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(i){Ye(e,e.return,i)}}function hu(e,t,n){try{var a=e.stateNode;BS(a,e.type,n,t),a[vn]=t}catch(i){Ye(e,e.return,i)}}function np(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ui(e.type)||e.tag===4}function mu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||np(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ui(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wd(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wa));else if(a!==4&&(a===27&&ui(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(wd(e,t,n),e=e.sibling;e!==null;)wd(e,t,n),e=e.sibling}function Uo(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&ui(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Uo(e,t,n),e=e.sibling;e!==null;)Uo(e,t,n),e=e.sibling}function ap(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Jt(t,a,n),t[Kt]=e,t[vn]=n}catch(s){Ye(e,e.return,s)}}var ba=!1,Ct=!1,gu=!1,Dm=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function yS(e,t){if(e=e.containerInfo,Ad=Ko,e=Gv(e),vf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var i=a.anchorOffset,s=a.focusNode;a=a.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var r=0,l=-1,o=-1,c=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(l=r+i),f!==s||a!==0&&f.nodeType!==3||(o=r+a),f.nodeType===3&&(r+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===n&&++c===i&&(l=r),h===s&&++d===a&&(o=r),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=l===-1||o===-1?null:{start:l,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cd={focusedElem:e,selectionRange:n},Ko=!1,Ht=t;Ht!==null;)if(t=Ht,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ht=e;else for(;Ht!==null;){switch(t=Ht,s=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)i=e[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&s!==null){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,a=n.stateNode;try{var b=zi(n.type,i);e=a.getSnapshotBeforeUpdate(b,s),a.__reactInternalSnapshotBeforeUpdate=e}catch(_){Ye(n,n.return,_)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Nd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Nd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(A(163))}if(e=t.sibling,e!==null){e.return=t.return,Ht=e;break}Ht=t.return}}function ip(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:ga(e,n),a&4&&yl(5,n);break;case 1:if(ga(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(r){Ye(n,n.return,r)}else{var i=zi(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){Ye(n,n.return,r)}}a&64&&Wy(n),a&512&&Mr(n,n.return);break;case 3:if(ga(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{oy(e,t)}catch(r){Ye(n,n.return,r)}}break;case 27:t===null&&a&4&&ap(n);case 26:case 5:ga(e,n),t===null&&a&4&&tp(n),a&512&&Mr(n,n.return);break;case 12:ga(e,n);break;case 31:ga(e,n),a&4&&lp(e,n);break;case 13:ga(e,n),a&4&&op(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=jS.bind(null,n),KS(e,n))));break;case 22:if(a=n.memoizedState!==null||ba,!a){t=t!==null&&t.memoizedState!==null||Ct,i=ba;var s=Ct;ba=a,(Ct=t)&&!s?va(e,n,(n.subtreeFlags&8772)!==0):ga(e,n),ba=i,Ct=s}break;case 30:break;default:ga(e,n)}}function sp(e){var t=e.alternate;t!==null&&(e.alternate=null,sp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&uf(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var dt=null,hn=!1;function ma(e,t,n){for(n=n.child;n!==null;)rp(e,t,n),n=n.sibling}function rp(e,t,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(ul,n)}catch{}switch(n.tag){case 26:Ct||ra(n,t),ma(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ct||ra(n,t);var a=dt,i=hn;ui(n.type)&&(dt=n.stateNode,hn=!1),ma(e,t,n),Lr(n.stateNode),dt=a,hn=i;break;case 5:Ct||ra(n,t);case 6:if(a=dt,i=hn,dt=null,ma(e,t,n),dt=a,hn=i,dt!==null)if(hn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(n.stateNode)}catch(s){Ye(n,t,s)}else try{dt.removeChild(n.stateNode)}catch(s){Ye(n,t,s)}break;case 18:dt!==null&&(hn?(e=dt,Ym(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Vs(e)):Ym(dt,n.stateNode));break;case 4:a=dt,i=hn,dt=n.stateNode.containerInfo,hn=!0,ma(e,t,n),dt=a,hn=i;break;case 0:case 11:case 14:case 15:li(2,n,t),Ct||li(4,n,t),ma(e,t,n);break;case 1:Ct||(ra(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&ep(n,t,a)),ma(e,t,n);break;case 21:ma(e,t,n);break;case 22:Ct=(a=Ct)||n.memoizedState!==null,ma(e,t,n),Ct=a;break;default:ma(e,t,n)}}function lp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Vs(e)}catch(n){Ye(t,t.return,n)}}}function op(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vs(e)}catch(n){Ye(t,t.return,n)}}function pS(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Dm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Dm),t;default:throw Error(A(435,e.tag))}}function ql(e,t){var n=pS(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var i=OS.bind(null,e,a);a.then(i,i)}})}function dn(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var i=n[a],s=e,r=t,l=r;e:for(;l!==null;){switch(l.tag){case 27:if(ui(l.type)){dt=l.stateNode,hn=!1;break e}break;case 5:dt=l.stateNode,hn=!1;break e;case 3:case 4:dt=l.stateNode.containerInfo,hn=!0;break e}l=l.return}if(dt===null)throw Error(A(160));rp(s,r,i),dt=null,hn=!1,s=i.alternate,s!==null&&(s.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)cp(t,e),t=t.sibling}var Wn=null;function cp(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dn(t,e),fn(e),a&4&&(li(3,e,e.return),yl(3,e),li(5,e,e.return));break;case 1:dn(t,e),fn(e),a&512&&(Ct||n===null||ra(n,n.return)),a&64&&ba&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var i=Wn;if(dn(t,e),fn(e),a&512&&(Ct||n===null||ra(n,n.return)),a&4){var s=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(a){case"title":s=i.getElementsByTagName("title")[0],(!s||s[hl]||s[Kt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=i.createElement(a),i.head.insertBefore(s,i.querySelector("head > title"))),Jt(s,a,n),s[Kt]=e,$t(s),a=s;break e;case"link":var r=Zm("link","href",i).get(a+(n.href||""));if(r){for(var l=0;l<r.length;l++)if(s=r[l],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(l,1);break t}}s=i.createElement(a),Jt(s,a,n),i.head.appendChild(s);break;case"meta":if(r=Zm("meta","content",i).get(a+(n.content||""))){for(l=0;l<r.length;l++)if(s=r[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(l,1);break t}}s=i.createElement(a),Jt(s,a,n),i.head.appendChild(s);break;default:throw Error(A(468,a))}s[Kt]=e,$t(s),a=s}e.stateNode=a}else Pm(i,e.type,e.stateNode);else e.stateNode=Jm(i,a,e.memoizedProps);else s!==a?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,a===null?Pm(i,e.type,e.stateNode):Jm(i,a,e.memoizedProps)):a===null&&e.stateNode!==null&&hu(e,e.memoizedProps,n.memoizedProps)}break;case 27:dn(t,e),fn(e),a&512&&(Ct||n===null||ra(n,n.return)),n!==null&&a&4&&hu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(dn(t,e),fn(e),a&512&&(Ct||n===null||ra(n,n.return)),e.flags&32){i=e.stateNode;try{ks(i,"")}catch(b){Ye(e,e.return,b)}}a&4&&e.stateNode!=null&&(i=e.memoizedProps,hu(e,i,n!==null?n.memoizedProps:i)),a&1024&&(gu=!0);break;case 6:if(dn(t,e),fn(e),a&4){if(e.stateNode===null)throw Error(A(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(b){Ye(e,e.return,b)}}break;case 3:if(go=null,i=Wn,Wn=Yo(t.containerInfo),dn(t,e),Wn=i,fn(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Vs(t.containerInfo)}catch(b){Ye(e,e.return,b)}gu&&(gu=!1,up(e));break;case 4:a=Wn,Wn=Yo(e.stateNode.containerInfo),dn(t,e),fn(e),Wn=a;break;case 12:dn(t,e),fn(e);break;case 31:dn(t,e),fn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ql(e,a)));break;case 13:dn(t,e),fn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(bc=Cn()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ql(e,a)));break;case 22:i=e.memoizedState!==null;var o=n!==null&&n.memoizedState!==null,c=ba,d=Ct;if(ba=c||i,Ct=d||o,dn(t,e),Ct=d,ba=c,fn(e),a&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||o||ba||Ct||_i(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){o=n=t;try{if(s=o.stateNode,i)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{l=o.stateNode;var f=o.memoizedProps.style,h=f!=null&&f.hasOwnProperty("display")?f.display:null;l.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(b){Ye(o,o.return,b)}}}else if(t.tag===6){if(n===null){o=t;try{o.stateNode.nodeValue=i?"":o.memoizedProps}catch(b){Ye(o,o.return,b)}}}else if(t.tag===18){if(n===null){o=t;try{var m=o.stateNode;i?Gm(m,!0):Gm(o.stateNode,!1)}catch(b){Ye(o,o.return,b)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,ql(e,n))));break;case 19:dn(t,e),fn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ql(e,a)));break;case 30:break;case 21:break;default:dn(t,e),fn(e)}}function fn(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(np(a)){n=a;break}a=a.return}if(n==null)throw Error(A(160));switch(n.tag){case 27:var i=n.stateNode,s=mu(e);Uo(e,s,i);break;case 5:var r=n.stateNode;n.flags&32&&(ks(r,""),n.flags&=-33);var l=mu(e);Uo(e,l,r);break;case 3:case 4:var o=n.stateNode.containerInfo,c=mu(e);wd(e,c,o);break;default:throw Error(A(161))}}catch(d){Ye(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function up(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;up(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ga(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ip(e,t.alternate,t),t=t.sibling}function _i(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:li(4,t,t.return),_i(t);break;case 1:ra(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&ep(t,t.return,n),_i(t);break;case 27:Lr(t.stateNode);case 26:case 5:ra(t,t.return),_i(t);break;case 22:t.memoizedState===null&&_i(t);break;case 30:_i(t);break;default:_i(t)}e=e.sibling}}function va(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,i=e,s=t,r=s.flags;switch(s.tag){case 0:case 11:case 15:va(i,s,n),yl(4,s);break;case 1:if(va(i,s,n),a=s,i=a.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){Ye(a,a.return,c)}if(a=s,i=a.updateQueue,i!==null){var l=a.stateNode;try{var o=i.shared.hiddenCallbacks;if(o!==null)for(i.shared.hiddenCallbacks=null,i=0;i<o.length;i++)ly(o[i],l)}catch(c){Ye(a,a.return,c)}}n&&r&64&&Wy(s),Mr(s,s.return);break;case 27:ap(s);case 26:case 5:va(i,s,n),n&&a===null&&r&4&&tp(s),Mr(s,s.return);break;case 12:va(i,s,n);break;case 31:va(i,s,n),n&&r&4&&lp(i,s);break;case 13:va(i,s,n),n&&r&4&&op(i,s);break;case 22:s.memoizedState===null&&va(i,s,n),Mr(s,s.return);break;case 30:break;default:va(i,s,n)}t=t.sibling}}function Vf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&gl(n))}function Yf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gl(e))}function Jn(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)dp(e,t,n,a),t=t.sibling}function dp(e,t,n,a){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Jn(e,t,n,a),i&2048&&yl(9,t);break;case 1:Jn(e,t,n,a);break;case 3:Jn(e,t,n,a),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gl(e)));break;case 12:if(i&2048){Jn(e,t,n,a),e=t.stateNode;try{var s=t.memoizedProps,r=s.id,l=s.onPostCommit;typeof l=="function"&&l(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(o){Ye(t,t.return,o)}}else Jn(e,t,n,a);break;case 31:Jn(e,t,n,a);break;case 13:Jn(e,t,n,a);break;case 23:break;case 22:s=t.stateNode,r=t.alternate,t.memoizedState!==null?s._visibility&2?Jn(e,t,n,a):kr(e,t):s._visibility&2?Jn(e,t,n,a):(s._visibility|=2,rs(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Vf(r,t);break;case 24:Jn(e,t,n,a),i&2048&&Yf(t.alternate,t);break;default:Jn(e,t,n,a)}}function rs(e,t,n,a,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var s=e,r=t,l=n,o=a,c=r.flags;switch(r.tag){case 0:case 11:case 15:rs(s,r,l,o,i),yl(8,r);break;case 23:break;case 22:var d=r.stateNode;r.memoizedState!==null?d._visibility&2?rs(s,r,l,o,i):kr(s,r):(d._visibility|=2,rs(s,r,l,o,i)),i&&c&2048&&Vf(r.alternate,r);break;case 24:rs(s,r,l,o,i),i&&c&2048&&Yf(r.alternate,r);break;default:rs(s,r,l,o,i)}t=t.sibling}}function kr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,i=a.flags;switch(a.tag){case 22:kr(n,a),i&2048&&Vf(a.alternate,a);break;case 24:kr(n,a),i&2048&&Yf(a.alternate,a);break;default:kr(n,a)}t=t.sibling}}var Sr=8192;function Wi(e,t,n){if(e.subtreeFlags&Sr)for(e=e.child;e!==null;)fp(e,t,n),e=e.sibling}function fp(e,t,n){switch(e.tag){case 26:Wi(e,t,n),e.flags&Sr&&e.memoizedState!==null&&ix(n,Wn,e.memoizedState,e.memoizedProps);break;case 5:Wi(e,t,n);break;case 3:case 4:var a=Wn;Wn=Yo(e.stateNode.containerInfo),Wi(e,t,n),Wn=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=Sr,Sr=16777216,Wi(e,t,n),Sr=a):Wi(e,t,n));break;default:Wi(e,t,n)}}function hp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function mr(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Ht=a,gp(a,e)}hp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)mp(e),e=e.sibling}function mp(e){switch(e.tag){case 0:case 11:case 15:mr(e),e.flags&2048&&li(9,e,e.return);break;case 3:mr(e);break;case 12:mr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ho(e)):mr(e);break;default:mr(e)}}function ho(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Ht=a,gp(a,e)}hp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:li(8,t,t.return),ho(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ho(t));break;default:ho(t)}e=e.sibling}}function gp(e,t){for(;Ht!==null;){var n=Ht;switch(n.tag){case 0:case 11:case 15:li(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:gl(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,Ht=a;else e:for(n=e;Ht!==null;){a=Ht;var i=a.sibling,s=a.return;if(sp(a),a===n){Ht=null;break e}if(i!==null){i.return=s,Ht=i;break e}Ht=s}}}var bS={getCacheForType:function(e){var t=Qt(Dt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Qt(Dt).controller.signal}},_S=typeof WeakMap=="function"?WeakMap:Map,Le=0,Ze=null,Se=null,Oe=0,Ve=0,xn=null,Xa=!1,Ps=!1,Gf=!1,Da=0,wt=0,oi=0,Di=0,If=0,An=0,Bs=0,Ur=null,mn=null,Sd=!1,bc=0,vp=0,zo=1/0,Lo=null,ei=null,zt=0,ti=null,Hs=null,Ta=0,xd=0,Ed=null,yp=null,zr=0,Td=null;function Rn(){return Le&2&&Oe!==0?Oe&-Oe:ae.T!==null?Xf():jv()}function pp(){if(An===0)if(!(Oe&536870912)||Ce){var e=Rl;Rl<<=1,!(Rl&3932160)&&(Rl=262144),An=e}else An=536870912;return e=kn.current,e!==null&&(e.flags|=32),An}function gn(e,t,n){(e===Ze&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)&&(qs(e,0),Qa(e,Oe,An,!1)),fl(e,n),(!(Le&2)||e!==Ze)&&(e===Ze&&(!(Le&2)&&(Di|=n),wt===4&&Qa(e,Oe,An,!1)),ca(e))}function bp(e,t,n){if(Le&6)throw Error(A(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||dl(e,t),i=a?xS(e,t):vu(e,t,!0),s=a;do{if(i===0){Ps&&!a&&Qa(e,t,0,!1);break}else{if(n=e.current.alternate,s&&!wS(n)){i=vu(e,t,!1),s=!1;continue}if(i===2){if(s=t,e.errorRecoveryDisabledLanes&s)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;e:{var l=e;i=Ur;var o=l.current.memoizedState.isDehydrated;if(o&&(qs(l,r).flags|=256),r=vu(l,r,!1),r!==2){if(Gf&&!o){l.errorRecoveryDisabledLanes|=s,Di|=s,i=4;break e}s=mn,mn=i,s!==null&&(mn===null?mn=s:mn.push.apply(mn,s))}i=r}if(s=!1,i!==2)continue}}if(i===1){qs(e,0),Qa(e,t,0,!0);break}e:{switch(a=e,s=i,s){case 0:case 1:throw Error(A(345));case 4:if((t&4194048)!==t)break;case 6:Qa(a,t,An,!Xa);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(A(329))}if((t&62914560)===t&&(i=bc+300-Cn(),10<i)){if(Qa(a,t,An,!Xa),oc(a,0,!0)!==0)break e;Ta=t,a.timeoutHandle=Hp(Nm.bind(null,a,n,mn,Lo,Sd,t,An,Di,Bs,Xa,s,"Throttled",-0,0),i);break e}Nm(a,n,mn,Lo,Sd,t,An,Di,Bs,Xa,s,null,-0,0)}}break}while(!0);ca(e)}function Nm(e,t,n,a,i,s,r,l,o,c,d,f,h,m){if(e.timeoutHandle=-1,f=t.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wa},fp(t,s,f);var b=(s&62914560)===s?bc-Cn():(s&4194048)===s?vp-Cn():0;if(b=sx(f,b),b!==null){Ta=s,e.cancelPendingCommit=b(Mm.bind(null,e,t,s,n,a,i,r,l,o,d,f,null,h,m)),Qa(e,s,r,!c);return}}Mm(e,t,s,n,a,i,r,l,o)}function wS(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var i=n[a],s=i.getSnapshot;i=i.value;try{if(!Mn(s(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qa(e,t,n,a){t&=~If,t&=~Di,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var i=t;0<i;){var s=31-Nn(i),r=1<<s;a[s]=-1,i&=~r}n!==0&&xv(e,n,t)}function _c(){return Le&6?!0:(pl(0),!1)}function Kf(){if(Se!==null){if(Ve===0)var e=Se.return;else e=Se,Sa=Vi=null,Nf(e),Os=null,Zr=0,e=Se;for(;e!==null;)Fy(e.alternate,e),e=e.return;Se=null}}function qs(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,$S(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Ta=0,Kf(),Ze=e,Se=n=xa(e.current,null),Oe=t,Ve=0,xn=null,Xa=!1,Ps=dl(e,t),Gf=!1,Bs=An=If=Di=oi=wt=0,mn=Ur=null,Sd=!1,t&8&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var i=31-Nn(a),s=1<<i;t|=e[i],a&=~s}return Da=t,fc(),n}function _p(e,t){de=null,ae.H=Fr,t===Zs||t===mc?(t=cm(),Ve=3):t===Ef?(t=cm(),Ve=4):Ve=t===qf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,xn=t,Se===null&&(wt=1,Mo(e,Gn(t,e.current)))}function wp(){var e=kn.current;return e===null?!0:(Oe&4194048)===Oe?Kn===null:(Oe&62914560)===Oe||Oe&536870912?e===Kn:!1}function Sp(){var e=ae.H;return ae.H=Fr,e===null?Fr:e}function xp(){var e=ae.A;return ae.A=bS,e}function Bo(){wt=4,Xa||(Oe&4194048)!==Oe&&kn.current!==null||(Ps=!0),!(oi&134217727)&&!(Di&134217727)||Ze===null||Qa(Ze,Oe,An,!1)}function vu(e,t,n){var a=Le;Le|=2;var i=Sp(),s=xp();(Ze!==e||Oe!==t)&&(Lo=null,qs(e,t)),t=!1;var r=wt;e:do try{if(Ve!==0&&Se!==null){var l=Se,o=xn;switch(Ve){case 8:Kf(),r=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(t=!0);var c=Ve;if(Ve=0,xn=null,Ss(e,l,o,c),n&&Ps){r=0;break e}break;default:c=Ve,Ve=0,xn=null,Ss(e,l,o,c)}}SS(),r=wt;break}catch(d){_p(e,d)}while(!0);return t&&e.shellSuspendCounter++,Sa=Vi=null,Le=a,ae.H=i,ae.A=s,Se===null&&(Ze=null,Oe=0,fc()),r}function SS(){for(;Se!==null;)Ep(Se)}function xS(e,t){var n=Le;Le|=2;var a=Sp(),i=xp();Ze!==e||Oe!==t?(Lo=null,zo=Cn()+500,qs(e,t)):Ps=dl(e,t);e:do try{if(Ve!==0&&Se!==null){t=Se;var s=xn;t:switch(Ve){case 1:Ve=0,xn=null,Ss(e,t,s,1);break;case 2:case 9:if(om(s)){Ve=0,xn=null,Rm(t);break}t=function(){Ve!==2&&Ve!==9||Ze!==e||(Ve=7),ca(e)},s.then(t,t);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:om(s)?(Ve=0,xn=null,Rm(t)):(Ve=0,xn=null,Ss(e,t,s,7));break;case 5:var r=null;switch(Se.tag){case 26:r=Se.memoizedState;case 5:case 27:var l=Se;if(r?Gp(r):l.stateNode.complete){Ve=0,xn=null;var o=l.sibling;if(o!==null)Se=o;else{var c=l.return;c!==null?(Se=c,wc(c)):Se=null}break t}}Ve=0,xn=null,Ss(e,t,s,5);break;case 6:Ve=0,xn=null,Ss(e,t,s,6);break;case 8:Kf(),wt=6;break e;default:throw Error(A(462))}}ES();break}catch(d){_p(e,d)}while(!0);return Sa=Vi=null,ae.H=a,ae.A=i,Le=n,Se!==null?0:(Ze=null,Oe=0,fc(),wt)}function ES(){for(;Se!==null&&!X_();)Ep(Se)}function Ep(e){var t=Py(e.alternate,e,Da);e.memoizedProps=e.pendingProps,t===null?wc(e):Se=t}function Rm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Tm(n,t,t.pendingProps,t.type,void 0,Oe);break;case 11:t=Tm(n,t,t.pendingProps,t.type.render,t.ref,Oe);break;case 5:Nf(t);default:Fy(n,t),t=Se=Fv(t,Da),t=Py(n,t,Da)}e.memoizedProps=e.pendingProps,t===null?wc(e):Se=t}function Ss(e,t,n,a){Sa=Vi=null,Nf(t),Os=null,Zr=0;var i=t.return;try{if(fS(e,i,t,n,Oe)){wt=1,Mo(e,Gn(n,e.current)),Se=null;return}}catch(s){if(i!==null)throw Se=i,s;wt=1,Mo(e,Gn(n,e.current)),Se=null;return}t.flags&32768?(Ce||a===1?e=!0:Ps||Oe&536870912?e=!1:(Xa=e=!0,(a===2||a===9||a===3||a===6)&&(a=kn.current,a!==null&&a.tag===13&&(a.flags|=16384))),Tp(t,e)):wc(t)}function wc(e){var t=e;do{if(t.flags&32768){Tp(t,Xa);return}e=t.return;var n=gS(t.alternate,t,Da);if(n!==null){Se=n;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);wt===0&&(wt=5)}function Tp(e,t){do{var n=vS(e.alternate,e);if(n!==null){n.flags&=32767,Se=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Se=e;return}Se=e=n}while(e!==null);wt=6,Se=null}function Mm(e,t,n,a,i,s,r,l,o){e.cancelPendingCommit=null;do Sc();while(zt!==0);if(Le&6)throw Error(A(327));if(t!==null){if(t===e.current)throw Error(A(177));if(s=t.lanes|t.childLanes,s|=yf,aw(e,n,s,r,l,o),e===Ze&&(Se=Ze=null,Oe=0),Hs=t,ti=e,Ta=n,xd=s,Ed=i,yp=a,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,AS(So,function(){return Dp(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,t.subtreeFlags&13878||a){a=ae.T,ae.T=null,i=Be.p,Be.p=2,r=Le,Le|=4;try{yS(e,t,n)}finally{Le=r,Be.p=i,ae.T=a}}zt=1,jp(),Op(),Ap()}}function jp(){if(zt===1){zt=0;var e=ti,t=Hs,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=ae.T,ae.T=null;var a=Be.p;Be.p=2;var i=Le;Le|=4;try{cp(t,e);var s=Cd,r=Gv(e.containerInfo),l=s.focusedElem,o=s.selectionRange;if(r!==l&&l&&l.ownerDocument&&Yv(l.ownerDocument.documentElement,l)){if(o!==null&&vf(l)){var c=o.start,d=o.end;if(d===void 0&&(d=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(d,l.value.length);else{var f=l.ownerDocument||document,h=f&&f.defaultView||window;if(h.getSelection){var m=h.getSelection(),b=l.textContent.length,_=Math.min(o.start,b),S=o.end===void 0?_:Math.min(o.end,b);!m.extend&&_>S&&(r=S,S=_,_=r);var y=tm(l,_),g=tm(l,S);if(y&&g&&(m.rangeCount!==1||m.anchorNode!==y.node||m.anchorOffset!==y.offset||m.focusNode!==g.node||m.focusOffset!==g.offset)){var v=f.createRange();v.setStart(y.node,y.offset),m.removeAllRanges(),_>S?(m.addRange(v),m.extend(g.node,g.offset)):(v.setEnd(g.node,g.offset),m.addRange(v))}}}}for(f=[],m=l;m=m.parentNode;)m.nodeType===1&&f.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<f.length;l++){var w=f[l];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}Ko=!!Ad,Cd=Ad=null}finally{Le=i,Be.p=a,ae.T=n}}e.current=t,zt=2}}function Op(){if(zt===2){zt=0;var e=ti,t=Hs,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=ae.T,ae.T=null;var a=Be.p;Be.p=2;var i=Le;Le|=4;try{ip(e,t.alternate,t)}finally{Le=i,Be.p=a,ae.T=n}}zt=3}}function Ap(){if(zt===4||zt===3){zt=0,Q_();var e=ti,t=Hs,n=Ta,a=yp;t.subtreeFlags&10256||t.flags&10256?zt=5:(zt=0,Hs=ti=null,Cp(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(ei=null),cf(n),t=t.stateNode,Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(ul,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=ae.T,i=Be.p,Be.p=2,ae.T=null;try{for(var s=e.onRecoverableError,r=0;r<a.length;r++){var l=a[r];s(l.value,{componentStack:l.stack})}}finally{ae.T=t,Be.p=i}}Ta&3&&Sc(),ca(e),i=e.pendingLanes,n&261930&&i&42?e===Td?zr++:(zr=0,Td=e):zr=0,pl(0)}}function Cp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,gl(t)))}function Sc(){return jp(),Op(),Ap(),Dp()}function Dp(){if(zt!==5)return!1;var e=ti,t=xd;xd=0;var n=cf(Ta),a=ae.T,i=Be.p;try{Be.p=32>n?32:n,ae.T=null,n=Ed,Ed=null;var s=ti,r=Ta;if(zt=0,Hs=ti=null,Ta=0,Le&6)throw Error(A(331));var l=Le;if(Le|=4,mp(s.current),dp(s,s.current,r,n),Le=l,pl(0,!1),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(ul,s)}catch{}return!0}finally{Be.p=i,ae.T=a,Cp(e,t)}}function km(e,t,n){t=Gn(n,t),t=pd(e.stateNode,t,2),e=Wa(e,t,2),e!==null&&(fl(e,2),ca(e))}function Ye(e,t,n){if(e.tag===3)km(e,e,n);else for(;t!==null;){if(t.tag===3){km(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ei===null||!ei.has(a))){e=Gn(n,e),n=Iy(2),a=Wa(t,n,2),a!==null&&(Ky(n,a,t,e),fl(a,2),ca(a));break}}t=t.return}}function yu(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new _S;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(n)||(Gf=!0,i.add(n),e=TS.bind(null,e,t,n),t.then(e,e))}function TS(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ze===e&&(Oe&n)===n&&(wt===4||wt===3&&(Oe&62914560)===Oe&&300>Cn()-bc?!(Le&2)&&qs(e,0):If|=n,Bs===Oe&&(Bs=0)),ca(e)}function Np(e,t){t===0&&(t=Sv()),e=$i(e,t),e!==null&&(fl(e,t),ca(e))}function jS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Np(e,n)}function OS(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(A(314))}a!==null&&a.delete(t),Np(e,n)}function AS(e,t){return lf(e,t)}var Ho=null,ls=null,jd=!1,qo=!1,pu=!1,Ja=0;function ca(e){e!==ls&&e.next===null&&(ls===null?Ho=ls=e:ls=ls.next=e),qo=!0,jd||(jd=!0,DS())}function pl(e,t){if(!pu&&qo){pu=!0;do for(var n=!1,a=Ho;a!==null;){if(e!==0){var i=a.pendingLanes;if(i===0)var s=0;else{var r=a.suspendedLanes,l=a.pingedLanes;s=(1<<31-Nn(42|e)+1)-1,s&=i&~(r&~l),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Um(a,s))}else s=Oe,s=oc(a,a===Ze?s:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),!(s&3)||dl(a,s)||(n=!0,Um(a,s));a=a.next}while(n);pu=!1}}function CS(){Rp()}function Rp(){qo=jd=!1;var e=0;Ja!==0&&qS()&&(e=Ja);for(var t=Cn(),n=null,a=Ho;a!==null;){var i=a.next,s=Mp(a,t);s===0?(a.next=null,n===null?Ho=i:n.next=i,i===null&&(ls=n)):(n=a,(e!==0||s&3)&&(qo=!0)),a=i}zt!==0&&zt!==5||pl(e),Ja!==0&&(Ja=0)}function Mp(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes&-62914561;0<s;){var r=31-Nn(s),l=1<<r,o=i[r];o===-1?(!(l&n)||l&a)&&(i[r]=nw(l,t)):o<=t&&(e.expiredLanes|=l),s&=~l}if(t=Ze,n=Oe,n=oc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Kc(a),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||dl(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&Kc(a),cf(n)){case 2:case 8:n=_v;break;case 32:n=So;break;case 268435456:n=wv;break;default:n=So}return a=kp.bind(null,e),n=lf(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&Kc(a),e.callbackPriority=2,e.callbackNode=null,2}function kp(e,t){if(zt!==0&&zt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var a=Oe;return a=oc(e,e===Ze?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(bp(e,a,t),Mp(e,Cn()),e.callbackNode!=null&&e.callbackNode===n?kp.bind(null,e):null)}function Um(e,t){if(Sc())return null;bp(e,t,!0)}function DS(){VS(function(){Le&6?lf(bv,CS):Rp()})}function Xf(){if(Ja===0){var e=Us;e===0&&(e=Nl,Nl<<=1,!(Nl&261888)&&(Nl=256)),Ja=e}return Ja}function zm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ao(""+e)}function Lm(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function NS(e,t,n,a,i){if(t==="submit"&&n&&n.stateNode===i){var s=zm((i[vn]||null).action),r=a.submitter;r&&(t=(t=r[vn]||null)?zm(t.formAction):r.getAttribute("formAction"),t!==null&&(s=t,r=null));var l=new cc("action","action",null,a,i);e.push({event:l,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Ja!==0){var o=r?Lm(i,r):new FormData(i);vd(n,{pending:!0,data:o,method:i.method,action:s},null,o)}}else typeof s=="function"&&(l.preventDefault(),o=r?Lm(i,r):new FormData(i),vd(n,{pending:!0,data:o,method:i.method,action:s},s,o))},currentTarget:i}]})}}for(var bu=0;bu<id.length;bu++){var _u=id[bu],RS=_u.toLowerCase(),MS=_u[0].toUpperCase()+_u.slice(1);aa(RS,"on"+MS)}aa(Kv,"onAnimationEnd");aa(Xv,"onAnimationIteration");aa(Qv,"onAnimationStart");aa("dblclick","onDoubleClick");aa("focusin","onFocus");aa("focusout","onBlur");aa(Jw,"onTransitionRun");aa(Zw,"onTransitionStart");aa(Pw,"onTransitionCancel");aa(Jv,"onTransitionEnd");Ms("onMouseEnter",["mouseout","mouseover"]);Ms("onMouseLeave",["mouseout","mouseover"]);Ms("onPointerEnter",["pointerout","pointerover"]);Ms("onPointerLeave",["pointerout","pointerover"]);Bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wr));function Up(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var s=void 0;if(t)for(var r=a.length-1;0<=r;r--){var l=a[r],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==s&&i.isPropagationStopped())break e;s=l,i.currentTarget=c;try{s(i)}catch(d){Eo(d)}i.currentTarget=null,s=o}else for(r=0;r<a.length;r++){if(l=a[r],o=l.instance,c=l.currentTarget,l=l.listener,o!==s&&i.isPropagationStopped())break e;s=l,i.currentTarget=c;try{s(i)}catch(d){Eo(d)}i.currentTarget=null,s=o}}}}function we(e,t){var n=t[Zu];n===void 0&&(n=t[Zu]=new Set);var a=e+"__bubble";n.has(a)||(zp(t,e,2,!1),n.add(a))}function wu(e,t,n){var a=0;t&&(a|=4),zp(n,e,a,t)}var $l="_reactListening"+Math.random().toString(36).slice(2);function Qf(e){if(!e[$l]){e[$l]=!0,Ov.forEach(function(n){n!=="selectionchange"&&(kS.has(n)||wu(n,!1,e),wu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$l]||(t[$l]=!0,wu("selectionchange",!1,t))}}function zp(e,t,n,a){switch(Jp(t)){case 2:var i=ox;break;case 8:i=cx;break;default:i=Ff}n=i.bind(null,t,n,e),i=void 0,!td||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Su(e,t,n,a,i){var s=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var r=a.tag;if(r===3||r===4){var l=a.stateNode.containerInfo;if(l===i)break;if(r===4)for(r=a.return;r!==null;){var o=r.tag;if((o===3||o===4)&&r.stateNode.containerInfo===i)return;r=r.return}for(;l!==null;){if(r=hs(l),r===null)return;if(o=r.tag,o===5||o===6||o===26||o===27){a=s=r;continue e}l=l.parentNode}}a=a.return}Uv(function(){var c=s,d=ff(n),f=[];e:{var h=Zv.get(e);if(h!==void 0){var m=cc,b=e;switch(e){case"keypress":if(so(n)===0)break e;case"keydown":case"keyup":m=Ow;break;case"focusin":b="focus",m=Pc;break;case"focusout":b="blur",m=Pc;break;case"beforeblur":case"afterblur":m=Pc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=gw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Dw;break;case Kv:case Xv:case Qv:m=pw;break;case Jv:m=Rw;break;case"scroll":case"scrollend":m=hw;break;case"wheel":m=kw;break;case"copy":case"cut":case"paste":m=_w;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Xh;break;case"toggle":case"beforetoggle":m=zw}var _=(t&4)!==0,S=!_&&(e==="scroll"||e==="scrollend"),y=_?h!==null?h+"Capture":null:h;_=[];for(var g=c,v;g!==null;){var w=g;if(v=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||v===null||y===null||(w=Ir(g,y),w!=null&&_.push(el(g,w,v))),S)break;g=g.return}0<_.length&&(h=new m(h,b,null,n,d),f.push({event:h,listeners:_}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==ed&&(b=n.relatedTarget||n.fromElement)&&(hs(b)||b[Xs]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(b=n.relatedTarget||n.toElement,m=c,b=b?hs(b):null,b!==null&&(S=cl(b),_=b.tag,b!==S||_!==5&&_!==27&&_!==6)&&(b=null)):(m=null,b=c),m!==b)){if(_=Ih,w="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(_=Xh,w="onPointerLeave",y="onPointerEnter",g="pointer"),S=m==null?h:_r(m),v=b==null?h:_r(b),h=new _(w,g+"leave",m,n,d),h.target=S,h.relatedTarget=v,w=null,hs(d)===c&&(_=new _(y,g+"enter",b,n,d),_.target=v,_.relatedTarget=S,w=_),S=w,m&&b)t:{for(_=US,y=m,g=b,v=0,w=y;w;w=_(w))v++;w=0;for(var x=g;x;x=_(x))w++;for(;0<v-w;)y=_(y),v--;for(;0<w-v;)g=_(g),w--;for(;v--;){if(y===g||g!==null&&y===g.alternate){_=y;break t}y=_(y),g=_(g)}_=null}else _=null;m!==null&&Bm(f,h,m,_,!1),b!==null&&S!==null&&Bm(f,S,b,_,!0)}}e:{if(h=c?_r(c):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=Ph;else if(Zh(h))if($v)j=Kw;else{j=Gw;var T=Yw}else m=h.nodeName,!m||m.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?c&&df(c.elementType)&&(j=Ph):j=Iw;if(j&&(j=j(e,c))){qv(f,j,n,d);break e}T&&T(e,h,c),e==="focusout"&&c&&h.type==="number"&&c.memoizedProps.value!=null&&Wu(h,"number",h.value)}switch(T=c?_r(c):window,e){case"focusin":(Zh(T)||T.contentEditable==="true")&&(vs=T,nd=c,Or=null);break;case"focusout":Or=nd=vs=null;break;case"mousedown":ad=!0;break;case"contextmenu":case"mouseup":case"dragend":ad=!1,nm(f,n,d);break;case"selectionchange":if(Qw)break;case"keydown":case"keyup":nm(f,n,d)}var O;if(gf)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else gs?Bv(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Lv&&n.locale!=="ko"&&(gs||C!=="onCompositionStart"?C==="onCompositionEnd"&&gs&&(O=zv()):(Ka=d,hf="value"in Ka?Ka.value:Ka.textContent,gs=!0)),T=$o(c,C),0<T.length&&(C=new Kh(C,e,null,n,d),f.push({event:C,listeners:T}),O?C.data=O:(O=Hv(n),O!==null&&(C.data=O)))),(O=Bw?Hw(e,n):qw(e,n))&&(C=$o(c,"onBeforeInput"),0<C.length&&(T=new Kh("onBeforeInput","beforeinput",null,n,d),f.push({event:T,listeners:C}),T.data=O)),NS(f,e,c,n,d)}Up(f,t)})}function el(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $o(e,t){for(var n=t+"Capture",a=[];e!==null;){var i=e,s=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||s===null||(i=Ir(e,n),i!=null&&a.unshift(el(e,i,s)),i=Ir(e,t),i!=null&&a.push(el(e,i,s))),e.tag===3)return a;e=e.return}return[]}function US(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Bm(e,t,n,a,i){for(var s=t._reactName,r=[];n!==null&&n!==a;){var l=n,o=l.alternate,c=l.stateNode;if(l=l.tag,o!==null&&o===a)break;l!==5&&l!==26&&l!==27||c===null||(o=c,i?(c=Ir(n,s),c!=null&&r.unshift(el(n,c,o))):i||(c=Ir(n,s),c!=null&&r.push(el(n,c,o)))),n=n.return}r.length!==0&&e.push({event:t,listeners:r})}var zS=/\r\n?/g,LS=/\u0000|\uFFFD/g;function Hm(e){return(typeof e=="string"?e:""+e).replace(zS,`
`).replace(LS,"")}function Lp(e,t){return t=Hm(t),Hm(e)===t}function Ie(e,t,n,a,i,s){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||ks(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&ks(e,""+a);break;case"className":kl(e,"class",a);break;case"tabIndex":kl(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":kl(e,n,a);break;case"style":kv(e,a,s);break;case"data":if(t!=="object"){kl(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=ao(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(t!=="input"&&Ie(e,t,"name",i.name,i,null),Ie(e,t,"formEncType",i.formEncType,i,null),Ie(e,t,"formMethod",i.formMethod,i,null),Ie(e,t,"formTarget",i.formTarget,i,null)):(Ie(e,t,"encType",i.encType,i,null),Ie(e,t,"method",i.method,i,null),Ie(e,t,"target",i.target,i,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=ao(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=wa);break;case"onScroll":a!=null&&we("scroll",e);break;case"onScrollEnd":a!=null&&we("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(A(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(A(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=ao(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":we("beforetoggle",e),we("toggle",e),no(e,"popover",a);break;case"xlinkActuate":fa(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":fa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":fa(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":fa(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":fa(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":fa(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":fa(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":fa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":fa(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":no(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=dw.get(n)||n,no(e,n,a))}}function Od(e,t,n,a,i,s){switch(n){case"style":kv(e,a,s);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(A(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(A(60));e.innerHTML=n}}break;case"children":typeof a=="string"?ks(e,a):(typeof a=="number"||typeof a=="bigint")&&ks(e,""+a);break;case"onScroll":a!=null&&we("scroll",e);break;case"onScrollEnd":a!=null&&we("scrollend",e);break;case"onClick":a!=null&&(e.onclick=wa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Av.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),s=e[vn]||null,s=s!=null?s[n]:null,typeof s=="function"&&e.removeEventListener(t,s,i),typeof a=="function")){typeof s!="function"&&s!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,i);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):no(e,n,a)}}}function Jt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",e),we("load",e);var a=!1,i=!1,s;for(s in n)if(n.hasOwnProperty(s)){var r=n[s];if(r!=null)switch(s){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(A(137,t));default:Ie(e,t,s,r,n,null)}}i&&Ie(e,t,"srcSet",n.srcSet,n,null),a&&Ie(e,t,"src",n.src,n,null);return;case"input":we("invalid",e);var l=s=r=i=null,o=null,c=null;for(a in n)if(n.hasOwnProperty(a)){var d=n[a];if(d!=null)switch(a){case"name":i=d;break;case"type":r=d;break;case"checked":o=d;break;case"defaultChecked":c=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(A(137,t));break;default:Ie(e,t,a,d,n,null)}}Nv(e,s,l,o,c,r,i,!1);return;case"select":we("invalid",e),a=r=s=null;for(i in n)if(n.hasOwnProperty(i)&&(l=n[i],l!=null))switch(i){case"value":s=l;break;case"defaultValue":r=l;break;case"multiple":a=l;default:Ie(e,t,i,l,n,null)}t=s,n=r,e.multiple=!!a,t!=null?Es(e,!!a,t,!1):n!=null&&Es(e,!!a,n,!0);return;case"textarea":we("invalid",e),s=i=a=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":a=l;break;case"defaultValue":i=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(A(91));break;default:Ie(e,t,r,l,n,null)}Mv(e,a,i,s);return;case"option":for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Ie(e,t,o,a,n,null)}return;case"dialog":we("beforetoggle",e),we("toggle",e),we("cancel",e),we("close",e);break;case"iframe":case"object":we("load",e);break;case"video":case"audio":for(a=0;a<Wr.length;a++)we(Wr[a],e);break;case"image":we("error",e),we("load",e);break;case"details":we("toggle",e);break;case"embed":case"source":case"link":we("error",e),we("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(a=n[c],a!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(A(137,t));default:Ie(e,t,c,a,n,null)}return;default:if(df(t)){for(d in n)n.hasOwnProperty(d)&&(a=n[d],a!==void 0&&Od(e,t,d,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(a=n[l],a!=null&&Ie(e,t,l,a,n,null))}function BS(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,r=null,l=null,o=null,c=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":o=f;default:a.hasOwnProperty(m)||Ie(e,t,m,null,a,f)}}for(var h in a){var m=a[h];if(f=n[h],a.hasOwnProperty(h)&&(m!=null||f!=null))switch(h){case"type":s=m;break;case"name":i=m;break;case"checked":c=m;break;case"defaultChecked":d=m;break;case"value":r=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(A(137,t));break;default:m!==f&&Ie(e,t,h,m,a,f)}}Fu(e,r,l,o,c,d,s,i);return;case"select":m=r=l=h=null;for(s in n)if(o=n[s],n.hasOwnProperty(s)&&o!=null)switch(s){case"value":break;case"multiple":m=o;default:a.hasOwnProperty(s)||Ie(e,t,s,null,a,o)}for(i in a)if(s=a[i],o=n[i],a.hasOwnProperty(i)&&(s!=null||o!=null))switch(i){case"value":h=s;break;case"defaultValue":l=s;break;case"multiple":r=s;default:s!==o&&Ie(e,t,i,s,a,o)}t=l,n=r,a=m,h!=null?Es(e,!!n,h,!1):!!a!=!!n&&(t!=null?Es(e,!!n,t,!0):Es(e,!!n,n?[]:"",!1));return;case"textarea":m=h=null;for(l in n)if(i=n[l],n.hasOwnProperty(l)&&i!=null&&!a.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Ie(e,t,l,null,a,i)}for(r in a)if(i=a[r],s=n[r],a.hasOwnProperty(r)&&(i!=null||s!=null))switch(r){case"value":h=i;break;case"defaultValue":m=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(A(91));break;default:i!==s&&Ie(e,t,r,i,a,s)}Rv(e,h,m);return;case"option":for(var b in n)if(h=n[b],n.hasOwnProperty(b)&&h!=null&&!a.hasOwnProperty(b))switch(b){case"selected":e.selected=!1;break;default:Ie(e,t,b,null,a,h)}for(o in a)if(h=a[o],m=n[o],a.hasOwnProperty(o)&&h!==m&&(h!=null||m!=null))switch(o){case"selected":e.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ie(e,t,o,h,a,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _ in n)h=n[_],n.hasOwnProperty(_)&&h!=null&&!a.hasOwnProperty(_)&&Ie(e,t,_,null,a,h);for(c in a)if(h=a[c],m=n[c],a.hasOwnProperty(c)&&h!==m&&(h!=null||m!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(A(137,t));break;default:Ie(e,t,c,h,a,m)}return;default:if(df(t)){for(var S in n)h=n[S],n.hasOwnProperty(S)&&h!==void 0&&!a.hasOwnProperty(S)&&Od(e,t,S,void 0,a,h);for(d in a)h=a[d],m=n[d],!a.hasOwnProperty(d)||h===m||h===void 0&&m===void 0||Od(e,t,d,h,a,m);return}}for(var y in n)h=n[y],n.hasOwnProperty(y)&&h!=null&&!a.hasOwnProperty(y)&&Ie(e,t,y,null,a,h);for(f in a)h=a[f],m=n[f],!a.hasOwnProperty(f)||h===m||h==null&&m==null||Ie(e,t,f,h,a,m)}function qm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var i=n[a],s=i.transferSize,r=i.initiatorType,l=i.duration;if(s&&l&&qm(r)){for(r=0,l=i.responseEnd,a+=1;a<n.length;a++){var o=n[a],c=o.startTime;if(c>l)break;var d=o.transferSize,f=o.initiatorType;d&&qm(f)&&(o=o.responseEnd,r+=d*(o<l?1:(l-c)/(o-c)))}if(--a,t+=8*(s+r)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ad=null,Cd=null;function Vo(e){return e.nodeType===9?e:e.ownerDocument}function $m(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Dd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xu=null;function qS(){var e=window.event;return e&&e.type==="popstate"?e===xu?!1:(xu=e,!0):(xu=null,!1)}var Hp=typeof setTimeout=="function"?setTimeout:void 0,$S=typeof clearTimeout=="function"?clearTimeout:void 0,Vm=typeof Promise=="function"?Promise:void 0,VS=typeof queueMicrotask=="function"?queueMicrotask:typeof Vm<"u"?function(e){return Vm.resolve(null).then(e).catch(YS)}:Hp;function YS(e){setTimeout(function(){throw e})}function ui(e){return e==="head"}function Ym(e,t){var n=t,a=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(i),Vs(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")Lr(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Lr(n);for(var s=n.firstChild;s;){var r=s.nextSibling,l=s.nodeName;s[hl]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=r}}else n==="body"&&Lr(e.ownerDocument.body);n=i}while(n);Vs(t)}function Gm(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function Nd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Nd(n),uf(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function GS(e,t,n,a){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[hl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(s=e.getAttribute("rel"),s==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(s=e.getAttribute("src"),(s!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var s=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===s)return e}else return e;if(e=Xn(e.nextSibling),e===null)break}return null}function IS(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Xn(e.nextSibling),e===null))return null;return e}function qp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Xn(e.nextSibling),e===null))return null;return e}function Rd(e){return e.data==="$?"||e.data==="$~"}function Md(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function KS(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var kd=null;function Im(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Xn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Km(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function $p(e,t,n){switch(t=Vo(n),e){case"html":if(e=t.documentElement,!e)throw Error(A(452));return e;case"head":if(e=t.head,!e)throw Error(A(453));return e;case"body":if(e=t.body,!e)throw Error(A(454));return e;default:throw Error(A(451))}}function Lr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);uf(e)}var Qn=new Map,Xm=new Set;function Yo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Na=Be.d;Be.d={f:XS,r:QS,D:JS,C:ZS,L:PS,m:FS,X:ex,S:WS,M:tx};function XS(){var e=Na.f(),t=_c();return e||t}function QS(e){var t=Qs(e);t!==null&&t.tag===5&&t.type==="form"?ky(t):Na.r(e)}var Fs=typeof document>"u"?null:document;function Vp(e,t,n){var a=Fs;if(a&&typeof t=="string"&&t){var i=Yn(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),Xm.has(i)||(Xm.add(i),e={rel:e,crossOrigin:n,href:t},a.querySelector(i)===null&&(t=a.createElement("link"),Jt(t,"link",e),$t(t),a.head.appendChild(t)))}}function JS(e){Na.D(e),Vp("dns-prefetch",e,null)}function ZS(e,t){Na.C(e,t),Vp("preconnect",e,t)}function PS(e,t,n){Na.L(e,t,n);var a=Fs;if(a&&e&&t){var i='link[rel="preload"][as="'+Yn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+Yn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+Yn(n.imageSizes)+'"]')):i+='[href="'+Yn(e)+'"]';var s=i;switch(t){case"style":s=$s(e);break;case"script":s=Ws(e)}Qn.has(s)||(e=lt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Qn.set(s,e),a.querySelector(i)!==null||t==="style"&&a.querySelector(bl(s))||t==="script"&&a.querySelector(_l(s))||(t=a.createElement("link"),Jt(t,"link",e),$t(t),a.head.appendChild(t)))}}function FS(e,t){Na.m(e,t);var n=Fs;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+Yn(a)+'"][href="'+Yn(e)+'"]',s=i;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Ws(e)}if(!Qn.has(s)&&(e=lt({rel:"modulepreload",href:e},t),Qn.set(s,e),n.querySelector(i)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(_l(s)))return}a=n.createElement("link"),Jt(a,"link",e),$t(a),n.head.appendChild(a)}}}function WS(e,t,n){Na.S(e,t,n);var a=Fs;if(a&&e){var i=xs(a).hoistableStyles,s=$s(e);t=t||"default";var r=i.get(s);if(!r){var l={loading:0,preload:null};if(r=a.querySelector(bl(s)))l.loading=5;else{e=lt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Qn.get(s))&&Jf(e,n);var o=r=a.createElement("link");$t(o),Jt(o,"link",e),o._p=new Promise(function(c,d){o.onload=c,o.onerror=d}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,mo(r,t,a)}r={type:"stylesheet",instance:r,count:1,state:l},i.set(s,r)}}}function ex(e,t){Na.X(e,t);var n=Fs;if(n&&e){var a=xs(n).hoistableScripts,i=Ws(e),s=a.get(i);s||(s=n.querySelector(_l(i)),s||(e=lt({src:e,async:!0},t),(t=Qn.get(i))&&Zf(e,t),s=n.createElement("script"),$t(s),Jt(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},a.set(i,s))}}function tx(e,t){Na.M(e,t);var n=Fs;if(n&&e){var a=xs(n).hoistableScripts,i=Ws(e),s=a.get(i);s||(s=n.querySelector(_l(i)),s||(e=lt({src:e,async:!0,type:"module"},t),(t=Qn.get(i))&&Zf(e,t),s=n.createElement("script"),$t(s),Jt(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},a.set(i,s))}}function Qm(e,t,n,a){var i=(i=Za.current)?Yo(i):null;if(!i)throw Error(A(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=$s(n.href),n=xs(i).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=$s(n.href);var s=xs(i).hoistableStyles,r=s.get(e);if(r||(i=i.ownerDocument||i,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(e,r),(s=i.querySelector(bl(e)))&&!s._p&&(r.instance=s,r.state.loading=5),Qn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Qn.set(e,n),s||nx(i,e,n,r.state))),t&&a===null)throw Error(A(528,""));return r}if(t&&a!==null)throw Error(A(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ws(n),n=xs(i).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(A(444,e))}}function $s(e){return'href="'+Yn(e)+'"'}function bl(e){return'link[rel="stylesheet"]['+e+"]"}function Yp(e){return lt({},e,{"data-precedence":e.precedence,precedence:null})}function nx(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Jt(t,"link",n),$t(t),e.head.appendChild(t))}function Ws(e){return'[src="'+Yn(e)+'"]'}function _l(e){return"script[async]"+e}function Jm(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Yn(n.href)+'"]');if(a)return t.instance=a,$t(a),a;var i=lt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),$t(a),Jt(a,"style",i),mo(a,n.precedence,e),t.instance=a;case"stylesheet":i=$s(n.href);var s=e.querySelector(bl(i));if(s)return t.state.loading|=4,t.instance=s,$t(s),s;a=Yp(n),(i=Qn.get(i))&&Jf(a,i),s=(e.ownerDocument||e).createElement("link"),$t(s);var r=s;return r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),Jt(s,"link",a),t.state.loading|=4,mo(s,n.precedence,e),t.instance=s;case"script":return s=Ws(n.src),(i=e.querySelector(_l(s)))?(t.instance=i,$t(i),i):(a=n,(i=Qn.get(s))&&(a=lt({},n),Zf(a,i)),e=e.ownerDocument||e,i=e.createElement("script"),$t(i),Jt(i,"link",a),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(A(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(a=t.instance,t.state.loading|=4,mo(a,n.precedence,e));return t.instance}function mo(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=a.length?a[a.length-1]:null,s=i,r=0;r<a.length;r++){var l=a[r];if(l.dataset.precedence===t)s=l;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Jf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Zf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var go=null;function Zm(e,t,n){if(go===null){var a=new Map,i=go=new Map;i.set(n,a)}else i=go,a=i.get(n),a||(a=new Map,i.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[hl]||s[Kt]||e==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var r=s.getAttribute(t)||"";r=e+r;var l=a.get(r);l?l.push(s):a.set(r,[s])}}return a}function Pm(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function ax(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Gp(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function ix(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=$s(a.href),s=t.querySelector(bl(i));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Go.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,$t(s);return}s=t.ownerDocument||t,a=Yp(a),(i=Qn.get(i))&&Jf(a,i),s=s.createElement("link"),$t(s);var r=s;r._p=new Promise(function(l,o){r.onload=l,r.onerror=o}),Jt(s,"link",a),n.instance=s}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Go.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Eu=0;function sx(e,t){return e.stylesheets&&e.count===0&&vo(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&vo(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4+t);0<e.imgBytes&&Eu===0&&(Eu=62500*HS());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&vo(e,e.stylesheets),e.unsuspend)){var s=e.unsuspend;e.unsuspend=null,s()}},(e.imgBytes>Eu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(i)}}:null}function Go(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Io=null;function vo(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Io=new Map,t.forEach(rx,e),Io=null,Go.call(e))}function rx(e,t){if(!(t.state.loading&4)){var n=Io.get(e);if(n)var a=n.get(null);else{n=new Map,Io.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var r=i[s];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),a=r)}a&&n.set(null,a)}i=t.instance,r=i.getAttribute("data-precedence"),s=n.get(r)||a,s===a&&n.set(null,i),n.set(r,i),this.count++,a=Go.bind(this),i.addEventListener("load",a),i.addEventListener("error",a),s?s.parentNode.insertBefore(i,s.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var tl={$$typeof:_a,Provider:null,Consumer:null,_currentValue:ji,_currentValue2:ji,_threadCount:0};function lx(e,t,n,a,i,s,r,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xc(0),this.hiddenUpdates=Xc(null),this.identifierPrefix=a,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Ip(e,t,n,a,i,s,r,l,o,c,d,f){return e=new lx(e,t,n,r,o,c,d,f,l),t=1,s===!0&&(t|=24),s=Tn(3,null,null,t),e.current=s,s.stateNode=e,t=Sf(),t.refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:a,isDehydrated:n,cache:t},Tf(s),e}function Kp(e){return e?(e=bs,e):bs}function Xp(e,t,n,a,i,s){i=Kp(i),a.context===null?a.context=i:a.pendingContext=i,a=Fa(t),a.payload={element:n},s=s===void 0?null:s,s!==null&&(a.callback=s),n=Wa(e,a,t),n!==null&&(gn(n,e,t),Cr(n,e,t))}function Fm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Pf(e,t){Fm(e,t),(e=e.alternate)&&Fm(e,t)}function Qp(e){if(e.tag===13||e.tag===31){var t=$i(e,67108864);t!==null&&gn(t,e,67108864),Pf(e,67108864)}}function Wm(e){if(e.tag===13||e.tag===31){var t=Rn();t=of(t);var n=$i(e,t);n!==null&&gn(n,e,t),Pf(e,t)}}var Ko=!0;function ox(e,t,n,a){var i=ae.T;ae.T=null;var s=Be.p;try{Be.p=2,Ff(e,t,n,a)}finally{Be.p=s,ae.T=i}}function cx(e,t,n,a){var i=ae.T;ae.T=null;var s=Be.p;try{Be.p=8,Ff(e,t,n,a)}finally{Be.p=s,ae.T=i}}function Ff(e,t,n,a){if(Ko){var i=Ud(a);if(i===null)Su(e,t,a,Xo,n),eg(e,a);else if(dx(i,e,t,n,a))a.stopPropagation();else if(eg(e,a),t&4&&-1<ux.indexOf(e)){for(;i!==null;){var s=Qs(i);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var r=pi(s.pendingLanes);if(r!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;r;){var o=1<<31-Nn(r);l.entanglements[1]|=o,r&=~o}ca(s),!(Le&6)&&(zo=Cn()+500,pl(0))}}break;case 31:case 13:l=$i(s,2),l!==null&&gn(l,s,2),_c(),Pf(s,2)}if(s=Ud(a),s===null&&Su(e,t,a,Xo,n),s===i)break;i=s}i!==null&&a.stopPropagation()}else Su(e,t,a,null,n)}}function Ud(e){return e=ff(e),Wf(e)}var Xo=null;function Wf(e){if(Xo=null,e=hs(e),e!==null){var t=cl(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=mv(t),e!==null)return e;e=null}else if(n===31){if(e=gv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xo=e,null}function Jp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(J_()){case bv:return 2;case _v:return 8;case So:case Z_:return 32;case wv:return 268435456;default:return 32}default:return 32}}var zd=!1,ni=null,ai=null,ii=null,nl=new Map,al=new Map,Va=[],ux="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function eg(e,t){switch(e){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":nl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":al.delete(t.pointerId)}}function gr(e,t,n,a,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Qs(t),t!==null&&Qp(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function dx(e,t,n,a,i){switch(t){case"focusin":return ni=gr(ni,e,t,n,a,i),!0;case"dragenter":return ai=gr(ai,e,t,n,a,i),!0;case"mouseover":return ii=gr(ii,e,t,n,a,i),!0;case"pointerover":var s=i.pointerId;return nl.set(s,gr(nl.get(s)||null,e,t,n,a,i)),!0;case"gotpointercapture":return s=i.pointerId,al.set(s,gr(al.get(s)||null,e,t,n,a,i)),!0}return!1}function Zp(e){var t=hs(e.target);if(t!==null){var n=cl(t);if(n!==null){if(t=n.tag,t===13){if(t=mv(n),t!==null){e.blockedOn=t,Bh(e.priority,function(){Wm(n)});return}}else if(t===31){if(t=gv(n),t!==null){e.blockedOn=t,Bh(e.priority,function(){Wm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ud(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);ed=a,n.target.dispatchEvent(a),ed=null}else return t=Qs(n),t!==null&&Qp(t),e.blockedOn=n,!1;t.shift()}return!0}function tg(e,t,n){yo(e)&&n.delete(t)}function fx(){zd=!1,ni!==null&&yo(ni)&&(ni=null),ai!==null&&yo(ai)&&(ai=null),ii!==null&&yo(ii)&&(ii=null),nl.forEach(tg),al.forEach(tg)}function Vl(e,t){e.blockedOn===t&&(e.blockedOn=null,zd||(zd=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,fx)))}var Yl=null;function ng(e){Yl!==e&&(Yl=e,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,function(){Yl===e&&(Yl=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],i=e[t+2];if(typeof a!="function"){if(Wf(a||n)===null)continue;break}var s=Qs(n);s!==null&&(e.splice(t,3),t-=3,vd(s,{pending:!0,data:i,method:n.method,action:a},a,i))}}))}function Vs(e){function t(o){return Vl(o,e)}ni!==null&&Vl(ni,e),ai!==null&&Vl(ai,e),ii!==null&&Vl(ii,e),nl.forEach(t),al.forEach(t);for(var n=0;n<Va.length;n++){var a=Va[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Va.length&&(n=Va[0],n.blockedOn===null);)Zp(n),n.blockedOn===null&&Va.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var i=n[a],s=n[a+1],r=i[vn]||null;if(typeof s=="function")r||ng(n);else if(r){var l=null;if(s&&s.hasAttribute("formAction")){if(i=s,r=s[vn]||null)l=r.formAction;else if(Wf(i)!==null)continue}else l=r.action;typeof l=="function"?n[a+1]=l:(n.splice(a,3),a-=3),ng(n)}}}function Pp(){function e(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(r){return i=r})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function eh(e){this._internalRoot=e}xc.prototype.render=eh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));var n=t.current,a=Rn();Xp(n,a,e,t,null,null)};xc.prototype.unmount=eh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xp(e.current,2,null,e,null,null),_c(),t[Xs]=null}};function xc(e){this._internalRoot=e}xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=jv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Va.length&&t!==0&&t<Va[n].priority;n++);Va.splice(n,0,e),n===0&&Zp(e)}};var ag=fv.version;if(ag!=="19.2.0")throw Error(A(527,ag,"19.2.0"));Be.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=V_(t),e=e!==null?vv(e):null,e=e===null?null:e.stateNode,e};var hx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{ul=Gl.inject(hx),Dn=Gl}catch{}}rc.createRoot=function(e,t){if(!hv(e))throw Error(A(299));var n=!1,a="",i=Vy,s=Yy,r=Gy;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=Ip(e,1,!1,null,null,n,a,null,i,s,r,Pp),e[Xs]=t.current,Qf(e),new eh(t)};rc.hydrateRoot=function(e,t,n){if(!hv(e))throw Error(A(299));var a=!1,i="",s=Vy,r=Yy,l=Gy,o=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(o=n.formState)),t=Ip(e,1,!0,t,n??null,a,i,o,s,r,l,Pp),t.context=Kp(null),n=t.current,a=Rn(),a=of(a),i=Fa(a),i.callback=null,Wa(n,i,a),n=a,t.current.lanes=n,fl(t,n),ca(t),e[Xs]=t.current,Qf(e),new xc(t)};rc.version="19.2.0";function Fp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fp)}catch(e){console.error(e)}}Fp(),sv.exports=rc;var mx=sv.exports,Ld=function(e,t){return Ld=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},Ld(e,t)};function Wp(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ld(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Qo=function(){return Qo=Object.assign||function(t){for(var n,a=1,i=arguments.length;a<i;a++){n=arguments[a];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Qo.apply(this,arguments)};function er(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]]);return n}function e0(e,t,n,a){var i=arguments.length,s=i<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,n):a,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function t0(e,t){return function(n,a){t(n,a,e)}}function n0(e,t,n,a,i,s){function r(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var l=a.kind,o=l==="getter"?"get":l==="setter"?"set":"value",c=!t&&e?a.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,a.name):{}),f,h=!1,m=n.length-1;m>=0;m--){var b={};for(var _ in a)b[_]=_==="access"?{}:a[_];for(var _ in a.access)b.access[_]=a.access[_];b.addInitializer=function(y){if(h)throw new TypeError("Cannot add initializers after decoration has completed");s.push(r(y||null))};var S=(0,n[m])(l==="accessor"?{get:d.get,set:d.set}:d[o],b);if(l==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(f=r(S.get))&&(d.get=f),(f=r(S.set))&&(d.set=f),(f=r(S.init))&&i.unshift(f)}else(f=r(S))&&(l==="field"?i.unshift(f):d[o]=f)}c&&Object.defineProperty(c,a.name,d),h=!0}function a0(e,t,n){for(var a=arguments.length>2,i=0;i<t.length;i++)n=a?t[i].call(e,n):t[i].call(e);return a?n:void 0}function i0(e){return typeof e=="symbol"?e:"".concat(e)}function s0(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function r0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function X(e,t,n,a){function i(s){return s instanceof n?s:new n(function(r){r(s)})}return new(n||(n=Promise))(function(s,r){function l(d){try{c(a.next(d))}catch(f){r(f)}}function o(d){try{c(a.throw(d))}catch(f){r(f)}}function c(d){d.done?s(d.value):i(d.value).then(l,o)}c((a=a.apply(e,t||[])).next())})}function l0(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},a,i,s,r=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return r.next=l(0),r.throw=l(1),r.return=l(2),typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function l(c){return function(d){return o([c,d])}}function o(c){if(a)throw new TypeError("Generator is already executing.");for(;r&&(r=0,c[0]&&(n=0)),n;)try{if(a=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(d){c=[6,d],i=0}finally{a=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Ec=Object.create?function(e,t,n,a){a===void 0&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){a===void 0&&(a=n),e[a]=t[n]};function o0(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Ec(t,e,n)}function Jo(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function th(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),i,s=[],r;try{for(;(t===void 0||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return s}function c0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(th(arguments[t]));return e}function u0(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var a=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],r=0,l=s.length;r<l;r++,i++)a[i]=s[r];return a}function d0(e,t,n){if(n||arguments.length===2)for(var a=0,i=t.length,s;a<i;a++)(s||!(a in t))&&(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||Array.prototype.slice.call(t))}function Ys(e){return this instanceof Ys?(this.v=e,this):new Ys(e)}function f0(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",r),i[Symbol.asyncIterator]=function(){return this},i;function r(m){return function(b){return Promise.resolve(b).then(m,f)}}function l(m,b){a[m]&&(i[m]=function(_){return new Promise(function(S,y){s.push([m,_,S,y])>1||o(m,_)})},b&&(i[m]=b(i[m])))}function o(m,b){try{c(a[m](b))}catch(_){h(s[0][3],_)}}function c(m){m.value instanceof Ys?Promise.resolve(m.value.v).then(d,f):h(s[0][2],m)}function d(m){o("next",m)}function f(m){o("throw",m)}function h(m,b){m(b),s.shift(),s.length&&o(s[0][0],s[0][1])}}function h0(e){var t,n;return t={},a("next"),a("throw",function(i){throw i}),a("return"),t[Symbol.iterator]=function(){return this},t;function a(i,s){t[i]=e[i]?function(r){return(n=!n)?{value:Ys(e[i](r)),done:!1}:s?s(r):r}:s}}function m0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Jo=="function"?Jo(e):e[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(s){n[s]=e[s]&&function(r){return new Promise(function(l,o){r=e[s](r),i(l,o,r.done,r.value)})}}function i(s,r,l,o){Promise.resolve(o).then(function(c){s({value:c,done:l})},r)}}function g0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var gx=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Bd=function(e){return Bd=Object.getOwnPropertyNames||function(t){var n=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[n.length]=a);return n},Bd(e)};function v0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Bd(e),a=0;a<n.length;a++)n[a]!=="default"&&Ec(t,e,n[a]);return gx(t,e),t}function y0(e){return e&&e.__esModule?e:{default:e}}function p0(e,t,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(e):a?a.value:t.get(e)}function b0(e,t,n,a,i){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function _0(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function w0(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var a,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=t[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=t[Symbol.dispose],n&&(i=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");i&&(a=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:a,async:n})}else n&&e.stack.push({async:!0});return t}var vx=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var a=new Error(n);return a.name="SuppressedError",a.error=e,a.suppressed=t,a};function S0(e){function t(s){e.error=e.hasError?new vx(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var n,a=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&a===1)return a=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(s).then(i,function(r){return t(r),i()})}else a|=1}catch(r){t(r)}if(a===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function x0(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,a,i,s,r){return a?t?".jsx":".js":i&&(!s||!r)?n:i+s+"."+r.toLowerCase()+"js"}):e}const yx={__extends:Wp,__assign:Qo,__rest:er,__decorate:e0,__param:t0,__esDecorate:n0,__runInitializers:a0,__propKey:i0,__setFunctionName:s0,__metadata:r0,__awaiter:X,__generator:l0,__createBinding:Ec,__exportStar:o0,__values:Jo,__read:th,__spread:c0,__spreadArrays:u0,__spreadArray:d0,__await:Ys,__asyncGenerator:f0,__asyncDelegator:h0,__asyncValues:m0,__makeTemplateObject:g0,__importStar:v0,__importDefault:y0,__classPrivateFieldGet:p0,__classPrivateFieldSet:b0,__classPrivateFieldIn:_0,__addDisposableResource:w0,__disposeResources:S0,__rewriteRelativeImportExtension:x0},px=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:w0,get __assign(){return Qo},__asyncDelegator:h0,__asyncGenerator:f0,__asyncValues:m0,__await:Ys,__awaiter:X,__classPrivateFieldGet:p0,__classPrivateFieldIn:_0,__classPrivateFieldSet:b0,__createBinding:Ec,__decorate:e0,__disposeResources:S0,__esDecorate:n0,__exportStar:o0,__extends:Wp,__generator:l0,__importDefault:y0,__importStar:v0,__makeTemplateObject:g0,__metadata:r0,__param:t0,__propKey:i0,__read:th,__rest:er,__rewriteRelativeImportExtension:x0,__runInitializers:a0,__setFunctionName:s0,__spread:c0,__spreadArray:d0,__spreadArrays:u0,__values:Jo,default:yx},Symbol.toStringTag,{value:"Module"})),bx="modulepreload",_x=function(e){return"/todo-note/"+e},ig={},tr=function(t,n,a){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(n.map(o=>{if(o=_x(o),o in ig)return;ig[o]=!0;const c=o.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":bx,c||(f.as="script"),f.crossOrigin="",f.href=o,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}function s(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return i.then(r=>{for(const l of r||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},wx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>tr(async()=>{const{default:a}=await Promise.resolve().then(()=>Yi);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)};class nh extends Error{constructor(t,n="FunctionsError",a){super(t),this.name=n,this.context=a}}class sg extends nh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class rg extends nh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class lg extends nh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Hd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Hd||(Hd={}));class Sx{constructor(t,{headers:n={},customFetch:a,region:i=Hd.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=wx(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return X(this,arguments,void 0,function*(n,a={}){var i;try{const{headers:s,method:r,body:l,signal:o}=a;let c={},{region:d}=a;d||(d=this.region);const f=new URL(`${this.url}/${n}`);d&&d!=="any"&&(c["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let h;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(c["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)):h=l;const m=yield this.fetch(f.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h,signal:o}).catch(y=>{throw y.name==="AbortError"?y:new sg(y)}),b=m.headers.get("x-relay-error");if(b&&b==="true")throw new rg(m);if(!m.ok)throw new lg(m);let _=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return _==="application/json"?S=yield m.json():_==="application/octet-stream"||_==="application/pdf"?S=yield m.blob():_==="text/event-stream"?S=m:_==="multipart/form-data"?S=yield m.formData():S=yield m.text(),{data:S,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new sg(s)}:{data:null,error:s,response:s instanceof lg||s instanceof rg?s.context:void 0}}})}}var nn={};const nr=Jg(px);var Il={},Kl={},Xl={},Ql={},Jl={},xx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Gs=xx();const Ex=Gs.fetch,E0=Gs.fetch.bind(Gs),T0=Gs.Headers,Tx=Gs.Request,jx=Gs.Response,Yi=Object.freeze(Object.defineProperty({__proto__:null,Headers:T0,Request:Tx,Response:jx,default:E0,fetch:Ex},Symbol.toStringTag,{value:"Module"})),Ox=Jg(Yi);var Zl={},og;function j0(){if(og)return Zl;og=1,Object.defineProperty(Zl,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Zl.default=e,Zl}var cg;function O0(){if(cg)return Jl;cg=1,Object.defineProperty(Jl,"__esModule",{value:!0});const e=nr,t=e.__importDefault(Ox),n=e.__importDefault(j0());class a{constructor(s){var r,l;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(r=s.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=s.signal,this.isMaybeSingle=(l=s.isMaybeSingle)!==null&&l!==void 0?l:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,r){return this.headers=new Headers(this.headers),this.headers.set(s,r),this}then(s,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,f,h,m;let b=null,_=null,S=null,y=c.status,g=c.statusText;if(c.ok){if(this.method!=="HEAD"){const j=await c.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?_=j:_=JSON.parse(j))}const w=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),x=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&x&&x.length>1&&(S=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(b={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,S=null,y=406,g="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const w=await c.text();try{b=JSON.parse(w),Array.isArray(b)&&c.status===404&&(_=[],b=null,y=200,g="OK")}catch{c.status===404&&w===""?(y=204,g="No Content"):b={message:w}}if(b&&this.isMaybeSingle&&(!((m=b==null?void 0:b.details)===null||m===void 0)&&m.includes("0 rows"))&&(b=null,y=200,g="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:_,count:S,status:y,statusText:g}});return this.shouldThrowOnError||(o=o.catch(c=>{var d,f,h;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),o.then(s,r)}returns(){return this}overrideTypes(){return this}}return Jl.default=a,Jl}var ug;function A0(){if(ug)return Ql;ug=1,Object.defineProperty(Ql,"__esModule",{value:!0});const t=nr.__importDefault(O0());class n extends t.default{select(i){let s=!1;const r=(i??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:r,foreignTable:l,referencedTable:o=l}={}){const c=o?`${o}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${i}.${s?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:r=s}={}){const l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,s,{foreignTable:r,referencedTable:l=r}={}){const o=typeof l>"u"?"offset":`${l}.offset`,c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${i}`),this.url.searchParams.set(c,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:r=!1,buffers:l=!1,wal:o=!1,format:c="text"}={}){var d;const f=[i?"analyze":null,s?"verbose":null,r?"settings":null,l?"buffers":null,o?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${h}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Ql.default=n,Ql}var dg;function ah(){if(dg)return Xl;dg=1,Object.defineProperty(Xl,"__esModule",{value:!0});const t=nr.__importDefault(A0()),n=new RegExp("[,()]");class a extends t.default{eq(s,r){return this.url.searchParams.append(s,`eq.${r}`),this}neq(s,r){return this.url.searchParams.append(s,`neq.${r}`),this}gt(s,r){return this.url.searchParams.append(s,`gt.${r}`),this}gte(s,r){return this.url.searchParams.append(s,`gte.${r}`),this}lt(s,r){return this.url.searchParams.append(s,`lt.${r}`),this}lte(s,r){return this.url.searchParams.append(s,`lte.${r}`),this}like(s,r){return this.url.searchParams.append(s,`like.${r}`),this}likeAllOf(s,r){return this.url.searchParams.append(s,`like(all).{${r.join(",")}}`),this}likeAnyOf(s,r){return this.url.searchParams.append(s,`like(any).{${r.join(",")}}`),this}ilike(s,r){return this.url.searchParams.append(s,`ilike.${r}`),this}ilikeAllOf(s,r){return this.url.searchParams.append(s,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(s,r){return this.url.searchParams.append(s,`ilike(any).{${r.join(",")}}`),this}is(s,r){return this.url.searchParams.append(s,`is.${r}`),this}in(s,r){const l=Array.from(new Set(r)).map(o=>typeof o=="string"&&n.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,r){return typeof r=="string"?this.url.searchParams.append(s,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(s,`cs.{${r.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(r)}`),this}containedBy(s,r){return typeof r=="string"?this.url.searchParams.append(s,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(s,`cd.{${r.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(r)}`),this}rangeGt(s,r){return this.url.searchParams.append(s,`sr.${r}`),this}rangeGte(s,r){return this.url.searchParams.append(s,`nxl.${r}`),this}rangeLt(s,r){return this.url.searchParams.append(s,`sl.${r}`),this}rangeLte(s,r){return this.url.searchParams.append(s,`nxr.${r}`),this}rangeAdjacent(s,r){return this.url.searchParams.append(s,`adj.${r}`),this}overlaps(s,r){return typeof r=="string"?this.url.searchParams.append(s,`ov.${r}`):this.url.searchParams.append(s,`ov.{${r.join(",")}}`),this}textSearch(s,r,{config:l,type:o}={}){let c="";o==="plain"?c="pl":o==="phrase"?c="ph":o==="websearch"&&(c="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${c}fts${d}.${r}`),this}match(s){return Object.entries(s).forEach(([r,l])=>{this.url.searchParams.append(r,`eq.${l}`)}),this}not(s,r,l){return this.url.searchParams.append(s,`not.${r}.${l}`),this}or(s,{foreignTable:r,referencedTable:l=r}={}){const o=l?`${l}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,r,l){return this.url.searchParams.append(s,`${r}.${l}`),this}}return Xl.default=a,Xl}var fg;function C0(){if(fg)return Kl;fg=1,Object.defineProperty(Kl,"__esModule",{value:!0});const t=nr.__importDefault(ah());class n{constructor(i,{headers:s={},schema:r,fetch:l}){this.url=i,this.headers=new Headers(s),this.schema=r,this.fetch=l}select(i,s){const{head:r=!1,count:l}=s??{},o=r?"HEAD":"GET";let c=!1;const d=(i??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:r=!0}={}){var l;const o="POST";if(s&&this.headers.append("Prefer",`count=${s}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:r=!1,count:l,defaultToNull:o=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),l&&this.headers.append("Prefer",`count=${l}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:s}={}){var r;const l="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:i}={}){var s;const r="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return Kl.default=n,Kl}var hg;function Ax(){if(hg)return Il;hg=1,Object.defineProperty(Il,"__esModule",{value:!0});const e=nr,t=e.__importDefault(C0()),n=e.__importDefault(ah());class a{constructor(s,{headers:r={},schema:l,fetch:o}={}){this.url=s,this.headers=new Headers(r),this.schemaName=l,this.fetch=o}from(s){const r=new URL(`${this.url}/${s}`);return new t.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new a(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,r={},{head:l=!1,get:o=!1,count:c}={}){var d;let f;const h=new URL(`${this.url}/rpc/${s}`);let m;l||o?(f=l?"HEAD":"GET",Object.entries(r).filter(([_,S])=>S!==void 0).map(([_,S])=>[_,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([_,S])=>{h.searchParams.append(_,S)})):(f="POST",m=r);const b=new Headers(this.headers);return c&&b.set("Prefer",`count=${c}`),new n.default({method:f,url:h,headers:b,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Il.default=a,Il}Object.defineProperty(nn,"__esModule",{value:!0});var D0=nn.PostgrestError=q0=nn.PostgrestBuilder=B0=nn.PostgrestTransformBuilder=z0=nn.PostgrestFilterBuilder=k0=nn.PostgrestQueryBuilder=R0=nn.PostgrestClient=void 0;const ar=nr,N0=ar.__importDefault(Ax());var R0=nn.PostgrestClient=N0.default;const M0=ar.__importDefault(C0());var k0=nn.PostgrestQueryBuilder=M0.default;const U0=ar.__importDefault(ah());var z0=nn.PostgrestFilterBuilder=U0.default;const L0=ar.__importDefault(A0());var B0=nn.PostgrestTransformBuilder=L0.default;const H0=ar.__importDefault(O0());var q0=nn.PostgrestBuilder=H0.default;const $0=ar.__importDefault(j0());D0=nn.PostgrestError=$0.default;var V0=nn.default={PostgrestClient:N0.default,PostgrestQueryBuilder:M0.default,PostgrestFilterBuilder:U0.default,PostgrestTransformBuilder:L0.default,PostgrestBuilder:H0.default,PostgrestError:$0.default};const Cx=p_({__proto__:null,get PostgrestBuilder(){return q0},get PostgrestClient(){return R0},get PostgrestError(){return D0},get PostgrestFilterBuilder(){return z0},get PostgrestQueryBuilder(){return k0},get PostgrestTransformBuilder(){return B0},default:V0},[nn]),{PostgrestClient:Dx,PostgrestQueryBuilder:cO,PostgrestFilterBuilder:uO,PostgrestTransformBuilder:dO,PostgrestBuilder:fO,PostgrestError:hO}=V0||Cx;class Nx{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const a=n.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const a=this.getWebSocketConstructor();return new a(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Rx="2.78.0",Mx=`realtime-js/${Rx}`,kx="1.0.0",qd=1e4,Ux=1e3,zx=100;var Br;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Br||(Br={}));var kt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(kt||(kt={}));var ea;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ea||(ea={}));var $d;(function(e){e.websocket="websocket"})($d||($d={}));var Si;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Si||(Si={}));class Lx{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,n,a)}_decodeBroadcast(t,n,a){const i=n.getUint8(1),s=n.getUint8(2);let r=this.HEADER_LENGTH+2;const l=a.decode(t.slice(r,r+i));r=r+i;const o=a.decode(t.slice(r,r+s));r=r+s;const c=JSON.parse(a.decode(t.slice(r,t.byteLength)));return{ref:null,topic:l,event:o,payload:c}}}class Y0{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(et||(et={}));const mg=(e,t,n={})=>{var a;const i=(a=n.skipTypes)!==null&&a!==void 0?a:[];return t?Object.keys(t).reduce((s,r)=>(s[r]=Bx(r,e,t,i),s),{}):{}},Bx=(e,t,n,a)=>{const i=t.find(l=>l.name===e),s=i==null?void 0:i.type,r=n[e];return s&&!a.includes(s)?G0(s,r):Vd(r)},G0=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Vx(t,n)}switch(e){case et.bool:return Hx(t);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return qx(t);case et.json:case et.jsonb:return $x(t);case et.timestamp:return Yx(t);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return Vd(t);default:return Vd(t)}},Vd=e=>e,Hx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},qx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},$x=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Vx=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,a=e[n];if(e[0]==="{"&&a==="}"){let s;const r=e.slice(1,n);try{s=JSON.parse("["+r+"]")}catch{s=r?r.split(","):[]}return s.map(l=>G0(t,l))}return e},Yx=e=>typeof e=="string"?e.replace(" ","T"):e,I0=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Tu{constructor(t,n,a={},i=qd){this.channel=t,this.event=n,this.payload=a,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var a;return this._hasReceived(t)&&n((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var gg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(gg||(gg={}));class Hr{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},i=>{const{onJoin:s,onLeave:r,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hr.syncState(this.state,i,s,r),this.pendingDiffs.forEach(o=>{this.state=Hr.syncDiff(this.state,o,s,r)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},i=>{const{onJoin:s,onLeave:r,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Hr.syncDiff(this.state,i,s,r),l())}),this.onJoin((i,s,r)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:r})}),this.onLeave((i,s,r)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,a,i){const s=this.cloneDeep(t),r=this.transformState(n),l={},o={};return this.map(s,(c,d)=>{r[c]||(o[c]=d)}),this.map(r,(c,d)=>{const f=s[c];if(f){const h=d.map(S=>S.presence_ref),m=f.map(S=>S.presence_ref),b=d.filter(S=>m.indexOf(S.presence_ref)<0),_=f.filter(S=>h.indexOf(S.presence_ref)<0);b.length>0&&(l[c]=b),_.length>0&&(o[c]=_)}else l[c]=d}),this.syncDiff(s,{joins:l,leaves:o},a,i)}static syncDiff(t,n,a,i){const{joins:s,leaves:r}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return a||(a=()=>{}),i||(i=()=>{}),this.map(s,(l,o)=>{var c;const d=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(o),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}a(l,d,o)}),this.map(r,(l,o)=>{let c=t[l];if(!c)return;const d=o.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=c,i(l,c,o),c.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(a=>n(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,a)=>{const i=t[a];return"metas"in i?n[a]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[a]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(vg||(vg={}));var qr;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(qr||(qr={}));var ya;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ya||(ya={}));class ih{constructor(t,n={config:{}},a){var i,s;if(this.topic=t,this.params=n,this.socket=a,this.bindings={},this.state=kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Tu(this,ea.join,this.params,this.timeout),this.rejoinTimer=new Y0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ea.reply,{},(r,l)=>{this._trigger(this._replyEventName(l),r)}),this.presence=new Hr(this),this.broadcastEndpointURL=I0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var a,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==kt.closed){const{config:{broadcast:r,presence:l,private:o}}=this.params,c=(i=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(m=>m.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[qr.PRESENCE]&&this.bindings[qr.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},h={broadcast:r,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:c,private:o};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(ya.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(ya.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var b;if(this.socket.setAuth(),m===void 0){t==null||t(ya.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,S=(b=_==null?void 0:_.length)!==null&&b!==void 0?b:0,y=[];for(let g=0;g<S;g++){const v=_[g],{filter:{event:w,schema:x,table:j,filter:T}}=v,O=m&&m[g];if(O&&O.event===w&&O.schema===x&&O.table===j&&O.filter===T)y.push(Object.assign(Object.assign({},v),{id:O.id}));else{this.unsubscribe(),this.state=kt.errored,t==null||t(ya.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(ya.SUBSCRIBED);return}}).receive("error",m=>{this.state=kt.errored,t==null||t(ya.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ya.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,a){return this.state===kt.joined&&t===qr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,a)}async httpSend(t,n,a={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const r={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,r,(i=a.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let o=l.statusText;try{const c=await l.json();o=c.error||c.message||o}catch{}return Promise.reject(new Error(o))}async send(t,n={}){var a,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:r}=t,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:r,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var r,l,o;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((o=(l=(r=this.params)===null||r===void 0?void 0:r.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=kt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ea.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(i=>{a=new Tu(this,ea.leave,{},t),a.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=kt.closed,this.bindings={}}async _fetchWithTimeout(t,n,a){const i=new AbortController,s=setTimeout(()=>i.abort(),a),r=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),r}_push(t,n,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Tu(this,t,n,a);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>zx){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,a){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,a){var i,s;const r=t.toLocaleLowerCase(),{close:l,error:o,leave:c,join:d}=ea;if(a&&[l,o,c,d].indexOf(r)>=0&&a!==this._joinRef())return;let h=this._onMessage(r,n,a);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var b,_,S;return((b=m.filter)===null||b===void 0?void 0:b.event)==="*"||((S=(_=m.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===r}).map(m=>m.callback(h,a)):(s=this.bindings[r])===null||s===void 0||s.filter(m=>{var b,_,S,y,g,v;if(["broadcast","presence","postgres_changes"].includes(r))if("id"in m){const w=m.id,x=(b=m.filter)===null||b===void 0?void 0:b.event;return w&&((_=n.ids)===null||_===void 0?void 0:_.includes(w))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const w=(g=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return w==="*"||w===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===r}).map(m=>{if(typeof h=="object"&&"ids"in h){const b=h.data,{schema:_,table:S,commit_timestamp:y,type:g,errors:v}=b;h=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:y,eventType:g,new:{},old:{},errors:v}),this._getPayloadRecords(b))}m.callback(h,a)})}_isClosed(){return this.state===kt.closed}_isJoined(){return this.state===kt.joined}_isJoining(){return this.state===kt.joining}_isLeaving(){return this.state===kt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,a){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:a};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===a&&ih.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const a in t)if(t[a]!==n[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ea.close,{},t)}_onError(t){this._on(ea.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=mg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=mg(t.columns,t.old_record)),n}}const ju=()=>{},Pl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Gx=[1e3,2e3,5e3,1e4],Ix=1e4,Kx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Xx{constructor(t,n){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qd,this.transport=null,this.heartbeatIntervalMs=Pl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ju,this.ref=0,this.reconnectTimer=null,this.logger=ju,this.conn=null,this.sendBuffer=[],this.serializer=new Lx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...r)=>tr(async()=>{const{default:l}=await Promise.resolve().then(()=>Yi);return{default:l}},void 0).then(({default:l})=>l(...r)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...r)=>s(...r)},!(!((a=n==null?void 0:n.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${$d.websocket}`,this.httpEndpoint=I0(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Nx.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kx}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,a){this.logger(t,n,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Br.connecting:return Si.Connecting;case Br.open:return Si.Open;case Br.closing:return Si.Closing;default:return Si.Closed}}isConnected(){return this.connectionState()===Si.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const a=`realtime:${t}`,i=this.getChannels().find(s=>s.topic===a);if(i)return i;{const s=new ih(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:a,payload:i,ref:s}=t,r=()=>{this.encode(t,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${n} ${a} (${s})`,i),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Ux,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Pl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:i,payload:s,ref:r}=n,l=r?`(${r})`:"",o=s.status||"";this.log("receive",`${o} ${a} ${i} ${l}`.trim(),s),this.channels.filter(c=>c._isMember(a)).forEach(c=>c._trigger(i,s,r)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ea.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const a=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${a}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{const a=new Blob([Kx],{type:"application/javascript"});n=URL.createObjectURL(a)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const i={access_token:n,version:Mx};n&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(ea.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new Y0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,a,i,s,r,l,o,c,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(a=t==null?void 0:t.timeout)!==null&&a!==void 0?a:qd,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:Pl.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(r=t==null?void 0:t.accessToken)!==null&&r!==void 0?r:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:ju,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=t==null?void 0:t.reconnectAfterMs)!==null&&o!==void 0?o:f=>Gx[f-1]||Ix,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(f,h)=>h(JSON.stringify(f)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class sh extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function gt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Qx extends sh{constructor(t,n,a){super(t),this.name="StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Yd extends sh{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const rh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>tr(async()=>{const{default:a}=await Promise.resolve().then(()=>Yi);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)},Jx=()=>X(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield tr(()=>Promise.resolve().then(()=>Yi),void 0)).Response:Response}),Gd=e=>{if(Array.isArray(e))return e.map(n=>Gd(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,a])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Gd(a)}),t},Zx=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ou=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Px=(e,t,n)=>X(void 0,void 0,void 0,function*(){const a=yield Jx();e instanceof a&&!(n!=null&&n.noResolveJson)?e.json().then(i=>{const s=e.status||500,r=(i==null?void 0:i.statusCode)||s+"";t(new Qx(Ou(i),s,r))}).catch(i=>{t(new Yd(Ou(i),i))}):t(new Yd(Ou(e),e))}),Fx=(e,t,n,a)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!a?i:(Zx(a)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(a)):i.body=a,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),n))};function wl(e,t,n,a,i,s){return X(this,void 0,void 0,function*(){return new Promise((r,l)=>{e(n,Fx(t,a,i,s)).then(o=>{if(!o.ok)throw o;return a!=null&&a.noResolveJson?o:o.json()}).then(o=>r(o)).catch(o=>Px(o,l,a))})})}function il(e,t,n,a){return X(this,void 0,void 0,function*(){return wl(e,"GET",t,n,a)})}function Fn(e,t,n,a,i){return X(this,void 0,void 0,function*(){return wl(e,"POST",t,a,i,n)})}function Id(e,t,n,a,i){return X(this,void 0,void 0,function*(){return wl(e,"PUT",t,a,i,n)})}function Wx(e,t,n,a){return X(this,void 0,void 0,function*(){return wl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),a)})}function lh(e,t,n,a,i){return X(this,void 0,void 0,function*(){return wl(e,"DELETE",t,a,i,n)})}class eE{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return X(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gt(t))return{data:null,error:t};throw t}})}}var K0;class tE{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[K0]="BlobDownloadBuilder",this.promise=null}asStream(){return new eE(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return X(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gt(t))return{data:null,error:t};throw t}})}}K0=Symbol.toStringTag;const nE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class aE{constructor(t,n={},a,i){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=a,this.fetch=rh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,a,i){return X(this,void 0,void 0,function*(){try{let s;const r=Object.assign(Object.assign({},yg),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(r.upsert)});const o=r.metadata;typeof Blob<"u"&&a instanceof Blob?(s=new FormData,s.append("cacheControl",r.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",a)):typeof FormData<"u"&&a instanceof FormData?(s=a,s.append("cacheControl",r.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=a,l["cache-control"]=`max-age=${r.cacheControl}`,l["content-type"]=r.contentType,o&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),f=yield(t=="PUT"?Id:Fn)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:l},r!=null&&r.duplex?{duplex:r.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}})}upload(t,n,a){return X(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,a)})}uploadToSignedUrl(t,n,a,i){return X(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),r=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${r}`);l.searchParams.set("token",n);try{let o;const c=Object.assign({upsert:yg.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&a instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),o.append("",a)):typeof FormData<"u"&&a instanceof FormData?(o=a,o.append("cacheControl",c.cacheControl)):(o=a,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield Id(this.fetch,l.toString(),o,{headers:d});return{data:{path:s,fullPath:f.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(gt(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(t,n){return X(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Fn(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:i}),r=new URL(this.url+s.url),l=r.searchParams.get("token");if(!l)throw new sh("No token returned by API");return{data:{signedUrl:r.toString(),path:t,token:l},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}update(t,n,a){return X(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,a)})}move(t,n,a){return X(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}copy(t,n,a){return X(this,void 0,void 0,function*(){try{return{data:{path:(yield Fn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,n,a){return X(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield Fn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const r=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${r}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,a){return X(this,void 0,void 0,function*(){try{const i=yield Fn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:i.map(r=>Object.assign(Object.assign({},r),{signedUrl:r.signedURL?encodeURI(`${this.url}${r.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}download(t,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),r=s?`?${s}`:"",l=this._getFinalPath(t),o=()=>il(this.fetch,`${this.url}/${i}/${l}${r}`,{headers:this.headers,noResolveJson:!0});return new tE(o,this.shouldThrowOnError)}info(t){return X(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const a=yield il(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Gd(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}exists(t){return X(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield Wx(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a)&&a instanceof Yd){const i=a.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,n){const a=this._getFinalPath(t),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&i.push(o);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${c}`)}}}remove(t){return X(this,void 0,void 0,function*(){try{return{data:yield lh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}list(t,n,a){return X(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},nE),n),{prefix:t||""});return{data:yield Fn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},a),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}listV2(t,n){return X(this,void 0,void 0,function*(){try{const a=Object.assign({},t);return{data:yield Fn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const X0="2.78.0",Q0={"X-Client-Info":`storage-js/${X0}`};class iE{constructor(t,n={},a,i){this.shouldThrowOnError=!1;const s=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Q0),n),this.fetch=rh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return X(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield il(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}getBucket(t){return X(this,void 0,void 0,function*(){try{return{data:yield il(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}createBucket(t){return X(this,arguments,void 0,function*(n,a={public:!1}){try{return{data:yield Fn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return X(this,void 0,void 0,function*(){try{return{data:yield Id(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gt(a))return{data:null,error:a};throw a}})}emptyBucket(t){return X(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return X(this,void 0,void 0,function*(){try{return{data:yield lh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class sE{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Q0),n),this.fetch=rh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return X(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}listBuckets(t){return X(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const a=n.toString(),i=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`;return{data:yield il(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return X(this,void 0,void 0,function*(){try{return{data:yield lh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}})}}const oh={"X-Client-Info":`storage-js/${X0}`,"Content-Type":"application/json"};class J0 extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function jn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Au extends J0{constructor(t,n,a){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rE extends J0{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var pg;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(pg||(pg={}));const ch=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>tr(async()=>{const{default:a}=await Promise.resolve().then(()=>Yi);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)},lE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},bg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oE=(e,t,n)=>X(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const i=e.status||500,s=e;if(typeof s.json=="function")s.json().then(r=>{const l=(r==null?void 0:r.statusCode)||(r==null?void 0:r.code)||i+"";t(new Au(bg(r),i,l))}).catch(()=>{const r=i+"",l=s.statusText||`HTTP ${i} error`;t(new Au(l,i,r))});else{const r=i+"",l=s.statusText||`HTTP ${i} error`;t(new Au(l,i,r))}}else t(new rE(bg(e),e))}),cE=(e,t,n,a)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return a?(lE(a)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(a)):i.body=a,Object.assign(Object.assign({},i),n)):i};function uE(e,t,n,a,i,s){return X(this,void 0,void 0,function*(){return new Promise((r,l)=>{e(n,cE(t,a,i,s)).then(o=>{if(!o.ok)throw o;if(a!=null&&a.noResolveJson)return o;const c=o.headers.get("content-type");return!c||!c.includes("application/json")?{}:o.json()}).then(o=>r(o)).catch(o=>oE(o,l,a))})})}function On(e,t,n,a,i){return X(this,void 0,void 0,function*(){return uE(e,"POST",t,a,i,n)})}class dE{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oh),n),this.fetch=ch(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return X(this,void 0,void 0,function*(){try{return{data:(yield On(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}getIndex(t,n){return X(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(jn(a))return{data:null,error:a};throw a}})}listIndexes(t){return X(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return X(this,void 0,void 0,function*(){try{return{data:(yield On(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(jn(a))return{data:null,error:a};throw a}})}}class fE{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oh),n),this.fetch=ch(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return X(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield On(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}getVectors(t){return X(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}listVectors(t){return X(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield On(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}queryVectors(t){return X(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}deleteVectors(t){return X(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield On(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}}class hE{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oh),n),this.fetch=ch(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return X(this,void 0,void 0,function*(){try{return{data:(yield On(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}getBucket(t){return X(this,void 0,void 0,function*(){try{return{data:yield On(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}listBuckets(){return X(this,arguments,void 0,function*(t={}){try{return{data:yield On(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return X(this,void 0,void 0,function*(){try{return{data:(yield On(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}}class mE extends hE{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new gE(this.url,this.headers,t,this.fetch)}}class gE extends dE{constructor(t,n,a,i){super(t,n,i),this.vectorBucketName=a}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return X(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return X(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return X(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return X(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new vE(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class vE extends fE{constructor(t,n,a,i,s){super(t,n,s),this.vectorBucketName=a,this.indexName=i}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return X(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return X(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return X(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return X(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return X(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class yE extends iE{constructor(t,n={},a,i){super(t,n,a,i)}from(t){return new aE(this.url,this.headers,t,this.fetch)}get vectors(){return new mE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new sE(this.url+"/iceberg",this.headers,this.fetch)}}const pE="2.78.0";let xr="";typeof Deno<"u"?xr="deno":typeof document<"u"?xr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xr="react-native":xr="node";const bE={"X-Client-Info":`supabase-js-${xr}/${pE}`},_E={headers:bE},wE={schema:"public"},SE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xE={},EE=e=>{let t;return e?t=e:typeof fetch>"u"?t=E0:t=fetch,(...n)=>t(...n)},TE=()=>typeof Headers>"u"?T0:Headers,jE=(e,t,n)=>{const a=EE(n),i=TE();return async(s,r)=>{var l;const o=(l=await t())!==null&&l!==void 0?l:e;let c=new i(r==null?void 0:r.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${o}`),a(s,Object.assign(Object.assign({},r),{headers:c}))}};function OE(e){return e.endsWith("/")?e:e+"/"}function AE(e,t){var n,a;const{db:i,auth:s,realtime:r,global:l}=e,{db:o,auth:c,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},o),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),r),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(a=l==null?void 0:l.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function CE(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(OE(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Z0="2.78.0",os=30*1e3,Kd=3,Cu=Kd*os,DE="http://localhost:9999",NE="supabase.auth.token",RE={"X-Client-Info":`gotrue-js/${Z0}`},Xd="X-Supabase-Api-Version",P0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ME=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,kE=10*60*1e3;class sl extends Error{constructor(t,n,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=a}}function J(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class UE extends sl{constructor(t,n,a){super(t,n,a),this.name="AuthApiError",this.status=n,this.code=a}}function zE(e){return J(e)&&e.name==="AuthApiError"}class xi extends sl{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class di extends sl{constructor(t,n,a,i){super(t,a,i),this.name=n,this.status=a}}class Zn extends di{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function LE(e){return J(e)&&e.name==="AuthSessionMissingError"}class es extends di{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Fl extends di{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Wl extends di{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function BE(e){return J(e)&&e.name==="AuthImplicitGrantRedirectError"}class _g extends di{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qd extends di{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Du(e){return J(e)&&e.name==="AuthRetryableFetchError"}class wg extends di{constructor(t,n,a){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=a}}class Jd extends di{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Sg=` 	
\r=`.split(""),HE=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Sg.length;t+=1)e[Sg[t].charCodeAt(0)]=-2;for(let t=0;t<Zo.length;t+=1)e[Zo[t].charCodeAt(0)]=t;return e})();function xg(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;n(Zo[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;n(Zo[a]),t.queuedBits-=6}}function F0(e,t,n){const a=HE[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Eg(e){const t=[],n=r=>{t.push(String.fromCodePoint(r))},a={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=r=>{VE(r,a,n)};for(let r=0;r<e.length;r+=1)F0(e.charCodeAt(r),i,s);return t.join("")}function qE(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function $E(e,t){for(let n=0;n<e.length;n+=1){let a=e.charCodeAt(n);if(a>55295&&a<=56319){const i=(a-55296)*1024&65535;a=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}qE(a,t)}}function VE(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let a=1;a<6;a+=1)if(!(e>>7-a&1)){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ds(e){const t=[],n={queue:0,queuedBits:0},a=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)F0(e.charCodeAt(i),n,a);return new Uint8Array(t)}function YE(e){const t=[];return $E(e,n=>t.push(n)),new Uint8Array(t)}function Ti(e){const t=[],n={queue:0,queuedBits:0},a=i=>{t.push(i)};return e.forEach(i=>xg(i,n,a)),xg(null,n,a),t.join("")}function GE(e){return Math.round(Date.now()/1e3)+e}function IE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const en=()=>typeof window<"u"&&typeof document<"u",mi={tested:!1,writable:!1},W0=()=>{if(!en())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mi.tested)return mi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),mi.tested=!0,mi.writable=!0}catch{mi.tested=!0,mi.writable=!1}return mi.writable};function KE(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((a,i)=>{t[i]=a}),t}const eb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>tr(async()=>{const{default:a}=await Promise.resolve().then(()=>Yi);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)},XE=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",cs=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},gi=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ua=async(e,t)=>{await e.removeItem(t)};class Tc{constructor(){this.promise=new Tc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Tc.promiseConstructor=Promise;function Nu(e){const t=e.split(".");if(t.length!==3)throw new Jd("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!ME.test(t[a]))throw new Jd("JWT not in base64url format");return{header:JSON.parse(Eg(t[0])),payload:JSON.parse(Eg(t[1])),signature:Ds(t[2]),raw:{header:t[0],payload:t[1]}}}async function QE(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function JE(e,t){return new Promise((a,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const r=await e(s);if(!t(s,null,r)){a(r);return}}catch(r){if(!t(s,r)){i(r);return}}})()})}function ZE(e){return("0"+e.toString(16)).substr(-2)}function PE(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*a));return i}return crypto.getRandomValues(t),Array.from(t,ZE).join("")}async function FE(e){const n=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(a);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function WE(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await FE(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ts(e,t,n=!1){const a=PE();let i=a;n&&(i+="/PASSWORD_RECOVERY"),await cs(e,`${t}-code-verifier`,i);const s=await WE(a);return[s,a===s?"plain":"s256"]}const eT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tT(e){const t=e.headers.get(Xd);if(!t||!t.match(eT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function nT(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function aT(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const iT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ns(e){if(!iT.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ru(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sT(e,t){return new Proxy(e,{get:(n,a,i)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const s=a.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,a,i)}return!t.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,a,i)}})}function Tg(e){return JSON.parse(JSON.stringify(e))}const wi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),rT=[502,503,504];async function jg(e){var t;if(!XE(e))throw new Qd(wi(e),0);if(rT.includes(e.status))throw new Qd(wi(e),e.status);let n;try{n=await e.json()}catch(s){throw new xi(wi(s),s)}let a;const i=tT(e);if(i&&i.getTime()>=P0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?a=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(a=n.error_code),a){if(a==="weak_password")throw new wg(wi(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Zn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0))throw new wg(wi(n),e.status,n.weak_password.reasons);throw new UE(wi(n),e.status||500,a)}const lT=(e,t,n,a)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(a),Object.assign(Object.assign({},i),n))};async function ne(e,t,n,a){var i;const s=Object.assign({},a==null?void 0:a.headers);s[Xd]||(s[Xd]=P0["2024-01-01"].name),a!=null&&a.jwt&&(s.Authorization=`Bearer ${a.jwt}`);const r=(i=a==null?void 0:a.query)!==null&&i!==void 0?i:{};a!=null&&a.redirectTo&&(r.redirect_to=a.redirectTo);const l=Object.keys(r).length?"?"+new URLSearchParams(r).toString():"",o=await oT(e,t,n+l,{headers:s,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(o):{data:Object.assign({},o),error:null}}async function oT(e,t,n,a,i,s){const r=lT(t,a,i,s);let l;try{l=await e(n,Object.assign({},r))}catch(o){throw console.error(o),new Qd(wi(o),0)}if(l.ok||await jg(l),a!=null&&a.noResolveJson)return l;try{return await l.json()}catch(o){await jg(o)}}function Pn(e){var t;let n=null;dT(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=GE(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:a},error:null}}function Og(e){const t=Pn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ya(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function cT(e){return{data:e,error:null}}function uT(e){const{action_link:t,email_otp:n,hashed_token:a,redirect_to:i,verification_type:s}=e,r=er(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:a,redirect_to:i,verification_type:s},o=Object.assign({},r);return{data:{properties:l,user:o},error:null}}function Ag(e){return e}function dT(e){return e.access_token&&e.refresh_token&&e.expires_in}const Mu=["global","local","others"];class fT{constructor({url:t="",headers:n={},fetch:a}){this.url=t,this.headers=n,this.fetch=eb(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Mu[0]){if(Mu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mu.join(", ")}`);try{return await ne(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(J(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,n={}){try{return await ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ya})}catch(a){if(J(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:n}=t,a=er(t,["options"]),i=Object.assign(Object.assign({},a),n);return"newEmail"in a&&(i.new_email=a==null?void 0:a.newEmail,delete i.newEmail),await ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:uT,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(J(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ne(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ya})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,a,i,s,r,l,o;try{const c={nextPage:null,lastPage:0,total:0},d=await ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ag});if(d.error)throw d.error;const f=await d.json(),h=(r=d.headers.get("x-total-count"))!==null&&r!==void 0?r:0,m=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return m.length>0&&(m.forEach(b=>{const _=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);c[`${S}Page`]=_}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(J(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){ns(t);try{return await ne(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ya})}catch(n){if(J(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ns(t);try{return await ne(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ya})}catch(a){if(J(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,n=!1){ns(t);try{return await ne(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ya})}catch(a){if(J(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){ns(t.userId);try{const{data:n,error:a}=await ne(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:a}}catch(n){if(J(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ns(t.userId),ns(t.id);try{return{data:await ne(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,a,i,s,r,l,o;try{const c={nextPage:null,lastPage:0,total:0},d=await ne(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ag});if(d.error)throw d.error;const f=await d.json(),h=(r=d.headers.get("x-total-count"))!==null&&r!==void 0?r:0,m=(o=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return m.length>0&&(m.forEach(b=>{const _=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);c[`${S}Page`]=_}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(J(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await ne(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ne(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await ne(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(J(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(t){try{return await ne(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ne(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(J(n))return{data:null,error:n};throw n}}}function Cg(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const as={debug:!!(globalThis&&W0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class hT extends tb{}async function mT(e,t,n){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),as.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async i=>{if(i){as.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{as.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw as.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new hT(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(as.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function gT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function nb(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function vT(e){return parseInt(e,16)}function yT(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}function pT(e){var t;const{chainId:n,domain:a,expirationTime:i,issuedAt:s=new Date,nonce:r,notBefore:l,requestId:o,resources:c,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(r&&r.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${r}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=nb(e.address),b=d?`${d}://${a}`:a,_=e.statement?`${e.statement}
`:"",S=`${b} wants you to sign in with your Ethereum account:
${m}

${_}`;let y=`URI: ${f}
Version: ${h}
Chain ID: ${n}${r?`
Nonce: ${r}`:""}
Issued At: ${s.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),o&&(y+=`
Request ID: ${o}`),c){let g=`
Resources:`;for(const v of c){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);g+=`
- ${v}`}y+=g}return`${S}
${y}`}class Ot extends Error{constructor({message:t,code:n,cause:a,name:i}){var s;super(t,{cause:a}),this.__isWebAuthnError=!0,this.name=(s=i??(a instanceof Error?a.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Po extends Ot{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function bT({error:e,options:t}){var n,a,i;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((a=s.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ot({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(ab(r)){if(s.rp.id!==r)return new Ot({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function _T({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ot({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(ab(a)){if(n.rpId!==a)return new Ot({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class wT{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const ST=new wT;function xT(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:a}=e,i=er(e,["challenge","user","excludeCredentials"]),s=Ds(t).buffer,r=Object.assign(Object.assign({},n),{id:Ds(n.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:s,user:r});if(a&&a.length>0){l.excludeCredentials=new Array(a.length);for(let o=0;o<a.length;o++){const c=a[o];l.excludeCredentials[o]=Object.assign(Object.assign({},c),{id:Ds(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return l}function ET(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,a=er(e,["challenge","allowCredentials"]),i=Ds(t).buffer,s=Object.assign(Object.assign({},a),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let r=0;r<n.length;r++){const l=n[r];s.allowCredentials[r]=Object.assign(Object.assign({},l),{id:Ds(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function TT(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ti(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ti(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function jT(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,a=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ti(new Uint8Array(i.authenticatorData)),clientDataJSON:Ti(new Uint8Array(i.clientDataJSON)),signature:Ti(new Uint8Array(i.signature)),userHandle:i.userHandle?Ti(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ab(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Dg(){var e,t;return!!(en()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function OT(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Po("Browser returned unexpected credential type",t)}:{data:null,error:new Po("Empty credential response",t)}}catch(t){return{data:null,error:bT({error:t,options:e})}}}async function AT(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Po("Browser returned unexpected credential type",t)}:{data:null,error:new Po("Empty credential response",t)}}catch(t){return{data:null,error:_T({error:t,options:e})}}}const CT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},DT={userVerification:"preferred",hints:["security-key"]};function Fo(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),a={};for(const i of e)if(i)for(const s in i){const r=i[s];if(r!==void 0)if(Array.isArray(r))a[s]=r;else if(n(r))a[s]=r;else if(t(r)){const l=a[s];t(l)?a[s]=Fo(l,r):a[s]=Fo(r)}else a[s]=r}return a}function NT(e,t){return Fo(CT,e,t||{})}function RT(e,t){return Fo(DT,e,t||{})}class MT{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:a,signal:i},s){try{const{data:r,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!r)return{data:null,error:l};const o=i??ST.createNewAbortSignal();if(r.webauthn.type==="create"){const{user:c}=r.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${a}`),c.displayName||(c.displayName=c.name)}switch(r.webauthn.type){case"create":{const c=NT(r.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:d,error:f}=await OT({publicKey:c,signal:o});return d?{data:{factorId:t,challengeId:r.id,webauthn:{type:r.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const c=RT(r.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:d,error:f}=await AT(Object.assign(Object.assign({},r.webauthn.credential_options),{publicKey:c,signal:o}));return d?{data:{factorId:t,challengeId:r.id,webauthn:{type:r.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(r){return J(r)?{data:null,error:r}:{data:null,error:new xi("Unexpected error in challenge",r)}}}async _verify({challengeId:t,factorId:n,webauthn:a}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:a})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new sl("rpId is required for WebAuthn authentication")};try{if(!Dg())return{data:null,error:new xi("Browser does not support WebAuthn",null)};const{data:r,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:a},signal:i},{request:s});if(!r)return{data:null,error:l};const{webauthn:o}=r;return this._verify({factorId:t,challengeId:r.challengeId,webauthn:{type:o.type,rpId:n,rpOrigins:a,credential_response:o.credential_response}})}catch(r){return J(r)?{data:null,error:r}:{data:null,error:new xi("Unexpected error in authenticate",r)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new sl("rpId is required for WebAuthn registration")};try{if(!Dg())return{data:null,error:new xi("Browser does not support WebAuthn",null)};const{data:r,error:l}=await this._enroll({friendlyName:t});if(!r)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:o,error:c}=await this._challenge({factorId:r.id,friendlyName:r.friendly_name,webauthn:{rpId:n,rpOrigins:a},signal:i},{create:s});return o?this._verify({factorId:r.id,challengeId:o.challengeId,webauthn:{rpId:n,rpOrigins:a,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:c}}catch(r){return J(r)?{data:null,error:r}:{data:null,error:new xi("Unexpected error in register",r)}}}}gT();const kT={url:DE,storageKey:NE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:RE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ng(e,t,n){return await n()}const is={};class rl{get jwks(){var t,n;return(n=(t=is[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){is[this.storageKey]=Object.assign(Object.assign({},is[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=is[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){is[this.storageKey]=Object.assign(Object.assign({},is[this.storageKey]),{cachedAt:t})}constructor(t){var n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=rl.nextInstanceID,rl.nextInstanceID+=1,this.instanceID>0&&en()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},kT),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new fT({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=eb(i.fetch),this.lock=i.lock||Ng,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:en()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=mT:this.lock=Ng,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new MT(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:W0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cg(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Cg(this.memoryStorage)),en()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Z0}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=KE(window.location.href);let a="none";if(this._isImplicitGrantCallback(n)?a="implicit":await this._isPKCECallback(n)&&(a="pkce"),en()&&this.detectSessionInUrl&&a!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,a);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),BE(s)){const o=(t=s.details)===null||t===void 0?void 0:t.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:r,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",r,"redirect type",l),await this._saveSession(r),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return J(n)?{error:n}:{error:new xi("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,a,i;try{const s=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Pn}),{data:r,error:l}=s;if(l||!r)return{data:{user:null,session:null},error:l};const o=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(s){if(J(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,a,i;try{let s;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,b=null;this.flowType==="pkce"&&([m,b]=await ts(this.storage,this.storageKey)),s=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:b},xform:Pn})}else if("phone"in t){const{phone:d,password:f,options:h}=t;s=await ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Pn})}else throw new Fl("You must provide either an email or phone number and a password");const{data:r,error:l}=s;if(l||!r)return{data:{user:null,session:null},error:l};const o=r.session,c=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(s){if(J(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:r,options:l}=t;n=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Og})}else if("phone"in t){const{phone:s,password:r,options:l}=t;n=await ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Og})}else throw new Fl("You must provide either an email or phone number and a password");const{data:a,error:i}=n;return i?{data:{user:null,session:null},error:i}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new es}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:i})}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,a,i,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,a,i,s,r,l,o,c,d,f,h;let m,b;if("message"in t)m=t.message,b=t.signature;else{const{chain:_,wallet:S,statement:y,options:g}=t;let v;if(en())if(typeof S=="object")v=S;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")v=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=S}const w=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),x=await v.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!x||x.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=nb(x[0]);let T=(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!T){const C=await v.request({method:"eth_chainId"});T=vT(C)}const O={domain:w.host,address:j,statement:y,uri:w.href,version:"1",chainId:T,nonce:(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(r=(s=g==null?void 0:g.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.notBefore,requestId:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=pT(O),b=await v.request({method:"personal_sign",params:[yT(m),j]})}try{const{data:_,error:S}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:b},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Pn});if(S)throw S;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new es}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:S})}catch(_){if(J(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(t){var n,a,i,s,r,l,o,c,d,f,h,m;let b,_;if("message"in t)b=t.message,_=t.signature;else{const{chain:S,wallet:y,statement:g,options:v}=t;let w;if(en())if(typeof y=="object")w=y;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))w=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=y}const x=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const j=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),g?{statement:g}:null));let T;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")T=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)T=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)b=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),_=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${x.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(i=(a=v==null?void 0:v.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=v==null?void 0:v.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((r=v==null?void 0:v.signInWithSolana)===null||r===void 0)&&r.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const j=await w.signMessage(new TextEncoder().encode(b),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=j}}try{const{data:S,error:y}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Ti(_)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Pn});if(y)throw y;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new es}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:y})}catch(S){if(J(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const n=await gi(this.storage,`${this.storageKey}-code-verifier`),[a,i]=(n??"").split("/");try{const{data:s,error:r}=await ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Pn});if(await Ua(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new es}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:r})}catch(s){if(J(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:a,token:i,access_token:s,nonce:r}=t,l=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:i,access_token:s,nonce:r,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Pn}),{data:o,error:c}=l;return c?{data:{user:null,session:null},error:c}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new es}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:c})}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,a,i,s,r;try{if("email"in t){const{email:l,options:o}=t;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await ts(this.storage,this.storageKey));const{error:f}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(a=o==null?void 0:o.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:o}=t,{data:c,error:d}=await ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=o==null?void 0:o.data)!==null&&i!==void 0?i:{},create_user:(s=o==null?void 0:o.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(r=o==null?void 0:o.channel)!==null&&r!==void 0?r:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Fl("You must provide either an email or phone number.")}catch(l){if(J(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,a;try{let i,s;"options"in t&&(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:r,error:l}=await ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Pn});if(l)throw l;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,c=r.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:c,session:o},error:null}}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var n,a,i;try{let s=null,r=null;return this.flowType==="pkce"&&([s,r]=await ts(this.storage,this.storageKey)),await ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&a!==void 0?a:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:r}),headers:this.headers,xform:cT})}catch(s){if(J(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:a}=t;if(a)throw a;if(!n)throw new Zn;const{error:i}=await ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(J(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:a,type:i,options:s}=t,{error:r}=await ne(this.fetch,"POST",n,{headers:this.headers,body:{email:a,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:r}}else if("phone"in t){const{phone:a,type:i,options:s}=t,{data:r,error:l}=await ne(this.fetch,"POST",n,{headers:this.headers,body:{phone:a,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:r==null?void 0:r.message_id},error:l}}throw new Fl("You must provide either an email or phone number and a type")}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await a,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=n();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await gi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Cu:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const r=await gi(this.userStorage,this.storageKey+"-user");r!=null&&r.user?t.user=r.user:t.user=Ru()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const r={value:this.suppressGetSessionWarning};t.user=sT(t.user,r),r.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ya}):await this._useSession(async n=>{var a,i,s;const{data:r,error:l}=n;if(l)throw l;return!(!((a=r.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Zn}:await ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=r.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ya})})}catch(n){if(J(n))return LE(n)&&(await this._removeSession(),await Ua(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async a=>{const{data:i,error:s}=a;if(s)throw s;if(!i.session)throw new Zn;const r=i.session;let l=null,o=null;this.flowType==="pkce"&&t.email!=null&&([l,o]=await ts(this.storage,this.storageKey));const{data:c,error:d}=await ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:o}),jwt:r.access_token,xform:Ya});if(d)throw d;return r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(a){if(J(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Zn;const n=Date.now()/1e3;let a=n,i=!0,s=null;const{payload:r}=Nu(t.access_token);if(r.exp&&(a=r.exp,i=a<=n),i){const{data:l,error:o}=await this._callRefreshToken(t.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:o}=await this._getUser(t.access_token);if(o)throw o;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-n,expires_at:a},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(J(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var a;if(!t){const{data:r,error:l}=n;if(l)throw l;t=(a=r.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new Zn;const{data:i,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!en())throw new Wl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _g("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new _g("No code detected.");const{data:g,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:i,access_token:s,refresh_token:r,expires_in:l,expires_at:o,token_type:c}=t;if(!s||!l||!r||!c)throw new Wl("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;o&&(h=parseInt(o));const m=h-d;m*1e3<=os&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const b=h-f;d-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,h,d):d-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,h,d);const{data:_,error:S}=await this._getUser(s);if(S)throw S;const y={provider_token:a,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:h,refresh_token:r,token_type:c,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(a){if(J(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await gi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var a;const{data:i,error:s}=n;if(s)return{error:s};const r=(a=i.session)===null||a===void 0?void 0:a.access_token;if(r){const{error:l}=await this.admin.signOut(r,t);if(l&&!(zE(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ua(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=IE(),a={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async n=>{var a,i;try{const{data:{session:s},error:r}=n;if(r)throw r;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let a=null,i=null;this.flowType==="pkce"&&([a,i]=await ts(this.storage,this.storageKey,!0));try{return await ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(J(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(J(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:a,error:i}=await this._useSession(async s=>{var r,l,o,c,d;const{data:f,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await ne(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return en()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(J(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var a;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:r,provider:l,token:o,access_token:c,nonce:d}=t,f=await ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=s==null?void 0:s.access_token)!==null&&a!==void 0?a:void 0,body:{provider:l,id_token:o,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Pn}),{data:h,error:m}=f;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new es}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:m})}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var a,i;const{data:s,error:r}=n;if(r)throw r;return await ne(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const a=Date.now();return await JE(async i=>(i>0&&await QE(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Pn})),(i,s)=>{const r=200*Math.pow(2,i);return s&&Du(s)&&Date.now()+r-a<os})}catch(a){if(this._debug(n,"error",a),J(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",a),en()&&!n.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,n;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const i=await gi(this.storage,this.storageKey);if(i&&this.userStorage){let r=await gi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!r&&(r={user:i.user},await cs(this.userStorage,this.storageKey+"-user",r)),i.user=(t=r==null?void 0:r.user)!==null&&t!==void 0?t:Ru()}else if(i&&!i.user&&!i.user){const r=await gi(this.storage,this.storageKey+"-user");r&&(r!=null&&r.user)?(i.user=r.user,await Ua(this.storage,this.storageKey+"-user"),await cs(this.storage,this.storageKey,i)):i.user=Ru()}if(this._debug(a,"session from storage",i),!this._isValidSession(i)){this._debug(a,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Cu;if(this._debug(a,`session has${s?"":" not"} expired with margin of ${Cu}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:r}=await this._callRefreshToken(i.refresh_token);r&&(console.error(r),Du(r)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",r),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:r,error:l}=await this._getUser(i.access_token);!l&&(r!=null&&r.user)?(i.user=r.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(a,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(a,"error",i),console.error(i);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var n,a;if(!t)throw new Zn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Tc;const{data:s,error:r}=await this._refreshAccessToken(t);if(r)throw r;if(!s.session)throw new Zn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),J(s)){const r={data:null,error:s};return Du(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(r),r}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,n,a=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",n,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],r=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(o){s.push(o)}});if(await Promise.all(r),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),a=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&n.user&&await cs(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Tg(i);await cs(this.storage,this.storageKey,s)}else{const i=Tg(n);await cs(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ua(this.storage,this.storageKey),await Ua(this.storage,this.storageKey+"-code-verifier"),await Ua(this.storage,this.storageKey+"-user"),this.userStorage&&await Ua(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&en()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),os);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:a}}=n;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((a.expires_at*1e3-t)/os);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${os}ms, refresh threshold is ${Kd} ticks`),i<=Kd&&await this._callRefreshToken(a.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof tb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!en()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,a){const i=[`provider=${encodeURIComponent(n)}`];if(a!=null&&a.redirectTo&&i.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&i.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[s,r]=await ts(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(r)}`});i.push(l.toString())}if(a!=null&&a.queryParams){const s=new URLSearchParams(a.queryParams);i.push(s.toString())}return a!=null&&a.skipBrowserRedirect&&i.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var a;const{data:i,error:s}=n;return s?{data:null,error:s}:await ne(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var a,i;const{data:s,error:r}=n;if(r)return{data:null,error:r};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:o,error:c}=await ne(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=s==null?void 0:s.session)===null||a===void 0?void 0:a.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&o.type==="totp"&&(!((i=o==null?void 0:o.totp)===null||i===void 0)&&i.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:i,error:s}=n;if(s)return{data:null,error:s};const r=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?TT(t.webauthn.credential_response):jT(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:o}=await ne(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:r,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(n){if(J(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:i,error:s}=n;if(s)return{data:null,error:s};const r=await ne(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});if(r.error)return r;const{data:l}=r;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:xT(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:ET(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(J(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:a}=await this.getUser();if(a)return{data:null,error:a};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:a},error:i}=await this.getSession();if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Nu(a.access_token);let r=null;s.aal&&(r=s.aal);let l=r;((n=(t=a.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=s.amr||[];return{data:{currentLevel:r,nextLevel:l,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;return i?{data:null,error:i}:a?await ne(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:a.access_token,xform:s=>({data:s,error:null})}):{data:null,error:new Zn}})}catch(n){if(J(n))return{data:null,error:n};throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async a=>{const{data:{session:i},error:s}=a;if(s)return{data:null,error:s};if(!i)return{data:null,error:new Zn};const r=await ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return r.data&&r.data.redirect_url&&en()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(r.data.redirect_url),r})}catch(a){if(J(a))return{data:null,error:a};throw a}}async _denyAuthorization(t,n){try{return await this._useSession(async a=>{const{data:{session:i},error:s}=a;if(s)return{data:null,error:s};if(!i)return{data:null,error:new Zn};const r=await ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return r.data&&r.data.redirect_url&&en()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(r.data.redirect_url),r})}catch(a){if(J(a))return{data:null,error:a};throw a}}async fetchJwk(t,n={keys:[]}){let a=n.keys.find(l=>l.kid===t);if(a)return a;const i=Date.now();if(a=this.jwks.keys.find(l=>l.kid===t),a&&this.jwks_cached_at+kE>i)return a;const{data:s,error:r}=await ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,a=s.keys.find(l=>l.kid===t),!a)?null:a}async getClaims(t,n={}){try{let a=t;if(!a){const{data:m,error:b}=await this.getSession();if(b||!m.session)return{data:null,error:b};a=m.session.access_token}const{header:i,payload:s,signature:r,raw:{header:l,payload:o}}=Nu(a);n!=null&&n.allowExpired||nT(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:m}=await this.getUser(a);if(m)throw m;return{data:{claims:s,header:i,signature:r},error:null}}const d=aT(i.alg),f=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,r,YE(`${l}.${o}`)))throw new Jd("Invalid JWT signature");return{data:{claims:s,header:i,signature:r},error:null}}catch(a){if(J(a))return{data:null,error:a};throw a}}}rl.nextInstanceID=0;const UT=rl;class zT extends UT{constructor(t){super(t)}}class LT{constructor(t,n,a){var i,s,r;this.supabaseUrl=t,this.supabaseKey=n;const l=CE(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const o=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:wE,realtime:xE,auth:Object.assign(Object.assign({},SE),{storageKey:o}),global:_E},d=AE(a??{},c);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((r=d.auth)!==null&&r!==void 0?r:{},this.headers,d.global.fetch),this.fetch=jE(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Dx(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new yE(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Sx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,a)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:a}=await this.auth.getSession();return(n=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:s,storageKey:r,flowType:l,lock:o,debug:c},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zT({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:r,autoRefreshToken:t,persistSession:n,detectSessionInUrl:a,storage:i,userStorage:s,flowType:l,lock:o,debug:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Xx(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,a)=>{this._handleTokenChanged(n,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,n,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const BT=(e,t,n)=>new LT(e,t,n);function HT(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}HT()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qT="https://vqpubtahhvtkftafdlrp.supabase.co",$T="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZxcHVidGFoaHZ0a2Z0YWZkbHJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMjQ2NjUsImV4cCI6MjA3NzgwMDY2NX0.o2905IF2CWRJ-krYtA6MnL7_KALlNiwD211Sw-of7mI",Te=BT(qT,$T);function VT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.useMemo(()=>a=>{t.forEach(i=>i(a))},t)}const jc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ir(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function uh(e){return"nodeType"in e}function rn(e){var t,n;return e?ir(e)?e:uh(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function dh(e){const{Document:t}=rn(e);return e instanceof t}function Sl(e){return ir(e)?!1:e instanceof rn(e).HTMLElement}function ib(e){return e instanceof rn(e).SVGElement}function sr(e){return e?ir(e)?e.document:uh(e)?dh(e)?e:Sl(e)||ib(e)?e.ownerDocument:document:document:document}const ta=jc?p.useLayoutEffect:p.useEffect;function Oc(e){const t=p.useRef(e);return ta(()=>{t.current=e}),p.useCallback(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t.current==null?void 0:t.current(...a)},[])}function YT(){const e=p.useRef(null),t=p.useCallback((a,i)=>{e.current=setInterval(a,i)},[]),n=p.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function ll(e,t){t===void 0&&(t=[e]);const n=p.useRef(e);return ta(()=>{n.current!==e&&(n.current=e)},t),n}function xl(e,t){const n=p.useRef();return p.useMemo(()=>{const a=e(n.current);return n.current=a,a},[...t])}function Wo(e){const t=Oc(e),n=p.useRef(null),a=p.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,a]}function ec(e){const t=p.useRef();return p.useEffect(()=>{t.current=e},[e]),t.current}let ku={};function El(e,t){return p.useMemo(()=>{if(t)return t;const n=ku[e]==null?0:ku[e]+1;return ku[e]=n,e+"-"+n},[e,t])}function sb(e){return function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((s,r)=>{const l=Object.entries(r);for(const[o,c]of l){const d=s[o];d!=null&&(s[o]=d+e*c)}return s},{...t})}}const Ns=sb(1),ol=sb(-1);function GT(e){return"clientX"in e&&"clientY"in e}function Ac(e){if(!e)return!1;const{KeyboardEvent:t}=rn(e.target);return t&&e instanceof t}function IT(e){if(!e)return!1;const{TouchEvent:t}=rn(e.target);return t&&e instanceof t}function tc(e){if(IT(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return GT(e)?{x:e.clientX,y:e.clientY}:null}const Li=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Li.Translate.toString(e),Li.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:a}=e;return t+" "+n+"ms "+a}}}),Rg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function KT(e){return e.matches(Rg)?e:e.querySelector(Rg)}const XT={display:"none"};function QT(e){let{id:t,value:n}=e;return ft.createElement("div",{id:t,style:XT},n)}function JT(e){let{id:t,announcement:n,ariaLiveType:a="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ft.createElement("div",{id:t,style:i,role:"status","aria-live":a,"aria-atomic":!0},n)}function ZT(){const[e,t]=p.useState("");return{announce:p.useCallback(a=>{a!=null&&t(a)},[]),announcement:e}}const rb=p.createContext(null);function PT(e){const t=p.useContext(rb);p.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function FT(){const[e]=p.useState(()=>new Set),t=p.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[p.useCallback(a=>{let{type:i,event:s}=a;e.forEach(r=>{var l;return(l=r[i])==null?void 0:l.call(r,s)})},[e]),t]}const WT={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},e1={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function t1(e){let{announcements:t=e1,container:n,hiddenTextDescribedById:a,screenReaderInstructions:i=WT}=e;const{announce:s,announcement:r}=ZT(),l=El("DndLiveRegion"),[o,c]=p.useState(!1);if(p.useEffect(()=>{c(!0)},[]),PT(p.useMemo(()=>({onDragStart(f){let{active:h}=f;s(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:m}=f;t.onDragMove&&s(t.onDragMove({active:h,over:m}))},onDragOver(f){let{active:h,over:m}=f;s(t.onDragOver({active:h,over:m}))},onDragEnd(f){let{active:h,over:m}=f;s(t.onDragEnd({active:h,over:m}))},onDragCancel(f){let{active:h,over:m}=f;s(t.onDragCancel({active:h,over:m}))}}),[s,t])),!o)return null;const d=ft.createElement(ft.Fragment,null,ft.createElement(QT,{id:a,value:i.draggable}),ft.createElement(JT,{id:l,announcement:r}));return n?Ei.createPortal(d,n):d}var Ut;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ut||(Ut={}));function nc(){}function Uu(e,t){return p.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function n1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.useMemo(()=>[...t].filter(a=>a!=null),[...t])}const na=Object.freeze({x:0,y:0});function lb(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function a1(e,t){const n=tc(e);if(!n)return"0 0";const a={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}function ob(e,t){let{data:{value:n}}=e,{data:{value:a}}=t;return n-a}function i1(e,t){let{data:{value:n}}=e,{data:{value:a}}=t;return a-n}function Mg(e){let{left:t,top:n,height:a,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+a},{x:t+i,y:n+a}]}function cb(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function kg(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const s1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const i=kg(t,t.left,t.top),s=[];for(const r of a){const{id:l}=r,o=n.get(l);if(o){const c=lb(kg(o),i);s.push({id:l,data:{droppableContainer:r,value:c}})}}return s.sort(ob)},r1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const i=Mg(t),s=[];for(const r of a){const{id:l}=r,o=n.get(l);if(o){const c=Mg(o),d=i.reduce((h,m,b)=>h+lb(c[b],m),0),f=Number((d/4).toFixed(4));s.push({id:l,data:{droppableContainer:r,value:f}})}}return s.sort(ob)};function l1(e,t){const n=Math.max(t.top,e.top),a=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),r=i-a,l=s-n;if(a<i&&n<s){const o=t.width*t.height,c=e.width*e.height,d=r*l,f=d/(o+c-d);return Number(f.toFixed(4))}return 0}const o1=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const i=[];for(const s of a){const{id:r}=s,l=n.get(r);if(l){const o=l1(l,t);o>0&&i.push({id:r,data:{droppableContainer:s,value:o}})}}return i.sort(i1)};function c1(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function ub(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:na}function u1(e){return function(n){for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return i.reduce((r,l)=>({...r,top:r.top+e*l.y,bottom:r.bottom+e*l.y,left:r.left+e*l.x,right:r.right+e*l.x}),{...n})}}const d1=u1(1);function db(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function f1(e,t,n){const a=db(t);if(!a)return e;const{scaleX:i,scaleY:s,x:r,y:l}=a,o=e.left-r-(1-i)*parseFloat(n),c=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?e.width/i:e.width,f=s?e.height/s:e.height;return{width:d,height:f,top:c,right:o+d,bottom:c+f,left:o}}const h1={ignoreTransform:!1};function rr(e,t){t===void 0&&(t=h1);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:d}=rn(e).getComputedStyle(e);c&&(n=f1(n,c,d))}const{top:a,left:i,width:s,height:r,bottom:l,right:o}=n;return{top:a,left:i,width:s,height:r,bottom:l,right:o}}function Ug(e){return rr(e,{ignoreTransform:!0})}function m1(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function g1(e,t){return t===void 0&&(t=rn(e).getComputedStyle(e)),t.position==="fixed"}function v1(e,t){t===void 0&&(t=rn(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function Cc(e,t){const n=[];function a(i){if(t!=null&&n.length>=t||!i)return n;if(dh(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Sl(i)||ib(i)||n.includes(i))return n;const s=rn(e).getComputedStyle(i);return i!==e&&v1(i,s)&&n.push(i),g1(i,s)?n:a(i.parentNode)}return e?a(e):n}function fb(e){const[t]=Cc(e,1);return t??null}function zu(e){return!jc||!e?null:ir(e)?e:uh(e)?dh(e)||e===sr(e).scrollingElement?window:Sl(e)?e:null:null}function hb(e){return ir(e)?e.scrollX:e.scrollLeft}function mb(e){return ir(e)?e.scrollY:e.scrollTop}function Zd(e){return{x:hb(e),y:mb(e)}}var qt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(qt||(qt={}));function gb(e){return!jc||!e?!1:e===document.scrollingElement}function vb(e){const t={x:0,y:0},n=gb(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,r=e.scrollTop>=a.y,l=e.scrollLeft>=a.x;return{isTop:i,isLeft:s,isBottom:r,isRight:l,maxScroll:a,minScroll:t}}const y1={x:.2,y:.2};function p1(e,t,n,a,i){let{top:s,left:r,right:l,bottom:o}=n;a===void 0&&(a=10),i===void 0&&(i=y1);const{isTop:c,isBottom:d,isLeft:f,isRight:h}=vb(e),m={x:0,y:0},b={x:0,y:0},_={height:t.height*i.y,width:t.width*i.x};return!c&&s<=t.top+_.height?(m.y=qt.Backward,b.y=a*Math.abs((t.top+_.height-s)/_.height)):!d&&o>=t.bottom-_.height&&(m.y=qt.Forward,b.y=a*Math.abs((t.bottom-_.height-o)/_.height)),!h&&l>=t.right-_.width?(m.x=qt.Forward,b.x=a*Math.abs((t.right-_.width-l)/_.width)):!f&&r<=t.left+_.width&&(m.x=qt.Backward,b.x=a*Math.abs((t.left+_.width-r)/_.width)),{direction:m,speed:b}}function b1(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:r}=window;return{top:0,left:0,right:s,bottom:r,width:s,height:r}}const{top:t,left:n,right:a,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:a,bottom:i,width:e.clientWidth,height:e.clientHeight}}function yb(e){return e.reduce((t,n)=>Ns(t,Zd(n)),na)}function _1(e){return e.reduce((t,n)=>t+hb(n),0)}function w1(e){return e.reduce((t,n)=>t+mb(n),0)}function pb(e,t){if(t===void 0&&(t=rr),!e)return;const{top:n,left:a,bottom:i,right:s}=t(e);fb(e)&&(i<=0||s<=0||n>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const S1=[["x",["left","right"],_1],["y",["top","bottom"],w1]];class fh{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=Cc(n),i=yb(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,r,l]of S1)for(const o of r)Object.defineProperty(this,o,{get:()=>{const c=l(a),d=i[s]-c;return this.rect[o]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $r{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...n)})},this.target=t}add(t,n,a){var i;(i=this.target)==null||i.addEventListener(t,n,a),this.listeners.push([t,n,a])}}function x1(e){const{EventTarget:t}=rn(e);return e instanceof t?e:sr(e)}function Lu(e,t){const n=Math.abs(e.x),a=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+a**2)>t:"x"in t&&"y"in t?n>t.x&&a>t.y:"x"in t?n>t.x:"y"in t?a>t.y:!1}var Hn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Hn||(Hn={}));function zg(e){e.preventDefault()}function E1(e){e.stopPropagation()}var Ae;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ae||(Ae={}));const bb={start:[Ae.Space,Ae.Enter],cancel:[Ae.Esc],end:[Ae.Space,Ae.Enter,Ae.Tab]},T1=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Ae.Right:return{...n,x:n.x+25};case Ae.Left:return{...n,x:n.x-25};case Ae.Down:return{...n,y:n.y+25};case Ae.Up:return{...n,y:n.y-25}}};class hh{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new $r(sr(n)),this.windowListeners=new $r(rn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Hn.Resize,this.handleCancel),this.windowListeners.add(Hn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Hn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,a=t.node.current;a&&pb(a),n(na)}handleKeyDown(t){if(Ac(t)){const{active:n,context:a,options:i}=this.props,{keyboardCodes:s=bb,coordinateGetter:r=T1,scrollBehavior:l="smooth"}=i,{code:o}=t;if(s.end.includes(o)){this.handleEnd(t);return}if(s.cancel.includes(o)){this.handleCancel(t);return}const{collisionRect:c}=a.current,d=c?{x:c.left,y:c.top}:na;this.referenceCoordinates||(this.referenceCoordinates=d);const f=r(t,{active:n,context:a.current,currentCoordinates:d});if(f){const h=ol(f,d),m={x:0,y:0},{scrollableAncestors:b}=a.current;for(const _ of b){const S=t.code,{isTop:y,isRight:g,isLeft:v,isBottom:w,maxScroll:x,minScroll:j}=vb(_),T=b1(_),O={x:Math.min(S===Ae.Right?T.right-T.width/2:T.right,Math.max(S===Ae.Right?T.left:T.left+T.width/2,f.x)),y:Math.min(S===Ae.Down?T.bottom-T.height/2:T.bottom,Math.max(S===Ae.Down?T.top:T.top+T.height/2,f.y))},C=S===Ae.Right&&!g||S===Ae.Left&&!v,B=S===Ae.Down&&!w||S===Ae.Up&&!y;if(C&&O.x!==f.x){const W=_.scrollLeft+h.x,qe=S===Ae.Right&&W<=x.x||S===Ae.Left&&W>=j.x;if(qe&&!h.y){_.scrollTo({left:W,behavior:l});return}qe?m.x=_.scrollLeft-W:m.x=S===Ae.Right?_.scrollLeft-x.x:_.scrollLeft-j.x,m.x&&_.scrollBy({left:-m.x,behavior:l});break}else if(B&&O.y!==f.y){const W=_.scrollTop+h.y,qe=S===Ae.Down&&W<=x.y||S===Ae.Up&&W>=j.y;if(qe&&!h.x){_.scrollTo({top:W,behavior:l});return}qe?m.y=_.scrollTop-W:m.y=S===Ae.Down?_.scrollTop-x.y:_.scrollTop-j.y,m.y&&_.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,Ns(ol(f,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:a}=this.props;t.preventDefault(),a(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}hh.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:a=bb,onActivation:i}=t,{active:s}=n;const{code:r}=e.nativeEvent;if(a.start.includes(r)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function Lg(e){return!!(e&&"distance"in e)}function Bg(e){return!!(e&&"delay"in e)}class mh{constructor(t,n,a){var i;a===void 0&&(a=x1(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:r}=s;this.props=t,this.events=n,this.document=sr(r),this.documentListeners=new $r(this.document),this.listeners=new $r(a),this.windowListeners=new $r(rn(r)),this.initialCoordinates=(i=tc(s))!=null?i:na,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Hn.Resize,this.handleCancel),this.windowListeners.add(Hn.DragStart,zg),this.windowListeners.add(Hn.VisibilityChange,this.handleCancel),this.windowListeners.add(Hn.ContextMenu,zg),this.documentListeners.add(Hn.Keydown,this.handleKeydown),n){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Bg(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Lg(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:a,onPending:i}=this.props;i(a,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Hn.Click,E1,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Hn.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:a,initialCoordinates:i,props:s}=this,{onMove:r,options:{activationConstraint:l}}=s;if(!i)return;const o=(n=tc(t))!=null?n:na,c=ol(i,o);if(!a&&l){if(Lg(l)){if(l.tolerance!=null&&Lu(c,l.tolerance))return this.handleCancel();if(Lu(c,l.distance))return this.handleStart()}if(Bg(l)&&Lu(c,l.tolerance))return this.handleCancel();this.handlePending(l,c);return}t.cancelable&&t.preventDefault(),r(o)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Ae.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const j1={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class gh extends mh{constructor(t){const{event:n}=t,a=sr(n.target);super(t,j1,a)}}gh.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;return!n.isPrimary||n.button!==0?!1:(a==null||a({event:n}),!0)}}];const O1={move:{name:"mousemove"},end:{name:"mouseup"}};var Pd;(function(e){e[e.RightClick=2]="RightClick"})(Pd||(Pd={}));class A1 extends mh{constructor(t){super(t,O1,sr(t.event.target))}}A1.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;return n.button===Pd.RightClick?!1:(a==null||a({event:n}),!0)}}];const Bu={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class _b extends mh{constructor(t){super(t,Bu)}static setup(){return window.addEventListener(Bu.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Bu.move.name,t)};function t(){}}}_b.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;const{touches:i}=n;return i.length>1?!1:(a==null||a({event:n}),!0)}}];var Vr;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Vr||(Vr={}));var ac;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ac||(ac={}));function C1(e){let{acceleration:t,activator:n=Vr.Pointer,canScroll:a,draggingRect:i,enabled:s,interval:r=5,order:l=ac.TreeOrder,pointerCoordinates:o,scrollableAncestors:c,scrollableAncestorRects:d,delta:f,threshold:h}=e;const m=N1({delta:f,disabled:!s}),[b,_]=YT(),S=p.useRef({x:0,y:0}),y=p.useRef({x:0,y:0}),g=p.useMemo(()=>{switch(n){case Vr.Pointer:return o?{top:o.y,bottom:o.y,left:o.x,right:o.x}:null;case Vr.DraggableRect:return i}},[n,i,o]),v=p.useRef(null),w=p.useCallback(()=>{const j=v.current;if(!j)return;const T=S.current.x*y.current.x,O=S.current.y*y.current.y;j.scrollBy(T,O)},[]),x=p.useMemo(()=>l===ac.TreeOrder?[...c].reverse():c,[l,c]);p.useEffect(()=>{if(!s||!c.length||!g){_();return}for(const j of x){if((a==null?void 0:a(j))===!1)continue;const T=c.indexOf(j),O=d[T];if(!O)continue;const{direction:C,speed:B}=p1(j,O,g,t,h);for(const W of["x","y"])m[W][C[W]]||(B[W]=0,C[W]=0);if(B.x>0||B.y>0){_(),v.current=j,b(w,r),S.current=B,y.current=C;return}}S.current={x:0,y:0},y.current={x:0,y:0},_()},[t,w,a,_,s,r,JSON.stringify(g),JSON.stringify(m),b,c,x,d,JSON.stringify(h)])}const D1={x:{[qt.Backward]:!1,[qt.Forward]:!1},y:{[qt.Backward]:!1,[qt.Forward]:!1}};function N1(e){let{delta:t,disabled:n}=e;const a=ec(t);return xl(i=>{if(n||!a||!i)return D1;const s={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[qt.Backward]:i.x[qt.Backward]||s.x===-1,[qt.Forward]:i.x[qt.Forward]||s.x===1},y:{[qt.Backward]:i.y[qt.Backward]||s.y===-1,[qt.Forward]:i.y[qt.Forward]||s.y===1}}},[n,t,a])}function R1(e,t){const n=t!=null?e.get(t):void 0,a=n?n.node.current:null;return xl(i=>{var s;return t==null?null:(s=a??i)!=null?s:null},[a,t])}function M1(e,t){return p.useMemo(()=>e.reduce((n,a)=>{const{sensor:i}=a,s=i.activators.map(r=>({eventName:r.eventName,handler:t(r.handler,a)}));return[...n,...s]},[]),[e,t])}var Is;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Is||(Is={}));var Fd;(function(e){e.Optimized="optimized"})(Fd||(Fd={}));const Hg=new Map;function k1(e,t){let{dragging:n,dependencies:a,config:i}=t;const[s,r]=p.useState(null),{frequency:l,measure:o,strategy:c}=i,d=p.useRef(e),f=S(),h=ll(f),m=p.useCallback(function(y){y===void 0&&(y=[]),!h.current&&r(g=>g===null?y:g.concat(y.filter(v=>!g.includes(v))))},[h]),b=p.useRef(null),_=xl(y=>{if(f&&!n)return Hg;if(!y||y===Hg||d.current!==e||s!=null){const g=new Map;for(let v of e){if(!v)continue;if(s&&s.length>0&&!s.includes(v.id)&&v.rect.current){g.set(v.id,v.rect.current);continue}const w=v.node.current,x=w?new fh(o(w),w):null;v.rect.current=x,x&&g.set(v.id,x)}return g}return y},[e,s,n,f,o]);return p.useEffect(()=>{d.current=e},[e]),p.useEffect(()=>{f||m()},[n,f]),p.useEffect(()=>{s&&s.length>0&&r(null)},[JSON.stringify(s)]),p.useEffect(()=>{f||typeof l!="number"||b.current!==null||(b.current=setTimeout(()=>{m(),b.current=null},l))},[l,f,m,...a]),{droppableRects:_,measureDroppableContainers:m,measuringScheduled:s!=null};function S(){switch(c){case Is.Always:return!1;case Is.BeforeDragging:return n;default:return!n}}}function vh(e,t){return xl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function U1(e,t){return vh(e,t)}function z1(e){let{callback:t,disabled:n}=e;const a=Oc(t),i=p.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(a)},[a,n]);return p.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Dc(e){let{callback:t,disabled:n}=e;const a=Oc(t),i=p.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(a)},[n]);return p.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function L1(e){return new fh(rr(e),e)}function qg(e,t,n){t===void 0&&(t=L1);const[a,i]=p.useState(null);function s(){i(o=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=o??n)!=null?c:null}const d=t(e);return JSON.stringify(o)===JSON.stringify(d)?o:d})}const r=z1({callback(o){if(e)for(const c of o){const{type:d,target:f}=c;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){s();break}}}}),l=Dc({callback:s});return ta(()=>{s(),e?(l==null||l.observe(e),r==null||r.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),r==null||r.disconnect())},[e]),a}function B1(e){const t=vh(e);return ub(e,t)}const $g=[];function H1(e){const t=p.useRef(e),n=xl(a=>e?a&&a!==$g&&e&&t.current&&e.parentNode===t.current.parentNode?a:Cc(e):$g,[e]);return p.useEffect(()=>{t.current=e},[e]),n}function q1(e){const[t,n]=p.useState(null),a=p.useRef(e),i=p.useCallback(s=>{const r=zu(s.target);r&&n(l=>l?(l.set(r,Zd(r)),new Map(l)):null)},[]);return p.useEffect(()=>{const s=a.current;if(e!==s){r(s);const l=e.map(o=>{const c=zu(o);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,Zd(c)]):null}).filter(o=>o!=null);n(l.length?new Map(l):null),a.current=e}return()=>{r(e),r(s)};function r(l){l.forEach(o=>{const c=zu(o);c==null||c.removeEventListener("scroll",i)})}},[i,e]),p.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,r)=>Ns(s,r),na):yb(e):na,[e,t])}function Vg(e,t){t===void 0&&(t=[]);const n=p.useRef(null);return p.useEffect(()=>{n.current=null},t),p.useEffect(()=>{const a=e!==na;a&&!n.current&&(n.current=e),!a&&n.current&&(n.current=null)},[e]),n.current?ol(e,n.current):na}function $1(e){p.useEffect(()=>{if(!jc)return;const t=e.map(n=>{let{sensor:a}=n;return a.setup==null?void 0:a.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function V1(e,t){return p.useMemo(()=>e.reduce((n,a)=>{let{eventName:i,handler:s}=a;return n[i]=r=>{s(r,t)},n},{}),[e,t])}function wb(e){return p.useMemo(()=>e?m1(e):null,[e])}const Yg=[];function Y1(e,t){t===void 0&&(t=rr);const[n]=e,a=wb(n?rn(n):null),[i,s]=p.useState(Yg);function r(){s(()=>e.length?e.map(o=>gb(o)?a:new fh(t(o),o)):Yg)}const l=Dc({callback:r});return ta(()=>{l==null||l.disconnect(),r(),e.forEach(o=>l==null?void 0:l.observe(o))},[e]),i}function Sb(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Sl(t)?t:e}function G1(e){let{measure:t}=e;const[n,a]=p.useState(null),i=p.useCallback(c=>{for(const{target:d}of c)if(Sl(d)){a(f=>{const h=t(d);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),s=Dc({callback:i}),r=p.useCallback(c=>{const d=Sb(c);s==null||s.disconnect(),d&&(s==null||s.observe(d)),a(d?t(d):null)},[t,s]),[l,o]=Wo(r);return p.useMemo(()=>({nodeRef:l,rect:n,setRef:o}),[n,l,o])}const I1=[{sensor:gh,options:{}},{sensor:hh,options:{}}],K1={current:{}},po={draggable:{measure:Ug},droppable:{measure:Ug,strategy:Is.WhileDragging,frequency:Fd.Optimized},dragOverlay:{measure:rr}};class Yr extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,a;return(n=(a=this.get(t))==null?void 0:a.node.current)!=null?n:void 0}}const X1={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Yr,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:nc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:po,measureDroppableContainers:nc,windowRect:null,measuringScheduled:!1},xb={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:nc,draggableNodes:new Map,over:null,measureDroppableContainers:nc},Tl=p.createContext(xb),Eb=p.createContext(X1);function Q1(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Yr}}}function J1(e,t){switch(t.type){case Ut.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ut.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ut.DragEnd:case Ut.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ut.RegisterDroppable:{const{element:n}=t,{id:a}=n,i=new Yr(e.droppable.containers);return i.set(a,n),{...e,droppable:{...e.droppable,containers:i}}}case Ut.SetDroppableDisabled:{const{id:n,key:a,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||a!==s.key)return e;const r=new Yr(e.droppable.containers);return r.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:r}}}case Ut.UnregisterDroppable:{const{id:n,key:a}=t,i=e.droppable.containers.get(n);if(!i||a!==i.key)return e;const s=new Yr(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Z1(e){let{disabled:t}=e;const{active:n,activatorEvent:a,draggableNodes:i}=p.useContext(Tl),s=ec(a),r=ec(n==null?void 0:n.id);return p.useEffect(()=>{if(!t&&!a&&s&&r!=null){if(!Ac(s)||document.activeElement===s.target)return;const l=i.get(r);if(!l)return;const{activatorNode:o,node:c}=l;if(!o.current&&!c.current)return;requestAnimationFrame(()=>{for(const d of[o.current,c.current]){if(!d)continue;const f=KT(d);if(f){f.focus();break}}})}},[a,t,i,r,s]),null}function Tb(e,t){let{transform:n,...a}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...a}),n):n}function P1(e){return p.useMemo(()=>({draggable:{...po.draggable,...e==null?void 0:e.draggable},droppable:{...po.droppable,...e==null?void 0:e.droppable},dragOverlay:{...po.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function F1(e){let{activeNode:t,measure:n,initialRect:a,config:i=!0}=e;const s=p.useRef(!1),{x:r,y:l}=typeof i=="boolean"?{x:i,y:i}:i;ta(()=>{if(!r&&!l||!t){s.current=!1;return}if(s.current||!a)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const d=n(c),f=ub(d,a);if(r||(f.x=0),l||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=fb(c);h&&h.scrollBy({top:f.y,left:f.x})}},[t,r,l,a,n])}const Nc=p.createContext({...na,scaleX:1,scaleY:1});var Ba;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ba||(Ba={}));const W1=p.memo(function(t){var n,a,i,s;let{id:r,accessibility:l,autoScroll:o=!0,children:c,sensors:d=I1,collisionDetection:f=o1,measuring:h,modifiers:m,...b}=t;const _=p.useReducer(J1,void 0,Q1),[S,y]=_,[g,v]=FT(),[w,x]=p.useState(Ba.Uninitialized),j=w===Ba.Initialized,{draggable:{active:T,nodes:O,translate:C},droppable:{containers:B}}=S,W=T!=null?O.get(T):null,qe=p.useRef({initial:null,translated:null}),Ge=p.useMemo(()=>{var I;return T!=null?{id:T,data:(I=W==null?void 0:W.data)!=null?I:K1,rect:qe}:null},[T,W]),Xe=p.useRef(null),[ke,L]=p.useState(null),[Y,Q]=p.useState(null),fe=ll(b,Object.values(b)),ce=El("DndDescribedBy",r),St=p.useMemo(()=>B.getEnabled(),[B]),Ue=P1(h),{droppableRects:vt,measureDroppableContainers:Pe,measuringScheduled:Qe}=k1(St,{dragging:j,dependencies:[C.x,C.y],config:Ue.droppable}),nt=R1(O,T),ln=p.useMemo(()=>Y?tc(Y):null,[Y]),Fe=Ne(),ot=U1(nt,Ue.draggable.measure);F1({activeNode:T!=null?O.get(T):null,config:Fe.layoutShiftCompensation,initialRect:ot,measure:Ue.draggable.measure});const be=qg(nt,Ue.draggable.measure,ot),pn=qg(nt?nt.parentElement:null),Yt=p.useRef({activatorEvent:null,active:null,activeNode:nt,collisionRect:null,collisions:null,droppableRects:vt,draggableNodes:O,draggingNode:null,draggingNodeRect:null,droppableContainers:B,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),bn=B.getNodeFor((n=Yt.current.over)==null?void 0:n.id),Tt=G1({measure:Ue.dragOverlay.measure}),_n=(a=Tt.nodeRef.current)!=null?a:nt,wn=j?(i=Tt.rect)!=null?i:be:null,Z=!!(Tt.nodeRef.current&&Tt.rect),ie=B1(Z?null:be),_e=wb(_n?rn(_n):null),De=H1(j?bn??nt:null),Bt=Y1(De),Rt=Tb(m,{transform:{x:C.x-ie.x,y:C.y-ie.y,scaleX:1,scaleY:1},activatorEvent:Y,active:Ge,activeNodeRect:be,containerNodeRect:pn,draggingNodeRect:wn,over:Yt.current.over,overlayNodeRect:Tt.rect,scrollableAncestors:De,scrollableAncestorRects:Bt,windowRect:_e}),on=ln?Ns(ln,C):null,ht=q1(De),mt=Vg(ht),Me=Vg(ht,[be]),xe=Ns(Rt,mt),ee=wn?d1(wn,Rt):null,$e=Ge&&ee?f({active:Ge,collisionRect:ee,droppableRects:vt,droppableContainers:St,pointerCoordinates:on}):null,yt=cb($e,"id"),[N,U]=p.useState(null),z=Z?Rt:Ns(Rt,Me),F=c1(z,(s=N==null?void 0:N.rect)!=null?s:null,be),q=p.useRef(null),P=p.useCallback((I,ye)=>{let{sensor:te,options:ze}=ye;if(Xe.current==null)return;const me=O.get(Xe.current);if(!me)return;const ue=I.nativeEvent,K=new te({active:Xe.current,activeNode:me,event:ue,options:ze,context:Yt,onAbort(We){if(!O.get(We))return;const{onDragAbort:Pt}=fe.current,Ft={id:We};Pt==null||Pt(Ft),g({type:"onDragAbort",event:Ft})},onPending(We,Gt,Pt,Ft){if(!O.get(We))return;const{onDragPending:ua}=fe.current,zn={id:We,constraint:Gt,initialCoordinates:Pt,offset:Ft};ua==null||ua(zn),g({type:"onDragPending",event:zn})},onStart(We){const Gt=Xe.current;if(Gt==null)return;const Pt=O.get(Gt);if(!Pt)return;const{onDragStart:Ft}=fe.current,Un={activatorEvent:ue,active:{id:Gt,data:Pt.data,rect:qe}};Ei.unstable_batchedUpdates(()=>{Ft==null||Ft(Un),x(Ba.Initializing),y({type:Ut.DragStart,initialCoordinates:We,active:Gt}),g({type:"onDragStart",event:Un}),L(q.current),Q(ue)})},onMove(We){y({type:Ut.DragMove,coordinates:We})},onEnd:Zt(Ut.DragEnd),onCancel:Zt(Ut.DragCancel)});q.current=K;function Zt(We){return async function(){const{active:Pt,collisions:Ft,over:Un,scrollAdjustedTranslate:ua}=Yt.current;let zn=null;if(Pt&&ua){const{cancelDrop:da}=fe.current;zn={activatorEvent:ue,active:Pt,collisions:Ft,delta:ua,over:Un},We===Ut.DragEnd&&typeof da=="function"&&await Promise.resolve(da(zn))&&(We=Ut.DragCancel)}Xe.current=null,Ei.unstable_batchedUpdates(()=>{y({type:We}),x(Ba.Uninitialized),U(null),L(null),Q(null),q.current=null;const da=We===Ut.DragEnd?"onDragEnd":"onDragCancel";if(zn){const Ra=fe.current[da];Ra==null||Ra(zn),g({type:da,event:zn})}})}}},[O]),he=p.useCallback((I,ye)=>(te,ze)=>{const me=te.nativeEvent,ue=O.get(ze);if(Xe.current!==null||!ue||me.dndKit||me.defaultPrevented)return;const K={active:ue};I(te,ye.options,K)===!0&&(me.dndKit={capturedBy:ye.sensor},Xe.current=ze,P(te,ye))},[O,P]),$=M1(d,he);$1(d),ta(()=>{be&&w===Ba.Initializing&&x(Ba.Initialized)},[be,w]),p.useEffect(()=>{const{onDragMove:I}=fe.current,{active:ye,activatorEvent:te,collisions:ze,over:me}=Yt.current;if(!ye||!te)return;const ue={active:ye,activatorEvent:te,collisions:ze,delta:{x:xe.x,y:xe.y},over:me};Ei.unstable_batchedUpdates(()=>{I==null||I(ue),g({type:"onDragMove",event:ue})})},[xe.x,xe.y]),p.useEffect(()=>{const{active:I,activatorEvent:ye,collisions:te,droppableContainers:ze,scrollAdjustedTranslate:me}=Yt.current;if(!I||Xe.current==null||!ye||!me)return;const{onDragOver:ue}=fe.current,K=ze.get(yt),Zt=K&&K.rect.current?{id:K.id,rect:K.rect.current,data:K.data,disabled:K.disabled}:null,We={active:I,activatorEvent:ye,collisions:te,delta:{x:me.x,y:me.y},over:Zt};Ei.unstable_batchedUpdates(()=>{U(Zt),ue==null||ue(We),g({type:"onDragOver",event:We})})},[yt]),ta(()=>{Yt.current={activatorEvent:Y,active:Ge,activeNode:nt,collisionRect:ee,collisions:$e,droppableRects:vt,draggableNodes:O,draggingNode:_n,draggingNodeRect:wn,droppableContainers:B,over:N,scrollableAncestors:De,scrollAdjustedTranslate:xe},qe.current={initial:wn,translated:ee}},[Ge,nt,$e,ee,O,_n,wn,vt,B,N,De,xe]),C1({...Fe,delta:C,draggingRect:ee,pointerCoordinates:on,scrollableAncestors:De,scrollableAncestorRects:Bt});const Ee=p.useMemo(()=>({active:Ge,activeNode:nt,activeNodeRect:be,activatorEvent:Y,collisions:$e,containerNodeRect:pn,dragOverlay:Tt,draggableNodes:O,droppableContainers:B,droppableRects:vt,over:N,measureDroppableContainers:Pe,scrollableAncestors:De,scrollableAncestorRects:Bt,measuringConfiguration:Ue,measuringScheduled:Qe,windowRect:_e}),[Ge,nt,be,Y,$e,pn,Tt,O,B,vt,N,Pe,De,Bt,Ue,Qe,_e]),re=p.useMemo(()=>({activatorEvent:Y,activators:$,active:Ge,activeNodeRect:be,ariaDescribedById:{draggable:ce},dispatch:y,draggableNodes:O,over:N,measureDroppableContainers:Pe}),[Y,$,Ge,be,y,ce,O,N,Pe]);return ft.createElement(rb.Provider,{value:v},ft.createElement(Tl.Provider,{value:re},ft.createElement(Eb.Provider,{value:Ee},ft.createElement(Nc.Provider,{value:F},c)),ft.createElement(Z1,{disabled:(l==null?void 0:l.restoreFocus)===!1})),ft.createElement(t1,{...l,hiddenTextDescribedById:ce}));function Ne(){const I=(ke==null?void 0:ke.autoScrollEnabled)===!1,ye=typeof o=="object"?o.enabled===!1:o===!1,te=j&&!I&&!ye;return typeof o=="object"?{...o,enabled:te}:{enabled:te}}}),ej=p.createContext(null),Gg="button",tj="Draggable";function nj(e){let{id:t,data:n,disabled:a=!1,attributes:i}=e;const s=El(tj),{activators:r,activatorEvent:l,active:o,activeNodeRect:c,ariaDescribedById:d,draggableNodes:f,over:h}=p.useContext(Tl),{role:m=Gg,roleDescription:b="draggable",tabIndex:_=0}=i??{},S=(o==null?void 0:o.id)===t,y=p.useContext(S?Nc:ej),[g,v]=Wo(),[w,x]=Wo(),j=V1(r,t),T=ll(n);ta(()=>(f.set(t,{id:t,key:s,node:g,activatorNode:w,data:T}),()=>{const C=f.get(t);C&&C.key===s&&f.delete(t)}),[f,t]);const O=p.useMemo(()=>({role:m,tabIndex:_,"aria-disabled":a,"aria-pressed":S&&m===Gg?!0:void 0,"aria-roledescription":b,"aria-describedby":d.draggable}),[a,m,_,S,b,d.draggable]);return{active:o,activatorEvent:l,activeNodeRect:c,attributes:O,isDragging:S,listeners:a?void 0:j,node:g,over:h,setNodeRef:v,setActivatorNodeRef:x,transform:y}}function jb(){return p.useContext(Eb)}const aj="Droppable",ij={timeout:25};function sj(e){let{data:t,disabled:n=!1,id:a,resizeObserverConfig:i}=e;const s=El(aj),{active:r,dispatch:l,over:o,measureDroppableContainers:c}=p.useContext(Tl),d=p.useRef({disabled:n}),f=p.useRef(!1),h=p.useRef(null),m=p.useRef(null),{disabled:b,updateMeasurementsFor:_,timeout:S}={...ij,...i},y=ll(_??a),g=p.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(y.current)?y.current:[y.current]),m.current=null},S)},[S]),v=Dc({callback:g,disabled:b||!r}),w=p.useCallback((O,C)=>{v&&(C&&(v.unobserve(C),f.current=!1),O&&v.observe(O))},[v]),[x,j]=Wo(w),T=ll(t);return p.useEffect(()=>{!v||!x.current||(v.disconnect(),f.current=!1,v.observe(x.current))},[x,v]),p.useEffect(()=>(l({type:Ut.RegisterDroppable,element:{id:a,key:s,disabled:n,node:x,rect:h,data:T}}),()=>l({type:Ut.UnregisterDroppable,key:s,id:a})),[a]),p.useEffect(()=>{n!==d.current.disabled&&(l({type:Ut.SetDroppableDisabled,id:a,key:s,disabled:n}),d.current.disabled=n)},[a,s,n,l]),{active:r,rect:h,isOver:(o==null?void 0:o.id)===a,node:x,over:o,setNodeRef:j}}function rj(e){let{animation:t,children:n}=e;const[a,i]=p.useState(null),[s,r]=p.useState(null),l=ec(n);return!n&&!a&&l&&i(l),ta(()=>{if(!s)return;const o=a==null?void 0:a.key,c=a==null?void 0:a.props.id;if(o==null||c==null){i(null);return}Promise.resolve(t(c,s)).then(()=>{i(null)})},[t,a,s]),ft.createElement(ft.Fragment,null,n,a?p.cloneElement(a,{ref:r}):null)}const lj={x:0,y:0,scaleX:1,scaleY:1};function oj(e){let{children:t}=e;return ft.createElement(Tl.Provider,{value:xb},ft.createElement(Nc.Provider,{value:lj},t))}const cj={position:"fixed",touchAction:"none"},uj=e=>Ac(e)?"transform 250ms ease":void 0,dj=p.forwardRef((e,t)=>{let{as:n,activatorEvent:a,adjustScale:i,children:s,className:r,rect:l,style:o,transform:c,transition:d=uj}=e;if(!l)return null;const f=i?c:{...c,scaleX:1,scaleY:1},h={...cj,width:l.width,height:l.height,top:l.top,left:l.left,transform:Li.Transform.toString(f),transformOrigin:i&&a?a1(a,l):void 0,transition:typeof d=="function"?d(a):d,...o};return ft.createElement(n,{className:r,style:h,ref:t},s)}),fj=e=>t=>{let{active:n,dragOverlay:a}=t;const i={},{styles:s,className:r}=e;if(s!=null&&s.active)for(const[l,o]of Object.entries(s.active))o!==void 0&&(i[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,o));if(s!=null&&s.dragOverlay)for(const[l,o]of Object.entries(s.dragOverlay))o!==void 0&&a.node.style.setProperty(l,o);return r!=null&&r.active&&n.node.classList.add(r.active),r!=null&&r.dragOverlay&&a.node.classList.add(r.dragOverlay),function(){for(const[o,c]of Object.entries(i))n.node.style.setProperty(o,c);r!=null&&r.active&&n.node.classList.remove(r.active)}},hj=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Li.Transform.toString(t)},{transform:Li.Transform.toString(n)}]},mj={duration:250,easing:"ease",keyframes:hj,sideEffects:fj({styles:{active:{opacity:"0"}}})};function gj(e){let{config:t,draggableNodes:n,droppableContainers:a,measuringConfiguration:i}=e;return Oc((s,r)=>{if(t===null)return;const l=n.get(s);if(!l)return;const o=l.node.current;if(!o)return;const c=Sb(r);if(!c)return;const{transform:d}=rn(r).getComputedStyle(r),f=db(d);if(!f)return;const h=typeof t=="function"?t:vj(t);return pb(o,i.draggable.measure),h({active:{id:s,data:l.data,node:o,rect:i.draggable.measure(o)},draggableNodes:n,dragOverlay:{node:r,rect:i.dragOverlay.measure(c)},droppableContainers:a,measuringConfiguration:i,transform:f})})}function vj(e){const{duration:t,easing:n,sideEffects:a,keyframes:i}={...mj,...e};return s=>{let{active:r,dragOverlay:l,transform:o,...c}=s;if(!t)return;const d={x:l.rect.left-r.rect.left,y:l.rect.top-r.rect.top},f={scaleX:o.scaleX!==1?r.rect.width*o.scaleX/l.rect.width:1,scaleY:o.scaleY!==1?r.rect.height*o.scaleY/l.rect.height:1},h={x:o.x-d.x,y:o.y-d.y,...f},m=i({...c,active:r,dragOverlay:l,transform:{initial:o,final:h}}),[b]=m,_=m[m.length-1];if(JSON.stringify(b)===JSON.stringify(_))return;const S=a==null?void 0:a({active:r,dragOverlay:l,...c}),y=l.node.animate(m,{duration:t,easing:n,fill:"forwards"});return new Promise(g=>{y.onfinish=()=>{S==null||S(),g()}})}}let Ig=0;function yj(e){return p.useMemo(()=>{if(e!=null)return Ig++,Ig},[e])}const pj=ft.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:a,style:i,transition:s,modifiers:r,wrapperElement:l="div",className:o,zIndex:c=999}=e;const{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggableNodes:b,droppableContainers:_,dragOverlay:S,over:y,measuringConfiguration:g,scrollableAncestors:v,scrollableAncestorRects:w,windowRect:x}=jb(),j=p.useContext(Nc),T=yj(f==null?void 0:f.id),O=Tb(r,{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:m,draggingNodeRect:S.rect,over:y,overlayNodeRect:S.rect,scrollableAncestors:v,scrollableAncestorRects:w,transform:j,windowRect:x}),C=vh(h),B=gj({config:a,draggableNodes:b,droppableContainers:_,measuringConfiguration:g}),W=C?S.setRef:void 0;return ft.createElement(oj,null,ft.createElement(rj,{animation:B},f&&T?ft.createElement(dj,{key:T,id:f.id,ref:W,as:l,activatorEvent:d,adjustScale:t,className:o,transition:s,rect:C,style:{zIndex:c,...i},transform:O},n):null))});function Ga(e,t,n){const a=e.slice();return a.splice(n<0?a.length+n:n,0,a.splice(t,1)[0]),a}function bj(e,t){return e.reduce((n,a,i)=>{const s=t.get(a);return s&&(n[i]=s),n},Array(e.length))}function eo(e){return e!==null&&e>=0}function _j(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function wj(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Ob=e=>{let{rects:t,activeIndex:n,overIndex:a,index:i}=e;const s=Ga(t,a,n),r=t[i],l=s[i];return!l||!r?null:{x:l.left-r.left,y:l.top-r.top,scaleX:l.width/r.width,scaleY:l.height/r.height}},to={scaleX:1,scaleY:1},vr=e=>{var t;let{activeIndex:n,activeNodeRect:a,index:i,rects:s,overIndex:r}=e;const l=(t=s[n])!=null?t:a;if(!l)return null;if(i===n){const c=s[r];return c?{x:0,y:n<r?c.top+c.height-(l.top+l.height):c.top-l.top,...to}:null}const o=Sj(s,i,n);return i>n&&i<=r?{x:0,y:-l.height-o,...to}:i<n&&i>=r?{x:0,y:l.height+o,...to}:{x:0,y:0,...to}};function Sj(e,t,n){const a=e[t],i=e[t-1],s=e[t+1];return a?n<t?i?a.top-(i.top+i.height):s?s.top-(a.top+a.height):0:s?s.top-(a.top+a.height):i?a.top-(i.top+i.height):0:0}const Ab="Sortable",Cb=ft.createContext({activeIndex:-1,containerId:Ab,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ob,disabled:{draggable:!1,droppable:!1}});function yr(e){let{children:t,id:n,items:a,strategy:i=Ob,disabled:s=!1}=e;const{active:r,dragOverlay:l,droppableRects:o,over:c,measureDroppableContainers:d}=jb(),f=El(Ab,n),h=l.rect!==null,m=p.useMemo(()=>a.map(j=>typeof j=="object"&&"id"in j?j.id:j),[a]),b=r!=null,_=r?m.indexOf(r.id):-1,S=c?m.indexOf(c.id):-1,y=p.useRef(m),g=!_j(m,y.current),v=S!==-1&&_===-1||g,w=wj(s);ta(()=>{g&&b&&d(m)},[g,m,b,d]),p.useEffect(()=>{y.current=m},[m]);const x=p.useMemo(()=>({activeIndex:_,containerId:f,disabled:w,disableTransforms:v,items:m,overIndex:S,useDragOverlay:h,sortedRects:bj(m,o),strategy:i}),[_,f,w.draggable,w.droppable,v,m,S,o,h,i]);return ft.createElement(Cb.Provider,{value:x},t)}const xj=e=>{let{id:t,items:n,activeIndex:a,overIndex:i}=e;return Ga(n,a,i).indexOf(t)},Ej=e=>{let{containerId:t,isSorting:n,wasDragging:a,index:i,items:s,newIndex:r,previousItems:l,previousContainerId:o,transition:c}=e;return!c||!a||l!==s&&i===r?!1:n?!0:r!==i&&t===o},Tj={duration:200,easing:"ease"},Db="transform",jj=Li.Transition.toString({property:Db,duration:0,easing:"linear"}),Oj={roleDescription:"sortable"};function Aj(e){let{disabled:t,index:n,node:a,rect:i}=e;const[s,r]=p.useState(null),l=p.useRef(n);return ta(()=>{if(!t&&n!==l.current&&a.current){const o=i.current;if(o){const c=rr(a.current,{ignoreTransform:!0}),d={x:o.left-c.left,y:o.top-c.top,scaleX:o.width/c.width,scaleY:o.height/c.height};(d.x||d.y)&&r(d)}}n!==l.current&&(l.current=n)},[t,n,a,i]),p.useEffect(()=>{s&&r(null)},[s]),s}function Cj(e){let{animateLayoutChanges:t=Ej,attributes:n,disabled:a,data:i,getNewIndex:s=xj,id:r,strategy:l,resizeObserverConfig:o,transition:c=Tj}=e;const{items:d,containerId:f,activeIndex:h,disabled:m,disableTransforms:b,sortedRects:_,overIndex:S,useDragOverlay:y,strategy:g}=p.useContext(Cb),v=Dj(a,m),w=d.indexOf(r),x=p.useMemo(()=>({sortable:{containerId:f,index:w,items:d},...i}),[f,i,w,d]),j=p.useMemo(()=>d.slice(d.indexOf(r)),[d,r]),{rect:T,node:O,isOver:C,setNodeRef:B}=sj({id:r,data:x,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...o}}),{active:W,activatorEvent:qe,activeNodeRect:Ge,attributes:Xe,setNodeRef:ke,listeners:L,isDragging:Y,over:Q,setActivatorNodeRef:fe,transform:ce}=nj({id:r,data:x,attributes:{...Oj,...n},disabled:v.draggable}),St=VT(B,ke),Ue=!!W,vt=Ue&&!b&&eo(h)&&eo(S),Pe=!y&&Y,Qe=Pe&&vt?ce:null,ln=vt?Qe??(l??g)({rects:_,activeNodeRect:Ge,activeIndex:h,overIndex:S,index:w}):null,Fe=eo(h)&&eo(S)?s({id:r,items:d,activeIndex:h,overIndex:S}):w,ot=W==null?void 0:W.id,be=p.useRef({activeId:ot,items:d,newIndex:Fe,containerId:f}),pn=d!==be.current.items,Yt=t({active:W,containerId:f,isDragging:Y,isSorting:Ue,id:r,index:w,items:d,newIndex:be.current.newIndex,previousItems:be.current.items,previousContainerId:be.current.containerId,transition:c,wasDragging:be.current.activeId!=null}),bn=Aj({disabled:!Yt,index:w,node:O,rect:T});return p.useEffect(()=>{Ue&&be.current.newIndex!==Fe&&(be.current.newIndex=Fe),f!==be.current.containerId&&(be.current.containerId=f),d!==be.current.items&&(be.current.items=d)},[Ue,Fe,f,d]),p.useEffect(()=>{if(ot===be.current.activeId)return;if(ot!=null&&be.current.activeId==null){be.current.activeId=ot;return}const _n=setTimeout(()=>{be.current.activeId=ot},50);return()=>clearTimeout(_n)},[ot]),{active:W,activeIndex:h,attributes:Xe,data:x,rect:T,index:w,newIndex:Fe,items:d,isOver:C,isSorting:Ue,isDragging:Y,listeners:L,node:O,overIndex:S,over:Q,setNodeRef:St,setActivatorNodeRef:fe,setDroppableNodeRef:B,setDraggableNodeRef:ke,transform:bn??ln,transition:Tt()};function Tt(){if(bn||pn&&be.current.newIndex===w)return jj;if(!(Pe&&!Ac(qe)||!c)&&(Ue||Yt))return Li.Transition.toString({...c,property:Db})}}function Dj(e,t){var n,a;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(a=e==null?void 0:e.droppable)!=null?a:t.droppable}}function ic(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Nj=[Ae.Down,Ae.Right,Ae.Up,Ae.Left],Rj=(e,t)=>{let{context:{active:n,collisionRect:a,droppableRects:i,droppableContainers:s,over:r,scrollableAncestors:l}}=t;if(Nj.includes(e.code)){if(e.preventDefault(),!n||!a)return;const o=[];s.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const h=i.get(f.id);if(h)switch(e.code){case Ae.Down:a.top<h.top&&o.push(f);break;case Ae.Up:a.top>h.top&&o.push(f);break;case Ae.Left:a.left>h.left&&o.push(f);break;case Ae.Right:a.left<h.left&&o.push(f);break}});const c=r1({collisionRect:a,droppableRects:i,droppableContainers:o});let d=cb(c,"id");if(d===(r==null?void 0:r.id)&&c.length>1&&(d=c[1].id),d!=null){const f=s.get(n.id),h=s.get(d),m=h?i.get(h.id):null,b=h==null?void 0:h.node.current;if(b&&m&&f&&h){const S=Cc(b).some((j,T)=>l[T]!==j),y=Nb(f,h),g=Mj(f,h),v=S||!y?{x:0,y:0}:{x:g?a.width-m.width:0,y:g?a.height-m.height:0},w={x:m.left,y:m.top};return v.x&&v.y?w:ol(w,v)}}}};function Nb(e,t){return!ic(e)||!ic(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Mj(e,t){return!ic(e)||!ic(t)||!Nb(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Ni=[{key:"mon",label:""},{key:"tue",label:""},{key:"wed",label:""},{key:"thu",label:""},{key:"fri",label:""},{key:"sat",label:""},{key:"sun",label:""}],Hu={THIS_ONLY:"this-only",FROM_NOW:"from-now",ALL:"all"},kj="09",Uj="00",je=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${a}`},Ln=e=>{const t=String(e.getFullYear()).slice(2),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),s=["","","","","","",""][e.getDay()];return`${t}.${n}.${a}(${s})`},vi=e=>{const t=new Date(e),n=String(t.getFullYear()).slice(2),a=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),s=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),o=["","","","","","",""][t.getDay()];return`${n}.${a}.${i}(${o}) ${s}:${r}`},zj=e=>{const t=new Date;return je(e)===je(t)},Lj=()=>{const[e,t]=p.useState(null),[n,a]=p.useState(!0);return p.useEffect(()=>{Te.auth.getSession().then(({data:{session:l}})=>{t(l),a(!1)});const{data:{subscription:r}}=Te.auth.onAuthStateChange((l,o)=>{t(o)});return()=>r.unsubscribe()},[]),{session:e,authLoading:n,handleGoogleLogin:async()=>{try{const{error:r}=await Te.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/todo-note/"}});if(r)throw r}catch(r){alert(" : "+r.message)}},handleLogout:async()=>{try{const{error:r}=await Te.auth.signOut();if(r)throw r}catch(r){alert(" : "+r.message)}}}};function yh({value:e,onChange:t}){const n=p.useRef(null),a=p.useRef(null),i=p.useRef(e),s=p.useRef(!1),[r,l]=p.useState(()=>e&&e.includes(":")?e.split(":")[0]:kj),[o,c]=p.useState(()=>e&&e.includes(":")?e.split(":")[1]:Uj);p.useEffect(()=>{if(e&&e.includes(":")&&e!==i.current){const[g,v]=e.split(":");i.current=e,l(g),c(v)}},[e]),p.useEffect(()=>{if(!s.current){s.current=!0;return}const g=`${r}:${o}`;i.current=g,t&&t(g)},[r,o]);const d=(g,v,w)=>{if(!g.current)return;const x=g.current.scrollTop,T=Math.round(x/40),O=String(T).padStart(2,"0");v(O)},f=(g,v)=>{if(!g.current)return;const w=40,x=parseInt(v,10);g.current.scrollTop=x*w};p.useEffect(()=>{f(n,r)},[]),p.useEffect(()=>{f(a,o)},[]);const h=Array.from({length:24},(g,v)=>String(v).padStart(2,"0")),m=Array.from({length:60},(g,v)=>String(v).padStart(2,"0")),b=()=>{const g=(parseInt(r,10)+1)%24,v=String(g).padStart(2,"0");l(v),f(n,v)},_=()=>{const g=(parseInt(r,10)-1+24)%24,v=String(g).padStart(2,"0");l(v),f(n,v)},S=()=>{const g=(parseInt(o,10)+1)%60,v=String(g).padStart(2,"0");c(v),f(a,v)},y=()=>{const g=(parseInt(o,10)-1+60)%60,v=String(g).padStart(2,"0");c(v),f(a,v)};return u.jsxs("div",{className:"apple-time-picker",children:[u.jsxs("div",{className:"picker-arrows-top",children:[u.jsx("button",{className:"picker-arrow-button",onClick:b,children:""}),u.jsx("div",{style:{width:"20px"}}),u.jsx("button",{className:"picker-arrow-button",onClick:S,children:""})]}),u.jsxs("div",{className:"picker-container",children:[u.jsxs("div",{className:"picker-column",ref:n,onScroll:()=>d(n,l),children:[u.jsx("div",{className:"picker-spacer"}),h.map(g=>u.jsx("div",{className:`picker-item ${g===r?"selected":""}`,onClick:()=>{l(g),f(n,g)},children:g},g)),u.jsx("div",{className:"picker-spacer"})]}),u.jsx("div",{className:"picker-separator",children:":"}),u.jsxs("div",{className:"picker-column",ref:a,onScroll:()=>d(a,c),children:[u.jsx("div",{className:"picker-spacer"}),m.map(g=>u.jsx("div",{className:`picker-item ${g===o?"selected":""}`,onClick:()=>{c(g),f(a,g)},children:g},g)),u.jsx("div",{className:"picker-spacer"})]})]}),u.jsxs("div",{className:"picker-arrows-bottom",children:[u.jsx("button",{className:"picker-arrow-button",onClick:_,children:""}),u.jsx("div",{style:{width:"20px"}}),u.jsx("button",{className:"picker-arrow-button",onClick:y,children:""})]}),u.jsx("div",{className:"picker-selection-indicator"})]})}function Kg({message:e,onUndo:t,variant:n="default"}){const a=n==="success"?"undo-toast success-toast":"undo-toast";return u.jsxs("div",{className:a,children:[u.jsx("span",{children:e}),t&&u.jsx("button",{onClick:t,className:"undo-button",children:""})]})}function Bj({title:e,editable:t=!1,onTitleChange:n,showHideButton:a=!1,onHide:i,showDeleteButton:s=!1,onDelete:r,customActions:l,settingsMenuItems:o=[]}){var g,v;const[c,d]=p.useState(!1),[f,h]=p.useState(e),[m,b]=p.useState(!1),_=p.useRef(null),S=()=>{f.trim()&&f!==e&&(n==null||n(f.trim())),d(!1)},y=()=>{h(e),d(!1)};return p.useEffect(()=>{const w=x=>{if(m&&_.current&&!_.current.contains(x.target)){const j=document.querySelector(".section-settings-dropdown");j&&!j.contains(x.target)&&b(!1)}};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[m]),u.jsxs("div",{className:"section-header",children:[u.jsx("div",{className:"section-title-container",children:c?u.jsx("div",{className:"section-title-edit-wrapper",children:u.jsx("input",{type:"text",value:f,onChange:w=>h(w.target.value),onBlur:S,onKeyDown:w=>{w.key==="Enter"?S():w.key==="Escape"&&y()},className:"section-title-input",autoFocus:!0})}):u.jsx("h2",{className:`section-title ${t?"editable":""}`,onClick:()=>t&&d(!0),children:e})}),u.jsxs("div",{className:"section-actions",children:[l,o.length>0&&u.jsxs("div",{style:{position:"relative"},children:[u.jsx("button",{ref:_,className:"section-action-button settings-button",onClick:()=>b(!m),title:"",children:""}),m&&dv.createPortal(u.jsx("div",{className:"section-settings-dropdown",style:{position:"fixed",top:`${((g=_.current)==null?void 0:g.getBoundingClientRect().bottom)+5}px`,left:`${(v=_.current)==null?void 0:v.getBoundingClientRect().left}px`},children:o.map((w,x)=>u.jsxs("button",{className:"settings-menu-item",onClick:()=>{w.onClick(),b(!1)},children:[u.jsx("span",{children:w.icon}),u.jsx("span",{children:w.label})]},x))}),document.body)]})]})]})}function Hj({showSidebar:e,setShowSidebar:t,session:n,viewMode:a,setViewMode:i,onOpenRoutine:s,onOpenGanttChart:r,onOpenEncouragementModal:l,onOpenAddSection:o,onOpenHiddenSections:c,onLogout:d}){var f,h;return u.jsxs(u.Fragment,{children:[e&&u.jsx("div",{className:"sidebar-overlay",onClick:()=>t(!1)}),u.jsxs("div",{className:`sidebar ${e?"open":""}`,children:[u.jsxs("div",{className:"sidebar-header",children:[u.jsx("h2",{children:""}),u.jsx("button",{className:"sidebar-close",onClick:()=>t(!1),children:""})]}),n&&n.user&&u.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[((f=n.user.user_metadata)==null?void 0:f.avatar_url)&&u.jsx("img",{src:n.user.user_metadata.avatar_url,alt:"",style:{width:"40px",height:"40px",borderRadius:"50%"}}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((h=n.user.user_metadata)==null?void 0:h.full_name)||n.user.email}),u.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.user.email})]})]}),u.jsxs("div",{className:"sidebar-content",children:[u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{const m=a==="vertical"?"horizontal":"vertical";i(m),localStorage.setItem("viewMode",m),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:a==="vertical"?"":""}),u.jsx("span",{children:a==="vertical"?" ":" "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{o(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:" "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{c(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:"  "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{s(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:" "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{r(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:" "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{l(),t(!1)},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:"  "})]}),u.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{confirm(" ?")&&d()},style:{marginTop:"auto",borderTop:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 100, 100, 0.9)"},children:[u.jsx("span",{className:"sidebar-icon",children:""}),u.jsx("span",{children:""})]})]})]})]})}function qj({selectedDate:e,onDateChange:t,onPrevDay:n,onNextDay:a}){return u.jsxs("div",{className:"date-nav-section",children:[u.jsxs("div",{className:"date-display-wrapper",children:[u.jsx("span",{className:"date-display",children:Ln(e)}),u.jsx("input",{type:"date",value:je(e),onChange:t,className:"date-picker-input"})]}),u.jsx("button",{onClick:n,className:"date-nav-button",children:""}),u.jsx("button",{onClick:a,className:"date-nav-button",children:""})]})}function $j({showSidebar:e,setShowSidebar:t,selectedDate:n,setSelectedDate:a,onDateChange:i,onPrevDay:s,onNextDay:r,showEncouragementEmoji:l,currentEncouragementMessage:o,onEncouragementClick:c,onQuickAdd:d,onOpenMemo:f}){const[h,m]=p.useState(""),[b,_]=p.useState(!1),S=async y=>{if(y.key==="Enter"&&!y.shiftKey&&h.trim()){y.preventDefault(),_(!0);try{await d(h.trim()),m("")}catch(g){console.error("Quick add error:",g)}finally{_(!1)}}};return u.jsx("div",{className:"header-fixed",children:u.jsxs("div",{className:"settings-bar",children:[u.jsx("button",{className:"hamburger-menu",onClick:()=>t(!e),title:"",children:u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("rect",{x:"2",y:"4",width:"16",height:"2",rx:"1",fill:"currentColor"}),u.jsx("rect",{x:"2",y:"9",width:"16",height:"2",rx:"1",fill:"currentColor"}),u.jsx("rect",{x:"2",y:"14",width:"16",height:"2",rx:"1",fill:"currentColor"})]})}),u.jsx(qj,{selectedDate:n,onDateChange:i,onPrevDay:s,onNextDay:r}),u.jsx("div",{className:"encouragement-section",children:zj(n)?u.jsx("div",{className:"encouragement-message",onClick:c,title:"    !",children:l?u.jsx("span",{className:"encouragement-emoji",children:"  "}):o||"!"}):u.jsx("button",{onClick:()=>a(new Date),className:"today-link",title:" ",children:"  "})}),u.jsx("div",{className:"quick-input-wrapper",children:u.jsx("input",{type:"text",value:h,onChange:y=>m(y.target.value),onKeyDown:S,placeholder:" Quick   (Enter )",className:"quick-input",disabled:b})}),u.jsx("button",{className:"header-memo-button",onClick:f,title:" ",children:"  "})]})})}function Vj({viewMode:e,currentSectionIndex:t,sectionsContainerRef:n,visibleSectionCount:a=3}){return e!=="horizontal"?null:u.jsx("div",{className:"section-pagination-dots",onTouchStart:i=>{const s=i.touches[0];i.currentTarget.dataset.touchStartX=s.clientX,i.currentTarget.dataset.touchStartTime=Date.now()},onTouchMove:i=>{i.currentTarget.dataset.touchMoved="true"},onTouchEnd:i=>{const s=parseFloat(i.currentTarget.dataset.touchStartX||"0"),r=parseInt(i.currentTarget.dataset.touchStartTime||"0"),l=i.currentTarget.dataset.touchMoved==="true",o=i.changedTouches[0].clientX,c=Date.now()-r;if(delete i.currentTarget.dataset.touchStartX,delete i.currentTarget.dataset.touchStartTime,delete i.currentTarget.dataset.touchMoved,l&&c<500){const d=s-o,f=n.current;if(!f)return;const h=f.querySelectorAll(".section-block");Math.abs(d)>50&&(d>0&&t<h.length-1?h[t+1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}):d<0&&t>0&&h[t-1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}))}},children:Array.from({length:a},(i,s)=>u.jsx("button",{className:`pagination-dot ${t===s?"active":""}`,onClick:()=>{const r=n.current;if(!r)return;const l=r.querySelectorAll(".section-block");l[s]&&l[s].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},s))})}function qu({title:e,className:t,inputValue:n,setInputValue:a,onAddTodo:i,isAdding:s,placeholder:r,children:l,editable:o=!1,onTitleChange:c,settingsMenuItems:d=[],headerActions:f}){return u.jsxs("div",{className:t,children:[u.jsx(Bj,{title:e,editable:o,onTitleChange:c,settingsMenuItems:d,customActions:f}),u.jsxs("div",{className:"section-input",children:[u.jsx("input",{type:"text",value:n,onChange:h=>a(h.target.value),onKeyDown:h=>{h.key==="Enter"&&i()},placeholder:r,className:"todo-input",disabled:s}),u.jsx("button",{onClick:i,className:"add-button",disabled:s,children:""})]}),l]})}function us({todo:e,index:t,onToggle:n,onDelete:a,onEdit:i,formatDate:s,formatDateOnly:r,isFocused:l,onFocus:o,onAddSubTodo:c,subtodos:d,level:f=0,onCreateRoutine:h,routines:m,onShowRoutineHistory:b,onOpenRoutineSetupModal:_,onOpenHistoryModal:S,currentPageDate:y,isPendingRoutine:g=!1,onRemoveFromUI:v,showSuccessMessage:w,activeId:x,overId:j,hideNumber:T=!1,onMoveUp:O,onMoveDown:C,onMoveToTop:B,onMoveToBottom:W,isFirst:qe,isLast:Ge}){const[Xe,ke]=p.useState(!1),[L,Y]=p.useState(!1),[Q,fe]=p.useState(!1),[ce,St]=p.useState(e.text),[Ue,vt]=p.useState(!1),[Pe,Qe]=p.useState(!1),[nt,ln]=p.useState(!1),[Fe,ot]=p.useState(""),[be,pn]=p.useState(!1),[Yt,bn]=p.useState([]),[Tt,_n]=p.useState(!1),[wn,Z]=p.useState(!1),[ie,_e]=p.useState([]),[De,Bt]=p.useState([]),[Rt,on]=p.useState([]),[ht,mt]=p.useState(null),[Me,xe]=p.useState(!1),[ee,$e]=p.useState(null),[yt,N]=p.useState(!1),[U,z]=p.useState([]),[F,q]=p.useState(""),[P,he]=p.useState({}),[$,Ee]=p.useState(!1),[re,Ne]=p.useState(null),[I,ye]=p.useState([]),[te,ze]=p.useState("this-only"),[me,ue]=p.useState(null),K=e.routine_id?m.find(M=>M.id===e.routine_id):null,{attributes:Zt,listeners:We,setNodeRef:Gt,transform:Pt,transition:Ft,isDragging:Un}=Cj({id:e.id}),ua=e.id===x,zn=e.id===j&&x&&x!==j,da={cursor:"grab",opacity:ua?.4:1},Ra=e.text.length>30,jl=()=>{fe(!0),St(e.text)},Ol=async()=>{ce.trim()&&ce!==e.text&&await i(e.id,ce.trim()),fe(!1)},Rc=async M=>{M.key==="Enter"&&!M.shiftKey?(M.preventDefault(),await Ol()):M.key==="Escape"&&(fe(!1),St(e.text))},Mc=M=>{z(H=>H.includes(M)?H.filter(at=>at!==M):[...H,M])},Gi=M=>["sun","mon","tue","wed","thu","fri","sat"][M];p.useEffect(()=>{const M=H=>{L&&!H.target.closest(".drag-handle-wrapper")&&Y(!1)};return document.addEventListener("click",M),()=>document.removeEventListener("click",M)},[L]),p.useEffect(()=>{ee==="history"&&!P[e.id]&&!$&&(async()=>{Ee(!0);try{const{data:H,error:at}=await Te.from("todo_history").select("*").eq("todo_id",e.id).order("changed_at",{ascending:!1});if(at)throw at;he(pt=>({...pt,[e.id]:H||[]}))}catch(H){console.error("Error fetching history:",H)}finally{Ee(!1)}})()},[ee,e.id,P,$]),p.useEffect(()=>{ee==="routine-stats"&&K&&(!re||re.id!==K.id)&&(async()=>{try{const{data:H,error:at}=await Te.from("todos").select("*").eq("routine_id",K.id).eq("deleted",!1).maybeSingle();if(at)throw at;if(H&&H.visible_dates){const pt=H.visible_dates.sort().map(pe=>{var bt;return{id:`${H.id}-${pe}`,date:pe,text:H.text,completed:((bt=H.completed_dates)==null?void 0:bt.includes(pe))||!1}});ye(pt),Ne(K)}}catch(H){console.error("Error fetching routine history:",H)}})()},[ee,K,re]);const Ii=M=>{Bt(H=>H.includes(M)?H.filter(at=>at!==M):[...H,M])};return u.jsxs("div",{ref:Gt,style:{...da,borderTop:zn?"2px solid rgba(99, 102, 241, 0.8)":"2px solid transparent"},className:"todo-item-container",children:[u.jsxs("div",{className:"drag-handle-wrapper",children:[u.jsx("span",{className:"drag-handle",onClick:M=>{M.stopPropagation(),Y(!L)},title:"  "}),L&&u.jsxs("div",{className:"move-menu",children:[!qe&&u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"move-menu-item",onClick:M=>{M.stopPropagation(),B&&B(e.id),Y(!1)},children:"  "}),u.jsx("button",{className:"move-menu-item",onClick:M=>{M.stopPropagation(),O&&O(e.id),Y(!1)},children:" "})]}),!Ge&&u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"move-menu-item",onClick:M=>{M.stopPropagation(),C&&C(e.id),Y(!1)},children:" "}),u.jsx("button",{className:"move-menu-item",onClick:M=>{M.stopPropagation(),W&&W(e.id),Y(!1)},children:"  "})]}),u.jsx("button",{className:"move-menu-item delete",onClick:M=>{M.stopPropagation(),window.confirm("  ?")&&a(e.id),Y(!1)},children:" "})]})]}),!T&&u.jsx("span",{className:"todo-number",children:t+1}),u.jsx("div",{className:"todo-item-wrapper",children:u.jsxs("div",{className:`todo-item ${e.completed?"completed":""} ${Xe?"expanded":""} ${Un?"drag-mode":""}`,children:[u.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>n(e.id),className:"todo-checkbox"}),u.jsx("div",{className:"todo-content",onClick:()=>!Q&&Ra&&ke(!Xe),onDoubleClick:jl,style:{cursor:Q?"text":Ra?"pointer":"default"},children:Q?u.jsx("textarea",{value:ce,onChange:M=>St(M.target.value),onBlur:Ol,onKeyDown:Rc,className:"todo-edit-input",autoFocus:!0,rows:1,style:{minHeight:"1.35em",resize:"vertical",overflow:"hidden"},onInput:M=>{M.target.style.height="auto",M.target.style.height=M.target.scrollHeight+"px"}}):u.jsx("span",{className:`todo-text ${Xe?"expanded":""}`,children:e.text})}),(()=>{const M=e.completed&&e.completed_at&&new Date(e.completed_at).toISOString().split("T")[0]!==e.date,H=e.routine_id&&K,at=g||e.is_pending_routine;return(d.length>0||M||H||at)&&u.jsxs("div",{className:"todo-badges",children:[M&&(()=>{const pt=new Date(e.completed_at).toISOString().split("T")[0],pe=new Date(e.completed_at).getDate();return u.jsxs("span",{className:"completed-date-badge",title:`${pt} `,children:[pe,""]})})(),H&&(()=>{const pt=y||e.date,pe=new Date(pt+"T00:00:00"),bt=pe.getMonth()+1,Je=pe.getDate(),cn=["","","","","","",""][pe.getDay()],Ki=`${bt}/${Je}(${cn})`;return u.jsxs("span",{className:"routine-date-badge",title:`${K.text} `,children:["for ",Ki]})})(),at&&u.jsx("span",{className:"pending-routine-badge",title:"  ",children:""}),d.length>0&&u.jsx("span",{className:"todo-badge clickable",title:" ",onClick:pt=>{pt.stopPropagation(),Pe?(vt(!1),Qe(!1),ln(!1)):(vt(!0),Qe(!0),ln(!1),pn(!1),Z(!1))},children:""})]})})(),!Q&&!e.parent_id&&u.jsx("button",{className:"todo-more-button",onClick:M=>{M.stopPropagation(),xe(!0),$e(null),N(!1),z([]),q("")},title:"",children:""}),Pe&&!e.parent_id&&u.jsxs("div",{className:"subtodos-in-item",children:[d&&d.length>0&&d.map((M,H)=>u.jsx(us,{todo:M,index:H,onToggle:n,onDelete:a,onEdit:i,formatDate:s,formatDateOnly:r,isFocused:l,onFocus:o,onAddSubTodo:c,subtodos:[],level:f+1,routines:m,onShowRoutineHistory:b,showSuccessMessage:w,onOpenRoutineSetupModal:_,onOpenHistoryModal:S,currentPageDate:y},M.id)),nt&&u.jsxs("div",{className:"subtodo-input-section",children:[u.jsx("input",{type:"text",value:Fe,onChange:M=>ot(M.target.value),onKeyDown:M=>{M.key==="Enter"&&Fe.trim()&&(c(e.id,Fe.trim()),ot(""))},placeholder:" ...",className:"subtodo-input",autoFocus:!0}),u.jsx("button",{onClick:()=>{Fe.trim()&&(c(e.id,Fe.trim()),ot(""))},className:"subtodo-add-button",children:""}),u.jsx("button",{onClick:()=>{ot("")},className:"subtodo-cancel-button",children:""})]})]})]})}),Me&&dv.createPortal(u.jsx("div",{className:"modal-overlay",onClick:()=>xe(!1),children:u.jsxs("div",{className:"actions-modal-content",onClick:M=>M.stopPropagation(),children:[u.jsxs("div",{className:"actions-modal-header",children:[u.jsx("h3",{children:" "}),u.jsx("button",{onClick:()=>xe(!1),className:"modal-close-button",children:""})]}),u.jsx("div",{className:"todo-edit-section",children:u.jsx("textarea",{value:ce,onChange:M=>St(M.target.value),onBlur:()=>{ce.trim()!==""&&ce!==e.text?i(e.id,ce):ce.trim()===""&&St(e.text)},className:"todo-edit-textarea",placeholder:"  ...",rows:3})}),u.jsxs("div",{className:"actions-modal-body",children:[u.jsxs("div",{className:"actions-menu",children:[u.jsxs("button",{className:`action-menu-item ${ee==="nanotodo"?"active":""}`,onClick:()=>$e("nanotodo"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),u.jsxs("button",{className:`action-menu-item ${ee==="routine"?"active":""}`,onClick:()=>{$e("routine");const M=m.find(H=>H.id===e.routine_id);M?(z(M.days||[]),q(M.time_slot||""),N(!1)):(z([]),q(""),N(!0))},children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),u.jsxs("button",{className:`action-menu-item ${ee==="history"?"active":""}`,onClick:()=>$e("history"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),e.routine_id&&K&&u.jsxs("button",{className:`action-menu-item ${ee==="routine-stats"?"active":""}`,onClick:()=>$e("routine-stats"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]}),u.jsxs("button",{className:`action-menu-item delete ${ee==="delete"?"active":""}`,onClick:()=>$e("delete"),children:[u.jsx("span",{className:"action-icon",children:""}),u.jsx("span",{children:""})]})]}),u.jsxs("div",{className:"actions-detail",children:[!ee&&u.jsx("div",{className:"actions-detail-empty",children:u.jsx("p",{children:"  "})}),ee==="nanotodo"&&u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:" "}),u.jsxs("div",{className:"nanotodo-section-in-modal",children:[d&&d.length>0&&u.jsx("div",{className:"subtodo-list-in-modal",children:d.map(M=>u.jsxs("div",{className:"subtodo-item-in-modal",children:[u.jsx("input",{type:"checkbox",checked:M.completed,onChange:()=>n(M.id),className:"subtodo-checkbox-modal"}),u.jsx("span",{className:`subtodo-text-modal ${M.completed?"completed":""}`,children:M.text}),u.jsx("button",{onClick:()=>a(M.id),className:"subtodo-delete-modal",title:"",children:""})]},M.id))}),u.jsxs("div",{className:"subtodo-input-section-modal",children:[u.jsx("input",{type:"text",value:Fe,onChange:M=>ot(M.target.value),onKeyDown:M=>{M.key==="Enter"&&Fe.trim()&&(c(e.id,Fe.trim()),ot(""))},placeholder:" ...",className:"subtodo-input-modal"}),u.jsx("button",{onClick:()=>{Fe.trim()&&(c(e.id,Fe.trim()),ot(""))},className:"subtodo-add-button-modal",children:""})]})]})]}),ee==="routine"&&(()=>{const M=m.find(H=>H.id===e.routine_id);return u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"  "}),u.jsx("div",{className:"routine-setup-inline",children:M&&!yt?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"routine-current-info",children:[u.jsx("div",{className:"routine-info-title",children:" :"}),u.jsx("div",{className:"routine-days-display",children:Ni.filter(H=>M.days.includes(H.key)).map(H=>u.jsx("span",{className:"routine-day-badge",children:H.label},H.key))}),M.time_slot&&u.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",M.time_slot]})]}),u.jsxs("div",{className:"routine-setup-actions",children:[u.jsx("button",{onClick:H=>{H.stopPropagation(),M&&(z(M.days),q(M.time_slot||""),N(!0))},className:"routine-confirm-button",children:""}),u.jsx("button",{onClick:async H=>{H.stopPropagation(),M&&e&&(await h(e.id,e.text,[],null,!0),xe(!1))},className:"routine-remove-button",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"routine-setup-title",children:yt?" :":"  :"}),u.jsx("div",{className:"day-selector-inline",children:Ni.map(H=>u.jsx("button",{onClick:at=>{at.stopPropagation(),Mc(H.key)},className:`day-button-inline ${U.includes(H.key)?"selected":""}`,children:H.label},H.key))}),u.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[u.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),u.jsx(yh,{value:F,onChange:H=>q(H)})]}),u.jsxs("div",{className:"routine-setup-actions",children:[u.jsx("button",{onClick:async H=>{H.stopPropagation(),e&&(yt&&M?await h(e.id,e.text,U,M.id,!1,F):await h(e.id,e.text,U,null,!1,F),N(!1),xe(!1))},className:"routine-confirm-button",children:""}),u.jsx("button",{onClick:H=>{H.stopPropagation(),N(!1),z([]),q("")},className:"routine-cancel-button",children:""})]})]})})]})})(),ee==="history"&&(()=>{const M=e.visible_dates&&e.visible_dates.length>0?e.visible_dates:[e.date],H=M[0],at=M.map(pe=>({id:`${e.id}-${pe}`,date:pe})),pt=P[e.id]||[];return $?u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"  "}),u.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:" ..."})]}):u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"  "}),u.jsxs("div",{className:"todo-history",children:[u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:":"}),u.jsx("span",{className:"history-value",children:s(e.created_at)})]}),u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:r(H?new Date(H+"T00:00:00"):new Date(e.date+"T00:00:00"))})]}),at.length>0&&u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:at.map((pe,bt)=>{const Je=pe.date===e.date,ct=r(new Date(pe.date+"T00:00:00"));return u.jsxs("span",{children:[bt>0&&"  ",u.jsxs("span",{style:Je?{fontWeight:"bold",color:"#4CAF50"}:{},children:[ct.split("(")[0],Je?"()":""]})]},pe.id)})})]}),(()=>{const pe=new Date(e.created_at).toISOString().split("T")[0],bt=e.date;return pe!==bt&&at.length===0?u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:r(new Date(e.date+"T00:00:00"))})]}):null})(),pt.length>0&&u.jsxs("div",{className:"history-changes-list",children:[u.jsxs("div",{className:"history-changes-header",children:["  (",pt.length,")"]}),pt.map(pe=>u.jsxs("div",{className:"history-record-compact",children:[u.jsxs("div",{className:"history-record-summary",children:[u.jsxs("div",{className:"history-change-time",children:[s(pe.changed_at),pe.changed_on_date&&u.jsxs("span",{className:"history-page-info",children:[" (: ",r(new Date(pe.changed_on_date+"T00:00:00")),")"]})]}),u.jsx("button",{className:"history-detail-button",onClick:bt=>{bt.stopPropagation(),Ii(pe.id)},children:De.includes(pe.id)?"":""})]}),De.includes(pe.id)&&u.jsxs("div",{className:"history-change",children:[u.jsxs("div",{className:"history-change-item history-before",children:[u.jsx("span",{className:"change-badge",children:""}),u.jsx("span",{className:"change-text",children:pe.previous_text})]}),u.jsx("div",{className:"history-change-arrow",children:""}),u.jsxs("div",{className:"history-change-item history-after",children:[u.jsx("span",{className:"change-badge",children:""}),u.jsx("span",{className:"change-text",children:pe.new_text})]})]})]},pe.id))]})]})]})})(),ee==="routine-stats"&&K&&(()=>{if(!re||re.id!==K.id||I.length===0)return u.jsxs("div",{className:"actions-detail-content",children:[u.jsxs("h4",{children:[" ",K.text," "]}),u.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:!re||re.id!==K.id?" ...":" ."})]});const M=I[0],H=new Date(M.date),at=new Date,pt={};I.forEach(Je=>{pt[Je.date]=Je.completed});const pe=[];let bt=new Date(H);for(;bt<=at;){const Je=bt.getFullYear(),ct=bt.getMonth(),cn=`${Je}-${ct+1}`;pe.find(Xi=>Xi.key===cn)||pe.push({key:cn,year:Je,month:ct,days:[]});const Ki=pe.find(Xi=>Xi.key===cn),fi=je(bt),lr=bt.getDay(),or=Gi(lr),kc=K.days.includes(or);Ki.days.push({date:new Date(bt),dateStr:fi,day:bt.getDate(),dayOfWeek:lr,isCompleted:pt[fi]===!0,isRoutineDay:kc,hasTodo:pt[fi]!==void 0}),bt.setDate(bt.getDate()+1)}return u.jsxs("div",{className:"actions-detail-content",children:[u.jsxs("h4",{children:[" ",K.text," "]}),u.jsxs("div",{className:"routine-history-content",children:[u.jsx("div",{className:"routine-history-calendar",children:pe.map(Je=>u.jsxs("div",{className:"history-month",children:[u.jsxs("h3",{className:"history-month-title",children:[Je.year," ",Je.month+1,""]}),u.jsxs("div",{className:"history-calendar-grid",children:[u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),Je.days.length>0&&Array(Je.days[0].dayOfWeek).fill(null).map((ct,cn)=>u.jsx("div",{className:"history-day-cell empty"},`empty-${cn}`)),Je.days.map((ct,cn)=>{if(cn>0&&ct.day===1){const fi=6-Je.days[cn-1].dayOfWeek;return u.jsxs(ft.Fragment,{children:[Array(fi).fill(null).map((lr,or)=>u.jsx("div",{className:"history-day-cell empty"},`empty-end-${cn}-${or}`)),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsxs("div",{className:`history-day-cell ${ct.isCompleted?"completed":""} ${ct.isRoutineDay?"":"not-routine-day"}`,children:[u.jsx("span",{className:"day-number",children:ct.day}),ct.isCompleted&&u.jsx("span",{className:"check-mark",children:""})]})]},ct.dateStr)}return u.jsxs("div",{className:`history-day-cell ${ct.isCompleted?"completed":""} ${ct.isRoutineDay?"":"not-routine-day"}`,title:`${ct.dateStr}${ct.isRoutineDay?"":" (  )"}${ct.isCompleted?" - ":ct.hasTodo?" - ":""}`,children:[u.jsx("span",{className:"day-number",children:ct.day}),ct.isCompleted&&u.jsx("span",{className:"check-mark",children:""})]},ct.dateStr)})]})]},Je.key))}),u.jsxs("div",{className:"routine-history-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:" :"}),u.jsxs("span",{className:"stat-value",children:[I.length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value completed",children:[I.filter(Je=>Je.completed).length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value incomplete",children:[I.filter(Je=>!Je.completed).length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value",children:[I.length>0?Math.round(I.filter(Je=>Je.completed).length/I.length*100):0,"%"]})]})]})]})]})})(),ee==="delete"&&(()=>{const M=async()=>{window.confirm(`  ?

  5    .`)&&(await a(e.id,te),xe(!1))};return u.jsxs("div",{className:"actions-detail-content",children:[u.jsx("h4",{children:"   "}),u.jsxs("p",{style:{fontSize:"0.9rem",color:"#9ca3af",marginBottom:"1rem",lineHeight:"1.6"},children:["    .",u.jsx("br",{}),"    ."]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:te==="this-only"?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"},onClick:()=>ze("this-only"),children:[u.jsx("input",{type:"radio",name:"delete-option",value:"this-only",checked:te==="this-only",onChange:H=>ze(H.target.value),style:{width:"16px",height:"16px",cursor:"pointer"}}),u.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[u.jsx("span",{style:{fontWeight:"600"},children:" "}),u.jsx("span",{style:{fontSize:"0.85rem",color:"#9ca3af"},children:" "})]})}),u.jsx("button",{onMouseEnter:()=>ue("this-only"),onMouseLeave:()=>ue(null),onClick:H=>{H.stopPropagation(),ue(me==="this-only"?null:"this-only")},style:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"?"}),me==="this-only"&&u.jsx("div",{style:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"  ,  ,   "})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:te==="from-now"?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"},onClick:()=>ze("from-now"),children:[u.jsx("input",{type:"radio",name:"delete-option",value:"from-now",checked:te==="from-now",onChange:H=>ze(H.target.value),style:{width:"16px",height:"16px",cursor:"pointer"}}),u.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[u.jsx("span",{style:{fontWeight:"600"},children:"   "}),u.jsx("span",{style:{fontSize:"0.85rem",color:"#9ca3af"},children:" "})]})}),u.jsx("button",{onMouseEnter:()=>ue("from-now"),onMouseLeave:()=>ue(null),onClick:H=>{H.stopPropagation(),ue(me==="from-now"?null:"from-now")},style:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"?"}),me==="from-now"&&u.jsx("div",{style:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"  ,  ,   "})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:te==="all"?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"},onClick:()=>ze("all"),children:[u.jsx("input",{type:"radio",name:"delete-option",value:"all",checked:te==="all",onChange:H=>ze(H.target.value),style:{width:"16px",height:"16px",cursor:"pointer"}}),u.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[u.jsx("span",{style:{fontWeight:"600"},children:" "}),u.jsx("span",{style:{fontSize:"0.85rem",color:"#9ca3af"},children:" "})]})}),u.jsx("button",{onMouseEnter:()=>ue("all"),onMouseLeave:()=>ue(null),onClick:H=>{H.stopPropagation(),ue(me==="all"?null:"all")},style:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"?"}),me==="all"&&u.jsx("div",{style:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"  ,  ,   "})]})]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("button",{onClick:()=>xe(!1),style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#9ca3af",cursor:"pointer",fontSize:"0.9rem"},children:""}),u.jsx("button",{onClick:M,style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:""})]})]})})()]})]})]})}),document.body)]})}function Yj({showRoutineModal:e,onClose:t,routineInput:n,setRoutineInput:a,isAddingRoutine:i,selectedDays:s,onToggleDay:r,selectedTimeSlot:l,setSelectedTimeSlot:o,onAddRoutine:c,routines:d,editingRoutineId:f,editingRoutineText:h,setEditingRoutineText:m,editingRoutineDays:b,onToggleEditDay:_,onStartEdit:S,onSaveEdit:y,onCancelEdit:g,onDelete:v,onShowHistory:w}){return e?u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content routine-modal",onClick:x=>x.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsxs("div",{className:"routine-add-section",children:[u.jsx("input",{type:"text",value:n,onChange:x=>a(x.target.value),placeholder:"  ...",className:"routine-input",disabled:i}),u.jsx("div",{className:"day-selector",children:Ni.map(x=>u.jsx("button",{onClick:()=>r(x.key),className:`day-button ${s.includes(x.key)?"selected":""}`,disabled:i,children:x.label},x.key))}),u.jsxs("div",{className:"time-slot-selector",children:[u.jsx("label",{className:"time-slot-label",children:"  ()"}),u.jsx(yh,{value:l,onChange:x=>o(x)})]}),u.jsx("button",{onClick:c,className:"add-routine-button",disabled:i||n.trim()==="",children:" "})]}),u.jsx("div",{className:"routine-list",children:d.length===0?u.jsx("p",{className:"empty-message",children:"  ."}):d.map(x=>u.jsx("div",{className:"routine-item",children:f===x.id?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"routine-edit-content",children:[u.jsx("input",{type:"text",value:h,onChange:j=>m(j.target.value),className:"routine-edit-input",placeholder:" "}),u.jsx("div",{className:"day-selector-inline",children:Ni.map(j=>u.jsx("button",{onClick:()=>_(j.key),className:`day-button-inline ${b.includes(j.key)?"selected":""}`,children:j.label},j.key))})]}),u.jsxs("div",{className:"routine-item-actions",children:[u.jsx("button",{onClick:y,className:"routine-save-button",disabled:h.trim()===""||b.length===0,children:""}),u.jsx("button",{onClick:g,className:"routine-cancel-edit-button",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"routine-item-content",children:[u.jsx("span",{className:"routine-text",children:x.text}),u.jsxs("div",{className:"routine-meta",children:[u.jsx("div",{className:"routine-days",children:Ni.filter(j=>x.days.includes(j.key)).map(j=>u.jsx("span",{className:"routine-day-badge",children:j.label},j.key))}),x.time_slot&&u.jsx("span",{className:"routine-time-slot",children:x.time_slot})]})]}),u.jsxs("div",{className:"routine-item-actions",children:[u.jsx("button",{onClick:()=>w(x),className:"routine-history-button",title:" ",children:""}),u.jsx("button",{onClick:()=>S(x),className:"routine-edit-button",title:"",children:""}),u.jsx("button",{onClick:()=>v(x.id),className:"routine-delete-button",title:"",children:""})]})]})},x.id))})]})}):null}const Gj=e=>["sun","mon","tue","wed","thu","fri","sat"][e];function Ij({showRoutineHistory:e,onClose:t,selectedRoutine:n,routineHistoryData:a}){return!e||!n?null:u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content routine-history-modal",onClick:i=>i.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("h2",{children:[" ",n.text," "]}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsxs("div",{className:"routine-history-content",children:[(()=>{if(a.length===0)return u.jsx("p",{className:"empty-message",children:"   ."});const i=a[0],s=new Date(i.date),r=new Date,l={};a.forEach(d=>{l[d.date]=d.completed});const o=[];let c=new Date(s);for(;c<=r;){const d=c.getFullYear(),f=c.getMonth(),h=`${d}-${f+1}`;o.find(g=>g.key===h)||o.push({key:h,year:d,month:f,days:[]});const m=o.find(g=>g.key===h),b=je(c),_=c.getDay(),S=Gj(_),y=n.days.includes(S);m.days.push({date:new Date(c),dateStr:b,day:c.getDate(),dayOfWeek:_,isCompleted:l[b]===!0,isRoutineDay:y,hasTodo:l[b]!==void 0}),c.setDate(c.getDate()+1)}return u.jsx("div",{className:"routine-history-calendar",children:o.map(d=>u.jsxs("div",{className:"history-month",children:[u.jsxs("h3",{className:"history-month-title",children:[d.year," ",d.month+1,""]}),u.jsxs("div",{className:"history-calendar-grid",children:[u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),d.days.length>0&&Array(d.days[0].dayOfWeek).fill(null).map((f,h)=>u.jsx("div",{className:"history-day-cell empty"},`empty-${h}`)),d.days.map((f,h)=>{if(h>0&&f.day===1){const b=6-d.days[h-1].dayOfWeek;return u.jsxs(u.Fragment,{children:[Array(b).fill(null).map((_,S)=>u.jsx("div",{className:"history-day-cell empty"},`empty-end-${h}-${S}`)),u.jsx("div",{className:"history-day-header",children:""},f.dateStr),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsx("div",{className:"history-day-header",children:""}),u.jsxs("div",{className:`history-day-cell ${f.isCompleted?"completed":""} ${f.isRoutineDay?"":"not-routine-day"}`,children:[u.jsx("span",{className:"day-number",children:f.day}),f.isCompleted&&u.jsx("span",{className:"check-mark",children:""})]})]})}return u.jsxs("div",{className:`history-day-cell ${f.isCompleted?"completed":""} ${f.isRoutineDay?"":"not-routine-day"}`,title:`${f.dateStr}${f.isRoutineDay?"":" (  )"}${f.isCompleted?" - ":f.hasTodo?" - ":""}`,children:[u.jsx("span",{className:"day-number",children:f.day}),f.isCompleted&&u.jsx("span",{className:"check-mark",children:""})]},f.dateStr)})]})]},d.key))})})(),u.jsxs("div",{className:"routine-history-stats",children:[u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:" :"}),u.jsxs("span",{className:"stat-value",children:[a.length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value completed",children:[a.filter(i=>i.completed).length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value incomplete",children:[a.filter(i=>!i.completed).length,""]})]}),u.jsxs("div",{className:"stat-item",children:[u.jsx("span",{className:"stat-label",children:":"}),u.jsxs("span",{className:"stat-value",children:[a.length>0?Math.round(a.filter(i=>i.completed).length/a.length*100):0,"%"]})]})]})]})]})})}function Kj({show:e,onClose:t,content:n,setContent:a,isSaving:i,placeholder:s=" ..."}){const r=p.useRef(null);return p.useEffect(()=>{r.current&&e&&(r.current.style.height="auto",r.current.style.height=Math.min(r.current.scrollHeight,window.innerHeight*.6)+"px")},[n,e]),p.useEffect(()=>{e&&r.current&&r.current.focus()},[e]),p.useEffect(()=>{const l=o=>{o.key==="Escape"&&e&&t()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[e,t]),e?u.jsx("div",{className:"memo-modal-overlay",onClick:t,children:u.jsxs("div",{className:"memo-modal",onClick:l=>l.stopPropagation(),children:[u.jsxs("div",{className:"memo-modal-header",children:[u.jsx("h3",{children:"  "}),u.jsxs("div",{className:"memo-modal-actions",children:[i&&u.jsx("span",{className:"memo-saving-indicator",children:" ..."}),u.jsx("button",{className:"memo-modal-close",onClick:t,children:""})]})]}),u.jsx("textarea",{ref:r,value:n,onChange:l=>a(l.target.value),className:"memo-modal-textarea",placeholder:s})]})}):null}function Xj({showGanttChart:e,onClose:t,ganttData:n,ganttPeriod:a,setGanttPeriod:i,formatDateOnly:s}){return e?u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content gantt-modal",onClick:r=>r.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  -  "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"gantt-filter",children:u.jsx("div",{className:"gantt-period-buttons",children:[{value:"1week",label:" 1"},{value:"2weeks",label:" 2"},{value:"1month",label:" 1"},{value:"3months",label:" 3"},{value:"6months",label:" 6"},{value:"all",label:""}].map(r=>u.jsx("button",{className:`period-button ${a===r.value?"active":""}`,onClick:()=>i(r.value),children:r.label},r.value))})}),u.jsx("div",{className:"gantt-content",children:n.length===0?u.jsx("p",{className:"empty-message",children:" ."}):u.jsx("div",{className:"gantt-chart",children:(()=>{const r=n.flatMap(f=>f.dates),l=[...new Set(r)].sort((f,h)=>new Date(f)-new Date(h));if(l.length===0)return u.jsx("p",{className:"empty-message",children:"  ."});const o=new Date(l[0]),c=new Date(l[l.length-1]),d=[];for(let f=new Date(o);f<=c;f.setDate(f.getDate()+1))d.push(new Date(f).toISOString().split("T")[0]);return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"gantt-header",children:[u.jsx("div",{className:"gantt-task-column",children:" "}),u.jsx("div",{className:"gantt-timeline",children:d.map(f=>u.jsx("div",{className:"gantt-date-cell",children:s(new Date(f+"T00:00:00")).split("(")[0]},f))})]}),n.map((f,h)=>{const m=new Set(f.dates);return u.jsxs("div",{className:"gantt-row",children:[u.jsx("div",{className:"gantt-task-column",title:f.text,children:u.jsx("span",{className:f.completed?"completed-task":"",children:f.text})}),u.jsx("div",{className:"gantt-timeline",children:d.map(b=>{if(!m.has(b))return u.jsx("div",{className:"gantt-date-cell"},b);const S=b===f.startDate,y=b===f.completedDate;let g="gantt-date-cell has-task";return S?g+=" start-date":y?g+=" completed-date":g+=" middle-date",u.jsx("div",{className:g,children:y?u.jsx("span",{className:"completed-circle",children:""}):""},b)})})]},f.originalId)})]})})()})})]})}):null}function Qj({showEncouragementModal:e,onClose:t,encouragementMessages:n,newEncouragementMessage:a,setNewEncouragementMessage:i,onAddEncouragementMessage:s,editingEncouragementId:r,editingEncouragementText:l,setEditingEncouragementId:o,setEditingEncouragementText:c,onUpdateEncouragementMessage:d,onDeleteEncouragementMessage:f}){return e?u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content encouragement-modal",onClick:h=>h.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"   "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsxs("div",{className:"encouragement-add-section",children:[u.jsx("input",{type:"text",value:a,onChange:h=>i(h.target.value),placeholder:"   ...",className:"encouragement-input",onKeyDown:async h=>{h.key==="Enter"&&a.trim()!==""&&(await s(a.trim()),i(""))}}),u.jsx("button",{onClick:async()=>{a.trim()!==""&&(await s(a.trim()),i(""))},className:"add-encouragement-button",disabled:a.trim()==="",children:""})]}),u.jsx("div",{className:"encouragement-list",children:n.length===0?u.jsx("p",{className:"empty-message",children:"   ."}):n.map((h,m)=>u.jsx("div",{className:"encouragement-item",children:r===m?u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),className:"encouragement-edit-input",placeholder:" "}),u.jsxs("div",{className:"encouragement-item-actions",children:[u.jsx("button",{onClick:async()=>{l.trim()!==""&&(await d(m,l.trim()),o(null),c(""))},className:"encouragement-save-button",disabled:l.trim()==="",children:""}),u.jsx("button",{onClick:()=>{o(null),c("")},className:"encouragement-cancel-button",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"encouragement-text",children:h}),u.jsxs("div",{className:"encouragement-item-actions",children:[u.jsx("button",{onClick:()=>{o(m),c(h)},className:"encouragement-edit-button",title:"",children:""}),u.jsx("button",{onClick:async()=>{window.confirm("   ?")&&await f(m)},className:"encouragement-delete-button",title:"",children:""})]})]})},m))})]})}):null}function Jj({isOpen:e,onClose:t,onAddSection:n}){const[a,i]=p.useState(""),[s,r]=p.useState(""),l=["","","","","","","","","","","",""],o=c=>{c.preventDefault(),a.trim()&&(n({name:a.trim(),icon:s}),i(""),r(""),t())};return e?u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content add-section-modal",onClick:c=>c.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{className:"modal-close-button",onClick:t,children:""})]}),u.jsxs("form",{onSubmit:o,className:"add-section-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:" "}),u.jsx("input",{type:"text",value:a,onChange:c=>i(c.target.value),placeholder:": ,  , ...",className:"section-name-input",autoFocus:!0,maxLength:20})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:" "}),u.jsx("div",{className:"emoji-grid",children:l.map(c=>u.jsx("button",{type:"button",className:`emoji-button ${s===c?"selected":""}`,onClick:()=>r(c),children:c},c))}),u.jsx("div",{className:"custom-emoji-input",children:u.jsx("input",{type:"text",value:s,onChange:c=>{const d=Array.from(c.target.value);r(d.slice(0,2).join(""))},placeholder:" ",className:"emoji-input"})})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:""}),u.jsxs("div",{className:"section-preview",children:[s," ",a||" "]})]}),u.jsxs("div",{className:"modal-actions",children:[u.jsx("button",{type:"button",onClick:t,className:"cancel-button",children:""}),u.jsx("button",{type:"submit",className:"submit-button",disabled:!a.trim(),children:""})]})]})]})}):null}function Zj({show:e,onClose:t,hiddenSections:n,sectionOrder:a,sectionTitles:i,customSections:s,onShowSection:r}){if(!e)return null;const l=o=>{if(i[o])return i[o];const c=s.find(d=>d.id===o);return c?`${c.icon} ${c.name}`:o};return n.length===0?u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"   "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"modal-body",children:u.jsx("p",{className:"empty-message",children:"  ."})})]})}):u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:o=>o.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"   "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"modal-body",children:u.jsx("div",{className:"hidden-sections-list",children:n.map(o=>u.jsxs("div",{className:"hidden-section-item",children:[u.jsx("span",{className:"hidden-section-title",children:l(o)}),u.jsx("button",{className:"show-section-button",onClick:()=>{r(o)},title:" ",children:" "})]},o))})})]})})}function Xg({todo:e,onClose:t,onDeleteThisOnly:n,onDeleteFromNow:a,onDeleteAll:i}){const[s,r]=p.useState("this-only"),[l,o]=p.useState(null),c=()=>{s==="this-only"?n(e):s==="from-now"?a(e):s==="all"&&i(e),t()},d=[{id:"this-only",label:" ",subtitle:" ",tooltip:"  ,  ,   "},{id:"from-now",label:"   ",subtitle:" ",tooltip:"  ,  ,   "},{id:"all",label:" ",subtitle:" ",tooltip:"  ,  ,   "}];return u.jsx("div",{className:"modal-overlay",onClick:t,children:u.jsxs("div",{className:"modal-content delete-confirm-modal-v2",onClick:f=>f.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),u.jsxs("div",{className:"delete-confirm-content-v2",children:[u.jsxs("p",{className:"delete-info-text",children:["    .",u.jsx("br",{}),"    ."]}),u.jsx("div",{className:"delete-options-v2",children:d.map(f=>u.jsxs("div",{className:"delete-option-item",children:[u.jsxs("label",{className:"delete-option-label",children:[u.jsx("input",{type:"radio",name:"delete-option",value:f.id,checked:s===f.id,onChange:h=>r(h.target.value)}),u.jsxs("div",{className:"option-text",children:[u.jsx("span",{className:"option-main",children:f.label}),u.jsx("span",{className:"option-sub",children:f.subtitle})]})]}),u.jsx("button",{className:"option-help-btn",onMouseEnter:()=>o(f.id),onMouseLeave:()=>o(null),onClick:h=>{h.preventDefault(),o(l===f.id?null:f.id)},children:u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[u.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("text",{x:"8",y:"11.5",textAnchor:"middle",fontSize:"11",fill:"currentColor",fontWeight:"600",children:"?"})]})}),l===f.id&&u.jsx("div",{className:"option-tooltip",children:f.tooltip})]},f.id))}),u.jsxs("div",{className:"delete-modal-actions",children:[u.jsx("button",{className:"btn-cancel",onClick:t,children:""}),u.jsx("button",{className:"btn-confirm",onClick:c,children:""})]})]})]})})}function Pj({authLoading:e,session:t,handleGoogleLogin:n}){return e?u.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:u.jsxs("div",{style:{textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),u.jsx("div",{children:" ..."})]})}):t?null:u.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:u.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",maxWidth:"400px"},children:[u.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"1rem"},children:" Todo Note"}),u.jsx("p",{style:{fontSize:"1.1rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"2rem"},children:"     "}),u.jsxs("button",{onClick:n,style:{padding:"1rem 2rem",fontSize:"1.1rem",background:"#646cff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 auto"},children:[u.jsx("span",{children:""}),"Google "]})]})})}function Fj(e){const[t,n]=p.useState(["routine","normal"]),[a,i]=p.useState(!1),s=async()=>{var f;if((f=e==null?void 0:e.user)!=null&&f.id)try{const{data:h,error:m}=await Te.from("user_settings").select("setting_value").eq("setting_key","section_order").maybeSingle();if(m){console.error("   :",m.message);return}if(h&&h.setting_value){const b=JSON.parse(h.setting_value);n(b)}}catch(h){console.error("   :",h.message)}},r=async f=>{var h;if((h=e==null?void 0:e.user)!=null&&h.id)try{const{data:m,error:b}=await Te.from("user_settings").select("id").eq("setting_key","section_order").maybeSingle();if(b){console.error("   :",b.message);return}m?await Te.from("user_settings").update({setting_value:JSON.stringify(f),updated_at:new Date().toISOString()}).eq("setting_key","section_order"):await Te.from("user_settings").insert([{setting_key:"section_order",setting_value:JSON.stringify(f),user_id:e.user.id}])}catch(m){console.error("   :",m.message)}};return{sectionOrder:t,setSectionOrder:n,isReorderMode:a,setIsReorderMode:i,fetchSectionOrder:s,saveSectionOrder:r,moveSectionLeft:f=>{n(h=>{const m=h.indexOf(f);if(m<=0)return h;const b=[...h];return[b[m-1],b[m]]=[b[m],b[m-1]],r(b),b})},moveSectionRight:f=>{n(h=>{const m=h.indexOf(f);if(m===-1||m>=h.length-1)return h;const b=[...h];return[b[m],b[m+1]]=[b[m+1],b[m]],r(b),b})},handleSectionDragEnd:f=>{const{active:h,over:m}=f;a&&t.includes(h.id)&&m&&h.id!==(m==null?void 0:m.id)&&n(b=>{const _=b.indexOf(h.id),S=b.indexOf(m.id),y=Ga(b,_,S);return r(y),y})},handleSectionsContainerDoubleClick:f=>{a&&f.target===f.currentTarget&&i(!1)}}}function Wj(e){const[t,n]=p.useState(""),[a,i]=p.useState(!1),[s,r]=p.useState(""),l=p.useRef(null),o=p.useRef(null),c=async()=>{try{const{data:f,error:h}=await Te.from("spec_memos").select("content").order("created_at",{ascending:!1}).limit(1);if(h)throw h;const m=f&&f.length>0?f[0].content:"";n(m),r(m)}catch(f){console.error("Error fetching memo:",f.message),n(""),r("")}},d=p.useCallback(async f=>{var h;if(f!==s)try{i(!0);const{data:m}=await Te.from("spec_memos").select("id").order("created_at",{ascending:!1}).limit(1);m&&m.length>0?await Te.from("spec_memos").update({content:f,updated_at:new Date().toISOString()}).eq("id",m[0].id):await Te.from("spec_memos").insert([{content:f,user_id:(h=e==null?void 0:e.user)==null?void 0:h.id}]),r(f)}catch(m){console.error("Error saving memo:",m.message)}finally{i(!1)}},[e,s]);return p.useEffect(()=>{if(t!==s)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{d(t)},1e3),()=>{o.current&&clearTimeout(o.current)}},[t,d,s]),p.useEffect(()=>()=>{o.current&&clearTimeout(o.current),t!==s&&d(t)},[]),{memoContent:t,setMemoContent:n,isSavingMemo:a,memoTextareaRef:l,fetchMemoContent:c}}const Rb=({type:e,supabase:t,selectedDate:n,onDeleteSuccess:a})=>({deleteThisOnly:async l=>{try{const o=je(n),d=[...l.hidden_dates||[],o],f=e==="todo"?"todos":"routines",{error:h}=await t.from(f).update({hidden_dates:d}).eq("id",l.id);if(h)throw h;return a&&a(l.id,Hu.THIS_ONLY),{success:!0}}catch(o){return console.error(`${e}   (THIS_ONLY):`,o.message),{success:!1,error:o}}},deleteFromNow:async l=>{try{const o=je(n),d=(l.visible_dates||[]).filter(m=>m<o),f=e==="todo"?"todos":"routines",{error:h}=await t.from(f).update({visible_dates:d,stop_carryover_from:o}).eq("id",l.id);if(h)throw h;return a&&a(l.id,Hu.FROM_NOW),{success:!0}}catch(o){return console.error(`${e}   (FROM_NOW):`,o.message),{success:!1,error:o}}},deleteAll:async l=>{try{const o=je(n),c=e==="todo"?"todos":"routines",{error:d}=await t.from(c).update({deleted:!0,deleted_date:o}).eq("id",l.id);if(d)throw d;return e==="routine"&&await t.from("todos").update({routine_id:null}).eq("routine_id",l.id),a&&a(l.id,Hu.ALL),{success:!0}}catch(o){return console.error(`${e}   (ALL):`,o.message),{success:!1,error:o}}}}),eO=e=>["sun","mon","tue","wed","thu","fri","sat"][e],tO=({session:e,supabase:t,selectedDate:n,setTodos:a,setSuccessToastMessage:i,setShowSuccessToast:s})=>{const[r,l]=p.useState([]),[o,c]=p.useState(""),[d,f]=p.useState([]),[h,m]=p.useState(""),[b,_]=p.useState(!1),[S,y]=p.useState(!1),[g,v]=p.useState(null),[w,x]=p.useState(""),[j,T]=p.useState([]),[O,C]=p.useState(!1),[B,W]=p.useState(null),[qe,Ge]=p.useState([]),[Xe,ke]=p.useState(!1),[L,Y]=p.useState(null),Q=p.useRef(new Set),{deleteThisOnly:fe,deleteFromNow:ce,deleteAll:St}=Rb({type:"routine",supabase:t,selectedDate:n,onDeleteSuccess:(Z,ie)=>{l(_e=>_e.filter(De=>De.id!==Z)),i(" "),s(!0)}}),Ue=async()=>{var Z;if((Z=e==null?void 0:e.user)!=null&&Z.id)try{const{data:ie,error:_e}=await t.from("routines").select("*").eq("deleted",!1).order("created_at",{ascending:!1});if(_e)throw _e;l(ie||[])}catch(ie){console.error("  :",ie.message)}},vt=async()=>{var Z;if(!(o.trim()===""||b))try{_(!0);const ie={text:o,days:d,start_date:je(n),user_id:(Z=e==null?void 0:e.user)==null?void 0:Z.id};h&&(ie.time_slot=h);const{data:_e,error:De}=await t.from("routines").insert([ie]).select();if(De)throw De;l([_e[0],...r]),c(""),f([]),m("")}catch(ie){console.error("  :",ie.message)}finally{_(!1)}},Pe=async(Z,ie,_e,De=null,Bt=!1,Rt="",on=null)=>{var ht;try{if(Bt){const{error:mt}=await t.from("todos").update({routine_id:null}).eq("id",Z);if(mt)throw mt;a(Me=>Me.map(xe=>xe.id===Z?{...xe,routine_id:null}:xe));return}if(De){const{error:mt}=await t.from("routines").update({days:_e,time_slot:Rt}).eq("id",De);if(mt)throw mt;const{error:Me}=await t.from("todos").update({is_pending_routine:_e.length===0}).eq("id",Z);if(Me)throw Me;l(xe=>xe.map(ee=>ee.id===De?{...ee,days:_e,time_slot:Rt}:ee)),a(xe=>xe.map(ee=>ee.id===Z?{...ee,is_pending_routine:_e.length===0}:ee))}else{const mt={text:ie,days:_e,time_slot:Rt,start_date:on||je(n),user_id:(ht=e==null?void 0:e.user)==null?void 0:ht.id},{data:Me,error:xe}=await t.from("routines").insert([mt]).select();if(xe)throw xe;const{error:ee}=await t.from("todos").update({routine_id:Me[0].id,is_pending_routine:_e.length===0}).eq("id",Z);if(ee)throw ee;a($e=>$e.map(yt=>yt.id===Z?{...yt,routine_id:Me[0].id,is_pending_routine:_e.length===0}:yt)),l($e=>[Me[0],...$e])}}catch(mt){console.error("  :",mt.message)}},Qe=Z=>{v(Z.id),x(Z.text),T(Z.days)},nt=()=>{v(null),x(""),T([])},ln=async()=>{if(!(!g||w.trim()===""||j.length===0))try{const{error:Z}=await t.from("routines").update({text:w.trim(),days:j}).eq("id",g);if(Z)throw Z;l(r.map(ie=>ie.id===g?{...ie,text:w.trim(),days:j}:ie)),nt()}catch(Z){console.error("  :",Z.message)}},Fe=Z=>{T(ie=>ie.includes(Z)?ie.filter(_e=>_e!==Z):[...ie,Z])},ot=async Z=>{const ie=r.find(_e=>_e.id===Z);ie&&(Y(ie),ke(!0))},be=async Z=>{var ie;if(!Q.current.has(Z))try{Q.current.add(Z);const _e=new Date(Z),De=eO(_e.getDay()),{data:Bt,error:Rt}=await t.from("routines").select("*").eq("deleted",!1);if(Rt)throw Rt;const on=Bt.filter(ht=>{const mt=ht.days||[],Me=mt.length===0||mt.includes(De);if(ht.start_date){const xe=new Date(ht.start_date),ee=_e>=xe;return Me&&ee}return Me});if(on.length===0)return;for(const ht of on){const mt=ht.text,{data:Me,error:xe}=await t.from("todos").select("*").eq("routine_id",ht.id).eq("deleted",!1);if(xe)throw xe;if(Me&&Me.length>1){console.warn(` ${ht.id}    (${Me.length}).     .`);for(let $e=1;$e<Me.length;$e++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",Me[$e].id)}const ee=Me&&Me.length>0?Me[0]:null;if(ee){const $e=ee.visible_dates||[],yt=!ht.days||ht.days.length===0,N=yt?"pending_routine":"routine";if($e.includes(Z)){(ee.is_pending_routine!==yt||ee.section_type!==N)&&await t.from("todos").update({is_pending_routine:yt,section_type:N}).eq("id",ee.id);continue}const U=[...$e,Z].sort(),{error:z}=await t.from("todos").update({visible_dates:U,is_pending_routine:yt,section_type:yt?"pending_routine":"routine"}).eq("id",ee.id);z&&console.error("    :",z.message)}else{const $e=!ht.days||ht.days.length===0,{error:yt}=await t.from("todos").insert([{text:mt,completed:!1,date:Z,visible_dates:[Z],hidden_dates:[],order_index:0,routine_id:ht.id,is_pending_routine:$e,section_type:$e?"pending_routine":"routine",user_id:(ie=e==null?void 0:e.user)==null?void 0:ie.id}]);yt&&console.error("   :",yt.message)}}}catch(_e){console.error("   :",_e.message)}finally{setTimeout(()=>{Q.current.delete(Z)},1e3)}},pn=async()=>{const ie=je(new Date);await be(ie)},Yt=async Z=>{try{const{data:ie,error:_e}=await t.from("todos").select("*").eq("routine_id",Z.id).eq("deleted",!1);if(_e)throw _e;const De=ie&&ie.length>0?ie[0]:null;if(De&&De.visible_dates){const Bt=De.visible_dates.sort().map(Rt=>({id:`${De.id}-${Rt}`,date:Rt,text:De.text,completed:De.completed,routine_id:De.routine_id}));Ge(Bt)}else Ge([]);W(Z),C(!0)}catch(ie){console.error("   :",ie.message),alert("   : "+ie.message)}},bn=()=>{C(!1),W(null),Ge([])},Tt=()=>{y(!0),Ue()},_n=()=>{y(!1),c(""),f([])},wn=Z=>{f(ie=>ie.includes(Z)?ie.filter(_e=>_e!==Z):[...ie,Z])};return p.useEffect(()=>{e&&Ue()},[e]),{routines:r,setRoutines:l,routineInput:o,selectedDays:d,selectedTimeSlot:h,isAddingRoutine:b,showRoutineModal:S,editingRoutineId:g,editingRoutineText:w,editingRoutineDays:j,showRoutineHistory:O,selectedRoutineForHistory:B,routineHistoryData:qe,routineCreationInProgress:Q,showDeleteConfirmModal:Xe,setShowDeleteConfirmModal:ke,routineToDelete:L,setRoutineToDelete:Y,setRoutineInput:c,setSelectedTimeSlot:m,fetchRoutines:Ue,handleAddRoutine:vt,handleDeleteRoutine:ot,deleteThisOnly:fe,deleteFromNow:ce,deleteAll:St,handleStartEditRoutine:Qe,handleSaveEditRoutine:ln,handleCancelEditRoutine:nt,handleToggleEditDay:Fe,handleCreateRoutineFromTodo:Pe,createRoutineTodosForDate:be,createRoutineTodos:pn,fetchRoutineHistory:Yt,handleCloseRoutineHistory:bn,handleOpenRoutine:Tt,handleCloseRoutine:_n,handleToggleDay:wn}},nO=(e,t,n,a,i,s,r,l,o)=>{const[c,d]=p.useState(""),[f,h]=p.useState(""),[m,b]=p.useState(""),[_,S]=p.useState(!0),[y,g]=p.useState(!1),[v,w]=p.useState(!1),[x,j]=p.useState(null),[T,O]=p.useState(!1),[C,B]=p.useState(!1),[W,qe]=p.useState(""),[Ge,Xe]=p.useState(null),[ke,L]=p.useState(null),[Y,Q]=p.useState(!1),[fe,ce]=p.useState(null),[St,Ue]=p.useState(null),[vt,Pe]=p.useState(null),Qe=p.useRef(new Set),nt=p.useRef(new Set),{deleteThisOnly:ln,deleteFromNow:Fe,deleteAll:ot}=Rb({type:"todo",supabase:t,selectedDate:n,onDeleteSuccess:(N,U)=>{const z=a.find(F=>F.id===N);z&&(j(z),Xe({id:N,deleteType:U,item:z}),O(!0),setTimeout(()=>{O(!1),j(null),Xe(null)},5e3)),i(F=>F.filter(q=>q.id!==N)),Q(!1),ce(null)}}),be=N=>["sun","mon","tue","wed","thu","fri","sat"][N],pn=async N=>{var U;if(!Qe.current.has(N))try{Qe.current.add(N);const z=new Date(N),F=be(z.getDay()),{data:q,error:P}=await t.from("routines").select("*").eq("deleted",!1);if(P)throw P;const he=q.filter($=>{const Ee=$.days||[],re=Ee.length===0||Ee.includes(F);if($.start_date){const Ne=new Date($.start_date),I=z>=Ne;return re&&I}return re});if(he.length===0)return;for(const $ of he){const Ee=$.text,{data:re,error:Ne}=await t.from("todos").select("*").eq("routine_id",$.id).eq("deleted",!1);if(Ne)throw Ne;if(re&&re.length>1){console.warn(` ${$.id}    (${re.length}).     .`);for(let ye=1;ye<re.length;ye++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",re[ye].id)}const I=re&&re.length>0?re[0]:null;if(I){if((I.hidden_dates||[]).includes(N)||I.stop_carryover_from&&N>=I.stop_carryover_from)continue;const te=!$.days||$.days.length===0,ze=I.visible_dates||[],me=te?"pending_routine":"routine";if(ze.includes(N)){if(I.is_pending_routine!==te||I.section_type!==me){const{error:We}=await t.from("todos").update({is_pending_routine:te,section_type:me}).eq("id",I.id);We&&console.error(" :",We)}continue}const ue=[...ze,N].sort(),{error:K}=await t.from("todos").update({visible_dates:ue,is_pending_routine:te,section_type:te?"pending_routine":"routine"}).eq("id",I.id);K&&console.error("    :",K.message)}else{const ye=!$.days||$.days.length===0,{error:te}=await t.from("todos").insert([{text:Ee,completed:!1,date:N,visible_dates:[N],hidden_dates:[],order_index:0,routine_id:$.id,is_pending_routine:ye,section_type:ye?"pending_routine":"routine",user_id:(U=e==null?void 0:e.user)==null?void 0:U.id}]);te&&console.error("   :",te.message)}}}catch(z){console.error("   :",z.message)}finally{setTimeout(()=>{Qe.current.delete(N)},1e3)}},Yt=async()=>{var N;if(!((N=e==null?void 0:e.user)!=null&&N.id)){S(!1);return}try{S(!0);const U=je(n);await pn(U);const{data:z,error:F}=await t.from("todos").select("*").eq("deleted",!1);if(F)throw F;const q=(z||[]).filter(I=>I.routine_id),P=[...new Set(q.map(I=>I.routine_id))];let he={};if(P.length>0){const{data:I}=await t.from("routines").select("*").in("id",P);he=(I||[]).reduce((ye,te)=>(ye[te.id]=te,ye),{})}const $=new Date(U),Ee=be($.getDay()),re=(z||[]).filter(I=>{if(I.stop_carryover_from&&U>=I.stop_carryover_from||I.hidden_dates&&Array.isArray(I.hidden_dates)&&I.hidden_dates.includes(U))return!1;if(I.routine_id){const te=he[I.routine_id];if(te){const ze=te.days||[];if(ze.length>0&&!ze.includes(Ee))return!1}}return I.visible_dates&&Array.isArray(I.visible_dates)?I.visible_dates.includes(U):I.date===U}),Ne=re.filter(I=>I.routine_id);if(Ne.length>0){const I=[...new Set(Ne.map(te=>te.routine_id))],{data:ye}=await t.from("routines").select("*").in("id",I);for(const te of Ne){const ze=ye==null?void 0:ye.find(K=>K.id===te.routine_id);if(!ze)continue;const me=!ze.days||ze.days.length===0,ue=me?"pending_routine":"routine";(te.section_type!==ue||te.is_pending_routine!==me)&&(await t.from("todos").update({section_type:ue,is_pending_routine:me}).eq("id",te.id),te.section_type=ue,te.is_pending_routine=me)}}i(re)}catch(U){console.error("   :",U.message)}finally{S(!1)}},bn=async()=>{var N;if(!(c.trim()===""||v))try{w(!0);const U=a.filter(he=>!he.parent_id&&he.section_type==="normal"),z=U.length>0?Math.max(...U.map(he=>he.order_index))+1:1,F=je(n),{data:q,error:P}=await t.from("todos").insert([{text:c,completed:!1,order_index:z,date:F,visible_dates:[F],hidden_dates:[],section_type:"normal",user_id:(N=e==null?void 0:e.user)==null?void 0:N.id}]).select();if(P)throw P;i([...a,q[0]]),d("")}catch(U){console.error("   :",U.message)}finally{w(!1)}},Tt=async()=>{var N,U;if(!(f.trim()===""||v))try{w(!0);const z=je(n),{data:F,error:q}=await t.from("routines").insert([{text:f,days:[],start_date:z,user_id:(N=e==null?void 0:e.user)==null?void 0:N.id}]).select();if(q)throw q;const P=F[0],he=a.filter(Ne=>!Ne.parent_id&&Ne.section_type==="pending_routine"),$=he.length>0?Math.max(...he.map(Ne=>Ne.order_index))+1:1,{data:Ee,error:re}=await t.from("todos").insert([{text:f,completed:!1,order_index:$,date:z,visible_dates:[z],hidden_dates:[],routine_id:P.id,is_pending_routine:!0,section_type:"pending_routine",user_id:(U=e==null?void 0:e.user)==null?void 0:U.id}]).select();if(re)throw re;r([P,...s]),i([...a,Ee[0]]),h("")}catch(z){console.error("   :",z.message)}finally{w(!1)}},_n=async()=>{var N;if(!(m.trim()===""||v))try{w(!0);const U=a.filter(he=>!he.parent_id&&he.section_type==="normal"),z=U.length>0?Math.max(...U.map(he=>he.order_index))+1:1,F=je(n),{data:q,error:P}=await t.from("todos").insert([{text:m,completed:!1,order_index:z,date:F,visible_dates:[F],hidden_dates:[],section_type:"normal",user_id:(N=e==null?void 0:e.user)==null?void 0:N.id}]).select();if(P)throw P;i([...a,q[0]]),b("")}catch(U){console.error("   :",U.message)}finally{w(!1)}},wn=async N=>{const U=a.find(z=>z.id===N);if(U)try{const z=!U.completed,F=z?new Date().toISOString():null,{error:q}=await t.from("todos").update({completed:z,completed_at:F}).eq("id",N);if(q)throw q;i(a.map(P=>P.id===N?{...P,completed:z,completed_at:F}:P))}catch(z){console.error("   :",z.message)}},Z=N=>{i(a.filter(U=>U.id!==N))},ie=async(N,U)=>{const z=a.find(F=>F.id===N);z&&(U?U==="this-only"?await ln(z):U==="from-now"?await Fe(z):U==="all"&&await ot(z):(ce(z),Q(!0)))},_e=async()=>{if(!(!x||!Ge))try{const{deleteType:N}=Ge,U=je(n);if(N==="this-only"){const z=(x.hidden_dates||[]).filter(q=>q!==U),{error:F}=await t.from("todos").update({hidden_dates:z}).eq("id",x.id);if(F)throw F}else if(N==="from-now"){const{error:z}=await t.from("todos").update({visible_dates:x.visible_dates,stop_carryover_from:null}).eq("id",x.id);if(z)throw z}else if(N==="all"){const{error:z}=await t.from("todos").update({deleted:!1,deleted_date:null}).eq("id",x.id);if(z)throw z}i(z=>{const F={...x};return[...z,F].sort((P,he)=>P.order_index-he.order_index)}),O(!1),j(null),Xe(null)}catch(N){console.error("  :",N.message)}},De=async(N,U)=>{var z,F;try{let q=null;nt.current.add(N);const P=new Date().toISOString();if(i(Ee=>(q=Ee.find(re=>re.id===N),!q||q.text===U?(nt.current.delete(N),Ee):Ee.map(re=>re.id===N?{...re,text:U,updated_at:P}:re))),!q||q.text===U)return;const{error:he}=await t.from("todo_history").insert([{todo_id:N,previous_text:q.text,new_text:U,changed_on_date:q.date,user_id:(z=e==null?void 0:e.user)==null?void 0:z.id}]);if(he&&console.error("  :",he.message),q.original_todo_id){const{data:Ee,error:re}=await t.from("todos").select("text, date").eq("id",q.original_todo_id).single();!re&&Ee&&await t.from("todo_history").insert([{todo_id:q.original_todo_id,previous_text:q.text,new_text:U,changed_on_date:q.date,user_id:(F=e==null?void 0:e.user)==null?void 0:F.id}])}const{error:$}=await t.from("todos").update({text:U}).eq("id",N);$?(console.error("   :",$.message),i(Ee=>Ee.map(re=>re.id===N?q:re)),nt.current.delete(N)):setTimeout(()=>{nt.current.delete(N)},5e3)}catch(q){console.error("   :",q.message),nt.current.delete(N)}},Bt=async(N,U)=>{var z;if(!(!U||U.trim()===""))try{const q=a.filter(Ee=>Ee.parent_id===N).length+1,P=je(n),{data:he,error:$}=await t.from("todos").insert([{text:U.trim(),completed:!1,order_index:q,date:P,parent_id:N,user_id:(z=e==null?void 0:e.user)==null?void 0:z.id}]).select();if($)throw $;i([...a,he[0]])}catch(F){console.error("    :",F.message)}},Rt=async(N,U,z)=>{if(!a.find($=>$.id===N))return;const q=a.filter($=>!($.parent_id||$.section_type!==U||U==="custom"&&$.section_id!==z)).sort(($,Ee)=>$.order_index-Ee.order_index),P=q.findIndex($=>$.id===N);if(P<=0)return;const he=Ga(q,P,P-1);await Me(he)},on=async(N,U,z)=>{if(!a.find($=>$.id===N))return;const q=a.filter($=>!($.parent_id||$.section_type!==U||U==="custom"&&$.section_id!==z)).sort(($,Ee)=>$.order_index-Ee.order_index),P=q.findIndex($=>$.id===N);if(P>=q.length-1)return;const he=Ga(q,P,P+1);await Me(he)},ht=async(N,U,z)=>{if(!a.find($=>$.id===N))return;const q=a.filter($=>!($.parent_id||$.section_type!==U||U==="custom"&&$.section_id!==z)).sort(($,Ee)=>$.order_index-Ee.order_index),P=q.findIndex($=>$.id===N);if(P<=0)return;const he=Ga(q,P,0);await Me(he)},mt=async(N,U,z)=>{if(!a.find($=>$.id===N))return;const q=a.filter($=>!($.parent_id||$.section_type!==U||U==="custom"&&$.section_id!==z)).sort(($,Ee)=>$.order_index-Ee.order_index),P=q.findIndex($=>$.id===N);if(P>=q.length-1)return;const he=Ga(q,P,q.length-1);await Me(he)},Me=async N=>{let U=[...a];N.forEach((z,F)=>{const q=U.findIndex(P=>P.id===z.id);q!==-1&&(U[q]={...U[q],order_index:F+1})}),i(U);try{for(let z=0;z<N.length;z++)await t.from("todos").update({order_index:z+1}).eq("id",N[z].id)}catch(z){console.error("  :",z.message),i(a)}};return{inputValue:c,setInputValue:d,routineInputValue:f,setRoutineInputValue:h,normalInputValue:m,setNormalInputValue:b,loading:_,isDraggingAny:y,isAdding:v,deletedTodo:x,showUndoToast:T,showSuccessToast:C,successToastMessage:W,lastDeleteAction:Ge,focusedTodoId:ke,setFocusedTodoId:L,selectedTodoForModal:l,showDeleteConfirmModal:Y,setShowDeleteConfirmModal:Q,todoToDelete:fe,setTodoToDelete:ce,activeTodoId:St,overId:vt,fetchTodos:Yt,handleAddTodo:bn,handleAddRoutineTodo:Tt,handleAddNormalTodo:_n,handleToggleTodo:wn,handleDeleteTodo:ie,deleteThisOnly:ln,deleteFromNow:Fe,deleteAll:ot,handleUndoDelete:_e,handleEditTodo:De,handleAddSubTodo:Bt,handleDragEnd:async N=>{g(!1),Ue(null),Pe(null);const{active:U,over:z}=N;if(!z||U.id===z.id)return;const F=a.find(K=>K.id===U.id),q=a.find(K=>K.id===z.id);if(!F||!q)return;const P=F.section_type,he=F.section_id||null,$=q.section_type,Ee=q.section_id||null,re=P!==$||P==="custom"&&he!==Ee,Ne=$,I=Ee,ye=a.filter(K=>!(K.parent_id||K.section_type!==Ne||Ne==="custom"&&K.section_id!==I)).sort((K,Zt)=>K.order_index-Zt.order_index),te=ye.findIndex(K=>K.id===U.id),ze=ye.findIndex(K=>K.id===z.id);let me=[...ye];re?me.splice(ze,0,{...F,section_type:Ne,section_id:I,routine_id:Ne==="routine"||Ne==="pending_routine"?F.routine_id:null}):me=Ga(ye,te,ze);let ue=[...a];if(me.forEach((K,Zt)=>{const We=ue.findIndex(Gt=>Gt.id===K.id);We!==-1&&(ue[We]={...K,order_index:Zt+1})}),re){const K=ue.findIndex(Zt=>Zt.id===U.id);K!==-1&&(ue[K]={...ue[K],section_type:Ne,section_id:I,routine_id:Ne==="routine"||Ne==="pending_routine"?ue[K].routine_id:null})}i(ue);try{if(re){const K={section_type:Ne,section_id:I};Ne!=="routine"&&Ne!=="pending_routine"&&(K.routine_id=null,K.is_pending_routine=!1),await t.from("todos").update(K).eq("id",U.id)}for(let K=0;K<me.length;K++)await t.from("todos").update({order_index:K+1}).eq("id",me[K].id)}catch(K){console.error("  :",K.message),i(a)}},handleRemoveTodoFromUI:Z,handleDragStart:N=>{const{active:U}=N;g(!0),Ue(U.id)},handleDragOver:N=>{const{over:U}=N;Pe((U==null?void 0:U.id)||null)},handleDragCancel:()=>{g(!1),Ue(null),Pe(null)},handleMoveUp:Rt,handleMoveDown:on,handleMoveToTop:ht,handleMoveToBottom:mt}},aO=({session:e,supabase:t,selectedTodoForModal:n,setSelectedTodoForModal:a})=>{const[i,s]=p.useState(!1),[r,l]=p.useState({}),[o,c]=p.useState([]);return{showTodoHistoryModal:i,todoHistory:r,expandedHistoryIds:o,handleOpenTodoHistoryModal:async m=>{a(m);try{const{data:b,error:_}=await t.from("todo_history").select("*").eq("todo_id",m.id).order("changed_at",{ascending:!1});if(_)throw _;l(S=>({...S,[m.id]:b||[]}))}catch(b){console.error("Error fetching history:",b)}s(!0)},handleCloseTodoHistoryModal:()=>{s(!1),a(null),c([])},toggleHistoryDetail:m=>{c(b=>b.includes(m)?b.filter(_=>_!==m):[...b,m])}}},iO=({selectedTodoForModal:e,setSelectedTodoForModal:t,routines:n})=>{const[a,i]=p.useState(!1),[s,r]=p.useState([]),[l,o]=p.useState(!1),[c,d]=p.useState("");return{showTodoRoutineSetupModal:a,routineDaysForModal:s,setRoutineDaysForModal:r,isEditingRoutineInModal:l,setIsEditingRoutineInModal:o,routineTimeSlotForModal:c,setRoutineTimeSlotForModal:d,handleOpenTodoRoutineSetupModal:m=>{t(m);const b=n.find(_=>_.id===m.routine_id);b?(r(b.days||[]),d(b.time_slot||""),o(!1)):(r([]),d(""),o(!0)),i(!0)},handleCloseTodoRoutineSetupModal:()=>{i(!1),t(null),r([]),d(""),o(!1)}}},sO=({session:e,supabase:t,selectedDate:n})=>{const a=p.useRef(!1);return{carryOverInProgress:a,carryOverIncompleteTodos:async r=>{if(!a.current)try{a.current=!0;const{data:l,error:o}=await t.from("todos").select("*").eq("deleted",!1).eq("completed",!1);if(o)throw o;if(!l||l.length===0)return;const c=l.filter(d=>(d.hidden_dates||[]).includes(r)?!1:d.visible_dates&&Array.isArray(d.visible_dates)&&d.visible_dates.length>0?d.visible_dates.includes(r)?!1:d.visible_dates.some(m=>m<r):!!(d.date&&d.date<r));if(c.length===0)return;for(const d of c){let f=[];d.visible_dates&&Array.isArray(d.visible_dates)&&d.visible_dates.length>0?f=[...d.visible_dates,r]:f=d.date?[d.date,r]:[r];const{error:h}=await t.from("todos").update({visible_dates:f}).eq("id",d.id);h&&console.error(` ${d.id}  :`,h.message)}}catch(l){console.error("  :",l.message)}finally{a.current=!1}},movePastIncompleteTodosToToday:async()=>{if(!a.current)try{a.current=!0;const r=new Date,l=je(r),{data:o,error:c}=await t.from("todos").select("date").lt("date",l).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("date",{ascending:!0}).limit(1);if(c)throw c;if(!o||o.length===0)return;const d=new Date(o[0].date+"T00:00:00");let f=new Date(d);const h=new Date(r);h.setDate(h.getDate()-1);let m=0;for(;f<=h;){const b=je(f),_=new Date(f);_.setDate(_.getDate()+1);const S=je(_),{data:y,error:g}=await t.from("todos").select("*").eq("date",b).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("order_index",{ascending:!0});if(g)throw g;if(y&&y.length>0){const{data:v,error:w}=await t.from("todos").select("*").eq("date",S).eq("deleted",!1).order("order_index",{ascending:!0});if(w)throw w;const x=new Set;v==null||v.forEach(T=>{T.original_todo_id!==null&&x.add(T.original_todo_id)});const j=y.filter(T=>{if(T.stop_carryover_from&&b>=T.stop_carryover_from)return!1;const O=T.original_todo_id||T.id;return!x.has(O)});if(j.length>0){const T=j.map(ke=>ke.original_todo_id||ke.id).filter((ke,L,Y)=>Y.indexOf(ke)===L),{data:O,error:C}=await t.from("todos").select("id, created_at").in("id",T);if(C)throw C;const B={};O==null||O.forEach(ke=>{B[ke.id]=ke.created_at});const qe=(v?v.length:0)+1,Ge=j.map((ke,L)=>{const Y=ke.original_todo_id||ke.id;return{text:ke.text,completed:!1,date:S,created_at:B[Y]||ke.created_at,order_index:qe+L,original_todo_id:Y,parent_id:null,routine_id:null}}),{error:Xe}=await t.from("todos").insert(Ge);if(Xe)throw Xe;m+=j.length}}f.setDate(f.getDate()+1)}m>0}catch(r){console.error("    :",r.message)}finally{a.current=!1}}}};function rO(e,t){const[n,a]=p.useState([]),[i,s]=p.useState(!1),[r,l]=p.useState(""),[o,c]=p.useState(null),[d,f]=p.useState(""),[h,m]=p.useState(!1),[b,_]=p.useState(""),S=()=>{if(n.length===0)return"";const j=Math.floor(Math.random()*n.length);return n[j]},y=()=>{let j=0;m(!0),setTimeout(()=>{let T=S();for(;T===b&&n.length>1&&j<10;)T=S(),j++;m(!1),_(T)},300)},g=async()=>{try{const{data:j,error:T}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(T)throw T;if(j&&j.length>0){const O=j.map(C=>C.message);a(O),b||_(O[0])}}catch(j){console.error("   :",j.message)}},v=async j=>{var T;try{const{data:O}=await t.from("encouragement_messages").select("order_index").order("order_index",{ascending:!1}).limit(1),C=O&&O.length>0?O[0].order_index:0,{error:B}=await t.from("encouragement_messages").insert([{message:j,order_index:C+1,user_id:(T=e==null?void 0:e.user)==null?void 0:T.id}]);if(B)throw B;await g()}catch(O){console.error("   :",O.message),alert("   .")}},w=async(j,T)=>{try{const{data:O}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!O||j>=O.length)throw new Error("   .");const C=O[j],{error:B}=await t.from("encouragement_messages").update({message:T}).eq("id",C.id);if(B)throw B;await g()}catch(O){console.error("   :",O.message),alert("   .")}},x=async j=>{try{const{data:T}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!T||j>=T.length)throw new Error("   .");const O=T[j],{error:C}=await t.from("encouragement_messages").delete().eq("id",O.id);if(C)throw C;await g()}catch(T){console.error("   :",T.message),alert("   .")}};return p.useEffect(()=>{n.length>0&&!b&&_(S())},[n]),{encouragementMessages:n,showEncouragementModal:i,setShowEncouragementModal:s,newEncouragementMessage:r,setNewEncouragementMessage:l,editingEncouragementId:o,setEditingEncouragementId:c,editingEncouragementText:d,setEditingEncouragementText:f,showEncouragementEmoji:h,currentEncouragementMessage:b,handleEncouragementClick:y,fetchEncouragementMessages:g,addEncouragementMessage:v,updateEncouragementMessage:w,deleteEncouragementMessage:x}}function lO(e){const[t,n]=p.useState(!1),[a,i]=p.useState([]),[s,r]=p.useState("1week"),l=async()=>{try{const d=new Date,f=je(d);let h=null;if(s!=="all")switch(h=new Date(d),s){case"1week":h.setDate(d.getDate()-7);break;case"2weeks":h.setDate(d.getDate()-14);break;case"1month":h.setMonth(d.getMonth()-1);break;case"3months":h.setMonth(d.getMonth()-3);break;case"6months":h.setMonth(d.getMonth()-6);break}let m=e.from("todos").select("*").eq("deleted",!1).is("routine_id",null).order("created_at",{ascending:!0});h&&(m=m.gte("date",je(h)));const{data:b,error:_}=await m;if(_)throw _;const S={};for(const g of b||[]){const v=g.original_todo_id||g.id;S[v]||(S[v]=[]),S[v].push(g)}const y=Object.entries(S).map(([g,v])=>{const w=v.sort((C,B)=>new Date(C.date)-new Date(B.date)),x=w[0],j=w.map(C=>C.date);let T=null;for(const C of w)if(C.completed&&C.completed_at){const B=new Date(C.completed_at);T=je(B);break}const O=w.find(C=>C.date===f);return{text:x.text,originalId:parseInt(g),createdAt:x.created_at,startDate:j[0],endDate:j[j.length-1],dates:j,completed:(O==null?void 0:O.completed)||!1,completedDate:T}}).sort((g,v)=>new Date(g.createdAt)-new Date(v.createdAt));i(y)}catch(d){console.error("   :",d.message)}};return{showGanttChart:t,ganttData:a,ganttPeriod:s,setGanttPeriod:r,handleOpenGanttChart:async()=>{n(!0),await l()},handleCloseGanttChart:()=>{n(!1),i([])},fetchGanttData:l}}function oO(){const{session:e,authLoading:t,handleGoogleLogin:n,handleLogout:a}=Lj(),[i,s]=p.useState(new Date),[r,l]=p.useState(!1),o=p.useRef(new Set),c=n1(Uu(gh),Uu(_b),Uu(hh,{coordinateGetter:Rj})),[d,f]=p.useState([]),[h,m]=p.useState(null),{showTodoHistoryModal:b,todoHistory:_,expandedHistoryIds:S,handleOpenTodoHistoryModal:y,handleCloseTodoHistoryModal:g,toggleHistoryDetail:v}=aO({session:e,supabase:Te,selectedTodoForModal:h,setSelectedTodoForModal:m}),{showRoutineModal:w,routines:x,setRoutines:j,routineInput:T,setRoutineInput:O,selectedDays:C,selectedTimeSlot:B,setSelectedTimeSlot:W,isAddingRoutine:qe,editingRoutineId:Ge,editingRoutineText:Xe,setEditingRoutineText:ke,showRoutineHistory:L,selectedRoutineForHistory:Y,routineHistoryData:Q,editingRoutineDays:fe,showDeleteConfirmModal:ce,setShowDeleteConfirmModal:St,routineToDelete:Ue,fetchRoutines:vt,handleAddRoutine:Pe,handleCreateRoutineFromTodo:Qe,handleStartEditRoutine:nt,handleCancelEditRoutine:ln,handleSaveEditRoutine:Fe,handleToggleEditDay:ot,handleDeleteRoutine:be,deleteThisOnly:pn,deleteFromNow:Yt,deleteAll:bn,fetchRoutineHistory:Tt,handleCloseRoutineHistory:_n,handleOpenRoutine:wn,handleCloseRoutine:Z,handleToggleDay:ie,createRoutineTodos:_e}=tO({session:e,supabase:Te,selectedDate:i,setTodos:f,setSuccessToastMessage:()=>{},setShowSuccessToast:()=>{}}),{showTodoRoutineSetupModal:De,routineDaysForModal:Bt,setRoutineDaysForModal:Rt,isEditingRoutineInModal:on,setIsEditingRoutineInModal:ht,routineTimeSlotForModal:mt,setRoutineTimeSlotForModal:Me,handleOpenTodoRoutineSetupModal:xe,handleCloseTodoRoutineSetupModal:ee}=iO({selectedTodoForModal:h,setSelectedTodoForModal:m,routines:x}),{carryOverIncompleteTodos:$e}=sO({session:e,supabase:Te,selectedDate:i}),{routineInputValue:yt,setRoutineInputValue:N,normalInputValue:U,setNormalInputValue:z,loading:F,isDraggingAny:q,isAdding:P,showUndoToast:he,showSuccessToast:$,successToastMessage:Ee,lastDeleteAction:re,focusedTodoId:Ne,setFocusedTodoId:I,showDeleteConfirmModal:ye,setShowDeleteConfirmModal:te,todoToDelete:ze,activeTodoId:me,overId:ue,fetchTodos:K,handleAddRoutineTodo:Zt,handleAddNormalTodo:We,handleToggleTodo:Gt,handleDeleteTodo:Pt,handleAddSubTodo:Ft,handleEditTodo:Un,handleDragStart:ua,handleDragOver:zn,handleDragCancel:da,handleDragEnd:Ra,handleUndoDelete:jl,deleteThisOnly:Ol,deleteFromNow:Rc,deleteAll:Mc,handleRemoveTodoFromUI:Gi,handleMoveUp:Ii,handleMoveDown:M,handleMoveToTop:H,handleMoveToBottom:at}=nO(e,Te,i,d,f,x,j,h),pt=E=>{I(E)},pe=E=>{},bt=()=>{jl()},{showGanttChart:Je,ganttData:ct,ganttPeriod:cn,setGanttPeriod:Ki,handleOpenGanttChart:fi,handleCloseGanttChart:lr,fetchGanttData:or}=lO(Te),[kc,Xi]=p.useState(!1),{memoContent:Mb,setMemoContent:kb,isSavingMemo:Ub,fetchMemoContent:zb}=Wj(e),{encouragementMessages:Lb,showEncouragementModal:Bb,setShowEncouragementModal:ph,newEncouragementMessage:Hb,setNewEncouragementMessage:qb,editingEncouragementId:$b,setEditingEncouragementId:Vb,editingEncouragementText:Yb,setEditingEncouragementText:Gb,showEncouragementEmoji:Ib,currentEncouragementMessage:Kb,handleEncouragementClick:Xb,fetchEncouragementMessages:Qb,addEncouragementMessage:Jb,updateEncouragementMessage:Zb,deleteEncouragementMessage:Pb}=rO(e,Te),Fb=async E=>{var R,k;try{const G=je(i),D=d.filter(ve=>!ve.parent_id&&ve.section_type==="normal"),V=D.length>0?Math.max(...D.map(ve=>ve.order_index))+1:1,He=`temp_${Date.now()}_${Math.random()}`,ge={id:He,text:E,completed:!1,order_index:V,date:G,visible_dates:[G],hidden_dates:[],section_type:"normal",user_id:(R=e==null?void 0:e.user)==null?void 0:R.id,_isOptimistic:!0};if(f(ve=>[...ve,ge]),(k=e==null?void 0:e.user)!=null&&k.id&&Te){const{data:ve,error:ut}=await Te.from("todos").insert([{text:E,completed:!1,order_index:V,date:G,visible_dates:[G],hidden_dates:[],section_type:"normal",user_id:e.user.id}]).select();if(ut)throw ut;f(Wt=>Wt.map(Re=>Re.id===He?ve[0]:Re))}else{const ve=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");ve.push({text:E,dateStr:G,timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(ve))}}catch(G){console.error("Quick add error:",G);const D=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");D.push({text:E,dateStr:je(i),timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(D))}},[Ma,Wb]=p.useState(()=>localStorage.getItem("viewMode")||"horizontal"),[Uc,bh]=p.useState({normal:"  ",routine:"  "}),[Qi,Al]=p.useState([]),[e_,_h]=p.useState(!1),[wh,Sh]=p.useState(!1),[xh,Eh]=p.useState({}),t_=Fj(e),{sectionOrder:Ji,setSectionOrder:Th,fetchSectionOrder:n_,saveSectionOrder:jh,moveSectionLeft:zc,moveSectionRight:Lc}=t_,Zi=p.useRef(null),[a_,i_]=p.useState(0),Bc=p.useRef(null),[Pi,Hc]=p.useState([]),[s_,Oh]=p.useState(!1),Ah=E=>{try{localStorage.setItem("hiddenSections",JSON.stringify(E))}catch(R){console.error("   :",R)}},r_=()=>{try{const E=localStorage.getItem("hiddenSections");E&&Hc(JSON.parse(E))}catch(E){console.error("   :",E)}},qc=E=>{const R=[...Pi,E];Hc(R),Ah(R)},l_=E=>{const R=Pi.filter(k=>k!==E);Hc(R),Ah(R)},o_=()=>{const E=new Date(i);E.setDate(E.getDate()-1),s(E)},c_=()=>{const E=new Date(i);E.setDate(E.getDate()+1),s(E)},u_=E=>{const R=new Date(E.target.value+"T00:00:00");s(R)},d_=async()=>{var E;if((E=e==null?void 0:e.user)!=null&&E.id)try{const{data:R,error:k}=await Te.from("user_settings").select("setting_value").eq("setting_key","section_titles").maybeSingle();if(k){console.error("   :",k.message);return}if(R&&R.setting_value){const G=JSON.parse(R.setting_value);bh(D=>({...D,...G}))}}catch(R){console.error("   :",R.message)}},f_=async(E,R)=>{var G;if(!((G=e==null?void 0:e.user)!=null&&G.id))return;const k={...Uc,[E]:R};bh(k);try{const{data:D,error:V}=await Te.from("user_settings").select("id").eq("setting_key","section_titles").maybeSingle();if(V){console.error("   :",V.message);return}D?await Te.from("user_settings").update({setting_value:JSON.stringify(k),updated_at:new Date().toISOString()}).eq("setting_key","section_titles"):await Te.from("user_settings").insert([{setting_key:"section_titles",setting_value:JSON.stringify(k),user_id:e.user.id}])}catch(D){console.error("   :",D.message)}},h_=async()=>{var E;if((E=e==null?void 0:e.user)!=null&&E.id)try{const{data:R,error:k}=await Te.from("user_settings").select("setting_value").eq("setting_key","custom_sections").maybeSingle();if(k){console.error("    :",k.message);return}if(R&&R.setting_value){const G=JSON.parse(R.setting_value);Al(G)}}catch(R){console.error("    :",R.message)}},$c=async E=>{var R;if((R=e==null?void 0:e.user)!=null&&R.id)try{const{data:k,error:G}=await Te.from("user_settings").select("id").eq("setting_key","custom_sections").maybeSingle();if(G){console.error("    :",G.message);return}k?await Te.from("user_settings").update({setting_value:JSON.stringify(E),updated_at:new Date().toISOString()}).eq("setting_key","custom_sections"):await Te.from("user_settings").insert([{setting_key:"custom_sections",setting_value:JSON.stringify(E),user_id:e.user.id}])}catch(k){console.error("    :",k.message)}},m_=({name:E,icon:R})=>{const k={id:`custom-${Date.now()}`,name:E,icon:R},G=[...Qi,k];Al(G),$c(G);const D=[...Ji,k.id];Th(D),jh(D)},g_=async E=>{const R=xh[E]||"";if(!(!R.trim()||wh)){if(!e){alert(" ");return}Sh(!0);try{const k=d.filter(ve=>!ve.parent_id&&ve.section_type==="custom"&&ve.section_id===E),G=k.length>0?Math.max(...k.map(ve=>ve.order_index))+1:1,D=je(i),V={text:R.trim(),completed:!1,order_index:G,date:D,visible_dates:[D],hidden_dates:[],user_id:e.user.id,section_id:E,section_type:"custom"},{data:He,error:ge}=await Te.from("todos").insert([V]).select();if(ge)throw ge;He&&He.length>0&&(f(ve=>[...ve,He[0]]),Eh(ve=>({...ve,[E]:""})))}catch(k){console.error("  :",k.message)}finally{Sh(!1)}}},v_=async E=>{if(!confirm("  ?      ."))return;try{const{error:G}=await Te.from("todos").delete().eq("section_id",E);if(G){console.error("   :",G.message);return}}catch(G){console.error("   :",G.message);return}const R=Qi.filter(G=>G.id!==E);Al(R),$c(R);const k=Ji.filter(G=>G!==E);Th(k),jh(k),f(G=>G.filter(D=>D.section_id!==E))},y_=async(E,R)=>{try{const k=je(E),G=je(R),{data:D,error:V}=await Te.from("todos").select("*").eq("deleted",!1).eq("completed",!1).is("routine_id",null);if(V)throw V;const He=(D||[]).filter(ge=>ge.stop_carryover_from&&k>=ge.stop_carryover_from?!1:ge.visible_dates&&Array.isArray(ge.visible_dates)&&ge.visible_dates.length>0?ge.visible_dates.includes(k):ge.date===k);if(He.length===0)return;for(const ge of He){let ve=ge.visible_dates||[ge.date];if(ve.includes(G))continue;const ut=[...ve,G].sort(),{error:Wt}=await Te.from("todos").update({visible_dates:ut}).eq("id",ge.id);Wt&&console.error(` ${ge.id}  :`,Wt.message)}}catch(k){console.error("   :",k.message)}};p.useEffect(()=>{let E=null;const R=()=>{document.body.classList.add("is-scrolling"),E&&clearTimeout(E),E=setTimeout(()=>{document.body.classList.remove("is-scrolling")},1e3)};return window.addEventListener("scroll",R),()=>{window.removeEventListener("scroll",R),E&&clearTimeout(E)}},[]),p.useEffect(()=>{e&&(Qb(),zb(),vt(),n_(),d_(),h_(),r_())},[e]),p.useEffect(()=>{if(!Zi.current)return;const E=Zi.current,R=Ma==="horizontal";let k=!1,G=0,D=0,V=0;const He=le=>le.type.includes("touch")?R?le.touches[0].pageX:le.touches[0].pageY:R?le.pageX:le.pageY,ge=le=>{le.target.closest(".section-block")||(k=!0,G=He(le),D=R?E.scrollLeft:E.scrollTop,E.style.transition="none",E.style.transform=R?"translateX(0)":"translateY(0)",V=0)},ve=()=>{k&&V!==0&&(E.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",E.style.transform=R?"translateX(0)":"translateY(0)",setTimeout(()=>{E.style.transition="none",V=0},300)),k=!1},ut=()=>{V!==0&&(E.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",E.style.transform=R?"translateX(0)":"translateY(0)",setTimeout(()=>{E.style.transition="none",V=0},300)),k=!1},Wt=le=>{if(!k)return;le.preventDefault();const se=(He(le)-G)*1.5,Mt=D-se,jt=R?E.scrollWidth-E.clientWidth:E.scrollHeight-E.clientHeight;if(Mt<0){const Sn=-Mt;V=Math.min(Sn*.3,100),R?(E.scrollLeft=0,E.style.transform=`translateX(${V}px)`):(E.scrollTop=0,E.style.transform=`translateY(${V}px)`)}else if(Mt>jt){const Sn=Mt-jt;V=-Math.min(Sn*.3,100),R?(E.scrollLeft=jt,E.style.transform=`translateX(${V}px)`):(E.scrollTop=jt,E.style.transform=`translateY(${V}px)`)}else V=0,E.style.transform=R?"translateX(0)":"translateY(0)",R?E.scrollLeft=Mt:E.scrollTop=Mt},Re=le=>{R&&le.target.closest(".section-block")&&le.deltaX!==0&&le.preventDefault()};return E.addEventListener("mousedown",ge),document.addEventListener("mouseup",ut),document.addEventListener("mouseleave",ve),E.addEventListener("mousemove",Wt),E.addEventListener("touchstart",ge,{passive:!0}),E.addEventListener("touchmove",Wt,{passive:!1}),E.addEventListener("touchend",ut),E.addEventListener("touchcancel",ut),E.addEventListener("wheel",Re,{passive:!1}),()=>{E.removeEventListener("mousedown",ge),document.removeEventListener("mouseup",ut),document.removeEventListener("mouseleave",ve),E.removeEventListener("mousemove",Wt),E.removeEventListener("touchstart",ge),E.removeEventListener("touchmove",Wt),E.removeEventListener("touchend",ut),E.removeEventListener("touchcancel",ut),E.removeEventListener("wheel",Re)}},[Ma,d,x]),p.useEffect(()=>{if(Ma!=="horizontal"||!Zi.current)return;const E=Zi.current,R=()=>{const k=E.querySelectorAll(".section-block");if(k.length===0)return;const G=E.getBoundingClientRect(),D=G.left+G.width/2;let V=0,He=1/0;k.forEach((ge,ve)=>{const ut=ge.getBoundingClientRect(),Wt=ut.left+ut.width/2,Re=Math.abs(Wt-D);Re<He&&(He=Re,V=ve)}),i_(V)};return E.addEventListener("scroll",R),R(),()=>E.removeEventListener("scroll",R)},[Ma,d,x]),p.useEffect(()=>{if(!Bc.current)return;const E=Bc.current;let R=!1,k=0,G=0,D=0;const V=ut=>{ut.target.closest(".section-block")||(R=!0,k=ut.pageY,G=E.scrollTop,E.style.transition="none",E.style.transform="translateY(0)",D=0)},He=()=>{R&&D!==0&&(E.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",E.style.transform="translateY(0)",setTimeout(()=>{E.style.transition="none",D=0},300)),R=!1},ge=()=>{D!==0&&(E.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",E.style.transform="translateY(0)",setTimeout(()=>{E.style.transition="none",D=0},300)),R=!1},ve=ut=>{if(!R)return;ut.preventDefault();const Re=(ut.pageY-k)*1.5,le=G-Re,un=E.scrollHeight-E.clientHeight;if(le<0){const se=-le;D=Math.min(se*.3,100),E.scrollTop=0,E.style.transform=`translateY(${D}px)`}else if(le>un){const se=le-un;D=-Math.min(se*.3,100),E.scrollTop=un,E.style.transform=`translateY(${D}px)`}else D=0,E.style.transform="translateY(0)",E.scrollTop=le};return E.addEventListener("mousedown",V),document.addEventListener("mouseup",ge),document.addEventListener("mouseleave",He),E.addEventListener("mousemove",ve),()=>{E.removeEventListener("mousedown",V),document.removeEventListener("mouseup",ge),document.removeEventListener("mouseleave",He),E.removeEventListener("mousemove",ve)}},[d,x]),p.useEffect(()=>{Je&&or()},[cn]),p.useEffect(()=>{const E=async()=>{const k=new Date,G=new Date(k);G.setHours(24,0,0,0);const D=G.getTime()-k.getTime();return setTimeout(async()=>{const He=new Date(k),ge=new Date(k);ge.setDate(ge.getDate()+1),await y_(He,ge),await _e(),s(new Date),E()},D)},R=E();return()=>clearTimeout(R)},[]),p.useEffect(()=>{(async()=>{var ge;const G=je(i),V=je(new Date);G===V&&((ge=e==null?void 0:e.user)!=null&&ge.id)&&await $e(G),await K()})();const R=je(i),k=Te.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"todos",filter:`date=eq.${R}`},G=>{G.eventType==="INSERT"?f(D=>D.some(V=>V.id===G.new.id)?D:[...D,G.new]):G.eventType==="UPDATE"?f(D=>o.current.has(G.new.id)?D:D.map(V=>V.id===G.new.id?G.new:V)):G.eventType==="DELETE"&&f(D=>D.filter(V=>V.id!==G.old.id))}).subscribe(G=>{});return()=>{Te.removeChannel(k)}},[i,e]),p.useEffect(()=>{if(q){const E=window.scrollY,R=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${E}px`,document.body.style.left="0",document.body.style.right="0",R>0&&(document.body.style.paddingRight=`${R}px`),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.paddingRight="",window.scrollTo(0,E)}}},[q]);const Ch=Pj({authLoading:t,session:e,handleGoogleLogin:n});return Ch||u.jsxs("div",{className:`app ${q?"dragging-active":""}`,children:[u.jsx(Hj,{showSidebar:r,setShowSidebar:l,session:e,viewMode:Ma,setViewMode:Wb,onOpenRoutine:wn,onOpenGanttChart:fi,onOpenEncouragementModal:()=>ph(!0),onOpenAddSection:()=>_h(!0),onOpenHiddenSections:()=>Oh(!0),onLogout:a}),u.jsxs("div",{className:`container ${Ma==="horizontal"?"container-wide":""}`,children:[u.jsx($j,{showSidebar:r,setShowSidebar:l,selectedDate:i,onDateChange:u_,onPrevDay:o_,onNextDay:c_,showEncouragementEmoji:Ib,currentEncouragementMessage:Kb,onEncouragementClick:Xb,setSelectedDate:s,onQuickAdd:Fb,onOpenMemo:()=>Xi(!0)}),u.jsxs("div",{className:"content-scrollable",ref:Bc,children:[u.jsxs(W1,{sensors:c,collisionDetection:s1,onDragStart:ua,onDragOver:zn,onDragEnd:Ra,onDragCancel:da,measuring:{droppable:{strategy:Is.Always}},children:[u.jsx("div",{ref:Zi,className:`sections-container ${Ma==="horizontal"?"horizontal-layout":"vertical-layout"}`,children:u.jsx("div",{className:"todo-list",children:F?u.jsx("p",{className:"empty-message",children:" ..."}):(()=>{const E=d.filter(D=>!D.parent_id&&D.section_type==="routine").sort((D,V)=>D.order_index-V.order_index),R=d.filter(D=>!D.parent_id&&D.section_type==="pending_routine").sort((D,V)=>D.order_index-V.order_index),k=d.filter(D=>!D.parent_id&&D.section_type==="normal").sort((D,V)=>D.order_index-V.order_index),G=[...E.map(D=>D.id),...R.map(D=>D.id),...k.map(D=>D.id),...Qi.flatMap(D=>d.filter(V=>!V.parent_id&&V.section_type==="custom"&&V.section_id===D.id).map(V=>V.id))];return u.jsx(yr,{items:G,strategy:vr,children:Ji.filter(D=>!Pi.includes(D)).map((D,V)=>{const He=Ji.filter(Re=>!Pi.includes(Re)),ge=He.indexOf(D),ve=ge===0,ut=ge===He.length-1,Wt=[...ve?[]:[{icon:"",label:" ",onClick:()=>zc(D)}],...ut?[]:[{icon:"",label:" ",onClick:()=>Lc(D)}],{icon:"",label:"",onClick:()=>qc(D)}];if(D==="routine")return u.jsx("div",{children:u.jsxs(qu,{title:" ",className:"routine-section section-block",inputValue:yt,setInputValue:N,onAddTodo:Zt,isAdding:P,placeholder:"   ...",settingsMenuItems:Wt,children:[E.length>0&&u.jsx(yr,{items:E.map(Re=>Re.id),strategy:vr,children:E.map((Re,le)=>{const un=d.filter(se=>se.parent_id===Re.id);return u.jsx(us,{todo:Re,index:le,onToggle:Gt,onDelete:Pt,onEdit:Un,formatDate:vi,formatDateOnly:Ln,isFocused:Ne===Re.id,onFocus:pt,onAddSubTodo:Ft,subtodos:un,level:0,onCreateRoutine:Qe,routines:x,onShowRoutineHistory:Tt,onOpenRoutineSetupModal:xe,onOpenHistoryModal:y,currentPageDate:je(i),onRemoveFromUI:Gi,showSuccessMessage:pe,activeId:me,overId:ue,onMoveUp:se=>Ii(se,"routine",null),onMoveDown:se=>M(se,"routine",null),onMoveToTop:se=>H(se,"routine",null),onMoveToBottom:se=>at(se,"routine",null),isFirst:le===0,isLast:le===E.length-1},Re.id)})}),E.length>0&&R.length>0&&u.jsx("div",{style:{margin:"1rem 0",padding:"0 1rem"},children:u.jsx("div",{className:"separator-line"})}),R.length>0&&u.jsx(yr,{items:R.map(Re=>Re.id),strategy:vr,children:R.map((Re,le)=>{const un=d.filter(se=>se.parent_id===Re.id);return u.jsx(us,{todo:Re,index:le,onToggle:Gt,onDelete:Pt,onEdit:Un,formatDate:vi,formatDateOnly:Ln,isFocused:Ne===Re.id,onFocus:pt,onAddSubTodo:Ft,subtodos:un,level:0,onCreateRoutine:Qe,routines:x,onShowRoutineHistory:Tt,onOpenRoutineSetupModal:xe,onOpenHistoryModal:y,currentPageDate:je(i),isPendingRoutine:!0,onRemoveFromUI:Gi,showSuccessMessage:pe,activeId:me,overId:ue,onMoveUp:se=>Ii(se,"pending_routine",null),onMoveDown:se=>M(se,"pending_routine",null),onMoveToTop:se=>H(se,"pending_routine",null),onMoveToBottom:se=>at(se,"pending_routine",null),isFirst:le===0,isLast:le===R.length-1},Re.id)})})]})},"routine");if(D==="normal"){const Re=[...ve?[]:[{icon:"",label:" ",onClick:()=>zc(D)}],...ut?[]:[{icon:"",label:" ",onClick:()=>Lc(D)}],{icon:"",label:"",onClick:()=>{confirm(`    ?

      .`)&&qc("normal")}},{icon:"",label:"",onClick:()=>{alert(`      .

   ""  .`)}}];return u.jsx("div",{children:u.jsx(qu,{title:Uc.normal,className:"normal-section section-block",inputValue:U,setInputValue:z,onAddTodo:We,isAdding:P,placeholder:"   ...",editable:!0,onTitleChange:le=>f_("normal",le),settingsMenuItems:Re,children:k.length>0&&u.jsx(yr,{items:k.map(le=>le.id),strategy:vr,children:k.map((le,un)=>{const se=d.filter(jt=>jt.parent_id===le.id),Mt=je(i);return u.jsx(us,{todo:le,index:un,onToggle:Gt,onDelete:Pt,onEdit:Un,formatDate:vi,formatDateOnly:Ln,isFocused:Ne===le.id,onFocus:pt,onAddSubTodo:Ft,subtodos:se,level:0,onCreateRoutine:Qe,routines:x,onShowRoutineHistory:Tt,onOpenRoutineSetupModal:xe,onOpenHistoryModal:y,currentPageDate:Mt,onRemoveFromUI:Gi,showSuccessMessage:pe,activeId:me,overId:ue,onMoveUp:jt=>Ii(jt,"normal",null),onMoveDown:jt=>M(jt,"normal",null),onMoveToTop:jt=>H(jt,"normal",null),onMoveToBottom:jt=>at(jt,"normal",null),isFirst:un===0,isLast:un===k.length-1},le.id)})})})},"normal")}else{const Re=Qi.find(se=>se.id===D);if(!Re)return null;const le=d.filter(se=>!se.parent_id&&se.section_type==="custom"&&se.section_id===D).sort((se,Mt)=>se.order_index-Mt.order_index),un=[...ve?[]:[{icon:"",label:" ",onClick:()=>zc(D)}],...ut?[]:[{icon:"",label:" ",onClick:()=>Lc(D)}],{icon:"",label:"",onClick:()=>qc(D)},{icon:"",label:"",onClick:()=>v_(D)}];return u.jsx("div",{children:u.jsx(qu,{title:`${Re.icon} ${Re.name}`,className:"custom-section section-block",inputValue:xh[D]||"",setInputValue:se=>Eh(Mt=>({...Mt,[D]:se})),onAddTodo:()=>g_(D),isAdding:wh,placeholder:`${Re.name}   ...`,editable:!0,onTitleChange:se=>{const Mt=Qi.map(jt=>jt.id===D?{...jt,name:se}:jt);Al(Mt),$c(Mt)},settingsMenuItems:un,children:le.length>0&&u.jsx(yr,{items:le.map(se=>se.id),strategy:vr,children:le.map((se,Mt)=>{const jt=d.filter(Sn=>Sn.parent_id===se.id);return u.jsx(us,{todo:se,index:Mt,onToggle:Gt,onDelete:Pt,onEdit:Un,formatDate:vi,formatDateOnly:Ln,isFocused:Ne===se.id,onFocus:pt,onAddSubTodo:Ft,subtodos:jt,level:0,onCreateRoutine:Qe,routines:x,onShowRoutineHistory:Tt,onOpenRoutineSetupModal:xe,onOpenHistoryModal:y,currentPageDate:je(i),onRemoveFromUI:Gi,showSuccessMessage:pe,activeId:me,overId:ue,onMoveUp:Sn=>Ii(Sn,"custom",D),onMoveDown:Sn=>M(Sn,"custom",D),onMoveToTop:Sn=>H(Sn,"custom",D),onMoveToBottom:Sn=>at(Sn,"custom",D),isFirst:Mt===0,isLast:Mt===le.length-1},se.id)})})})},D)}})})})()})}),u.jsx(pj,{children:me?(()=>{const E=d.find(k=>k.id===me);if(!E)return null;const R=d.filter(k=>k.parent_id===E.id);return u.jsx("div",{className:"drag-overlay-todo",children:u.jsx(us,{todo:E,index:0,onToggle:()=>{},onDelete:()=>{},onEdit:()=>{},formatDate:vi,formatDateOnly:Ln,isFocused:!1,onFocus:()=>{},onAddSubTodo:()=>{},subtodos:R,level:0,onCreateRoutine:()=>{},routines:x,onShowRoutineHistory:()=>{},onOpenRoutineSetupModal:()=>{},onOpenHistoryModal:()=>{},currentPageDate:je(i),onRemoveFromUI:()=>{},showSuccessMessage:()=>{},hideNumber:!0})})})():null})]}),u.jsx(Vj,{viewMode:Ma,currentSectionIndex:a_,sectionsContainerRef:Zi,visibleSectionCount:Ji.filter(E=>!Pi.includes(E)).length})]}),he&&u.jsx(Kg,{message:"",onUndo:jl}),$&&u.jsx(Kg,{message:Ee,onUndo:re?bt:null,variant:"success"}),ye&&ze&&u.jsx(Xg,{todo:ze,onClose:()=>te(!1),onDeleteThisOnly:Ol,onDeleteFromNow:Rc,onDeleteAll:Mc}),ce&&Ue&&u.jsx(Xg,{todo:Ue,onClose:()=>St(!1),onDeleteThisOnly:pn,onDeleteFromNow:Yt,onDeleteAll:bn}),b&&h&&(()=>{const E=h,R=E.visible_dates&&E.visible_dates.length>0?E.visible_dates:[E.date],k=R[0],G=R.map(V=>({id:`${E.id}-${V}`,date:V})),D=_[E.id]||[];return u.jsx("div",{className:"modal-overlay",onClick:g,children:u.jsxs("div",{className:"modal-content",onClick:V=>V.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{onClick:g,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"modal-body",children:u.jsxs("div",{className:"todo-history",children:[u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:":"}),u.jsx("span",{className:"history-value",children:vi(E.created_at)})]}),u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:Ln(k?new Date(k+"T00:00:00"):new Date(E.date+"T00:00:00"))})]}),G.length>0&&u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:G.map((V,He)=>{const ge=V.date===E.date,ve=Ln(new Date(V.date+"T00:00:00"));return u.jsxs("span",{children:[He>0&&"  ",u.jsxs("span",{style:ge?{fontWeight:"bold",color:"#4CAF50"}:{},children:[ve.split("(")[0],ge?"()":""]})]},V.id)})})]}),(()=>{const V=new Date(E.created_at).toISOString().split("T")[0],He=E.date;return V!==He&&G.length===0?u.jsxs("div",{className:"history-item",children:[u.jsx("span",{className:"history-label",children:" :"}),u.jsx("span",{className:"history-value",children:Ln(new Date(E.date+"T00:00:00"))})]}):null})(),D.length>0&&u.jsxs("div",{className:"history-changes-list",children:[u.jsxs("div",{className:"history-changes-header",children:["  (",D.length,")"]}),D.map(V=>u.jsxs("div",{className:"history-record-compact",children:[u.jsxs("div",{className:"history-record-summary",children:[u.jsxs("div",{className:"history-change-time",children:[vi(V.changed_at),V.changed_on_date&&u.jsxs("span",{className:"history-page-info",children:[" (: ",Ln(new Date(V.changed_on_date+"T00:00:00")),")"]})]}),u.jsx("button",{className:"history-detail-button",onClick:He=>{He.stopPropagation(),v(V.id)},children:S.includes(V.id)?"":""})]}),S.includes(V.id)&&u.jsxs("div",{className:"history-change",children:[u.jsxs("div",{className:"history-change-item history-before",children:[u.jsx("span",{className:"change-badge",children:""}),u.jsx("span",{className:"change-text",children:V.previous_text})]}),u.jsx("div",{className:"history-change-arrow",children:""}),u.jsxs("div",{className:"history-change-item history-after",children:[u.jsx("span",{className:"change-badge",children:""}),u.jsx("span",{className:"change-text",children:V.new_text})]})]})]},V.id))]})]})})]})})})(),De&&h&&(()=>{const E=h,R=x.find(k=>k.id===E.routine_id);return u.jsx("div",{className:"modal-overlay",onClick:ee,children:u.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:"  "}),u.jsx("button",{onClick:ee,className:"modal-close-button",children:""})]}),u.jsx("div",{className:"modal-body",children:u.jsx("div",{className:"routine-setup-inline",children:R&&!on?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"routine-current-info",children:[u.jsx("div",{className:"routine-info-title",children:" :"}),u.jsx("div",{className:"routine-days-display",children:Ni.filter(k=>R.days.includes(k.key)).map(k=>u.jsx("span",{className:"routine-day-badge",children:k.label},k.key))}),R.time_slot&&u.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",R.time_slot]})]}),u.jsxs("div",{className:"routine-setup-actions",children:[u.jsx("button",{onClick:k=>{k.stopPropagation(),R&&(Rt(R.days),Me(R.time_slot||""),ht(!0))},className:"routine-confirm-button",children:""}),u.jsx("button",{onClick:async k=>{k.stopPropagation(),R&&E&&(await Qe(E.id,E.text,[],null,!0),ee())},className:"routine-remove-button",children:""})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"routine-setup-title",children:on?" :":"  :"}),u.jsx("div",{className:"day-selector-inline",children:Ni.map(k=>u.jsx("button",{onClick:G=>{G.stopPropagation(),handleToggleRoutineDayInModal(k.key)},className:`day-button-inline ${Bt.includes(k.key)?"selected":""}`,children:k.label},k.key))}),u.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[u.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),u.jsx(yh,{value:mt,onChange:k=>Me(k)})]}),u.jsxs("div",{className:"routine-setup-actions",children:[u.jsx("button",{onClick:async k=>{k.stopPropagation(),E&&(on&&R?await Qe(E.id,E.text,Bt,R.id,!1,mt):await Qe(E.id,E.text,Bt,null,!1,mt),ee())},className:"routine-confirm-button",children:""}),u.jsx("button",{onClick:k=>{k.stopPropagation(),ee()},className:"routine-cancel-button",children:""})]})]})})})]})})})(),u.jsx(Yj,{showRoutineModal:w,onClose:Z,routineInput:T,setRoutineInput:O,isAddingRoutine:qe,selectedDays:C,onToggleDay:ie,selectedTimeSlot:B,setSelectedTimeSlot:W,onAddRoutine:Pe,routines:x,editingRoutineId:Ge,editingRoutineText:Xe,setEditingRoutineText:ke,editingRoutineDays:fe,onToggleEditDay:ot,onStartEdit:nt,onSaveEdit:Fe,onCancelEdit:ln,onDelete:be,onShowHistory:Tt}),u.jsx(Ij,{showRoutineHistory:L,onClose:_n,selectedRoutine:Y,routineHistoryData:Q}),u.jsx(Kj,{show:kc,onClose:()=>Xi(!1),content:Mb,setContent:kb,isSaving:Ub,placeholder:" ..."}),u.jsx(Xj,{showGanttChart:Je,onClose:lr,ganttData:ct,ganttPeriod:cn,setGanttPeriod:Ki,formatDateOnly:Ln}),u.jsx(Qj,{showEncouragementModal:Bb,onClose:()=>ph(!1),encouragementMessages:Lb,newEncouragementMessage:Hb,setNewEncouragementMessage:qb,onAddEncouragementMessage:Jb,editingEncouragementId:$b,editingEncouragementText:Yb,setEditingEncouragementId:Vb,setEditingEncouragementText:Gb,onUpdateEncouragementMessage:Zb,onDeleteEncouragementMessage:Pb}),u.jsx(Jj,{isOpen:e_,onClose:()=>_h(!1),onAddSection:m_}),u.jsx(Zj,{show:s_,onClose:()=>Oh(!1),hiddenSections:Pi,sectionOrder:Ji,sectionTitles:Uc,customSections:Qi,onShowSection:l_})]})]})}mx.createRoot(document.getElementById("root")).render(u.jsx(p.StrictMode,{children:u.jsx(oO,{})}));

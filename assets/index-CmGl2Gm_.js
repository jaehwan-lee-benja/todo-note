function G_(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function ty(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ny(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}var iy={exports:{}},tc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_=Symbol.for("react.transitional.element"),X_=Symbol.for("react.fragment");function ry(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:K_,type:e,key:i,ref:t!==void 0?t:null,props:n}}tc.Fragment=X_;tc.jsx=ry;tc.jsxs=ry;iy.exports=tc;var c=iy.exports,ay={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pd=Symbol.for("react.transitional.element"),J_=Symbol.for("react.portal"),Q_=Symbol.for("react.fragment"),P_=Symbol.for("react.strict_mode"),Z_=Symbol.for("react.profiler"),F_=Symbol.for("react.consumer"),W_=Symbol.for("react.context"),ew=Symbol.for("react.forward_ref"),tw=Symbol.for("react.suspense"),nw=Symbol.for("react.memo"),sy=Symbol.for("react.lazy"),iw=Symbol.for("react.activity"),zh=Symbol.iterator;function rw(e){return e===null||typeof e!="object"?null:(e=zh&&e[zh]||e["@@iterator"],typeof e=="function"?e:null)}var ly={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oy=Object.assign,cy={};function Va(e,t,n){this.props=e,this.context=t,this.refs=cy,this.updater=n||ly}Va.prototype.isReactComponent={};Va.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Va.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uy(){}uy.prototype=Va.prototype;function Zd(e,t,n){this.props=e,this.context=t,this.refs=cy,this.updater=n||ly}var Fd=Zd.prototype=new uy;Fd.constructor=Zd;oy(Fd,Va.prototype);Fd.isPureReactComponent=!0;var Bh=Array.isArray;function zu(){}var ft={H:null,A:null,T:null,S:null},dy=Object.prototype.hasOwnProperty;function Wd(e,t,n){var i=n.ref;return{$$typeof:Pd,type:e,key:t,ref:i!==void 0?i:null,props:n}}function aw(e,t){return Wd(e.type,t,e.props)}function ef(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pd}function sw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hh=/\/+/g;function Hc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?sw(""+e.key):t.toString(36)}function lw(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(zu,zu):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function ta(e,t,n,i,r){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"bigint":case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Pd:case J_:s=!0;break;case sy:return s=e._init,ta(s(e._payload),t,n,i,r)}}if(s)return r=r(e),s=i===""?"."+Hc(e,0):i,Bh(r)?(n="",s!=null&&(n=s.replace(Hh,"$&/")+"/"),ta(r,t,n,"",function(u){return u})):r!=null&&(ef(r)&&(r=aw(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(Hh,"$&/")+"/")+s)),t.push(r)),1;s=0;var l=i===""?".":i+":";if(Bh(e))for(var o=0;o<e.length;o++)i=e[o],a=l+Hc(i,o),s+=ta(i,t,n,a,r);else if(o=rw(e),typeof o=="function")for(e=o.call(e),o=0;!(i=e.next()).done;)i=i.value,a=l+Hc(i,o++),s+=ta(i,t,n,a,r);else if(a==="object"){if(typeof e.then=="function")return ta(lw(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return s}function El(e,t,n){if(e==null)return e;var i=[],r=0;return ta(e,i,"","",function(a){return t.call(n,a,r++)}),i}function ow(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $h=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},cw={map:El,forEach:function(e,t,n){El(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return El(e,function(){t++}),t},toArray:function(e){return El(e,function(t){return t})||[]},only:function(e){if(!ef(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Activity=iw;we.Children=cw;we.Component=Va;we.Fragment=Q_;we.Profiler=Z_;we.PureComponent=Zd;we.StrictMode=P_;we.Suspense=tw;we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ft;we.__COMPILER_RUNTIME={__proto__:null,c:function(e){return ft.H.useMemoCache(e)}};we.cache=function(e){return function(){return e.apply(null,arguments)}};we.cacheSignal=function(){return null};we.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=oy({},e.props),r=e.key;if(t!=null)for(a in t.key!==void 0&&(r=""+t.key),t)!dy.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];i.children=s}return Wd(e.type,r,i)};we.createContext=function(e){return e={$$typeof:W_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:F_,_context:e},e};we.createElement=function(e,t,n){var i,r={},a=null;if(t!=null)for(i in t.key!==void 0&&(a=""+t.key),t)dy.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var l=Array(s),o=0;o<s;o++)l[o]=arguments[o+2];r.children=l}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)r[i]===void 0&&(r[i]=s[i]);return Wd(e,a,r)};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:ew,render:e}};we.isValidElement=ef;we.lazy=function(e){return{$$typeof:sy,_payload:{_status:-1,_result:e},_init:ow}};we.memo=function(e,t){return{$$typeof:nw,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=ft.T,n={};ft.T=n;try{var i=e(),r=ft.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(zu,$h)}catch(a){$h(a)}finally{t!==null&&n.types!==null&&(t.types=n.types),ft.T=t}};we.unstable_useCacheRefresh=function(){return ft.H.useCacheRefresh()};we.use=function(e){return ft.H.use(e)};we.useActionState=function(e,t,n){return ft.H.useActionState(e,t,n)};we.useCallback=function(e,t){return ft.H.useCallback(e,t)};we.useContext=function(e){return ft.H.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e,t){return ft.H.useDeferredValue(e,t)};we.useEffect=function(e,t){return ft.H.useEffect(e,t)};we.useEffectEvent=function(e){return ft.H.useEffectEvent(e)};we.useId=function(){return ft.H.useId()};we.useImperativeHandle=function(e,t,n){return ft.H.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return ft.H.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return ft.H.useLayoutEffect(e,t)};we.useMemo=function(e,t){return ft.H.useMemo(e,t)};we.useOptimistic=function(e,t){return ft.H.useOptimistic(e,t)};we.useReducer=function(e,t,n){return ft.H.useReducer(e,t,n)};we.useRef=function(e){return ft.H.useRef(e)};we.useState=function(e){return ft.H.useState(e)};we.useSyncExternalStore=function(e,t,n){return ft.H.useSyncExternalStore(e,t,n)};we.useTransition=function(){return ft.H.useTransition()};we.version="19.2.0";ay.exports=we;var b=ay.exports;const dt=ty(b);var fy={exports:{}},nc={},hy={exports:{}},my={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,H){var J=N.length;N.push(H);e:for(;0<J;){var be=J-1>>>1,fe=N[be];if(0<r(fe,H))N[be]=H,N[J]=fe,J=be;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var H=N[0],J=N.pop();if(J!==H){N[0]=J;e:for(var be=0,fe=N.length,Xe=fe>>>1;be<Xe;){var Ve=2*(be+1)-1,ke=N[Ve],Me=Ve+1,Ue=N[Me];if(0>r(ke,J))Me<fe&&0>r(Ue,ke)?(N[be]=Ue,N[Me]=J,be=Me):(N[be]=ke,N[Ve]=J,be=Ve);else if(Me<fe&&0>r(Ue,J))N[be]=Ue,N[Me]=J,be=Me;else break e}}return H}function r(N,H){var J=N.sortIndex-H.sortIndex;return J!==0?J:N.id-H.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var o=[],u=[],f=1,d=null,m=3,h=!1,p=!1,_=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function w(N){for(var H=n(u);H!==null;){if(H.callback===null)i(u);else if(H.startTime<=N)i(u),H.sortIndex=H.expirationTime,t(o,H);else break;H=n(u)}}function T(N){if(_=!1,w(N),!p)if(n(o)!==null)p=!0,j||(j=!0,L());else{var H=n(u);H!==null&&oe(T,H.startTime-N)}}var j=!1,S=-1,E=5,A=-1;function O(){return x?!0:!(e.unstable_now()-A<E)}function C(){if(x=!1,j){var N=e.unstable_now();A=N;var H=!0;try{e:{p=!1,_&&(_=!1,g(S),S=-1),h=!0;var J=m;try{t:{for(w(N),d=n(o);d!==null&&!(d.expirationTime>N&&O());){var be=d.callback;if(typeof be=="function"){d.callback=null,m=d.priorityLevel;var fe=be(d.expirationTime<=N);if(N=e.unstable_now(),typeof fe=="function"){d.callback=fe,w(N),H=!0;break t}d===n(o)&&i(o),w(N)}else i(o);d=n(o)}if(d!==null)H=!0;else{var Xe=n(u);Xe!==null&&oe(T,Xe.startTime-N),H=!1}}break e}finally{d=null,m=J,h=!1}H=void 0}}finally{H?L():j=!1}}}var L;if(typeof y=="function")L=function(){y(C)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,re=Q.port2;Q.port1.onmessage=C,L=function(){re.postMessage(null)}}else L=function(){v(C,0)};function oe(N,H){S=v(function(){N(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(N){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var J=m;m=H;try{return N()}finally{m=J}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(N,H){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var J=m;m=N;try{return H()}finally{m=J}},e.unstable_scheduleCallback=function(N,H,J){var be=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?be+J:be):J=be,N){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=J+fe,N={id:f++,callback:H,priorityLevel:N,startTime:J,expirationTime:fe,sortIndex:-1},J>be?(N.sortIndex=J,t(u,N),n(o)===null&&N===n(u)&&(_?(g(S),S=-1):_=!0,oe(T,J-be))):(N.sortIndex=fe,t(o,N),p||h||(p=!0,j||(j=!0,L()))),N},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(N){var H=m;return function(){var J=m;m=H;try{return N.apply(this,arguments)}finally{m=J}}}})(my);hy.exports=my;var uw=hy.exports,gy={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw=b;function yy(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ki(){}var cn={d:{f:ki,r:function(){throw Error(yy(522))},D:ki,C:ki,L:ki,m:ki,X:ki,S:ki,M:ki},p:0,findDOMNode:null},fw=Symbol.for("react.portal");function hw(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fw,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var _s=dw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function ic(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=cn;un.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(yy(299));return hw(e,t,null,n)};un.flushSync=function(e){var t=_s.T,n=cn.p;try{if(_s.T=null,cn.p=2,e)return e()}finally{_s.T=t,cn.p=n,cn.d.f()}};un.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,cn.d.C(e,t))};un.prefetchDNS=function(e){typeof e=="string"&&cn.d.D(e)};un.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=ic(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?cn.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:a}):n==="script"&&cn.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};un.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=ic(t.as,t.crossOrigin);cn.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&cn.d.M(e)};un.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=ic(n,t.crossOrigin);cn.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};un.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=ic(t.as,t.crossOrigin);cn.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else cn.d.m(e)};un.requestFormReset=function(e){cn.d.r(e)};un.unstable_batchedUpdates=function(e,t){return e(t)};un.useFormState=function(e,t,n){return _s.H.useFormState(e,t,n)};un.useFormStatus=function(){return _s.H.useHostTransitionStatus()};un.version="19.2.0";function vy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vy)}catch(e){console.error(e)}}vy(),gy.exports=un;var xr=gy.exports;const py=ty(xr);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt=uw,by=b,mw=xr;function M(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function _y(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function al(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sy(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qh(e){if(al(e)!==e)throw Error(M(188))}function gw(e){var t=e.alternate;if(!t){if(t=al(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return qh(r),e;if(a===i)return qh(r),t;a=a.sibling}throw Error(M(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,i=a;break}if(l===i){s=!0,i=r,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,i=r;break}if(l===i){s=!0,i=a,n=r;break}l=l.sibling}if(!s)throw Error(M(189))}}if(n.alternate!==i)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function xy(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=xy(e),t!==null)return t;e=e.sibling}return null}var ht=Object.assign,yw=Symbol.for("react.element"),jl=Symbol.for("react.transitional.element"),ms=Symbol.for("react.portal"),la=Symbol.for("react.fragment"),Ty=Symbol.for("react.strict_mode"),Bu=Symbol.for("react.profiler"),Ey=Symbol.for("react.consumer"),_i=Symbol.for("react.context"),tf=Symbol.for("react.forward_ref"),Hu=Symbol.for("react.suspense"),$u=Symbol.for("react.suspense_list"),nf=Symbol.for("react.memo"),zi=Symbol.for("react.lazy"),qu=Symbol.for("react.activity"),vw=Symbol.for("react.memo_cache_sentinel"),Lh=Symbol.iterator;function ls(e){return e===null||typeof e!="object"?null:(e=Lh&&e[Lh]||e["@@iterator"],typeof e=="function"?e:null)}var pw=Symbol.for("react.client.reference");function Lu(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===pw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case la:return"Fragment";case Bu:return"Profiler";case Ty:return"StrictMode";case Hu:return"Suspense";case $u:return"SuspenseList";case qu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ms:return"Portal";case _i:return e.displayName||"Context";case Ey:return(e._context.displayName||"Context")+".Consumer";case tf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nf:return t=e.displayName||null,t!==null?t:Lu(e.type)||"Memo";case zi:t=e._payload,e=e._init;try{return Lu(e(t))}catch{}}return null}var gs=Array.isArray,pe=by.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe=mw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Er={pending:!1,data:null,method:null,action:null},Vu=[],oa=-1;function ci(e){return{current:e}}function Kt(e){0>oa||(e.current=Vu[oa],Vu[oa]=null,oa--)}function lt(e,t){oa++,Vu[oa]=e.current,e.current=t}var oi=ci(null),qs=ci(null),Qi=ci(null),go=ci(null);function yo(e,t){switch(lt(Qi,t),lt(qs,e),lt(oi,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Xm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Xm(t),e=Gp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Kt(oi),lt(oi,e)}function Aa(){Kt(oi),Kt(qs),Kt(Qi)}function Yu(e){e.memoizedState!==null&&lt(go,e);var t=oi.current,n=Gp(t,e.type);t!==n&&(lt(qs,e),lt(oi,n))}function vo(e){qs.current===e&&(Kt(oi),Kt(qs)),go.current===e&&(Kt(go),Zs._currentValue=Er)}var $c,Vh;function mr(e){if($c===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$c=t&&t[1]||"",Vh=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$c+e+Vh}var qc=!1;function Lc(e,t){if(!e||qc)return"";qc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(h){var m=h}Reflect.construct(e,[],d)}else{try{d.call()}catch(h){m=h}e.call(d.prototype)}}else{try{throw Error()}catch(h){m=h}(d=e())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),s=a[0],l=a[1];if(s&&l){var o=s.split(`
`),u=l.split(`
`);for(r=i=0;i<o.length&&!o[i].includes("DetermineComponentFrameRoot");)i++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(i===o.length||r===u.length)for(i=o.length-1,r=u.length-1;1<=i&&0<=r&&o[i]!==u[r];)r--;for(;1<=i&&0<=r;i--,r--)if(o[i]!==u[r]){if(i!==1||r!==1)do if(i--,r--,0>r||o[i]!==u[r]){var f=`
`+o[i].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=i&&0<=r);break}}}finally{qc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?mr(n):""}function bw(e,t){switch(e.tag){case 26:case 27:case 5:return mr(e.type);case 16:return mr("Lazy");case 13:return e.child!==t&&t!==null?mr("Suspense Fallback"):mr("Suspense");case 19:return mr("SuspenseList");case 0:case 15:return Lc(e.type,!1);case 11:return Lc(e.type.render,!1);case 1:return Lc(e.type,!0);case 31:return mr("Activity");default:return""}}function Yh(e){try{var t="",n=null;do t+=bw(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Iu=Object.prototype.hasOwnProperty,rf=qt.unstable_scheduleCallback,Vc=qt.unstable_cancelCallback,_w=qt.unstable_shouldYield,ww=qt.unstable_requestPaint,jn=qt.unstable_now,Sw=qt.unstable_getCurrentPriorityLevel,jy=qt.unstable_ImmediatePriority,Oy=qt.unstable_UserBlockingPriority,po=qt.unstable_NormalPriority,xw=qt.unstable_LowPriority,Dy=qt.unstable_IdlePriority,Tw=qt.log,Ew=qt.unstable_setDisableYieldValue,sl=null,On=null;function Ii(e){if(typeof Tw=="function"&&Ew(e),On&&typeof On.setStrictMode=="function")try{On.setStrictMode(sl,e)}catch{}}var Dn=Math.clz32?Math.clz32:Dw,jw=Math.log,Ow=Math.LN2;function Dw(e){return e>>>=0,e===0?32:31-(jw(e)/Ow|0)|0}var Ol=256,Dl=262144,Al=4194304;function gr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function rc(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var l=i&134217727;return l!==0?(i=l&~a,i!==0?r=gr(i):(s&=l,s!==0?r=gr(s):n||(n=l&~e,n!==0&&(r=gr(n))))):(l=i&~a,l!==0?r=gr(l):s!==0?r=gr(s):n||(n=i&~e,n!==0&&(r=gr(n)))),r===0?0:t!==0&&t!==r&&!(t&a)&&(a=r&-r,n=t&-t,a>=n||a===32&&(n&4194048)!==0)?t:r}function ll(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Aw(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ay(){var e=Al;return Al<<=1,!(Al&62914560)&&(Al=4194304),e}function Yc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ol(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Cw(e,t,n,i,r,a){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,u=e.hiddenUpdates;for(n=s&~n;0<n;){var f=31-Dn(n),d=1<<f;l[f]=0,o[f]=-1;var m=u[f];if(m!==null)for(u[f]=null,f=0;f<m.length;f++){var h=m[f];h!==null&&(h.lane&=-536870913)}n&=~d}i!==0&&Cy(e,i,0),a!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=a&~(s&~t))}function Cy(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Dn(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function Ny(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Dn(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function Ry(e,t){var n=t&-t;return n=n&42?1:af(n),n&(e.suspendedLanes|t)?0:n}function af(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function sf(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ky(){var e=Pe.p;return e!==0?e:(e=window.event,e===void 0?32:n0(e.type))}function Ih(e,t){var n=Pe.p;try{return Pe.p=e,t()}finally{Pe.p=n}}var or=Math.random().toString(36).slice(2),Zt="__reactFiber$"+or,vn="__reactProps$"+or,Ya="__reactContainer$"+or,Gu="__reactEvents$"+or,Nw="__reactListeners$"+or,Rw="__reactHandles$"+or,Gh="__reactResources$"+or,cl="__reactMarker$"+or;function lf(e){delete e[Zt],delete e[vn],delete e[Gu],delete e[Nw],delete e[Rw]}function ca(e){var t=e[Zt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ya]||n[Zt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Fm(e);e!==null;){if(n=e[Zt])return n;e=Fm(e)}return t}e=n,n=e.parentNode}return null}function Ia(e){if(e=e[Zt]||e[Ya]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ys(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(M(33))}function ba(e){var t=e[Gh];return t||(t=e[Gh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Gt(e){e[cl]=!0}var My=new Set,Uy={};function Hr(e,t){Ca(e,t),Ca(e+"Capture",t)}function Ca(e,t){for(Uy[e]=t,e=0;e<t.length;e++)My.add(t[e])}var kw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kh={},Xh={};function Mw(e){return Iu.call(Xh,e)?!0:Iu.call(Kh,e)?!1:kw.test(e)?Xh[e]=!0:(Kh[e]=!0,!1)}function Fl(e,t,n){if(Mw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Cl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function fi(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function qn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Uw(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,a=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ku(e){if(!e._valueTracker){var t=zy(e)?"checked":"value";e._valueTracker=Uw(e,t,""+e[t])}}function By(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=zy(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function bo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var zw=/[\n"\\]/g;function Yn(e){return e.replace(zw,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Xu(e,t,n,i,r,a,s,l){e.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?e.type=s:e.removeAttribute("type"),t!=null?s==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+qn(t)):e.value!==""+qn(t)&&(e.value=""+qn(t)):s!=="submit"&&s!=="reset"||e.removeAttribute("value"),t!=null?Ju(e,s,qn(t)):n!=null?Ju(e,s,qn(n)):i!=null&&e.removeAttribute("value"),r==null&&a!=null&&(e.defaultChecked=!!a),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+qn(l):e.removeAttribute("name")}function Hy(e,t,n,i,r,a,s,l){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.type=a),t!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||t!=null)){Ku(e);return}n=n!=null?""+qn(n):"",t=t!=null?""+qn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=l?e.checked:!!i,e.defaultChecked=!!i,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.name=s),Ku(e)}function Ju(e,t,n){t==="number"&&bo(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _a(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+qn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function $y(e,t,n){if(t!=null&&(t=""+qn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+qn(n):""}function qy(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(M(92));if(gs(i)){if(1<i.length)throw Error(M(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=qn(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),Ku(e)}function Na(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Bw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jh(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||Bw.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ly(e,t,n){if(t!=null&&typeof t!="object")throw Error(M(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&Jh(e,r,i)}else for(var a in t)t.hasOwnProperty(a)&&Jh(e,a,t[a])}function of(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$w=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wl(e){return $w.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function wi(){}var Qu=null;function cf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ua=null,wa=null;function Qh(e){var t=Ia(e);if(t&&(e=t.stateNode)){var n=e[vn]||null;e:switch(e=t.stateNode,t.type){case"input":if(Xu(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Yn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[vn]||null;if(!r)throw Error(M(90));Xu(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&By(i)}break e;case"textarea":$y(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&_a(e,!!n.multiple,t,!1)}}}var Ic=!1;function Vy(e,t,n){if(Ic)return e(t,n);Ic=!0;try{var i=e(t);return i}finally{if(Ic=!1,(ua!==null||wa!==null)&&(yc(),ua&&(t=ua,e=wa,wa=ua=null,Qh(t),e)))for(t=0;t<e.length;t++)Qh(e[t])}}function Ls(e,t){var n=e.stateNode;if(n===null)return null;var i=n[vn]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pu=!1;if(ji)try{var os={};Object.defineProperty(os,"passive",{get:function(){Pu=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{Pu=!1}var Gi=null,uf=null,eo=null;function Yy(){if(eo)return eo;var e,t=uf,n=t.length,i,r="value"in Gi?Gi.value:Gi.textContent,a=r.length;for(e=0;e<n&&t[e]===r[e];e++);var s=n-e;for(i=1;i<=s&&t[n-i]===r[a-i];i++);return eo=r.slice(e,1<i?1-i:void 0)}function to(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nl(){return!0}function Ph(){return!1}function pn(e){function t(n,i,r,a,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Nl:Ph,this.isPropagationStopped=Ph,this}return ht(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),t}var $r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ac=pn($r),ul=ht({},$r,{view:0,detail:0}),qw=pn(ul),Gc,Kc,cs,sc=ht({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:df,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cs&&(cs&&e.type==="mousemove"?(Gc=e.screenX-cs.screenX,Kc=e.screenY-cs.screenY):Kc=Gc=0,cs=e),Gc)},movementY:function(e){return"movementY"in e?e.movementY:Kc}}),Zh=pn(sc),Lw=ht({},sc,{dataTransfer:0}),Vw=pn(Lw),Yw=ht({},ul,{relatedTarget:0}),Xc=pn(Yw),Iw=ht({},$r,{animationName:0,elapsedTime:0,pseudoElement:0}),Gw=pn(Iw),Kw=ht({},$r,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xw=pn(Kw),Jw=ht({},$r,{data:0}),Fh=pn(Jw),Qw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zw[e])?!!t[e]:!1}function df(){return Fw}var Ww=ht({},ul,{key:function(e){if(e.key){var t=Qw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=to(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Pw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:df,charCode:function(e){return e.type==="keypress"?to(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?to(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),eS=pn(Ww),tS=ht({},sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wh=pn(tS),nS=ht({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:df}),iS=pn(nS),rS=ht({},$r,{propertyName:0,elapsedTime:0,pseudoElement:0}),aS=pn(rS),sS=ht({},sc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lS=pn(sS),oS=ht({},$r,{newState:0,oldState:0}),cS=pn(oS),uS=[9,13,27,32],ff=ji&&"CompositionEvent"in window,ws=null;ji&&"documentMode"in document&&(ws=document.documentMode);var dS=ji&&"TextEvent"in window&&!ws,Iy=ji&&(!ff||ws&&8<ws&&11>=ws),em=" ",tm=!1;function Gy(e,t){switch(e){case"keyup":return uS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ky(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var da=!1;function fS(e,t){switch(e){case"compositionend":return Ky(t);case"keypress":return t.which!==32?null:(tm=!0,em);case"textInput":return e=t.data,e===em&&tm?null:e;default:return null}}function hS(e,t){if(da)return e==="compositionend"||!ff&&Gy(e,t)?(e=Yy(),eo=uf=Gi=null,da=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Iy&&t.locale!=="ko"?null:t.data;default:return null}}var mS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mS[e.type]:t==="textarea"}function Xy(e,t,n,i){ua?wa?wa.push(i):wa=[i]:ua=i,t=Bo(t,"onChange"),0<t.length&&(n=new ac("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ss=null,Vs=null;function gS(e){Vp(e,0)}function lc(e){var t=ys(e);if(By(t))return e}function im(e,t){if(e==="change")return t}var Jy=!1;if(ji){var Jc;if(ji){var Qc="oninput"in document;if(!Qc){var rm=document.createElement("div");rm.setAttribute("oninput","return;"),Qc=typeof rm.oninput=="function"}Jc=Qc}else Jc=!1;Jy=Jc&&(!document.documentMode||9<document.documentMode)}function am(){Ss&&(Ss.detachEvent("onpropertychange",Qy),Vs=Ss=null)}function Qy(e){if(e.propertyName==="value"&&lc(Vs)){var t=[];Xy(t,Vs,e,cf(e)),Vy(gS,t)}}function yS(e,t,n){e==="focusin"?(am(),Ss=t,Vs=n,Ss.attachEvent("onpropertychange",Qy)):e==="focusout"&&am()}function vS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lc(Vs)}function pS(e,t){if(e==="click")return lc(t)}function bS(e,t){if(e==="input"||e==="change")return lc(t)}function _S(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cn=typeof Object.is=="function"?Object.is:_S;function Ys(e,t){if(Cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Iu.call(t,r)||!Cn(e[r],t[r]))return!1}return!0}function sm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lm(e,t){var n=sm(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sm(n)}}function Py(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Py(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zy(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=bo(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=bo(e.document)}return t}function hf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var wS=ji&&"documentMode"in document&&11>=document.documentMode,fa=null,Zu=null,xs=null,Fu=!1;function om(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fu||fa==null||fa!==bo(i)||(i=fa,"selectionStart"in i&&hf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),xs&&Ys(xs,i)||(xs=i,i=Bo(Zu,"onSelect"),0<i.length&&(t=new ac("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=fa)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ha={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},Pc={},Fy={};ji&&(Fy=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function qr(e){if(Pc[e])return Pc[e];if(!ha[e])return e;var t=ha[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fy)return Pc[e]=t[n];return e}var Wy=qr("animationend"),ev=qr("animationiteration"),tv=qr("animationstart"),SS=qr("transitionrun"),xS=qr("transitionstart"),TS=qr("transitioncancel"),nv=qr("transitionend"),iv=new Map,Wu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wu.push("scrollEnd");function ii(e,t){iv.set(e,t),Hr(t,[e])}var _o=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Hn=[],ma=0,mf=0;function oc(){for(var e=ma,t=mf=ma=0;t<e;){var n=Hn[t];Hn[t++]=null;var i=Hn[t];Hn[t++]=null;var r=Hn[t];Hn[t++]=null;var a=Hn[t];if(Hn[t++]=null,i!==null&&r!==null){var s=i.pending;s===null?r.next=r:(r.next=s.next,s.next=r),i.pending=r}a!==0&&rv(n,r,a)}}function cc(e,t,n,i){Hn[ma++]=e,Hn[ma++]=t,Hn[ma++]=n,Hn[ma++]=i,mf|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function gf(e,t,n,i){return cc(e,t,n,i),wo(e)}function Lr(e,t){return cc(e,null,null,t),wo(e)}function rv(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,a=e.return;a!==null;)a.childLanes|=n,i=a.alternate,i!==null&&(i.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(r=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,r&&t!==null&&(r=31-Dn(n),e=a.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),a):null}function wo(e){if(50<Rs)throw Rs=0,_d=null,Error(M(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ga={};function ES(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(e,t,n,i){return new ES(e,t,n,i)}function yf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xi(e,t){var n=e.alternate;return n===null?(n=Sn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function av(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function no(e,t,n,i,r,a){var s=0;if(i=e,typeof e=="function")yf(e)&&(s=1);else if(typeof e=="string")s=Cx(e,n,oi.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case qu:return e=Sn(31,n,t,r),e.elementType=qu,e.lanes=a,e;case la:return jr(n.children,r,a,t);case Ty:s=8,r|=24;break;case Bu:return e=Sn(12,n,t,r|2),e.elementType=Bu,e.lanes=a,e;case Hu:return e=Sn(13,n,t,r),e.elementType=Hu,e.lanes=a,e;case $u:return e=Sn(19,n,t,r),e.elementType=$u,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _i:s=10;break e;case Ey:s=9;break e;case tf:s=11;break e;case nf:s=14;break e;case zi:s=16,i=null;break e}s=29,n=Error(M(130,e===null?"null":typeof e,"")),i=null}return t=Sn(s,n,t,r),t.elementType=e,t.type=i,t.lanes=a,t}function jr(e,t,n,i){return e=Sn(7,e,i,t),e.lanes=n,e}function Zc(e,t,n){return e=Sn(6,e,null,t),e.lanes=n,e}function sv(e){var t=Sn(18,null,null,0);return t.stateNode=e,t}function Fc(e,t,n){return t=Sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var cm=new WeakMap;function In(e,t){if(typeof e=="object"&&e!==null){var n=cm.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Yh(t)},cm.set(e,t),t)}return{value:e,source:t,stack:Yh(t)}}var ya=[],va=0,So=null,Is=0,Ln=[],Vn=0,rr=null,ai=1,si="";function pi(e,t){ya[va++]=Is,ya[va++]=So,So=e,Is=t}function lv(e,t,n){Ln[Vn++]=ai,Ln[Vn++]=si,Ln[Vn++]=rr,rr=e;var i=ai;e=si;var r=32-Dn(i)-1;i&=~(1<<r),n+=1;var a=32-Dn(t)+r;if(30<a){var s=r-r%5;a=(i&(1<<s)-1).toString(32),i>>=s,r-=s,ai=1<<32-Dn(t)+r|n<<r|i,si=a+e}else ai=1<<a|n<<r|i,si=e}function vf(e){e.return!==null&&(pi(e,1),lv(e,1,0))}function pf(e){for(;e===So;)So=ya[--va],ya[va]=null,Is=ya[--va],ya[va]=null;for(;e===rr;)rr=Ln[--Vn],Ln[Vn]=null,si=Ln[--Vn],Ln[Vn]=null,ai=Ln[--Vn],Ln[Vn]=null}function ov(e,t){Ln[Vn++]=ai,Ln[Vn++]=si,Ln[Vn++]=rr,ai=t.id,si=t.overflow,rr=e}var Ft=null,ut=null,Le=!1,Pi=null,Gn=!1,ed=Error(M(519));function ar(e){var t=Error(M(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gs(In(t,e)),ed}function um(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Zt]=e,t[vn]=i,n){case"dialog":Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":case"embed":Ne("load",t);break;case"video":case"audio":for(n=0;n<Qs.length;n++)Ne(Qs[n],t);break;case"source":Ne("error",t);break;case"img":case"image":case"link":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"input":Ne("invalid",t),Hy(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Ne("invalid",t);break;case"textarea":Ne("invalid",t),qy(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||Ip(t.textContent,n)?(i.popover!=null&&(Ne("beforetoggle",t),Ne("toggle",t)),i.onScroll!=null&&Ne("scroll",t),i.onScrollEnd!=null&&Ne("scrollend",t),i.onClick!=null&&(t.onclick=wi),t=!0):t=!1,t||ar(e,!0)}function dm(e){for(Ft=e.return;Ft;)switch(Ft.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:Ft=Ft.return}}function Jr(e){if(e!==Ft)return!1;if(!Le)return dm(e),Le=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Ed(e.type,e.memoizedProps)),n=!n),n&&ut&&ar(e),dm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));ut=Zm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));ut=Zm(e)}else t===27?(t=ut,cr(e.type)?(e=Ad,Ad=null,ut=e):ut=t):ut=Ft?Xn(e.stateNode.nextSibling):null;return!0}function Nr(){ut=Ft=null,Le=!1}function Wc(){var e=Pi;return e!==null&&(gn===null?gn=e:gn.push.apply(gn,e),Pi=null),e}function Gs(e){Pi===null?Pi=[e]:Pi.push(e)}var td=ci(null),Vr=null,Si=null;function $i(e,t,n){lt(td,t._currentValue),t._currentValue=n}function Ti(e){e._currentValue=td.current,Kt(td)}function nd(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function id(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){var s=r.child;a=a.firstContext;e:for(;a!==null;){var l=a;a=r;for(var o=0;o<t.length;o++)if(l.context===t[o]){a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),nd(a.return,n,e),i||(s=null);break e}a=l.next}}else if(r.tag===18){if(s=r.return,s===null)throw Error(M(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),nd(s,n,e),s=null}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===e){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}}function Ga(e,t,n,i){e=null;for(var r=t,a=!1;r!==null;){if(!a){if(r.flags&524288)a=!0;else if(r.flags&262144)break}if(r.tag===10){var s=r.alternate;if(s===null)throw Error(M(387));if(s=s.memoizedProps,s!==null){var l=r.type;Cn(r.pendingProps.value,s.value)||(e!==null?e.push(l):e=[l])}}else if(r===go.current){if(s=r.alternate,s===null)throw Error(M(387));s.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Zs):e=[Zs])}r=r.return}e!==null&&id(t,e,n,i),t.flags|=262144}function xo(e){for(e=e.firstContext;e!==null;){if(!Cn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Rr(e){Vr=e,Si=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Wt(e){return cv(Vr,e)}function Rl(e,t){return Vr===null&&Rr(e),cv(e,t)}function cv(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Si===null){if(e===null)throw Error(M(308));Si=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Si=Si.next=t;return n}var jS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},OS=qt.unstable_scheduleCallback,DS=qt.unstable_NormalPriority,Rt={$$typeof:_i,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bf(){return{controller:new jS,data:new Map,refCount:0}}function dl(e){e.refCount--,e.refCount===0&&OS(DS,function(){e.controller.abort()})}var Ts=null,rd=0,Ra=0,Sa=null;function AS(e,t){if(Ts===null){var n=Ts=[];rd=0,Ra=If(),Sa={status:"pending",value:void 0,then:function(i){n.push(i)}}}return rd++,t.then(fm,fm),t}function fm(){if(--rd===0&&Ts!==null){Sa!==null&&(Sa.status="fulfilled");var e=Ts;Ts=null,Ra=0,Sa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function CS(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var hm=pe.S;pe.S=function(e,t){xp=jn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&AS(e,t),hm!==null&&hm(e,t)};var Or=ci(null);function _f(){var e=Or.current;return e!==null?e:rt.pooledCache}function io(e,t){t===null?lt(Or,Or.current):lt(Or,t.pool)}function uv(){var e=_f();return e===null?null:{parent:Rt._currentValue,pool:e}}var Ka=Error(M(460)),wf=Error(M(474)),uc=Error(M(542)),To={then:function(){}};function mm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function dv(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(wi,wi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ym(e),e;default:if(typeof t.status=="string")t.then(wi,wi);else{if(e=rt,e!==null&&100<e.shellSuspendCounter)throw Error(M(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ym(e),e}throw Dr=t,Ka}}function yr(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Dr=n,Ka):n}}var Dr=null;function gm(){if(Dr===null)throw Error(M(459));var e=Dr;return Dr=null,e}function ym(e){if(e===Ka||e===uc)throw Error(M(483))}var xa=null,Ks=0;function kl(e){var t=Ks;return Ks+=1,xa===null&&(xa=[]),dv(xa,e,t)}function us(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ml(e,t){throw t.$$typeof===yw?Error(M(525)):(e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function fv(e){function t(v,g){if(e){var y=v.deletions;y===null?(v.deletions=[g],v.flags|=16):y.push(g)}}function n(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function i(v){for(var g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function r(v,g){return v=xi(v,g),v.index=0,v.sibling=null,v}function a(v,g,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<g?(v.flags|=67108866,g):y):(v.flags|=67108866,g)):(v.flags|=1048576,g)}function s(v){return e&&v.alternate===null&&(v.flags|=67108866),v}function l(v,g,y,w){return g===null||g.tag!==6?(g=Zc(y,v.mode,w),g.return=v,g):(g=r(g,y),g.return=v,g)}function o(v,g,y,w){var T=y.type;return T===la?f(v,g,y.props.children,w,y.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===zi&&yr(T)===g.type)?(g=r(g,y.props),us(g,y),g.return=v,g):(g=no(y.type,y.key,y.props,null,v.mode,w),us(g,y),g.return=v,g)}function u(v,g,y,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Fc(y,v.mode,w),g.return=v,g):(g=r(g,y.children||[]),g.return=v,g)}function f(v,g,y,w,T){return g===null||g.tag!==7?(g=jr(y,v.mode,w,T),g.return=v,g):(g=r(g,y),g.return=v,g)}function d(v,g,y){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=Zc(""+g,v.mode,y),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case jl:return y=no(g.type,g.key,g.props,null,v.mode,y),us(y,g),y.return=v,y;case ms:return g=Fc(g,v.mode,y),g.return=v,g;case zi:return g=yr(g),d(v,g,y)}if(gs(g)||ls(g))return g=jr(g,v.mode,y,null),g.return=v,g;if(typeof g.then=="function")return d(v,kl(g),y);if(g.$$typeof===_i)return d(v,Rl(v,g),y);Ml(v,g)}return null}function m(v,g,y,w){var T=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return T!==null?null:l(v,g,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case jl:return y.key===T?o(v,g,y,w):null;case ms:return y.key===T?u(v,g,y,w):null;case zi:return y=yr(y),m(v,g,y,w)}if(gs(y)||ls(y))return T!==null?null:f(v,g,y,w,null);if(typeof y.then=="function")return m(v,g,kl(y),w);if(y.$$typeof===_i)return m(v,g,Rl(v,y),w);Ml(v,y)}return null}function h(v,g,y,w,T){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return v=v.get(y)||null,l(g,v,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case jl:return v=v.get(w.key===null?y:w.key)||null,o(g,v,w,T);case ms:return v=v.get(w.key===null?y:w.key)||null,u(g,v,w,T);case zi:return w=yr(w),h(v,g,y,w,T)}if(gs(w)||ls(w))return v=v.get(y)||null,f(g,v,w,T,null);if(typeof w.then=="function")return h(v,g,y,kl(w),T);if(w.$$typeof===_i)return h(v,g,y,Rl(g,w),T);Ml(g,w)}return null}function p(v,g,y,w){for(var T=null,j=null,S=g,E=g=0,A=null;S!==null&&E<y.length;E++){S.index>E?(A=S,S=null):A=S.sibling;var O=m(v,S,y[E],w);if(O===null){S===null&&(S=A);break}e&&S&&O.alternate===null&&t(v,S),g=a(O,g,E),j===null?T=O:j.sibling=O,j=O,S=A}if(E===y.length)return n(v,S),Le&&pi(v,E),T;if(S===null){for(;E<y.length;E++)S=d(v,y[E],w),S!==null&&(g=a(S,g,E),j===null?T=S:j.sibling=S,j=S);return Le&&pi(v,E),T}for(S=i(S);E<y.length;E++)A=h(S,v,E,y[E],w),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?E:A.key),g=a(A,g,E),j===null?T=A:j.sibling=A,j=A);return e&&S.forEach(function(C){return t(v,C)}),Le&&pi(v,E),T}function _(v,g,y,w){if(y==null)throw Error(M(151));for(var T=null,j=null,S=g,E=g=0,A=null,O=y.next();S!==null&&!O.done;E++,O=y.next()){S.index>E?(A=S,S=null):A=S.sibling;var C=m(v,S,O.value,w);if(C===null){S===null&&(S=A);break}e&&S&&C.alternate===null&&t(v,S),g=a(C,g,E),j===null?T=C:j.sibling=C,j=C,S=A}if(O.done)return n(v,S),Le&&pi(v,E),T;if(S===null){for(;!O.done;E++,O=y.next())O=d(v,O.value,w),O!==null&&(g=a(O,g,E),j===null?T=O:j.sibling=O,j=O);return Le&&pi(v,E),T}for(S=i(S);!O.done;E++,O=y.next())O=h(S,v,E,O.value,w),O!==null&&(e&&O.alternate!==null&&S.delete(O.key===null?E:O.key),g=a(O,g,E),j===null?T=O:j.sibling=O,j=O);return e&&S.forEach(function(L){return t(v,L)}),Le&&pi(v,E),T}function x(v,g,y,w){if(typeof y=="object"&&y!==null&&y.type===la&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case jl:e:{for(var T=y.key;g!==null;){if(g.key===T){if(T=y.type,T===la){if(g.tag===7){n(v,g.sibling),w=r(g,y.props.children),w.return=v,v=w;break e}}else if(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===zi&&yr(T)===g.type){n(v,g.sibling),w=r(g,y.props),us(w,y),w.return=v,v=w;break e}n(v,g);break}else t(v,g);g=g.sibling}y.type===la?(w=jr(y.props.children,v.mode,w,y.key),w.return=v,v=w):(w=no(y.type,y.key,y.props,null,v.mode,w),us(w,y),w.return=v,v=w)}return s(v);case ms:e:{for(T=y.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(v,g.sibling),w=r(g,y.children||[]),w.return=v,v=w;break e}else{n(v,g);break}else t(v,g);g=g.sibling}w=Fc(y,v.mode,w),w.return=v,v=w}return s(v);case zi:return y=yr(y),x(v,g,y,w)}if(gs(y))return p(v,g,y,w);if(ls(y)){if(T=ls(y),typeof T!="function")throw Error(M(150));return y=T.call(y),_(v,g,y,w)}if(typeof y.then=="function")return x(v,g,kl(y),w);if(y.$$typeof===_i)return x(v,g,Rl(v,y),w);Ml(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,g!==null&&g.tag===6?(n(v,g.sibling),w=r(g,y),w.return=v,v=w):(n(v,g),w=Zc(y,v.mode,w),w.return=v,v=w),s(v)):n(v,g)}return function(v,g,y,w){try{Ks=0;var T=x(v,g,y,w);return xa=null,T}catch(S){if(S===Ka||S===uc)throw S;var j=Sn(29,S,null,v.mode);return j.lanes=w,j.return=v,j}finally{}}}var kr=fv(!0),hv=fv(!1),Bi=!1;function Sf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Zi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Qe&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=wo(e),rv(e,null,n),t}return cc(e,i,t,n),wo(e)}function Es(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Ny(e,n)}}function eu(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?r=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?r=a=t:a=a.next=t}else r=a=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var sd=!1;function js(){if(sd){var e=Sa;if(e!==null)throw e}}function Os(e,t,n,i){sd=!1;var r=e.updateQueue;Bi=!1;var a=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var o=l,u=o.next;o.next=null,s===null?a=u:s.next=u,s=o;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=o))}if(a!==null){var d=r.baseState;s=0,f=u=o=null,l=a;do{var m=l.lane&-536870913,h=m!==l.lane;if(h?(He&m)===m:(i&m)===m){m!==0&&m===Ra&&(sd=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var p=e,_=l;m=t;var x=n;switch(_.tag){case 1:if(p=_.payload,typeof p=="function"){d=p.call(x,d,m);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=_.payload,m=typeof p=="function"?p.call(x,d,m):p,m==null)break e;d=ht({},d,m);break e;case 2:Bi=!0}}m=l.callback,m!==null&&(e.flags|=64,h&&(e.flags|=8192),h=r.callbacks,h===null?r.callbacks=[m]:h.push(m))}else h={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=h,o=d):f=f.next=h,s|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;h=l,l=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);f===null&&(o=d),r.baseState=o,r.firstBaseUpdate=u,r.lastBaseUpdate=f,a===null&&(r.shared.lanes=0),lr|=s,e.lanes=s,e.memoizedState=d}}function mv(e,t){if(typeof e!="function")throw Error(M(191,e));e.call(t)}function gv(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)mv(n[e],t)}var ka=ci(null),Eo=ci(0);function vm(e,t){e=Ci,lt(Eo,e),lt(ka,t),Ci=e|t.baseLanes}function ld(){lt(Eo,Ci),lt(ka,ka.current)}function xf(){Ci=Eo.current,Kt(ka),Kt(Eo)}var Nn=ci(null),Kn=null;function qi(e){var t=e.alternate;lt(Ot,Ot.current&1),lt(Nn,e),Kn===null&&(t===null||ka.current!==null||t.memoizedState!==null)&&(Kn=e)}function od(e){lt(Ot,Ot.current),lt(Nn,e),Kn===null&&(Kn=e)}function yv(e){e.tag===22?(lt(Ot,Ot.current),lt(Nn,e),Kn===null&&(Kn=e)):Li()}function Li(){lt(Ot,Ot.current),lt(Nn,Nn.current)}function wn(e){Kt(Nn),Kn===e&&(Kn=null),Kt(Ot)}var Ot=ci(0);function jo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Od(n)||Dd(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oi=0,xe=null,it=null,Ct=null,Oo=!1,Ta=!1,Mr=!1,Do=0,Xs=0,Ea=null,NS=0;function Tt(){throw Error(M(321))}function Tf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Cn(e[n],t[n]))return!1;return!0}function Ef(e,t,n,i,r,a){return Oi=a,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pe.H=e===null||e.memoizedState===null?Xv:zf,Mr=!1,a=n(i,r),Mr=!1,Ta&&(a=pv(t,n,i,r)),vv(e),a}function vv(e){pe.H=Js;var t=it!==null&&it.next!==null;if(Oi=0,Ct=it=xe=null,Oo=!1,Xs=0,Ea=null,t)throw Error(M(300));e===null||kt||(e=e.dependencies,e!==null&&xo(e)&&(kt=!0))}function pv(e,t,n,i){xe=e;var r=0;do{if(Ta&&(Ea=null),Xs=0,Ta=!1,25<=r)throw Error(M(301));if(r+=1,Ct=it=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}pe.H=Jv,a=t(n,i)}while(Ta);return a}function RS(){var e=pe.H,t=e.useState()[0];return t=typeof t.then=="function"?fl(t):t,e=e.useState()[0],(it!==null?it.memoizedState:null)!==e&&(xe.flags|=1024),t}function jf(){var e=Do!==0;return Do=0,e}function Of(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Df(e){if(Oo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Oo=!1}Oi=0,Ct=it=xe=null,Ta=!1,Xs=Do=0,Ea=null}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?xe.memoizedState=Ct=e:Ct=Ct.next=e,Ct}function Dt(){if(it===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=it.next;var t=Ct===null?xe.memoizedState:Ct.next;if(t!==null)Ct=t,it=e;else{if(e===null)throw xe.alternate===null?Error(M(467)):Error(M(310));it=e,e={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Ct===null?xe.memoizedState=Ct=e:Ct=Ct.next=e}return Ct}function dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fl(e){var t=Xs;return Xs+=1,Ea===null&&(Ea=[]),e=dv(Ea,e,t),t=xe,(Ct===null?t.memoizedState:Ct.next)===null&&(t=t.alternate,pe.H=t===null||t.memoizedState===null?Xv:zf),e}function fc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return fl(e);if(e.$$typeof===_i)return Wt(e)}throw Error(M(438,String(e)))}function Af(e){var t=null,n=xe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=xe.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=dc(),xe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=vw;return t.index++,n}function Di(e,t){return typeof t=="function"?t(e):t}function ro(e){var t=Dt();return Cf(t,it,e)}function Cf(e,t,n){var i=e.queue;if(i===null)throw Error(M(311));i.lastRenderedReducer=n;var r=e.baseQueue,a=i.pending;if(a!==null){if(r!==null){var s=r.next;r.next=a.next,a.next=s}t.baseQueue=r=a,i.pending=null}if(a=e.baseState,r===null)e.memoizedState=a;else{t=r.next;var l=s=null,o=null,u=t,f=!1;do{var d=u.lane&-536870913;if(d!==u.lane?(He&d)===d:(Oi&d)===d){var m=u.revertLane;if(m===0)o!==null&&(o=o.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Ra&&(f=!0);else if((Oi&m)===m){u=u.next,m===Ra&&(f=!0);continue}else d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(l=o=d,s=a):o=o.next=d,xe.lanes|=m,lr|=m;d=u.action,Mr&&n(a,d),a=u.hasEagerState?u.eagerState:n(a,d)}else m={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(l=o=m,s=a):o=o.next=m,xe.lanes|=d,lr|=d;u=u.next}while(u!==null&&u!==t);if(o===null?s=a:o.next=l,!Cn(a,e.memoizedState)&&(kt=!0,f&&(n=Sa,n!==null)))throw n;e.memoizedState=a,e.baseState=s,e.baseQueue=o,i.lastRenderedState=a}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function tu(e){var t=Dt(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do a=e(a,s.action),s=s.next;while(s!==r);Cn(a,t.memoizedState)||(kt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function bv(e,t,n){var i=xe,r=Dt(),a=Le;if(a){if(n===void 0)throw Error(M(407));n=n()}else n=t();var s=!Cn((it||r).memoizedState,n);if(s&&(r.memoizedState=n,kt=!0),r=r.queue,Nf(Sv.bind(null,i,r,e),[e]),r.getSnapshot!==t||s||Ct!==null&&Ct.memoizedState.tag&1){if(i.flags|=2048,Ma(9,{destroy:void 0},wv.bind(null,i,r,n,t),null),rt===null)throw Error(M(349));a||Oi&127||_v(i,t,n)}return n}function _v(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xe.updateQueue,t===null?(t=dc(),xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function wv(e,t,n,i){t.value=n,t.getSnapshot=i,xv(t)&&Tv(e)}function Sv(e,t,n){return n(function(){xv(t)&&Tv(e)})}function xv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Cn(e,n)}catch{return!0}}function Tv(e){var t=Lr(e,2);t!==null&&yn(t,e,2)}function cd(e){var t=ln();if(typeof e=="function"){var n=e;if(e=n(),Mr){Ii(!0);try{n()}finally{Ii(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:e},t}function Ev(e,t,n,i){return e.baseState=n,Cf(e,it,typeof i=="function"?i:Di)}function kS(e,t,n,i,r){if(mc(e))throw Error(M(485));if(e=t.action,e!==null){var a={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){a.listeners.push(s)}};pe.T!==null?n(!0):a.isTransition=!1,i(a),n=t.pending,n===null?(a.next=t.pending=a,jv(t,a)):(a.next=n.next,t.pending=n.next=a)}}function jv(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var a=pe.T,s={};pe.T=s;try{var l=n(r,i),o=pe.S;o!==null&&o(s,l),pm(e,t,l)}catch(u){ud(e,t,u)}finally{a!==null&&s.types!==null&&(a.types=s.types),pe.T=a}}else try{a=n(r,i),pm(e,t,a)}catch(u){ud(e,t,u)}}function pm(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){bm(e,t,i)},function(i){return ud(e,t,i)}):bm(e,t,n)}function bm(e,t,n){t.status="fulfilled",t.value=n,Ov(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,jv(e,n)))}function ud(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Ov(t),t=t.next;while(t!==i)}e.action=null}function Ov(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Dv(e,t){return t}function _m(e,t){if(Le){var n=rt.formState;if(n!==null){e:{var i=xe;if(Le){if(ut){t:{for(var r=ut,a=Gn;r.nodeType!==8;){if(!a){r=null;break t}if(r=Xn(r.nextSibling),r===null){r=null;break t}}a=r.data,r=a==="F!"||a==="F"?r:null}if(r){ut=Xn(r.nextSibling),i=r.data==="F!";break e}}ar(i)}i=!1}i&&(t=n[0])}}return n=ln(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dv,lastRenderedState:t},n.queue=i,n=Iv.bind(null,xe,i),i.dispatch=n,i=cd(!1),a=Uf.bind(null,xe,!1,i.queue),i=ln(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=kS.bind(null,xe,r,a,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function wm(e){var t=Dt();return Av(t,it,e)}function Av(e,t,n){if(t=Cf(e,t,Dv)[0],e=ro(Di)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=fl(t)}catch(s){throw s===Ka?uc:s}else i=t;t=Dt();var r=t.queue,a=r.dispatch;return n!==t.memoizedState&&(xe.flags|=2048,Ma(9,{destroy:void 0},MS.bind(null,r,n),null)),[i,a,e]}function MS(e,t){e.action=t}function Sm(e){var t=Dt(),n=it;if(n!==null)return Av(t,n,e);Dt(),t=t.memoizedState,n=Dt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Ma(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=xe.updateQueue,t===null&&(t=dc(),xe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Cv(){return Dt().memoizedState}function ao(e,t,n,i){var r=ln();xe.flags|=e,r.memoizedState=Ma(1|t,{destroy:void 0},n,i===void 0?null:i)}function hc(e,t,n,i){var r=Dt();i=i===void 0?null:i;var a=r.memoizedState.inst;it!==null&&i!==null&&Tf(i,it.memoizedState.deps)?r.memoizedState=Ma(t,a,n,i):(xe.flags|=e,r.memoizedState=Ma(1|t,a,n,i))}function xm(e,t){ao(8390656,8,e,t)}function Nf(e,t){hc(2048,8,e,t)}function US(e){xe.flags|=4;var t=xe.updateQueue;if(t===null)t=dc(),xe.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Nv(e){var t=Dt().memoizedState;return US({ref:t,nextImpl:e}),function(){if(Qe&2)throw Error(M(440));return t.impl.apply(void 0,arguments)}}function Rv(e,t){return hc(4,2,e,t)}function kv(e,t){return hc(4,4,e,t)}function Mv(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Uv(e,t,n){n=n!=null?n.concat([e]):null,hc(4,4,Mv.bind(null,t,e),n)}function Rf(){}function zv(e,t){var n=Dt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Tf(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Bv(e,t){var n=Dt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Tf(t,i[1]))return i[0];if(i=e(),Mr){Ii(!0);try{e()}finally{Ii(!1)}}return n.memoizedState=[i,t],i}function kf(e,t,n){return n===void 0||Oi&1073741824&&!(He&261930)?e.memoizedState=t:(e.memoizedState=n,e=Ep(),xe.lanes|=e,lr|=e,n)}function Hv(e,t,n,i){return Cn(n,t)?n:ka.current!==null?(e=kf(e,n,i),Cn(e,t)||(kt=!0),e):!(Oi&42)||Oi&1073741824&&!(He&261930)?(kt=!0,e.memoizedState=n):(e=Ep(),xe.lanes|=e,lr|=e,t)}function $v(e,t,n,i,r){var a=Pe.p;Pe.p=a!==0&&8>a?a:8;var s=pe.T,l={};pe.T=l,Uf(e,!1,t,n);try{var o=r(),u=pe.S;if(u!==null&&u(l,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var f=CS(o,i);Ds(e,t,f,An(e))}else Ds(e,t,i,An(e))}catch(d){Ds(e,t,{then:function(){},status:"rejected",reason:d},An())}finally{Pe.p=a,s!==null&&l.types!==null&&(s.types=l.types),pe.T=s}}function zS(){}function dd(e,t,n,i){if(e.tag!==5)throw Error(M(476));var r=qv(e).queue;$v(e,r,t,Er,n===null?zS:function(){return Lv(e),n(i)})}function qv(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Er,baseState:Er,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:Er},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Lv(e){var t=qv(e);t.next===null&&(t=e.alternate.memoizedState),Ds(e,t.next.queue,{},An())}function Mf(){return Wt(Zs)}function Vv(){return Dt().memoizedState}function Yv(){return Dt().memoizedState}function BS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=An();e=Zi(n);var i=Fi(t,e,n);i!==null&&(yn(i,t,n),Es(i,t,n)),t={cache:bf()},e.payload=t;return}t=t.return}}function HS(e,t,n){var i=An();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},mc(e)?Gv(t,n):(n=gf(e,t,n,i),n!==null&&(yn(n,e,i),Kv(n,t,i)))}function Iv(e,t,n){var i=An();Ds(e,t,n,i)}function Ds(e,t,n,i){var r={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(mc(e))Gv(t,r);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,l=a(s,n);if(r.hasEagerState=!0,r.eagerState=l,Cn(l,s))return cc(e,t,r,0),rt===null&&oc(),!1}catch{}finally{}if(n=gf(e,t,r,i),n!==null)return yn(n,e,i),Kv(n,t,i),!0}return!1}function Uf(e,t,n,i){if(i={lane:2,revertLane:If(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},mc(e)){if(t)throw Error(M(479))}else t=gf(e,n,i,2),t!==null&&yn(t,e,2)}function mc(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Gv(e,t){Ta=Oo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Kv(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Ny(e,n)}}var Js={readContext:Wt,use:fc,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};Js.useEffectEvent=Tt;var Xv={readContext:Wt,use:fc,useCallback:function(e,t){return ln().memoizedState=[e,t===void 0?null:t],e},useContext:Wt,useEffect:xm,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,ao(4194308,4,Mv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ao(4194308,4,e,t)},useInsertionEffect:function(e,t){ao(4,2,e,t)},useMemo:function(e,t){var n=ln();t=t===void 0?null:t;var i=e();if(Mr){Ii(!0);try{e()}finally{Ii(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=ln();if(n!==void 0){var r=n(t);if(Mr){Ii(!0);try{n(t)}finally{Ii(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=HS.bind(null,xe,e),[i.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:function(e){e=cd(e);var t=e.queue,n=Iv.bind(null,xe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Rf,useDeferredValue:function(e,t){var n=ln();return kf(n,e,t)},useTransition:function(){var e=cd(!1);return e=$v.bind(null,xe,e.queue,!0,!1),ln().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=xe,r=ln();if(Le){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),rt===null)throw Error(M(349));He&127||_v(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,xm(Sv.bind(null,i,a,e),[e]),i.flags|=2048,Ma(9,{destroy:void 0},wv.bind(null,i,a,n,t),null),n},useId:function(){var e=ln(),t=rt.identifierPrefix;if(Le){var n=si,i=ai;n=(i&~(1<<32-Dn(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=Do++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=NS++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Mf,useFormState:_m,useActionState:_m,useOptimistic:function(e){var t=ln();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Uf.bind(null,xe,!0,n),n.dispatch=t,[e,t]},useMemoCache:Af,useCacheRefresh:function(){return ln().memoizedState=BS.bind(null,xe)},useEffectEvent:function(e){var t=ln(),n={impl:e};return t.memoizedState=n,function(){if(Qe&2)throw Error(M(440));return n.impl.apply(void 0,arguments)}}},zf={readContext:Wt,use:fc,useCallback:zv,useContext:Wt,useEffect:Nf,useImperativeHandle:Uv,useInsertionEffect:Rv,useLayoutEffect:kv,useMemo:Bv,useReducer:ro,useRef:Cv,useState:function(){return ro(Di)},useDebugValue:Rf,useDeferredValue:function(e,t){var n=Dt();return Hv(n,it.memoizedState,e,t)},useTransition:function(){var e=ro(Di)[0],t=Dt().memoizedState;return[typeof e=="boolean"?e:fl(e),t]},useSyncExternalStore:bv,useId:Vv,useHostTransitionStatus:Mf,useFormState:wm,useActionState:wm,useOptimistic:function(e,t){var n=Dt();return Ev(n,it,e,t)},useMemoCache:Af,useCacheRefresh:Yv};zf.useEffectEvent=Nv;var Jv={readContext:Wt,use:fc,useCallback:zv,useContext:Wt,useEffect:Nf,useImperativeHandle:Uv,useInsertionEffect:Rv,useLayoutEffect:kv,useMemo:Bv,useReducer:tu,useRef:Cv,useState:function(){return tu(Di)},useDebugValue:Rf,useDeferredValue:function(e,t){var n=Dt();return it===null?kf(n,e,t):Hv(n,it.memoizedState,e,t)},useTransition:function(){var e=tu(Di)[0],t=Dt().memoizedState;return[typeof e=="boolean"?e:fl(e),t]},useSyncExternalStore:bv,useId:Vv,useHostTransitionStatus:Mf,useFormState:Sm,useActionState:Sm,useOptimistic:function(e,t){var n=Dt();return it!==null?Ev(n,it,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Af,useCacheRefresh:Yv};Jv.useEffectEvent=Nv;function nu(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:ht({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fd={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=An(),r=Zi(i);r.payload=t,n!=null&&(r.callback=n),t=Fi(e,r,i),t!==null&&(yn(t,e,i),Es(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=An(),r=Zi(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Fi(e,r,i),t!==null&&(yn(t,e,i),Es(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=An(),i=Zi(n);i.tag=2,t!=null&&(i.callback=t),t=Fi(e,i,n),t!==null&&(yn(t,e,n),Es(t,e,n))}};function Tm(e,t,n,i,r,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,a,s):t.prototype&&t.prototype.isPureReactComponent?!Ys(n,i)||!Ys(r,a):!0}function Em(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&fd.enqueueReplaceState(t,t.state,null)}function Ur(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=ht({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}function Qv(e){_o(e)}function Pv(e){console.error(e)}function Zv(e){_o(e)}function Ao(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function jm(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function hd(e,t,n){return n=Zi(n),n.tag=3,n.payload={element:null},n.callback=function(){Ao(e,t)},n}function Fv(e){return e=Zi(e),e.tag=3,e}function Wv(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var a=i.value;e.payload=function(){return r(a)},e.callback=function(){jm(t,n,i)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){jm(t,n,i),typeof r!="function"&&(Wi===null?Wi=new Set([this]):Wi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function $S(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Ga(t,n,r,!0),n=Nn.current,n!==null){switch(n.tag){case 31:case 13:return Kn===null?Mo():n.alternate===null&&Et===0&&(Et=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===To?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),hu(e,i,r)),!1;case 22:return n.flags|=65536,i===To?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),hu(e,i,r)),!1}throw Error(M(435,n.tag))}return hu(e,i,r),Mo(),!1}if(Le)return t=Nn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==ed&&(e=Error(M(422),{cause:i}),Gs(In(e,n)))):(i!==ed&&(t=Error(M(423),{cause:i}),Gs(In(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=In(i,n),r=hd(e.stateNode,i,r),eu(e,r),Et!==4&&(Et=2)),!1;var a=Error(M(520),{cause:i});if(a=In(a,n),Ns===null?Ns=[a]:Ns.push(a),Et!==4&&(Et=2),t===null)return!0;i=In(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=hd(n.stateNode,i,e),eu(n,e),!1;case 1:if(t=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(Wi===null||!Wi.has(a))))return n.flags|=65536,r&=-r,n.lanes|=r,r=Fv(r),Wv(r,e,n,i),eu(n,r),!1}n=n.return}while(n!==null);return!1}var Bf=Error(M(461)),kt=!1;function Pt(e,t,n,i){t.child=e===null?hv(t,null,n,i):kr(t,e.child,n,i)}function Om(e,t,n,i,r){n=n.render;var a=t.ref;if("ref"in i){var s={};for(var l in i)l!=="ref"&&(s[l]=i[l])}else s=i;return Rr(t),i=Ef(e,t,n,s,a,r),l=jf(),e!==null&&!kt?(Of(e,t,r),Ai(e,t,r)):(Le&&l&&vf(t),t.flags|=1,Pt(e,t,i,r),t.child)}function Dm(e,t,n,i,r){if(e===null){var a=n.type;return typeof a=="function"&&!yf(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,ep(e,t,a,i,r)):(e=no(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!Hf(e,r)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ys,n(s,i)&&e.ref===t.ref)return Ai(e,t,r)}return t.flags|=1,e=xi(a,i),e.ref=t.ref,e.return=t,t.child=e}function ep(e,t,n,i,r){if(e!==null){var a=e.memoizedProps;if(Ys(a,i)&&e.ref===t.ref)if(kt=!1,t.pendingProps=i=a,Hf(e,r))e.flags&131072&&(kt=!0);else return t.lanes=e.lanes,Ai(e,t,r)}return md(e,t,n,i,r)}function tp(e,t,n,i){var r=i.children,a=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(t.flags&128){if(a=a!==null?a.baseLanes|n:n,e!==null){for(i=t.child=e.child,r=0;i!==null;)r=r|i.lanes|i.childLanes,i=i.sibling;i=r&~a}else i=0,t.child=null;return Am(e,t,a,n,i)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&io(t,a!==null?a.cachePool:null),a!==null?vm(t,a):ld(),yv(t);else return i=t.lanes=536870912,Am(e,t,a!==null?a.baseLanes|n:n,n,i)}else a!==null?(io(t,a.cachePool),vm(t,a),Li(),t.memoizedState=null):(e!==null&&io(t,null),ld(),Li());return Pt(e,t,r,n),t.child}function vs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Am(e,t,n,i,r){var a=_f();return a=a===null?null:{parent:Rt._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&io(t,null),ld(),yv(t),e!==null&&Ga(e,t,i,!0),t.childLanes=r,null}function so(e,t){return t=Co({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Cm(e,t,n){return kr(t,e.child,null,n),e=so(t,t.pendingProps),e.flags|=2,wn(t),t.memoizedState=null,e}function qS(e,t,n){var i=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Le){if(i.mode==="hidden")return e=so(t,i),t.lanes=536870912,vs(null,e);if(od(t),(e=ut)?(e=Xp(e,Gn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:rr!==null?{id:ai,overflow:si}:null,retryLane:536870912,hydrationErrors:null},n=sv(e),n.return=t,t.child=n,Ft=t,ut=null)):e=null,e===null)throw ar(t);return t.lanes=536870912,null}return so(t,i)}var a=e.memoizedState;if(a!==null){var s=a.dehydrated;if(od(t),r)if(t.flags&256)t.flags&=-257,t=Cm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(M(558));else if(kt||Ga(e,t,n,!1),r=(n&e.childLanes)!==0,kt||r){if(i=rt,i!==null&&(s=Ry(i,n),s!==0&&s!==a.retryLane))throw a.retryLane=s,Lr(e,s),yn(i,e,s),Bf;Mo(),t=Cm(e,t,n)}else e=a.treeContext,ut=Xn(s.nextSibling),Ft=t,Le=!0,Pi=null,Gn=!1,e!==null&&ov(t,e),t=so(t,i),t.flags|=4096;return t}return e=xi(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function lo(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(M(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function md(e,t,n,i,r){return Rr(t),n=Ef(e,t,n,i,void 0,r),i=jf(),e!==null&&!kt?(Of(e,t,r),Ai(e,t,r)):(Le&&i&&vf(t),t.flags|=1,Pt(e,t,n,r),t.child)}function Nm(e,t,n,i,r,a){return Rr(t),t.updateQueue=null,n=pv(t,i,n,r),vv(e),i=jf(),e!==null&&!kt?(Of(e,t,a),Ai(e,t,a)):(Le&&i&&vf(t),t.flags|=1,Pt(e,t,n,a),t.child)}function Rm(e,t,n,i,r){if(Rr(t),t.stateNode===null){var a=ga,s=n.contextType;typeof s=="object"&&s!==null&&(a=Wt(s)),a=new n(i,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=fd,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=i,a.state=t.memoizedState,a.refs={},Sf(t),s=n.contextType,a.context=typeof s=="object"&&s!==null?Wt(s):ga,a.state=t.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(nu(t,n,s,i),a.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&fd.enqueueReplaceState(a,a.state,null),Os(t,i,a,r),js(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){a=t.stateNode;var l=t.memoizedProps,o=Ur(n,l);a.props=o;var u=a.context,f=n.contextType;s=ga,typeof f=="object"&&f!==null&&(s=Wt(f));var d=n.getDerivedStateFromProps;f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l||u!==s)&&Em(t,a,i,s),Bi=!1;var m=t.memoizedState;a.state=m,Os(t,i,a,r),js(),u=t.memoizedState,l||m!==u||Bi?(typeof d=="function"&&(nu(t,n,d,i),u=t.memoizedState),(o=Bi||Tm(t,n,o,i,m,u,s))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),a.props=i,a.state=u,a.context=s,i=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,ad(e,t),s=t.memoizedProps,f=Ur(n,s),a.props=f,d=t.pendingProps,m=a.context,u=n.contextType,o=ga,typeof u=="object"&&u!==null&&(o=Wt(u)),l=n.getDerivedStateFromProps,(u=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||m!==o)&&Em(t,a,i,o),Bi=!1,m=t.memoizedState,a.state=m,Os(t,i,a,r),js();var h=t.memoizedState;s!==d||m!==h||Bi||e!==null&&e.dependencies!==null&&xo(e.dependencies)?(typeof l=="function"&&(nu(t,n,l,i),h=t.memoizedState),(f=Bi||Tm(t,n,f,i,m,h,o)||e!==null&&e.dependencies!==null&&xo(e.dependencies))?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,h,o),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,h,o)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=h),a.props=i,a.state=h,a.context=o,i=f):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),i=!1)}return a=i,lo(e,t),i=(t.flags&128)!==0,a||i?(a=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,e!==null&&i?(t.child=kr(t,e.child,null,r),t.child=kr(t,null,n,r)):Pt(e,t,n,r),t.memoizedState=a.state,e=t.child):e=Ai(e,t,r),e}function km(e,t,n,i){return Nr(),t.flags|=256,Pt(e,t,n,i),t.child}var iu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ru(e){return{baseLanes:e,cachePool:uv()}}function au(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=En),e}function np(e,t,n){var i=t.pendingProps,r=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(Ot.current&2)!==0),s&&(r=!0,t.flags&=-129),s=(t.flags&32)!==0,t.flags&=-33,e===null){if(Le){if(r?qi(t):Li(),(e=ut)?(e=Xp(e,Gn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:rr!==null?{id:ai,overflow:si}:null,retryLane:536870912,hydrationErrors:null},n=sv(e),n.return=t,t.child=n,Ft=t,ut=null)):e=null,e===null)throw ar(t);return Dd(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,r?(Li(),r=t.mode,l=Co({mode:"hidden",children:l},r),i=jr(i,r,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,i=t.child,i.memoizedState=ru(n),i.childLanes=au(e,s,n),t.memoizedState=iu,vs(null,i)):(qi(t),gd(t,l))}var o=e.memoizedState;if(o!==null&&(l=o.dehydrated,l!==null)){if(a)t.flags&256?(qi(t),t.flags&=-257,t=su(e,t,n)):t.memoizedState!==null?(Li(),t.child=e.child,t.flags|=128,t=null):(Li(),l=i.fallback,r=t.mode,i=Co({mode:"visible",children:i.children},r),l=jr(l,r,n,null),l.flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,kr(t,e.child,null,n),i=t.child,i.memoizedState=ru(n),i.childLanes=au(e,s,n),t.memoizedState=iu,t=vs(null,i));else if(qi(t),Dd(l)){if(s=l.nextSibling&&l.nextSibling.dataset,s)var u=s.dgst;s=u,i=Error(M(419)),i.stack="",i.digest=s,Gs({value:i,source:null,stack:null}),t=su(e,t,n)}else if(kt||Ga(e,t,n,!1),s=(n&e.childLanes)!==0,kt||s){if(s=rt,s!==null&&(i=Ry(s,n),i!==0&&i!==o.retryLane))throw o.retryLane=i,Lr(e,i),yn(s,e,i),Bf;Od(l)||Mo(),t=su(e,t,n)}else Od(l)?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,ut=Xn(l.nextSibling),Ft=t,Le=!0,Pi=null,Gn=!1,e!==null&&ov(t,e),t=gd(t,i.children),t.flags|=4096);return t}return r?(Li(),l=i.fallback,r=t.mode,o=e.child,u=o.sibling,i=xi(o,{mode:"hidden",children:i.children}),i.subtreeFlags=o.subtreeFlags&65011712,u!==null?l=xi(u,l):(l=jr(l,r,n,null),l.flags|=2),l.return=t,i.return=t,i.sibling=l,t.child=i,vs(null,i),i=t.child,l=e.child.memoizedState,l===null?l=ru(n):(r=l.cachePool,r!==null?(o=Rt._currentValue,r=r.parent!==o?{parent:o,pool:o}:r):r=uv(),l={baseLanes:l.baseLanes|n,cachePool:r}),i.memoizedState=l,i.childLanes=au(e,s,n),t.memoizedState=iu,vs(e.child,i)):(qi(t),n=e.child,e=n.sibling,n=xi(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function gd(e,t){return t=Co({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Co(e,t){return e=Sn(22,e,null,t),e.lanes=0,e}function su(e,t,n){return kr(t,e.child,null,n),e=gd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Mm(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),nd(e.return,t,n)}function lu(e,t,n,i,r,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,treeForkCount:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r,s.treeForkCount=a)}function ip(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;i=i.children;var s=Ot.current,l=(s&2)!==0;if(l?(s=s&1|2,t.flags|=128):s&=1,lt(Ot,s),Pt(e,t,i,n),i=Le?Is:0,!l&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mm(e,n,t);else if(e.tag===19)Mm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&jo(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),lu(t,!1,r,n,a,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&jo(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}lu(t,!0,n,null,a,i);break;case"together":lu(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function Ai(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),lr|=t.lanes,!(n&t.childLanes))if(e!==null){if(Ga(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=xi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Hf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&xo(e)))}function LS(e,t,n){switch(t.tag){case 3:yo(t,t.stateNode.containerInfo),$i(t,Rt,e.memoizedState.cache),Nr();break;case 27:case 5:Yu(t);break;case 4:yo(t,t.stateNode.containerInfo);break;case 10:$i(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,od(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(qi(t),t.flags|=128,null):n&t.child.childLanes?np(e,t,n):(qi(t),e=Ai(e,t,n),e!==null?e.sibling:null);qi(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Ga(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return ip(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),lt(Ot,Ot.current),i)break;return null;case 22:return t.lanes=0,tp(e,t,n,t.pendingProps);case 24:$i(t,Rt,e.memoizedState.cache)}return Ai(e,t,n)}function rp(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)kt=!0;else{if(!Hf(e,n)&&!(t.flags&128))return kt=!1,LS(e,t,n);kt=!!(e.flags&131072)}else kt=!1,Le&&t.flags&1048576&&lv(t,Is,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=yr(t.elementType),t.type=e,typeof e=="function")yf(e)?(i=Ur(e,i),t.tag=1,t=Rm(null,t,e,i,n)):(t.tag=0,t=md(null,t,e,i,n));else{if(e!=null){var r=e.$$typeof;if(r===tf){t.tag=11,t=Om(null,t,e,i,n);break e}else if(r===nf){t.tag=14,t=Dm(null,t,e,i,n);break e}}throw t=Lu(e)||e,Error(M(306,t,""))}}return t;case 0:return md(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Ur(i,t.pendingProps),Rm(e,t,i,r,n);case 3:e:{if(yo(t,t.stateNode.containerInfo),e===null)throw Error(M(387));i=t.pendingProps;var a=t.memoizedState;r=a.element,ad(e,t),Os(t,i,null,n);var s=t.memoizedState;if(i=s.cache,$i(t,Rt,i),i!==a.cache&&id(t,[Rt],n,!0),js(),i=s.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=km(e,t,i,n);break e}else if(i!==r){r=In(Error(M(424)),t),Gs(r),t=km(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ut=Xn(e.firstChild),Ft=t,Le=!0,Pi=null,Gn=!0,n=hv(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Nr(),i===r){t=Ai(e,t,n);break e}Pt(e,t,i,n)}t=t.child}return t;case 26:return lo(e,t),e===null?(n=eg(t.type,null,t.pendingProps,null))?t.memoizedState=n:Le||(n=t.type,e=t.pendingProps,i=Ho(Qi.current).createElement(n),i[Zt]=t,i[vn]=e,en(i,n,e),Gt(i),t.stateNode=i):t.memoizedState=eg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Yu(t),e===null&&Le&&(i=t.stateNode=Jp(t.type,t.pendingProps,Qi.current),Ft=t,Gn=!0,r=ut,cr(t.type)?(Ad=r,ut=Xn(i.firstChild)):ut=r),Pt(e,t,t.pendingProps.children,n),lo(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Le&&((r=i=ut)&&(i=vx(i,t.type,t.pendingProps,Gn),i!==null?(t.stateNode=i,Ft=t,ut=Xn(i.firstChild),Gn=!1,r=!0):r=!1),r||ar(t)),Yu(t),r=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,i=a.children,Ed(r,a)?i=null:s!==null&&Ed(r,s)&&(t.flags|=32),t.memoizedState!==null&&(r=Ef(e,t,RS,null,null,n),Zs._currentValue=r),lo(e,t),Pt(e,t,i,n),t.child;case 6:return e===null&&Le&&((e=n=ut)&&(n=px(n,t.pendingProps,Gn),n!==null?(t.stateNode=n,Ft=t,ut=null,e=!0):e=!1),e||ar(t)),null;case 13:return np(e,t,n);case 4:return yo(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=kr(t,null,i,n):Pt(e,t,i,n),t.child;case 11:return Om(e,t,t.type,t.pendingProps,n);case 7:return Pt(e,t,t.pendingProps,n),t.child;case 8:return Pt(e,t,t.pendingProps.children,n),t.child;case 12:return Pt(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,$i(t,t.type,i.value),Pt(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Rr(t),r=Wt(r),i=i(r),t.flags|=1,Pt(e,t,i,n),t.child;case 14:return Dm(e,t,t.type,t.pendingProps,n);case 15:return ep(e,t,t.type,t.pendingProps,n);case 19:return ip(e,t,n);case 31:return qS(e,t,n);case 22:return tp(e,t,n,t.pendingProps);case 24:return Rr(t),i=Wt(Rt),e===null?(r=_f(),r===null&&(r=rt,a=bf(),r.pooledCache=a,a.refCount++,a!==null&&(r.pooledCacheLanes|=n),r=a),t.memoizedState={parent:i,cache:r},Sf(t),$i(t,Rt,r)):(e.lanes&n&&(ad(e,t),Os(t,null,null,n),js()),r=e.memoizedState,a=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),$i(t,Rt,i)):(i=a.cache,$i(t,Rt,i),i!==r.cache&&id(t,[Rt],n,!0))),Pt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(M(156,t.tag))}function hi(e){e.flags|=4}function ou(e,t,n,i,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(Dp())e.flags|=8192;else throw Dr=To,wf}else e.flags&=-16777217}function Um(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!Zp(t))if(Dp())e.flags|=8192;else throw Dr=To,wf}function Ul(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ay():536870912,e.lanes|=t,Ua|=t)}function ds(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function VS(e,t,n){var i=t.pendingProps;switch(pf(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(t),null;case 1:return ct(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Ti(Rt),Aa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Jr(t)?hi(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wc())),ct(t),null;case 26:var r=t.type,a=t.memoizedState;return e===null?(hi(t),a!==null?(ct(t),Um(t,a)):(ct(t),ou(t,r,null,i,n))):a?a!==e.memoizedState?(hi(t),ct(t),Um(t,a)):(ct(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&hi(t),ct(t),ou(t,r,e,i,n)),null;case 27:if(vo(t),n=Qi.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&hi(t);else{if(!i){if(t.stateNode===null)throw Error(M(166));return ct(t),null}e=oi.current,Jr(t)?um(t):(e=Jp(r,i,n),t.stateNode=e,hi(t))}return ct(t),null;case 5:if(vo(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&hi(t);else{if(!i){if(t.stateNode===null)throw Error(M(166));return ct(t),null}if(a=oi.current,Jr(t))um(t);else{var s=Ho(Qi.current);switch(a){case 1:a=s.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:a=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":a=s.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":a=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":a=s.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?a.multiple=!0:i.size&&(a.size=i.size);break;default:a=typeof i.is=="string"?s.createElement(r,{is:i.is}):s.createElement(r)}}a[Zt]=t,a[vn]=i;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)a.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=a;e:switch(en(a,r,i),r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&hi(t)}}return ct(t),ou(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&hi(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(M(166));if(e=Qi.current,Jr(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=Ft,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Zt]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||Ip(e.nodeValue,n)),e||ar(t,!0)}else e=Ho(e).createTextNode(i),e[Zt]=t,t.stateNode=e}return ct(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=Jr(t),n!==null){if(e===null){if(!i)throw Error(M(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(557));e[Zt]=t}else Nr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ct(t),e=!1}else n=Wc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(wn(t),t):(wn(t),null);if(t.flags&128)throw Error(M(558))}return ct(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=Jr(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(M(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(M(317));r[Zt]=t}else Nr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ct(t),r=!1}else r=Wc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(wn(t),t):(wn(t),null)}return wn(t),t.flags&128?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==r&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Ul(t,t.updateQueue),ct(t),null);case 4:return Aa(),e===null&&Gf(t.stateNode.containerInfo),ct(t),null;case 10:return Ti(t.type),ct(t),null;case 19:if(Kt(Ot),i=t.memoizedState,i===null)return ct(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)ds(i,!1);else{if(Et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=jo(e),a!==null){for(t.flags|=128,ds(i,!1),e=a.updateQueue,t.updateQueue=e,Ul(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)av(n,e),n=n.sibling;return lt(Ot,Ot.current&1|2),Le&&pi(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&jn()>Ro&&(t.flags|=128,r=!0,ds(i,!1),t.lanes=4194304)}else{if(!r)if(e=jo(a),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Ul(t,e),ds(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Le)return ct(t),null}else 2*jn()-i.renderingStartTime>Ro&&n!==536870912&&(t.flags|=128,r=!0,ds(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(e=i.last,e!==null?e.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=jn(),e.sibling=null,n=Ot.current,lt(Ot,r?n&1|2:n&1),Le&&pi(t,i.treeForkCount),e):(ct(t),null);case 22:case 23:return wn(t),xf(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(ct(t),t.subtreeFlags&6&&(t.flags|=8192)):ct(t),n=t.updateQueue,n!==null&&Ul(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Kt(Or),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ti(Rt),ct(t),null;case 25:return null;case 30:return null}throw Error(M(156,t.tag))}function YS(e,t){switch(pf(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ti(Rt),Aa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return vo(t),null;case 31:if(t.memoizedState!==null){if(wn(t),t.alternate===null)throw Error(M(340));Nr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(wn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));Nr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Kt(Ot),null;case 4:return Aa(),null;case 10:return Ti(t.type),null;case 22:case 23:return wn(t),xf(),e!==null&&Kt(Or),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ti(Rt),null;case 25:return null;default:return null}}function ap(e,t){switch(pf(t),t.tag){case 3:Ti(Rt),Aa();break;case 26:case 27:case 5:vo(t);break;case 4:Aa();break;case 31:t.memoizedState!==null&&wn(t);break;case 13:wn(t);break;case 19:Kt(Ot);break;case 10:Ti(t.type);break;case 22:case 23:wn(t),xf(),e!==null&&Kt(Or);break;case 24:Ti(Rt)}}function hl(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var a=n.create,s=n.inst;i=a(),s.destroy=i}n=n.next}while(n!==r)}}catch(l){et(t,t.return,l)}}function sr(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var a=r.next;i=a;do{if((i.tag&e)===e){var s=i.inst,l=s.destroy;if(l!==void 0){s.destroy=void 0,r=t;var o=n,u=l;try{u()}catch(f){et(r,o,f)}}}i=i.next}while(i!==a)}}catch(f){et(t,t.return,f)}}function sp(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{gv(t,n)}catch(i){et(e,e.return,i)}}}function lp(e,t,n){n.props=Ur(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){et(e,t,i)}}function As(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){et(e,t,r)}}function li(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){et(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){et(e,t,r)}else n.current=null}function op(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){et(e,e.return,r)}}function cu(e,t,n){try{var i=e.stateNode;dx(i,e.type,n,t),i[vn]=t}catch(r){et(e,e.return,r)}}function cp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&cr(e.type)||e.tag===4}function uu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&cr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yd(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wi));else if(i!==4&&(i===27&&cr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(yd(e,t,n),e=e.sibling;e!==null;)yd(e,t,n),e=e.sibling}function No(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&cr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(No(e,t,n),e=e.sibling;e!==null;)No(e,t,n),e=e.sibling}function up(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);en(t,i,n),t[Zt]=e,t[vn]=n}catch(a){et(e,e.return,a)}}var bi=!1,Nt=!1,du=!1,zm=typeof WeakSet=="function"?WeakSet:Set,Yt=null;function IS(e,t){if(e=e.containerInfo,xd=Vo,e=Zy(e),hf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,l=-1,o=-1,u=0,f=0,d=e,m=null;t:for(;;){for(var h;d!==n||r!==0&&d.nodeType!==3||(l=s+r),d!==a||i!==0&&d.nodeType!==3||(o=s+i),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)m=d,d=h;for(;;){if(d===e)break t;if(m===n&&++u===r&&(l=s),m===a&&++f===i&&(o=s),(h=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=h}n=l===-1||o===-1?null:{start:l,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Td={focusedElem:e,selectionRange:n},Vo=!1,Yt=t;Yt!==null;)if(t=Yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Yt=e;else for(;Yt!==null;){switch(t=Yt,a=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)r=e[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,n=t,r=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var p=Ur(n.type,r);e=i.getSnapshotBeforeUpdate(p,a),i.__reactInternalSnapshotBeforeUpdate=e}catch(_){et(n,n.return,_)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)jd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(M(163))}if(e=t.sibling,e!==null){e.return=t.return,Yt=e;break}Yt=t.return}}function dp(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:gi(e,n),i&4&&hl(5,n);break;case 1:if(gi(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(s){et(n,n.return,s)}else{var r=Ur(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){et(n,n.return,s)}}i&64&&sp(n),i&512&&As(n,n.return);break;case 3:if(gi(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{gv(e,t)}catch(s){et(n,n.return,s)}}break;case 27:t===null&&i&4&&up(n);case 26:case 5:gi(e,n),t===null&&i&4&&op(n),i&512&&As(n,n.return);break;case 12:gi(e,n);break;case 31:gi(e,n),i&4&&mp(e,n);break;case 13:gi(e,n),i&4&&gp(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=WS.bind(null,n),bx(e,n))));break;case 22:if(i=n.memoizedState!==null||bi,!i){t=t!==null&&t.memoizedState!==null||Nt,r=bi;var a=Nt;bi=i,(Nt=t)&&!a?yi(e,n,(n.subtreeFlags&8772)!==0):gi(e,n),bi=r,Nt=a}break;case 30:break;default:gi(e,n)}}function fp(e){var t=e.alternate;t!==null&&(e.alternate=null,fp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&lf(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var yt=null,mn=!1;function mi(e,t,n){for(n=n.child;n!==null;)hp(e,t,n),n=n.sibling}function hp(e,t,n){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(sl,n)}catch{}switch(n.tag){case 26:Nt||li(n,t),mi(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Nt||li(n,t);var i=yt,r=mn;cr(n.type)&&(yt=n.stateNode,mn=!1),mi(e,t,n),ks(n.stateNode),yt=i,mn=r;break;case 5:Nt||li(n,t);case 6:if(i=yt,r=mn,yt=null,mi(e,t,n),yt=i,mn=r,yt!==null)if(mn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(n.stateNode)}catch(a){et(n,t,a)}else try{yt.removeChild(n.stateNode)}catch(a){et(n,t,a)}break;case 18:yt!==null&&(mn?(e=yt,Qm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),$a(e)):Qm(yt,n.stateNode));break;case 4:i=yt,r=mn,yt=n.stateNode.containerInfo,mn=!0,mi(e,t,n),yt=i,mn=r;break;case 0:case 11:case 14:case 15:sr(2,n,t),Nt||sr(4,n,t),mi(e,t,n);break;case 1:Nt||(li(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&lp(n,t,i)),mi(e,t,n);break;case 21:mi(e,t,n);break;case 22:Nt=(i=Nt)||n.memoizedState!==null,mi(e,t,n),Nt=i;break;default:mi(e,t,n)}}function mp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{$a(e)}catch(n){et(t,t.return,n)}}}function gp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{$a(e)}catch(n){et(t,t.return,n)}}function GS(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new zm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new zm),t;default:throw Error(M(435,e.tag))}}function zl(e,t){var n=GS(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var r=ex.bind(null,e,i);i.then(r,r)}})}function fn(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],a=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 27:if(cr(l.type)){yt=l.stateNode,mn=!1;break e}break;case 5:yt=l.stateNode,mn=!1;break e;case 3:case 4:yt=l.stateNode.containerInfo,mn=!0;break e}l=l.return}if(yt===null)throw Error(M(160));hp(a,s,r),yt=null,mn=!1,a=r.alternate,a!==null&&(a.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)yp(t,e),t=t.sibling}var Wn=null;function yp(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:fn(t,e),hn(e),i&4&&(sr(3,e,e.return),hl(3,e),sr(5,e,e.return));break;case 1:fn(t,e),hn(e),i&512&&(Nt||n===null||li(n,n.return)),i&64&&bi&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=Wn;if(fn(t,e),hn(e),i&512&&(Nt||n===null||li(n,n.return)),i&4){var a=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":a=r.getElementsByTagName("title")[0],(!a||a[cl]||a[Zt]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=r.createElement(i),r.head.insertBefore(a,r.querySelector("head > title"))),en(a,i,n),a[Zt]=e,Gt(a),i=a;break e;case"link":var s=ng("link","href",r).get(i+(n.href||""));if(s){for(var l=0;l<s.length;l++)if(a=s[l],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(l,1);break t}}a=r.createElement(i),en(a,i,n),r.head.appendChild(a);break;case"meta":if(s=ng("meta","content",r).get(i+(n.content||""))){for(l=0;l<s.length;l++)if(a=s[l],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(l,1);break t}}a=r.createElement(i),en(a,i,n),r.head.appendChild(a);break;default:throw Error(M(468,i))}a[Zt]=e,Gt(a),i=a}e.stateNode=i}else ig(r,e.type,e.stateNode);else e.stateNode=tg(r,i,e.memoizedProps);else a!==i?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,i===null?ig(r,e.type,e.stateNode):tg(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&cu(e,e.memoizedProps,n.memoizedProps)}break;case 27:fn(t,e),hn(e),i&512&&(Nt||n===null||li(n,n.return)),n!==null&&i&4&&cu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(fn(t,e),hn(e),i&512&&(Nt||n===null||li(n,n.return)),e.flags&32){r=e.stateNode;try{Na(r,"")}catch(p){et(e,e.return,p)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,cu(e,r,n!==null?n.memoizedProps:r)),i&1024&&(du=!0);break;case 6:if(fn(t,e),hn(e),i&4){if(e.stateNode===null)throw Error(M(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(p){et(e,e.return,p)}}break;case 3:if(uo=null,r=Wn,Wn=$o(t.containerInfo),fn(t,e),Wn=r,hn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{$a(t.containerInfo)}catch(p){et(e,e.return,p)}du&&(du=!1,vp(e));break;case 4:i=Wn,Wn=$o(e.stateNode.containerInfo),fn(t,e),hn(e),Wn=i;break;case 12:fn(t,e),hn(e);break;case 31:fn(t,e),hn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,zl(e,i)));break;case 13:fn(t,e),hn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(gc=jn()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,zl(e,i)));break;case 22:r=e.memoizedState!==null;var o=n!==null&&n.memoizedState!==null,u=bi,f=Nt;if(bi=u||r,Nt=f||o,fn(t,e),Nt=f,bi=u,hn(e),i&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||o||bi||Nt||vr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){o=n=t;try{if(a=o.stateNode,r)s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{l=o.stateNode;var d=o.memoizedProps.style,m=d!=null&&d.hasOwnProperty("display")?d.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(p){et(o,o.return,p)}}}else if(t.tag===6){if(n===null){o=t;try{o.stateNode.nodeValue=r?"":o.memoizedProps}catch(p){et(o,o.return,p)}}}else if(t.tag===18){if(n===null){o=t;try{var h=o.stateNode;r?Pm(h,!0):Pm(o.stateNode,!1)}catch(p){et(o,o.return,p)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,zl(e,n))));break;case 19:fn(t,e),hn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,zl(e,i)));break;case 30:break;case 21:break;default:fn(t,e),hn(e)}}function hn(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(cp(i)){n=i;break}i=i.return}if(n==null)throw Error(M(160));switch(n.tag){case 27:var r=n.stateNode,a=uu(e);No(e,a,r);break;case 5:var s=n.stateNode;n.flags&32&&(Na(s,""),n.flags&=-33);var l=uu(e);No(e,l,s);break;case 3:case 4:var o=n.stateNode.containerInfo,u=uu(e);yd(e,u,o);break;default:throw Error(M(161))}}catch(f){et(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;vp(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function gi(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)dp(e,t.alternate,t),t=t.sibling}function vr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sr(4,t,t.return),vr(t);break;case 1:li(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&lp(t,t.return,n),vr(t);break;case 27:ks(t.stateNode);case 26:case 5:li(t,t.return),vr(t);break;case 22:t.memoizedState===null&&vr(t);break;case 30:vr(t);break;default:vr(t)}e=e.sibling}}function yi(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,a=t,s=a.flags;switch(a.tag){case 0:case 11:case 15:yi(r,a,n),hl(4,a);break;case 1:if(yi(r,a,n),i=a,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(u){et(i,i.return,u)}if(i=a,r=i.updateQueue,r!==null){var l=i.stateNode;try{var o=r.shared.hiddenCallbacks;if(o!==null)for(r.shared.hiddenCallbacks=null,r=0;r<o.length;r++)mv(o[r],l)}catch(u){et(i,i.return,u)}}n&&s&64&&sp(a),As(a,a.return);break;case 27:up(a);case 26:case 5:yi(r,a,n),n&&i===null&&s&4&&op(a),As(a,a.return);break;case 12:yi(r,a,n);break;case 31:yi(r,a,n),n&&s&4&&mp(r,a);break;case 13:yi(r,a,n),n&&s&4&&gp(r,a);break;case 22:a.memoizedState===null&&yi(r,a,n),As(a,a.return);break;case 30:break;default:yi(r,a,n)}t=t.sibling}}function $f(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&dl(n))}function qf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&dl(e))}function Qn(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)pp(e,t,n,i),t=t.sibling}function pp(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:Qn(e,t,n,i),r&2048&&hl(9,t);break;case 1:Qn(e,t,n,i);break;case 3:Qn(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&dl(e)));break;case 12:if(r&2048){Qn(e,t,n,i),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,l=a.onPostCommit;typeof l=="function"&&l(s,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(o){et(t,t.return,o)}}else Qn(e,t,n,i);break;case 31:Qn(e,t,n,i);break;case 13:Qn(e,t,n,i);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,t.memoizedState!==null?a._visibility&2?Qn(e,t,n,i):Cs(e,t):a._visibility&2?Qn(e,t,n,i):(a._visibility|=2,na(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),r&2048&&$f(s,t);break;case 24:Qn(e,t,n,i),r&2048&&qf(t.alternate,t);break;default:Qn(e,t,n,i)}}function na(e,t,n,i,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var a=e,s=t,l=n,o=i,u=s.flags;switch(s.tag){case 0:case 11:case 15:na(a,s,l,o,r),hl(8,s);break;case 23:break;case 22:var f=s.stateNode;s.memoizedState!==null?f._visibility&2?na(a,s,l,o,r):Cs(a,s):(f._visibility|=2,na(a,s,l,o,r)),r&&u&2048&&$f(s.alternate,s);break;case 24:na(a,s,l,o,r),r&&u&2048&&qf(s.alternate,s);break;default:na(a,s,l,o,r)}t=t.sibling}}function Cs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Cs(n,i),r&2048&&$f(i.alternate,i);break;case 24:Cs(n,i),r&2048&&qf(i.alternate,i);break;default:Cs(n,i)}t=t.sibling}}var ps=8192;function Qr(e,t,n){if(e.subtreeFlags&ps)for(e=e.child;e!==null;)bp(e,t,n),e=e.sibling}function bp(e,t,n){switch(e.tag){case 26:Qr(e,t,n),e.flags&ps&&e.memoizedState!==null&&Nx(n,Wn,e.memoizedState,e.memoizedProps);break;case 5:Qr(e,t,n);break;case 3:case 4:var i=Wn;Wn=$o(e.stateNode.containerInfo),Qr(e,t,n),Wn=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=ps,ps=16777216,Qr(e,t,n),ps=i):Qr(e,t,n));break;default:Qr(e,t,n)}}function _p(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function fs(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Yt=i,Sp(i,e)}_p(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)wp(e),e=e.sibling}function wp(e){switch(e.tag){case 0:case 11:case 15:fs(e),e.flags&2048&&sr(9,e,e.return);break;case 3:fs(e);break;case 12:fs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,oo(e)):fs(e);break;default:fs(e)}}function oo(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Yt=i,Sp(i,e)}_p(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:sr(8,t,t.return),oo(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,oo(t));break;default:oo(t)}e=e.sibling}}function Sp(e,t){for(;Yt!==null;){var n=Yt;switch(n.tag){case 0:case 11:case 15:sr(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:dl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Yt=i;else e:for(n=e;Yt!==null;){i=Yt;var r=i.sibling,a=i.return;if(fp(i),i===n){Yt=null;break e}if(r!==null){r.return=a,Yt=r;break e}Yt=a}}}var KS={getCacheForType:function(e){var t=Wt(Rt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Wt(Rt).controller.signal}},XS=typeof WeakMap=="function"?WeakMap:Map,Qe=0,rt=null,Re=null,He=0,We=0,_n=null,Ki=!1,Xa=!1,Lf=!1,Ci=0,Et=0,lr=0,Ar=0,Vf=0,En=0,Ua=0,Ns=null,gn=null,vd=!1,gc=0,xp=0,Ro=1/0,ko=null,Wi=null,$t=0,er=null,za=null,Ei=0,pd=0,bd=null,Tp=null,Rs=0,_d=null;function An(){return Qe&2&&He!==0?He&-He:pe.T!==null?If():ky()}function Ep(){if(En===0)if(!(He&536870912)||Le){var e=Dl;Dl<<=1,!(Dl&3932160)&&(Dl=262144),En=e}else En=536870912;return e=Nn.current,e!==null&&(e.flags|=32),En}function yn(e,t,n){(e===rt&&(We===2||We===9)||e.cancelPendingCommit!==null)&&(Ba(e,0),Xi(e,He,En,!1)),ol(e,n),(!(Qe&2)||e!==rt)&&(e===rt&&(!(Qe&2)&&(Ar|=n),Et===4&&Xi(e,He,En,!1)),ui(e))}function jp(e,t,n){if(Qe&6)throw Error(M(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||ll(e,t),r=i?PS(e,t):fu(e,t,!0),a=i;do{if(r===0){Xa&&!i&&Xi(e,t,0,!1);break}else{if(n=e.current.alternate,a&&!JS(n)){r=fu(e,t,!1),a=!1;continue}if(r===2){if(a=t,e.errorRecoveryDisabledLanes&a)var s=0;else s=e.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){t=s;e:{var l=e;r=Ns;var o=l.current.memoizedState.isDehydrated;if(o&&(Ba(l,s).flags|=256),s=fu(l,s,!1),s!==2){if(Lf&&!o){l.errorRecoveryDisabledLanes|=a,Ar|=a,r=4;break e}a=gn,gn=r,a!==null&&(gn===null?gn=a:gn.push.apply(gn,a))}r=s}if(a=!1,r!==2)continue}}if(r===1){Ba(e,0),Xi(e,t,0,!0);break}e:{switch(i=e,a=r,a){case 0:case 1:throw Error(M(345));case 4:if((t&4194048)!==t)break;case 6:Xi(i,t,En,!Ki);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(M(329))}if((t&62914560)===t&&(r=gc+300-jn(),10<r)){if(Xi(i,t,En,!Ki),rc(i,0,!0)!==0)break e;Ei=t,i.timeoutHandle=Kp(Bm.bind(null,i,n,gn,ko,vd,t,En,Ar,Ua,Ki,a,"Throttled",-0,0),r);break e}Bm(i,n,gn,ko,vd,t,En,Ar,Ua,Ki,a,null,-0,0)}}break}while(!0);ui(e)}function Bm(e,t,n,i,r,a,s,l,o,u,f,d,m,h){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wi},bp(t,a,d);var p=(a&62914560)===a?gc-jn():(a&4194048)===a?xp-jn():0;if(p=Rx(d,p),p!==null){Ei=a,e.cancelPendingCommit=p($m.bind(null,e,t,a,n,i,r,s,l,o,f,d,null,m,h)),Xi(e,a,s,!u);return}}$m(e,t,a,n,i,r,s,l,o)}function JS(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!Cn(a(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xi(e,t,n,i){t&=~Vf,t&=~Ar,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var a=31-Dn(r),s=1<<a;i[a]=-1,r&=~s}n!==0&&Cy(e,n,t)}function yc(){return Qe&6?!0:(ml(0),!1)}function Yf(){if(Re!==null){if(We===0)var e=Re.return;else e=Re,Si=Vr=null,Df(e),xa=null,Ks=0,e=Re;for(;e!==null;)ap(e.alternate,e),e=e.return;Re=null}}function Ba(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,mx(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Ei=0,Yf(),rt=e,Re=n=xi(e.current,null),He=t,We=0,_n=null,Ki=!1,Xa=ll(e,t),Lf=!1,Ua=En=Vf=Ar=lr=Et=0,gn=Ns=null,vd=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Dn(i),a=1<<r;t|=e[r],i&=~a}return Ci=t,oc(),n}function Op(e,t){xe=null,pe.H=Js,t===Ka||t===uc?(t=gm(),We=3):t===wf?(t=gm(),We=4):We=t===Bf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,_n=t,Re===null&&(Et=1,Ao(e,In(t,e.current)))}function Dp(){var e=Nn.current;return e===null?!0:(He&4194048)===He?Kn===null:(He&62914560)===He||He&536870912?e===Kn:!1}function Ap(){var e=pe.H;return pe.H=Js,e===null?Js:e}function Cp(){var e=pe.A;return pe.A=KS,e}function Mo(){Et=4,Ki||(He&4194048)!==He&&Nn.current!==null||(Xa=!0),!(lr&134217727)&&!(Ar&134217727)||rt===null||Xi(rt,He,En,!1)}function fu(e,t,n){var i=Qe;Qe|=2;var r=Ap(),a=Cp();(rt!==e||He!==t)&&(ko=null,Ba(e,t)),t=!1;var s=Et;e:do try{if(We!==0&&Re!==null){var l=Re,o=_n;switch(We){case 8:Yf(),s=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(t=!0);var u=We;if(We=0,_n=null,pa(e,l,o,u),n&&Xa){s=0;break e}break;default:u=We,We=0,_n=null,pa(e,l,o,u)}}QS(),s=Et;break}catch(f){Op(e,f)}while(!0);return t&&e.shellSuspendCounter++,Si=Vr=null,Qe=i,pe.H=r,pe.A=a,Re===null&&(rt=null,He=0,oc()),s}function QS(){for(;Re!==null;)Np(Re)}function PS(e,t){var n=Qe;Qe|=2;var i=Ap(),r=Cp();rt!==e||He!==t?(ko=null,Ro=jn()+500,Ba(e,t)):Xa=ll(e,t);e:do try{if(We!==0&&Re!==null){t=Re;var a=_n;t:switch(We){case 1:We=0,_n=null,pa(e,t,a,1);break;case 2:case 9:if(mm(a)){We=0,_n=null,Hm(t);break}t=function(){We!==2&&We!==9||rt!==e||(We=7),ui(e)},a.then(t,t);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:mm(a)?(We=0,_n=null,Hm(t)):(We=0,_n=null,pa(e,t,a,7));break;case 5:var s=null;switch(Re.tag){case 26:s=Re.memoizedState;case 5:case 27:var l=Re;if(s?Zp(s):l.stateNode.complete){We=0,_n=null;var o=l.sibling;if(o!==null)Re=o;else{var u=l.return;u!==null?(Re=u,vc(u)):Re=null}break t}}We=0,_n=null,pa(e,t,a,5);break;case 6:We=0,_n=null,pa(e,t,a,6);break;case 8:Yf(),Et=6;break e;default:throw Error(M(462))}}ZS();break}catch(f){Op(e,f)}while(!0);return Si=Vr=null,pe.H=i,pe.A=r,Qe=n,Re!==null?0:(rt=null,He=0,oc(),Et)}function ZS(){for(;Re!==null&&!_w();)Np(Re)}function Np(e){var t=rp(e.alternate,e,Ci);e.memoizedProps=e.pendingProps,t===null?vc(e):Re=t}function Hm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Nm(n,t,t.pendingProps,t.type,void 0,He);break;case 11:t=Nm(n,t,t.pendingProps,t.type.render,t.ref,He);break;case 5:Df(t);default:ap(n,t),t=Re=av(t,Ci),t=rp(n,t,Ci)}e.memoizedProps=e.pendingProps,t===null?vc(e):Re=t}function pa(e,t,n,i){Si=Vr=null,Df(t),xa=null,Ks=0;var r=t.return;try{if($S(e,r,t,n,He)){Et=1,Ao(e,In(n,e.current)),Re=null;return}}catch(a){if(r!==null)throw Re=r,a;Et=1,Ao(e,In(n,e.current)),Re=null;return}t.flags&32768?(Le||i===1?e=!0:Xa||He&536870912?e=!1:(Ki=e=!0,(i===2||i===9||i===3||i===6)&&(i=Nn.current,i!==null&&i.tag===13&&(i.flags|=16384))),Rp(t,e)):vc(t)}function vc(e){var t=e;do{if(t.flags&32768){Rp(t,Ki);return}e=t.return;var n=VS(t.alternate,t,Ci);if(n!==null){Re=n;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);Et===0&&(Et=5)}function Rp(e,t){do{var n=YS(e.alternate,e);if(n!==null){n.flags&=32767,Re=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Re=e;return}Re=e=n}while(e!==null);Et=6,Re=null}function $m(e,t,n,i,r,a,s,l,o){e.cancelPendingCommit=null;do pc();while($t!==0);if(Qe&6)throw Error(M(327));if(t!==null){if(t===e.current)throw Error(M(177));if(a=t.lanes|t.childLanes,a|=mf,Cw(e,n,a,s,l,o),e===rt&&(Re=rt=null,He=0),za=t,er=e,Ei=n,pd=a,bd=r,Tp=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,tx(po,function(){return Bp(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=pe.T,pe.T=null,r=Pe.p,Pe.p=2,s=Qe,Qe|=4;try{IS(e,t,n)}finally{Qe=s,Pe.p=r,pe.T=i}}$t=1,kp(),Mp(),Up()}}function kp(){if($t===1){$t=0;var e=er,t=za,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=pe.T,pe.T=null;var i=Pe.p;Pe.p=2;var r=Qe;Qe|=4;try{yp(t,e);var a=Td,s=Zy(e.containerInfo),l=a.focusedElem,o=a.selectionRange;if(s!==l&&l&&l.ownerDocument&&Py(l.ownerDocument.documentElement,l)){if(o!==null&&hf(l)){var u=o.start,f=o.end;if(f===void 0&&(f=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(f,l.value.length);else{var d=l.ownerDocument||document,m=d&&d.defaultView||window;if(m.getSelection){var h=m.getSelection(),p=l.textContent.length,_=Math.min(o.start,p),x=o.end===void 0?_:Math.min(o.end,p);!h.extend&&_>x&&(s=x,x=_,_=s);var v=lm(l,_),g=lm(l,x);if(v&&g&&(h.rangeCount!==1||h.anchorNode!==v.node||h.anchorOffset!==v.offset||h.focusNode!==g.node||h.focusOffset!==g.offset)){var y=d.createRange();y.setStart(v.node,v.offset),h.removeAllRanges(),_>x?(h.addRange(y),h.extend(g.node,g.offset)):(y.setEnd(g.node,g.offset),h.addRange(y))}}}}for(d=[],h=l;h=h.parentNode;)h.nodeType===1&&d.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<d.length;l++){var w=d[l];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}Vo=!!xd,Td=xd=null}finally{Qe=r,Pe.p=i,pe.T=n}}e.current=t,$t=2}}function Mp(){if($t===2){$t=0;var e=er,t=za,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=pe.T,pe.T=null;var i=Pe.p;Pe.p=2;var r=Qe;Qe|=4;try{dp(e,t.alternate,t)}finally{Qe=r,Pe.p=i,pe.T=n}}$t=3}}function Up(){if($t===4||$t===3){$t=0,ww();var e=er,t=za,n=Ei,i=Tp;t.subtreeFlags&10256||t.flags&10256?$t=5:($t=0,za=er=null,zp(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(Wi=null),sf(n),t=t.stateNode,On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(sl,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=pe.T,r=Pe.p,Pe.p=2,pe.T=null;try{for(var a=e.onRecoverableError,s=0;s<i.length;s++){var l=i[s];a(l.value,{componentStack:l.stack})}}finally{pe.T=t,Pe.p=r}}Ei&3&&pc(),ui(e),r=e.pendingLanes,n&261930&&r&42?e===_d?Rs++:(Rs=0,_d=e):Rs=0,ml(0)}}function zp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,dl(t)))}function pc(){return kp(),Mp(),Up(),Bp()}function Bp(){if($t!==5)return!1;var e=er,t=pd;pd=0;var n=sf(Ei),i=pe.T,r=Pe.p;try{Pe.p=32>n?32:n,pe.T=null,n=bd,bd=null;var a=er,s=Ei;if($t=0,za=er=null,Ei=0,Qe&6)throw Error(M(331));var l=Qe;if(Qe|=4,wp(a.current),pp(a,a.current,s,n),Qe=l,ml(0,!1),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(sl,a)}catch{}return!0}finally{Pe.p=r,pe.T=i,zp(e,t)}}function qm(e,t,n){t=In(n,t),t=hd(e.stateNode,t,2),e=Fi(e,t,2),e!==null&&(ol(e,2),ui(e))}function et(e,t,n){if(e.tag===3)qm(e,e,n);else for(;t!==null;){if(t.tag===3){qm(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Wi===null||!Wi.has(i))){e=In(n,e),n=Fv(2),i=Fi(t,n,2),i!==null&&(Wv(n,i,t,e),ol(i,2),ui(i));break}}t=t.return}}function hu(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new XS;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(Lf=!0,r.add(n),e=FS.bind(null,e,t,n),t.then(e,e))}function FS(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rt===e&&(He&n)===n&&(Et===4||Et===3&&(He&62914560)===He&&300>jn()-gc?!(Qe&2)&&Ba(e,0):Vf|=n,Ua===He&&(Ua=0)),ui(e)}function Hp(e,t){t===0&&(t=Ay()),e=Lr(e,t),e!==null&&(ol(e,t),ui(e))}function WS(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Hp(e,n)}function ex(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(M(314))}i!==null&&i.delete(t),Hp(e,n)}function tx(e,t){return rf(e,t)}var Uo=null,ia=null,wd=!1,zo=!1,mu=!1,Ji=0;function ui(e){e!==ia&&e.next===null&&(ia===null?Uo=ia=e:ia=ia.next=e),zo=!0,wd||(wd=!0,ix())}function ml(e,t){if(!mu&&zo){mu=!0;do for(var n=!1,i=Uo;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var a=0;else{var s=i.suspendedLanes,l=i.pingedLanes;a=(1<<31-Dn(42|e)+1)-1,a&=r&~(s&~l),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,Lm(i,a))}else a=He,a=rc(i,i===rt?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(a&3)||ll(i,a)||(n=!0,Lm(i,a));i=i.next}while(n);mu=!1}}function nx(){$p()}function $p(){zo=wd=!1;var e=0;Ji!==0&&hx()&&(e=Ji);for(var t=jn(),n=null,i=Uo;i!==null;){var r=i.next,a=qp(i,t);a===0?(i.next=null,n===null?Uo=r:n.next=r,r===null&&(ia=n)):(n=i,(e!==0||a&3)&&(zo=!0)),i=r}$t!==0&&$t!==5||ml(e),Ji!==0&&(Ji=0)}function qp(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var s=31-Dn(a),l=1<<s,o=r[s];o===-1?(!(l&n)||l&i)&&(r[s]=Aw(l,t)):o<=t&&(e.expiredLanes|=l),a&=~l}if(t=rt,n=He,n=rc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(We===2||We===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Vc(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||ll(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Vc(i),sf(n)){case 2:case 8:n=Oy;break;case 32:n=po;break;case 268435456:n=Dy;break;default:n=po}return i=Lp.bind(null,e),n=rf(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Vc(i),e.callbackPriority=2,e.callbackNode=null,2}function Lp(e,t){if($t!==0&&$t!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(pc()&&e.callbackNode!==n)return null;var i=He;return i=rc(e,e===rt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(jp(e,i,t),qp(e,jn()),e.callbackNode!=null&&e.callbackNode===n?Lp.bind(null,e):null)}function Lm(e,t){if(pc())return null;jp(e,t,!0)}function ix(){gx(function(){Qe&6?rf(jy,nx):$p()})}function If(){if(Ji===0){var e=Ra;e===0&&(e=Ol,Ol<<=1,!(Ol&261888)&&(Ol=256)),Ji=e}return Ji}function Vm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Wl(""+e)}function Ym(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function rx(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var a=Vm((r[vn]||null).action),s=i.submitter;s&&(t=(t=s[vn]||null)?Vm(t.formAction):s.getAttribute("formAction"),t!==null&&(a=t,s=null));var l=new ac("action","action",null,i,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ji!==0){var o=s?Ym(r,s):new FormData(r);dd(n,{pending:!0,data:o,method:r.method,action:a},null,o)}}else typeof a=="function"&&(l.preventDefault(),o=s?Ym(r,s):new FormData(r),dd(n,{pending:!0,data:o,method:r.method,action:a},a,o))},currentTarget:r}]})}}for(var gu=0;gu<Wu.length;gu++){var yu=Wu[gu],ax=yu.toLowerCase(),sx=yu[0].toUpperCase()+yu.slice(1);ii(ax,"on"+sx)}ii(Wy,"onAnimationEnd");ii(ev,"onAnimationIteration");ii(tv,"onAnimationStart");ii("dblclick","onDoubleClick");ii("focusin","onFocus");ii("focusout","onBlur");ii(SS,"onTransitionRun");ii(xS,"onTransitionStart");ii(TS,"onTransitionCancel");ii(nv,"onTransitionEnd");Ca("onMouseEnter",["mouseout","mouseover"]);Ca("onMouseLeave",["mouseout","mouseover"]);Ca("onPointerEnter",["pointerout","pointerover"]);Ca("onPointerLeave",["pointerout","pointerover"]);Hr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qs));function Vp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var s=i.length-1;0<=s;s--){var l=i[s],o=l.instance,u=l.currentTarget;if(l=l.listener,o!==a&&r.isPropagationStopped())break e;a=l,r.currentTarget=u;try{a(r)}catch(f){_o(f)}r.currentTarget=null,a=o}else for(s=0;s<i.length;s++){if(l=i[s],o=l.instance,u=l.currentTarget,l=l.listener,o!==a&&r.isPropagationStopped())break e;a=l,r.currentTarget=u;try{a(r)}catch(f){_o(f)}r.currentTarget=null,a=o}}}}function Ne(e,t){var n=t[Gu];n===void 0&&(n=t[Gu]=new Set);var i=e+"__bubble";n.has(i)||(Yp(t,e,2,!1),n.add(i))}function vu(e,t,n){var i=0;t&&(i|=4),Yp(n,e,i,t)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function Gf(e){if(!e[Bl]){e[Bl]=!0,My.forEach(function(n){n!=="selectionchange"&&(lx.has(n)||vu(n,!1,e),vu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bl]||(t[Bl]=!0,vu("selectionchange",!1,t))}}function Yp(e,t,n,i){switch(n0(t)){case 2:var r=Ux;break;case 8:r=zx;break;default:r=Qf}n=r.bind(null,t,n,e),r=void 0,!Pu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function pu(e,t,n,i,r){var a=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var l=i.stateNode.containerInfo;if(l===r)break;if(s===4)for(s=i.return;s!==null;){var o=s.tag;if((o===3||o===4)&&s.stateNode.containerInfo===r)return;s=s.return}for(;l!==null;){if(s=ca(l),s===null)return;if(o=s.tag,o===5||o===6||o===26||o===27){i=a=s;continue e}l=l.parentNode}}i=i.return}Vy(function(){var u=a,f=cf(n),d=[];e:{var m=iv.get(e);if(m!==void 0){var h=ac,p=e;switch(e){case"keypress":if(to(n)===0)break e;case"keydown":case"keyup":h=eS;break;case"focusin":p="focus",h=Xc;break;case"focusout":p="blur",h=Xc;break;case"beforeblur":case"afterblur":h=Xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Zh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Vw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=iS;break;case Wy:case ev:case tv:h=Gw;break;case nv:h=aS;break;case"scroll":case"scrollend":h=qw;break;case"wheel":h=lS;break;case"copy":case"cut":case"paste":h=Xw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Wh;break;case"toggle":case"beforetoggle":h=cS}var _=(t&4)!==0,x=!_&&(e==="scroll"||e==="scrollend"),v=_?m!==null?m+"Capture":null:m;_=[];for(var g=u,y;g!==null;){var w=g;if(y=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||y===null||v===null||(w=Ls(g,v),w!=null&&_.push(Ps(g,w,y))),x)break;g=g.return}0<_.length&&(m=new h(m,p,null,n,f),d.push({event:m,listeners:_}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&n!==Qu&&(p=n.relatedTarget||n.fromElement)&&(ca(p)||p[Ya]))break e;if((h||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?ca(p):null,p!==null&&(x=al(p),_=p.tag,p!==x||_!==5&&_!==27&&_!==6)&&(p=null)):(h=null,p=u),h!==p)){if(_=Zh,w="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(_=Wh,w="onPointerLeave",v="onPointerEnter",g="pointer"),x=h==null?m:ys(h),y=p==null?m:ys(p),m=new _(w,g+"leave",h,n,f),m.target=x,m.relatedTarget=y,w=null,ca(f)===u&&(_=new _(v,g+"enter",p,n,f),_.target=y,_.relatedTarget=x,w=_),x=w,h&&p)t:{for(_=ox,v=h,g=p,y=0,w=v;w;w=_(w))y++;w=0;for(var T=g;T;T=_(T))w++;for(;0<y-w;)v=_(v),y--;for(;0<w-y;)g=_(g),w--;for(;y--;){if(v===g||g!==null&&v===g.alternate){_=v;break t}v=_(v),g=_(g)}_=null}else _=null;h!==null&&Im(d,m,h,_,!1),p!==null&&x!==null&&Im(d,x,p,_,!0)}}e:{if(m=u?ys(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var j=im;else if(nm(m))if(Jy)j=bS;else{j=vS;var S=yS}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&of(u.elementType)&&(j=im):j=pS;if(j&&(j=j(e,u))){Xy(d,j,n,f);break e}S&&S(e,m,u),e==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&Ju(m,"number",m.value)}switch(S=u?ys(u):window,e){case"focusin":(nm(S)||S.contentEditable==="true")&&(fa=S,Zu=u,xs=null);break;case"focusout":xs=Zu=fa=null;break;case"mousedown":Fu=!0;break;case"contextmenu":case"mouseup":case"dragend":Fu=!1,om(d,n,f);break;case"selectionchange":if(wS)break;case"keydown":case"keyup":om(d,n,f)}var E;if(ff)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else da?Gy(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Iy&&n.locale!=="ko"&&(da||A!=="onCompositionStart"?A==="onCompositionEnd"&&da&&(E=Yy()):(Gi=f,uf="value"in Gi?Gi.value:Gi.textContent,da=!0)),S=Bo(u,A),0<S.length&&(A=new Fh(A,e,null,n,f),d.push({event:A,listeners:S}),E?A.data=E:(E=Ky(n),E!==null&&(A.data=E)))),(E=dS?fS(e,n):hS(e,n))&&(A=Bo(u,"onBeforeInput"),0<A.length&&(S=new Fh("onBeforeInput","beforeinput",null,n,f),d.push({event:S,listeners:A}),S.data=E)),rx(d,e,u,n,f)}Vp(d,t)})}function Ps(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bo(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,a=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||a===null||(r=Ls(e,n),r!=null&&i.unshift(Ps(e,r,a)),r=Ls(e,t),r!=null&&i.push(Ps(e,r,a))),e.tag===3)return i;e=e.return}return[]}function ox(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Im(e,t,n,i,r){for(var a=t._reactName,s=[];n!==null&&n!==i;){var l=n,o=l.alternate,u=l.stateNode;if(l=l.tag,o!==null&&o===i)break;l!==5&&l!==26&&l!==27||u===null||(o=u,r?(u=Ls(n,a),u!=null&&s.unshift(Ps(n,u,o))):r||(u=Ls(n,a),u!=null&&s.push(Ps(n,u,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var cx=/\r\n?/g,ux=/\u0000|\uFFFD/g;function Gm(e){return(typeof e=="string"?e:""+e).replace(cx,`
`).replace(ux,"")}function Ip(e,t){return t=Gm(t),Gm(e)===t}function nt(e,t,n,i,r,a){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Na(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Na(e,""+i);break;case"className":Cl(e,"class",i);break;case"tabIndex":Cl(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Cl(e,n,i);break;case"style":Ly(e,i,a);break;case"data":if(t!=="object"){Cl(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Wl(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(t!=="input"&&nt(e,t,"name",r.name,r,null),nt(e,t,"formEncType",r.formEncType,r,null),nt(e,t,"formMethod",r.formMethod,r,null),nt(e,t,"formTarget",r.formTarget,r,null)):(nt(e,t,"encType",r.encType,r,null),nt(e,t,"method",r.method,r,null),nt(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Wl(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=wi);break;case"onScroll":i!=null&&Ne("scroll",e);break;case"onScrollEnd":i!=null&&Ne("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(M(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(M(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Wl(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Ne("beforetoggle",e),Ne("toggle",e),Fl(e,"popover",i);break;case"xlinkActuate":fi(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":fi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":fi(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":fi(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":fi(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":fi(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":fi(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":fi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":fi(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Fl(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Hw.get(n)||n,Fl(e,n,i))}}function Sd(e,t,n,i,r,a){switch(n){case"style":Ly(e,i,a);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(M(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(M(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Na(e,i):(typeof i=="number"||typeof i=="bigint")&&Na(e,""+i);break;case"onScroll":i!=null&&Ne("scroll",e);break;case"onScrollEnd":i!=null&&Ne("scrollend",e);break;case"onClick":i!=null&&(e.onclick=wi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uy.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),a=e[vn]||null,a=a!=null?a[n]:null,typeof a=="function"&&e.removeEventListener(t,a,r),typeof i=="function")){typeof a!="function"&&a!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Fl(e,n,i)}}}function en(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",e),Ne("load",e);var i=!1,r=!1,a;for(a in n)if(n.hasOwnProperty(a)){var s=n[a];if(s!=null)switch(a){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(M(137,t));default:nt(e,t,a,s,n,null)}}r&&nt(e,t,"srcSet",n.srcSet,n,null),i&&nt(e,t,"src",n.src,n,null);return;case"input":Ne("invalid",e);var l=a=s=r=null,o=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var f=n[i];if(f!=null)switch(i){case"name":r=f;break;case"type":s=f;break;case"checked":o=f;break;case"defaultChecked":u=f;break;case"value":a=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(M(137,t));break;default:nt(e,t,i,f,n,null)}}Hy(e,a,l,o,u,s,r,!1);return;case"select":Ne("invalid",e),i=s=a=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":a=l;break;case"defaultValue":s=l;break;case"multiple":i=l;default:nt(e,t,r,l,n,null)}t=a,n=s,e.multiple=!!i,t!=null?_a(e,!!i,t,!1):n!=null&&_a(e,!!i,n,!0);return;case"textarea":Ne("invalid",e),a=r=i=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":i=l;break;case"defaultValue":r=l;break;case"children":a=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(M(91));break;default:nt(e,t,s,l,n,null)}qy(e,i,r,a);return;case"option":for(o in n)if(n.hasOwnProperty(o)&&(i=n[o],i!=null))switch(o){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:nt(e,t,o,i,n,null)}return;case"dialog":Ne("beforetoggle",e),Ne("toggle",e),Ne("cancel",e),Ne("close",e);break;case"iframe":case"object":Ne("load",e);break;case"video":case"audio":for(i=0;i<Qs.length;i++)Ne(Qs[i],e);break;case"image":Ne("error",e),Ne("load",e);break;case"details":Ne("toggle",e);break;case"embed":case"source":case"link":Ne("error",e),Ne("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(M(137,t));default:nt(e,t,u,i,n,null)}return;default:if(of(t)){for(f in n)n.hasOwnProperty(f)&&(i=n[f],i!==void 0&&Sd(e,t,f,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&nt(e,t,l,i,n,null))}function dx(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,s=null,l=null,o=null,u=null,f=null;for(h in n){var d=n[h];if(n.hasOwnProperty(h)&&d!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":o=d;default:i.hasOwnProperty(h)||nt(e,t,h,null,i,d)}}for(var m in i){var h=i[m];if(d=n[m],i.hasOwnProperty(m)&&(h!=null||d!=null))switch(m){case"type":a=h;break;case"name":r=h;break;case"checked":u=h;break;case"defaultChecked":f=h;break;case"value":s=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(M(137,t));break;default:h!==d&&nt(e,t,m,h,i,d)}}Xu(e,s,l,o,u,f,a,r);return;case"select":h=s=l=m=null;for(a in n)if(o=n[a],n.hasOwnProperty(a)&&o!=null)switch(a){case"value":break;case"multiple":h=o;default:i.hasOwnProperty(a)||nt(e,t,a,null,i,o)}for(r in i)if(a=i[r],o=n[r],i.hasOwnProperty(r)&&(a!=null||o!=null))switch(r){case"value":m=a;break;case"defaultValue":l=a;break;case"multiple":s=a;default:a!==o&&nt(e,t,r,a,i,o)}t=l,n=s,i=h,m!=null?_a(e,!!n,m,!1):!!i!=!!n&&(t!=null?_a(e,!!n,t,!0):_a(e,!!n,n?[]:"",!1));return;case"textarea":h=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:nt(e,t,l,null,i,r)}for(s in i)if(r=i[s],a=n[s],i.hasOwnProperty(s)&&(r!=null||a!=null))switch(s){case"value":m=r;break;case"defaultValue":h=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(M(91));break;default:r!==a&&nt(e,t,s,r,i,a)}$y(e,m,h);return;case"option":for(var p in n)if(m=n[p],n.hasOwnProperty(p)&&m!=null&&!i.hasOwnProperty(p))switch(p){case"selected":e.selected=!1;break;default:nt(e,t,p,null,i,m)}for(o in i)if(m=i[o],h=n[o],i.hasOwnProperty(o)&&m!==h&&(m!=null||h!=null))switch(o){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:nt(e,t,o,m,i,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _ in n)m=n[_],n.hasOwnProperty(_)&&m!=null&&!i.hasOwnProperty(_)&&nt(e,t,_,null,i,m);for(u in i)if(m=i[u],h=n[u],i.hasOwnProperty(u)&&m!==h&&(m!=null||h!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(M(137,t));break;default:nt(e,t,u,m,i,h)}return;default:if(of(t)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!==void 0&&!i.hasOwnProperty(x)&&Sd(e,t,x,void 0,i,m);for(f in i)m=i[f],h=n[f],!i.hasOwnProperty(f)||m===h||m===void 0&&h===void 0||Sd(e,t,f,m,i,h);return}}for(var v in n)m=n[v],n.hasOwnProperty(v)&&m!=null&&!i.hasOwnProperty(v)&&nt(e,t,v,null,i,m);for(d in i)m=i[d],h=n[d],!i.hasOwnProperty(d)||m===h||m==null&&h==null||nt(e,t,d,m,i,h)}function Km(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var r=n[i],a=r.transferSize,s=r.initiatorType,l=r.duration;if(a&&l&&Km(s)){for(s=0,l=r.responseEnd,i+=1;i<n.length;i++){var o=n[i],u=o.startTime;if(u>l)break;var f=o.transferSize,d=o.initiatorType;f&&Km(d)&&(o=o.responseEnd,s+=f*(o<l?1:(l-u)/(o-u)))}if(--i,t+=8*(a+s)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var xd=null,Td=null;function Ho(e){return e.nodeType===9?e:e.ownerDocument}function Xm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ed(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bu=null;function hx(){var e=window.event;return e&&e.type==="popstate"?e===bu?!1:(bu=e,!0):(bu=null,!1)}var Kp=typeof setTimeout=="function"?setTimeout:void 0,mx=typeof clearTimeout=="function"?clearTimeout:void 0,Jm=typeof Promise=="function"?Promise:void 0,gx=typeof queueMicrotask=="function"?queueMicrotask:typeof Jm<"u"?function(e){return Jm.resolve(null).then(e).catch(yx)}:Kp;function yx(e){setTimeout(function(){throw e})}function cr(e){return e==="head"}function Qm(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(r),$a(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")ks(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,ks(n);for(var a=n.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[cl]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=s}}else n==="body"&&ks(e.ownerDocument.body);n=r}while(n);$a(t)}function Pm(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function jd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":jd(n),lf(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function vx(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[cl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(a=e.getAttribute("rel"),a==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(a!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(a=e.getAttribute("src"),(a!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var a=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===a)return e}else return e;if(e=Xn(e.nextSibling),e===null)break}return null}function px(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Xn(e.nextSibling),e===null))return null;return e}function Xp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Xn(e.nextSibling),e===null))return null;return e}function Od(e){return e.data==="$?"||e.data==="$~"}function Dd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function bx(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ad=null;function Zm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Xn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Fm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Jp(e,t,n){switch(t=Ho(n),e){case"html":if(e=t.documentElement,!e)throw Error(M(452));return e;case"head":if(e=t.head,!e)throw Error(M(453));return e;case"body":if(e=t.body,!e)throw Error(M(454));return e;default:throw Error(M(451))}}function ks(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);lf(e)}var Jn=new Map,Wm=new Set;function $o(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ni=Pe.d;Pe.d={f:_x,r:wx,D:Sx,C:xx,L:Tx,m:Ex,X:Ox,S:jx,M:Dx};function _x(){var e=Ni.f(),t=yc();return e||t}function wx(e){var t=Ia(e);t!==null&&t.tag===5&&t.type==="form"?Lv(t):Ni.r(e)}var Ja=typeof document>"u"?null:document;function Qp(e,t,n){var i=Ja;if(i&&typeof t=="string"&&t){var r=Yn(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Wm.has(r)||(Wm.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),en(t,"link",e),Gt(t),i.head.appendChild(t)))}}function Sx(e){Ni.D(e),Qp("dns-prefetch",e,null)}function xx(e,t){Ni.C(e,t),Qp("preconnect",e,t)}function Tx(e,t,n){Ni.L(e,t,n);var i=Ja;if(i&&e&&t){var r='link[rel="preload"][as="'+Yn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Yn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Yn(n.imageSizes)+'"]')):r+='[href="'+Yn(e)+'"]';var a=r;switch(t){case"style":a=Ha(e);break;case"script":a=Qa(e)}Jn.has(a)||(e=ht({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Jn.set(a,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(gl(a))||t==="script"&&i.querySelector(yl(a))||(t=i.createElement("link"),en(t,"link",e),Gt(t),i.head.appendChild(t)))}}function Ex(e,t){Ni.m(e,t);var n=Ja;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+Yn(i)+'"][href="'+Yn(e)+'"]',a=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Qa(e)}if(!Jn.has(a)&&(e=ht({rel:"modulepreload",href:e},t),Jn.set(a,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(yl(a)))return}i=n.createElement("link"),en(i,"link",e),Gt(i),n.head.appendChild(i)}}}function jx(e,t,n){Ni.S(e,t,n);var i=Ja;if(i&&e){var r=ba(i).hoistableStyles,a=Ha(e);t=t||"default";var s=r.get(a);if(!s){var l={loading:0,preload:null};if(s=i.querySelector(gl(a)))l.loading=5;else{e=ht({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Jn.get(a))&&Kf(e,n);var o=s=i.createElement("link");Gt(o),en(o,"link",e),o._p=new Promise(function(u,f){o.onload=u,o.onerror=f}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,co(s,t,i)}s={type:"stylesheet",instance:s,count:1,state:l},r.set(a,s)}}}function Ox(e,t){Ni.X(e,t);var n=Ja;if(n&&e){var i=ba(n).hoistableScripts,r=Qa(e),a=i.get(r);a||(a=n.querySelector(yl(r)),a||(e=ht({src:e,async:!0},t),(t=Jn.get(r))&&Xf(e,t),a=n.createElement("script"),Gt(a),en(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function Dx(e,t){Ni.M(e,t);var n=Ja;if(n&&e){var i=ba(n).hoistableScripts,r=Qa(e),a=i.get(r);a||(a=n.querySelector(yl(r)),a||(e=ht({src:e,async:!0,type:"module"},t),(t=Jn.get(r))&&Xf(e,t),a=n.createElement("script"),Gt(a),en(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function eg(e,t,n,i){var r=(r=Qi.current)?$o(r):null;if(!r)throw Error(M(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ha(n.href),n=ba(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ha(n.href);var a=ba(r).hoistableStyles,s=a.get(e);if(s||(r=r.ownerDocument||r,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(e,s),(a=r.querySelector(gl(e)))&&!a._p&&(s.instance=a,s.state.loading=5),Jn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Jn.set(e,n),a||Ax(r,e,n,s.state))),t&&i===null)throw Error(M(528,""));return s}if(t&&i!==null)throw Error(M(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Qa(n),n=ba(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(M(444,e))}}function Ha(e){return'href="'+Yn(e)+'"'}function gl(e){return'link[rel="stylesheet"]['+e+"]"}function Pp(e){return ht({},e,{"data-precedence":e.precedence,precedence:null})}function Ax(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),en(t,"link",n),Gt(t),e.head.appendChild(t))}function Qa(e){return'[src="'+Yn(e)+'"]'}function yl(e){return"script[async]"+e}function tg(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+Yn(n.href)+'"]');if(i)return t.instance=i,Gt(i),i;var r=ht({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Gt(i),en(i,"style",r),co(i,n.precedence,e),t.instance=i;case"stylesheet":r=Ha(n.href);var a=e.querySelector(gl(r));if(a)return t.state.loading|=4,t.instance=a,Gt(a),a;i=Pp(n),(r=Jn.get(r))&&Kf(i,r),a=(e.ownerDocument||e).createElement("link"),Gt(a);var s=a;return s._p=new Promise(function(l,o){s.onload=l,s.onerror=o}),en(a,"link",i),t.state.loading|=4,co(a,n.precedence,e),t.instance=a;case"script":return a=Qa(n.src),(r=e.querySelector(yl(a)))?(t.instance=r,Gt(r),r):(i=n,(r=Jn.get(a))&&(i=ht({},n),Xf(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),Gt(r),en(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(M(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,co(i,n.precedence,e));return t.instance}function co(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,a=r,s=0;s<i.length;s++){var l=i[s];if(l.dataset.precedence===t)a=l;else if(a!==r)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Kf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Xf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var uo=null;function ng(e,t,n){if(uo===null){var i=new Map,r=uo=new Map;r.set(n,i)}else r=uo,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var a=n[r];if(!(a[cl]||a[Zt]||e==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var s=a.getAttribute(t)||"";s=e+s;var l=i.get(s);l?l.push(a):i.set(s,[a])}}return i}function ig(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Cx(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Zp(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function Nx(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Ha(i.href),a=t.querySelector(gl(r));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=qo.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,Gt(a);return}a=t.ownerDocument||t,i=Pp(i),(r=Jn.get(r))&&Kf(i,r),a=a.createElement("link"),Gt(a);var s=a;s._p=new Promise(function(l,o){s.onload=l,s.onerror=o}),en(a,"link",i),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=qo.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var _u=0;function Rx(e,t){return e.stylesheets&&e.count===0&&fo(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&fo(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4+t);0<e.imgBytes&&_u===0&&(_u=62500*fx());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&fo(e,e.stylesheets),e.unsuspend)){var a=e.unsuspend;e.unsuspend=null,a()}},(e.imgBytes>_u?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(r)}}:null}function qo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Lo=null;function fo(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Lo=new Map,t.forEach(kx,e),Lo=null,qo.call(e))}function kx(e,t){if(!(t.state.loading&4)){var n=Lo.get(e);if(n)var i=n.get(null);else{n=new Map,Lo.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<r.length;a++){var s=r[a];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),i=s)}i&&n.set(null,i)}r=t.instance,s=r.getAttribute("data-precedence"),a=n.get(s)||i,a===i&&n.set(null,r),n.set(s,r),this.count++,i=qo.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),a?a.parentNode.insertBefore(r,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Zs={$$typeof:_i,Provider:null,Consumer:null,_currentValue:Er,_currentValue2:Er,_threadCount:0};function Mx(e,t,n,i,r,a,s,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yc(0),this.hiddenUpdates=Yc(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Fp(e,t,n,i,r,a,s,l,o,u,f,d){return e=new Mx(e,t,n,s,o,u,f,d,l),t=1,a===!0&&(t|=24),a=Sn(3,null,null,t),e.current=a,a.stateNode=e,t=bf(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:i,isDehydrated:n,cache:t},Sf(a),e}function Wp(e){return e?(e=ga,e):ga}function e0(e,t,n,i,r,a){r=Wp(r),i.context===null?i.context=r:i.pendingContext=r,i=Zi(t),i.payload={element:n},a=a===void 0?null:a,a!==null&&(i.callback=a),n=Fi(e,i,t),n!==null&&(yn(n,e,t),Es(n,e,t))}function rg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Jf(e,t){rg(e,t),(e=e.alternate)&&rg(e,t)}function t0(e){if(e.tag===13||e.tag===31){var t=Lr(e,67108864);t!==null&&yn(t,e,67108864),Jf(e,67108864)}}function ag(e){if(e.tag===13||e.tag===31){var t=An();t=af(t);var n=Lr(e,t);n!==null&&yn(n,e,t),Jf(e,t)}}var Vo=!0;function Ux(e,t,n,i){var r=pe.T;pe.T=null;var a=Pe.p;try{Pe.p=2,Qf(e,t,n,i)}finally{Pe.p=a,pe.T=r}}function zx(e,t,n,i){var r=pe.T;pe.T=null;var a=Pe.p;try{Pe.p=8,Qf(e,t,n,i)}finally{Pe.p=a,pe.T=r}}function Qf(e,t,n,i){if(Vo){var r=Cd(i);if(r===null)pu(e,t,i,Yo,n),sg(e,i);else if(Hx(r,e,t,n,i))i.stopPropagation();else if(sg(e,i),t&4&&-1<Bx.indexOf(e)){for(;r!==null;){var a=Ia(r);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var s=gr(a.pendingLanes);if(s!==0){var l=a;for(l.pendingLanes|=2,l.entangledLanes|=2;s;){var o=1<<31-Dn(s);l.entanglements[1]|=o,s&=~o}ui(a),!(Qe&6)&&(Ro=jn()+500,ml(0))}}break;case 31:case 13:l=Lr(a,2),l!==null&&yn(l,a,2),yc(),Jf(a,2)}if(a=Cd(i),a===null&&pu(e,t,i,Yo,n),a===r)break;r=a}r!==null&&i.stopPropagation()}else pu(e,t,i,null,n)}}function Cd(e){return e=cf(e),Pf(e)}var Yo=null;function Pf(e){if(Yo=null,e=ca(e),e!==null){var t=al(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=wy(t),e!==null)return e;e=null}else if(n===31){if(e=Sy(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Yo=e,null}function n0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sw()){case jy:return 2;case Oy:return 8;case po:case xw:return 32;case Dy:return 268435456;default:return 32}default:return 32}}var Nd=!1,tr=null,nr=null,ir=null,Fs=new Map,Ws=new Map,Vi=[],Bx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sg(e,t){switch(e){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":Fs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ws.delete(t.pointerId)}}function hs(e,t,n,i,r,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},t!==null&&(t=Ia(t),t!==null&&t0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Hx(e,t,n,i,r){switch(t){case"focusin":return tr=hs(tr,e,t,n,i,r),!0;case"dragenter":return nr=hs(nr,e,t,n,i,r),!0;case"mouseover":return ir=hs(ir,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Fs.set(a,hs(Fs.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Ws.set(a,hs(Ws.get(a)||null,e,t,n,i,r)),!0}return!1}function i0(e){var t=ca(e.target);if(t!==null){var n=al(t);if(n!==null){if(t=n.tag,t===13){if(t=wy(n),t!==null){e.blockedOn=t,Ih(e.priority,function(){ag(n)});return}}else if(t===31){if(t=Sy(n),t!==null){e.blockedOn=t,Ih(e.priority,function(){ag(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ho(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Cd(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Qu=i,n.target.dispatchEvent(i),Qu=null}else return t=Ia(n),t!==null&&t0(t),e.blockedOn=n,!1;t.shift()}return!0}function lg(e,t,n){ho(e)&&n.delete(t)}function $x(){Nd=!1,tr!==null&&ho(tr)&&(tr=null),nr!==null&&ho(nr)&&(nr=null),ir!==null&&ho(ir)&&(ir=null),Fs.forEach(lg),Ws.forEach(lg)}function Hl(e,t){e.blockedOn===t&&(e.blockedOn=null,Nd||(Nd=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,$x)))}var $l=null;function og(e){$l!==e&&($l=e,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,function(){$l===e&&($l=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Pf(i||n)===null)continue;break}var a=Ia(n);a!==null&&(e.splice(t,3),t-=3,dd(a,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function $a(e){function t(o){return Hl(o,e)}tr!==null&&Hl(tr,e),nr!==null&&Hl(nr,e),ir!==null&&Hl(ir,e),Fs.forEach(t),Ws.forEach(t);for(var n=0;n<Vi.length;n++){var i=Vi[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Vi.length&&(n=Vi[0],n.blockedOn===null);)i0(n),n.blockedOn===null&&Vi.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],a=n[i+1],s=r[vn]||null;if(typeof a=="function")s||og(n);else if(s){var l=null;if(a&&a.hasAttribute("formAction")){if(r=a,s=a[vn]||null)l=s.formAction;else if(Pf(r)!==null)continue}else l=s.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),og(n)}}}function r0(){function e(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(s){return r=s})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function Zf(e){this._internalRoot=e}bc.prototype.render=Zf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));var n=t.current,i=An();e0(n,i,e,t,null,null)};bc.prototype.unmount=Zf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e0(e.current,2,null,e,null,null),yc(),t[Ya]=null}};function bc(e){this._internalRoot=e}bc.prototype.unstable_scheduleHydration=function(e){if(e){var t=ky();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vi.length&&t!==0&&t<Vi[n].priority;n++);Vi.splice(n,0,e),n===0&&i0(e)}};var cg=by.version;if(cg!=="19.2.0")throw Error(M(527,cg,"19.2.0"));Pe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=gw(t),e=e!==null?xy(e):null,e=e===null?null:e.stateNode,e};var qx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:pe,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{sl=ql.inject(qx),On=ql}catch{}}nc.createRoot=function(e,t){if(!_y(e))throw Error(M(299));var n=!1,i="",r=Qv,a=Pv,s=Zv;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Fp(e,1,!1,null,null,n,i,null,r,a,s,r0),e[Ya]=t.current,Gf(e),new Zf(t)};nc.hydrateRoot=function(e,t,n){if(!_y(e))throw Error(M(299));var i=!1,r="",a=Qv,s=Pv,l=Zv,o=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(o=n.formState)),t=Fp(e,1,!0,t,n??null,i,r,o,a,s,l,r0),t.context=Wp(null),n=t.current,i=An(),i=af(i),r=Zi(i),r.callback=null,Fi(n,r,i),n=i,t.current.lanes=n,ol(t,n),ui(t),e[Ya]=t.current,Gf(e),new bc(t)};nc.version="19.2.0";function a0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a0)}catch(e){console.error(e)}}a0(),fy.exports=nc;var Lx=fy.exports,Rd=function(e,t){return Rd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},Rd(e,t)};function s0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Rd(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Io=function(){return Io=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Io.apply(this,arguments)};function Pa(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function l0(e,t,n,i){var r=arguments.length,a=r<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}function o0(e,t){return function(n,i){t(n,i,e)}}function c0(e,t,n,i,r,a){function s(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var l=i.kind,o=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?i.static?e:e.prototype:null,f=t||(u?Object.getOwnPropertyDescriptor(u,i.name):{}),d,m=!1,h=n.length-1;h>=0;h--){var p={};for(var _ in i)p[_]=_==="access"?{}:i[_];for(var _ in i.access)p.access[_]=i.access[_];p.addInitializer=function(v){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(v||null))};var x=(0,n[h])(l==="accessor"?{get:f.get,set:f.set}:f[o],p);if(l==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(d=s(x.get))&&(f.get=d),(d=s(x.set))&&(f.set=d),(d=s(x.init))&&r.unshift(d)}else(d=s(x))&&(l==="field"?r.unshift(d):f[o]=d)}u&&Object.defineProperty(u,i.name,f),m=!0}function u0(e,t,n){for(var i=arguments.length>2,r=0;r<t.length;r++)n=i?t[r].call(e,n):t[r].call(e);return i?n:void 0}function d0(e){return typeof e=="symbol"?e:"".concat(e)}function f0(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function h0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function se(e,t,n,i){function r(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function l(f){try{u(i.next(f))}catch(d){s(d)}}function o(f){try{u(i.throw(f))}catch(d){s(d)}}function u(f){f.done?a(f.value):r(f.value).then(l,o)}u((i=i.apply(e,t||[])).next())})}function m0(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(u){return function(f){return o([u,f])}}function o(u){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(i=1,r&&(a=u[0]&2?r.return:u[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,u[1])).done)return a;switch(r=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,r=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){n.label=u[1];break}if(u[0]===6&&n.label<a[1]){n.label=a[1],a=u;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(u);break}a[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(f){u=[6,f],r=0}finally{i=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var _c=Object.create?function(e,t,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]};function g0(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&_c(t,e,n)}function Go(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ff(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),r,a=[],s;try{for(;(t===void 0||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(l){s={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return a}function y0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ff(arguments[t]));return e}function v0(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var a=arguments[t],s=0,l=a.length;s<l;s++,r++)i[r]=a[s];return i}function p0(e,t,n){if(n||arguments.length===2)for(var i=0,r=t.length,a;i<r;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}function qa(e){return this instanceof qa?(this.v=e,this):new qa(e)}function b0(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function l(h,p){i[h]&&(r[h]=function(_){return new Promise(function(x,v){a.push([h,_,x,v])>1||o(h,_)})},p&&(r[h]=p(r[h])))}function o(h,p){try{u(i[h](p))}catch(_){m(a[0][3],_)}}function u(h){h.value instanceof qa?Promise.resolve(h.value.v).then(f,d):m(a[0][2],h)}function f(h){o("next",h)}function d(h){o("throw",h)}function m(h,p){h(p),a.shift(),a.length&&o(a[0][0],a[0][1])}}function _0(e){var t,n;return t={},i("next"),i("throw",function(r){throw r}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(r,a){t[r]=e[r]?function(s){return(n=!n)?{value:qa(e[r](s)),done:!1}:a?a(s):s}:a}}function w0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Go=="function"?Go(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=e[a]&&function(s){return new Promise(function(l,o){s=e[a](s),r(l,o,s.done,s.value)})}}function r(a,s,l,o){Promise.resolve(o).then(function(u){a({value:u,done:l})},s)}}function S0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Vx=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},kd=function(e){return kd=Object.getOwnPropertyNames||function(t){var n=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[n.length]=i);return n},kd(e)};function x0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=kd(e),i=0;i<n.length;i++)n[i]!=="default"&&_c(t,e,n[i]);return Vx(t,e),t}function T0(e){return e&&e.__esModule?e:{default:e}}function E0(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)}function j0(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n}function O0(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function D0(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],n&&(r=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");r&&(i=function(){try{r.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:i,async:n})}else n&&e.stack.push({async:!0});return t}var Yx=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var i=new Error(n);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function A0(e){function t(a){e.error=e.hasError?new Yx(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var n,i=0;function r(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(a).then(r,function(s){return t(s),r()})}else i|=1}catch(s){t(s)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return r()}function C0(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,r,a,s){return i?t?".jsx":".js":r&&(!a||!s)?n:r+a+"."+s.toLowerCase()+"js"}):e}const Ix={__extends:s0,__assign:Io,__rest:Pa,__decorate:l0,__param:o0,__esDecorate:c0,__runInitializers:u0,__propKey:d0,__setFunctionName:f0,__metadata:h0,__awaiter:se,__generator:m0,__createBinding:_c,__exportStar:g0,__values:Go,__read:Ff,__spread:y0,__spreadArrays:v0,__spreadArray:p0,__await:qa,__asyncGenerator:b0,__asyncDelegator:_0,__asyncValues:w0,__makeTemplateObject:S0,__importStar:x0,__importDefault:T0,__classPrivateFieldGet:E0,__classPrivateFieldSet:j0,__classPrivateFieldIn:O0,__addDisposableResource:D0,__disposeResources:A0,__rewriteRelativeImportExtension:C0},Gx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:D0,get __assign(){return Io},__asyncDelegator:_0,__asyncGenerator:b0,__asyncValues:w0,__await:qa,__awaiter:se,__classPrivateFieldGet:E0,__classPrivateFieldIn:O0,__classPrivateFieldSet:j0,__createBinding:_c,__decorate:l0,__disposeResources:A0,__esDecorate:c0,__exportStar:g0,__extends:s0,__generator:m0,__importDefault:T0,__importStar:x0,__makeTemplateObject:S0,__metadata:h0,__param:o0,__propKey:d0,__read:Ff,__rest:Pa,__rewriteRelativeImportExtension:C0,__runInitializers:u0,__setFunctionName:f0,__spread:y0,__spreadArray:p0,__spreadArrays:v0,__values:Go,default:Ix},Symbol.toStringTag,{value:"Module"})),Kx="modulepreload",Xx=function(e){return"/todo-note/"+e},ug={},Za=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.allSettled(n.map(o=>{if(o=Xx(o),o in ug)return;ug[o]=!0;const u=o.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Kx,u||(d.as="script"),d.crossOrigin="",d.href=o,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((m,h)=>{d.addEventListener("load",m),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}function a(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return r.then(s=>{for(const l of s||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},Jx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Za(async()=>{const{default:i}=await Promise.resolve().then(()=>Yr);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)};class Wf extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class dg extends Wf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class fg extends Wf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class hg extends Wf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Md;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Md||(Md={}));class Qx{constructor(t,{headers:n={},customFetch:i,region:r=Md.Any}={}){this.url=t,this.headers=n,this.region=r,this.fetch=Jx(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return se(this,arguments,void 0,function*(n,i={}){var r;try{const{headers:a,method:s,body:l,signal:o}=i;let u={},{region:f}=i;f||(f=this.region);const d=new URL(`${this.url}/${n}`);f&&f!=="any"&&(u["x-region"]=f,d.searchParams.set("forceFunctionRegion",f));let m;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;const h=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:m,signal:o}).catch(v=>{throw v.name==="AbortError"?v:new dg(v)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new fg(h);if(!h.ok)throw new hg(h);let _=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return _==="application/json"?x=yield h.json():_==="application/octet-stream"||_==="application/pdf"?x=yield h.blob():_==="text/event-stream"?x=h:_==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new dg(a)}:{data:null,error:a,response:a instanceof hg||a instanceof fg?a.context:void 0}}})}}var on={};const Fa=ny(Gx);var Ll={},Vl={},Yl={},Il={},Gl={},Px=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},La=Px();const Zx=La.fetch,N0=La.fetch.bind(La),R0=La.Headers,Fx=La.Request,Wx=La.Response,Yr=Object.freeze(Object.defineProperty({__proto__:null,Headers:R0,Request:Fx,Response:Wx,default:N0,fetch:Zx},Symbol.toStringTag,{value:"Module"})),e1=ny(Yr);var Kl={},mg;function k0(){if(mg)return Kl;mg=1,Object.defineProperty(Kl,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Kl.default=e,Kl}var gg;function M0(){if(gg)return Gl;gg=1,Object.defineProperty(Gl,"__esModule",{value:!0});const e=Fa,t=e.__importDefault(e1),n=e.__importDefault(k0());class i{constructor(a){var s,l;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(s=a.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=a.signal,this.isMaybeSingle=(l=a.isMaybeSingle)!==null&&l!==void 0?l:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,s){return this.headers=new Headers(this.headers),this.headers.set(a,s),this}then(a,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var f,d,m,h;let p=null,_=null,x=null,v=u.status,g=u.statusText;if(u.ok){if(this.method!=="HEAD"){const j=await u.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?_=j:_=JSON.parse(j))}const w=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),T=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");w&&T&&T.length>1&&(x=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(p={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,x=null,v=406,g="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const w=await u.text();try{p=JSON.parse(w),Array.isArray(p)&&u.status===404&&(_=[],p=null,v=200,g="OK")}catch{u.status===404&&w===""?(v=204,g="No Content"):p={message:w}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,v=200,g="OK"),p&&this.shouldThrowOnError)throw new n.default(p)}return{error:p,data:_,count:x,status:v,statusText:g}});return this.shouldThrowOnError||(o=o.catch(u=>{var f,d,m;return{error:{message:`${(f=u==null?void 0:u.name)!==null&&f!==void 0?f:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(d=u==null?void 0:u.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),o.then(a,s)}returns(){return this}overrideTypes(){return this}}return Gl.default=i,Gl}var yg;function U0(){if(yg)return Il;yg=1,Object.defineProperty(Il,"__esModule",{value:!0});const t=Fa.__importDefault(M0());class n extends t.default{select(r){let a=!1;const s=(r??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:a=!0,nullsFirst:s,foreignTable:l,referencedTable:o=l}={}){const u=o?`${o}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${r}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:a,referencedTable:s=a}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${r}`),this}range(r,a,{foreignTable:s,referencedTable:l=s}={}){const o=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${r}`),this.url.searchParams.set(u,`${a-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:a=!1,settings:s=!1,buffers:l=!1,wal:o=!1,format:u="text"}={}){var f;const d=[r?"analyze":null,a?"verbose":null,s?"settings":null,l?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}}return Il.default=n,Il}var vg;function eh(){if(vg)return Yl;vg=1,Object.defineProperty(Yl,"__esModule",{value:!0});const t=Fa.__importDefault(U0()),n=new RegExp("[,()]");class i extends t.default{eq(a,s){return this.url.searchParams.append(a,`eq.${s}`),this}neq(a,s){return this.url.searchParams.append(a,`neq.${s}`),this}gt(a,s){return this.url.searchParams.append(a,`gt.${s}`),this}gte(a,s){return this.url.searchParams.append(a,`gte.${s}`),this}lt(a,s){return this.url.searchParams.append(a,`lt.${s}`),this}lte(a,s){return this.url.searchParams.append(a,`lte.${s}`),this}like(a,s){return this.url.searchParams.append(a,`like.${s}`),this}likeAllOf(a,s){return this.url.searchParams.append(a,`like(all).{${s.join(",")}}`),this}likeAnyOf(a,s){return this.url.searchParams.append(a,`like(any).{${s.join(",")}}`),this}ilike(a,s){return this.url.searchParams.append(a,`ilike.${s}`),this}ilikeAllOf(a,s){return this.url.searchParams.append(a,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(a,s){return this.url.searchParams.append(a,`ilike(any).{${s.join(",")}}`),this}is(a,s){return this.url.searchParams.append(a,`is.${s}`),this}in(a,s){const l=Array.from(new Set(s)).map(o=>typeof o=="string"&&n.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cs.{${s.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(s)}`),this}containedBy(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cd.{${s.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(s)}`),this}rangeGt(a,s){return this.url.searchParams.append(a,`sr.${s}`),this}rangeGte(a,s){return this.url.searchParams.append(a,`nxl.${s}`),this}rangeLt(a,s){return this.url.searchParams.append(a,`sl.${s}`),this}rangeLte(a,s){return this.url.searchParams.append(a,`nxr.${s}`),this}rangeAdjacent(a,s){return this.url.searchParams.append(a,`adj.${s}`),this}overlaps(a,s){return typeof s=="string"?this.url.searchParams.append(a,`ov.${s}`):this.url.searchParams.append(a,`ov.{${s.join(",")}}`),this}textSearch(a,s,{config:l,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${u}fts${f}.${s}`),this}match(a){return Object.entries(a).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(a,s,l){return this.url.searchParams.append(a,`not.${s}.${l}`),this}or(a,{foreignTable:s,referencedTable:l=s}={}){const o=l?`${l}.or`:"or";return this.url.searchParams.append(o,`(${a})`),this}filter(a,s,l){return this.url.searchParams.append(a,`${s}.${l}`),this}}return Yl.default=i,Yl}var pg;function z0(){if(pg)return Vl;pg=1,Object.defineProperty(Vl,"__esModule",{value:!0});const t=Fa.__importDefault(eh());class n{constructor(r,{headers:a={},schema:s,fetch:l}){this.url=r,this.headers=new Headers(a),this.schema=s,this.fetch=l}select(r,a){const{head:s=!1,count:l}=a??{},o=s?"HEAD":"GET";let u=!1;const f=(r??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",f),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:a,defaultToNull:s=!0}={}){var l;const o="POST";if(a&&this.headers.append("Prefer",`count=${a}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const u=r.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(u.length>0){const f=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(r,{onConflict:a,ignoreDuplicates:s=!1,count:l,defaultToNull:o=!0}={}){var u;const f="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const d=r.reduce((m,h)=>m.concat(Object.keys(h)),[]);if(d.length>0){const m=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(r,{count:a}={}){var s;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:r}={}){var a;const s="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Vl.default=n,Vl}var bg;function t1(){if(bg)return Ll;bg=1,Object.defineProperty(Ll,"__esModule",{value:!0});const e=Fa,t=e.__importDefault(z0()),n=e.__importDefault(eh());class i{constructor(a,{headers:s={},schema:l,fetch:o}={}){this.url=a,this.headers=new Headers(s),this.schemaName=l,this.fetch=o}from(a){const s=new URL(`${this.url}/${a}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new i(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,s={},{head:l=!1,get:o=!1,count:u}={}){var f;let d;const m=new URL(`${this.url}/rpc/${a}`);let h;l||o?(d=l?"HEAD":"GET",Object.entries(s).filter(([_,x])=>x!==void 0).map(([_,x])=>[_,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([_,x])=>{m.searchParams.append(_,x)})):(d="POST",h=s);const p=new Headers(this.headers);return u&&p.set("Prefer",`count=${u}`),new n.default({method:d,url:m,headers:p,schema:this.schemaName,body:h,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Ll.default=i,Ll}Object.defineProperty(on,"__esModule",{value:!0});var B0=on.PostgrestError=X0=on.PostgrestBuilder=G0=on.PostgrestTransformBuilder=Y0=on.PostgrestFilterBuilder=L0=on.PostgrestQueryBuilder=$0=on.PostgrestClient=void 0;const Wa=Fa,H0=Wa.__importDefault(t1());var $0=on.PostgrestClient=H0.default;const q0=Wa.__importDefault(z0());var L0=on.PostgrestQueryBuilder=q0.default;const V0=Wa.__importDefault(eh());var Y0=on.PostgrestFilterBuilder=V0.default;const I0=Wa.__importDefault(U0());var G0=on.PostgrestTransformBuilder=I0.default;const K0=Wa.__importDefault(M0());var X0=on.PostgrestBuilder=K0.default;const J0=Wa.__importDefault(k0());B0=on.PostgrestError=J0.default;var Q0=on.default={PostgrestClient:H0.default,PostgrestQueryBuilder:q0.default,PostgrestFilterBuilder:V0.default,PostgrestTransformBuilder:I0.default,PostgrestBuilder:K0.default,PostgrestError:J0.default};const n1=G_({__proto__:null,get PostgrestBuilder(){return X0},get PostgrestClient(){return $0},get PostgrestError(){return B0},get PostgrestFilterBuilder(){return Y0},get PostgrestQueryBuilder(){return L0},get PostgrestTransformBuilder(){return G0},default:Q0},[on]),{PostgrestClient:i1,PostgrestQueryBuilder:$O,PostgrestFilterBuilder:qO,PostgrestTransformBuilder:LO,PostgrestBuilder:VO,PostgrestError:YO}=Q0||n1;class r1{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,r=parseInt(i.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const i=this.getWebSocketConstructor();return new i(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const a1="2.78.0",s1=`realtime-js/${a1}`,l1="1.0.0",Ud=1e4,o1=1e3,c1=100;var Ms;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ms||(Ms={}));var Bt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Bt||(Bt={}));var ei;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ei||(ei={}));var zd;(function(e){e.websocket="websocket"})(zd||(zd={}));var br;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(br||(br={}));class u1{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,n,i)}_decodeBroadcast(t,n,i){const r=n.getUint8(1),a=n.getUint8(2);let s=this.HEADER_LENGTH+2;const l=i.decode(t.slice(s,s+r));s=s+r;const o=i.decode(t.slice(s,s+a));s=s+a;const u=JSON.parse(i.decode(t.slice(s,t.byteLength)));return{ref:null,topic:l,event:o,payload:u}}}class P0{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var st;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(st||(st={}));const _g=(e,t,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((a,s)=>(a[s]=d1(s,e,t,r),a),{}):{}},d1=(e,t,n,i)=>{const r=t.find(l=>l.name===e),a=r==null?void 0:r.type,s=n[e];return a&&!i.includes(a)?Z0(a,s):Bd(s)},Z0=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return g1(t,n)}switch(e){case st.bool:return f1(t);case st.float4:case st.float8:case st.int2:case st.int4:case st.int8:case st.numeric:case st.oid:return h1(t);case st.json:case st.jsonb:return m1(t);case st.timestamp:return y1(t);case st.abstime:case st.date:case st.daterange:case st.int4range:case st.int8range:case st.money:case st.reltime:case st.text:case st.time:case st.timestamptz:case st.timetz:case st.tsrange:case st.tstzrange:return Bd(t);default:return Bd(t)}},Bd=e=>e,f1=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},h1=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},m1=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},g1=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let a;const s=e.slice(1,n);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(l=>Z0(t,l))}return e},y1=e=>typeof e=="string"?e.replace(" ","T"):e,F0=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class wu{constructor(t,n,i={},r=Ud){this.channel=t,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var wg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(wg||(wg={}));class Us{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:a,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Us.syncState(this.state,r,a,s),this.pendingDiffs.forEach(o=>{this.state=Us.syncDiff(this.state,o,a,s)}),this.pendingDiffs=[],l()}),this.channel._on(i.diff,{},r=>{const{onJoin:a,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Us.syncDiff(this.state,r,a,s),l())}),this.onJoin((r,a,s)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:a,newPresences:s})}),this.onLeave((r,a,s)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,r){const a=this.cloneDeep(t),s=this.transformState(n),l={},o={};return this.map(a,(u,f)=>{s[u]||(o[u]=f)}),this.map(s,(u,f)=>{const d=a[u];if(d){const m=f.map(x=>x.presence_ref),h=d.map(x=>x.presence_ref),p=f.filter(x=>h.indexOf(x.presence_ref)<0),_=d.filter(x=>m.indexOf(x.presence_ref)<0);p.length>0&&(l[u]=p),_.length>0&&(o[u]=_)}else l[u]=f}),this.syncDiff(a,{joins:l,leaves:o},i,r)}static syncDiff(t,n,i,r){const{joins:a,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(a,(l,o)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(o),f.length>0){const d=t[l].map(h=>h.presence_ref),m=f.filter(h=>d.indexOf(h.presence_ref)<0);t[l].unshift(...m)}i(l,f,o)}),this.map(s,(l,o)=>{let u=t[l];if(!u)return;const f=o.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[l]=u,r(l,u,o),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const r=t[i];return"metas"in r?n[i]=r.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[i]=r,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Sg||(Sg={}));var zs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zs||(zs={}));var vi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(vi||(vi={}));class th{constructor(t,n={config:{}},i){var r,a;if(this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new wu(this,ei.join,this.params,this.timeout),this.rejoinTimer=new P0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ei.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new Us(this),this.broadcastEndpointURL=F0(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var i,r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:s,presence:l,private:o}}=this.params,u=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(h=>h.filter))!==null&&r!==void 0?r:[],f=!!this.bindings[zs.PRESENCE]&&this.bindings[zs.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,d={},m={broadcast:s,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:u,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(vi.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(vi.CLOSED)),this.updateJoinPayload(Object.assign({config:m},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){t==null||t(vi.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,x=(p=_==null?void 0:_.length)!==null&&p!==void 0?p:0,v=[];for(let g=0;g<x;g++){const y=_[g],{filter:{event:w,schema:T,table:j,filter:S}}=y,E=h&&h[g];if(E&&E.event===w&&E.schema===T&&E.table===j&&E.filter===S)v.push(Object.assign(Object.assign({},y),{id:E.id}));else{this.unsubscribe(),this.state=Bt.errored,t==null||t(vi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(vi.SUBSCRIBED);return}}).receive("error",h=>{this.state=Bt.errored,t==null||t(vi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(vi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this.state===Bt.joined&&t===zs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,i)}async httpSend(t,n,i={}){var r;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);if(l.status===202)return{success:!0};let o=l.statusText;try{const u=await l.json();o=u.error||u.message||o}catch{}return Promise.reject(new Error(o))}async send(t,n={}){var i,r;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=t,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,l,o;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((o=(l=(s=this.params)===null||s===void 0?void 0:s.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Bt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ei.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new wu(this,ei.leave,{},t),i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(t,n,i){const r=new AbortController,a=setTimeout(()=>r.abort(),i),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(a),s}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new wu(this,t,n,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>c1){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var r,a;const s=t.toLocaleLowerCase(),{close:l,error:o,leave:u,join:f}=ei;if(i&&[l,o,u,f].indexOf(s)>=0&&i!==this._joinRef())return;let m=this._onMessage(s,n,i);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(h=>{var p,_,x;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((x=(_=h.filter)===null||_===void 0?void 0:_.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(h=>h.callback(m,i)):(a=this.bindings[s])===null||a===void 0||a.filter(h=>{var p,_,x,v,g,y;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const w=h.id,T=(p=h.filter)===null||p===void 0?void 0:p.event;return w&&((_=n.ids)===null||_===void 0?void 0:_.includes(w))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const w=(g=(v=h==null?void 0:h.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return w==="*"||w===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:_,table:x,commit_timestamp:v,type:g,errors:y}=p;m=Object.assign(Object.assign({},{schema:_,table:x,commit_timestamp:v,eventType:g,new:{},old:{},errors:y}),this._getPayloadRecords(p))}h.callback(m,i)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const r=t.toLocaleLowerCase(),a={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var a;return!(((a=r.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===i&&th.isEqual(r.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ei.close,{},t)}_onError(t){this._on(ei.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=_g(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=_g(t.columns,t.old_record)),n}}const Su=()=>{},Xl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},v1=[1e3,2e3,5e3,1e4],p1=1e4,b1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _1{constructor(t,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ud,this.transport=null,this.heartbeatIntervalMs=Xl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Su,this.ref=0,this.reconnectTimer=null,this.logger=Su,this.conn=null,this.sendBuffer=[],this.serializer=new u1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let a;return r?a=r:typeof fetch>"u"?a=(...s)=>Za(async()=>{const{default:l}=await Promise.resolve().then(()=>Yr);return{default:l}},void 0).then(({default:l})=>l(...s)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...s)=>a(...s)},!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${zd.websocket}`,this.httpEndpoint=F0(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=r1.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:l1}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ms.connecting:return br.Connecting;case Ms.open:return br.Open;case Ms.closing:return br.Closing;default:return br.Closed}}isConnected(){return this.connectionState()===br.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const i=`realtime:${t}`,r=this.getChannels().find(a=>a.topic===i);if(r)return r;{const a=new th(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:i,payload:r,ref:a}=t,s=()=>{this.encode(t,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${n} ${i} (${a})`,r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(o1,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Xl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:r,payload:a,ref:s}=n,l=s?`(${s})`:"",o=a.status||"";this.log("receive",`${o} ${i} ${r} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(i)).forEach(u=>u._trigger(r,a,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ei.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${t}${i}${r}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([b1],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const r={access_token:n,version:s1};n&&i.updateJoinPayload(r),i.joinedOnce&&i._isJoined()&&i._push(ei.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(n)}catch(r){this.log("error",`error in ${t} callback`,r)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new P0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,i,r,a,s,l,o,u,f;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:Ud,this.heartbeatIntervalMs=(r=t==null?void 0:t.heartbeatIntervalMs)!==null&&r!==void 0?r:Xl.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Su,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=t==null?void 0:t.reconnectAfterMs)!==null&&o!==void 0?o:d=>v1[d-1]||p1,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(d,m)=>m(JSON.stringify(d)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class nh extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function _t(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class w1 extends nh{constructor(t,n,i){super(t),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Hd extends nh{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const ih=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Za(async()=>{const{default:i}=await Promise.resolve().then(()=>Yr);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},S1=()=>se(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Za(()=>Promise.resolve().then(()=>Yr),void 0)).Response:Response}),$d=e=>{if(Array.isArray(e))return e.map(n=>$d(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const r=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[r]=$d(i)}),t},x1=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},xu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},T1=(e,t,n)=>se(void 0,void 0,void 0,function*(){const i=yield S1();e instanceof i&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const a=e.status||500,s=(r==null?void 0:r.statusCode)||a+"";t(new w1(xu(r),a,s))}).catch(r=>{t(new Hd(xu(r),r))}):t(new Hd(xu(e),e))}),E1=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!i?r:(x1(i)?(r.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r.body=JSON.stringify(i)):r.body=i,t!=null&&t.duplex&&(r.duplex=t.duplex),Object.assign(Object.assign({},r),n))};function vl(e,t,n,i,r,a){return se(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(n,E1(t,i,r,a)).then(o=>{if(!o.ok)throw o;return i!=null&&i.noResolveJson?o:o.json()}).then(o=>s(o)).catch(o=>T1(o,l,i))})})}function el(e,t,n,i){return se(this,void 0,void 0,function*(){return vl(e,"GET",t,n,i)})}function Fn(e,t,n,i,r){return se(this,void 0,void 0,function*(){return vl(e,"POST",t,i,r,n)})}function qd(e,t,n,i,r){return se(this,void 0,void 0,function*(){return vl(e,"PUT",t,i,r,n)})}function j1(e,t,n,i){return se(this,void 0,void 0,function*(){return vl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function rh(e,t,n,i,r){return se(this,void 0,void 0,function*(){return vl(e,"DELETE",t,i,r,n)})}class O1{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return se(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_t(t))return{data:null,error:t};throw t}})}}var W0;class D1{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[W0]="BlobDownloadBuilder",this.promise=null}asStream(){return new O1(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return se(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(_t(t))return{data:null,error:t};throw t}})}}W0=Symbol.toStringTag;const A1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class C1{constructor(t,n={},i,r){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=i,this.fetch=ih(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,i,r){return se(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},xg),r);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const o=s.metadata;typeof Blob<"u"&&i instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o)),a.append("",i)):typeof FormData<"u"&&i instanceof FormData?(a=i,a.append("cacheControl",s.cacheControl),o&&a.append("metadata",this.encodeMetadata(o))):(a=i,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,o&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),d=yield(t=="PUT"?qd:Fn)(this.fetch,`${this.url}/object/${f}`,a,Object.assign({headers:l},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_t(a))return{data:null,error:a};throw a}})}upload(t,n,i){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,r){return se(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),s=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",n);try{let o;const u=Object.assign({upsert:xg.upsert},r),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.append("cacheControl",u.cacheControl)):(o=i,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield qd(this.fetch,l.toString(),o,{headers:f});return{data:{path:a,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(_t(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(t,n){return se(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const r=Object.assign({},this.headers);n!=null&&n.upsert&&(r["x-upsert"]="true");const a=yield Fn(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),s=new URL(this.url+a.url),l=s.searchParams.get("token");if(!l)throw new nh("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:l},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_t(i))return{data:null,error:i};throw i}})}update(t,n,i){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return se(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_t(r))return{data:null,error:r};throw r}})}copy(t,n,i){return se(this,void 0,void 0,function*(){try{return{data:{path:(yield Fn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_t(r))return{data:null,error:r};throw r}})}createSignedUrl(t,n,i){return se(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),a=yield Fn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_t(r))return{data:null,error:r};throw r}})}createSignedUrls(t,n,i){return se(this,void 0,void 0,function*(){try{const r=yield Fn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_t(r))return{data:null,error:r};throw r}})}download(t,n){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=a?`?${a}`:"",l=this._getFinalPath(t),o=()=>el(this.fetch,`${this.url}/${r}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new D1(o,this.shouldThrowOnError)}info(t){return se(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield el(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:$d(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_t(i))return{data:null,error:i};throw i}})}exists(t){return se(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield j1(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_t(i)&&i instanceof Hd){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),r=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&r.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&r.push(o);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${i}${u}`)}}}remove(t){return se(this,void 0,void 0,function*(){try{return{data:yield rh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}list(t,n,i){return se(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},A1),n),{prefix:t||""});return{data:yield Fn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_t(r))return{data:null,error:r};throw r}})}listV2(t,n){return se(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield Fn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_t(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const eb="2.78.0",tb={"X-Client-Info":`storage-js/${eb}`};class N1{constructor(t,n={},i,r){this.shouldThrowOnError=!1;const a=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tb),n),this.fetch=ih(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return se(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield el(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}getBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield el(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}createBucket(t){return se(this,arguments,void 0,function*(n,i={public:!1}){try{return{data:yield Fn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_t(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return se(this,void 0,void 0,function*(){try{return{data:yield qd(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_t(i))return{data:null,error:i};throw i}})}emptyBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}deleteBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield rh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class R1{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tb),n),this.fetch=ih(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield Fn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}listBuckets(t){return se(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const i=n.toString(),r=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield el(this.fetch,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}deleteBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield rh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}})}}const ah={"X-Client-Info":`storage-js/${eb}`,"Content-Type":"application/json"};class nb extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function xn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Tu extends nb{constructor(t,n,i){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class k1 extends nb{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Tg;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Tg||(Tg={}));const sh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Za(async()=>{const{default:i}=await Promise.resolve().then(()=>Yr);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},M1=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Eg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),U1=(e,t,n)=>se(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,a=e;if(typeof a.json=="function")a.json().then(s=>{const l=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";t(new Tu(Eg(s),r,l))}).catch(()=>{const s=r+"",l=a.statusText||`HTTP ${r} error`;t(new Tu(l,r,s))});else{const s=r+"",l=a.statusText||`HTTP ${r} error`;t(new Tu(l,r,s))}}else t(new k1(Eg(e),e))}),z1=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return i?(M1(i)?(r.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r.body=JSON.stringify(i)):r.body=i,Object.assign(Object.assign({},r),n)):r};function B1(e,t,n,i,r,a){return se(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(n,z1(t,i,r,a)).then(o=>{if(!o.ok)throw o;if(i!=null&&i.noResolveJson)return o;const u=o.headers.get("content-type");return!u||!u.includes("application/json")?{}:o.json()}).then(o=>s(o)).catch(o=>U1(o,l,i))})})}function Tn(e,t,n,i,r){return se(this,void 0,void 0,function*(){return B1(e,"POST",t,i,r,n)})}class H1{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ah),n),this.fetch=sh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return se(this,void 0,void 0,function*(){try{return{data:(yield Tn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}getIndex(t,n){return se(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xn(i))return{data:null,error:i};throw i}})}listIndexes(t){return se(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return se(this,void 0,void 0,function*(){try{return{data:(yield Tn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(xn(i))return{data:null,error:i};throw i}})}}class $1{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ah),n),this.fetch=sh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return se(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Tn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}getVectors(t){return se(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}listVectors(t){return se(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Tn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}queryVectors(t){return se(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}deleteVectors(t){return se(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Tn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}}class q1{constructor(t,n={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ah),n),this.fetch=sh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return se(this,void 0,void 0,function*(){try{return{data:(yield Tn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}getBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield Tn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}listBuckets(){return se(this,arguments,void 0,function*(t={}){try{return{data:yield Tn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return se(this,void 0,void 0,function*(){try{return{data:(yield Tn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}})}}class L1 extends q1{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new V1(this.url,this.headers,t,this.fetch)}}class V1 extends H1{constructor(t,n,i,r){super(t,n,r),this.vectorBucketName=i}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return se(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return se(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return se(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return se(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Y1(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class Y1 extends $1{constructor(t,n,i,r,a){super(t,n,a),this.vectorBucketName=i,this.indexName=r}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return se(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return se(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return se(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return se(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return se(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class I1 extends N1{constructor(t,n={},i,r){super(t,n,i,r)}from(t){return new C1(this.url,this.headers,t,this.fetch)}get vectors(){return new L1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new R1(this.url+"/iceberg",this.headers,this.fetch)}}const G1="2.78.0";let bs="";typeof Deno<"u"?bs="deno":typeof document<"u"?bs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bs="react-native":bs="node";const K1={"X-Client-Info":`supabase-js-${bs}/${G1}`},X1={headers:K1},J1={schema:"public"},Q1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},P1={},Z1=e=>{let t;return e?t=e:typeof fetch>"u"?t=N0:t=fetch,(...n)=>t(...n)},F1=()=>typeof Headers>"u"?R0:Headers,W1=(e,t,n)=>{const i=Z1(n),r=F1();return async(a,s)=>{var l;const o=(l=await t())!==null&&l!==void 0?l:e;let u=new r(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${o}`),i(a,Object.assign(Object.assign({},s),{headers:u}))}};function eT(e){return e.endsWith("/")?e:e+"/"}function tT(e,t){var n,i;const{db:r,auth:a,realtime:s,global:l}=e,{db:o,auth:u,realtime:f,global:d}=t,m={db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},f),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(i=l==null?void 0:l.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function nT(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(eT(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ib="2.78.0",ra=30*1e3,Ld=3,Eu=Ld*ra,iT="http://localhost:9999",rT="supabase.auth.token",aT={"X-Client-Info":`gotrue-js/${ib}`},Vd="X-Supabase-Api-Version",rb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},sT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,lT=10*60*1e3;class tl extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class oT extends tl{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function cT(e){return ue(e)&&e.name==="AuthApiError"}class _r extends tl{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ur extends tl{constructor(t,n,i,r){super(t,i,r),this.name=n,this.status=i}}class Pn extends ur{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uT(e){return ue(e)&&e.name==="AuthSessionMissingError"}class Pr extends ur{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Jl extends ur{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ql extends ur{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dT(e){return ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class jg extends ur{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yd extends ur{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ju(e){return ue(e)&&e.name==="AuthRetryableFetchError"}class Og extends ur{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Id extends ur{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ko="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Dg=` 	
\r=`.split(""),fT=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Dg.length;t+=1)e[Dg[t].charCodeAt(0)]=-2;for(let t=0;t<Ko.length;t+=1)e[Ko[t].charCodeAt(0)]=t;return e})();function Ag(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Ko[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Ko[i]),t.queuedBits-=6}}function ab(e,t,n){const i=fT[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Cg(e){const t=[],n=s=>{t.push(String.fromCodePoint(s))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},a=s=>{gT(s,i,n)};for(let s=0;s<e.length;s+=1)ab(e.charCodeAt(s),r,a);return t.join("")}function hT(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function mT(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}hT(i,t)}}function gT(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if(!(e>>7-i&1)){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ja(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};for(let r=0;r<e.length;r+=1)ab(e.charCodeAt(r),n,i);return new Uint8Array(t)}function yT(e){const t=[];return mT(e,n=>t.push(n)),new Uint8Array(t)}function Tr(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};return e.forEach(r=>Ag(r,n,i)),Ag(null,n,i),t.join("")}function vT(e){return Math.round(Date.now()/1e3)+e}function pT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const sn=()=>typeof window<"u"&&typeof document<"u",fr={tested:!1,writable:!1},sb=()=>{if(!sn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fr.tested)return fr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fr.tested=!0,fr.writable=!0}catch{fr.tested=!0,fr.writable=!1}return fr.writable};function bT(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,a)=>{t[a]=r})}catch{}return n.searchParams.forEach((i,r)=>{t[r]=i}),t}const lb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Za(async()=>{const{default:i}=await Promise.resolve().then(()=>Yr);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},_T=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",aa=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},hr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Mi=async(e,t)=>{await e.removeItem(t)};class wc{constructor(){this.promise=new wc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}wc.promiseConstructor=Promise;function Ou(e){const t=e.split(".");if(t.length!==3)throw new Id("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!sT.test(t[i]))throw new Id("JWT not in base64url format");return{header:JSON.parse(Cg(t[0])),payload:JSON.parse(Cg(t[1])),signature:ja(t[2]),raw:{header:t[0],payload:t[1]}}}async function wT(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ST(e,t){return new Promise((i,r)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await e(a);if(!t(a,null,s)){i(s);return}}catch(s){if(!t(a,s)){r(s);return}}})()})}function xT(e){return("0"+e.toString(16)).substr(-2)}function TT(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let a=0;a<56;a++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(t),Array.from(t,xT).join("")}async function ET(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(a=>String.fromCharCode(a)).join("")}async function jT(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await ET(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zr(e,t,n=!1){const i=TT();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await aa(e,`${t}-code-verifier`,r);const a=await jT(i);return[a,i===a?"plain":"s256"]}const OT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function DT(e){const t=e.headers.get(Vd);if(!t||!t.match(OT))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function AT(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function CT(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const NT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fr(e){if(!NT.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Du(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function RT(e,t){return new Proxy(e,{get:(n,i,r)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const a=i.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,r)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,i,r)}})}function Ng(e){return JSON.parse(JSON.stringify(e))}const pr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),kT=[502,503,504];async function Rg(e){var t;if(!_T(e))throw new Yd(pr(e),0);if(kT.includes(e.status))throw new Yd(pr(e),e.status);let n;try{n=await e.json()}catch(a){throw new _r(pr(a),a)}let i;const r=DT(e);if(r&&r.getTime()>=rb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Og(pr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Pn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new Og(pr(n),e.status,n.weak_password.reasons);throw new oT(pr(n),e.status||500,i)}const MT=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function ve(e,t,n,i){var r;const a=Object.assign({},i==null?void 0:i.headers);a[Vd]||(a[Vd]=rb["2024-01-01"].name),i!=null&&i.jwt&&(a.Authorization=`Bearer ${i.jwt}`);const s=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(s.redirect_to=i.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",o=await UT(e,t,n+l,{headers:a,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(o):{data:Object.assign({},o),error:null}}async function UT(e,t,n,i,r,a){const s=MT(t,i,r,a);let l;try{l=await e(n,Object.assign({},s))}catch(o){throw console.error(o),new Yd(pr(o),0)}if(l.ok||await Rg(l),i!=null&&i.noResolveJson)return l;try{return await l.json()}catch(o){await Rg(o)}}function Zn(e){var t;let n=null;HT(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=vT(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function kg(e){const t=Zn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Yi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function zT(e){return{data:e,error:null}}function BT(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:a}=e,s=Pa(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:a},o=Object.assign({},s);return{data:{properties:l,user:o},error:null}}function Mg(e){return e}function HT(e){return e.access_token&&e.refresh_token&&e.expires_in}const Au=["global","local","others"];class $T{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=lb(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Au[0]){if(Au.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Au.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Yi})}catch(i){if(ue(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=Pa(t,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:BT,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Yi})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,r,a,s,l,o;try{const u={nextPage:null,lastPage:0,total:0},f=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:Mg});if(f.error)throw f.error;const d=await f.json(),m=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(o=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return h.length>0&&(h.forEach(p=>{const _=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);u[`${x}Page`]=_}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ue(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Fr(t);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Yi})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Fr(t);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Yi})}catch(i){if(ue(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){Fr(t);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Yi})}catch(i){if(ue(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){Fr(t.userId);try{const{data:n,error:i}=await ve(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Fr(t.userId),Fr(t.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,i,r,a,s,l,o;try{const u={nextPage:null,lastPage:0,total:0},f=await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:Mg});if(f.error)throw f.error;const d=await f.json(),m=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(o=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return h.length>0&&(h.forEach(p=>{const _=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);u[`${x}Page`]=_}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ue(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await ve(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}}function Ug(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Wr={debug:!!(globalThis&&sb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ob extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class qT extends ob{}async function LT(e,t,n){Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(t===0)throw Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new qT(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Wr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function VT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function cb(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function YT(e){return parseInt(e,16)}function IT(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function GT(e){var t;const{chainId:n,domain:i,expirationTime:r,issuedAt:a=new Date,nonce:s,notBefore:l,requestId:o,resources:u,scheme:f,uri:d,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const h=cb(e.address),p=f?`${f}://${i}`:i,_=e.statement?`${e.statement}
`:"",x=`${p} wants you to sign in with your Ethereum account:
${h}

${_}`;let v=`URI: ${d}
Version: ${m}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(r&&(v+=`
Expiration Time: ${r.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),o&&(v+=`
Request ID: ${o}`),u){let g=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);g+=`
- ${y}`}v+=g}return`${x}
${v}`}class At extends Error{constructor({message:t,code:n,cause:i,name:r}){var a;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(a=r??(i instanceof Error?i.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Xo extends At{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function KT({error:e,options:t}){var n,i,r;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new At({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new At({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new At({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new At({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new At({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new At({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new At({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new At({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(ub(s)){if(a.rp.id!==s)return new At({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new At({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new At({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new At({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new At({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function XT({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new At({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new At({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(ub(i)){if(n.rpId!==i)return new At({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new At({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new At({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new At({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class JT{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const QT=new JT;function PT(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:i}=e,r=Pa(e,["challenge","user","excludeCredentials"]),a=ja(t).buffer,s=Object.assign(Object.assign({},n),{id:ja(n.id).buffer}),l=Object.assign(Object.assign({},r),{challenge:a,user:s});if(i&&i.length>0){l.excludeCredentials=new Array(i.length);for(let o=0;o<i.length;o++){const u=i[o];l.excludeCredentials[o]=Object.assign(Object.assign({},u),{id:ja(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function ZT(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,i=Pa(e,["challenge","allowCredentials"]),r=ja(t).buffer,a=Object.assign(Object.assign({},i),{challenge:r});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const l=n[s];a.allowCredentials[s]=Object.assign(Object.assign({},l),{id:ja(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function FT(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Tr(new Uint8Array(e.response.attestationObject)),clientDataJSON:Tr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function WT(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,i=e.getClientExtensionResults(),r=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Tr(new Uint8Array(r.authenticatorData)),clientDataJSON:Tr(new Uint8Array(r.clientDataJSON)),signature:Tr(new Uint8Array(r.signature)),userHandle:r.userHandle?Tr(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ub(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function zg(){var e,t;return!!(sn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function eE(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Xo("Browser returned unexpected credential type",t)}:{data:null,error:new Xo("Empty credential response",t)}}catch(t){return{data:null,error:KT({error:t,options:e})}}}async function tE(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Xo("Browser returned unexpected credential type",t)}:{data:null,error:new Xo("Empty credential response",t)}}catch(t){return{data:null,error:XT({error:t,options:e})}}}const nE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},iE={userVerification:"preferred",hints:["security-key"]};function Jo(...e){const t=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),i={};for(const r of e)if(r)for(const a in r){const s=r[a];if(s!==void 0)if(Array.isArray(s))i[a]=s;else if(n(s))i[a]=s;else if(t(s)){const l=i[a];t(l)?i[a]=Jo(l,s):i[a]=Jo(s)}else i[a]=s}return i}function rE(e,t){return Jo(nE,e,t||{})}function aE(e,t){return Jo(iE,e,t||{})}class sE{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:i,signal:r},a){try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!s)return{data:null,error:l};const o=r??QT.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${i}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=rE(s.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:f,error:d}=await eE({publicKey:u,signal:o});return f?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}case"request":{const u=aE(s.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:f,error:d}=await tE(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:o}));return f?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}}}catch(s){return ue(s)?{data:null,error:s}:{data:null,error:new _r("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}},a){if(!n)return{data:null,error:new tl("rpId is required for WebAuthn authentication")};try{if(!zg())return{data:null,error:new _r("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:i},signal:r},{request:a});if(!s)return{data:null,error:l};const{webauthn:o}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:o.type,rpId:n,rpOrigins:i,credential_response:o.credential_response}})}catch(s){return ue(s)?{data:null,error:s}:{data:null,error:new _r("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r},a){if(!n)return{data:null,error:new tl("rpId is required for WebAuthn registration")};try{if(!zg())return{data:null,error:new _r("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(f=>{var d;return(d=f.data)===null||d===void 0?void 0:d.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:l};const{data:o,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:r},{create:a});return o?this._verify({factorId:s.id,challengeId:o.challengeId,webauthn:{rpId:n,rpOrigins:i,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:u}}catch(s){return ue(s)?{data:null,error:s}:{data:null,error:new _r("Unexpected error in register",s)}}}}VT();const lE={url:iT,storageKey:rT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Bg(e,t,n){return await n()}const ea={};class nl{get jwks(){var t,n;return(n=(t=ea[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ea[this.storageKey]=Object.assign(Object.assign({},ea[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ea[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ea[this.storageKey]=Object.assign(Object.assign({},ea[this.storageKey]),{cachedAt:t})}constructor(t){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=nl.nextInstanceID,nl.nextInstanceID+=1,this.instanceID>0&&sn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},lE),t);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new $T({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=lb(r.fetch),this.lock=r.lock||Bg,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:sn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=LT:this.lock=Bg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new sE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:sb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ug(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=Ug(this.memoryStorage)),sn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ib}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=bT(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),sn()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:a}=await this._getSessionFromURL(n,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),dT(a)){const o=(t=a.details)===null||t===void 0?void 0:t.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",l),await this._saveSession(s),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ue(n)?{error:n}:{error:new _r("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,r;try{const a=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:Zn}),{data:s,error:l}=a;if(l||!s)return{data:{user:null,session:null},error:l};const o=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(a){if(ue(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var n,i,r;try{let a;if("email"in t){const{email:f,password:d,options:m}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Zr(this.storage,this.storageKey)),a=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:f,password:d,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:h,code_challenge_method:p},xform:Zn})}else if("phone"in t){const{phone:f,password:d,options:m}=t;a=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(i=m==null?void 0:m.data)!==null&&i!==void 0?i:{},channel:(r=m==null?void 0:m.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Zn})}else throw new Jl("You must provide either an email or phone number and a password");const{data:s,error:l}=a;if(l||!s)return{data:{user:null,session:null},error:l};const o=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(a){if(ue(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:s,options:l}=t;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:kg})}else if("phone"in t){const{phone:a,password:s,options:l}=t;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:kg})}else throw new Jl("You must provide either an email or phone number and a password");const{data:i,error:r}=n;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Pr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,i,r,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,i,r,a,s,l,o,u,f,d,m;let h,p;if("message"in t)h=t.message,p=t.signature;else{const{chain:_,wallet:x,statement:v,options:g}=t;let y;if(sn())if(typeof x=="object")y=x;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")y=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=x}const w=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),T=await y.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=cb(T[0]);let S=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!S){const A=await y.request({method:"eth_chainId"});S=YT(A)}const E={domain:w.host,address:j,statement:v,uri:w.href,version:"1",chainId:S,nonce:(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(s=(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=g==null?void 0:g.signInWithEthereum)===null||f===void 0?void 0:f.resources};h=GT(E),p=await y.request({method:"personal_sign",params:[IT(h),j]})}try{const{data:_,error:x}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:p},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Zn});if(x)throw x;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Pr}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:x})}catch(_){if(ue(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(t){var n,i,r,a,s,l,o,u,f,d,m,h;let p,_;if("message"in t)p=t.message,_=t.signature;else{const{chain:x,wallet:v,statement:g,options:y}=t;let w;if(sn())if(typeof v=="object")w=v;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))w=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const T=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const j=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),g?{statement:g}:null));let S;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")S=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)S=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),_=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${T.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(r=(i=y==null?void 0:y.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((s=y==null?void 0:y.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((d=(f=y==null?void 0:y.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...y.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const j=await w.signMessage(new TextEncoder().encode(p),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=j}}try{const{data:x,error:v}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Tr(_)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Zn});if(v)throw v;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Pr}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:v})}catch(x){if(ue(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await hr(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(n??"").split("/");try{const{data:a,error:s}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Zn});if(await Mi(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Pr}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:r??null}),error:s})}catch(a){if(ue(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:n,provider:i,token:r,access_token:a,nonce:s}=t,l=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Zn}),{data:o,error:u}=l;return u?{data:{user:null,session:null},error:u}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new Pr}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:u})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,i,r,a,s;try{if("email"in t){const{email:l,options:o}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await Zr(this.storage,this.storageKey));const{error:d}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:o}=t,{data:u,error:f}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=o==null?void 0:o.data)!==null&&r!==void 0?r:{},create_user:(a=o==null?void 0:o.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(s=o==null?void 0:o.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new Jl("You must provide either an email or phone number.")}catch(l){if(ue(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,i;try{let r,a;"options"in t&&(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:s,error:l}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:Zn});if(l)throw l;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,u=s.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(t){var n,i,r;try{let a=null,s=null;return this.flowType==="pkce"&&([a,s]=await Zr(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:zT})}catch(a){if(ue(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new Pn;const{error:r}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(t){if(ue(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:r,options:a}=t,{error:s}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in t){const{phone:i,type:r,options:a}=t,{data:s,error:l}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:l}}throw new Jl("You must provide either an email or phone number and a type")}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await hr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<Eu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const s=await hr(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=Du()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=RT(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:r,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Yi}):await this._useSession(async n=>{var i,r,a;const{data:s,error:l}=n;if(l)throw l;return!(!((i=s.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pn}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0,xform:Yi})})}catch(n){if(ue(n))return uT(n)&&(await this._removeSession(),await Mi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:r,error:a}=i;if(a)throw a;if(!r.session)throw new Pn;const s=r.session;let l=null,o=null;this.flowType==="pkce"&&t.email!=null&&([l,o]=await Zr(this.storage,this.storageKey));const{data:u,error:f}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:o}),jwt:s.access_token,xform:Yi});if(f)throw f;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(i){if(ue(i))return{data:{user:null},error:i};throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Pn;const n=Date.now()/1e3;let i=n,r=!0,a=null;const{payload:s}=Ou(t.access_token);if(s.exp&&(i=s.exp,r=i<=n),r){const{data:l,error:o}=await this._callRefreshToken(t.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:o}=await this._getUser(t.access_token);if(o)throw o;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(ue(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:s,error:l}=n;if(l)throw l;t=(i=s.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new Pn;const{data:r,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!sn())throw new Ql("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ql(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new jg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ql("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new jg("No code detected.");const{data:g,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:a,refresh_token:s,expires_in:l,expires_at:o,token_type:u}=t;if(!a||!l||!s||!u)throw new Ql("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let m=f+d;o&&(m=parseInt(o));const h=m-f;h*1e3<=ra&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=m-d;f-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,f):f-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,m,f);const{data:_,error:x}=await this._getUser(a);if(x)throw x;const v={provider_token:i,provider_refresh_token:r,access_token:a,expires_in:d,expires_at:m,refresh_token:s,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(i){if(ue(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await hr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:a}=n;if(a)return{error:a};const s=(i=r.session)===null||i===void 0?void 0:i.access_token;if(s){const{error:l}=await this.admin.signOut(s,t);if(l&&!(cT(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Mi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=pT(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,r;try{const{data:{session:a},error:s}=n;if(s)throw s;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await Zr(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(ue(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:i,error:r}=await this._useSession(async a=>{var s,l,o,u,f;const{data:d,error:m}=a;if(m)throw m;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",h,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(r)throw r;return sn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:t.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(ue(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var i;try{const{error:r,data:{session:a}}=n;if(r)throw r;const{options:s,provider:l,token:o,access_token:u,nonce:f}=t,d=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=a==null?void 0:a.access_token)!==null&&i!==void 0?i:void 0,body:{provider:l,id_token:o,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Zn}),{data:m,error:h}=d;return h?{data:{user:null,session:null},error:h}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new Pr}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),{data:m,error:h})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,r;const{data:a,error:s}=n;if(s)throw s;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await ST(async r=>(r>0&&await wT(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Zn})),(r,a)=>{const s=200*Math.pow(2,r);return a&&ju(a)&&Date.now()+s-i<ra})}catch(i){if(this._debug(n,"error",i),ue(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),sn()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await hr(this.storage,this.storageKey);if(r&&this.userStorage){let s=await hr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:r.user},await aa(this.userStorage,this.storageKey+"-user",s)),r.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:Du()}else if(r&&!r.user&&!r.user){const s=await hr(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(r.user=s.user,await Mi(this.storage,this.storageKey+"-user"),await aa(this.storage,this.storageKey,r)):r.user=Du()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const a=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Eu;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${Eu}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),ju(s)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:l}=await this._getUser(r.access_token);!l&&(s!=null&&s.user)?(r.user=s.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(i,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new Pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new wc;const{data:a,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!a.session)throw new Pn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(r,"error",a),ue(a)){const s={data:null,error:a};return ju(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,n,i=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(o){a.push(o)}});if(await Promise.all(s),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await aa(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const a=Ng(r);await aa(this.storage,this.storageKey,a)}else{const r=Ng(n);await aa(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Mi(this.storage,this.storageKey),await Mi(this.storage,this.storageKey+"-code-verifier"),await Mi(this.storage,this.storageKey+"-user"),this.userStorage&&await Mi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&sn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ra);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-t)/ra);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${ra}ms, refresh threshold is ${Ld} ticks`),r<=Ld&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ob)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const r=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[a,s]=await Zr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});r.push(l.toString())}if(i!=null&&i.queryParams){const a=new URLSearchParams(i.queryParams);r.push(a.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:r,error:a}=n;return a?{data:null,error:a}:await ve(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,r;const{data:a,error:s}=n;if(s)return{data:null,error:s};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:o,error:u}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&o.type==="totp"&&(!((r=o==null?void 0:o.totp)===null||r===void 0)&&r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:a}=n;if(a)return{data:null,error:a};const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?FT(t.webauthn.credential_response):WT(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:o}=await ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(n){if(ue(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:a}=n;if(a)return{data:null,error:a};const s=await ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});if(s.error)return s;const{data:l}=s;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:PT(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:ZT(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ue(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const r={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])r.all.push(a),a.status==="verified"&&r[a.factor_type].push(a);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:i},error:r}=await this.getSession();if(r)return{data:null,error:r};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Ou(i.access_token);let s=null;a.aal&&(s=a.aal);let l=s;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;return r?{data:null,error:r}:i?await ve(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:a=>({data:a,error:null})}):{data:null,error:new Pn}})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:r},error:a}=i;if(a)return{data:null,error:a};if(!r)return{data:null,error:new Pn};const s=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&sn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async _denyAuthorization(t,n){try{return await this._useSession(async i=>{const{data:{session:r},error:a}=i;if(a)return{data:null,error:a};if(!r)return{data:null,error:new Pn};const s=await ve(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&sn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(l=>l.kid===t);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(l=>l.kid===t),i&&this.jwks_cached_at+lT>r)return i;const{data:a,error:s}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=r,i=a.keys.find(l=>l.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:h,error:p}=await this.getSession();if(p||!h.session)return{data:null,error:p};i=h.session.access_token}const{header:r,payload:a,signature:s,raw:{header:l,payload:o}}=Ou(i);n!=null&&n.allowExpired||AT(a.exp);const u=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:h}=await this.getUser(i);if(h)throw h;return{data:{claims:a,header:r,signature:s},error:null}}const f=CT(r.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,s,yT(`${l}.${o}`)))throw new Id("Invalid JWT signature");return{data:{claims:a,header:r,signature:s},error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}}}nl.nextInstanceID=0;const oE=nl;class cE extends oE{constructor(t){super(t)}}class uE{constructor(t,n,i){var r,a,s;this.supabaseUrl=t,this.supabaseKey=n;const l=nT(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const o=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:J1,realtime:P1,auth:Object.assign(Object.assign({},Q1),{storageKey:o}),global:X1},f=tT(i??{},u);this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(d,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=f.auth)!==null&&s!==void 0?s:{},this.headers,f.global.fetch),this.fetch=W1(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new i1(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new I1(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new Qx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,i)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(n=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:r,userStorage:a,storageKey:s,flowType:l,lock:o,debug:u},f,d){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new cE({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:r,userStorage:a,flowType:l,lock:o,debug:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new _1(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,n,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const dE=(e,t,n)=>new uE(e,t,n);function fE(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}fE()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const hE="https://vqpubtahhvtkftafdlrp.supabase.co",mE="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZxcHVidGFoaHZ0a2Z0YWZkbHJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMjQ2NjUsImV4cCI6MjA3NzgwMDY2NX0.o2905IF2CWRJ-krYtA6MnL7_KALlNiwD211Sw-of7mI",ge=dE(hE,mE);function gE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.useMemo(()=>i=>{t.forEach(r=>r(i))},t)}const Sc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function es(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function lh(e){return"nodeType"in e}function dn(e){var t,n;return e?es(e)?e:lh(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function oh(e){const{Document:t}=dn(e);return e instanceof t}function pl(e){return es(e)?!1:e instanceof dn(e).HTMLElement}function db(e){return e instanceof dn(e).SVGElement}function ts(e){return e?es(e)?e.document:lh(e)?oh(e)?e:pl(e)||db(e)?e.ownerDocument:document:document:document}const ti=Sc?b.useLayoutEffect:b.useEffect;function xc(e){const t=b.useRef(e);return ti(()=>{t.current=e}),b.useCallback(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t.current==null?void 0:t.current(...i)},[])}function yE(){const e=b.useRef(null),t=b.useCallback((i,r)=>{e.current=setInterval(i,r)},[]),n=b.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function il(e,t){t===void 0&&(t=[e]);const n=b.useRef(e);return ti(()=>{n.current!==e&&(n.current=e)},t),n}function bl(e,t){const n=b.useRef();return b.useMemo(()=>{const i=e(n.current);return n.current=i,i},[...t])}function Qo(e){const t=xc(e),n=b.useRef(null),i=b.useCallback(r=>{r!==n.current&&(t==null||t(r,n.current)),n.current=r},[]);return[n,i]}function Po(e){const t=b.useRef();return b.useEffect(()=>{t.current=e},[e]),t.current}let Cu={};function _l(e,t){return b.useMemo(()=>{if(t)return t;const n=Cu[e]==null?0:Cu[e]+1;return Cu[e]=n,e+"-"+n},[e,t])}function fb(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.reduce((a,s)=>{const l=Object.entries(s);for(const[o,u]of l){const f=a[o];f!=null&&(a[o]=f+e*u)}return a},{...t})}}const Oa=fb(1),rl=fb(-1);function vE(e){return"clientX"in e&&"clientY"in e}function Tc(e){if(!e)return!1;const{KeyboardEvent:t}=dn(e.target);return t&&e instanceof t}function pE(e){if(!e)return!1;const{TouchEvent:t}=dn(e.target);return t&&e instanceof t}function Zo(e){if(pE(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return vE(e)?{x:e.clientX,y:e.clientY}:null}const zr=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[zr.Translate.toString(e),zr.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:i}=e;return t+" "+n+"ms "+i}}}),Hg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function bE(e){return e.matches(Hg)?e:e.querySelector(Hg)}const _E={display:"none"};function wE(e){let{id:t,value:n}=e;return dt.createElement("div",{id:t,style:_E},n)}function SE(e){let{id:t,announcement:n,ariaLiveType:i="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return dt.createElement("div",{id:t,style:r,role:"status","aria-live":i,"aria-atomic":!0},n)}function xE(){const[e,t]=b.useState("");return{announce:b.useCallback(i=>{i!=null&&t(i)},[]),announcement:e}}const hb=b.createContext(null);function TE(e){const t=b.useContext(hb);b.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function EE(){const[e]=b.useState(()=>new Set),t=b.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[b.useCallback(i=>{let{type:r,event:a}=i;e.forEach(s=>{var l;return(l=s[r])==null?void 0:l.call(s,a)})},[e]),t]}const jE={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},OE={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function DE(e){let{announcements:t=OE,container:n,hiddenTextDescribedById:i,screenReaderInstructions:r=jE}=e;const{announce:a,announcement:s}=xE(),l=_l("DndLiveRegion"),[o,u]=b.useState(!1);if(b.useEffect(()=>{u(!0)},[]),TE(b.useMemo(()=>({onDragStart(d){let{active:m}=d;a(t.onDragStart({active:m}))},onDragMove(d){let{active:m,over:h}=d;t.onDragMove&&a(t.onDragMove({active:m,over:h}))},onDragOver(d){let{active:m,over:h}=d;a(t.onDragOver({active:m,over:h}))},onDragEnd(d){let{active:m,over:h}=d;a(t.onDragEnd({active:m,over:h}))},onDragCancel(d){let{active:m,over:h}=d;a(t.onDragCancel({active:m,over:h}))}}),[a,t])),!o)return null;const f=dt.createElement(dt.Fragment,null,dt.createElement(wE,{id:i,value:r.draggable}),dt.createElement(SE,{id:l,announcement:s}));return n?xr.createPortal(f,n):f}var Ht;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ht||(Ht={}));function Fo(){}function Da(e,t){return b.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ch(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.useMemo(()=>[...t].filter(i=>i!=null),[...t])}const ni=Object.freeze({x:0,y:0});function mb(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function AE(e,t){const n=Zo(e);if(!n)return"0 0";const i={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return i.x+"% "+i.y+"%"}function gb(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return n-i}function CE(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return i-n}function $g(e){let{left:t,top:n,height:i,width:r}=e;return[{x:t,y:n},{x:t+r,y:n},{x:t,y:n+i},{x:t+r,y:n+i}]}function yb(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function qg(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const uh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const r=qg(t,t.left,t.top),a=[];for(const s of i){const{id:l}=s,o=n.get(l);if(o){const u=mb(qg(o),r);a.push({id:l,data:{droppableContainer:s,value:u}})}}return a.sort(gb)},NE=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const r=$g(t),a=[];for(const s of i){const{id:l}=s,o=n.get(l);if(o){const u=$g(o),f=r.reduce((m,h,p)=>m+mb(u[p],h),0),d=Number((f/4).toFixed(4));a.push({id:l,data:{droppableContainer:s,value:d}})}}return a.sort(gb)};function RE(e,t){const n=Math.max(t.top,e.top),i=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),s=r-i,l=a-n;if(i<r&&n<a){const o=t.width*t.height,u=e.width*e.height,f=s*l,d=f/(o+u-f);return Number(d.toFixed(4))}return 0}const kE=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const r=[];for(const a of i){const{id:s}=a,l=n.get(s);if(l){const o=RE(l,t);o>0&&r.push({id:s,data:{droppableContainer:a,value:o}})}}return r.sort(CE)};function ME(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function vb(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ni}function UE(e){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return r.reduce((s,l)=>({...s,top:s.top+e*l.y,bottom:s.bottom+e*l.y,left:s.left+e*l.x,right:s.right+e*l.x}),{...n})}}const zE=UE(1);function pb(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function BE(e,t,n){const i=pb(t);if(!i)return e;const{scaleX:r,scaleY:a,x:s,y:l}=i,o=e.left-s-(1-r)*parseFloat(n),u=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),f=r?e.width/r:e.width,d=a?e.height/a:e.height;return{width:f,height:d,top:u,right:o+f,bottom:u+d,left:o}}const HE={ignoreTransform:!1};function ns(e,t){t===void 0&&(t=HE);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=dn(e).getComputedStyle(e);u&&(n=BE(n,u,f))}const{top:i,left:r,width:a,height:s,bottom:l,right:o}=n;return{top:i,left:r,width:a,height:s,bottom:l,right:o}}function Lg(e){return ns(e,{ignoreTransform:!0})}function $E(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function qE(e,t){return t===void 0&&(t=dn(e).getComputedStyle(e)),t.position==="fixed"}function LE(e,t){t===void 0&&(t=dn(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const a=t[r];return typeof a=="string"?n.test(a):!1})}function Ec(e,t){const n=[];function i(r){if(t!=null&&n.length>=t||!r)return n;if(oh(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!pl(r)||db(r)||n.includes(r))return n;const a=dn(e).getComputedStyle(r);return r!==e&&LE(r,a)&&n.push(r),qE(r,a)?n:i(r.parentNode)}return e?i(e):n}function bb(e){const[t]=Ec(e,1);return t??null}function Nu(e){return!Sc||!e?null:es(e)?e:lh(e)?oh(e)||e===ts(e).scrollingElement?window:pl(e)?e:null:null}function _b(e){return es(e)?e.scrollX:e.scrollLeft}function wb(e){return es(e)?e.scrollY:e.scrollTop}function Gd(e){return{x:_b(e),y:wb(e)}}var It;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(It||(It={}));function Sb(e){return!Sc||!e?!1:e===document.scrollingElement}function xb(e){const t={x:0,y:0},n=Sb(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},r=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,s=e.scrollTop>=i.y,l=e.scrollLeft>=i.x;return{isTop:r,isLeft:a,isBottom:s,isRight:l,maxScroll:i,minScroll:t}}const VE={x:.2,y:.2};function YE(e,t,n,i,r){let{top:a,left:s,right:l,bottom:o}=n;i===void 0&&(i=10),r===void 0&&(r=VE);const{isTop:u,isBottom:f,isLeft:d,isRight:m}=xb(e),h={x:0,y:0},p={x:0,y:0},_={height:t.height*r.y,width:t.width*r.x};return!u&&a<=t.top+_.height?(h.y=It.Backward,p.y=i*Math.abs((t.top+_.height-a)/_.height)):!f&&o>=t.bottom-_.height&&(h.y=It.Forward,p.y=i*Math.abs((t.bottom-_.height-o)/_.height)),!m&&l>=t.right-_.width?(h.x=It.Forward,p.x=i*Math.abs((t.right-_.width-l)/_.width)):!d&&s<=t.left+_.width&&(h.x=It.Backward,p.x=i*Math.abs((t.left+_.width-s)/_.width)),{direction:h,speed:p}}function IE(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:s}=window;return{top:0,left:0,right:a,bottom:s,width:a,height:s}}const{top:t,left:n,right:i,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:i,bottom:r,width:e.clientWidth,height:e.clientHeight}}function Tb(e){return e.reduce((t,n)=>Oa(t,Gd(n)),ni)}function GE(e){return e.reduce((t,n)=>t+_b(n),0)}function KE(e){return e.reduce((t,n)=>t+wb(n),0)}function Eb(e,t){if(t===void 0&&(t=ns),!e)return;const{top:n,left:i,bottom:r,right:a}=t(e);bb(e)&&(r<=0||a<=0||n>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const XE=[["x",["left","right"],GE],["y",["top","bottom"],KE]];class dh{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Ec(n),r=Tb(i);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,s,l]of XE)for(const o of s)Object.defineProperty(this,o,{get:()=>{const u=l(i),f=r[a]-u;return this.rect[o]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Bs{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=t}add(t,n,i){var r;(r=this.target)==null||r.addEventListener(t,n,i),this.listeners.push([t,n,i])}}function JE(e){const{EventTarget:t}=dn(e);return e instanceof t?e:ts(e)}function Ru(e,t){const n=Math.abs(e.x),i=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+i**2)>t:"x"in t&&"y"in t?n>t.x&&i>t.y:"x"in t?n>t.x:"y"in t?i>t.y:!1}var $n;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})($n||($n={}));function Vg(e){e.preventDefault()}function QE(e){e.stopPropagation()}var qe;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(qe||(qe={}));const jb={start:[qe.Space,qe.Enter],cancel:[qe.Esc],end:[qe.Space,qe.Enter,qe.Tab]},PE=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case qe.Right:return{...n,x:n.x+25};case qe.Left:return{...n,x:n.x-25};case qe.Down:return{...n,y:n.y+25};case qe.Up:return{...n,y:n.y-25}}};class jc{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Bs(ts(n)),this.windowListeners=new Bs(dn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add($n.Resize,this.handleCancel),this.windowListeners.add($n.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add($n.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,i=t.node.current;i&&Eb(i),n(ni)}handleKeyDown(t){if(Tc(t)){const{active:n,context:i,options:r}=this.props,{keyboardCodes:a=jb,coordinateGetter:s=PE,scrollBehavior:l="smooth"}=r,{code:o}=t;if(a.end.includes(o)){this.handleEnd(t);return}if(a.cancel.includes(o)){this.handleCancel(t);return}const{collisionRect:u}=i.current,f=u?{x:u.left,y:u.top}:ni;this.referenceCoordinates||(this.referenceCoordinates=f);const d=s(t,{active:n,context:i.current,currentCoordinates:f});if(d){const m=rl(d,f),h={x:0,y:0},{scrollableAncestors:p}=i.current;for(const _ of p){const x=t.code,{isTop:v,isRight:g,isLeft:y,isBottom:w,maxScroll:T,minScroll:j}=xb(_),S=IE(_),E={x:Math.min(x===qe.Right?S.right-S.width/2:S.right,Math.max(x===qe.Right?S.left:S.left+S.width/2,d.x)),y:Math.min(x===qe.Down?S.bottom-S.height/2:S.bottom,Math.max(x===qe.Down?S.top:S.top+S.height/2,d.y))},A=x===qe.Right&&!g||x===qe.Left&&!y,O=x===qe.Down&&!w||x===qe.Up&&!v;if(A&&E.x!==d.x){const C=_.scrollLeft+m.x,L=x===qe.Right&&C<=T.x||x===qe.Left&&C>=j.x;if(L&&!m.y){_.scrollTo({left:C,behavior:l});return}L?h.x=_.scrollLeft-C:h.x=x===qe.Right?_.scrollLeft-T.x:_.scrollLeft-j.x,h.x&&_.scrollBy({left:-h.x,behavior:l});break}else if(O&&E.y!==d.y){const C=_.scrollTop+m.y,L=x===qe.Down&&C<=T.y||x===qe.Up&&C>=j.y;if(L&&!m.x){_.scrollTo({top:C,behavior:l});return}L?h.y=_.scrollTop-C:h.y=x===qe.Down?_.scrollTop-T.y:_.scrollTop-j.y,h.y&&_.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(t,Oa(rl(d,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:i}=this.props;t.preventDefault(),i(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}jc.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:i=jb,onActivation:r}=t,{active:a}=n;const{code:s}=e.nativeEvent;if(i.start.includes(s)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),r==null||r({event:e.nativeEvent}),!0)}return!1}}];function Yg(e){return!!(e&&"distance"in e)}function Ig(e){return!!(e&&"delay"in e)}class fh{constructor(t,n,i){var r;i===void 0&&(i=JE(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:s}=a;this.props=t,this.events=n,this.document=ts(s),this.documentListeners=new Bs(this.document),this.listeners=new Bs(i),this.windowListeners=new Bs(dn(s)),this.initialCoordinates=(r=Zo(a))!=null?r:ni,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add($n.Resize,this.handleCancel),this.windowListeners.add($n.DragStart,Vg),this.windowListeners.add($n.VisibilityChange,this.handleCancel),this.windowListeners.add($n.ContextMenu,Vg),this.documentListeners.add($n.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ig(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Yg(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:i,onPending:r}=this.props;r(i,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add($n.Click,QE,{capture:!0}),this.removeTextSelection(),this.documentListeners.add($n.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:i,initialCoordinates:r,props:a}=this,{onMove:s,options:{activationConstraint:l}}=a;if(!r)return;const o=(n=Zo(t))!=null?n:ni,u=rl(r,o);if(!i&&l){if(Yg(l)){if(l.tolerance!=null&&Ru(u,l.tolerance))return this.handleCancel();if(Ru(u,l.distance))return this.handleStart()}if(Ig(l)&&Ru(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),s(o)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===qe.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ZE={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class wl extends fh{constructor(t){const{event:n}=t,i=ts(n.target);super(t,ZE,i)}}wl.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return!n.isPrimary||n.button!==0?!1:(i==null||i({event:n}),!0)}}];const FE={move:{name:"mousemove"},end:{name:"mouseup"}};var Kd;(function(e){e[e.RightClick=2]="RightClick"})(Kd||(Kd={}));class WE extends fh{constructor(t){super(t,FE,ts(t.event.target))}}WE.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return n.button===Kd.RightClick?!1:(i==null||i({event:n}),!0)}}];const ku={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ob extends fh{constructor(t){super(t,ku)}static setup(){return window.addEventListener(ku.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ku.move.name,t)};function t(){}}}Ob.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;const{touches:r}=n;return r.length>1?!1:(i==null||i({event:n}),!0)}}];var Hs;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Hs||(Hs={}));var Wo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Wo||(Wo={}));function ej(e){let{acceleration:t,activator:n=Hs.Pointer,canScroll:i,draggingRect:r,enabled:a,interval:s=5,order:l=Wo.TreeOrder,pointerCoordinates:o,scrollableAncestors:u,scrollableAncestorRects:f,delta:d,threshold:m}=e;const h=nj({delta:d,disabled:!a}),[p,_]=yE(),x=b.useRef({x:0,y:0}),v=b.useRef({x:0,y:0}),g=b.useMemo(()=>{switch(n){case Hs.Pointer:return o?{top:o.y,bottom:o.y,left:o.x,right:o.x}:null;case Hs.DraggableRect:return r}},[n,r,o]),y=b.useRef(null),w=b.useCallback(()=>{const j=y.current;if(!j)return;const S=x.current.x*v.current.x,E=x.current.y*v.current.y;j.scrollBy(S,E)},[]),T=b.useMemo(()=>l===Wo.TreeOrder?[...u].reverse():u,[l,u]);b.useEffect(()=>{if(!a||!u.length||!g){_();return}for(const j of T){if((i==null?void 0:i(j))===!1)continue;const S=u.indexOf(j),E=f[S];if(!E)continue;const{direction:A,speed:O}=YE(j,E,g,t,m);for(const C of["x","y"])h[C][A[C]]||(O[C]=0,A[C]=0);if(O.x>0||O.y>0){_(),y.current=j,p(w,s),x.current=O,v.current=A;return}}x.current={x:0,y:0},v.current={x:0,y:0},_()},[t,w,i,_,a,s,JSON.stringify(g),JSON.stringify(h),p,u,T,f,JSON.stringify(m)])}const tj={x:{[It.Backward]:!1,[It.Forward]:!1},y:{[It.Backward]:!1,[It.Forward]:!1}};function nj(e){let{delta:t,disabled:n}=e;const i=Po(t);return bl(r=>{if(n||!i||!r)return tj;const a={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[It.Backward]:r.x[It.Backward]||a.x===-1,[It.Forward]:r.x[It.Forward]||a.x===1},y:{[It.Backward]:r.y[It.Backward]||a.y===-1,[It.Forward]:r.y[It.Forward]||a.y===1}}},[n,t,i])}function ij(e,t){const n=t!=null?e.get(t):void 0,i=n?n.node.current:null;return bl(r=>{var a;return t==null?null:(a=i??r)!=null?a:null},[i,t])}function rj(e,t){return b.useMemo(()=>e.reduce((n,i)=>{const{sensor:r}=i,a=r.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,i)}));return[...n,...a]},[]),[e,t])}var Br;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Br||(Br={}));var Xd;(function(e){e.Optimized="optimized"})(Xd||(Xd={}));const Gg=new Map;function aj(e,t){let{dragging:n,dependencies:i,config:r}=t;const[a,s]=b.useState(null),{frequency:l,measure:o,strategy:u}=r,f=b.useRef(e),d=x(),m=il(d),h=b.useCallback(function(v){v===void 0&&(v=[]),!m.current&&s(g=>g===null?v:g.concat(v.filter(y=>!g.includes(y))))},[m]),p=b.useRef(null),_=bl(v=>{if(d&&!n)return Gg;if(!v||v===Gg||f.current!==e||a!=null){const g=new Map;for(let y of e){if(!y)continue;if(a&&a.length>0&&!a.includes(y.id)&&y.rect.current){g.set(y.id,y.rect.current);continue}const w=y.node.current,T=w?new dh(o(w),w):null;y.rect.current=T,T&&g.set(y.id,T)}return g}return v},[e,a,n,d,o]);return b.useEffect(()=>{f.current=e},[e]),b.useEffect(()=>{d||h()},[n,d]),b.useEffect(()=>{a&&a.length>0&&s(null)},[JSON.stringify(a)]),b.useEffect(()=>{d||typeof l!="number"||p.current!==null||(p.current=setTimeout(()=>{h(),p.current=null},l))},[l,d,h,...i]),{droppableRects:_,measureDroppableContainers:h,measuringScheduled:a!=null};function x(){switch(u){case Br.Always:return!1;case Br.BeforeDragging:return n;default:return!n}}}function hh(e,t){return bl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function sj(e,t){return hh(e,t)}function lj(e){let{callback:t,disabled:n}=e;const i=xc(t),r=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(i)},[i,n]);return b.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function Oc(e){let{callback:t,disabled:n}=e;const i=xc(t),r=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(i)},[n]);return b.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function oj(e){return new dh(ns(e),e)}function Kg(e,t,n){t===void 0&&(t=oj);const[i,r]=b.useState(null);function a(){r(o=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=o??n)!=null?u:null}const f=t(e);return JSON.stringify(o)===JSON.stringify(f)?o:f})}const s=lj({callback(o){if(e)for(const u of o){const{type:f,target:d}=u;if(f==="childList"&&d instanceof HTMLElement&&d.contains(e)){a();break}}}}),l=Oc({callback:a});return ti(()=>{a(),e?(l==null||l.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),s==null||s.disconnect())},[e]),i}function cj(e){const t=hh(e);return vb(e,t)}const Xg=[];function uj(e){const t=b.useRef(e),n=bl(i=>e?i&&i!==Xg&&e&&t.current&&e.parentNode===t.current.parentNode?i:Ec(e):Xg,[e]);return b.useEffect(()=>{t.current=e},[e]),n}function dj(e){const[t,n]=b.useState(null),i=b.useRef(e),r=b.useCallback(a=>{const s=Nu(a.target);s&&n(l=>l?(l.set(s,Gd(s)),new Map(l)):null)},[]);return b.useEffect(()=>{const a=i.current;if(e!==a){s(a);const l=e.map(o=>{const u=Nu(o);return u?(u.addEventListener("scroll",r,{passive:!0}),[u,Gd(u)]):null}).filter(o=>o!=null);n(l.length?new Map(l):null),i.current=e}return()=>{s(e),s(a)};function s(l){l.forEach(o=>{const u=Nu(o);u==null||u.removeEventListener("scroll",r)})}},[r,e]),b.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,s)=>Oa(a,s),ni):Tb(e):ni,[e,t])}function Jg(e,t){t===void 0&&(t=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},t),b.useEffect(()=>{const i=e!==ni;i&&!n.current&&(n.current=e),!i&&n.current&&(n.current=null)},[e]),n.current?rl(e,n.current):ni}function fj(e){b.useEffect(()=>{if(!Sc)return;const t=e.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function hj(e,t){return b.useMemo(()=>e.reduce((n,i)=>{let{eventName:r,handler:a}=i;return n[r]=s=>{a(s,t)},n},{}),[e,t])}function Db(e){return b.useMemo(()=>e?$E(e):null,[e])}const Qg=[];function mj(e,t){t===void 0&&(t=ns);const[n]=e,i=Db(n?dn(n):null),[r,a]=b.useState(Qg);function s(){a(()=>e.length?e.map(o=>Sb(o)?i:new dh(t(o),o)):Qg)}const l=Oc({callback:s});return ti(()=>{l==null||l.disconnect(),s(),e.forEach(o=>l==null?void 0:l.observe(o))},[e]),r}function Ab(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return pl(t)?t:e}function gj(e){let{measure:t}=e;const[n,i]=b.useState(null),r=b.useCallback(u=>{for(const{target:f}of u)if(pl(f)){i(d=>{const m=t(f);return d?{...d,width:m.width,height:m.height}:m});break}},[t]),a=Oc({callback:r}),s=b.useCallback(u=>{const f=Ab(u);a==null||a.disconnect(),f&&(a==null||a.observe(f)),i(f?t(f):null)},[t,a]),[l,o]=Qo(s);return b.useMemo(()=>({nodeRef:l,rect:n,setRef:o}),[n,l,o])}const yj=[{sensor:wl,options:{}},{sensor:jc,options:{}}],vj={current:{}},mo={draggable:{measure:Lg},droppable:{measure:Lg,strategy:Br.WhileDragging,frequency:Xd.Optimized},dragOverlay:{measure:ns}};class $s extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,i;return(n=(i=this.get(t))==null?void 0:i.node.current)!=null?n:void 0}}const pj={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new $s,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Fo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:mo,measureDroppableContainers:Fo,windowRect:null,measuringScheduled:!1},Cb={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Fo,draggableNodes:new Map,over:null,measureDroppableContainers:Fo},Sl=b.createContext(Cb),Nb=b.createContext(pj);function bj(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new $s}}}function _j(e,t){switch(t.type){case Ht.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ht.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ht.DragEnd:case Ht.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ht.RegisterDroppable:{const{element:n}=t,{id:i}=n,r=new $s(e.droppable.containers);return r.set(i,n),{...e,droppable:{...e.droppable,containers:r}}}case Ht.SetDroppableDisabled:{const{id:n,key:i,disabled:r}=t,a=e.droppable.containers.get(n);if(!a||i!==a.key)return e;const s=new $s(e.droppable.containers);return s.set(n,{...a,disabled:r}),{...e,droppable:{...e.droppable,containers:s}}}case Ht.UnregisterDroppable:{const{id:n,key:i}=t,r=e.droppable.containers.get(n);if(!r||i!==r.key)return e;const a=new $s(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function wj(e){let{disabled:t}=e;const{active:n,activatorEvent:i,draggableNodes:r}=b.useContext(Sl),a=Po(i),s=Po(n==null?void 0:n.id);return b.useEffect(()=>{if(!t&&!i&&a&&s!=null){if(!Tc(a)||document.activeElement===a.target)return;const l=r.get(s);if(!l)return;const{activatorNode:o,node:u}=l;if(!o.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[o.current,u.current]){if(!f)continue;const d=bE(f);if(d){d.focus();break}}})}},[i,t,r,s,a]),null}function Rb(e,t){let{transform:n,...i}=t;return e!=null&&e.length?e.reduce((r,a)=>a({transform:r,...i}),n):n}function Sj(e){return b.useMemo(()=>({draggable:{...mo.draggable,...e==null?void 0:e.draggable},droppable:{...mo.droppable,...e==null?void 0:e.droppable},dragOverlay:{...mo.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function xj(e){let{activeNode:t,measure:n,initialRect:i,config:r=!0}=e;const a=b.useRef(!1),{x:s,y:l}=typeof r=="boolean"?{x:r,y:r}:r;ti(()=>{if(!s&&!l||!t){a.current=!1;return}if(a.current||!i)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),d=vb(f,i);if(s||(d.x=0),l||(d.y=0),a.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const m=bb(u);m&&m.scrollBy({top:d.y,left:d.x})}},[t,s,l,i,n])}const Dc=b.createContext({...ni,scaleX:1,scaleY:1});var Hi;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Hi||(Hi={}));const mh=b.memo(function(t){var n,i,r,a;let{id:s,accessibility:l,autoScroll:o=!0,children:u,sensors:f=yj,collisionDetection:d=kE,measuring:m,modifiers:h,...p}=t;const _=b.useReducer(_j,void 0,bj),[x,v]=_,[g,y]=EE(),[w,T]=b.useState(Hi.Uninitialized),j=w===Hi.Initialized,{draggable:{active:S,nodes:E,translate:A},droppable:{containers:O}}=x,C=S!=null?E.get(S):null,L=b.useRef({initial:null,translated:null}),Q=b.useMemo(()=>{var Ge;return S!=null?{id:S,data:(Ge=C==null?void 0:C.data)!=null?Ge:vj,rect:L}:null},[S,C]),re=b.useRef(null),[oe,N]=b.useState(null),[H,J]=b.useState(null),be=il(p,Object.values(p)),fe=_l("DndDescribedBy",s),Xe=b.useMemo(()=>O.getEnabled(),[O]),Ve=Sj(m),{droppableRects:ke,measureDroppableContainers:Me,measuringScheduled:Ue}=aj(Xe,{dragging:j,dependencies:[A.x,A.y],config:Ve.droppable}),Ye=ij(E,S),Y=b.useMemo(()=>H?Zo(H):null,[H]),R=Mt(),z=sj(Ye,Ve.draggable.measure);xj({activeNode:S!=null?E.get(S):null,config:R.layoutShiftCompensation,initialRect:z,measure:Ve.draggable.measure});const k=Kg(Ye,Ve.draggable.measure,z),ee=Kg(Ye?Ye.parentElement:null),K=b.useRef({activatorEvent:null,active:null,activeNode:Ye,collisionRect:null,collisions:null,droppableRects:ke,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),te=O.getNodeFor((n=K.current.over)==null?void 0:n.id),U=gj({measure:Ve.dragOverlay.measure}),ae=(i=U.nodeRef.current)!=null?i:Ye,de=j?(r=U.rect)!=null?r:k:null,F=!!(U.nodeRef.current&&U.rect),le=cj(F?null:k),he=Db(ae?dn(ae):null),ye=uj(j?te??Ye:null),wt=mj(ye),vt=Rb(h,{transform:{x:A.x-le.x,y:A.y-le.y,scaleX:1,scaleY:1},activatorEvent:H,active:Q,activeNodeRect:k,containerNodeRect:ee,draggingNodeRect:de,over:K.current.over,overlayNodeRect:U.rect,scrollableAncestors:ye,scrollableAncestorRects:wt,windowRect:he}),jt=Y?Oa(Y,A):null,ot=dj(ye),tt=Jg(ot),V=Jg(ot,[k]),$=Oa(vt,tt),I=de?zE(de,vt):null,ie=Q&&I?d({active:Q,collisionRect:I,droppableRects:ke,droppableContainers:Xe,pointerCoordinates:jt}):null,ne=yb(ie,"id"),[_e,Se]=b.useState(null),Ie=F?vt:Oa(vt,V),$e=ME(Ie,(a=_e==null?void 0:_e.rect)!=null?a:null,k),Te=b.useRef(null),De=b.useCallback((Ge,ce)=>{let{sensor:pt,options:Xt}=ce;if(re.current==null)return;const Lt=E.get(re.current);if(!Lt)return;const Vt=Ge.nativeEvent,Ut=new pt({active:re.current,activeNode:Lt,event:Vt,options:Xt,context:K,onAbort(bt){if(!E.get(bt))return;const{onDragAbort:rn}=be.current,tn={id:bt};rn==null||rn(tn),g({type:"onDragAbort",event:tn})},onPending(bt,Rn,rn,tn){if(!E.get(bt))return;const{onDragPending:Mn}=be.current,an={id:bt,constraint:Rn,initialCoordinates:rn,offset:tn};Mn==null||Mn(an),g({type:"onDragPending",event:an})},onStart(bt){const Rn=re.current;if(Rn==null)return;const rn=E.get(Rn);if(!rn)return;const{onDragStart:tn}=be.current,kn={activatorEvent:Vt,active:{id:Rn,data:rn.data,rect:L}};xr.unstable_batchedUpdates(()=>{tn==null||tn(kn),T(Hi.Initializing),v({type:Ht.DragStart,initialCoordinates:bt,active:Rn}),g({type:"onDragStart",event:kn}),N(Te.current),J(Vt)})},onMove(bt){v({type:Ht.DragMove,coordinates:bt})},onEnd:bn(Ht.DragEnd),onCancel:bn(Ht.DragCancel)});Te.current=Ut;function bn(bt){return async function(){const{active:rn,collisions:tn,over:kn,scrollAdjustedTranslate:Mn}=K.current;let an=null;if(rn&&Mn){const{cancelDrop:X}=be.current;an={activatorEvent:Vt,active:rn,collisions:tn,delta:Mn,over:kn},bt===Ht.DragEnd&&typeof X=="function"&&await Promise.resolve(X(an))&&(bt=Ht.DragCancel)}re.current=null,xr.unstable_batchedUpdates(()=>{v({type:bt}),T(Hi.Uninitialized),Se(null),N(null),J(null),Te.current=null;const X=bt===Ht.DragEnd?"onDragEnd":"onDragCancel";if(an){const P=be.current[X];P==null||P(an),g({type:X,event:an})}})}}},[E]),me=b.useCallback((Ge,ce)=>(pt,Xt)=>{const Lt=pt.nativeEvent,Vt=E.get(Xt);if(re.current!==null||!Vt||Lt.dndKit||Lt.defaultPrevented)return;const Ut={active:Vt};Ge(pt,ce.options,Ut)===!0&&(Lt.dndKit={capturedBy:ce.sensor},re.current=Xt,De(pt,ce))},[E,De]),Ke=rj(f,me);fj(f),ti(()=>{k&&w===Hi.Initializing&&T(Hi.Initialized)},[k,w]),b.useEffect(()=>{const{onDragMove:Ge}=be.current,{active:ce,activatorEvent:pt,collisions:Xt,over:Lt}=K.current;if(!ce||!pt)return;const Vt={active:ce,activatorEvent:pt,collisions:Xt,delta:{x:$.x,y:$.y},over:Lt};xr.unstable_batchedUpdates(()=>{Ge==null||Ge(Vt),g({type:"onDragMove",event:Vt})})},[$.x,$.y]),b.useEffect(()=>{const{active:Ge,activatorEvent:ce,collisions:pt,droppableContainers:Xt,scrollAdjustedTranslate:Lt}=K.current;if(!Ge||re.current==null||!ce||!Lt)return;const{onDragOver:Vt}=be.current,Ut=Xt.get(ne),bn=Ut&&Ut.rect.current?{id:Ut.id,rect:Ut.rect.current,data:Ut.data,disabled:Ut.disabled}:null,bt={active:Ge,activatorEvent:ce,collisions:pt,delta:{x:Lt.x,y:Lt.y},over:bn};xr.unstable_batchedUpdates(()=>{Se(bn),Vt==null||Vt(bt),g({type:"onDragOver",event:bt})})},[ne]),ti(()=>{K.current={activatorEvent:H,active:Q,activeNode:Ye,collisionRect:I,collisions:ie,droppableRects:ke,draggableNodes:E,draggingNode:ae,draggingNodeRect:de,droppableContainers:O,over:_e,scrollableAncestors:ye,scrollAdjustedTranslate:$},L.current={initial:de,translated:I}},[Q,Ye,ie,I,E,ae,de,ke,O,_e,ye,$]),ej({...R,delta:A,draggingRect:I,pointerCoordinates:jt,scrollableAncestors:ye,scrollableAncestorRects:wt});const je=b.useMemo(()=>({active:Q,activeNode:Ye,activeNodeRect:k,activatorEvent:H,collisions:ie,containerNodeRect:ee,dragOverlay:U,draggableNodes:E,droppableContainers:O,droppableRects:ke,over:_e,measureDroppableContainers:Me,scrollableAncestors:ye,scrollableAncestorRects:wt,measuringConfiguration:Ve,measuringScheduled:Ue,windowRect:he}),[Q,Ye,k,H,ie,ee,U,E,O,ke,_e,Me,ye,wt,Ve,Ue,he]),Je=b.useMemo(()=>({activatorEvent:H,activators:Ke,active:Q,activeNodeRect:k,ariaDescribedById:{draggable:fe},dispatch:v,draggableNodes:E,over:_e,measureDroppableContainers:Me}),[H,Ke,Q,k,v,fe,E,_e,Me]);return dt.createElement(hb.Provider,{value:y},dt.createElement(Sl.Provider,{value:Je},dt.createElement(Nb.Provider,{value:je},dt.createElement(Dc.Provider,{value:$e},u)),dt.createElement(wj,{disabled:(l==null?void 0:l.restoreFocus)===!1})),dt.createElement(DE,{...l,hiddenTextDescribedById:fe}));function Mt(){const Ge=(oe==null?void 0:oe.autoScrollEnabled)===!1,ce=typeof o=="object"?o.enabled===!1:o===!1,pt=j&&!Ge&&!ce;return typeof o=="object"?{...o,enabled:pt}:{enabled:pt}}}),Tj=b.createContext(null),Pg="button",Ej="Draggable";function jj(e){let{id:t,data:n,disabled:i=!1,attributes:r}=e;const a=_l(Ej),{activators:s,activatorEvent:l,active:o,activeNodeRect:u,ariaDescribedById:f,draggableNodes:d,over:m}=b.useContext(Sl),{role:h=Pg,roleDescription:p="draggable",tabIndex:_=0}=r??{},x=(o==null?void 0:o.id)===t,v=b.useContext(x?Dc:Tj),[g,y]=Qo(),[w,T]=Qo(),j=hj(s,t),S=il(n);ti(()=>(d.set(t,{id:t,key:a,node:g,activatorNode:w,data:S}),()=>{const A=d.get(t);A&&A.key===a&&d.delete(t)}),[d,t]);const E=b.useMemo(()=>({role:h,tabIndex:_,"aria-disabled":i,"aria-pressed":x&&h===Pg?!0:void 0,"aria-roledescription":p,"aria-describedby":f.draggable}),[i,h,_,x,p,f.draggable]);return{active:o,activatorEvent:l,activeNodeRect:u,attributes:E,isDragging:x,listeners:i?void 0:j,node:g,over:m,setNodeRef:y,setActivatorNodeRef:T,transform:v}}function kb(){return b.useContext(Nb)}const Oj="Droppable",Dj={timeout:25};function Aj(e){let{data:t,disabled:n=!1,id:i,resizeObserverConfig:r}=e;const a=_l(Oj),{active:s,dispatch:l,over:o,measureDroppableContainers:u}=b.useContext(Sl),f=b.useRef({disabled:n}),d=b.useRef(!1),m=b.useRef(null),h=b.useRef(null),{disabled:p,updateMeasurementsFor:_,timeout:x}={...Dj,...r},v=il(_??i),g=b.useCallback(()=>{if(!d.current){d.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(v.current)?v.current:[v.current]),h.current=null},x)},[x]),y=Oc({callback:g,disabled:p||!s}),w=b.useCallback((E,A)=>{y&&(A&&(y.unobserve(A),d.current=!1),E&&y.observe(E))},[y]),[T,j]=Qo(w),S=il(t);return b.useEffect(()=>{!y||!T.current||(y.disconnect(),d.current=!1,y.observe(T.current))},[T,y]),b.useEffect(()=>(l({type:Ht.RegisterDroppable,element:{id:i,key:a,disabled:n,node:T,rect:m,data:S}}),()=>l({type:Ht.UnregisterDroppable,key:a,id:i})),[i]),b.useEffect(()=>{n!==f.current.disabled&&(l({type:Ht.SetDroppableDisabled,id:i,key:a,disabled:n}),f.current.disabled=n)},[i,a,n,l]),{active:s,rect:m,isOver:(o==null?void 0:o.id)===i,node:T,over:o,setNodeRef:j}}function Cj(e){let{animation:t,children:n}=e;const[i,r]=b.useState(null),[a,s]=b.useState(null),l=Po(n);return!n&&!i&&l&&r(l),ti(()=>{if(!a)return;const o=i==null?void 0:i.key,u=i==null?void 0:i.props.id;if(o==null||u==null){r(null);return}Promise.resolve(t(u,a)).then(()=>{r(null)})},[t,i,a]),dt.createElement(dt.Fragment,null,n,i?b.cloneElement(i,{ref:s}):null)}const Nj={x:0,y:0,scaleX:1,scaleY:1};function Rj(e){let{children:t}=e;return dt.createElement(Sl.Provider,{value:Cb},dt.createElement(Dc.Provider,{value:Nj},t))}const kj={position:"fixed",touchAction:"none"},Mj=e=>Tc(e)?"transform 250ms ease":void 0,Uj=b.forwardRef((e,t)=>{let{as:n,activatorEvent:i,adjustScale:r,children:a,className:s,rect:l,style:o,transform:u,transition:f=Mj}=e;if(!l)return null;const d=r?u:{...u,scaleX:1,scaleY:1},m={...kj,width:l.width,height:l.height,top:l.top,left:l.left,transform:zr.Transform.toString(d),transformOrigin:r&&i?AE(i,l):void 0,transition:typeof f=="function"?f(i):f,...o};return dt.createElement(n,{className:s,style:m,ref:t},a)}),zj=e=>t=>{let{active:n,dragOverlay:i}=t;const r={},{styles:a,className:s}=e;if(a!=null&&a.active)for(const[l,o]of Object.entries(a.active))o!==void 0&&(r[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,o));if(a!=null&&a.dragOverlay)for(const[l,o]of Object.entries(a.dragOverlay))o!==void 0&&i.node.style.setProperty(l,o);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&i.node.classList.add(s.dragOverlay),function(){for(const[o,u]of Object.entries(r))n.node.style.setProperty(o,u);s!=null&&s.active&&n.node.classList.remove(s.active)}},Bj=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:zr.Transform.toString(t)},{transform:zr.Transform.toString(n)}]},Hj={duration:250,easing:"ease",keyframes:Bj,sideEffects:zj({styles:{active:{opacity:"0"}}})};function $j(e){let{config:t,draggableNodes:n,droppableContainers:i,measuringConfiguration:r}=e;return xc((a,s)=>{if(t===null)return;const l=n.get(a);if(!l)return;const o=l.node.current;if(!o)return;const u=Ab(s);if(!u)return;const{transform:f}=dn(s).getComputedStyle(s),d=pb(f);if(!d)return;const m=typeof t=="function"?t:qj(t);return Eb(o,r.draggable.measure),m({active:{id:a,data:l.data,node:o,rect:r.draggable.measure(o)},draggableNodes:n,dragOverlay:{node:s,rect:r.dragOverlay.measure(u)},droppableContainers:i,measuringConfiguration:r,transform:d})})}function qj(e){const{duration:t,easing:n,sideEffects:i,keyframes:r}={...Hj,...e};return a=>{let{active:s,dragOverlay:l,transform:o,...u}=a;if(!t)return;const f={x:l.rect.left-s.rect.left,y:l.rect.top-s.rect.top},d={scaleX:o.scaleX!==1?s.rect.width*o.scaleX/l.rect.width:1,scaleY:o.scaleY!==1?s.rect.height*o.scaleY/l.rect.height:1},m={x:o.x-f.x,y:o.y-f.y,...d},h=r({...u,active:s,dragOverlay:l,transform:{initial:o,final:m}}),[p]=h,_=h[h.length-1];if(JSON.stringify(p)===JSON.stringify(_))return;const x=i==null?void 0:i({active:s,dragOverlay:l,...u}),v=l.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(g=>{v.onfinish=()=>{x==null||x(),g()}})}}let Zg=0;function Lj(e){return b.useMemo(()=>{if(e!=null)return Zg++,Zg},[e])}const gh=dt.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:i,style:r,transition:a,modifiers:s,wrapperElement:l="div",className:o,zIndex:u=999}=e;const{activatorEvent:f,active:d,activeNodeRect:m,containerNodeRect:h,draggableNodes:p,droppableContainers:_,dragOverlay:x,over:v,measuringConfiguration:g,scrollableAncestors:y,scrollableAncestorRects:w,windowRect:T}=kb(),j=b.useContext(Dc),S=Lj(d==null?void 0:d.id),E=Rb(s,{activatorEvent:f,active:d,activeNodeRect:m,containerNodeRect:h,draggingNodeRect:x.rect,over:v,overlayNodeRect:x.rect,scrollableAncestors:y,scrollableAncestorRects:w,transform:j,windowRect:T}),A=hh(m),O=$j({config:i,draggableNodes:p,droppableContainers:_,measuringConfiguration:g}),C=A?x.setRef:void 0;return dt.createElement(Rj,null,dt.createElement(Cj,{animation:O},d&&S?dt.createElement(Uj,{key:S,id:d.id,ref:C,as:l,activatorEvent:f,adjustScale:t,className:o,transition:a,rect:A,style:{zIndex:u,...r},transform:E},n):null))});function Ac(e,t,n){const i=e.slice();return i.splice(n<0?i.length+n:n,0,i.splice(t,1)[0]),i}function Vj(e,t){return e.reduce((n,i,r)=>{const a=t.get(i);return a&&(n[r]=a),n},Array(e.length))}function Pl(e){return e!==null&&e>=0}function Yj(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ij(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Mb=e=>{let{rects:t,activeIndex:n,overIndex:i,index:r}=e;const a=Ac(t,i,n),s=t[r],l=a[r];return!l||!s?null:{x:l.left-s.left,y:l.top-s.top,scaleX:l.width/s.width,scaleY:l.height/s.height}},Zl={scaleX:1,scaleY:1},wr=e=>{var t;let{activeIndex:n,activeNodeRect:i,index:r,rects:a,overIndex:s}=e;const l=(t=a[n])!=null?t:i;if(!l)return null;if(r===n){const u=a[s];return u?{x:0,y:n<s?u.top+u.height-(l.top+l.height):u.top-l.top,...Zl}:null}const o=Gj(a,r,n);return r>n&&r<=s?{x:0,y:-l.height-o,...Zl}:r<n&&r>=s?{x:0,y:l.height+o,...Zl}:{x:0,y:0,...Zl}};function Gj(e,t,n){const i=e[t],r=e[t-1],a=e[t+1];return i?n<t?r?i.top-(r.top+r.height):a?a.top-(i.top+i.height):0:a?a.top-(i.top+i.height):r?i.top-(r.top+r.height):0:0}const Ub="Sortable",zb=dt.createContext({activeIndex:-1,containerId:Ub,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Mb,disabled:{draggable:!1,droppable:!1}});function Sr(e){let{children:t,id:n,items:i,strategy:r=Mb,disabled:a=!1}=e;const{active:s,dragOverlay:l,droppableRects:o,over:u,measureDroppableContainers:f}=kb(),d=_l(Ub,n),m=l.rect!==null,h=b.useMemo(()=>i.map(j=>typeof j=="object"&&"id"in j?j.id:j),[i]),p=s!=null,_=s?h.indexOf(s.id):-1,x=u?h.indexOf(u.id):-1,v=b.useRef(h),g=!Yj(h,v.current),y=x!==-1&&_===-1||g,w=Ij(a);ti(()=>{g&&p&&f(h)},[g,h,p,f]),b.useEffect(()=>{v.current=h},[h]);const T=b.useMemo(()=>({activeIndex:_,containerId:d,disabled:w,disableTransforms:y,items:h,overIndex:x,useDragOverlay:m,sortedRects:Vj(h,o),strategy:r}),[_,d,w.draggable,w.droppable,y,h,x,o,m,r]);return dt.createElement(zb.Provider,{value:T},t)}const Kj=e=>{let{id:t,items:n,activeIndex:i,overIndex:r}=e;return Ac(n,i,r).indexOf(t)},Xj=e=>{let{containerId:t,isSorting:n,wasDragging:i,index:r,items:a,newIndex:s,previousItems:l,previousContainerId:o,transition:u}=e;return!u||!i||l!==a&&r===s?!1:n?!0:s!==r&&t===o},Jj={duration:200,easing:"ease"},Bb="transform",Qj=zr.Transition.toString({property:Bb,duration:0,easing:"linear"}),Pj={roleDescription:"sortable"};function Zj(e){let{disabled:t,index:n,node:i,rect:r}=e;const[a,s]=b.useState(null),l=b.useRef(n);return ti(()=>{if(!t&&n!==l.current&&i.current){const o=r.current;if(o){const u=ns(i.current,{ignoreTransform:!0}),f={x:o.left-u.left,y:o.top-u.top,scaleX:o.width/u.width,scaleY:o.height/u.height};(f.x||f.y)&&s(f)}}n!==l.current&&(l.current=n)},[t,n,i,r]),b.useEffect(()=>{a&&s(null)},[a]),a}function yh(e){let{animateLayoutChanges:t=Xj,attributes:n,disabled:i,data:r,getNewIndex:a=Kj,id:s,strategy:l,resizeObserverConfig:o,transition:u=Jj}=e;const{items:f,containerId:d,activeIndex:m,disabled:h,disableTransforms:p,sortedRects:_,overIndex:x,useDragOverlay:v,strategy:g}=b.useContext(zb),y=Fj(i,h),w=f.indexOf(s),T=b.useMemo(()=>({sortable:{containerId:d,index:w,items:f},...r}),[d,r,w,f]),j=b.useMemo(()=>f.slice(f.indexOf(s)),[f,s]),{rect:S,node:E,isOver:A,setNodeRef:O}=Aj({id:s,data:T,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...o}}),{active:C,activatorEvent:L,activeNodeRect:Q,attributes:re,setNodeRef:oe,listeners:N,isDragging:H,over:J,setActivatorNodeRef:be,transform:fe}=jj({id:s,data:T,attributes:{...Pj,...n},disabled:y.draggable}),Xe=gE(O,oe),Ve=!!C,ke=Ve&&!p&&Pl(m)&&Pl(x),Me=!v&&H,Ue=Me&&ke?fe:null,Y=ke?Ue??(l??g)({rects:_,activeNodeRect:Q,activeIndex:m,overIndex:x,index:w}):null,R=Pl(m)&&Pl(x)?a({id:s,items:f,activeIndex:m,overIndex:x}):w,z=C==null?void 0:C.id,k=b.useRef({activeId:z,items:f,newIndex:R,containerId:d}),ee=f!==k.current.items,K=t({active:C,containerId:d,isDragging:H,isSorting:Ve,id:s,index:w,items:f,newIndex:k.current.newIndex,previousItems:k.current.items,previousContainerId:k.current.containerId,transition:u,wasDragging:k.current.activeId!=null}),te=Zj({disabled:!K,index:w,node:E,rect:S});return b.useEffect(()=>{Ve&&k.current.newIndex!==R&&(k.current.newIndex=R),d!==k.current.containerId&&(k.current.containerId=d),f!==k.current.items&&(k.current.items=f)},[Ve,R,d,f]),b.useEffect(()=>{if(z===k.current.activeId)return;if(z!=null&&k.current.activeId==null){k.current.activeId=z;return}const ae=setTimeout(()=>{k.current.activeId=z},50);return()=>clearTimeout(ae)},[z]),{active:C,activeIndex:m,attributes:re,data:T,rect:S,index:w,newIndex:R,items:f,isOver:A,isSorting:Ve,isDragging:H,listeners:N,node:E,overIndex:x,over:J,setNodeRef:Xe,setActivatorNodeRef:be,setDroppableNodeRef:O,setDraggableNodeRef:oe,transform:te??Y,transition:U()};function U(){if(te||ee&&k.current.newIndex===w)return Qj;if(!(Me&&!Tc(L)||!u)&&(Ve||K))return zr.Transition.toString({...u,property:Bb})}}function Fj(e,t){var n,i;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(i=e==null?void 0:e.droppable)!=null?i:t.droppable}}function ec(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Wj=[qe.Down,qe.Right,qe.Up,qe.Left],Hb=(e,t)=>{let{context:{active:n,collisionRect:i,droppableRects:r,droppableContainers:a,over:s,scrollableAncestors:l}}=t;if(Wj.includes(e.code)){if(e.preventDefault(),!n||!i)return;const o=[];a.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const m=r.get(d.id);if(m)switch(e.code){case qe.Down:i.top<m.top&&o.push(d);break;case qe.Up:i.top>m.top&&o.push(d);break;case qe.Left:i.left>m.left&&o.push(d);break;case qe.Right:i.left<m.left&&o.push(d);break}});const u=NE({collisionRect:i,droppableRects:r,droppableContainers:o});let f=yb(u,"id");if(f===(s==null?void 0:s.id)&&u.length>1&&(f=u[1].id),f!=null){const d=a.get(n.id),m=a.get(f),h=m?r.get(m.id):null,p=m==null?void 0:m.node.current;if(p&&h&&d&&m){const x=Ec(p).some((j,S)=>l[S]!==j),v=$b(d,m),g=eO(d,m),y=x||!v?{x:0,y:0}:{x:g?i.width-h.width:0,y:g?i.height-h.height:0},w={x:h.left,y:h.top};return y.x&&y.y?w:rl(w,y)}}}};function $b(e,t){return!ec(e)||!ec(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function eO(e,t){return!ec(e)||!ec(t)||!$b(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Cr=[{key:"mon",label:""},{key:"tue",label:""},{key:"wed",label:""},{key:"thu",label:""},{key:"fri",label:""},{key:"sat",label:""},{key:"sun",label:""}],Mu={THIS_ONLY:"this-only",FROM_NOW:"from-now",ALL:"all"},tO="09",nO="00",Be=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`},Bn=e=>{const t=String(e.getFullYear()).slice(2),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),a=["","","","","","",""][e.getDay()];return`${t}.${n}.${i}(${a})`},Ui=e=>{const t=new Date(e),n=String(t.getFullYear()).slice(2),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),o=["","","","","","",""][t.getDay()];return`${n}.${i}.${r}(${o}) ${a}:${s}`},iO=e=>{const t=new Date;return Be(e)===Be(t)},rO=()=>{const[e,t]=b.useState(null),[n,i]=b.useState(!0);return b.useEffect(()=>{ge.auth.getSession().then(({data:{session:l}})=>{t(l),i(!1)});const{data:{subscription:s}}=ge.auth.onAuthStateChange((l,o)=>{t(o)});return()=>s.unsubscribe()},[]),{session:e,authLoading:n,handleGoogleLogin:async()=>{try{const{error:s}=await ge.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/todo-note/"}});if(s)throw s}catch(s){alert(" : "+s.message)}},handleLogout:async()=>{try{const{error:s}=await ge.auth.signOut();if(s)throw s}catch(s){alert(" : "+s.message)}}}};function vh({value:e,onChange:t}){const n=b.useRef(null),i=b.useRef(null),r=b.useRef(e),a=b.useRef(!1),[s,l]=b.useState(()=>e&&e.includes(":")?e.split(":")[0]:tO),[o,u]=b.useState(()=>e&&e.includes(":")?e.split(":")[1]:nO);b.useEffect(()=>{if(e&&e.includes(":")&&e!==r.current){const[g,y]=e.split(":");r.current=e,l(g),u(y)}},[e]),b.useEffect(()=>{if(!a.current){a.current=!0;return}const g=`${s}:${o}`;r.current=g,t&&t(g)},[s,o]);const f=(g,y,w)=>{if(!g.current)return;const T=g.current.scrollTop,S=Math.round(T/40),E=String(S).padStart(2,"0");y(E)},d=(g,y)=>{if(!g.current)return;const w=40,T=parseInt(y,10);g.current.scrollTop=T*w};b.useEffect(()=>{d(n,s)},[]),b.useEffect(()=>{d(i,o)},[]);const m=Array.from({length:24},(g,y)=>String(y).padStart(2,"0")),h=Array.from({length:60},(g,y)=>String(y).padStart(2,"0")),p=()=>{const g=(parseInt(s,10)+1)%24,y=String(g).padStart(2,"0");l(y),d(n,y)},_=()=>{const g=(parseInt(s,10)-1+24)%24,y=String(g).padStart(2,"0");l(y),d(n,y)},x=()=>{const g=(parseInt(o,10)+1)%60,y=String(g).padStart(2,"0");u(y),d(i,y)},v=()=>{const g=(parseInt(o,10)-1+60)%60,y=String(g).padStart(2,"0");u(y),d(i,y)};return c.jsxs("div",{className:"apple-time-picker",children:[c.jsxs("div",{className:"picker-arrows-top",children:[c.jsx("button",{className:"picker-arrow-button",onClick:p,children:""}),c.jsx("div",{style:{width:"20px"}}),c.jsx("button",{className:"picker-arrow-button",onClick:x,children:""})]}),c.jsxs("div",{className:"picker-container",children:[c.jsxs("div",{className:"picker-column",ref:n,onScroll:()=>f(n,l),children:[c.jsx("div",{className:"picker-spacer"}),m.map(g=>c.jsx("div",{className:`picker-item ${g===s?"selected":""}`,onClick:()=>{l(g),d(n,g)},children:g},g)),c.jsx("div",{className:"picker-spacer"})]}),c.jsx("div",{className:"picker-separator",children:":"}),c.jsxs("div",{className:"picker-column",ref:i,onScroll:()=>f(i,u),children:[c.jsx("div",{className:"picker-spacer"}),h.map(g=>c.jsx("div",{className:`picker-item ${g===o?"selected":""}`,onClick:()=>{u(g),d(i,g)},children:g},g)),c.jsx("div",{className:"picker-spacer"})]})]}),c.jsxs("div",{className:"picker-arrows-bottom",children:[c.jsx("button",{className:"picker-arrow-button",onClick:_,children:""}),c.jsx("div",{style:{width:"20px"}}),c.jsx("button",{className:"picker-arrow-button",onClick:v,children:""})]}),c.jsx("div",{className:"picker-selection-indicator"})]})}function Fg({message:e,onUndo:t,variant:n="default"}){const i=n==="success"?"undo-toast success-toast":"undo-toast";return c.jsxs("div",{className:i,children:[c.jsx("span",{children:e}),t&&c.jsx("button",{onClick:t,className:"undo-button",children:""})]})}function ph({title:e,editable:t=!1,onTitleChange:n,showHideButton:i=!1,onHide:r,showDeleteButton:a=!1,onDelete:s,customActions:l,settingsMenuItems:o=[]}){var g,y;const[u,f]=b.useState(!1),[d,m]=b.useState(e),[h,p]=b.useState(!1),_=b.useRef(null),x=()=>{d.trim()&&d!==e&&(n==null||n(d.trim())),f(!1)},v=()=>{m(e),f(!1)};return b.useEffect(()=>{const w=T=>{if(h&&_.current&&!_.current.contains(T.target)){const j=document.querySelector(".section-settings-dropdown");j&&!j.contains(T.target)&&p(!1)}};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[h]),c.jsxs("div",{className:"section-header",children:[c.jsx("div",{className:"section-title-container",children:u?c.jsx("div",{className:"section-title-edit-wrapper",children:c.jsx("input",{type:"text",value:d,onChange:w=>m(w.target.value),onBlur:x,onKeyDown:w=>{w.key==="Enter"?x():w.key==="Escape"&&v()},className:"section-title-input",autoFocus:!0})}):c.jsx("h2",{className:`section-title ${t?"editable":""}`,onClick:()=>t&&f(!0),children:e})}),c.jsxs("div",{className:"section-actions",children:[l,o.length>0&&c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{ref:_,className:"section-action-button settings-button",onClick:()=>p(!h),title:"",children:""}),h&&py.createPortal(c.jsx("div",{className:"section-settings-dropdown",style:{position:"fixed",top:`${((g=_.current)==null?void 0:g.getBoundingClientRect().bottom)+5}px`,left:`${(y=_.current)==null?void 0:y.getBoundingClientRect().left}px`},children:o.map((w,T)=>c.jsxs("button",{className:"settings-menu-item",onClick:()=>{w.onClick(),p(!1)},children:[c.jsx("span",{children:w.icon}),c.jsx("span",{children:w.label})]},T))}),document.body)]})]})]})}function aO({showSidebar:e,setShowSidebar:t,session:n,viewMode:i,setViewMode:r,onOpenRoutine:a,onOpenMemo:s,onScrollToKeyThoughts:l,onOpenGanttChart:o,onOpenEncouragementModal:u,onOpenDummyModal:f,onOpenAddSection:d,onOpenHiddenSections:m,onLogout:h}){var p,_;return c.jsxs(c.Fragment,{children:[e&&c.jsx("div",{className:"sidebar-overlay",onClick:()=>t(!1)}),c.jsxs("div",{className:`sidebar ${e?"open":""}`,children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsx("h2",{children:""}),c.jsx("button",{className:"sidebar-close",onClick:()=>t(!1),children:""})]}),n&&n.user&&c.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[((p=n.user.user_metadata)==null?void 0:p.avatar_url)&&c.jsx("img",{src:n.user.user_metadata.avatar_url,alt:"",style:{width:"40px",height:"40px",borderRadius:"50%"}}),c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((_=n.user.user_metadata)==null?void 0:_.full_name)||n.user.email}),c.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.user.email})]})]}),c.jsxs("div",{className:"sidebar-content",children:[c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{const x=i==="vertical"?"horizontal":"vertical";r(x),localStorage.setItem("viewMode",x),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:i==="vertical"?"":""}),c.jsx("span",{children:i==="vertical"?" ":" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{d(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{m(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:"  "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{a(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{s(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{l(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{o(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{u(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:"  "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{f(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:"  "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{confirm(" ?")&&h()},style:{marginTop:"auto",borderTop:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 100, 100, 0.9)"},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:""})]})]})]})]})}function sO({selectedDate:e,onDateChange:t,onPrevDay:n,onNextDay:i}){return c.jsxs("div",{className:"date-nav-section",children:[c.jsxs("div",{className:"date-display-wrapper",children:[c.jsx("span",{className:"date-display",children:Bn(e)}),c.jsx("input",{type:"date",value:Be(e),onChange:t,className:"date-picker-input"})]}),c.jsx("button",{onClick:n,className:"date-nav-button",children:""}),c.jsx("button",{onClick:i,className:"date-nav-button",children:""})]})}function lO({showSidebar:e,setShowSidebar:t,selectedDate:n,setSelectedDate:i,onDateChange:r,onPrevDay:a,onNextDay:s,showEncouragementEmoji:l,currentEncouragementMessage:o,onEncouragementClick:u,onQuickAdd:f}){const[d,m]=b.useState(""),[h,p]=b.useState(!1),_=async x=>{if(x.key==="Enter"&&!x.shiftKey&&d.trim()){x.preventDefault(),p(!0);try{await f(d.trim()),m("")}catch(v){console.error("Quick add error:",v)}finally{p(!1)}}};return c.jsx("div",{className:"header-fixed",children:c.jsxs("div",{className:"settings-bar",children:[c.jsx("button",{className:"hamburger-menu",onClick:()=>t(!e),title:"",children:c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{x:"2",y:"4",width:"16",height:"2",rx:"1",fill:"currentColor"}),c.jsx("rect",{x:"2",y:"9",width:"16",height:"2",rx:"1",fill:"currentColor"}),c.jsx("rect",{x:"2",y:"14",width:"16",height:"2",rx:"1",fill:"currentColor"})]})}),c.jsx(sO,{selectedDate:n,onDateChange:r,onPrevDay:a,onNextDay:s}),c.jsx("div",{className:"encouragement-section",children:iO(n)?c.jsx("div",{className:"encouragement-message",onClick:u,title:"    !",children:l?c.jsx("span",{className:"encouragement-emoji",children:"  "}):o||"!"}):c.jsx("button",{onClick:()=>i(new Date),className:"today-link",title:" ",children:"  "})}),c.jsx("div",{className:"quick-input-wrapper",children:c.jsx("input",{type:"text",value:d,onChange:x=>m(x.target.value),onKeyDown:_,placeholder:" Quick   (Enter )",className:"quick-input",disabled:h})})]})})}function oO({viewMode:e,currentSectionIndex:t,sectionsContainerRef:n,visibleSectionCount:i=3}){return e!=="horizontal"?null:c.jsx("div",{className:"section-pagination-dots",onTouchStart:r=>{const a=r.touches[0];r.currentTarget.dataset.touchStartX=a.clientX,r.currentTarget.dataset.touchStartTime=Date.now()},onTouchMove:r=>{r.currentTarget.dataset.touchMoved="true"},onTouchEnd:r=>{const a=parseFloat(r.currentTarget.dataset.touchStartX||"0"),s=parseInt(r.currentTarget.dataset.touchStartTime||"0"),l=r.currentTarget.dataset.touchMoved==="true",o=r.changedTouches[0].clientX,u=Date.now()-s;if(delete r.currentTarget.dataset.touchStartX,delete r.currentTarget.dataset.touchStartTime,delete r.currentTarget.dataset.touchMoved,l&&u<500){const f=a-o,d=n.current;if(!d)return;const m=d.querySelectorAll(".section-block");Math.abs(f)>50&&(f>0&&t<m.length-1?m[t+1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}):f<0&&t>0&&m[t-1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}))}},children:Array.from({length:i},(r,a)=>c.jsx("button",{className:`pagination-dot ${t===a?"active":""}`,onClick:()=>{const s=n.current;if(!s)return;const l=s.querySelectorAll(".section-block");l[a]&&l[a].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},a))})}function Uu({title:e,className:t,inputValue:n,setInputValue:i,onAddTodo:r,isAdding:a,placeholder:s,children:l,editable:o=!1,onTitleChange:u,settingsMenuItems:f=[],headerActions:d}){return c.jsxs("div",{className:t,children:[c.jsx(ph,{title:e,editable:o,onTitleChange:u,settingsMenuItems:f,customActions:d}),c.jsxs("div",{className:"section-input",children:[c.jsx("input",{type:"text",value:n,onChange:m=>i(m.target.value),onKeyDown:m=>{m.key==="Enter"&&r()},placeholder:s,className:"todo-input",disabled:a}),c.jsx("button",{onClick:r,className:"add-button",disabled:a,children:""})]}),l]})}function sa({todo:e,index:t,onToggle:n,onDelete:i,onEdit:r,formatDate:a,formatDateOnly:s,isFocused:l,onFocus:o,onAddSubTodo:u,subtodos:f,level:d=0,onCreateRoutine:m,routines:h,onShowRoutineHistory:p,onOpenRoutineSetupModal:_,onOpenHistoryModal:x,currentPageDate:v,isPendingRoutine:g=!1,onRemoveFromUI:y,showSuccessMessage:w,activeId:T,overId:j,hideNumber:S=!1}){const[E,A]=b.useState(!1),[O,C]=b.useState(!1),[L,Q]=b.useState(e.text),[re,oe]=b.useState(!1),[N,H]=b.useState(!1),[J,be]=b.useState(!1),[fe,Xe]=b.useState(""),[Ve,ke]=b.useState(!1),[Me,Ue]=b.useState([]),[Ye,Y]=b.useState(!1),[R,z]=b.useState(!1),[k,ee]=b.useState([]),[K,te]=b.useState([]),[U,ae]=b.useState([]),[de,F]=b.useState(null),[le,he]=b.useState(!1),[ye,wt]=b.useState(null),[vt,jt]=b.useState(!1),[ot,tt]=b.useState([]),[V,$]=b.useState(""),[I,ie]=b.useState({}),[ne,_e]=b.useState(!1),[Se,Ie]=b.useState(null),[$e,Te]=b.useState([]),[De,me]=b.useState("this-only"),[Ke,je]=b.useState(null),Je=e.routine_id?h.find(X=>X.id===e.routine_id):null,{attributes:Mt,listeners:Ge,setNodeRef:ce,transform:pt,transition:Xt,isDragging:Lt}=yh({id:e.id}),Vt=e.id===T,Ut=e.id===j&&T&&T!==j,bn={cursor:"grab",opacity:Vt?.4:1},bt=e.text.length>30,Rn=()=>{C(!0),Q(e.text)},rn=async()=>{L.trim()&&L!==e.text&&await r(e.id,L.trim()),C(!1)},tn=async X=>{X.key==="Enter"&&!X.shiftKey?(X.preventDefault(),await rn()):X.key==="Escape"&&(C(!1),Q(e.text))},kn=X=>{tt(P=>P.includes(X)?P.filter(St=>St!==X):[...P,X])},Mn=X=>["sun","mon","tue","wed","thu","fri","sat"][X];b.useEffect(()=>{ye==="history"&&!I[e.id]&&!ne&&(async()=>{_e(!0);try{const{data:P,error:St}=await ge.from("todo_history").select("*").eq("todo_id",e.id).order("changed_at",{ascending:!1});if(St)throw St;ie(zt=>({...zt,[e.id]:P||[]}))}catch(P){console.error("Error fetching history:",P)}finally{_e(!1)}})()},[ye,e.id,I,ne]),b.useEffect(()=>{ye==="routine-stats"&&Je&&(!Se||Se.id!==Je.id)&&(async()=>{try{const{data:P,error:St}=await ge.from("todos").select("*").eq("routine_id",Je.id).eq("deleted",!1).maybeSingle();if(St)throw St;if(P&&P.visible_dates){const zt=P.visible_dates.sort().map(ze=>{var xt;return{id:`${P.id}-${ze}`,date:ze,text:P.text,completed:((xt=P.completed_dates)==null?void 0:xt.includes(ze))||!1}});Te(zt),Ie(Je)}}catch(P){console.error("Error fetching routine history:",P)}})()},[ye,Je,Se]);const an=X=>{te(P=>P.includes(X)?P.filter(St=>St!==X):[...P,X])};return c.jsxs("div",{ref:ce,style:{...bn,borderTop:Ut?"2px solid rgba(99, 102, 241, 0.8)":"2px solid transparent"},className:"todo-item-container",children:[c.jsx("span",{className:"drag-handle",...Mt,...Ge,title:"  "}),!S&&c.jsx("span",{className:"todo-number",children:t+1}),c.jsx("div",{className:"todo-item-wrapper",children:c.jsxs("div",{className:`todo-item ${e.completed?"completed":""} ${E?"expanded":""} ${Lt?"drag-mode":""}`,children:[c.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>n(e.id),className:"todo-checkbox"}),c.jsx("div",{className:"todo-content",onClick:()=>!O&&bt&&A(!E),onDoubleClick:Rn,style:{cursor:O?"text":bt?"pointer":"default"},children:O?c.jsx("textarea",{value:L,onChange:X=>Q(X.target.value),onBlur:rn,onKeyDown:tn,className:"todo-edit-input",autoFocus:!0,rows:1,style:{minHeight:"1.35em",resize:"vertical",overflow:"hidden"},onInput:X=>{X.target.style.height="auto",X.target.style.height=X.target.scrollHeight+"px"}}):c.jsx("span",{className:`todo-text ${E?"expanded":""}`,children:e.text})}),(()=>{const X=e.completed&&e.completed_at&&new Date(e.completed_at).toISOString().split("T")[0]!==e.date,P=e.routine_id&&Je,St=g||e.is_pending_routine;return(f.length>0||X||P||St)&&c.jsxs("div",{className:"todo-badges",children:[X&&(()=>{const zt=new Date(e.completed_at).toISOString().split("T")[0],ze=new Date(e.completed_at).getDate();return c.jsxs("span",{className:"completed-date-badge",title:`${zt} `,children:[ze,""]})})(),P&&(()=>{const zt=v||e.date,ze=new Date(zt+"T00:00:00"),xt=ze.getMonth()+1,at=ze.getDate(),nn=["","","","","","",""][ze.getDay()],di=`${xt}/${at}(${nn})`;return c.jsxs("span",{className:"routine-date-badge",title:`${Je.text} `,children:["for ",di]})})(),St&&c.jsx("span",{className:"pending-routine-badge",title:"  ",children:""}),f.length>0&&c.jsx("span",{className:"todo-badge clickable",title:" ",onClick:zt=>{zt.stopPropagation(),N?(oe(!1),H(!1),be(!1)):(oe(!0),H(!0),be(!1),ke(!1),z(!1))},children:""})]})})(),!O&&!e.parent_id&&c.jsx("button",{className:"todo-more-button",onClick:X=>{X.stopPropagation(),he(!0),wt(null),jt(!1),tt([]),$("")},title:"",children:""}),N&&!e.parent_id&&c.jsxs("div",{className:"subtodos-in-item",children:[f&&f.length>0&&f.map((X,P)=>c.jsx(sa,{todo:X,index:P,onToggle:n,onDelete:i,onEdit:r,formatDate:a,formatDateOnly:s,isFocused:l,onFocus:o,onAddSubTodo:u,subtodos:[],level:d+1,routines:h,onShowRoutineHistory:p,showSuccessMessage:w,onOpenRoutineSetupModal:_,onOpenHistoryModal:x,currentPageDate:v},X.id)),J&&c.jsxs("div",{className:"subtodo-input-section",children:[c.jsx("input",{type:"text",value:fe,onChange:X=>Xe(X.target.value),onKeyDown:X=>{X.key==="Enter"&&fe.trim()&&(u(e.id,fe.trim()),Xe(""))},placeholder:" ...",className:"subtodo-input",autoFocus:!0}),c.jsx("button",{onClick:()=>{fe.trim()&&(u(e.id,fe.trim()),Xe(""))},className:"subtodo-add-button",children:""}),c.jsx("button",{onClick:()=>{Xe("")},className:"subtodo-cancel-button",children:""})]})]})]})}),le&&py.createPortal(c.jsx("div",{className:"modal-overlay",onClick:()=>he(!1),children:c.jsxs("div",{className:"actions-modal-content",onClick:X=>X.stopPropagation(),children:[c.jsxs("div",{className:"actions-modal-header",children:[c.jsx("h3",{children:" "}),c.jsx("button",{onClick:()=>he(!1),className:"modal-close-button",children:""})]}),c.jsx("div",{className:"todo-edit-section",children:c.jsx("textarea",{value:L,onChange:X=>Q(X.target.value),onBlur:()=>{L.trim()!==""&&L!==e.text?r(e.id,L):L.trim()===""&&Q(e.text)},className:"todo-edit-textarea",placeholder:"  ...",rows:3})}),c.jsxs("div",{className:"actions-modal-body",children:[c.jsxs("div",{className:"actions-menu",children:[c.jsxs("button",{className:`action-menu-item ${ye==="nanotodo"?"active":""}`,onClick:()=>wt("nanotodo"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item ${ye==="routine"?"active":""}`,onClick:()=>{wt("routine");const X=h.find(P=>P.id===e.routine_id);X?(tt(X.days||[]),$(X.time_slot||""),jt(!1)):(tt([]),$(""),jt(!0))},children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item ${ye==="history"?"active":""}`,onClick:()=>wt("history"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),e.routine_id&&Je&&c.jsxs("button",{className:`action-menu-item ${ye==="routine-stats"?"active":""}`,onClick:()=>wt("routine-stats"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item delete ${ye==="delete"?"active":""}`,onClick:()=>wt("delete"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]})]}),c.jsxs("div",{className:"actions-detail",children:[!ye&&c.jsx("div",{className:"actions-detail-empty",children:c.jsx("p",{children:"  "})}),ye==="nanotodo"&&c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:" "}),c.jsxs("div",{className:"nanotodo-section-in-modal",children:[f&&f.length>0&&c.jsx("div",{className:"subtodo-list-in-modal",children:f.map(X=>c.jsxs("div",{className:"subtodo-item-in-modal",children:[c.jsx("input",{type:"checkbox",checked:X.completed,onChange:()=>n(X.id),className:"subtodo-checkbox-modal"}),c.jsx("span",{className:`subtodo-text-modal ${X.completed?"completed":""}`,children:X.text}),c.jsx("button",{onClick:()=>i(X.id),className:"subtodo-delete-modal",title:"",children:""})]},X.id))}),c.jsxs("div",{className:"subtodo-input-section-modal",children:[c.jsx("input",{type:"text",value:fe,onChange:X=>Xe(X.target.value),onKeyDown:X=>{X.key==="Enter"&&fe.trim()&&(u(e.id,fe.trim()),Xe(""))},placeholder:" ...",className:"subtodo-input-modal"}),c.jsx("button",{onClick:()=>{fe.trim()&&(u(e.id,fe.trim()),Xe(""))},className:"subtodo-add-button-modal",children:""})]})]})]}),ye==="routine"&&(()=>{const X=h.find(P=>P.id===e.routine_id);return c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsx("div",{className:"routine-setup-inline",children:X&&!vt?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-current-info",children:[c.jsx("div",{className:"routine-info-title",children:" :"}),c.jsx("div",{className:"routine-days-display",children:Cr.filter(P=>X.days.includes(P.key)).map(P=>c.jsx("span",{className:"routine-day-badge",children:P.label},P.key))}),X.time_slot&&c.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",X.time_slot]})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:P=>{P.stopPropagation(),X&&(tt(X.days),$(X.time_slot||""),jt(!0))},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:async P=>{P.stopPropagation(),X&&e&&(await m(e.id,e.text,[],null,!0),he(!1))},className:"routine-remove-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"routine-setup-title",children:vt?" :":"  :"}),c.jsx("div",{className:"day-selector-inline",children:Cr.map(P=>c.jsx("button",{onClick:St=>{St.stopPropagation(),kn(P.key)},className:`day-button-inline ${ot.includes(P.key)?"selected":""}`,children:P.label},P.key))}),c.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[c.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),c.jsx(vh,{value:V,onChange:P=>$(P)})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:async P=>{P.stopPropagation(),e&&(vt&&X?await m(e.id,e.text,ot,X.id,!1,V):await m(e.id,e.text,ot,null,!1,V),jt(!1),he(!1))},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:P=>{P.stopPropagation(),jt(!1),tt([]),$("")},className:"routine-cancel-button",children:""})]})]})})]})})(),ye==="history"&&(()=>{const X=e.visible_dates&&e.visible_dates.length>0?e.visible_dates:[e.date],P=X[0],St=X.map(ze=>({id:`${e.id}-${ze}`,date:ze})),zt=I[e.id]||[];return ne?c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:" ..."})]}):c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsxs("div",{className:"todo-history",children:[c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:":"}),c.jsx("span",{className:"history-value",children:a(e.created_at)})]}),c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:s(P?new Date(P+"T00:00:00"):new Date(e.date+"T00:00:00"))})]}),St.length>0&&c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:St.map((ze,xt)=>{const at=ze.date===e.date,mt=s(new Date(ze.date+"T00:00:00"));return c.jsxs("span",{children:[xt>0&&"  ",c.jsxs("span",{style:at?{fontWeight:"bold",color:"#4CAF50"}:{},children:[mt.split("(")[0],at?"()":""]})]},ze.id)})})]}),(()=>{const ze=new Date(e.created_at).toISOString().split("T")[0],xt=e.date;return ze!==xt&&St.length===0?c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:s(new Date(e.date+"T00:00:00"))})]}):null})(),zt.length>0&&c.jsxs("div",{className:"history-changes-list",children:[c.jsxs("div",{className:"history-changes-header",children:["  (",zt.length,")"]}),zt.map(ze=>c.jsxs("div",{className:"history-record-compact",children:[c.jsxs("div",{className:"history-record-summary",children:[c.jsxs("div",{className:"history-change-time",children:[a(ze.changed_at),ze.changed_on_date&&c.jsxs("span",{className:"history-page-info",children:[" (: ",s(new Date(ze.changed_on_date+"T00:00:00")),")"]})]}),c.jsx("button",{className:"history-detail-button",onClick:xt=>{xt.stopPropagation(),an(ze.id)},children:K.includes(ze.id)?"":""})]}),K.includes(ze.id)&&c.jsxs("div",{className:"history-change",children:[c.jsxs("div",{className:"history-change-item history-before",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:ze.previous_text})]}),c.jsx("div",{className:"history-change-arrow",children:""}),c.jsxs("div",{className:"history-change-item history-after",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:ze.new_text})]})]})]},ze.id))]})]})]})})(),ye==="routine-stats"&&Je&&(()=>{if(!Se||Se.id!==Je.id||$e.length===0)return c.jsxs("div",{className:"actions-detail-content",children:[c.jsxs("h4",{children:[" ",Je.text," "]}),c.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:!Se||Se.id!==Je.id?" ...":" ."})]});const X=$e[0],P=new Date(X.date),St=new Date,zt={};$e.forEach(at=>{zt[at.date]=at.completed});const ze=[];let xt=new Date(P);for(;xt<=St;){const at=xt.getFullYear(),mt=xt.getMonth(),nn=`${at}-${mt+1}`;ze.find(as=>as.key===nn)||ze.push({key:nn,year:at,month:mt,days:[]});const di=ze.find(as=>as.key===nn),ri=Be(xt),is=xt.getDay(),rs=Mn(is),xl=Je.days.includes(rs);di.days.push({date:new Date(xt),dateStr:ri,day:xt.getDate(),dayOfWeek:is,isCompleted:zt[ri]===!0,isRoutineDay:xl,hasTodo:zt[ri]!==void 0}),xt.setDate(xt.getDate()+1)}return c.jsxs("div",{className:"actions-detail-content",children:[c.jsxs("h4",{children:[" ",Je.text," "]}),c.jsxs("div",{className:"routine-history-content",children:[c.jsx("div",{className:"routine-history-calendar",children:ze.map(at=>c.jsxs("div",{className:"history-month",children:[c.jsxs("h3",{className:"history-month-title",children:[at.year," ",at.month+1,""]}),c.jsxs("div",{className:"history-calendar-grid",children:[c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),at.days.length>0&&Array(at.days[0].dayOfWeek).fill(null).map((mt,nn)=>c.jsx("div",{className:"history-day-cell empty"},`empty-${nn}`)),at.days.map((mt,nn)=>{if(nn>0&&mt.day===1){const ri=6-at.days[nn-1].dayOfWeek;return c.jsxs(dt.Fragment,{children:[Array(ri).fill(null).map((is,rs)=>c.jsx("div",{className:"history-day-cell empty"},`empty-end-${nn}-${rs}`)),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsxs("div",{className:`history-day-cell ${mt.isCompleted?"completed":""} ${mt.isRoutineDay?"":"not-routine-day"}`,children:[c.jsx("span",{className:"day-number",children:mt.day}),mt.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]})]},mt.dateStr)}return c.jsxs("div",{className:`history-day-cell ${mt.isCompleted?"completed":""} ${mt.isRoutineDay?"":"not-routine-day"}`,title:`${mt.dateStr}${mt.isRoutineDay?"":" (  )"}${mt.isCompleted?" - ":mt.hasTodo?" - ":""}`,children:[c.jsx("span",{className:"day-number",children:mt.day}),mt.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]},mt.dateStr)})]})]},at.key))}),c.jsxs("div",{className:"routine-history-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:" :"}),c.jsxs("span",{className:"stat-value",children:[$e.length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value completed",children:[$e.filter(at=>at.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value incomplete",children:[$e.filter(at=>!at.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value",children:[$e.length>0?Math.round($e.filter(at=>at.completed).length/$e.length*100):0,"%"]})]})]})]})]})})(),ye==="delete"&&(()=>{const X=async()=>{window.confirm(`  ?

  5    .`)&&(await i(e.id,De),he(!1))};return c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"   "}),c.jsxs("p",{style:{fontSize:"0.9rem",color:"#9ca3af",marginBottom:"1rem",lineHeight:"1.6"},children:["    .",c.jsx("br",{}),"    ."]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:De==="this-only"?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"},onClick:()=>me("this-only"),children:[c.jsx("input",{type:"radio",name:"delete-option",value:"this-only",checked:De==="this-only",onChange:P=>me(P.target.value),style:{width:"16px",height:"16px",cursor:"pointer"}}),c.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[c.jsx("span",{style:{fontWeight:"600"},children:" "}),c.jsx("span",{style:{fontSize:"0.85rem",color:"#9ca3af"},children:" "})]})}),c.jsx("button",{onMouseEnter:()=>je("this-only"),onMouseLeave:()=>je(null),onClick:P=>{P.stopPropagation(),je(Ke==="this-only"?null:"this-only")},style:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"?"}),Ke==="this-only"&&c.jsx("div",{style:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"  ,  ,   "})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:De==="from-now"?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"},onClick:()=>me("from-now"),children:[c.jsx("input",{type:"radio",name:"delete-option",value:"from-now",checked:De==="from-now",onChange:P=>me(P.target.value),style:{width:"16px",height:"16px",cursor:"pointer"}}),c.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[c.jsx("span",{style:{fontWeight:"600"},children:"   "}),c.jsx("span",{style:{fontSize:"0.85rem",color:"#9ca3af"},children:" "})]})}),c.jsx("button",{onMouseEnter:()=>je("from-now"),onMouseLeave:()=>je(null),onClick:P=>{P.stopPropagation(),je(Ke==="from-now"?null:"from-now")},style:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"?"}),Ke==="from-now"&&c.jsx("div",{style:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"  ,  ,   "})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:De==="all"?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"},onClick:()=>me("all"),children:[c.jsx("input",{type:"radio",name:"delete-option",value:"all",checked:De==="all",onChange:P=>me(P.target.value),style:{width:"16px",height:"16px",cursor:"pointer"}}),c.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[c.jsx("span",{style:{fontWeight:"600"},children:" "}),c.jsx("span",{style:{fontSize:"0.85rem",color:"#9ca3af"},children:" "})]})}),c.jsx("button",{onMouseEnter:()=>je("all"),onMouseLeave:()=>je(null),onClick:P=>{P.stopPropagation(),je(Ke==="all"?null:"all")},style:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"?"}),Ke==="all"&&c.jsx("div",{style:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"  ,  ,   "})]})]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[c.jsx("button",{onClick:()=>he(!1),style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#9ca3af",cursor:"pointer",fontSize:"0.9rem"},children:""}),c.jsx("button",{onClick:X,style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:""})]})]})})()]})]})]})}),document.body)]})}function cO({showRoutineModal:e,onClose:t,routineInput:n,setRoutineInput:i,isAddingRoutine:r,selectedDays:a,onToggleDay:s,selectedTimeSlot:l,setSelectedTimeSlot:o,onAddRoutine:u,routines:f,editingRoutineId:d,editingRoutineText:m,setEditingRoutineText:h,editingRoutineDays:p,onToggleEditDay:_,onStartEdit:x,onSaveEdit:v,onCancelEdit:g,onDelete:y,onShowHistory:w}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content routine-modal",onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-add-section",children:[c.jsx("input",{type:"text",value:n,onChange:T=>i(T.target.value),placeholder:"  ...",className:"routine-input",disabled:r}),c.jsx("div",{className:"day-selector",children:Cr.map(T=>c.jsx("button",{onClick:()=>s(T.key),className:`day-button ${a.includes(T.key)?"selected":""}`,disabled:r,children:T.label},T.key))}),c.jsxs("div",{className:"time-slot-selector",children:[c.jsx("label",{className:"time-slot-label",children:"  ()"}),c.jsx(vh,{value:l,onChange:T=>o(T)})]}),c.jsx("button",{onClick:u,className:"add-routine-button",disabled:r||n.trim()==="",children:" "})]}),c.jsx("div",{className:"routine-list",children:f.length===0?c.jsx("p",{className:"empty-message",children:"  ."}):f.map(T=>c.jsx("div",{className:"routine-item",children:d===T.id?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-edit-content",children:[c.jsx("input",{type:"text",value:m,onChange:j=>h(j.target.value),className:"routine-edit-input",placeholder:" "}),c.jsx("div",{className:"day-selector-inline",children:Cr.map(j=>c.jsx("button",{onClick:()=>_(j.key),className:`day-button-inline ${p.includes(j.key)?"selected":""}`,children:j.label},j.key))})]}),c.jsxs("div",{className:"routine-item-actions",children:[c.jsx("button",{onClick:v,className:"routine-save-button",disabled:m.trim()===""||p.length===0,children:""}),c.jsx("button",{onClick:g,className:"routine-cancel-edit-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-item-content",children:[c.jsx("span",{className:"routine-text",children:T.text}),c.jsxs("div",{className:"routine-meta",children:[c.jsx("div",{className:"routine-days",children:Cr.filter(j=>T.days.includes(j.key)).map(j=>c.jsx("span",{className:"routine-day-badge",children:j.label},j.key))}),T.time_slot&&c.jsx("span",{className:"routine-time-slot",children:T.time_slot})]})]}),c.jsxs("div",{className:"routine-item-actions",children:[c.jsx("button",{onClick:()=>w(T),className:"routine-history-button",title:" ",children:""}),c.jsx("button",{onClick:()=>x(T),className:"routine-edit-button",title:"",children:""}),c.jsx("button",{onClick:()=>y(T.id),className:"routine-delete-button",title:"",children:""})]})]})},T.id))})]})}):null}const uO=e=>["sun","mon","tue","wed","thu","fri","sat"][e];function dO({showRoutineHistory:e,onClose:t,selectedRoutine:n,routineHistoryData:i}){return!e||!n?null:c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content routine-history-modal",onClick:r=>r.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:[" ",n.text," "]}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-history-content",children:[(()=>{if(i.length===0)return c.jsx("p",{className:"empty-message",children:"   ."});const r=i[0],a=new Date(r.date),s=new Date,l={};i.forEach(f=>{l[f.date]=f.completed});const o=[];let u=new Date(a);for(;u<=s;){const f=u.getFullYear(),d=u.getMonth(),m=`${f}-${d+1}`;o.find(g=>g.key===m)||o.push({key:m,year:f,month:d,days:[]});const h=o.find(g=>g.key===m),p=Be(u),_=u.getDay(),x=uO(_),v=n.days.includes(x);h.days.push({date:new Date(u),dateStr:p,day:u.getDate(),dayOfWeek:_,isCompleted:l[p]===!0,isRoutineDay:v,hasTodo:l[p]!==void 0}),u.setDate(u.getDate()+1)}return c.jsx("div",{className:"routine-history-calendar",children:o.map(f=>c.jsxs("div",{className:"history-month",children:[c.jsxs("h3",{className:"history-month-title",children:[f.year," ",f.month+1,""]}),c.jsxs("div",{className:"history-calendar-grid",children:[c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),f.days.length>0&&Array(f.days[0].dayOfWeek).fill(null).map((d,m)=>c.jsx("div",{className:"history-day-cell empty"},`empty-${m}`)),f.days.map((d,m)=>{if(m>0&&d.day===1){const p=6-f.days[m-1].dayOfWeek;return c.jsxs(c.Fragment,{children:[Array(p).fill(null).map((_,x)=>c.jsx("div",{className:"history-day-cell empty"},`empty-end-${m}-${x}`)),c.jsx("div",{className:"history-day-header",children:""},d.dateStr),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsxs("div",{className:`history-day-cell ${d.isCompleted?"completed":""} ${d.isRoutineDay?"":"not-routine-day"}`,children:[c.jsx("span",{className:"day-number",children:d.day}),d.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]})]})}return c.jsxs("div",{className:`history-day-cell ${d.isCompleted?"completed":""} ${d.isRoutineDay?"":"not-routine-day"}`,title:`${d.dateStr}${d.isRoutineDay?"":" (  )"}${d.isCompleted?" - ":d.hasTodo?" - ":""}`,children:[c.jsx("span",{className:"day-number",children:d.day}),d.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]},d.dateStr)})]})]},f.key))})})(),c.jsxs("div",{className:"routine-history-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:" :"}),c.jsxs("span",{className:"stat-value",children:[i.length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value completed",children:[i.filter(r=>r.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value incomplete",children:[i.filter(r=>!r.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value",children:[i.length>0?Math.round(i.filter(r=>r.completed).length/i.length*100):0,"%"]})]})]})]})]})})}function fO({title:e,className:t,content:n,setContent:i,isSaving:r,placeholder:a,settingsMenuItems:s=[],children:l}){const o=b.useRef(null);return b.useEffect(()=>{o.current&&(o.current.style.height="auto",o.current.style.height=o.current.scrollHeight+"px")},[n]),c.jsxs("div",{className:t,children:[c.jsx(ph,{title:e,settingsMenuItems:s,customActions:r&&c.jsx("span",{className:"memo-saving-indicator",children:" ..."})}),c.jsx("textarea",{ref:o,value:n,onChange:u=>i(u.target.value),className:"memo-textarea",placeholder:a}),l]})}function qb({block:e,blocks:t,setBlocks:n,focusedBlockId:i,setFocusedBlockId:r,parentBlock:a,rootSetBlocks:s,draggingChildIds:l=[],activeId:o,overId:u}){const{attributes:f,listeners:d,setNodeRef:m,transform:h,transition:p,isDragging:_}=yh({id:e.id}),x=e.id===o,v=e.id===u&&o&&o!==u,g={cursor:"grab",opacity:x?.4:1,borderTop:v?"2px solid rgba(99, 102, 241, 0.8)":"2px solid transparent"};return c.jsx("div",{ref:m,style:g,children:c.jsx(Lb,{block:e,blocks:t,setBlocks:n,focusedBlockId:i,setFocusedBlockId:r,dragHandleProps:{...f,...d},parentBlock:a,rootSetBlocks:s,draggingChildIds:l,activeId:o,overId:u})})}function Lb({block:e,blocks:t,setBlocks:n,focusedBlockId:i,setFocusedBlockId:r,dragHandleProps:a,parentBlock:s,rootSetBlocks:l,draggingChildIds:o=[],activeId:u,overId:f}){const d=b.useRef(null),m=b.useRef(!1);b.useEffect(()=>{if(i===e.id&&d.current){d.current.focus();const T=d.current.value.length;d.current.setSelectionRange(T,T)}},[i,e.id]),b.useEffect(()=>{d.current&&(d.current.style.height="auto",d.current.style.height=d.current.scrollHeight+"px")},[e.content]);const h=(T,j,S)=>T.map(E=>{if(E.id===j){const A=S(E);return{...A,children:Array.isArray(A.children)?A.children:[]}}return Array.isArray(E.children)&&E.children.length>0?{...E,children:h(E.children,j,S)}:E}),p=T=>{n(j=>h(j,e.id,S=>({...S,content:T})))},_=T=>{n(j=>h(j,e.id,S=>({...S,children:typeof T=="function"?T(S.children):T})))},x=()=>{n(T=>h(T,e.id,j=>{const S=!j.isOpen;if(S&&(!Array.isArray(j.children)||j.children.length===0)){const E={id:Date.now()+Math.random(),type:"toggle",content:"",children:[],isOpen:!0};return{...j,isOpen:S,children:[E]}}return{...j,isOpen:S,children:Array.isArray(j.children)?j.children:[]}}))},v=()=>{const T=t.findIndex(S=>S.id===e.id);if(T<=0)return;const j=t[T-1];n(S=>{const E=[...S];E.splice(T,1);const A={...j,children:[...Array.isArray(j.children)?j.children:[],e],isOpen:!0};return E[T-1]=A,E})},g=()=>{!s||!l||l(T=>{const j=(A,O,C)=>{const L=[];for(let Q=0;Q<A.length;Q++){const re=A[Q];if(re.id===O){const oe=re.children.filter(H=>H.id!==C.id),N={...re,children:oe};L.push(N),L.push(C)}else if(Array.isArray(re.children)&&re.children.length>0){const oe=j(re.children,O,C);oe!==re.children?L.push({...re,children:oe}):L.push(re)}else L.push(re)}return L},S=A=>A.map(O=>{const C=Array.isArray(O.children)&&O.children.length>0;return!C&&O.isOpen?{...O,isOpen:!1}:C?{...O,children:S(O.children)}:O}),E=j(T,s.id,e);return S(E)})},y=T=>{const j=[],S=E=>{for(const A of E)j.push(A),A.isOpen&&Array.isArray(A.children)&&A.children.length>0&&S(A.children)};return S(T),j},w=T=>{if(T.key==="Enter"){if(T.shiftKey)return;{if(m.current){T.preventDefault(),T.stopPropagation();return}T.preventDefault(),T.stopPropagation(),m.current=!0;const j=T.target.selectionStart,S={id:Date.now()+Math.random(),type:"toggle",content:"",children:[],isOpen:!0};j===0?(n(E=>{const A=E.findIndex(C=>C.id===e.id);if(A===-1)return E;const O=[...E];return O.splice(A,0,S),O}),setTimeout(()=>{r(e.id),setTimeout(()=>{m.current=!1},100)},0)):(n(E=>{const A=E.findIndex(C=>C.id===e.id);if(A===-1)return E;const O=[...E];return O.splice(A+1,0,S),O}),setTimeout(()=>{r(S.id),setTimeout(()=>{m.current=!1},100)},0))}}else if(T.key==="Tab"&&T.shiftKey)T.preventDefault(),T.stopPropagation(),s&&l&&g();else if(T.key==="Tab"&&!T.shiftKey)T.preventDefault(),T.stopPropagation(),v();else if(T.key==="Backspace"){const j=T.target.selectionStart;if(e.content===""||j===0){const O=(()=>{if(l){let Q=[];return l(re=>(Q=re,re)),Q}return t})(),C=y(O),L=C.findIndex(Q=>Q.id===e.id);if(L>0){T.preventDefault(),T.stopPropagation();const Q=C[L-1],re=(N,H)=>N.filter(J=>J.id!==H).map(J=>Array.isArray(J.children)&&J.children.length>0?{...J,children:re(J.children,H)}:J),oe=N=>N.map(H=>{const J=Array.isArray(H.children)&&H.children.length>0;return!J&&H.isOpen?{...H,isOpen:!1}:J?{...H,children:oe(H.children)}:H});l?l(N=>{const H=re(N,e.id);return oe(H)}):n(N=>{const H=re(N,e.id);return oe(H)}),setTimeout(()=>{r(Q.id)},0)}}}else if(T.key==="ArrowUp"&&!T.shiftKey){T.preventDefault(),T.stopPropagation();const S=(()=>{if(l){let O=[];return l(C=>(O=C,C)),O}return t})(),E=y(S),A=E.findIndex(O=>O.id===e.id);A>0&&r(E[A-1].id)}else if(T.key==="ArrowDown"&&!T.shiftKey){T.preventDefault(),T.stopPropagation();const S=(()=>{if(l){let O=[];return l(C=>(O=C,C)),O}return t})(),E=y(S),A=E.findIndex(O=>O.id===e.id);A<E.length-1&&r(E[A+1].id)}};return c.jsxs("div",{className:"notion-block",children:[a&&c.jsx("div",{className:"notion-drag-handle",...a,title:" ",children:""}),c.jsx("div",{className:"notion-block-controls",children:c.jsx("button",{className:"block-type-button",onClick:x,title:": /",style:{transform:e.isOpen?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""})}),c.jsx("div",{className:"notion-block-content",children:c.jsx("textarea",{ref:d,value:e.content,onChange:T=>p(T.target.value),onKeyDown:w,onFocus:()=>r(e.id),placeholder:"",className:"notion-block-input",rows:1})}),e.isOpen&&Array.isArray(e.children)&&e.children.length>0&&c.jsx("div",{className:"notion-block-children",children:e.children.map(T=>c.jsx(qb,{block:T,blocks:e.children,setBlocks:_,focusedBlockId:i,setFocusedBlockId:r,parentBlock:e,rootSetBlocks:l||n,draggingChildIds:o,activeId:u,overId:f},T.id))})]})}function hO({blocks:e,setBlocks:t,focusedBlockId:n,setFocusedBlockId:i,onShowHistory:r,onOpenViewer:a,settingsMenuItems:s=[]}){const[l,o]=b.useState(null),[u,f]=b.useState(null),d=ch(Da(wl,{activationConstraint:{distance:3}}),Da(jc,{coordinateGetter:Hb})),m=S=>S.map(E=>{const A=Array.isArray(E.children)&&E.children.length>0;return!A&&E.isOpen?{...E,isOpen:!1}:A?{...E,children:m(E.children)}:E});b.useEffect(()=>{const S=m(e);JSON.stringify(S)!==JSON.stringify(e)&&t(S)},[e]);const h=S=>{const E=[],A=O=>{for(const C of O)E.push(C),C.isOpen&&Array.isArray(C.children)&&C.children.length>0&&A(C.children)};return A(S),E},p=S=>{const E=[],A=O=>{if(Array.isArray(O.children)&&O.children.length>0)for(const C of O.children)E.push(C.id),A(C)};return A(S),E},_=S=>{const{active:E}=S,O=h(e).find(C=>C.id===E.id);o(O)},x=S=>{const{over:E}=S;f((E==null?void 0:E.id)||null)},v=dt.useMemo(()=>l?p(l):[],[l]),g=S=>{const{active:E,over:A}=S;if(o(null),f(null),!A||E.id===A.id)return;const O=h(e),C=O.find(ke=>ke.id===E.id),L=O.find(ke=>ke.id===A.id);if(!C||!L||p(C).includes(A.id))return;const re=JSON.parse(JSON.stringify(C)),oe=(ke,Me)=>ke.filter(Ue=>Ue.id!==Me).map(Ue=>({...Ue,children:Array.isArray(Ue.children)?oe(Ue.children,Me):[]})),N=(ke,Me,Ue)=>{let Ye=!1;const Y=[];for(const R of ke)if(Y.push(R),R.id===Me&&(Y.push(Ue),Ye=!0),Array.isArray(R.children)&&R.children.length>0){const{newChildren:z,wasInserted:k}=H(R.children,Me,Ue);k&&(Y[Y.length-1]={...R,children:z},Ye=!0)}return{newTree:Y,inserted:Ye}},H=(ke,Me,Ue)=>{let Ye=!1;const Y=[];for(const R of ke)if(Y.push(R),R.id===Me&&(Y.push(Ue),Ye=!0),Array.isArray(R.children)&&R.children.length>0){const{newChildren:z,wasInserted:k}=H(R.children,Me,Ue);k&&(Y[Y.length-1]={...R,children:z},Ye=!0)}return{newChildren:Y,wasInserted:Ye}};let J=oe(e,C.id);const be=J.length>0&&J[0].id===L.id;let fe,Xe=!1;if(be)fe=[re,...J],Xe=!0;else{const ke=N(J,L.id,re);fe=ke.newTree,Xe=ke.inserted}if(!Xe){console.warn("Failed to insert block, keeping original state");return}const Ve=m(fe);t(Ve)},y=h(e).filter(S=>!v.includes(S.id)).map(S=>S.id),w=S=>{const E=A=>A.map(O=>({...O,isOpen:S,children:Array.isArray(O.children)?E(O.children):[]}));t(E(e))},T=S=>{for(const E of S)if(!E.isOpen&&Array.isArray(E.children)&&E.children.length>0||Array.isArray(E.children)&&E.children.length>0&&!T(E.children))return!1;return!0},j=T(e);return c.jsxs("div",{className:"key-thoughts-section section-block",children:[c.jsx(ph,{title:"  ",settingsMenuItems:s,customActions:c.jsx("button",{className:"section-action-button",onClick:()=>w(!j),title:j?" ":" ",children:j?" ":" "})}),c.jsx("div",{className:"key-thoughts-content notion-editor",children:c.jsxs(mh,{sensors:d,collisionDetection:uh,onDragStart:_,onDragOver:x,onDragEnd:g,measuring:{droppable:{strategy:Br.Always}},children:[c.jsx(Sr,{items:y,strategy:wr,children:e.map(S=>c.jsx(qb,{block:S,blocks:e,setBlocks:t,focusedBlockId:n,setFocusedBlockId:i,rootSetBlocks:t,draggingChildIds:v,activeId:l==null?void 0:l.id,overId:u},S.id))}),c.jsx(gh,{children:l?c.jsx("div",{className:"drag-overlay-block",children:c.jsx(Lb,{block:l,blocks:e,setBlocks:()=>{},focusedBlockId:null,setFocusedBlockId:()=>{},dragHandleProps:{},parentBlock:null,rootSetBlocks:()=>{},draggingChildIds:[]})}):null})]})})]})}function mO({block:e,depth:t,isSelected:n,isCurrent:i,isOver:r,dropPosition:a,activeId:s,hasChildren:l,text:o,onClick:u,showBottomLine:f,isEditing:d,editingText:m,onDoubleClick:h,onEditChange:p,onSaveEdit:_,onCancelEdit:x,onAddChildBlock:v,onDeleteBlock:g,onToggleTodo:y,onToggleMemo:w}){const{attributes:T,listeners:j,setNodeRef:S}=yh({id:e.id}),E=b.useRef(null),A=b.useRef(!1);b.useEffect(()=>{d&&E.current&&(E.current.style.height="auto",E.current.style.height=E.current.scrollHeight+"px")},[d,m]);const O=e.id===s,C=r&&a==="top"&&s&&s!==e.id,L=r&&a==="bottom"&&s&&s!==e.id||f,Q=r&&a==="center"&&s&&s!==e.id,re={cursor:d?"text":"grab",opacity:O?.4:1},oe=d?{}:{...T,...j};return c.jsxs("div",{ref:S,style:re,"data-block-id":e.id,"data-drop-zone":r?a:"",className:`viewer-block ${n?"selected":""} ${i?"current-selected":""} ${l?"has-children":""} ${C?"show-drop-line-top":""} ${L?"show-drop-line-bottom":""} ${Q?"show-as-child-target":""} ${d?"editing":""}`,onClick:d?void 0:u,onDoubleClick:d?void 0:h,...oe,children:[c.jsx("div",{className:"block-content-area",children:d?c.jsx("textarea",{ref:E,className:"block-edit-input",value:m,onChange:N=>p(N.target.value),onKeyDown:N=>{N.key==="Enter"&&!N.shiftKey?(N.preventDefault(),N.stopPropagation(),A.current=!0,_(),E.current&&E.current.blur()):N.key==="Escape"&&(N.preventDefault(),N.stopPropagation(),A.current=!0,x(),E.current&&E.current.blur())},onBlur:()=>{A.current||_(),A.current=!1},autoFocus:!0,rows:1}):c.jsx("div",{className:"block-text",children:o||" "})}),c.jsx("div",{className:"block-actions-area",children:d?c.jsxs("div",{className:"block-edit-buttons",children:[c.jsx("button",{className:`todo-button ${e.isTodo?"active":""}`,onMouseDown:N=>N.preventDefault(),onClick:N=>{N.stopPropagation(),y(e.id)},title:"TODO  ",children:e.isTodo?"":""}),c.jsx("button",{className:`memo-button ${e.memo?"has-memo":""}`,onMouseDown:N=>N.preventDefault(),onClick:N=>{N.stopPropagation(),w(e.id)},title:"",children:""}),c.jsx("button",{className:"add-child-button",onMouseDown:N=>N.preventDefault(),onClick:N=>{N.stopPropagation(),_(),v(e.id)},title:"  ",children:""}),c.jsx("button",{className:"delete-block-button",onMouseDown:N=>N.preventDefault(),onClick:N=>{N.stopPropagation(),window.confirm("  ?")&&g(e.id)},title:" ",children:""})]}):l&&c.jsx("div",{className:"block-arrow",children:n?"":""})})]})}function gO({blocks:e=[],setBlocks:t,onSave:n,onClose:i}){const[r,a]=b.useState(!0),[s,l]=b.useState([]),[o,u]=b.useState(null),[f,d]=b.useState(null),[m,h]=b.useState(null),[p,_]=b.useState(null),[x,v]=b.useState(""),g=b.useRef({x:0,y:0}),y=b.useRef(null),w=b.useRef(null),T=ch(Da(wl,{activationConstraint:{delay:500,tolerance:8}}));b.useEffect(()=>{if(s.length===0)return;const Y=s.length-1,R=s[Y];R&&setTimeout(()=>{let z=null;if(R==="ADD_BUTTON"){const k=document.querySelectorAll(".viewer-column");k[Y]&&(z=k[Y].querySelector(".add-block-button"))}else z=document.querySelector(`[data-block-id="${R}"]`);z&&z.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},50)},[s]),b.useEffect(()=>{const Y=R=>{if(p)return;const z=s.length>0?s.length-1:0,k=s[z],ee=k==="ADD_BUTTON",K=S(z),te=K.findIndex(U=>U.id===k);switch(R.key){case"Enter":{if(R.preventDefault(),ee)N(z);else if(k){const U=j(e,k);U&&(_(k),v(Ue(U)))}break}case"ArrowUp":{if(R.preventDefault(),ee){if(K.length>0){const U=K[K.length-1].id,ae=s.slice(0,z);ae[z]=U,l(ae)}}else if(te>0){const U=K[te-1].id,ae=s.slice(0,z);ae[z]=U,l(ae)}break}case"ArrowDown":{if(R.preventDefault(),te===K.length-1){const U=s.slice(0,z);U[z]="ADD_BUTTON",l(U)}else if(te<K.length-1&&!ee){const U=K[te+1].id,ae=s.slice(0,z);ae[z]=U,l(ae)}break}case"ArrowLeft":{R.preventDefault(),s.length>0&&l(s.slice(0,-1));break}case"ArrowRight":{if(R.preventDefault(),k&&k!=="ADD_BUTTON"){const U=j(e,k);if(U)if(U.children&&U.children.length>0){const ae=[...s,U.children[0].id];l(ae)}else{const ae=[...s,"ADD_BUTTON"];l(ae)}}else K.length>0&&l([K[0].id]);break}case"Tab":{if(R.preventDefault(),k&&k!=="ADD_BUTTON"){const U=j(e,k);if(U)if(U.children&&U.children.length>0){const ae=[...s,U.children[0].id];l(ae)}else{const ae=[...s,"ADD_BUTTON"];l(ae)}}else K.length>0&&l([K[0].id]);break}}R.key==="Tab"&&R.shiftKey&&(R.preventDefault(),s.length>0&&l(s.slice(0,-1)))};return window.addEventListener("keydown",Y),()=>{window.removeEventListener("keydown",Y)}},[s,p,e]);const j=(Y,R)=>{for(const z of Y){if(z.id===R)return z;if(z.children){const k=j(z.children,R);if(k)return k}}return null},S=Y=>{if(Y===0)return e||[];let R=e;for(let z=0;z<Y;z++){const k=s[z];if(!k)return[];const ee=R.find(K=>K.id===k);if(!ee||!ee.children||ee.children.length===0)return[];R=ee.children}return R},E=(Y,R,z)=>{if(p||o)return;const k=s.slice(0,Y);k[Y]=R,l(k)},A=(Y,R)=>{R.stopPropagation();const z=j(e,Y);z&&(_(Y),v(Ue(z)))},O=()=>{if(!p||!t)return;const Y=JSON.parse(JSON.stringify(e)),R=(z,k,ee)=>{for(let K=0;K<z.length;K++){if(z[K].id===k)return Array.isArray(z[K].content)?z[K].content=[{text:ee}]:z[K].content=ee,!0;if(z[K].children&&R(z[K].children,k,ee))return!0}return!1};R(Y,p,x),t(Y),_(null),v(""),n&&setTimeout(()=>{n()},100)},C=()=>{_(null),v("")},L=Y=>{if(!t)return;const R=JSON.parse(JSON.stringify(e)),z=(ee,K)=>{for(let te=0;te<ee.length;te++){if(ee[te].id===K){const U=`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ae={id:U,content:"",children:[]};return ee[te].children||(ee[te].children=[]),ee[te].children.push(ae),U}if(ee[te].children){const U=z(ee[te].children,K);if(U)return U}}return null};if(z(R,Y)){t(R),_(null),v("");const ee=H(R,Y);if(ee!==-1){const K=s.slice(0,ee);K[ee]=Y,l(K)}n&&setTimeout(()=>{n()},100)}},Q=Y=>{if(!t)return;const R=JSON.parse(JSON.stringify(e)),z=(k,ee)=>{for(let K=0;K<k.length;K++){if(k[K].id===ee)return k.splice(K,1),!0;if(k[K].children&&z(k[K].children,ee))return!0}return!1};if(z(R,Y)){t(R),_(null),v("");const k=s.filter(ee=>ee!==Y);l(k),n&&setTimeout(()=>{n()},100)}},re=Y=>{if(!t)return;const R=JSON.parse(JSON.stringify(e)),z=(k,ee)=>{for(let K=0;K<k.length;K++){if(k[K].id===ee)return k[K].isTodo=!k[K].isTodo,k[K].isTodo||(k[K].isCompleted=!1),!0;if(k[K].children&&z(k[K].children,ee))return!0}return!1};z(R,Y)&&(t(R),n&&setTimeout(()=>{n()},100))},oe=Y=>{if(!t)return;const R=j(e,Y);if(!R)return;const z=R.memo||"",k=prompt(" :",z);if(k===null)return;const ee=JSON.parse(JSON.stringify(e)),K=(te,U,ae)=>{for(let de=0;de<te.length;de++){if(te[de].id===U)return te[de].memo=ae,!0;if(te[de].children&&K(te[de].children,U,ae))return!0}return!1};K(ee,Y,k)&&(t(ee),n&&setTimeout(()=>{n()},100))},N=Y=>{if(!t)return;const R=JSON.parse(JSON.stringify(e)),z=`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,k={id:z,content:"",children:[]};if(Y===0)R.push(k);else{const ee=s[Y-1];if(!ee)return;const K=te=>{for(let U=0;U<te.length;U++){if(te[U].id===ee)return te[U].children||(te[U].children=[]),te[U].children.push(k),!0;if(te[U].children&&K(te[U].children))return!0}return!1};K(R)}t(R),setTimeout(()=>{_(z),v("")},50),n&&setTimeout(()=>{n()},100)},H=(Y,R,z=0)=>{for(const k of Y){if(k.id===R)return z;if(k.children){const ee=H(k.children,R,z+1);if(ee!==-1)return ee}}return-1},J=(Y,R)=>{if(!Y||R===0)return null;const z=document.querySelector(`[data-block-id="${Y}"]`);if(!z)return"top";const k=z.getBoundingClientRect(),K=(R-k.top)/k.height;let te;if(K<0?te="top":K>1?te="bottom":K<.25?te="top":K>.75?te="bottom":te="center",te==="center"&&j(e,Y)){const ae=H(e,Y);if(ae!==-1){const de=s.slice(0,ae);de[ae]=Y,JSON.stringify(de)!==JSON.stringify(s)&&l(de)}}return te},be=(Y,R,z)=>{if(!t)return;const k=JSON.parse(JSON.stringify(e));let ee=null;const K=(U,ae)=>{for(let de=0;de<U.length;de++){if(U[de].id===ae)return ee=U.splice(de,1)[0],!0;if(U[de].children&&K(U[de].children,ae))return!0}return!1};if(K(k,Y),!ee)return;const te=(U,ae,de,F)=>{for(let le=0;le<U.length;le++){if(U[le].id===ae){const he=F==="bottom"?le+1:le;return U.splice(he,0,de),!0}if(U[le].children&&te(U[le].children,ae,de,F))return!0}return!1};te(k,R,ee,z)&&t(k)},fe=(Y,R)=>{if(!t)return;const z=JSON.parse(JSON.stringify(e));let k=null;const ee=(U,ae)=>{for(let de=0;de<U.length;de++){if(U[de].id===ae)return k=U.splice(de,1)[0],!0;if(U[de].children&&ee(U[de].children,ae))return!0}return!1};if(ee(z,Y),!k)return;const K=(U,ae,de)=>{for(let F=0;F<U.length;F++){if(U[F].id===ae)return U[F].children||(U[F].children=[]),U[F].children.push(de),!0;if(U[F].children&&K(U[F].children,ae,de))return!0}return!1};if(!K(z,R,k))return;if(t(z),j(z,R)){const U=(de,F,le=0)=>{for(const he of de){if(he.id===F)return le;if(he.children){const ye=U(he.children,F,le+1);if(ye!==-1)return ye}}return-1},ae=U(z,R);if(ae!==-1){const de=s.slice(0,ae);de[ae]=R,l(de)}}},Xe=Y=>{const{active:R,activatorEvent:z}=Y,k=j(e,R.id);u(k),w.current=R.id,document.body.classList.add("dragging"),z&&z.clientY!==void 0&&(g.current={x:z.clientX||0,y:z.clientY});const ee=te=>{g.current={x:te.clientX,y:te.clientY};const U=y.current||w.current;if(U){const ae=J(U,te.clientY);ae&&h(ae)}},K=te=>{if(te.touches[0]){g.current={x:te.touches[0].clientX,y:te.touches[0].clientY};const U=y.current||w.current;if(U){const ae=J(U,te.touches[0].clientY);ae&&h(ae)}}};window.addEventListener("mousemove",ee),window.addEventListener("touchmove",K),window._dragMoveCleanup=()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("touchmove",K)}},Ve=Y=>{const{over:R}=Y;if(!R){d(null),h(null),y.current=null;return}y.current=R.id,d(R.id);const z=g.current.y,k=J(R.id,z);k&&h(k)},ke=async Y=>{const{active:R,over:z}=Y;let k=!1;z&&R.id!==z.id&&(m==="center"?(fe(R.id,z.id),k=!0):(be(R.id,z.id,m),k=!0)),u(null),d(null),h(null),y.current=null,w.current=null,document.body.classList.remove("dragging"),window._dragMoveCleanup&&(window._dragMoveCleanup(),window._dragMoveCleanup=null),k&&n&&setTimeout(()=>{n()},100)},Me=()=>{u(null),d(null),h(null),y.current=null,w.current=null,document.body.classList.remove("dragging"),window._dragMoveCleanup&&(window._dragMoveCleanup(),window._dragMoveCleanup=null)},Ue=Y=>typeof Y.content=="string"?Y.content:Array.isArray(Y.content)?Y.content.map(R=>R.text||"").join(""):"",Ye=Math.min(s.length+1,10);return c.jsx(mh,{sensors:T,collisionDetection:uh,onDragStart:Xe,onDragOver:Ve,onDragEnd:ke,onDragCancel:Me,children:c.jsxs("div",{className:`key-thoughts-viewer-page ${r?"dark-mode":""}`,children:[c.jsxs("header",{className:"viewer-header",children:[c.jsx("button",{className:"viewer-close-button",onClick:i,"aria-label":" ",children:""}),c.jsx("h2",{className:"viewer-title",children:" "}),c.jsx("button",{className:"dark-mode-toggle",onClick:()=>a(!r),"aria-label":r?"  ":"  ",children:r?"Light":"Dark"})]}),c.jsx("main",{className:"viewer-content",children:c.jsx("div",{className:"columns-container",children:Array.from({length:Ye}).map((Y,R)=>{const z=S(R),k=s[R];if(z.length===0&&R>0&&!s[R-1])return null;const ee=z.map(U=>U.id),K=f?H(e,f):-1,te=K!==-1&&K+1===R&&m==="center"&&o;return c.jsxs("div",{className:"viewer-column",children:[c.jsx("div",{className:"column-header",children:R===0?"A":R===1?"B":R===2?"C":String.fromCharCode(65+R)}),c.jsx(Sr,{items:ee,strategy:wr,children:c.jsxs("div",{className:"column-blocks",children:[z.length===0&&te?c.jsx("div",{className:"empty-column-drop-line"}):z.map((U,ae)=>{const de=U.id===k,F=U.id===f,le=U.children&&U.children.length>0,he=Ue(U),wt=ae===z.length-1&&te,vt=s.length>0&&s[s.length-1]===U.id;return c.jsx(mO,{block:U,depth:R,isSelected:de,isCurrent:vt,isOver:F,dropPosition:m,activeId:o==null?void 0:o.id,hasChildren:le,text:he,onClick:()=>E(R,U.id),showBottomLine:wt,isEditing:p===U.id,editingText:x,onDoubleClick:jt=>A(U.id,jt),onEditChange:v,onSaveEdit:O,onCancelEdit:C,onAddChildBlock:L,onDeleteBlock:Q,onToggleTodo:re,onToggleMemo:oe},U.id)}),(R===0||s[R-1]!=="ADD_BUTTON")&&c.jsx("button",{className:`add-block-button ${k==="ADD_BUTTON"?"selected":""}`,onClick:()=>N(R),children:"+  "})]})})]},R)})})}),c.jsx(gh,{children:o?c.jsxs("div",{className:"viewer-block dragging-overlay",children:[c.jsx("div",{className:"block-content-area",children:c.jsx("div",{className:"block-text",children:Ue(o)||" "})}),c.jsx("div",{className:"block-actions-area",children:o.children&&o.children.length>0&&c.jsx("div",{className:"block-arrow",children:""})})]}):null})]})})}function yO({showDummyModal:e,onClose:t,onCreateDummyData:n,onRemoveDuplicates:i,dummySessions:r,onDeleteDummySession:a,onDeleteAllDummies:s,formatDate:l}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content routine-modal",onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-add-section",children:[c.jsx("h3",{children:"  "}),c.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:"14~18    20    ."}),c.jsx("button",{onClick:n,className:"add-routine-button",style:{width:"100%"},children:"    (20)"})]}),c.jsxs("div",{className:"routine-add-section",children:[c.jsx("h3",{children:"  "}),c.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:"         ."}),c.jsx("button",{onClick:i,className:"add-routine-button",style:{width:"100%",background:"#ff6b6b"},children:"   "})]}),c.jsxs("div",{className:"routine-list",style:{marginTop:"20px"},children:[c.jsx("h3",{children:"  "}),r.length===0?c.jsx("p",{className:"empty-message",children:"   ."}):c.jsxs(c.Fragment,{children:[r.map((o,u)=>c.jsxs("div",{className:"routine-item",children:[c.jsxs("div",{className:"routine-item-content",children:[c.jsxs("span",{className:"routine-text",children:[" #",u+1,": ",o.sessionId]}),c.jsxs("div",{className:"routine-days",children:[c.jsxs("span",{className:"routine-day-badge",children:[" ",o.count,""]}),o.historyCount>0&&c.jsxs("span",{className:"routine-day-badge",children:[" ",o.historyCount,""]}),c.jsx("span",{className:"routine-day-badge",style:{fontSize:"11px"},children:l(o.createdAt)})]})]}),c.jsx("div",{className:"routine-item-actions",children:c.jsx("button",{onClick:()=>{window.confirm(` #${u+1} ?`)&&a(o.sessionId)},className:"routine-delete-button",title:"  ",children:""})})]},o.sessionId)),c.jsx("button",{onClick:()=>{window.confirm("   ?")&&s()},className:"routine-delete-button",style:{width:"100%",marginTop:"15px",padding:"12px"},children:"    "})]})]})]})}):null}function vO({showGanttChart:e,onClose:t,ganttData:n,ganttPeriod:i,setGanttPeriod:r,formatDateOnly:a}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content gantt-modal",onClick:s=>s.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  -  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"gantt-filter",children:c.jsx("div",{className:"gantt-period-buttons",children:[{value:"1week",label:" 1"},{value:"2weeks",label:" 2"},{value:"1month",label:" 1"},{value:"3months",label:" 3"},{value:"6months",label:" 6"},{value:"all",label:""}].map(s=>c.jsx("button",{className:`period-button ${i===s.value?"active":""}`,onClick:()=>r(s.value),children:s.label},s.value))})}),c.jsx("div",{className:"gantt-content",children:n.length===0?c.jsx("p",{className:"empty-message",children:" ."}):c.jsx("div",{className:"gantt-chart",children:(()=>{const s=n.flatMap(d=>d.dates),l=[...new Set(s)].sort((d,m)=>new Date(d)-new Date(m));if(l.length===0)return c.jsx("p",{className:"empty-message",children:"  ."});const o=new Date(l[0]),u=new Date(l[l.length-1]),f=[];for(let d=new Date(o);d<=u;d.setDate(d.getDate()+1))f.push(new Date(d).toISOString().split("T")[0]);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"gantt-header",children:[c.jsx("div",{className:"gantt-task-column",children:" "}),c.jsx("div",{className:"gantt-timeline",children:f.map(d=>c.jsx("div",{className:"gantt-date-cell",children:a(new Date(d+"T00:00:00")).split("(")[0]},d))})]}),n.map((d,m)=>{const h=new Set(d.dates);return c.jsxs("div",{className:"gantt-row",children:[c.jsx("div",{className:"gantt-task-column",title:d.text,children:c.jsx("span",{className:d.completed?"completed-task":"",children:d.text})}),c.jsx("div",{className:"gantt-timeline",children:f.map(p=>{if(!h.has(p))return c.jsx("div",{className:"gantt-date-cell"},p);const x=p===d.startDate,v=p===d.completedDate;let g="gantt-date-cell has-task";return x?g+=" start-date":v?g+=" completed-date":g+=" middle-date",c.jsx("div",{className:g,children:v?c.jsx("span",{className:"completed-circle",children:""}):""},p)})})]},d.originalId)})]})})()})})]})}):null}function pO({showEncouragementModal:e,onClose:t,encouragementMessages:n,newEncouragementMessage:i,setNewEncouragementMessage:r,onAddEncouragementMessage:a,editingEncouragementId:s,editingEncouragementText:l,setEditingEncouragementId:o,setEditingEncouragementText:u,onUpdateEncouragementMessage:f,onDeleteEncouragementMessage:d}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content encouragement-modal",onClick:m=>m.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"encouragement-add-section",children:[c.jsx("input",{type:"text",value:i,onChange:m=>r(m.target.value),placeholder:"   ...",className:"encouragement-input",onKeyDown:async m=>{m.key==="Enter"&&i.trim()!==""&&(await a(i.trim()),r(""))}}),c.jsx("button",{onClick:async()=>{i.trim()!==""&&(await a(i.trim()),r(""))},className:"add-encouragement-button",disabled:i.trim()==="",children:""})]}),c.jsx("div",{className:"encouragement-list",children:n.length===0?c.jsx("p",{className:"empty-message",children:"   ."}):n.map((m,h)=>c.jsx("div",{className:"encouragement-item",children:s===h?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"text",value:l,onChange:p=>u(p.target.value),className:"encouragement-edit-input",placeholder:" "}),c.jsxs("div",{className:"encouragement-item-actions",children:[c.jsx("button",{onClick:async()=>{l.trim()!==""&&(await f(h,l.trim()),o(null),u(""))},className:"encouragement-save-button",disabled:l.trim()==="",children:""}),c.jsx("button",{onClick:()=>{o(null),u("")},className:"encouragement-cancel-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"encouragement-text",children:m}),c.jsxs("div",{className:"encouragement-item-actions",children:[c.jsx("button",{onClick:()=>{o(h),u(m)},className:"encouragement-edit-button",title:"",children:""}),c.jsx("button",{onClick:async()=>{window.confirm("   ?")&&await d(h)},className:"encouragement-delete-button",title:"",children:""})]})]})},h))})]})}):null}function bO({showKeyThoughtsHistory:e,onClose:t,keyThoughtsHistory:n,onRestoreVersion:i}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content",onClick:r=>r.stopPropagation(),style:{maxWidth:"800px",maxHeight:"80vh"},children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"    "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:n.length===0?c.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"  ."}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:n.map(r=>c.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"16px",backgroundColor:"#f9f9f9"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"bold",fontSize:"14px"},children:new Date(r.created_at).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}),r.description&&c.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:r.description})]}),c.jsx("button",{onClick:()=>i(r.id),style:{padding:"6px 12px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:""})]}),c.jsx("div",{style:{fontSize:"12px",color:"#666",maxHeight:"100px",overflowY:"auto",backgroundColor:"white",padding:"8px",borderRadius:"4px",whiteSpace:"pre-wrap"},children:Array.isArray(r.content)?r.content.map((a,s)=>c.jsxs("div",{style:{marginBottom:"4px"},children:[a.type==="toggle"?" ":"",a.content||"( )"]},s)):"( )"})]},r.id))})})]})}):null}function _O({isOpen:e,onClose:t,onAddSection:n}){const[i,r]=b.useState(""),[a,s]=b.useState(""),l=["","","","","","","","","","","",""],o=u=>{u.preventDefault(),i.trim()&&(n({name:i.trim(),icon:a}),r(""),s(""),t())};return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content add-section-modal",onClick:u=>u.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{className:"modal-close-button",onClick:t,children:""})]}),c.jsxs("form",{onSubmit:o,className:"add-section-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" "}),c.jsx("input",{type:"text",value:i,onChange:u=>r(u.target.value),placeholder:": ,  , ...",className:"section-name-input",autoFocus:!0,maxLength:20})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" "}),c.jsx("div",{className:"emoji-grid",children:l.map(u=>c.jsx("button",{type:"button",className:`emoji-button ${a===u?"selected":""}`,onClick:()=>s(u),children:u},u))}),c.jsx("div",{className:"custom-emoji-input",children:c.jsx("input",{type:"text",value:a,onChange:u=>{const f=Array.from(u.target.value);s(f.slice(0,2).join(""))},placeholder:" ",className:"emoji-input"})})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:""}),c.jsxs("div",{className:"section-preview",children:[a," ",i||" "]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{type:"button",onClick:t,className:"cancel-button",children:""}),c.jsx("button",{type:"submit",className:"submit-button",disabled:!i.trim(),children:""})]})]})]})}):null}function wO({show:e,onClose:t,hiddenSections:n,sectionOrder:i,sectionTitles:r,customSections:a,onShowSection:s}){if(!e)return null;const l=o=>{if(r[o])return r[o];const u=a.find(f=>f.id===o);return u?`${u.icon} ${u.name}`:o};return n.length===0?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("p",{className:"empty-message",children:"  ."})})]})}):c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("div",{className:"hidden-sections-list",children:n.map(o=>c.jsxs("div",{className:"hidden-section-item",children:[c.jsx("span",{className:"hidden-section-title",children:l(o)}),c.jsx("button",{className:"show-section-button",onClick:()=>{s(o)},title:" ",children:" "})]},o))})})]})})}function Wg({todo:e,onClose:t,onDeleteThisOnly:n,onDeleteFromNow:i,onDeleteAll:r}){const[a,s]=b.useState("this-only"),[l,o]=b.useState(null),u=()=>{a==="this-only"?n(e):a==="from-now"?i(e):a==="all"&&r(e),t()},f=[{id:"this-only",label:" ",subtitle:" ",tooltip:"  ,  ,   "},{id:"from-now",label:"   ",subtitle:" ",tooltip:"  ,  ,   "},{id:"all",label:" ",subtitle:" ",tooltip:"  ,  ,   "}];return c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content delete-confirm-modal-v2",onClick:d=>d.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"delete-confirm-content-v2",children:[c.jsxs("p",{className:"delete-info-text",children:["    .",c.jsx("br",{}),"    ."]}),c.jsx("div",{className:"delete-options-v2",children:f.map(d=>c.jsxs("div",{className:"delete-option-item",children:[c.jsxs("label",{className:"delete-option-label",children:[c.jsx("input",{type:"radio",name:"delete-option",value:d.id,checked:a===d.id,onChange:m=>s(m.target.value)}),c.jsxs("div",{className:"option-text",children:[c.jsx("span",{className:"option-main",children:d.label}),c.jsx("span",{className:"option-sub",children:d.subtitle})]})]}),c.jsx("button",{className:"option-help-btn",onMouseEnter:()=>o(d.id),onMouseLeave:()=>o(null),onClick:m=>{m.preventDefault(),o(l===d.id?null:d.id)},children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[c.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("text",{x:"8",y:"11.5",textAnchor:"middle",fontSize:"11",fill:"currentColor",fontWeight:"600",children:"?"})]})}),l===d.id&&c.jsx("div",{className:"option-tooltip",children:d.tooltip})]},d.id))}),c.jsxs("div",{className:"delete-modal-actions",children:[c.jsx("button",{className:"btn-cancel",onClick:t,children:""}),c.jsx("button",{className:"btn-confirm",onClick:u,children:""})]})]})]})})}function SO({authLoading:e,session:t,handleGoogleLogin:n}){return e?c.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),c.jsx("div",{children:" ..."})]})}):t?null:c.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:c.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",maxWidth:"400px"},children:[c.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"1rem"},children:" Todo Note"}),c.jsx("p",{style:{fontSize:"1.1rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"2rem"},children:"     "}),c.jsxs("button",{onClick:n,style:{padding:"1rem 2rem",fontSize:"1.1rem",background:"#646cff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 auto"},children:[c.jsx("span",{children:""}),"Google "]})]})})}function xO(e){const[t,n]=b.useState(["memo","routine","normal","key-thoughts"]),[i,r]=b.useState(!1),a=async()=>{var d;if((d=e==null?void 0:e.user)!=null&&d.id)try{const{data:m,error:h}=await ge.from("user_settings").select("setting_value").eq("setting_key","section_order").maybeSingle();if(h){console.error("   :",h.message);return}if(m&&m.setting_value){const p=JSON.parse(m.setting_value);n(p)}}catch(m){console.error("   :",m.message)}},s=async d=>{var m;if((m=e==null?void 0:e.user)!=null&&m.id)try{const{data:h,error:p}=await ge.from("user_settings").select("id").eq("setting_key","section_order").maybeSingle();if(p){console.error("   :",p.message);return}h?await ge.from("user_settings").update({setting_value:JSON.stringify(d),updated_at:new Date().toISOString()}).eq("setting_key","section_order"):await ge.from("user_settings").insert([{setting_key:"section_order",setting_value:JSON.stringify(d),user_id:e.user.id}])}catch(h){console.error("   :",h.message)}};return{sectionOrder:t,setSectionOrder:n,isReorderMode:i,setIsReorderMode:r,fetchSectionOrder:a,saveSectionOrder:s,moveSectionLeft:d=>{n(m=>{const h=m.indexOf(d);if(h<=0)return m;const p=[...m];return[p[h-1],p[h]]=[p[h],p[h-1]],s(p),p})},moveSectionRight:d=>{n(m=>{const h=m.indexOf(d);if(h===-1||h>=m.length-1)return m;const p=[...m];return[p[h],p[h+1]]=[p[h+1],p[h]],s(p),p})},handleSectionDragEnd:d=>{const{active:m,over:h}=d;i&&t.includes(m.id)&&h&&m.id!==(h==null?void 0:h.id)&&n(p=>{const _=p.indexOf(m.id),x=p.indexOf(h.id),v=Ac(p,_,x);return s(v),v})},handleSectionsContainerDoubleClick:d=>{i&&d.target===d.currentTarget&&r(!1)}}}function TO(e){const[t,n]=b.useState(""),[i,r]=b.useState(!1),[a,s]=b.useState(""),l=b.useRef(null),o=b.useRef(null),u=async()=>{try{const{data:d,error:m}=await ge.from("spec_memos").select("content").order("created_at",{ascending:!1}).limit(1);if(m)throw m;const h=d&&d.length>0?d[0].content:"";n(h),s(h)}catch(d){console.error("Error fetching memo:",d.message),n(""),s("")}},f=b.useCallback(async d=>{var m;if(d!==a)try{r(!0);const{data:h}=await ge.from("spec_memos").select("id").order("created_at",{ascending:!1}).limit(1);h&&h.length>0?await ge.from("spec_memos").update({content:d,updated_at:new Date().toISOString()}).eq("id",h[0].id):await ge.from("spec_memos").insert([{content:d,user_id:(m=e==null?void 0:e.user)==null?void 0:m.id}]),s(d)}catch(h){console.error("Error saving memo:",h.message)}finally{r(!1)}},[e,a]);return b.useEffect(()=>{if(t!==a)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{f(t)},1e3),()=>{o.current&&clearTimeout(o.current)}},[t,f,a]),b.useEffect(()=>()=>{o.current&&clearTimeout(o.current),t!==a&&f(t)},[]),{memoContent:t,setMemoContent:n,isSavingMemo:i,memoTextareaRef:l,fetchMemoContent:u}}function EO(e){if(!Array.isArray(e)||e.length===0)return[];const t=new Map;e.forEach(r=>{t.set(r.block_id,{id:r.block_id,type:r.type||"toggle",content:r.content||"",isOpen:r.is_open!==void 0?r.is_open:!0,isTodo:r.is_todo||!1,isCompleted:r.is_completed||!1,memo:r.memo||"",children:[],_dbId:r.id,_parentId:r.parent_id,_position:r.position,_depth:r.depth,_createdAt:r.created_at,_updatedAt:r.updated_at})});const n=[];e.forEach(r=>{const a=t.get(r.block_id);if(r.parent_id===null||r.parent_id===void 0)n.push(a);else{const s=t.get(r.parent_id);s?s.children.push(a):(console.warn(`Parent not found for block ${r.block_id}, moving to root`),n.push(a))}});const i=r=>{r.sort((a,s)=>(a._position||0)-(s._position||0)),r.forEach(a=>{a.children.length>0&&i(a.children)})};return i(n),n}function Jd(e,t=null,n=0){if(!Array.isArray(e))return[];let i=[];return e.forEach((r,a)=>{const{children:s,_dbId:l,_parentId:o,_position:u,_depth:f,_createdAt:d,_updatedAt:m,...h}=r,p={block_id:h.id||r.id,content:h.content||"",type:h.type||"toggle",parent_id:t,position:a,depth:n,is_open:h.isOpen!==void 0?h.isOpen:!0,is_todo:h.isTodo||!1,is_completed:h.isCompleted||!1,memo:h.memo||""};if(i.push(p),s&&s.length>0){const _=Jd(s,h.id||r.id,n+1);i=i.concat(_)}}),i}function ey(){return`${Date.now()}.${Math.random().toString(36).substring(2,9)}`}function Qd(e){return Array.isArray(e)?e.map(t=>({...t,children:Array.isArray(t.children)?Qd(t.children):[]})):[]}function jO(e){const[t,n]=b.useState([{id:ey(),type:"toggle",content:"",children:[],isOpen:!0}]),[i,r]=b.useState(!1),[a,s]=b.useState(!1),l=b.useRef(null),o=b.useRef(null),[u,f]=b.useState(null),[d,m]=b.useState([]),[h,p]=b.useState(!1),_=async()=>{var O;if((O=e==null?void 0:e.user)!=null&&O.id){r(!0);try{const{data:C,error:L}=await ge.from("key_thought_blocks").select("*").eq("user_id",e.user.id).order("position",{ascending:!0});if(L){console.error("  :",L.message);return}if(C&&C.length>0){const Q=EO(C);n(Q),l.current=JSON.parse(JSON.stringify(Q))}}catch(C){console.error("  :",C.message)}finally{r(!1)}}},x=async O=>{var C;if(!((C=e==null?void 0:e.user)!=null&&C.id))return null;try{const L=O.id||ey(),{data:Q,error:re}=await ge.from("key_thought_blocks").insert([{user_id:e.user.id,block_id:L,content:O.content||"",type:O.type||"toggle",parent_id:O.parent_id||null,position:O.position||0,depth:O.depth||0,is_open:O.isOpen!==void 0?O.isOpen:!0}]).select().single();return re?(console.error("  :",re.message),null):Q}catch(L){return console.error("  :",L.message),null}},v=async(O,C)=>{var L;if(!((L=e==null?void 0:e.user)!=null&&L.id))return!1;try{const Q={};C.content!==void 0&&(Q.content=C.content),C.type!==void 0&&(Q.type=C.type),C.isOpen!==void 0&&(Q.is_open=C.isOpen),C.position!==void 0&&(Q.position=C.position),C.parent_id!==void 0&&(Q.parent_id=C.parent_id),C.depth!==void 0&&(Q.depth=C.depth),Q.updated_at=new Date().toISOString();const{error:re}=await ge.from("key_thought_blocks").update(Q).eq("user_id",e.user.id).eq("block_id",O);return re?(console.error("  :",re.message),!1):!0}catch(Q){return console.error("  :",Q.message),!1}},g=async O=>{var C;if(!((C=e==null?void 0:e.user)!=null&&C.id))return!1;try{const{error:L}=await ge.from("key_thought_blocks").delete().eq("user_id",e.user.id).eq("block_id",O);return L?(console.error("  :",L.message),!1):!0}catch(L){return console.error("  :",L.message),!1}},y=async(O,C,L,Q)=>{var re;if(!((re=e==null?void 0:e.user)!=null&&re.id))return!1;try{const{error:oe}=await ge.from("key_thought_blocks").update({parent_id:C,position:L,depth:Q,updated_at:new Date().toISOString()}).eq("user_id",e.user.id).eq("block_id",O);return oe?(console.error("  :",oe.message),!1):!0}catch(oe){return console.error("  :",oe.message),!1}},w=async()=>{var O;if(!((O=e==null?void 0:e.user)!=null&&O.id))return!1;s(!0);try{await ge.from("key_thought_blocks").delete().eq("user_id",e.user.id);const C=Jd(t);if(C.length>0){const{error:L}=await ge.from("key_thought_blocks").insert(C.map(Q=>({...Q,user_id:e.user.id})));if(L)return console.error("  :",L.message),!1}return await j(t),l.current=JSON.parse(JSON.stringify(t)),!0}catch(C){return console.error("  :",C.message),!1}finally{s(!1)}},T=(O,C)=>{if(!O||O.length===0||O.length!==C.length)return!0;const L=(Q,re)=>{for(let oe=0;oe<Q.length;oe++){const N=Q[oe],H=re[oe];if(N.type!==H.type)return!0;const J=N.children?N.children.length:0,be=H.children?H.children.length:0;if(J!==be)return!0;const fe=N.content||"",Xe=H.content||"";if(Math.abs(fe.length-Xe.length)>=20||be>0&&L(N.children,H.children))return!0}return!1};return L(O,C)},j=async O=>{var C;if((C=e==null?void 0:e.user)!=null&&C.id)try{if(!T(l.current,O))return;const{error:L}=await ge.from("key_thoughts_history").insert([{content:O,description:" ",user_id:e.user.id}]);L&&console.error("   :",L.message)}catch(L){console.error("   :",L.message)}},S=async()=>{try{const O=new Date().toDateString();if(o.current===O)return;const C=new Date;C.setDate(C.getDate()-30);const{error:L}=await ge.from("key_thoughts_history").delete().lt("created_at",C.toISOString());L?console.error("   :",L.message):o.current=O}catch(O){console.error("   :",O.message)}},E=async()=>{try{const{data:O,error:C}=await ge.from("key_thoughts_history").select("*").order("created_at",{ascending:!1}).limit(50);if(C){console.error("   :",C.message);return}m(O||[])}catch(O){console.error("   :",O.message)}};return{blocks:t,setBlocks:n,loading:i,isSaving:a,setIsSaving:s,lastSavedBlocksRef:l,focusedBlockId:u,setFocusedBlockId:f,keyThoughtsHistory:d,setKeyThoughtsHistory:m,showKeyThoughtsHistory:h,setShowKeyThoughtsHistory:p,fetchBlocks:_,createBlock:x,updateBlock:v,deleteBlock:g,moveBlock:y,saveAllBlocks:w,fetchKeyThoughtsHistory:E,restoreKeyThoughtsVersion:async O=>{try{const C=d.find(re=>re.id===O);if(!C){alert("    .");return}if(!window.confirm(`  ?
    .`))return;T(l.current,t)&&await ge.from("key_thoughts_history").insert([{content:t,description:"   ",user_id:e.user.id}]);const L=Qd(C.content);n(L),await ge.from("key_thought_blocks").delete().eq("user_id",e.user.id);const Q=Jd(L);Q.length>0&&await ge.from("key_thought_blocks").insert(Q.map(re=>({...re,user_id:e.user.id}))),await ge.from("key_thoughts_history").insert([{content:L,description:`  (${new Date(C.created_at).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})`,user_id:e.user.id}]),l.current=JSON.parse(JSON.stringify(L)),alert("  !"),p(!1),await E()}catch(C){console.error("  :",C.message),alert("    : "+C.message)}},cleanupOldHistory:S,normalizeBlocks:Qd}}const Vb=({type:e,supabase:t,selectedDate:n,onDeleteSuccess:i})=>({deleteThisOnly:async l=>{try{const o=Be(n),f=[...l.hidden_dates||[],o],d=e==="todo"?"todos":"routines",{error:m}=await t.from(d).update({hidden_dates:f}).eq("id",l.id);if(m)throw m;return i&&i(l.id,Mu.THIS_ONLY),{success:!0}}catch(o){return console.error(`${e}   (THIS_ONLY):`,o.message),{success:!1,error:o}}},deleteFromNow:async l=>{try{const o=Be(n),f=(l.visible_dates||[]).filter(h=>h<o),d=e==="todo"?"todos":"routines",{error:m}=await t.from(d).update({visible_dates:f,stop_carryover_from:o}).eq("id",l.id);if(m)throw m;return i&&i(l.id,Mu.FROM_NOW),{success:!0}}catch(o){return console.error(`${e}   (FROM_NOW):`,o.message),{success:!1,error:o}}},deleteAll:async l=>{try{const o=Be(n),u=e==="todo"?"todos":"routines",{error:f}=await t.from(u).update({deleted:!0,deleted_date:o}).eq("id",l.id);if(f)throw f;return e==="routine"&&await t.from("todos").update({routine_id:null}).eq("routine_id",l.id),i&&i(l.id,Mu.ALL),{success:!0}}catch(o){return console.error(`${e}   (ALL):`,o.message),{success:!1,error:o}}}}),OO=e=>["sun","mon","tue","wed","thu","fri","sat"][e],DO=({session:e,supabase:t,selectedDate:n,setTodos:i,setSuccessToastMessage:r,setShowSuccessToast:a})=>{const[s,l]=b.useState([]),[o,u]=b.useState(""),[f,d]=b.useState([]),[m,h]=b.useState(""),[p,_]=b.useState(!1),[x,v]=b.useState(!1),[g,y]=b.useState(null),[w,T]=b.useState(""),[j,S]=b.useState([]),[E,A]=b.useState(!1),[O,C]=b.useState(null),[L,Q]=b.useState([]),[re,oe]=b.useState(!1),[N,H]=b.useState(null),J=b.useRef(new Set),{deleteThisOnly:be,deleteFromNow:fe,deleteAll:Xe}=Vb({type:"routine",supabase:t,selectedDate:n,onDeleteSuccess:(F,le)=>{l(he=>he.filter(ye=>ye.id!==F)),r(" "),a(!0)}}),Ve=async()=>{var F;if((F=e==null?void 0:e.user)!=null&&F.id)try{const{data:le,error:he}=await t.from("routines").select("*").eq("deleted",!1).order("created_at",{ascending:!1});if(he)throw he;l(le||[])}catch(le){console.error("  :",le.message)}},ke=async()=>{var F;if(!(o.trim()===""||p))try{_(!0);const le={text:o,days:f,start_date:Be(n),user_id:(F=e==null?void 0:e.user)==null?void 0:F.id};m&&(le.time_slot=m);const{data:he,error:ye}=await t.from("routines").insert([le]).select();if(ye)throw ye;l([he[0],...s]),u(""),d([]),h("")}catch(le){console.error("  :",le.message)}finally{_(!1)}},Me=async(F,le,he,ye=null,wt=!1,vt="",jt=null)=>{var ot;try{if(wt){const{error:tt}=await t.from("todos").update({routine_id:null}).eq("id",F);if(tt)throw tt;i(V=>V.map($=>$.id===F?{...$,routine_id:null}:$));return}if(ye){const{error:tt}=await t.from("routines").update({days:he,time_slot:vt}).eq("id",ye);if(tt)throw tt;const{error:V}=await t.from("todos").update({is_pending_routine:he.length===0}).eq("id",F);if(V)throw V;l($=>$.map(I=>I.id===ye?{...I,days:he,time_slot:vt}:I)),i($=>$.map(I=>I.id===F?{...I,is_pending_routine:he.length===0}:I))}else{const tt={text:le,days:he,time_slot:vt,start_date:jt||Be(n),user_id:(ot=e==null?void 0:e.user)==null?void 0:ot.id},{data:V,error:$}=await t.from("routines").insert([tt]).select();if($)throw $;const{error:I}=await t.from("todos").update({routine_id:V[0].id,is_pending_routine:he.length===0}).eq("id",F);if(I)throw I;i(ie=>ie.map(ne=>ne.id===F?{...ne,routine_id:V[0].id,is_pending_routine:he.length===0}:ne)),l(ie=>[V[0],...ie])}}catch(tt){console.error("  :",tt.message)}},Ue=F=>{y(F.id),T(F.text),S(F.days)},Ye=()=>{y(null),T(""),S([])},Y=async()=>{if(!(!g||w.trim()===""||j.length===0))try{const{error:F}=await t.from("routines").update({text:w.trim(),days:j}).eq("id",g);if(F)throw F;l(s.map(le=>le.id===g?{...le,text:w.trim(),days:j}:le)),Ye()}catch(F){console.error("  :",F.message)}},R=F=>{S(le=>le.includes(F)?le.filter(he=>he!==F):[...le,F])},z=async F=>{const le=s.find(he=>he.id===F);le&&(H(le),oe(!0))},k=async F=>{var le;if(!J.current.has(F))try{J.current.add(F);const he=new Date(F),ye=OO(he.getDay()),{data:wt,error:vt}=await t.from("routines").select("*").eq("deleted",!1);if(vt)throw vt;const jt=wt.filter(ot=>{const tt=ot.days||[],V=tt.length===0||tt.includes(ye);if(ot.start_date){const $=new Date(ot.start_date),I=he>=$;return V&&I}return V});if(jt.length===0)return;for(const ot of jt){const tt=ot.text,{data:V,error:$}=await t.from("todos").select("*").eq("routine_id",ot.id).eq("deleted",!1);if($)throw $;if(V&&V.length>1){console.warn(` ${ot.id}    (${V.length}).     .`);for(let ie=1;ie<V.length;ie++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",V[ie].id)}const I=V&&V.length>0?V[0]:null;if(I){const ie=I.visible_dates||[],ne=!ot.days||ot.days.length===0,_e=ne?"pending_routine":"routine";if(ie.includes(F)){(I.is_pending_routine!==ne||I.section_type!==_e)&&await t.from("todos").update({is_pending_routine:ne,section_type:_e}).eq("id",I.id);continue}const Se=[...ie,F].sort(),{error:Ie}=await t.from("todos").update({visible_dates:Se,is_pending_routine:ne,section_type:ne?"pending_routine":"routine"}).eq("id",I.id);Ie&&console.error("    :",Ie.message)}else{const ie=!ot.days||ot.days.length===0,{error:ne}=await t.from("todos").insert([{text:tt,completed:!1,date:F,visible_dates:[F],hidden_dates:[],order_index:0,routine_id:ot.id,is_pending_routine:ie,section_type:ie?"pending_routine":"routine",user_id:(le=e==null?void 0:e.user)==null?void 0:le.id}]);ne&&console.error("   :",ne.message)}}}catch(he){console.error("   :",he.message)}finally{setTimeout(()=>{J.current.delete(F)},1e3)}},ee=async()=>{const le=Be(new Date);await k(le)},K=async F=>{try{const{data:le,error:he}=await t.from("todos").select("*").eq("routine_id",F.id).eq("deleted",!1);if(he)throw he;const ye=le&&le.length>0?le[0]:null;if(ye&&ye.visible_dates){const wt=ye.visible_dates.sort().map(vt=>({id:`${ye.id}-${vt}`,date:vt,text:ye.text,completed:ye.completed,routine_id:ye.routine_id}));Q(wt)}else Q([]);C(F),A(!0)}catch(le){console.error("   :",le.message),alert("   : "+le.message)}},te=()=>{A(!1),C(null),Q([])},U=()=>{v(!0),Ve()},ae=()=>{v(!1),u(""),d([])},de=F=>{d(le=>le.includes(F)?le.filter(he=>he!==F):[...le,F])};return b.useEffect(()=>{e&&Ve()},[e]),{routines:s,setRoutines:l,routineInput:o,selectedDays:f,selectedTimeSlot:m,isAddingRoutine:p,showRoutineModal:x,editingRoutineId:g,editingRoutineText:w,editingRoutineDays:j,showRoutineHistory:E,selectedRoutineForHistory:O,routineHistoryData:L,routineCreationInProgress:J,showDeleteConfirmModal:re,setShowDeleteConfirmModal:oe,routineToDelete:N,setRoutineToDelete:H,setRoutineInput:u,setSelectedTimeSlot:h,fetchRoutines:Ve,handleAddRoutine:ke,handleDeleteRoutine:z,deleteThisOnly:be,deleteFromNow:fe,deleteAll:Xe,handleStartEditRoutine:Ue,handleSaveEditRoutine:Y,handleCancelEditRoutine:Ye,handleToggleEditDay:R,handleCreateRoutineFromTodo:Me,createRoutineTodosForDate:k,createRoutineTodos:ee,fetchRoutineHistory:K,handleCloseRoutineHistory:te,handleOpenRoutine:U,handleCloseRoutine:ae,handleToggleDay:de}},AO=(e,t,n,i,r,a,s,l,o)=>{const[u,f]=b.useState(""),[d,m]=b.useState(""),[h,p]=b.useState(""),[_,x]=b.useState(!0),[v,g]=b.useState(!1),[y,w]=b.useState(!1),[T,j]=b.useState(null),[S,E]=b.useState(!1),[A,O]=b.useState(!1),[C,L]=b.useState(""),[Q,re]=b.useState(null),[oe,N]=b.useState(null),[H,J]=b.useState(!1),[be,fe]=b.useState(null),[Xe,Ve]=b.useState(null),[ke,Me]=b.useState(null),Ue=b.useRef(new Set),Ye=b.useRef(new Set),{deleteThisOnly:Y,deleteFromNow:R,deleteAll:z}=Vb({type:"todo",supabase:t,selectedDate:n,onDeleteSuccess:(V,$)=>{const I=i.find(ie=>ie.id===V);I&&(j(I),re({id:V,deleteType:$,item:I}),E(!0),setTimeout(()=>{E(!1),j(null),re(null)},5e3)),r(ie=>ie.filter(ne=>ne.id!==V)),J(!1),fe(null)}}),k=V=>["sun","mon","tue","wed","thu","fri","sat"][V],ee=async V=>{var $;if(!Ue.current.has(V))try{Ue.current.add(V);const I=new Date(V),ie=k(I.getDay()),{data:ne,error:_e}=await t.from("routines").select("*").eq("deleted",!1);if(_e)throw _e;const Se=ne.filter(Ie=>{const $e=Ie.days||[],Te=$e.length===0||$e.includes(ie);if(Ie.start_date){const De=new Date(Ie.start_date),me=I>=De;return Te&&me}return Te});if(Se.length===0)return;for(const Ie of Se){const $e=Ie.text,{data:Te,error:De}=await t.from("todos").select("*").eq("routine_id",Ie.id).eq("deleted",!1);if(De)throw De;if(Te&&Te.length>1){console.warn(` ${Ie.id}    (${Te.length}).     .`);for(let Ke=1;Ke<Te.length;Ke++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",Te[Ke].id)}const me=Te&&Te.length>0?Te[0]:null;if(me){if((me.hidden_dates||[]).includes(V)||me.stop_carryover_from&&V>=me.stop_carryover_from)continue;const je=!Ie.days||Ie.days.length===0,Je=me.visible_dates||[],Mt=je?"pending_routine":"routine";if(Je.includes(V)){if(me.is_pending_routine!==je||me.section_type!==Mt){const{error:Xt}=await t.from("todos").update({is_pending_routine:je,section_type:Mt}).eq("id",me.id);Xt&&console.error(" :",Xt)}continue}const Ge=[...Je,V].sort(),{error:ce}=await t.from("todos").update({visible_dates:Ge,is_pending_routine:je,section_type:je?"pending_routine":"routine"}).eq("id",me.id);ce&&console.error("    :",ce.message)}else{const Ke=!Ie.days||Ie.days.length===0,{error:je}=await t.from("todos").insert([{text:$e,completed:!1,date:V,visible_dates:[V],hidden_dates:[],order_index:0,routine_id:Ie.id,is_pending_routine:Ke,section_type:Ke?"pending_routine":"routine",user_id:($=e==null?void 0:e.user)==null?void 0:$.id}]);je&&console.error("   :",je.message)}}}catch(I){console.error("   :",I.message)}finally{setTimeout(()=>{Ue.current.delete(V)},1e3)}};return{inputValue:u,setInputValue:f,routineInputValue:d,setRoutineInputValue:m,normalInputValue:h,setNormalInputValue:p,loading:_,isDraggingAny:v,isAdding:y,deletedTodo:T,showUndoToast:S,showSuccessToast:A,successToastMessage:C,lastDeleteAction:Q,focusedTodoId:oe,setFocusedTodoId:N,selectedTodoForModal:l,showDeleteConfirmModal:H,setShowDeleteConfirmModal:J,todoToDelete:be,setTodoToDelete:fe,activeTodoId:Xe,overId:ke,fetchTodos:async()=>{var V;if(!((V=e==null?void 0:e.user)!=null&&V.id)){x(!1);return}try{x(!0);const $=Be(n);await ee($);const{data:I,error:ie}=await t.from("todos").select("*").eq("deleted",!1);if(ie)throw ie;const ne=(I||[]).filter(me=>me.routine_id),_e=[...new Set(ne.map(me=>me.routine_id))];let Se={};if(_e.length>0){const{data:me}=await t.from("routines").select("*").in("id",_e);Se=(me||[]).reduce((Ke,je)=>(Ke[je.id]=je,Ke),{})}const Ie=new Date($),$e=k(Ie.getDay()),Te=(I||[]).filter(me=>{if(me.stop_carryover_from&&$>=me.stop_carryover_from||me.hidden_dates&&Array.isArray(me.hidden_dates)&&me.hidden_dates.includes($))return!1;if(me.routine_id){const je=Se[me.routine_id];if(je){const Je=je.days||[];if(Je.length>0&&!Je.includes($e))return!1}}return me.visible_dates&&Array.isArray(me.visible_dates)?me.visible_dates.includes($):me.date===$}),De=Te.filter(me=>me.routine_id);if(De.length>0){const me=[...new Set(De.map(je=>je.routine_id))],{data:Ke}=await t.from("routines").select("*").in("id",me);for(const je of De){const Je=Ke==null?void 0:Ke.find(ce=>ce.id===je.routine_id);if(!Je)continue;const Mt=!Je.days||Je.days.length===0,Ge=Mt?"pending_routine":"routine";(je.section_type!==Ge||je.is_pending_routine!==Mt)&&(await t.from("todos").update({section_type:Ge,is_pending_routine:Mt}).eq("id",je.id),je.section_type=Ge,je.is_pending_routine=Mt)}}r(Te)}catch($){console.error("   :",$.message)}finally{x(!1)}},handleAddTodo:async()=>{var V;if(!(u.trim()===""||y))try{w(!0);const $=i.filter(Se=>!Se.parent_id&&Se.section_type==="normal"),I=$.length>0?Math.max(...$.map(Se=>Se.order_index))+1:1,ie=Be(n),{data:ne,error:_e}=await t.from("todos").insert([{text:u,completed:!1,order_index:I,date:ie,visible_dates:[ie],hidden_dates:[],section_type:"normal",user_id:(V=e==null?void 0:e.user)==null?void 0:V.id}]).select();if(_e)throw _e;r([...i,ne[0]]),f("")}catch($){console.error("   :",$.message)}finally{w(!1)}},handleAddRoutineTodo:async()=>{var V,$;if(!(d.trim()===""||y))try{w(!0);const I=Be(n),{data:ie,error:ne}=await t.from("routines").insert([{text:d,days:[],start_date:I,user_id:(V=e==null?void 0:e.user)==null?void 0:V.id}]).select();if(ne)throw ne;const _e=ie[0],Se=i.filter(De=>!De.parent_id&&De.section_type==="pending_routine"),Ie=Se.length>0?Math.max(...Se.map(De=>De.order_index))+1:1,{data:$e,error:Te}=await t.from("todos").insert([{text:d,completed:!1,order_index:Ie,date:I,visible_dates:[I],hidden_dates:[],routine_id:_e.id,is_pending_routine:!0,section_type:"pending_routine",user_id:($=e==null?void 0:e.user)==null?void 0:$.id}]).select();if(Te)throw Te;s([_e,...a]),r([...i,$e[0]]),m("")}catch(I){console.error("   :",I.message)}finally{w(!1)}},handleAddNormalTodo:async()=>{var V;if(!(h.trim()===""||y))try{w(!0);const $=i.filter(Se=>!Se.parent_id&&Se.section_type==="normal"),I=$.length>0?Math.max(...$.map(Se=>Se.order_index))+1:1,ie=Be(n),{data:ne,error:_e}=await t.from("todos").insert([{text:h,completed:!1,order_index:I,date:ie,visible_dates:[ie],hidden_dates:[],section_type:"normal",user_id:(V=e==null?void 0:e.user)==null?void 0:V.id}]).select();if(_e)throw _e;r([...i,ne[0]]),p("")}catch($){console.error("   :",$.message)}finally{w(!1)}},handleToggleTodo:async V=>{const $=i.find(I=>I.id===V);if($)try{const I=!$.completed,ie=I?new Date().toISOString():null,{error:ne}=await t.from("todos").update({completed:I,completed_at:ie}).eq("id",V);if(ne)throw ne;r(i.map(_e=>_e.id===V?{..._e,completed:I,completed_at:ie}:_e))}catch(I){console.error("   :",I.message)}},handleDeleteTodo:async(V,$)=>{const I=i.find(ie=>ie.id===V);I&&($?$==="this-only"?await Y(I):$==="from-now"?await R(I):$==="all"&&await z(I):(fe(I),J(!0)))},deleteThisOnly:Y,deleteFromNow:R,deleteAll:z,handleUndoDelete:async()=>{if(!(!T||!Q))try{const{deleteType:V}=Q,$=Be(n);if(V==="this-only"){const I=(T.hidden_dates||[]).filter(ne=>ne!==$),{error:ie}=await t.from("todos").update({hidden_dates:I}).eq("id",T.id);if(ie)throw ie}else if(V==="from-now"){const{error:I}=await t.from("todos").update({visible_dates:T.visible_dates,stop_carryover_from:null}).eq("id",T.id);if(I)throw I}else if(V==="all"){const{error:I}=await t.from("todos").update({deleted:!1,deleted_date:null}).eq("id",T.id);if(I)throw I}r(I=>{const ie={...T};return[...I,ie].sort((_e,Se)=>_e.order_index-Se.order_index)}),E(!1),j(null),re(null)}catch(V){console.error("  :",V.message)}},handleEditTodo:async(V,$)=>{var I,ie;try{let ne=null;Ye.current.add(V);const _e=new Date().toISOString();if(r($e=>(ne=$e.find(Te=>Te.id===V),!ne||ne.text===$?(Ye.current.delete(V),$e):$e.map(Te=>Te.id===V?{...Te,text:$,updated_at:_e}:Te))),!ne||ne.text===$)return;const{error:Se}=await t.from("todo_history").insert([{todo_id:V,previous_text:ne.text,new_text:$,changed_on_date:ne.date,user_id:(I=e==null?void 0:e.user)==null?void 0:I.id}]);if(Se&&console.error("  :",Se.message),ne.original_todo_id){const{data:$e,error:Te}=await t.from("todos").select("text, date").eq("id",ne.original_todo_id).single();!Te&&$e&&await t.from("todo_history").insert([{todo_id:ne.original_todo_id,previous_text:ne.text,new_text:$,changed_on_date:ne.date,user_id:(ie=e==null?void 0:e.user)==null?void 0:ie.id}])}const{error:Ie}=await t.from("todos").update({text:$}).eq("id",V);Ie?(console.error("   :",Ie.message),r($e=>$e.map(Te=>Te.id===V?ne:Te)),Ye.current.delete(V)):setTimeout(()=>{Ye.current.delete(V)},5e3)}catch(ne){console.error("   :",ne.message),Ye.current.delete(V)}},handleAddSubTodo:async(V,$)=>{var I;if(!(!$||$.trim()===""))try{const ne=i.filter($e=>$e.parent_id===V).length+1,_e=Be(n),{data:Se,error:Ie}=await t.from("todos").insert([{text:$.trim(),completed:!1,order_index:ne,date:_e,parent_id:V,user_id:(I=e==null?void 0:e.user)==null?void 0:I.id}]).select();if(Ie)throw Ie;r([...i,Se[0]])}catch(ie){console.error("    :",ie.message)}},handleDragEnd:async V=>{g(!1),Ve(null),Me(null);const{active:$,over:I}=V;if(!I||$.id===I.id)return;const ie=i.find(ce=>ce.id===$.id),ne=i.find(ce=>ce.id===I.id);if(!ie||!ne)return;const _e=ie.section_type,Se=ie.section_id||null,Ie=ne.section_type,$e=ne.section_id||null,Te=_e!==Ie||_e==="custom"&&Se!==$e,De=Ie,me=$e,Ke=i.filter(ce=>!(ce.parent_id||ce.section_type!==De||De==="custom"&&ce.section_id!==me)).sort((ce,pt)=>ce.order_index-pt.order_index),je=Ke.findIndex(ce=>ce.id===$.id),Je=Ke.findIndex(ce=>ce.id===I.id);let Mt=[...Ke];Te?Mt.splice(Je,0,{...ie,section_type:De,section_id:me,routine_id:De==="routine"||De==="pending_routine"?ie.routine_id:null}):Mt=Ac(Ke,je,Je);let Ge=[...i];if(Mt.forEach((ce,pt)=>{const Xt=Ge.findIndex(Lt=>Lt.id===ce.id);Xt!==-1&&(Ge[Xt]={...ce,order_index:pt+1})}),Te){const ce=Ge.findIndex(pt=>pt.id===$.id);ce!==-1&&(Ge[ce]={...Ge[ce],section_type:De,section_id:me,routine_id:De==="routine"||De==="pending_routine"?Ge[ce].routine_id:null})}r(Ge);try{if(Te){const ce={section_type:De,section_id:me};De!=="routine"&&De!=="pending_routine"&&(ce.routine_id=null,ce.is_pending_routine=!1),await t.from("todos").update(ce).eq("id",$.id)}for(let ce=0;ce<Mt.length;ce++)await t.from("todos").update({order_index:ce+1}).eq("id",Mt[ce].id)}catch(ce){console.error("  :",ce.message),r(i)}},handleRemoveTodoFromUI:V=>{r(i.filter($=>$.id!==V))},handleDragStart:V=>{const{active:$}=V;g(!0),Ve($.id)},handleDragOver:V=>{const{over:$}=V;Me(($==null?void 0:$.id)||null)},handleDragCancel:()=>{g(!1),Ve(null),Me(null)}}},CO=({session:e,supabase:t,selectedTodoForModal:n,setSelectedTodoForModal:i})=>{const[r,a]=b.useState(!1),[s,l]=b.useState({}),[o,u]=b.useState([]);return{showTodoHistoryModal:r,todoHistory:s,expandedHistoryIds:o,handleOpenTodoHistoryModal:async h=>{i(h);try{const{data:p,error:_}=await t.from("todo_history").select("*").eq("todo_id",h.id).order("changed_at",{ascending:!1});if(_)throw _;l(x=>({...x,[h.id]:p||[]}))}catch(p){console.error("Error fetching history:",p)}a(!0)},handleCloseTodoHistoryModal:()=>{a(!1),i(null),u([])},toggleHistoryDetail:h=>{u(p=>p.includes(h)?p.filter(_=>_!==h):[...p,h])}}},NO=({selectedTodoForModal:e,setSelectedTodoForModal:t,routines:n})=>{const[i,r]=b.useState(!1),[a,s]=b.useState([]),[l,o]=b.useState(!1),[u,f]=b.useState("");return{showTodoRoutineSetupModal:i,routineDaysForModal:a,setRoutineDaysForModal:s,isEditingRoutineInModal:l,setIsEditingRoutineInModal:o,routineTimeSlotForModal:u,setRoutineTimeSlotForModal:f,handleOpenTodoRoutineSetupModal:h=>{t(h);const p=n.find(_=>_.id===h.routine_id);p?(s(p.days||[]),f(p.time_slot||""),o(!1)):(s([]),f(""),o(!0)),r(!0)},handleCloseTodoRoutineSetupModal:()=>{r(!1),t(null),s([]),f(""),o(!1)}}},RO=({session:e,supabase:t,selectedDate:n})=>{const i=b.useRef(!1);return{carryOverInProgress:i,carryOverIncompleteTodos:async s=>{if(!i.current)try{i.current=!0;const{data:l,error:o}=await t.from("todos").select("*").eq("deleted",!1).eq("completed",!1);if(o)throw o;if(!l||l.length===0)return;const u=l.filter(f=>(f.hidden_dates||[]).includes(s)?!1:f.visible_dates&&Array.isArray(f.visible_dates)&&f.visible_dates.length>0?f.visible_dates.includes(s)?!1:f.visible_dates.some(h=>h<s):!!(f.date&&f.date<s));if(u.length===0)return;for(const f of u){let d=[];f.visible_dates&&Array.isArray(f.visible_dates)&&f.visible_dates.length>0?d=[...f.visible_dates,s]:d=f.date?[f.date,s]:[s];const{error:m}=await t.from("todos").update({visible_dates:d}).eq("id",f.id);m&&console.error(` ${f.id}  :`,m.message)}}catch(l){console.error("  :",l.message)}finally{i.current=!1}},movePastIncompleteTodosToToday:async()=>{if(!i.current)try{i.current=!0;const s=new Date,l=Be(s),{data:o,error:u}=await t.from("todos").select("date").lt("date",l).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("date",{ascending:!0}).limit(1);if(u)throw u;if(!o||o.length===0)return;const f=new Date(o[0].date+"T00:00:00");let d=new Date(f);const m=new Date(s);m.setDate(m.getDate()-1);let h=0;for(;d<=m;){const p=Be(d),_=new Date(d);_.setDate(_.getDate()+1);const x=Be(_),{data:v,error:g}=await t.from("todos").select("*").eq("date",p).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("order_index",{ascending:!0});if(g)throw g;if(v&&v.length>0){const{data:y,error:w}=await t.from("todos").select("*").eq("date",x).eq("deleted",!1).order("order_index",{ascending:!0});if(w)throw w;const T=new Set;y==null||y.forEach(S=>{S.original_todo_id!==null&&T.add(S.original_todo_id)});const j=v.filter(S=>{if(S.stop_carryover_from&&p>=S.stop_carryover_from)return!1;const E=S.original_todo_id||S.id;return!T.has(E)});if(j.length>0){const S=j.map(oe=>oe.original_todo_id||oe.id).filter((oe,N,H)=>H.indexOf(oe)===N),{data:E,error:A}=await t.from("todos").select("id, created_at").in("id",S);if(A)throw A;const O={};E==null||E.forEach(oe=>{O[oe.id]=oe.created_at});const L=(y?y.length:0)+1,Q=j.map((oe,N)=>{const H=oe.original_todo_id||oe.id;return{text:oe.text,completed:!1,date:x,created_at:O[H]||oe.created_at,order_index:L+N,original_todo_id:H,parent_id:null,routine_id:null}}),{error:re}=await t.from("todos").insert(Q);if(re)throw re;h+=j.length}}d.setDate(d.getDate()+1)}h>0}catch(s){console.error("    :",s.message)}finally{i.current=!1}}}};function kO(e,t,n){const[i,r]=b.useState([]),[a,s]=b.useState(!1),[l,o]=b.useState(!1);return{dummySessions:i,showDummyModal:a,setShowDummyModal:s,showDummySQL:l,setShowDummySQL:o,handleCreateDummyData:async()=>{try{const h=`DUMMY-${Date.now()}`,p=new Date(2025,10,16),_=[],x=[],v="2025-11-14";_.push({text:`[${h}] : 14--`,date:v,completed:!1,created_at:"2025-11-14T09:00:00Z",order_index:1001},{text:`[${h}] : 14-14`,date:v,completed:!0,created_at:"2025-11-14T09:10:00Z",order_index:1002},{text:`[${h}] : 14-15`,date:v,completed:!0,created_at:"2025-11-14T09:20:00Z",order_index:1003},{text:`[${h}] : 14-16`,date:v,completed:!0,created_at:"2025-11-14T09:30:00Z",order_index:1004});const g="2025-11-15";_.push({text:`[${h}] : 15--`,date:g,completed:!1,created_at:"2025-11-15T10:00:00Z",order_index:1005},{text:`[${h}] : 15-15`,date:g,completed:!0,created_at:"2025-11-15T10:10:00Z",order_index:1006},{text:`[${h}] : 15-16`,date:g,completed:!0,created_at:"2025-11-15T10:20:00Z",order_index:1007});const y="2025-11-16";_.push({text:`[${h}] : 16-`,date:y,completed:!1,created_at:"2025-11-16T11:00:00Z",order_index:1008},{text:`[${h}] : 16-16`,date:y,completed:!0,created_at:"2025-11-16T11:10:00Z",order_index:1009}),_.push({text:`[${h}] : 14-15-`,date:g,completed:!1,created_at:"2025-11-14T14:00:00Z",order_index:1010},{text:`[${h}] : 14-15-15`,date:g,completed:!0,created_at:"2025-11-14T14:10:00Z",order_index:1011}),_.push({text:`[${h}] : 15-16-`,date:y,completed:!1,created_at:"2025-11-15T15:00:00Z",order_index:1012},{text:`[${h}] : 15-16-16`,date:y,completed:!0,created_at:"2025-11-15T15:10:00Z",order_index:1013},{text:`[${h}] : 14-16-`,date:y,completed:!1,created_at:"2025-11-14T15:00:00Z",order_index:1014},{text:`[${h}] : 14-16-16`,date:y,completed:!0,created_at:"2025-11-14T15:10:00Z",order_index:1015});const w="2025-11-17";_.push({text:`[${h}] : 16-17-`,date:w,completed:!1,created_at:"2025-11-16T16:00:00Z",order_index:1016},{text:`[${h}] : 15-17-`,date:w,completed:!1,created_at:"2025-11-15T16:00:00Z",order_index:1017},{text:`[${h}] : 14-17-`,date:w,completed:!1,created_at:"2025-11-14T16:00:00Z",order_index:1018});const T="2025-11-18";_.push({text:`[${h}] : 16-18-`,date:T,completed:!1,created_at:"2025-11-16T17:00:00Z",order_index:1019},{text:`[${h}] : 15-18-`,date:T,completed:!1,created_at:"2025-11-15T17:00:00Z",order_index:1020});const{data:j,error:S}=await t.from("todos").insert(_).select();if(S)throw S;const E=j.find(O=>O.text.includes("14--"));E&&x.push({todo_id:E.id,previous_text:`[${h}] : 14--1`,new_text:`[${h}] : 14--2`,changed_at:"2025-11-15T12:00:00Z",changed_on_date:g},{todo_id:E.id,previous_text:`[${h}] : 14--2`,new_text:`[${h}] : 14--`,changed_at:"2025-11-16T12:00:00Z",changed_on_date:y});const A=j.find(O=>O.text.includes("15--"));if(A&&x.push({todo_id:A.id,previous_text:`[${h}] : 15--1`,new_text:`[${h}] : 15--`,changed_at:"2025-11-16T13:00:00Z",changed_on_date:y}),x.length>0){const{error:O}=await t.from("todo_history").insert(x);O&&console.error("  :",O.message)}r(O=>[...O,{sessionId:h,createdAt:new Date().toISOString(),count:_.length,historyCount:x.length}]),alert(`    !
: ${_.length}
: ${x.length}
 ID: ${h}`),n()}catch(h){console.error("   :",h.message),alert("    : "+h.message)}},handleDeleteDummySession:async h=>{if(window.confirm(`   "${h}"   ?

      ,     .`))try{const{data:_,error:x}=await t.from("todos").select("id").like("text",`[${h}]%`);if(x)throw x;if(_&&_.length>0){const g=_.map(w=>w.id),{error:y}=await t.from("todo_history").delete().in("todo_id",g);y&&console.error("  :",y.message)}const{error:v}=await t.from("todos").delete().like("text",`[${h}]%`);if(v)throw v;r(g=>g.filter(y=>y.sessionId!==h)),alert(`  ${h}  !`),n()}catch(_){console.error("   :",_.message),alert("    : "+_.message)}},handleDeleteAllDummies:async()=>{if(window.confirm(`     ?

      ,     .`))try{const{data:p,error:_}=await t.from("todos").select("id").like("text","[DUMMY-%");if(_)throw _;if(p&&p.length>0){const v=p.map(y=>y.id),{error:g}=await t.from("todo_history").delete().in("todo_id",v);g&&console.error("  :",g.message)}const{error:x}=await t.from("todos").delete().like("text","[DUMMY-%");if(x)throw x;r([]),alert("     !"),n()}catch(p){console.error("    :",p.message),alert("     : "+p.message)}},handleRemoveDuplicates:async()=>{try{const{data:h,error:p}=await t.from("todos").select("*").eq("deleted",!1).order("created_at",{ascending:!0});if(p)throw p;if(!h||h.length===0){alert(" .");return}const _={};h.forEach(S=>{_[S.text]||(_[S.text]=[]),_[S.text].push(S)});const x=Object.entries(_).filter(([S,E])=>E.length>1);if(x.length===0){alert("  .");return}let v=`  :

`,g=[];if(x.forEach(([S,E])=>{v+=`"${S}" - ${E.length}
`;const A=E.slice(1);g.push(...A),A.forEach(L=>{const Q=new Date(L.created_at).toLocaleString("ko-KR");v+=`    : ${Q}
`});const O=E[0],C=new Date(O.created_at).toLocaleString("ko-KR");v+=`   : ${C}

`}),v+=`
 ${g.length}   .`,!window.confirm(v+`

     ,     .

?`))return;const w=g.map(S=>S.id),{error:T}=await t.from("todo_history").delete().in("todo_id",w);T&&console.error("  :",T.message);const{error:j}=await t.from("todos").delete().in("id",w);if(j)throw j;alert(` ${g.length}   .`),n()}catch(h){console.error("   :",h.message),alert("    : "+h.message)}}}}function MO(e,t){const[n,i]=b.useState([]),[r,a]=b.useState(!1),[s,l]=b.useState(""),[o,u]=b.useState(null),[f,d]=b.useState(""),[m,h]=b.useState(!1),[p,_]=b.useState(""),x=()=>{if(n.length===0)return"";const j=Math.floor(Math.random()*n.length);return n[j]},v=()=>{let j=0;h(!0),setTimeout(()=>{let S=x();for(;S===p&&n.length>1&&j<10;)S=x(),j++;h(!1),_(S)},300)},g=async()=>{try{const{data:j,error:S}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(S)throw S;if(j&&j.length>0){const E=j.map(A=>A.message);i(E),p||_(E[0])}}catch(j){console.error("   :",j.message)}},y=async j=>{var S;try{const{data:E}=await t.from("encouragement_messages").select("order_index").order("order_index",{ascending:!1}).limit(1),A=E&&E.length>0?E[0].order_index:0,{error:O}=await t.from("encouragement_messages").insert([{message:j,order_index:A+1,user_id:(S=e==null?void 0:e.user)==null?void 0:S.id}]);if(O)throw O;await g()}catch(E){console.error("   :",E.message),alert("   .")}},w=async(j,S)=>{try{const{data:E}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!E||j>=E.length)throw new Error("   .");const A=E[j],{error:O}=await t.from("encouragement_messages").update({message:S}).eq("id",A.id);if(O)throw O;await g()}catch(E){console.error("   :",E.message),alert("   .")}},T=async j=>{try{const{data:S}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!S||j>=S.length)throw new Error("   .");const E=S[j],{error:A}=await t.from("encouragement_messages").delete().eq("id",E.id);if(A)throw A;await g()}catch(S){console.error("   :",S.message),alert("   .")}};return b.useEffect(()=>{n.length>0&&!p&&_(x())},[n]),{encouragementMessages:n,showEncouragementModal:r,setShowEncouragementModal:a,newEncouragementMessage:s,setNewEncouragementMessage:l,editingEncouragementId:o,setEditingEncouragementId:u,editingEncouragementText:f,setEditingEncouragementText:d,showEncouragementEmoji:m,currentEncouragementMessage:p,handleEncouragementClick:v,fetchEncouragementMessages:g,addEncouragementMessage:y,updateEncouragementMessage:w,deleteEncouragementMessage:T}}function UO(e){const[t,n]=b.useState(!1),[i,r]=b.useState([]),[a,s]=b.useState("1week"),l=async()=>{try{const f=new Date,d=Be(f);let m=null;if(a!=="all")switch(m=new Date(f),a){case"1week":m.setDate(f.getDate()-7);break;case"2weeks":m.setDate(f.getDate()-14);break;case"1month":m.setMonth(f.getMonth()-1);break;case"3months":m.setMonth(f.getMonth()-3);break;case"6months":m.setMonth(f.getMonth()-6);break}let h=e.from("todos").select("*").eq("deleted",!1).is("routine_id",null).order("created_at",{ascending:!0});m&&(h=h.gte("date",Be(m)));const{data:p,error:_}=await h;if(_)throw _;const x={};for(const g of p||[]){const y=g.original_todo_id||g.id;x[y]||(x[y]=[]),x[y].push(g)}const v=Object.entries(x).map(([g,y])=>{const w=y.sort((A,O)=>new Date(A.date)-new Date(O.date)),T=w[0],j=w.map(A=>A.date);let S=null;for(const A of w)if(A.completed&&A.completed_at){const O=new Date(A.completed_at);S=Be(O);break}const E=w.find(A=>A.date===d);return{text:T.text,originalId:parseInt(g),createdAt:T.created_at,startDate:j[0],endDate:j[j.length-1],dates:j,completed:(E==null?void 0:E.completed)||!1,completedDate:S}}).sort((g,y)=>new Date(g.createdAt)-new Date(y.createdAt));r(v)}catch(f){console.error("   :",f.message)}};return{showGanttChart:t,ganttData:i,ganttPeriod:a,setGanttPeriod:s,handleOpenGanttChart:async()=>{n(!0),await l()},handleCloseGanttChart:()=>{n(!1),r([])},fetchGanttData:l}}function zO(){const{session:e,authLoading:t,handleGoogleLogin:n,handleLogout:i}=rO(),[r,a]=b.useState(new Date),[s,l]=b.useState(!1),[o,u]=b.useState("home"),f=b.useRef(new Set),d=ch(Da(wl),Da(Ob),Da(jc,{coordinateGetter:Hb})),[m,h]=b.useState([]),[p,_]=b.useState(null),{showTodoHistoryModal:x,todoHistory:v,expandedHistoryIds:g,handleOpenTodoHistoryModal:y,handleCloseTodoHistoryModal:w,toggleHistoryDetail:T}=CO({session:e,supabase:ge,selectedTodoForModal:p,setSelectedTodoForModal:_}),{showRoutineModal:j,routines:S,setRoutines:E,routineInput:A,setRoutineInput:O,selectedDays:C,selectedTimeSlot:L,setSelectedTimeSlot:Q,isAddingRoutine:re,editingRoutineId:oe,editingRoutineText:N,setEditingRoutineText:H,showRoutineHistory:J,selectedRoutineForHistory:be,routineHistoryData:fe,editingRoutineDays:Xe,showDeleteConfirmModal:Ve,setShowDeleteConfirmModal:ke,routineToDelete:Me,fetchRoutines:Ue,handleAddRoutine:Ye,handleCreateRoutineFromTodo:Y,handleStartEditRoutine:R,handleCancelEditRoutine:z,handleSaveEditRoutine:k,handleToggleEditDay:ee,handleDeleteRoutine:K,deleteThisOnly:te,deleteFromNow:U,deleteAll:ae,fetchRoutineHistory:de,handleCloseRoutineHistory:F,handleOpenRoutine:le,handleCloseRoutine:he,handleToggleDay:ye,createRoutineTodos:wt}=DO({session:e,supabase:ge,selectedDate:r,setTodos:h,setSuccessToastMessage:()=>{},setShowSuccessToast:()=>{}}),{showTodoRoutineSetupModal:vt,routineDaysForModal:jt,setRoutineDaysForModal:ot,isEditingRoutineInModal:tt,setIsEditingRoutineInModal:V,routineTimeSlotForModal:$,setRoutineTimeSlotForModal:I,handleOpenTodoRoutineSetupModal:ie,handleCloseTodoRoutineSetupModal:ne}=NO({selectedTodoForModal:p,setSelectedTodoForModal:_,routines:S}),{carryOverIncompleteTodos:_e}=RO({session:e,supabase:ge,selectedDate:r}),{routineInputValue:Se,setRoutineInputValue:Ie,normalInputValue:$e,setNormalInputValue:Te,loading:De,isDraggingAny:me,isAdding:Ke,showUndoToast:je,showSuccessToast:Je,successToastMessage:Mt,lastDeleteAction:Ge,focusedTodoId:ce,setFocusedTodoId:pt,showDeleteConfirmModal:Xt,setShowDeleteConfirmModal:Lt,todoToDelete:Vt,activeTodoId:Ut,overId:bn,fetchTodos:bt,handleAddRoutineTodo:Rn,handleAddNormalTodo:rn,handleToggleTodo:tn,handleDeleteTodo:kn,handleAddSubTodo:Mn,handleEditTodo:an,handleDragStart:X,handleDragOver:P,handleDragCancel:St,handleDragEnd:zt,handleUndoDelete:ze,deleteThisOnly:xt,deleteFromNow:at,deleteAll:mt,handleRemoveTodoFromUI:nn}=AO(e,ge,r,m,h,S,E,p),di=D=>{pt(D)},ri=D=>{},is=()=>{ze()},rs=()=>{const D=document.querySelector(".memo-section");D&&D.scrollIntoView({behavior:"smooth",block:"start"})},{showGanttChart:xl,ganttData:as,ganttPeriod:bh,setGanttPeriod:Yb,handleOpenGanttChart:Ib,handleCloseGanttChart:Gb,fetchGanttData:Kb}=UO(ge),{dummySessions:Xb,showDummyModal:Jb,setShowDummyModal:_h,handleCreateDummyData:Qb,handleDeleteDummySession:Pb,handleDeleteAllDummies:Zb,handleRemoveDuplicates:Fb}=kO(e,ge,bt),[BO,HO]=b.useState(!1),{memoContent:Wb,setMemoContent:e_,isSavingMemo:t_,fetchMemoContent:n_}=TO(e),{blocks:wh,setBlocks:Sh,focusedBlockId:i_,setFocusedBlockId:r_,keyThoughtsHistory:a_,showKeyThoughtsHistory:s_,setShowKeyThoughtsHistory:Cc,fetchBlocks:l_,saveAllBlocks:o_,fetchKeyThoughtsHistory:xh,restoreKeyThoughtsVersion:c_}=jO(e),{encouragementMessages:u_,showEncouragementModal:d_,setShowEncouragementModal:Th,newEncouragementMessage:f_,setNewEncouragementMessage:h_,editingEncouragementId:m_,setEditingEncouragementId:g_,editingEncouragementText:y_,setEditingEncouragementText:v_,showEncouragementEmoji:p_,currentEncouragementMessage:b_,handleEncouragementClick:__,fetchEncouragementMessages:w_,addEncouragementMessage:S_,updateEncouragementMessage:x_,deleteEncouragementMessage:T_}=MO(e,ge),E_=async D=>{var q,G;try{const W=Be(r),B=m.filter(Oe=>!Oe.parent_id&&Oe.section_type==="normal"),Z=B.length>0?Math.max(...B.map(Oe=>Oe.order_index))+1:1,Ze=`temp_${Date.now()}_${Math.random()}`,Ee={id:Ze,text:D,completed:!1,order_index:Z,date:W,visible_dates:[W],hidden_dates:[],section_type:"normal",user_id:(q=e==null?void 0:e.user)==null?void 0:q.id,_isOptimistic:!0};if(h(Oe=>[...Oe,Ee]),(G=e==null?void 0:e.user)!=null&&G.id&&ge){const{data:Oe,error:gt}=await ge.from("todos").insert([{text:D,completed:!1,order_index:Z,date:W,visible_dates:[W],hidden_dates:[],section_type:"normal",user_id:e.user.id}]).select();if(gt)throw gt;h(Jt=>Jt.map(Ce=>Ce.id===Ze?Oe[0]:Ce))}else{const Oe=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");Oe.push({text:D,dateStr:W,timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(Oe))}}catch(W){console.error("Quick add error:",W);const B=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");B.push({text:D,dateStr:Be(r),timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(B))}},[Ri,j_]=b.useState(()=>localStorage.getItem("viewMode")||"horizontal"),[Nc,Eh]=b.useState({normal:"  ",routine:"  ",memo:" ","key-thoughts":"  "}),[Ir,Tl]=b.useState([]),[O_,jh]=b.useState(!1),[Oh,Dh]=b.useState(!1),[Ah,Ch]=b.useState({}),D_=xO(e),{sectionOrder:Gr,setSectionOrder:Nh,fetchSectionOrder:A_,saveSectionOrder:Rh,moveSectionLeft:Rc,moveSectionRight:kc}=D_,Kr=b.useRef(null),[C_,N_]=b.useState(0),Mc=b.useRef(null),[Xr,Uc]=b.useState([]),[R_,kh]=b.useState(!1),Mh=D=>{try{localStorage.setItem("hiddenSections",JSON.stringify(D))}catch(q){console.error("   :",q)}},k_=()=>{try{const D=localStorage.getItem("hiddenSections");D&&Uc(JSON.parse(D))}catch(D){console.error("   :",D)}},zc=D=>{const q=[...Xr,D];Uc(q),Mh(q)},M_=D=>{const q=Xr.filter(G=>G!==D);Uc(q),Mh(q)},U_=()=>{const D=new Date(r);D.setDate(D.getDate()-1),a(D)},z_=()=>{const D=new Date(r);D.setDate(D.getDate()+1),a(D)},B_=D=>{const q=new Date(D.target.value+"T00:00:00");a(q)},H_=async()=>{var D;if((D=e==null?void 0:e.user)!=null&&D.id)try{const{data:q,error:G}=await ge.from("user_settings").select("setting_value").eq("setting_key","section_titles").maybeSingle();if(G){console.error("   :",G.message);return}if(q&&q.setting_value){const W=JSON.parse(q.setting_value);Eh(B=>({...B,...W}))}}catch(q){console.error("   :",q.message)}},$_=async(D,q)=>{var W;if(!((W=e==null?void 0:e.user)!=null&&W.id))return;const G={...Nc,[D]:q};Eh(G);try{const{data:B,error:Z}=await ge.from("user_settings").select("id").eq("setting_key","section_titles").maybeSingle();if(Z){console.error("   :",Z.message);return}B?await ge.from("user_settings").update({setting_value:JSON.stringify(G),updated_at:new Date().toISOString()}).eq("setting_key","section_titles"):await ge.from("user_settings").insert([{setting_key:"section_titles",setting_value:JSON.stringify(G),user_id:e.user.id}])}catch(B){console.error("   :",B.message)}},q_=async()=>{var D;if((D=e==null?void 0:e.user)!=null&&D.id)try{const{data:q,error:G}=await ge.from("user_settings").select("setting_value").eq("setting_key","custom_sections").maybeSingle();if(G){console.error("    :",G.message);return}if(q&&q.setting_value){const W=JSON.parse(q.setting_value);Tl(W)}}catch(q){console.error("    :",q.message)}},Bc=async D=>{var q;if((q=e==null?void 0:e.user)!=null&&q.id)try{const{data:G,error:W}=await ge.from("user_settings").select("id").eq("setting_key","custom_sections").maybeSingle();if(W){console.error("    :",W.message);return}G?await ge.from("user_settings").update({setting_value:JSON.stringify(D),updated_at:new Date().toISOString()}).eq("setting_key","custom_sections"):await ge.from("user_settings").insert([{setting_key:"custom_sections",setting_value:JSON.stringify(D),user_id:e.user.id}])}catch(G){console.error("    :",G.message)}},L_=({name:D,icon:q})=>{const G={id:`custom-${Date.now()}`,name:D,icon:q},W=[...Ir,G];Tl(W),Bc(W);const B=[...Gr,G.id];Nh(B),Rh(B)},V_=async D=>{const q=Ah[D]||"";if(!(!q.trim()||Oh)){if(!e){alert(" ");return}Dh(!0);try{const G=m.filter(Oe=>!Oe.parent_id&&Oe.section_type==="custom"&&Oe.section_id===D),W=G.length>0?Math.max(...G.map(Oe=>Oe.order_index))+1:1,B=Be(r),Z={text:q.trim(),completed:!1,order_index:W,date:B,visible_dates:[B],hidden_dates:[],user_id:e.user.id,section_id:D,section_type:"custom"},{data:Ze,error:Ee}=await ge.from("todos").insert([Z]).select();if(Ee)throw Ee;Ze&&Ze.length>0&&(h(Oe=>[...Oe,Ze[0]]),Ch(Oe=>({...Oe,[D]:""})))}catch(G){console.error("  :",G.message)}finally{Dh(!1)}}},Y_=async D=>{if(!confirm("  ?      ."))return;try{const{error:W}=await ge.from("todos").delete().eq("section_id",D);if(W){console.error("   :",W.message);return}}catch(W){console.error("   :",W.message);return}const q=Ir.filter(W=>W.id!==D);Tl(q),Bc(q);const G=Gr.filter(W=>W!==D);Nh(G),Rh(G),h(W=>W.filter(B=>B.section_id!==D))},I_=async(D,q)=>{try{const G=Be(D),W=Be(q),{data:B,error:Z}=await ge.from("todos").select("*").eq("deleted",!1).eq("completed",!1).is("routine_id",null);if(Z)throw Z;const Ze=(B||[]).filter(Ee=>Ee.stop_carryover_from&&G>=Ee.stop_carryover_from?!1:Ee.visible_dates&&Array.isArray(Ee.visible_dates)&&Ee.visible_dates.length>0?Ee.visible_dates.includes(G):Ee.date===G);if(Ze.length===0)return;for(const Ee of Ze){let Oe=Ee.visible_dates||[Ee.date];if(Oe.includes(W))continue;const gt=[...Oe,W].sort(),{error:Jt}=await ge.from("todos").update({visible_dates:gt}).eq("id",Ee.id);Jt&&console.error(` ${Ee.id}  :`,Jt.message)}}catch(G){console.error("   :",G.message)}};b.useEffect(()=>{let D=null;const q=()=>{document.body.classList.add("is-scrolling"),D&&clearTimeout(D),D=setTimeout(()=>{document.body.classList.remove("is-scrolling")},1e3)};return window.addEventListener("scroll",q),()=>{window.removeEventListener("scroll",q),D&&clearTimeout(D)}},[]),b.useEffect(()=>{e&&(w_(),n_(),l_(),Ue(),A_(),H_(),q_(),k_())},[e]),b.useEffect(()=>{if(!Kr.current)return;const D=Kr.current,q=Ri==="horizontal";let G=!1,W=0,B=0,Z=0;const Ze=Ae=>Ae.type.includes("touch")?q?Ae.touches[0].pageX:Ae.touches[0].pageY:q?Ae.pageX:Ae.pageY,Ee=Ae=>{Ae.target.closest(".section-block")||(G=!0,W=Ze(Ae),B=q?D.scrollLeft:D.scrollTop,D.style.transition="none",D.style.transform=q?"translateX(0)":"translateY(0)",Z=0)},Oe=()=>{G&&Z!==0&&(D.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",D.style.transform=q?"translateX(0)":"translateY(0)",setTimeout(()=>{D.style.transition="none",Z=0},300)),G=!1},gt=()=>{Z!==0&&(D.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",D.style.transform=q?"translateX(0)":"translateY(0)",setTimeout(()=>{D.style.transition="none",Z=0},300)),G=!1},Jt=Ae=>{if(!G)return;Ae.preventDefault();const Fe=(Ze(Ae)-W)*1.5,Qt=B-Fe,zn=q?D.scrollWidth-D.clientWidth:D.scrollHeight-D.clientHeight;if(Qt<0){const ss=-Qt;Z=Math.min(ss*.3,100),q?(D.scrollLeft=0,D.style.transform=`translateX(${Z}px)`):(D.scrollTop=0,D.style.transform=`translateY(${Z}px)`)}else if(Qt>zn){const ss=Qt-zn;Z=-Math.min(ss*.3,100),q?(D.scrollLeft=zn,D.style.transform=`translateX(${Z}px)`):(D.scrollTop=zn,D.style.transform=`translateY(${Z}px)`)}else Z=0,D.style.transform=q?"translateX(0)":"translateY(0)",q?D.scrollLeft=Qt:D.scrollTop=Qt},Ce=Ae=>{q&&Ae.target.closest(".section-block")&&Ae.deltaX!==0&&Ae.preventDefault()};return D.addEventListener("mousedown",Ee),document.addEventListener("mouseup",gt),document.addEventListener("mouseleave",Oe),D.addEventListener("mousemove",Jt),D.addEventListener("touchstart",Ee,{passive:!0}),D.addEventListener("touchmove",Jt,{passive:!1}),D.addEventListener("touchend",gt),D.addEventListener("touchcancel",gt),D.addEventListener("wheel",Ce,{passive:!1}),()=>{D.removeEventListener("mousedown",Ee),document.removeEventListener("mouseup",gt),document.removeEventListener("mouseleave",Oe),D.removeEventListener("mousemove",Jt),D.removeEventListener("touchstart",Ee),D.removeEventListener("touchmove",Jt),D.removeEventListener("touchend",gt),D.removeEventListener("touchcancel",gt),D.removeEventListener("wheel",Ce)}},[Ri,m,S]),b.useEffect(()=>{if(Ri!=="horizontal"||!Kr.current)return;const D=Kr.current,q=()=>{const G=D.querySelectorAll(".section-block");if(G.length===0)return;const W=D.getBoundingClientRect(),B=W.left+W.width/2;let Z=0,Ze=1/0;G.forEach((Ee,Oe)=>{const gt=Ee.getBoundingClientRect(),Jt=gt.left+gt.width/2,Ce=Math.abs(Jt-B);Ce<Ze&&(Ze=Ce,Z=Oe)}),N_(Z)};return D.addEventListener("scroll",q),q(),()=>D.removeEventListener("scroll",q)},[Ri,m,S]),b.useEffect(()=>{if(!Mc.current)return;const D=Mc.current;let q=!1,G=0,W=0,B=0;const Z=gt=>{gt.target.closest(".section-block")||(q=!0,G=gt.pageY,W=D.scrollTop,D.style.transition="none",D.style.transform="translateY(0)",B=0)},Ze=()=>{q&&B!==0&&(D.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",D.style.transform="translateY(0)",setTimeout(()=>{D.style.transition="none",B=0},300)),q=!1},Ee=()=>{B!==0&&(D.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",D.style.transform="translateY(0)",setTimeout(()=>{D.style.transition="none",B=0},300)),q=!1},Oe=gt=>{if(!q)return;gt.preventDefault();const Ce=(gt.pageY-G)*1.5,Ae=W-Ce,Un=D.scrollHeight-D.clientHeight;if(Ae<0){const Fe=-Ae;B=Math.min(Fe*.3,100),D.scrollTop=0,D.style.transform=`translateY(${B}px)`}else if(Ae>Un){const Fe=Ae-Un;B=-Math.min(Fe*.3,100),D.scrollTop=Un,D.style.transform=`translateY(${B}px)`}else B=0,D.style.transform="translateY(0)",D.scrollTop=Ae};return D.addEventListener("mousedown",Z),document.addEventListener("mouseup",Ee),document.addEventListener("mouseleave",Ze),D.addEventListener("mousemove",Oe),()=>{D.removeEventListener("mousedown",Z),document.removeEventListener("mouseup",Ee),document.removeEventListener("mouseleave",Ze),D.removeEventListener("mousemove",Oe)}},[m,S]),b.useEffect(()=>{xl&&Kb()},[bh]),b.useEffect(()=>{const D=async()=>{const G=new Date,W=new Date(G);W.setHours(24,0,0,0);const B=W.getTime()-G.getTime();return setTimeout(async()=>{const Ze=new Date(G),Ee=new Date(G);Ee.setDate(Ee.getDate()+1),await I_(Ze,Ee),await wt(),a(new Date),D()},B)},q=D();return()=>clearTimeout(q)},[]),b.useEffect(()=>{(async()=>{var Ee;const W=Be(r),Z=Be(new Date);W===Z&&((Ee=e==null?void 0:e.user)!=null&&Ee.id)&&await _e(W),await bt()})();const q=Be(r),G=ge.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"todos",filter:`date=eq.${q}`},W=>{W.eventType==="INSERT"?h(B=>B.some(Z=>Z.id===W.new.id)?B:[...B,W.new]):W.eventType==="UPDATE"?h(B=>f.current.has(W.new.id)?B:B.map(Z=>Z.id===W.new.id?W.new:Z)):W.eventType==="DELETE"&&h(B=>B.filter(Z=>Z.id!==W.old.id))}).subscribe(W=>{});return()=>{ge.removeChannel(G)}},[r,e]),b.useEffect(()=>{if(me){const D=window.scrollY,q=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${D}px`,document.body.style.left="0",document.body.style.right="0",q>0&&(document.body.style.paddingRight=`${q}px`),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.paddingRight="",window.scrollTo(0,D)}}},[me]);const Uh=SO({authLoading:t,session:e,handleGoogleLogin:n});return Uh||(o==="keyThoughtsViewer"?c.jsx(gO,{blocks:wh,setBlocks:Sh,onSave:o_,onClose:()=>u("home")}):c.jsxs("div",{className:`app ${me?"dragging-active":""}`,children:[c.jsx(aO,{showSidebar:s,setShowSidebar:l,session:e,viewMode:Ri,setViewMode:j_,onOpenRoutine:le,onOpenMemo:rs,onScrollToKeyThoughts:()=>{const D=document.querySelector(".key-thoughts-section");D&&D.scrollIntoView({behavior:"smooth",block:"start"})},onOpenGanttChart:Ib,onOpenEncouragementModal:()=>Th(!0),onOpenDummyModal:()=>_h(!0),onOpenAddSection:()=>jh(!0),onOpenHiddenSections:()=>kh(!0),onLogout:i}),c.jsxs("div",{className:`container ${Ri==="horizontal"?"container-wide":""}`,children:[c.jsx(lO,{showSidebar:s,setShowSidebar:l,selectedDate:r,onDateChange:B_,onPrevDay:U_,onNextDay:z_,showEncouragementEmoji:p_,currentEncouragementMessage:b_,onEncouragementClick:__,setSelectedDate:a,onQuickAdd:E_}),c.jsxs("div",{className:"content-scrollable",ref:Mc,children:[c.jsxs(mh,{sensors:d,collisionDetection:uh,onDragStart:X,onDragOver:P,onDragEnd:zt,onDragCancel:St,measuring:{droppable:{strategy:Br.Always}},children:[c.jsx("div",{ref:Kr,className:`sections-container ${Ri==="horizontal"?"horizontal-layout":"vertical-layout"}`,children:c.jsx("div",{className:"todo-list",children:De?c.jsx("p",{className:"empty-message",children:" ..."}):(()=>{const D=m.filter(B=>!B.parent_id&&B.section_type==="routine").sort((B,Z)=>B.order_index-Z.order_index),q=m.filter(B=>!B.parent_id&&B.section_type==="pending_routine").sort((B,Z)=>B.order_index-Z.order_index),G=m.filter(B=>!B.parent_id&&B.section_type==="normal").sort((B,Z)=>B.order_index-Z.order_index),W=[...D.map(B=>B.id),...q.map(B=>B.id),...G.map(B=>B.id),...Ir.flatMap(B=>m.filter(Z=>!Z.parent_id&&Z.section_type==="custom"&&Z.section_id===B.id).map(Z=>Z.id))];return c.jsx(Sr,{items:W,strategy:wr,children:Gr.filter(B=>!Xr.includes(B)).map((B,Z)=>{const Ze=Gr.filter(Ce=>!Xr.includes(Ce)),Ee=Ze.indexOf(B),Oe=Ee===0,gt=Ee===Ze.length-1,Jt=[...Oe?[]:[{icon:"",label:" ",onClick:()=>Rc(B)}],...gt?[]:[{icon:"",label:" ",onClick:()=>kc(B)}],{icon:"",label:"",onClick:()=>zc(B)}];if(B==="memo"){const Ce=[...Jt];return c.jsx("div",{children:c.jsx(fO,{title:"  ",className:"memo-section section-block",content:Wb,setContent:e_,isSaving:t_,placeholder:" ...",settingsMenuItems:Ce})},"memo")}else{if(B==="routine")return c.jsx("div",{children:c.jsxs(Uu,{title:" ",className:"routine-section section-block",inputValue:Se,setInputValue:Ie,onAddTodo:Rn,isAdding:Ke,placeholder:"   ...",settingsMenuItems:Jt,children:[D.length>0&&c.jsx(Sr,{items:D.map(Ce=>Ce.id),strategy:wr,children:D.map((Ce,Ae)=>{const Un=m.filter(Fe=>Fe.parent_id===Ce.id);return c.jsx(sa,{todo:Ce,index:Ae,onToggle:tn,onDelete:kn,onEdit:an,formatDate:Ui,formatDateOnly:Bn,isFocused:ce===Ce.id,onFocus:di,onAddSubTodo:Mn,subtodos:Un,level:0,onCreateRoutine:Y,routines:S,onShowRoutineHistory:de,onOpenRoutineSetupModal:ie,onOpenHistoryModal:y,currentPageDate:Be(r),onRemoveFromUI:nn,showSuccessMessage:ri,activeId:Ut,overId:bn},Ce.id)})}),D.length>0&&q.length>0&&c.jsx("div",{style:{margin:"1rem 0",padding:"0 1rem"},children:c.jsx("div",{className:"separator-line"})}),q.length>0&&c.jsx(Sr,{items:q.map(Ce=>Ce.id),strategy:wr,children:q.map((Ce,Ae)=>{const Un=m.filter(Fe=>Fe.parent_id===Ce.id);return c.jsx(sa,{todo:Ce,index:Ae,onToggle:tn,onDelete:kn,onEdit:an,formatDate:Ui,formatDateOnly:Bn,isFocused:ce===Ce.id,onFocus:di,onAddSubTodo:Mn,subtodos:Un,level:0,onCreateRoutine:Y,routines:S,onShowRoutineHistory:de,onOpenRoutineSetupModal:ie,onOpenHistoryModal:y,currentPageDate:Be(r),isPendingRoutine:!0,onRemoveFromUI:nn,showSuccessMessage:ri,activeId:Ut,overId:bn},Ce.id)})})]})},"routine");if(B==="normal"){const Ce=[...Oe?[]:[{icon:"",label:" ",onClick:()=>Rc(B)}],...gt?[]:[{icon:"",label:" ",onClick:()=>kc(B)}],{icon:"",label:"",onClick:()=>{confirm(`    ?

      .`)&&zc("normal")}},{icon:"",label:"",onClick:()=>{alert(`      .

   ""  .`)}}];return c.jsx("div",{children:c.jsx(Uu,{title:Nc.normal,className:"normal-section section-block",inputValue:$e,setInputValue:Te,onAddTodo:rn,isAdding:Ke,placeholder:"   ...",editable:!0,onTitleChange:Ae=>$_("normal",Ae),settingsMenuItems:Ce,children:G.length>0&&c.jsx(Sr,{items:G.map(Ae=>Ae.id),strategy:wr,children:G.map((Ae,Un)=>{const Fe=m.filter(zn=>zn.parent_id===Ae.id),Qt=Be(r);return c.jsx(sa,{todo:Ae,index:Un,onToggle:tn,onDelete:kn,onEdit:an,formatDate:Ui,formatDateOnly:Bn,isFocused:ce===Ae.id,onFocus:di,onAddSubTodo:Mn,subtodos:Fe,level:0,onCreateRoutine:Y,routines:S,onShowRoutineHistory:de,onOpenRoutineSetupModal:ie,onOpenHistoryModal:y,currentPageDate:Qt,onRemoveFromUI:nn,showSuccessMessage:ri,activeId:Ut,overId:bn},Ae.id)})})})},"normal")}else if(B==="key-thoughts"){const Ce=[...Jt,{icon:"",label:"",onClick:()=>u("keyThoughtsViewer")},{icon:"",label:"",onClick:()=>{xh(),Cc(!0)}}];return c.jsx("div",{children:c.jsx(hO,{blocks:wh,setBlocks:Sh,focusedBlockId:i_,setFocusedBlockId:r_,onOpenViewer:()=>u("keyThoughtsViewer"),onShowHistory:()=>{xh(),Cc(!0)},settingsMenuItems:Ce})},"key-thoughts")}else{const Ce=Ir.find(Fe=>Fe.id===B);if(!Ce)return null;const Ae=m.filter(Fe=>!Fe.parent_id&&Fe.section_type==="custom"&&Fe.section_id===B).sort((Fe,Qt)=>Fe.order_index-Qt.order_index),Un=[...Oe?[]:[{icon:"",label:" ",onClick:()=>Rc(B)}],...gt?[]:[{icon:"",label:" ",onClick:()=>kc(B)}],{icon:"",label:"",onClick:()=>zc(B)},{icon:"",label:"",onClick:()=>Y_(B)}];return c.jsx("div",{children:c.jsx(Uu,{title:`${Ce.icon} ${Ce.name}`,className:"custom-section section-block",inputValue:Ah[B]||"",setInputValue:Fe=>Ch(Qt=>({...Qt,[B]:Fe})),onAddTodo:()=>V_(B),isAdding:Oh,placeholder:`${Ce.name}   ...`,editable:!0,onTitleChange:Fe=>{const Qt=Ir.map(zn=>zn.id===B?{...zn,name:Fe}:zn);Tl(Qt),Bc(Qt)},settingsMenuItems:Un,children:Ae.length>0&&c.jsx(Sr,{items:Ae.map(Fe=>Fe.id),strategy:wr,children:Ae.map((Fe,Qt)=>{const zn=m.filter(ss=>ss.parent_id===Fe.id);return c.jsx(sa,{todo:Fe,index:Qt,onToggle:tn,onDelete:kn,onEdit:an,formatDate:Ui,formatDateOnly:Bn,isFocused:ce===Fe.id,onFocus:di,onAddSubTodo:Mn,subtodos:zn,level:0,onCreateRoutine:Y,routines:S,onShowRoutineHistory:de,onOpenRoutineSetupModal:ie,onOpenHistoryModal:y,currentPageDate:Be(r),onRemoveFromUI:nn,showSuccessMessage:ri,activeId:Ut,overId:bn},Fe.id)})})})},B)}}})})})()})}),c.jsx(gh,{children:Ut?(()=>{const D=m.find(G=>G.id===Ut);if(!D)return null;const q=m.filter(G=>G.parent_id===D.id);return c.jsx("div",{className:"drag-overlay-todo",children:c.jsx(sa,{todo:D,index:0,onToggle:()=>{},onDelete:()=>{},onEdit:()=>{},formatDate:Ui,formatDateOnly:Bn,isFocused:!1,onFocus:()=>{},onAddSubTodo:()=>{},subtodos:q,level:0,onCreateRoutine:()=>{},routines:S,onShowRoutineHistory:()=>{},onOpenRoutineSetupModal:()=>{},onOpenHistoryModal:()=>{},currentPageDate:Be(r),onRemoveFromUI:()=>{},showSuccessMessage:()=>{},hideNumber:!0})})})():null})]}),c.jsx(oO,{viewMode:Ri,currentSectionIndex:C_,sectionsContainerRef:Kr,visibleSectionCount:Gr.filter(D=>!Xr.includes(D)).length})]}),je&&c.jsx(Fg,{message:"",onUndo:ze}),Je&&c.jsx(Fg,{message:Mt,onUndo:Ge?is:null,variant:"success"}),Xt&&Vt&&c.jsx(Wg,{todo:Vt,onClose:()=>Lt(!1),onDeleteThisOnly:xt,onDeleteFromNow:at,onDeleteAll:mt}),Ve&&Me&&c.jsx(Wg,{todo:Me,onClose:()=>ke(!1),onDeleteThisOnly:te,onDeleteFromNow:U,onDeleteAll:ae}),x&&p&&(()=>{const D=p,q=D.visible_dates&&D.visible_dates.length>0?D.visible_dates:[D.date],G=q[0],W=q.map(Z=>({id:`${D.id}-${Z}`,date:Z})),B=v[D.id]||[];return c.jsx("div",{className:"modal-overlay",onClick:w,children:c.jsxs("div",{className:"modal-content",onClick:Z=>Z.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:w,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsxs("div",{className:"todo-history",children:[c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:":"}),c.jsx("span",{className:"history-value",children:Ui(D.created_at)})]}),c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:Bn(G?new Date(G+"T00:00:00"):new Date(D.date+"T00:00:00"))})]}),W.length>0&&c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:W.map((Z,Ze)=>{const Ee=Z.date===D.date,Oe=Bn(new Date(Z.date+"T00:00:00"));return c.jsxs("span",{children:[Ze>0&&"  ",c.jsxs("span",{style:Ee?{fontWeight:"bold",color:"#4CAF50"}:{},children:[Oe.split("(")[0],Ee?"()":""]})]},Z.id)})})]}),(()=>{const Z=new Date(D.created_at).toISOString().split("T")[0],Ze=D.date;return Z!==Ze&&W.length===0?c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:Bn(new Date(D.date+"T00:00:00"))})]}):null})(),B.length>0&&c.jsxs("div",{className:"history-changes-list",children:[c.jsxs("div",{className:"history-changes-header",children:["  (",B.length,")"]}),B.map(Z=>c.jsxs("div",{className:"history-record-compact",children:[c.jsxs("div",{className:"history-record-summary",children:[c.jsxs("div",{className:"history-change-time",children:[Ui(Z.changed_at),Z.changed_on_date&&c.jsxs("span",{className:"history-page-info",children:[" (: ",Bn(new Date(Z.changed_on_date+"T00:00:00")),")"]})]}),c.jsx("button",{className:"history-detail-button",onClick:Ze=>{Ze.stopPropagation(),T(Z.id)},children:g.includes(Z.id)?"":""})]}),g.includes(Z.id)&&c.jsxs("div",{className:"history-change",children:[c.jsxs("div",{className:"history-change-item history-before",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:Z.previous_text})]}),c.jsx("div",{className:"history-change-arrow",children:""}),c.jsxs("div",{className:"history-change-item history-after",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:Z.new_text})]})]})]},Z.id))]})]})})]})})})(),vt&&p&&(()=>{const D=p,q=S.find(G=>G.id===D.routine_id);return c.jsx("div",{className:"modal-overlay",onClick:ne,children:c.jsxs("div",{className:"modal-content",onClick:G=>G.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:ne,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("div",{className:"routine-setup-inline",children:q&&!tt?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-current-info",children:[c.jsx("div",{className:"routine-info-title",children:" :"}),c.jsx("div",{className:"routine-days-display",children:Cr.filter(G=>q.days.includes(G.key)).map(G=>c.jsx("span",{className:"routine-day-badge",children:G.label},G.key))}),q.time_slot&&c.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",q.time_slot]})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:G=>{G.stopPropagation(),q&&(ot(q.days),I(q.time_slot||""),V(!0))},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:async G=>{G.stopPropagation(),q&&D&&(await Y(D.id,D.text,[],null,!0),ne())},className:"routine-remove-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"routine-setup-title",children:tt?" :":"  :"}),c.jsx("div",{className:"day-selector-inline",children:Cr.map(G=>c.jsx("button",{onClick:W=>{W.stopPropagation(),handleToggleRoutineDayInModal(G.key)},className:`day-button-inline ${jt.includes(G.key)?"selected":""}`,children:G.label},G.key))}),c.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[c.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),c.jsx(vh,{value:$,onChange:G=>I(G)})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:async G=>{G.stopPropagation(),D&&(tt&&q?await Y(D.id,D.text,jt,q.id,!1,$):await Y(D.id,D.text,jt,null,!1,$),ne())},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:G=>{G.stopPropagation(),ne()},className:"routine-cancel-button",children:""})]})]})})})]})})})(),c.jsx(cO,{showRoutineModal:j,onClose:he,routineInput:A,setRoutineInput:O,isAddingRoutine:re,selectedDays:C,onToggleDay:ye,selectedTimeSlot:L,setSelectedTimeSlot:Q,onAddRoutine:Ye,routines:S,editingRoutineId:oe,editingRoutineText:N,setEditingRoutineText:H,editingRoutineDays:Xe,onToggleEditDay:ee,onStartEdit:R,onSaveEdit:k,onCancelEdit:z,onDelete:K,onShowHistory:de}),c.jsx(dO,{showRoutineHistory:J,onClose:F,selectedRoutine:be,routineHistoryData:fe}),c.jsx(yO,{showDummyModal:Jb,onClose:()=>_h(!1),onCreateDummyData:Qb,onRemoveDuplicates:Fb,dummySessions:Xb,onDeleteDummySession:Pb,onDeleteAllDummies:Zb,formatDate:Ui}),c.jsx(vO,{showGanttChart:xl,onClose:Gb,ganttData:as,ganttPeriod:bh,setGanttPeriod:Yb,formatDateOnly:Bn}),c.jsx(pO,{showEncouragementModal:d_,onClose:()=>Th(!1),encouragementMessages:u_,newEncouragementMessage:f_,setNewEncouragementMessage:h_,onAddEncouragementMessage:S_,editingEncouragementId:m_,editingEncouragementText:y_,setEditingEncouragementId:g_,setEditingEncouragementText:v_,onUpdateEncouragementMessage:x_,onDeleteEncouragementMessage:T_}),c.jsx(_O,{isOpen:O_,onClose:()=>jh(!1),onAddSection:L_}),c.jsx(wO,{show:R_,onClose:()=>kh(!1),hiddenSections:Xr,sectionOrder:Gr,sectionTitles:Nc,customSections:Ir,onShowSection:M_}),c.jsx(bO,{showKeyThoughtsHistory:s_,onClose:()=>Cc(!1),keyThoughtsHistory:a_,onRestoreVersion:c_})]})]}))}Lx.createRoot(document.getElementById("root")).render(c.jsx(b.StrictMode,{children:c.jsx(zO,{})}));

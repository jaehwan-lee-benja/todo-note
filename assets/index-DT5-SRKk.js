function G_(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const r in a)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(a,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>a[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function K_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function sy(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var r=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,r.get?r:{enumerable:!0,get:function(){return e[a]}})}),n}var ly={exports:{}},vc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_=Symbol.for("react.transitional.element"),J_=Symbol.for("react.fragment");function oy(e,t,n){var a=null;if(n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:X_,type:e,key:a,ref:t!==void 0?t:null,props:n}}vc.Fragment=J_;vc.jsx=oy;vc.jsxs=oy;ly.exports=vc;var c=ly.exports,cy={exports:{}},we={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uf=Symbol.for("react.transitional.element"),Q_=Symbol.for("react.portal"),P_=Symbol.for("react.fragment"),Z_=Symbol.for("react.strict_mode"),F_=Symbol.for("react.profiler"),W_=Symbol.for("react.consumer"),ew=Symbol.for("react.context"),tw=Symbol.for("react.forward_ref"),nw=Symbol.for("react.suspense"),aw=Symbol.for("react.memo"),uy=Symbol.for("react.lazy"),rw=Symbol.for("react.activity"),Yh=Symbol.iterator;function iw(e){return e===null||typeof e!="object"?null:(e=Yh&&e[Yh]||e["@@iterator"],typeof e=="function"?e:null)}var dy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fy=Object.assign,hy={};function Zi(e,t,n){this.props=e,this.context=t,this.refs=hy,this.updater=n||dy}Zi.prototype.isReactComponent={};Zi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function my(){}my.prototype=Zi.prototype;function df(e,t,n){this.props=e,this.context=t,this.refs=hy,this.updater=n||dy}var ff=df.prototype=new my;ff.constructor=df;fy(ff,Zi.prototype);ff.isPureReactComponent=!0;var Ih=Array.isArray;function Ju(){}var ht={H:null,A:null,T:null,S:null},gy=Object.prototype.hasOwnProperty;function hf(e,t,n){var a=n.ref;return{$$typeof:uf,type:e,key:t,ref:a!==void 0?a:null,props:n}}function sw(e,t){return hf(e.type,t,e.props)}function mf(e){return typeof e=="object"&&e!==null&&e.$$typeof===uf}function lw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Vh=/\/+/g;function Zc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lw(""+e.key):t.toString(36)}function ow(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Ju,Ju):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function ci(e,t,n,a,r){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"bigint":case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case uf:case Q_:s=!0;break;case uy:return s=e._init,ci(s(e._payload),t,n,a,r)}}if(s)return r=r(e),s=a===""?"."+Zc(e,0):a,Ih(r)?(n="",s!=null&&(n=s.replace(Vh,"$&/")+"/"),ci(r,t,n,"",function(u){return u})):r!=null&&(mf(r)&&(r=sw(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(Vh,"$&/")+"/")+s)),t.push(r)),1;s=0;var l=a===""?".":a+":";if(Ih(e))for(var o=0;o<e.length;o++)a=e[o],i=l+Zc(a,o),s+=ci(a,t,n,i,r);else if(o=iw(e),typeof o=="function")for(e=o.call(e),o=0;!(a=e.next()).done;)a=a.value,i=l+Zc(a,o++),s+=ci(a,t,n,i,r);else if(i==="object"){if(typeof e.then=="function")return ci(ow(e),t,n,a,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return s}function $l(e,t,n){if(e==null)return e;var a=[],r=0;return ci(e,a,"","",function(i){return t.call(n,i,r++)}),a}function cw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Gh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},uw={map:$l,forEach:function(e,t,n){$l(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return $l(e,function(){t++}),t},toArray:function(e){return $l(e,function(t){return t})||[]},only:function(e){if(!mf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};we.Activity=rw;we.Children=uw;we.Component=Zi;we.Fragment=P_;we.Profiler=F_;we.PureComponent=df;we.StrictMode=Z_;we.Suspense=nw;we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ht;we.__COMPILER_RUNTIME={__proto__:null,c:function(e){return ht.H.useMemoCache(e)}};we.cache=function(e){return function(){return e.apply(null,arguments)}};we.cacheSignal=function(){return null};we.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var a=fy({},e.props),r=e.key;if(t!=null)for(i in t.key!==void 0&&(r=""+t.key),t)!gy.call(t,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&t.ref===void 0||(a[i]=t[i]);var i=arguments.length-2;if(i===1)a.children=n;else if(1<i){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+2];a.children=s}return hf(e.type,r,a)};we.createContext=function(e){return e={$$typeof:ew,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:W_,_context:e},e};we.createElement=function(e,t,n){var a,r={},i=null;if(t!=null)for(a in t.key!==void 0&&(i=""+t.key),t)gy.call(t,a)&&a!=="key"&&a!=="__self"&&a!=="__source"&&(r[a]=t[a]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var l=Array(s),o=0;o<s;o++)l[o]=arguments[o+2];r.children=l}if(e&&e.defaultProps)for(a in s=e.defaultProps,s)r[a]===void 0&&(r[a]=s[a]);return hf(e,i,r)};we.createRef=function(){return{current:null}};we.forwardRef=function(e){return{$$typeof:tw,render:e}};we.isValidElement=mf;we.lazy=function(e){return{$$typeof:uy,_payload:{_status:-1,_result:e},_init:cw}};we.memo=function(e,t){return{$$typeof:aw,type:e,compare:t===void 0?null:t}};we.startTransition=function(e){var t=ht.T,n={};ht.T=n;try{var a=e(),r=ht.S;r!==null&&r(n,a),typeof a=="object"&&a!==null&&typeof a.then=="function"&&a.then(Ju,Gh)}catch(i){Gh(i)}finally{t!==null&&n.types!==null&&(t.types=n.types),ht.T=t}};we.unstable_useCacheRefresh=function(){return ht.H.useCacheRefresh()};we.use=function(e){return ht.H.use(e)};we.useActionState=function(e,t,n){return ht.H.useActionState(e,t,n)};we.useCallback=function(e,t){return ht.H.useCallback(e,t)};we.useContext=function(e){return ht.H.useContext(e)};we.useDebugValue=function(){};we.useDeferredValue=function(e,t){return ht.H.useDeferredValue(e,t)};we.useEffect=function(e,t){return ht.H.useEffect(e,t)};we.useEffectEvent=function(e){return ht.H.useEffectEvent(e)};we.useId=function(){return ht.H.useId()};we.useImperativeHandle=function(e,t,n){return ht.H.useImperativeHandle(e,t,n)};we.useInsertionEffect=function(e,t){return ht.H.useInsertionEffect(e,t)};we.useLayoutEffect=function(e,t){return ht.H.useLayoutEffect(e,t)};we.useMemo=function(e,t){return ht.H.useMemo(e,t)};we.useOptimistic=function(e,t){return ht.H.useOptimistic(e,t)};we.useReducer=function(e,t,n){return ht.H.useReducer(e,t,n)};we.useRef=function(e){return ht.H.useRef(e)};we.useState=function(e){return ht.H.useState(e)};we.useSyncExternalStore=function(e,t,n){return ht.H.useSyncExternalStore(e,t,n)};we.useTransition=function(){return ht.H.useTransition()};we.version="19.2.0";cy.exports=we;var _=cy.exports;const ot=K_(_);var yy={exports:{}},pc={},vy={exports:{}},py={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,$){var F=C.length;C.push($);e:for(;0<F;){var me=F-1>>>1,Te=C[me];if(0<r(Te,$))C[me]=$,C[F]=Te,F=me;else break e}}function n(C){return C.length===0?null:C[0]}function a(C){if(C.length===0)return null;var $=C[0],F=C.pop();if(F!==$){C[0]=F;e:for(var me=0,Te=C.length,vt=Te>>>1;me<vt;){var pe=2*(me+1)-1,He=C[pe],Oe=pe+1,Ne=C[Oe];if(0>r(He,F))Oe<Te&&0>r(Ne,He)?(C[me]=Ne,C[Oe]=F,me=Oe):(C[me]=He,C[pe]=F,me=pe);else if(Oe<Te&&0>r(Ne,F))C[me]=Ne,C[Oe]=F,me=Oe;else break e}}return $}function r(C,$){var F=C.sortIndex-$.sortIndex;return F!==0?F:C.id-$.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var o=[],u=[],f=1,h=null,m=3,d=!1,p=!1,b=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function w(C){for(var $=n(u);$!==null;){if($.callback===null)a(u);else if($.startTime<=C)a(u),$.sortIndex=$.expirationTime,t(o,$);else break;$=n(u)}}function T(C){if(b=!1,w(C),!p)if(n(o)!==null)p=!0,E||(E=!0,K());else{var $=n(u);$!==null&&oe(T,$.startTime-C)}}var E=!1,S=-1,j=5,D=-1;function O(){return x?!0:!(e.unstable_now()-D<j)}function R(){if(x=!1,E){var C=e.unstable_now();D=C;var $=!0;try{e:{p=!1,b&&(b=!1,g(S),S=-1),d=!0;var F=m;try{t:{for(w(C),h=n(o);h!==null&&!(h.expirationTime>C&&O());){var me=h.callback;if(typeof me=="function"){h.callback=null,m=h.priorityLevel;var Te=me(h.expirationTime<=C);if(C=e.unstable_now(),typeof Te=="function"){h.callback=Te,w(C),$=!0;break t}h===n(o)&&a(o),w(C)}else a(o);h=n(o)}if(h!==null)$=!0;else{var vt=n(u);vt!==null&&oe(T,vt.startTime-C),$=!1}}break e}finally{h=null,m=F,d=!1}$=void 0}}finally{$?K():E=!1}}}var K;if(typeof y=="function")K=function(){y(R)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ae=ee.port2;ee.port1.onmessage=R,K=function(){ae.postMessage(null)}}else K=function(){v(R,0)};function oe(C,$){S=v(function(){C(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(C){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var F=m;m=$;try{return C()}finally{m=F}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(C,$){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var F=m;m=C;try{return $()}finally{m=F}},e.unstable_scheduleCallback=function(C,$,F){var me=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?me+F:me):F=me,C){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=F+Te,C={id:f++,callback:$,priorityLevel:C,startTime:F,expirationTime:Te,sortIndex:-1},F>me?(C.sortIndex=F,t(u,C),n(o)===null&&C===n(u)&&(b?(g(S),S=-1):b=!0,oe(T,F-me))):(C.sortIndex=Te,t(o,C),p||d||(p=!0,E||(E=!0,K()))),C},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(C){var $=m;return function(){var F=m;m=$;try{return C.apply(this,arguments)}finally{m=F}}}})(py);vy.exports=py;var dw=vy.exports,by={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw=_;function _y(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ra(){}var an={d:{f:Ra,r:function(){throw Error(_y(522))},D:Ra,C:Ra,L:Ra,m:Ra,X:Ra,S:Ra,M:Ra},p:0,findDOMNode:null},hw=Symbol.for("react.portal");function mw(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hw,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}var Ns=fw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function bc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=an;rn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(_y(299));return mw(e,t,null,n)};rn.flushSync=function(e){var t=Ns.T,n=an.p;try{if(Ns.T=null,an.p=2,e)return e()}finally{Ns.T=t,an.p=n,an.d.f()}};rn.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,an.d.C(e,t))};rn.prefetchDNS=function(e){typeof e=="string"&&an.d.D(e)};rn.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,a=bc(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,i=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?an.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:a,integrity:r,fetchPriority:i}):n==="script"&&an.d.X(e,{crossOrigin:a,integrity:r,fetchPriority:i,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};rn.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=bc(t.as,t.crossOrigin);an.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&an.d.M(e)};rn.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,a=bc(n,t.crossOrigin);an.d.L(e,n,{crossOrigin:a,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};rn.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=bc(t.as,t.crossOrigin);an.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else an.d.m(e)};rn.requestFormReset=function(e){an.d.r(e)};rn.unstable_batchedUpdates=function(e,t){return e(t)};rn.useFormState=function(e,t,n){return Ns.H.useFormState(e,t,n)};rn.useFormStatus=function(){return Ns.H.useHostTransitionStatus()};rn.version="19.2.0";function wy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wy)}catch(e){console.error(e)}}wy(),by.exports=rn;var mi=by.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $t=dw,Sy=_,gw=mi;function U(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function xy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ml(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ey(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ty(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Kh(e){if(ml(e)!==e)throw Error(U(188))}function yw(e){var t=e.alternate;if(!t){if(t=ml(e),t===null)throw Error(U(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(a=r.return,a!==null){n=a;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Kh(r),e;if(i===a)return Kh(r),t;i=i.sibling}throw Error(U(188))}if(n.return!==a.return)n=r,a=i;else{for(var s=!1,l=r.child;l;){if(l===n){s=!0,n=r,a=i;break}if(l===a){s=!0,a=r,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,a=r;break}if(l===a){s=!0,a=i,n=r;break}l=l.sibling}if(!s)throw Error(U(189))}}if(n.alternate!==a)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?e:t}function jy(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=jy(e),t!==null)return t;e=e.sibling}return null}var mt=Object.assign,vw=Symbol.for("react.element"),Bl=Symbol.for("react.transitional.element"),Ss=Symbol.for("react.portal"),gi=Symbol.for("react.fragment"),Oy=Symbol.for("react.strict_mode"),Qu=Symbol.for("react.profiler"),Dy=Symbol.for("react.consumer"),va=Symbol.for("react.context"),gf=Symbol.for("react.forward_ref"),Pu=Symbol.for("react.suspense"),Zu=Symbol.for("react.suspense_list"),yf=Symbol.for("react.memo"),Ua=Symbol.for("react.lazy"),Fu=Symbol.for("react.activity"),pw=Symbol.for("react.memo_cache_sentinel"),Xh=Symbol.iterator;function ms(e){return e===null||typeof e!="object"?null:(e=Xh&&e[Xh]||e["@@iterator"],typeof e=="function"?e:null)}var bw=Symbol.for("react.client.reference");function Wu(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===bw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gi:return"Fragment";case Qu:return"Profiler";case Oy:return"StrictMode";case Pu:return"Suspense";case Zu:return"SuspenseList";case Fu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Ss:return"Portal";case va:return e.displayName||"Context";case Dy:return(e._context.displayName||"Context")+".Consumer";case gf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case yf:return t=e.displayName||null,t!==null?t:Wu(e.type)||"Memo";case Ua:t=e._payload,e=e._init;try{return Wu(e(t))}catch{}}return null}var xs=Array.isArray,ye=Sy.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ke=gw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Rr={pending:!1,data:null,method:null,action:null},ed=[],yi=-1;function ra(e){return{current:e}}function It(e){0>yi||(e.current=ed[yi],ed[yi]=null,yi--)}function ct(e,t){yi++,ed[yi]=e.current,e.current=t}var aa=ra(null),Qs=ra(null),Pa=ra(null),Do=ra(null);function No(e,t){switch(ct(Pa,t),ct(Qs,e),ct(aa,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Wm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Wm(t),e=Jp(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}It(aa),ct(aa,e)}function zi(){It(aa),It(Qs),It(Pa)}function td(e){e.memoizedState!==null&&ct(Do,e);var t=aa.current,n=Jp(t,e.type);t!==n&&(ct(Qs,e),ct(aa,n))}function Ao(e){Qs.current===e&&(It(aa),It(Qs)),Do.current===e&&(It(Do),sl._currentValue=Rr)}var Fc,Jh;function xr(e){if(Fc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Fc=t&&t[1]||"",Jh=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fc+e+Jh}var Wc=!1;function eu(e,t){if(!e||Wc)return"";Wc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var h=function(){throw Error()};if(Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(d){var m=d}Reflect.construct(e,[],h)}else{try{h.call()}catch(d){m=d}e.call(h.prototype)}}else{try{throw Error()}catch(d){m=d}(h=e())&&typeof h.catch=="function"&&h.catch(function(){})}}catch(d){if(d&&m&&typeof d.stack=="string")return[d.stack,m.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=a.DetermineComponentFrameRoot(),s=i[0],l=i[1];if(s&&l){var o=s.split(`
`),u=l.split(`
`);for(r=a=0;a<o.length&&!o[a].includes("DetermineComponentFrameRoot");)a++;for(;r<u.length&&!u[r].includes("DetermineComponentFrameRoot");)r++;if(a===o.length||r===u.length)for(a=o.length-1,r=u.length-1;1<=a&&0<=r&&o[a]!==u[r];)r--;for(;1<=a&&0<=r;a--,r--)if(o[a]!==u[r]){if(a!==1||r!==1)do if(a--,r--,0>r||o[a]!==u[r]){var f=`
`+o[a].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=a&&0<=r);break}}}finally{Wc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?xr(n):""}function _w(e,t){switch(e.tag){case 26:case 27:case 5:return xr(e.type);case 16:return xr("Lazy");case 13:return e.child!==t&&t!==null?xr("Suspense Fallback"):xr("Suspense");case 19:return xr("SuspenseList");case 0:case 15:return eu(e.type,!1);case 11:return eu(e.type.render,!1);case 1:return eu(e.type,!0);case 31:return xr("Activity");default:return""}}function Qh(e){try{var t="",n=null;do t+=_w(e,n),n=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var nd=Object.prototype.hasOwnProperty,vf=$t.unstable_scheduleCallback,tu=$t.unstable_cancelCallback,ww=$t.unstable_shouldYield,Sw=$t.unstable_requestPaint,xn=$t.unstable_now,xw=$t.unstable_getCurrentPriorityLevel,Ny=$t.unstable_ImmediatePriority,Ay=$t.unstable_UserBlockingPriority,Co=$t.unstable_NormalPriority,Ew=$t.unstable_LowPriority,Cy=$t.unstable_IdlePriority,Tw=$t.log,jw=$t.unstable_setDisableYieldValue,gl=null,En=null;function Ga(e){if(typeof Tw=="function"&&jw(e),En&&typeof En.setStrictMode=="function")try{En.setStrictMode(gl,e)}catch{}}var Tn=Math.clz32?Math.clz32:Nw,Ow=Math.log,Dw=Math.LN2;function Nw(e){return e>>>=0,e===0?32:31-(Ow(e)/Dw|0)|0}var Ll=256,Hl=262144,ql=4194304;function Er(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _c(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var l=a&134217727;return l!==0?(a=l&~i,a!==0?r=Er(a):(s&=l,s!==0?r=Er(s):n||(n=l&~e,n!==0&&(r=Er(n))))):(l=a&~i,l!==0?r=Er(l):s!==0?r=Er(s):n||(n=a&~e,n!==0&&(r=Er(n)))),r===0?0:t!==0&&t!==r&&!(t&i)&&(i=r&-r,n=t&-t,i>=n||i===32&&(n&4194048)!==0)?t:r}function yl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Aw(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ry(){var e=ql;return ql<<=1,!(ql&62914560)&&(ql=4194304),e}function nu(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Cw(e,t,n,a,r,i){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,u=e.hiddenUpdates;for(n=s&~n;0<n;){var f=31-Tn(n),h=1<<f;l[f]=0,o[f]=-1;var m=u[f];if(m!==null)for(u[f]=null,f=0;f<m.length;f++){var d=m[f];d!==null&&(d.lane&=-536870913)}n&=~h}a!==0&&My(e,a,0),i!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=i&~(s&~t))}function My(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Tn(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&261930}function ky(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Tn(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}function Uy(e,t){var n=t&-t;return n=n&42?1:pf(n),n&(e.suspendedLanes|t)?0:n}function pf(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function bf(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function zy(){var e=Ke.p;return e!==0?e:(e=window.event,e===void 0?32:i0(e.type))}function Ph(e,t){var n=Ke.p;try{return Ke.p=e,t()}finally{Ke.p=n}}var ur=Math.random().toString(36).slice(2),Qt="__reactFiber$"+ur,fn="__reactProps$"+ur,Fi="__reactContainer$"+ur,ad="__reactEvents$"+ur,Rw="__reactListeners$"+ur,Mw="__reactHandles$"+ur,Zh="__reactResources$"+ur,pl="__reactMarker$"+ur;function _f(e){delete e[Qt],delete e[fn],delete e[ad],delete e[Rw],delete e[Mw]}function vi(e){var t=e[Qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fi]||n[Qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=rg(e);e!==null;){if(n=e[Qt])return n;e=rg(e)}return t}e=n,n=e.parentNode}return null}function Wi(e){if(e=e[Qt]||e[Fi]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Es(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(U(33))}function Oi(e){var t=e[Zh];return t||(t=e[Zh]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Yt(e){e[pl]=!0}var $y=new Set,By={};function Ir(e,t){$i(e,t),$i(e+"Capture",t)}function $i(e,t){for(By[e]=t,e=0;e<t.length;e++)$y.add(t[e])}var kw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fh={},Wh={};function Uw(e){return nd.call(Wh,e)?!0:nd.call(Fh,e)?!1:kw.test(e)?Wh[e]=!0:(Fh[e]=!0,!1)}function fo(e,t,n){if(Uw(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Yl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function ca(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}function kn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ly(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zw(e,t,n){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var r=a.get,i=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rd(e){if(!e._valueTracker){var t=Ly(e)?"checked":"value";e._valueTracker=zw(e,t,""+e[t])}}function Hy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=Ly(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Ro(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var $w=/[\n"\\]/g;function $n(e){return e.replace($w,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function id(e,t,n,a,r,i,s,l){e.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?e.type=s:e.removeAttribute("type"),t!=null?s==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+kn(t)):e.value!==""+kn(t)&&(e.value=""+kn(t)):s!=="submit"&&s!=="reset"||e.removeAttribute("value"),t!=null?sd(e,s,kn(t)):n!=null?sd(e,s,kn(n)):a!=null&&e.removeAttribute("value"),r==null&&i!=null&&(e.defaultChecked=!!i),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+kn(l):e.removeAttribute("name")}function qy(e,t,n,a,r,i,s,l){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||t!=null)){rd(e);return}n=n!=null?""+kn(n):"",t=t!=null?""+kn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}a=a??r,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=l?e.checked:!!a,e.defaultChecked=!!a,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.name=s),rd(e)}function sd(e,t,n){t==="number"&&Ro(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Di(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+kn(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,a&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Yy(e,t,n){if(t!=null&&(t=""+kn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+kn(n):""}function Iy(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(U(92));if(xs(a)){if(1<a.length)throw Error(U(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=kn(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a),rd(e)}function Bi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Bw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function em(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Bw.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Vy(e,t,n){if(t!=null&&typeof t!="object")throw Error(U(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var r in t)a=t[r],t.hasOwnProperty(r)&&n[r]!==a&&em(e,r,a)}else for(var i in t)t.hasOwnProperty(i)&&em(e,i,t[i])}function wf(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ho(e){return Hw.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function pa(){}var ld=null;function Sf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pi=null,Ni=null;function tm(e){var t=Wi(e);if(t&&(e=t.stateNode)){var n=e[fn]||null;e:switch(e=t.stateNode,t.type){case"input":if(id(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+$n(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=a[fn]||null;if(!r)throw Error(U(90));id(a,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Hy(a)}break e;case"textarea":Yy(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Di(e,!!n.multiple,t,!1)}}}var au=!1;function Gy(e,t,n){if(au)return e(t,n);au=!0;try{var a=e(t);return a}finally{if(au=!1,(pi!==null||Ni!==null)&&(Rc(),pi&&(t=pi,e=Ni,Ni=pi=null,tm(t),e)))for(t=0;t<e.length;t++)tm(e[t])}}function Ps(e,t){var n=e.stateNode;if(n===null)return null;var a=n[fn]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(U(231,t,typeof n));return n}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),od=!1;if(xa)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){od=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{od=!1}var Ka=null,xf=null,mo=null;function Ky(){if(mo)return mo;var e,t=xf,n=t.length,a,r="value"in Ka?Ka.value:Ka.textContent,i=r.length;for(e=0;e<n&&t[e]===r[e];e++);var s=n-e;for(a=1;a<=s&&t[n-a]===r[i-a];a++);return mo=r.slice(e,1<a?1-a:void 0)}function go(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Il(){return!0}function nm(){return!1}function hn(e){function t(n,a,r,i,s){this._reactName=n,this._targetInst=r,this.type=a,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Il:nm,this.isPropagationStopped=nm,this}return mt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),t}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wc=hn(Vr),bl=mt({},Vr,{view:0,detail:0}),qw=hn(bl),ru,iu,ys,Sc=mt({},bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ef,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ys&&(ys&&e.type==="mousemove"?(ru=e.screenX-ys.screenX,iu=e.screenY-ys.screenY):iu=ru=0,ys=e),ru)},movementY:function(e){return"movementY"in e?e.movementY:iu}}),am=hn(Sc),Yw=mt({},Sc,{dataTransfer:0}),Iw=hn(Yw),Vw=mt({},bl,{relatedTarget:0}),su=hn(Vw),Gw=mt({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),Kw=hn(Gw),Xw=mt({},Vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jw=hn(Xw),Qw=mt({},Vr,{data:0}),rm=hn(Qw),Pw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ww(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fw[e])?!!t[e]:!1}function Ef(){return Ww}var eS=mt({},bl,{key:function(e){if(e.key){var t=Pw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=go(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ef,charCode:function(e){return e.type==="keypress"?go(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?go(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tS=hn(eS),nS=mt({},Sc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),im=hn(nS),aS=mt({},bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ef}),rS=hn(aS),iS=mt({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),sS=hn(iS),lS=mt({},Sc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oS=hn(lS),cS=mt({},Vr,{newState:0,oldState:0}),uS=hn(cS),dS=[9,13,27,32],Tf=xa&&"CompositionEvent"in window,As=null;xa&&"documentMode"in document&&(As=document.documentMode);var fS=xa&&"TextEvent"in window&&!As,Xy=xa&&(!Tf||As&&8<As&&11>=As),sm=" ",lm=!1;function Jy(e,t){switch(e){case"keyup":return dS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bi=!1;function hS(e,t){switch(e){case"compositionend":return Qy(t);case"keypress":return t.which!==32?null:(lm=!0,sm);case"textInput":return e=t.data,e===sm&&lm?null:e;default:return null}}function mS(e,t){if(bi)return e==="compositionend"||!Tf&&Jy(e,t)?(e=Ky(),mo=xf=Ka=null,bi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xy&&t.locale!=="ko"?null:t.data;default:return null}}var gS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function om(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gS[e.type]:t==="textarea"}function Py(e,t,n,a){pi?Ni?Ni.push(a):Ni=[a]:pi=a,t=Po(t,"onChange"),0<t.length&&(n=new wc("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Cs=null,Zs=null;function yS(e){Gp(e,0)}function xc(e){var t=Es(e);if(Hy(t))return e}function cm(e,t){if(e==="change")return t}var Zy=!1;if(xa){var lu;if(xa){var ou="oninput"in document;if(!ou){var um=document.createElement("div");um.setAttribute("oninput","return;"),ou=typeof um.oninput=="function"}lu=ou}else lu=!1;Zy=lu&&(!document.documentMode||9<document.documentMode)}function dm(){Cs&&(Cs.detachEvent("onpropertychange",Fy),Zs=Cs=null)}function Fy(e){if(e.propertyName==="value"&&xc(Zs)){var t=[];Py(t,Zs,e,Sf(e)),Gy(yS,t)}}function vS(e,t,n){e==="focusin"?(dm(),Cs=t,Zs=n,Cs.attachEvent("onpropertychange",Fy)):e==="focusout"&&dm()}function pS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xc(Zs)}function bS(e,t){if(e==="click")return xc(t)}function _S(e,t){if(e==="input"||e==="change")return xc(t)}function wS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var On=typeof Object.is=="function"?Object.is:wS;function Fs(e,t){if(On(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!nd.call(t,r)||!On(e[r],t[r]))return!1}return!0}function fm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hm(e,t){var n=fm(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fm(n)}}function Wy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ev(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ro(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ro(e.document)}return t}function jf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var SS=xa&&"documentMode"in document&&11>=document.documentMode,_i=null,cd=null,Rs=null,ud=!1;function mm(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ud||_i==null||_i!==Ro(a)||(a=_i,"selectionStart"in a&&jf(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Rs&&Fs(Rs,a)||(Rs=a,a=Po(cd,"onSelect"),0<a.length&&(t=new wc("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=_i)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionrun:_r("Transition","TransitionRun"),transitionstart:_r("Transition","TransitionStart"),transitioncancel:_r("Transition","TransitionCancel"),transitionend:_r("Transition","TransitionEnd")},cu={},tv={};xa&&(tv=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function Gr(e){if(cu[e])return cu[e];if(!wi[e])return e;var t=wi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tv)return cu[e]=t[n];return e}var nv=Gr("animationend"),av=Gr("animationiteration"),rv=Gr("animationstart"),xS=Gr("transitionrun"),ES=Gr("transitionstart"),TS=Gr("transitioncancel"),iv=Gr("transitionend"),sv=new Map,dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dd.push("scrollEnd");function Fn(e,t){sv.set(e,t),Ir(t,[e])}var Mo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Rn=[],Si=0,Of=0;function Ec(){for(var e=Si,t=Of=Si=0;t<e;){var n=Rn[t];Rn[t++]=null;var a=Rn[t];Rn[t++]=null;var r=Rn[t];Rn[t++]=null;var i=Rn[t];if(Rn[t++]=null,a!==null&&r!==null){var s=a.pending;s===null?r.next=r:(r.next=s.next,s.next=r),a.pending=r}i!==0&&lv(n,r,i)}}function Tc(e,t,n,a){Rn[Si++]=e,Rn[Si++]=t,Rn[Si++]=n,Rn[Si++]=a,Of|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Df(e,t,n,a){return Tc(e,t,n,a),ko(e)}function Kr(e,t){return Tc(e,null,null,t),ko(e)}function lv(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var r=!1,i=e.return;i!==null;)i.childLanes|=n,a=i.alternate,a!==null&&(a.childLanes|=n),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(r=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,r&&t!==null&&(r=31-Tn(n),e=i.hiddenUpdates,a=e[r],a===null?e[r]=[t]:a.push(t),t.lane=n|536870912),i):null}function ko(e){if(50<qs)throw qs=0,Rd=null,Error(U(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var xi={};function jS(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,n,a){return new jS(e,t,n,a)}function Nf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _a(e,t){var n=e.alternate;return n===null?(n=bn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function ov(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function yo(e,t,n,a,r,i){var s=0;if(a=e,typeof e=="function")Nf(e)&&(s=1);else if(typeof e=="string")s=Cx(e,n,aa.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Fu:return e=bn(31,n,t,r),e.elementType=Fu,e.lanes=i,e;case gi:return Mr(n.children,r,i,t);case Oy:s=8,r|=24;break;case Qu:return e=bn(12,n,t,r|2),e.elementType=Qu,e.lanes=i,e;case Pu:return e=bn(13,n,t,r),e.elementType=Pu,e.lanes=i,e;case Zu:return e=bn(19,n,t,r),e.elementType=Zu,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case va:s=10;break e;case Dy:s=9;break e;case gf:s=11;break e;case yf:s=14;break e;case Ua:s=16,a=null;break e}s=29,n=Error(U(130,e===null?"null":typeof e,"")),a=null}return t=bn(s,n,t,r),t.elementType=e,t.type=a,t.lanes=i,t}function Mr(e,t,n,a){return e=bn(7,e,a,t),e.lanes=n,e}function uu(e,t,n){return e=bn(6,e,null,t),e.lanes=n,e}function cv(e){var t=bn(18,null,null,0);return t.stateNode=e,t}function du(e,t,n){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var gm=new WeakMap;function Bn(e,t){if(typeof e=="object"&&e!==null){var n=gm.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Qh(t)},gm.set(e,t),t)}return{value:e,source:t,stack:Qh(t)}}var Ei=[],Ti=0,Uo=null,Ws=0,Un=[],zn=0,ir=null,ea=1,ta="";function ga(e,t){Ei[Ti++]=Ws,Ei[Ti++]=Uo,Uo=e,Ws=t}function uv(e,t,n){Un[zn++]=ea,Un[zn++]=ta,Un[zn++]=ir,ir=e;var a=ea;e=ta;var r=32-Tn(a)-1;a&=~(1<<r),n+=1;var i=32-Tn(t)+r;if(30<i){var s=r-r%5;i=(a&(1<<s)-1).toString(32),a>>=s,r-=s,ea=1<<32-Tn(t)+r|n<<r|a,ta=i+e}else ea=1<<i|n<<r|a,ta=e}function Af(e){e.return!==null&&(ga(e,1),uv(e,1,0))}function Cf(e){for(;e===Uo;)Uo=Ei[--Ti],Ei[Ti]=null,Ws=Ei[--Ti],Ei[Ti]=null;for(;e===ir;)ir=Un[--zn],Un[zn]=null,ta=Un[--zn],Un[zn]=null,ea=Un[--zn],Un[zn]=null}function dv(e,t){Un[zn++]=ea,Un[zn++]=ta,Un[zn++]=ir,ea=t.id,ta=t.overflow,ir=e}var Pt=null,ft=null,ze=!1,Za=null,Ln=!1,fd=Error(U(519));function sr(e){var t=Error(U(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw el(Bn(t,e)),fd}function ym(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[Qt]=e,t[fn]=a,n){case"dialog":Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":case"embed":Ce("load",t);break;case"video":case"audio":for(n=0;n<rl.length;n++)Ce(rl[n],t);break;case"source":Ce("error",t);break;case"img":case"image":case"link":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"input":Ce("invalid",t),qy(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Ce("invalid",t);break;case"textarea":Ce("invalid",t),Iy(t,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||Xp(t.textContent,n)?(a.popover!=null&&(Ce("beforetoggle",t),Ce("toggle",t)),a.onScroll!=null&&Ce("scroll",t),a.onScrollEnd!=null&&Ce("scrollend",t),a.onClick!=null&&(t.onclick=pa),t=!0):t=!1,t||sr(e,!0)}function vm(e){for(Pt=e.return;Pt;)switch(Pt.tag){case 5:case 31:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:Pt=Pt.return}}function ni(e){if(e!==Pt)return!1;if(!ze)return vm(e),ze=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||$d(e.type,e.memoizedProps)),n=!n),n&&ft&&sr(e),vm(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));ft=ag(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));ft=ag(e)}else t===27?(t=ft,dr(e.type)?(e=qd,qd=null,ft=e):ft=t):ft=Pt?qn(e.stateNode.nextSibling):null;return!0}function Br(){ft=Pt=null,ze=!1}function fu(){var e=Za;return e!==null&&(un===null?un=e:un.push.apply(un,e),Za=null),e}function el(e){Za===null?Za=[e]:Za.push(e)}var hd=ra(null),Xr=null,ba=null;function La(e,t,n){ct(hd,t._currentValue),t._currentValue=n}function wa(e){e._currentValue=hd.current,It(hd)}function md(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function gd(e,t,n,a){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var i=r.dependencies;if(i!==null){var s=r.child;i=i.firstContext;e:for(;i!==null;){var l=i;i=r;for(var o=0;o<t.length;o++)if(l.context===t[o]){i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),md(i.return,n,e),a||(s=null);break e}i=l.next}}else if(r.tag===18){if(s=r.return,s===null)throw Error(U(341));s.lanes|=n,i=s.alternate,i!==null&&(i.lanes|=n),md(s,n,e),s=null}else s=r.child;if(s!==null)s.return=r;else for(s=r;s!==null;){if(s===e){s=null;break}if(r=s.sibling,r!==null){r.return=s.return,s=r;break}s=s.return}r=s}}function es(e,t,n,a){e=null;for(var r=t,i=!1;r!==null;){if(!i){if(r.flags&524288)i=!0;else if(r.flags&262144)break}if(r.tag===10){var s=r.alternate;if(s===null)throw Error(U(387));if(s=s.memoizedProps,s!==null){var l=r.type;On(r.pendingProps.value,s.value)||(e!==null?e.push(l):e=[l])}}else if(r===Do.current){if(s=r.alternate,s===null)throw Error(U(387));s.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(sl):e=[sl])}r=r.return}e!==null&&gd(t,e,n,a),t.flags|=262144}function zo(e){for(e=e.firstContext;e!==null;){if(!On(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Lr(e){Xr=e,ba=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Zt(e){return fv(Xr,e)}function Vl(e,t){return Xr===null&&Lr(e),fv(e,t)}function fv(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ba===null){if(e===null)throw Error(U(308));ba=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ba=ba.next=t;return n}var OS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},DS=$t.unstable_scheduleCallback,NS=$t.unstable_NormalPriority,Ct={$$typeof:va,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rf(){return{controller:new OS,data:new Map,refCount:0}}function _l(e){e.refCount--,e.refCount===0&&DS(NS,function(){e.controller.abort()})}var Ms=null,yd=0,Li=0,Ai=null;function AS(e,t){if(Ms===null){var n=Ms=[];yd=0,Li=ah(),Ai={status:"pending",value:void 0,then:function(a){n.push(a)}}}return yd++,t.then(pm,pm),t}function pm(){if(--yd===0&&Ms!==null){Ai!==null&&(Ai.status="fulfilled");var e=Ms;Ms=null,Li=0,Ai=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function CS(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(a.status="rejected",a.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),a}var bm=ye.S;ye.S=function(e,t){jp=xn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&AS(e,t),bm!==null&&bm(e,t)};var kr=ra(null);function Mf(){var e=kr.current;return e!==null?e:nt.pooledCache}function vo(e,t){t===null?ct(kr,kr.current):ct(kr,t.pool)}function hv(){var e=Mf();return e===null?null:{parent:Ct._currentValue,pool:e}}var ts=Error(U(460)),kf=Error(U(474)),jc=Error(U(542)),$o={then:function(){}};function _m(e){return e=e.status,e==="fulfilled"||e==="rejected"}function mv(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(pa,pa),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Sm(e),e;default:if(typeof t.status=="string")t.then(pa,pa);else{if(e=nt,e!==null&&100<e.shellSuspendCounter)throw Error(U(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=a}},function(a){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Sm(e),e}throw Ur=t,ts}}function Tr(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ur=n,ts):n}}var Ur=null;function wm(){if(Ur===null)throw Error(U(459));var e=Ur;return Ur=null,e}function Sm(e){if(e===ts||e===jc)throw Error(U(483))}var Ci=null,tl=0;function Gl(e){var t=tl;return tl+=1,Ci===null&&(Ci=[]),mv(Ci,e,t)}function vs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Kl(e,t){throw t.$$typeof===vw?Error(U(525)):(e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function gv(e){function t(v,g){if(e){var y=v.deletions;y===null?(v.deletions=[g],v.flags|=16):y.push(g)}}function n(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function a(v){for(var g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function r(v,g){return v=_a(v,g),v.index=0,v.sibling=null,v}function i(v,g,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<g?(v.flags|=67108866,g):y):(v.flags|=67108866,g)):(v.flags|=1048576,g)}function s(v){return e&&v.alternate===null&&(v.flags|=67108866),v}function l(v,g,y,w){return g===null||g.tag!==6?(g=uu(y,v.mode,w),g.return=v,g):(g=r(g,y),g.return=v,g)}function o(v,g,y,w){var T=y.type;return T===gi?f(v,g,y.props.children,w,y.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ua&&Tr(T)===g.type)?(g=r(g,y.props),vs(g,y),g.return=v,g):(g=yo(y.type,y.key,y.props,null,v.mode,w),vs(g,y),g.return=v,g)}function u(v,g,y,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=du(y,v.mode,w),g.return=v,g):(g=r(g,y.children||[]),g.return=v,g)}function f(v,g,y,w,T){return g===null||g.tag!==7?(g=Mr(y,v.mode,w,T),g.return=v,g):(g=r(g,y),g.return=v,g)}function h(v,g,y){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=uu(""+g,v.mode,y),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Bl:return y=yo(g.type,g.key,g.props,null,v.mode,y),vs(y,g),y.return=v,y;case Ss:return g=du(g,v.mode,y),g.return=v,g;case Ua:return g=Tr(g),h(v,g,y)}if(xs(g)||ms(g))return g=Mr(g,v.mode,y,null),g.return=v,g;if(typeof g.then=="function")return h(v,Gl(g),y);if(g.$$typeof===va)return h(v,Vl(v,g),y);Kl(v,g)}return null}function m(v,g,y,w){var T=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return T!==null?null:l(v,g,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Bl:return y.key===T?o(v,g,y,w):null;case Ss:return y.key===T?u(v,g,y,w):null;case Ua:return y=Tr(y),m(v,g,y,w)}if(xs(y)||ms(y))return T!==null?null:f(v,g,y,w,null);if(typeof y.then=="function")return m(v,g,Gl(y),w);if(y.$$typeof===va)return m(v,g,Vl(v,y),w);Kl(v,y)}return null}function d(v,g,y,w,T){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return v=v.get(y)||null,l(g,v,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bl:return v=v.get(w.key===null?y:w.key)||null,o(g,v,w,T);case Ss:return v=v.get(w.key===null?y:w.key)||null,u(g,v,w,T);case Ua:return w=Tr(w),d(v,g,y,w,T)}if(xs(w)||ms(w))return v=v.get(y)||null,f(g,v,w,T,null);if(typeof w.then=="function")return d(v,g,y,Gl(w),T);if(w.$$typeof===va)return d(v,g,y,Vl(g,w),T);Kl(g,w)}return null}function p(v,g,y,w){for(var T=null,E=null,S=g,j=g=0,D=null;S!==null&&j<y.length;j++){S.index>j?(D=S,S=null):D=S.sibling;var O=m(v,S,y[j],w);if(O===null){S===null&&(S=D);break}e&&S&&O.alternate===null&&t(v,S),g=i(O,g,j),E===null?T=O:E.sibling=O,E=O,S=D}if(j===y.length)return n(v,S),ze&&ga(v,j),T;if(S===null){for(;j<y.length;j++)S=h(v,y[j],w),S!==null&&(g=i(S,g,j),E===null?T=S:E.sibling=S,E=S);return ze&&ga(v,j),T}for(S=a(S);j<y.length;j++)D=d(S,v,j,y[j],w),D!==null&&(e&&D.alternate!==null&&S.delete(D.key===null?j:D.key),g=i(D,g,j),E===null?T=D:E.sibling=D,E=D);return e&&S.forEach(function(R){return t(v,R)}),ze&&ga(v,j),T}function b(v,g,y,w){if(y==null)throw Error(U(151));for(var T=null,E=null,S=g,j=g=0,D=null,O=y.next();S!==null&&!O.done;j++,O=y.next()){S.index>j?(D=S,S=null):D=S.sibling;var R=m(v,S,O.value,w);if(R===null){S===null&&(S=D);break}e&&S&&R.alternate===null&&t(v,S),g=i(R,g,j),E===null?T=R:E.sibling=R,E=R,S=D}if(O.done)return n(v,S),ze&&ga(v,j),T;if(S===null){for(;!O.done;j++,O=y.next())O=h(v,O.value,w),O!==null&&(g=i(O,g,j),E===null?T=O:E.sibling=O,E=O);return ze&&ga(v,j),T}for(S=a(S);!O.done;j++,O=y.next())O=d(S,v,j,O.value,w),O!==null&&(e&&O.alternate!==null&&S.delete(O.key===null?j:O.key),g=i(O,g,j),E===null?T=O:E.sibling=O,E=O);return e&&S.forEach(function(K){return t(v,K)}),ze&&ga(v,j),T}function x(v,g,y,w){if(typeof y=="object"&&y!==null&&y.type===gi&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Bl:e:{for(var T=y.key;g!==null;){if(g.key===T){if(T=y.type,T===gi){if(g.tag===7){n(v,g.sibling),w=r(g,y.props.children),w.return=v,v=w;break e}}else if(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ua&&Tr(T)===g.type){n(v,g.sibling),w=r(g,y.props),vs(w,y),w.return=v,v=w;break e}n(v,g);break}else t(v,g);g=g.sibling}y.type===gi?(w=Mr(y.props.children,v.mode,w,y.key),w.return=v,v=w):(w=yo(y.type,y.key,y.props,null,v.mode,w),vs(w,y),w.return=v,v=w)}return s(v);case Ss:e:{for(T=y.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(v,g.sibling),w=r(g,y.children||[]),w.return=v,v=w;break e}else{n(v,g);break}else t(v,g);g=g.sibling}w=du(y,v.mode,w),w.return=v,v=w}return s(v);case Ua:return y=Tr(y),x(v,g,y,w)}if(xs(y))return p(v,g,y,w);if(ms(y)){if(T=ms(y),typeof T!="function")throw Error(U(150));return y=T.call(y),b(v,g,y,w)}if(typeof y.then=="function")return x(v,g,Gl(y),w);if(y.$$typeof===va)return x(v,g,Vl(v,y),w);Kl(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,g!==null&&g.tag===6?(n(v,g.sibling),w=r(g,y),w.return=v,v=w):(n(v,g),w=uu(y,v.mode,w),w.return=v,v=w),s(v)):n(v,g)}return function(v,g,y,w){try{tl=0;var T=x(v,g,y,w);return Ci=null,T}catch(S){if(S===ts||S===jc)throw S;var E=bn(29,S,null,v.mode);return E.lanes=w,E.return=v,E}finally{}}}var Hr=gv(!0),yv=gv(!1),za=!1;function Uf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Fa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Wa(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Ge&2){var r=a.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),a.pending=t,t=ko(e),lv(e,null,n),t}return Tc(e,a,t,n),ko(e)}function ks(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,ky(e,n)}}function hu(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?r=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?r=i=t:i=i.next=t}else r=i=t;n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var pd=!1;function Us(){if(pd){var e=Ai;if(e!==null)throw e}}function zs(e,t,n,a){pd=!1;var r=e.updateQueue;za=!1;var i=r.firstBaseUpdate,s=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var o=l,u=o.next;o.next=null,s===null?i=u:s.next=u,s=o;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=o))}if(i!==null){var h=r.baseState;s=0,f=u=o=null,l=i;do{var m=l.lane&-536870913,d=m!==l.lane;if(d?(Me&m)===m:(a&m)===m){m!==0&&m===Li&&(pd=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var p=e,b=l;m=t;var x=n;switch(b.tag){case 1:if(p=b.payload,typeof p=="function"){h=p.call(x,h,m);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=b.payload,m=typeof p=="function"?p.call(x,h,m):p,m==null)break e;h=mt({},h,m);break e;case 2:za=!0}}m=l.callback,m!==null&&(e.flags|=64,d&&(e.flags|=8192),d=r.callbacks,d===null?r.callbacks=[m]:d.push(m))}else d={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=d,o=h):f=f.next=d,s|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;d=l,l=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);f===null&&(o=h),r.baseState=o,r.firstBaseUpdate=u,r.lastBaseUpdate=f,i===null&&(r.shared.lanes=0),or|=s,e.lanes=s,e.memoizedState=h}}function vv(e,t){if(typeof e!="function")throw Error(U(191,e));e.call(t)}function pv(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)vv(n[e],t)}var Hi=ra(null),Bo=ra(0);function xm(e,t){e=Oa,ct(Bo,e),ct(Hi,t),Oa=e|t.baseLanes}function bd(){ct(Bo,Oa),ct(Hi,Hi.current)}function zf(){Oa=Bo.current,It(Hi),It(Bo)}var Dn=ra(null),Hn=null;function Ha(e){var t=e.alternate;ct(Et,Et.current&1),ct(Dn,e),Hn===null&&(t===null||Hi.current!==null||t.memoizedState!==null)&&(Hn=e)}function _d(e){ct(Et,Et.current),ct(Dn,e),Hn===null&&(Hn=e)}function bv(e){e.tag===22?(ct(Et,Et.current),ct(Dn,e),Hn===null&&(Hn=e)):qa()}function qa(){ct(Et,Et.current),ct(Dn,Dn.current)}function pn(e){It(Dn),Hn===e&&(Hn=null),It(Et)}var Et=ra(0);function Lo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ld(n)||Hd(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ea=0,xe=null,We=null,Nt=null,Ho=!1,Ri=!1,qr=!1,qo=0,nl=0,Mi=null,RS=0;function pt(){throw Error(U(321))}function $f(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!On(e[n],t[n]))return!1;return!0}function Bf(e,t,n,a,r,i){return Ea=i,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ye.H=e===null||e.memoizedState===null?Pv:Qf,qr=!1,i=n(a,r),qr=!1,Ri&&(i=wv(t,n,a,r)),_v(e),i}function _v(e){ye.H=al;var t=We!==null&&We.next!==null;if(Ea=0,Nt=We=xe=null,Ho=!1,nl=0,Mi=null,t)throw Error(U(300));e===null||Rt||(e=e.dependencies,e!==null&&zo(e)&&(Rt=!0))}function wv(e,t,n,a){xe=e;var r=0;do{if(Ri&&(Mi=null),nl=0,Ri=!1,25<=r)throw Error(U(301));if(r+=1,Nt=We=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}ye.H=Zv,i=t(n,a)}while(Ri);return i}function MS(){var e=ye.H,t=e.useState()[0];return t=typeof t.then=="function"?wl(t):t,e=e.useState()[0],(We!==null?We.memoizedState:null)!==e&&(xe.flags|=1024),t}function Lf(){var e=qo!==0;return qo=0,e}function Hf(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function qf(e){if(Ho){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ho=!1}Ea=0,Nt=We=xe=null,Ri=!1,nl=qo=0,Mi=null}function tn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?xe.memoizedState=Nt=e:Nt=Nt.next=e,Nt}function Tt(){if(We===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var t=Nt===null?xe.memoizedState:Nt.next;if(t!==null)Nt=t,We=e;else{if(e===null)throw xe.alternate===null?Error(U(467)):Error(U(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Nt===null?xe.memoizedState=Nt=e:Nt=Nt.next=e}return Nt}function Oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(e){var t=nl;return nl+=1,Mi===null&&(Mi=[]),e=mv(Mi,e,t),t=xe,(Nt===null?t.memoizedState:Nt.next)===null&&(t=t.alternate,ye.H=t===null||t.memoizedState===null?Pv:Qf),e}function Dc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return wl(e);if(e.$$typeof===va)return Zt(e)}throw Error(U(438,String(e)))}function Yf(e){var t=null,n=xe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=xe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Oc(),xe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=pw;return t.index++,n}function Ta(e,t){return typeof t=="function"?t(e):t}function po(e){var t=Tt();return If(t,We,e)}function If(e,t,n){var a=e.queue;if(a===null)throw Error(U(311));a.lastRenderedReducer=n;var r=e.baseQueue,i=a.pending;if(i!==null){if(r!==null){var s=r.next;r.next=i.next,i.next=s}t.baseQueue=r=i,a.pending=null}if(i=e.baseState,r===null)e.memoizedState=i;else{t=r.next;var l=s=null,o=null,u=t,f=!1;do{var h=u.lane&-536870913;if(h!==u.lane?(Me&h)===h:(Ea&h)===h){var m=u.revertLane;if(m===0)o!==null&&(o=o.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Li&&(f=!0);else if((Ea&m)===m){u=u.next,m===Li&&(f=!0);continue}else h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(l=o=h,s=i):o=o.next=h,xe.lanes|=m,or|=m;h=u.action,qr&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else m={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(l=o=m,s=i):o=o.next=m,xe.lanes|=h,or|=h;u=u.next}while(u!==null&&u!==t);if(o===null?s=i:o.next=l,!On(i,e.memoizedState)&&(Rt=!0,f&&(n=Ai,n!==null)))throw n;e.memoizedState=i,e.baseState=s,e.baseQueue=o,a.lastRenderedState=i}return r===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function mu(e){var t=Tt(),n=t.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,i=t.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do i=e(i,s.action),s=s.next;while(s!==r);On(i,t.memoizedState)||(Rt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function Sv(e,t,n){var a=xe,r=Tt(),i=ze;if(i){if(n===void 0)throw Error(U(407));n=n()}else n=t();var s=!On((We||r).memoizedState,n);if(s&&(r.memoizedState=n,Rt=!0),r=r.queue,Vf(Tv.bind(null,a,r,e),[e]),r.getSnapshot!==t||s||Nt!==null&&Nt.memoizedState.tag&1){if(a.flags|=2048,qi(9,{destroy:void 0},Ev.bind(null,a,r,n,t),null),nt===null)throw Error(U(349));i||Ea&127||xv(a,t,n)}return n}function xv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xe.updateQueue,t===null?(t=Oc(),xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ev(e,t,n,a){t.value=n,t.getSnapshot=a,jv(t)&&Ov(e)}function Tv(e,t,n){return n(function(){jv(t)&&Ov(e)})}function jv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!On(e,n)}catch{return!0}}function Ov(e){var t=Kr(e,2);t!==null&&dn(t,e,2)}function wd(e){var t=tn();if(typeof e=="function"){var n=e;if(e=n(),qr){Ga(!0);try{n()}finally{Ga(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:e},t}function Dv(e,t,n,a){return e.baseState=n,If(e,We,typeof a=="function"?a:Ta)}function kS(e,t,n,a,r){if(Ac(e))throw Error(U(485));if(e=t.action,e!==null){var i={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){i.listeners.push(s)}};ye.T!==null?n(!0):i.isTransition=!1,a(i),n=t.pending,n===null?(i.next=t.pending=i,Nv(t,i)):(i.next=n.next,t.pending=n.next=i)}}function Nv(e,t){var n=t.action,a=t.payload,r=e.state;if(t.isTransition){var i=ye.T,s={};ye.T=s;try{var l=n(r,a),o=ye.S;o!==null&&o(s,l),Em(e,t,l)}catch(u){Sd(e,t,u)}finally{i!==null&&s.types!==null&&(i.types=s.types),ye.T=i}}else try{i=n(r,a),Em(e,t,i)}catch(u){Sd(e,t,u)}}function Em(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){Tm(e,t,a)},function(a){return Sd(e,t,a)}):Tm(e,t,n)}function Tm(e,t,n){t.status="fulfilled",t.value=n,Av(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Nv(e,n)))}function Sd(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,Av(t),t=t.next;while(t!==a)}e.action=null}function Av(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Cv(e,t){return t}function jm(e,t){if(ze){var n=nt.formState;if(n!==null){e:{var a=xe;if(ze){if(ft){t:{for(var r=ft,i=Ln;r.nodeType!==8;){if(!i){r=null;break t}if(r=qn(r.nextSibling),r===null){r=null;break t}}i=r.data,r=i==="F!"||i==="F"?r:null}if(r){ft=qn(r.nextSibling),a=r.data==="F!";break e}}sr(a)}a=!1}a&&(t=n[0])}}return n=tn(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cv,lastRenderedState:t},n.queue=a,n=Xv.bind(null,xe,a),a.dispatch=n,a=wd(!1),i=Jf.bind(null,xe,!1,a.queue),a=tn(),r={state:t,dispatch:null,action:e,pending:null},a.queue=r,n=kS.bind(null,xe,r,i,n),r.dispatch=n,a.memoizedState=e,[t,n,!1]}function Om(e){var t=Tt();return Rv(t,We,e)}function Rv(e,t,n){if(t=If(e,t,Cv)[0],e=po(Ta)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=wl(t)}catch(s){throw s===ts?jc:s}else a=t;t=Tt();var r=t.queue,i=r.dispatch;return n!==t.memoizedState&&(xe.flags|=2048,qi(9,{destroy:void 0},US.bind(null,r,n),null)),[a,i,e]}function US(e,t){e.action=t}function Dm(e){var t=Tt(),n=We;if(n!==null)return Rv(t,n,e);Tt(),t=t.memoizedState,n=Tt();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function qi(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=xe.updateQueue,t===null&&(t=Oc(),xe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Mv(){return Tt().memoizedState}function bo(e,t,n,a){var r=tn();xe.flags|=e,r.memoizedState=qi(1|t,{destroy:void 0},n,a===void 0?null:a)}function Nc(e,t,n,a){var r=Tt();a=a===void 0?null:a;var i=r.memoizedState.inst;We!==null&&a!==null&&$f(a,We.memoizedState.deps)?r.memoizedState=qi(t,i,n,a):(xe.flags|=e,r.memoizedState=qi(1|t,i,n,a))}function Nm(e,t){bo(8390656,8,e,t)}function Vf(e,t){Nc(2048,8,e,t)}function zS(e){xe.flags|=4;var t=xe.updateQueue;if(t===null)t=Oc(),xe.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function kv(e){var t=Tt().memoizedState;return zS({ref:t,nextImpl:e}),function(){if(Ge&2)throw Error(U(440));return t.impl.apply(void 0,arguments)}}function Uv(e,t){return Nc(4,2,e,t)}function zv(e,t){return Nc(4,4,e,t)}function $v(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Bv(e,t,n){n=n!=null?n.concat([e]):null,Nc(4,4,$v.bind(null,t,e),n)}function Gf(){}function Lv(e,t){var n=Tt();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&$f(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Hv(e,t){var n=Tt();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&$f(t,a[1]))return a[0];if(a=e(),qr){Ga(!0);try{e()}finally{Ga(!1)}}return n.memoizedState=[a,t],a}function Kf(e,t,n){return n===void 0||Ea&1073741824&&!(Me&261930)?e.memoizedState=t:(e.memoizedState=n,e=Dp(),xe.lanes|=e,or|=e,n)}function qv(e,t,n,a){return On(n,t)?n:Hi.current!==null?(e=Kf(e,n,a),On(e,t)||(Rt=!0),e):!(Ea&42)||Ea&1073741824&&!(Me&261930)?(Rt=!0,e.memoizedState=n):(e=Dp(),xe.lanes|=e,or|=e,t)}function Yv(e,t,n,a,r){var i=Ke.p;Ke.p=i!==0&&8>i?i:8;var s=ye.T,l={};ye.T=l,Jf(e,!1,t,n);try{var o=r(),u=ye.S;if(u!==null&&u(l,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var f=CS(o,a);$s(e,t,f,jn(e))}else $s(e,t,a,jn(e))}catch(h){$s(e,t,{then:function(){},status:"rejected",reason:h},jn())}finally{Ke.p=i,s!==null&&l.types!==null&&(s.types=l.types),ye.T=s}}function $S(){}function xd(e,t,n,a){if(e.tag!==5)throw Error(U(476));var r=Iv(e).queue;Yv(e,r,t,Rr,n===null?$S:function(){return Vv(e),n(a)})}function Iv(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Rr,baseState:Rr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:Rr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Vv(e){var t=Iv(e);t.next===null&&(t=e.alternate.memoizedState),$s(e,t.next.queue,{},jn())}function Xf(){return Zt(sl)}function Gv(){return Tt().memoizedState}function Kv(){return Tt().memoizedState}function BS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=jn();e=Fa(n);var a=Wa(t,e,n);a!==null&&(dn(a,t,n),ks(a,t,n)),t={cache:Rf()},e.payload=t;return}t=t.return}}function LS(e,t,n){var a=jn();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ac(e)?Jv(t,n):(n=Df(e,t,n,a),n!==null&&(dn(n,e,a),Qv(n,t,a)))}function Xv(e,t,n){var a=jn();$s(e,t,n,a)}function $s(e,t,n,a){var r={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ac(e))Jv(t,r);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,n);if(r.hasEagerState=!0,r.eagerState=l,On(l,s))return Tc(e,t,r,0),nt===null&&Ec(),!1}catch{}finally{}if(n=Df(e,t,r,a),n!==null)return dn(n,e,a),Qv(n,t,a),!0}return!1}function Jf(e,t,n,a){if(a={lane:2,revertLane:ah(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ac(e)){if(t)throw Error(U(479))}else t=Df(e,n,a,2),t!==null&&dn(t,e,2)}function Ac(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function Jv(e,t){Ri=Ho=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qv(e,t,n){if(n&4194048){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,ky(e,n)}}var al={readContext:Zt,use:Dc,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};al.useEffectEvent=pt;var Pv={readContext:Zt,use:Dc,useCallback:function(e,t){return tn().memoizedState=[e,t===void 0?null:t],e},useContext:Zt,useEffect:Nm,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,bo(4194308,4,$v.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bo(4194308,4,e,t)},useInsertionEffect:function(e,t){bo(4,2,e,t)},useMemo:function(e,t){var n=tn();t=t===void 0?null:t;var a=e();if(qr){Ga(!0);try{e()}finally{Ga(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=tn();if(n!==void 0){var r=n(t);if(qr){Ga(!0);try{n(t)}finally{Ga(!1)}}}else r=t;return a.memoizedState=a.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},a.queue=e,e=e.dispatch=LS.bind(null,xe,e),[a.memoizedState,e]},useRef:function(e){var t=tn();return e={current:e},t.memoizedState=e},useState:function(e){e=wd(e);var t=e.queue,n=Xv.bind(null,xe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Gf,useDeferredValue:function(e,t){var n=tn();return Kf(n,e,t)},useTransition:function(){var e=wd(!1);return e=Yv.bind(null,xe,e.queue,!0,!1),tn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=xe,r=tn();if(ze){if(n===void 0)throw Error(U(407));n=n()}else{if(n=t(),nt===null)throw Error(U(349));Me&127||xv(a,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Nm(Tv.bind(null,a,i,e),[e]),a.flags|=2048,qi(9,{destroy:void 0},Ev.bind(null,a,i,n,t),null),n},useId:function(){var e=tn(),t=nt.identifierPrefix;if(ze){var n=ta,a=ea;n=(a&~(1<<32-Tn(a)-1)).toString(32)+n,t="_"+t+"R_"+n,n=qo++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=RS++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Xf,useFormState:jm,useActionState:jm,useOptimistic:function(e){var t=tn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Jf.bind(null,xe,!0,n),n.dispatch=t,[e,t]},useMemoCache:Yf,useCacheRefresh:function(){return tn().memoizedState=BS.bind(null,xe)},useEffectEvent:function(e){var t=tn(),n={impl:e};return t.memoizedState=n,function(){if(Ge&2)throw Error(U(440));return n.impl.apply(void 0,arguments)}}},Qf={readContext:Zt,use:Dc,useCallback:Lv,useContext:Zt,useEffect:Vf,useImperativeHandle:Bv,useInsertionEffect:Uv,useLayoutEffect:zv,useMemo:Hv,useReducer:po,useRef:Mv,useState:function(){return po(Ta)},useDebugValue:Gf,useDeferredValue:function(e,t){var n=Tt();return qv(n,We.memoizedState,e,t)},useTransition:function(){var e=po(Ta)[0],t=Tt().memoizedState;return[typeof e=="boolean"?e:wl(e),t]},useSyncExternalStore:Sv,useId:Gv,useHostTransitionStatus:Xf,useFormState:Om,useActionState:Om,useOptimistic:function(e,t){var n=Tt();return Dv(n,We,e,t)},useMemoCache:Yf,useCacheRefresh:Kv};Qf.useEffectEvent=kv;var Zv={readContext:Zt,use:Dc,useCallback:Lv,useContext:Zt,useEffect:Vf,useImperativeHandle:Bv,useInsertionEffect:Uv,useLayoutEffect:zv,useMemo:Hv,useReducer:mu,useRef:Mv,useState:function(){return mu(Ta)},useDebugValue:Gf,useDeferredValue:function(e,t){var n=Tt();return We===null?Kf(n,e,t):qv(n,We.memoizedState,e,t)},useTransition:function(){var e=mu(Ta)[0],t=Tt().memoizedState;return[typeof e=="boolean"?e:wl(e),t]},useSyncExternalStore:Sv,useId:Gv,useHostTransitionStatus:Xf,useFormState:Dm,useActionState:Dm,useOptimistic:function(e,t){var n=Tt();return We!==null?Dv(n,We,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Yf,useCacheRefresh:Kv};Zv.useEffectEvent=kv;function gu(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:mt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ed={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=jn(),r=Fa(a);r.payload=t,n!=null&&(r.callback=n),t=Wa(e,r,a),t!==null&&(dn(t,e,a),ks(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=jn(),r=Fa(a);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=Wa(e,r,a),t!==null&&(dn(t,e,a),ks(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jn(),a=Fa(n);a.tag=2,t!=null&&(a.callback=t),t=Wa(e,a,n),t!==null&&(dn(t,e,n),ks(t,e,n))}};function Am(e,t,n,a,r,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,s):t.prototype&&t.prototype.isPureReactComponent?!Fs(n,a)||!Fs(r,i):!0}function Cm(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Ed.enqueueReplaceState(t,t.state,null)}function Yr(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=mt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}function Fv(e){Mo(e)}function Wv(e){console.error(e)}function ep(e){Mo(e)}function Yo(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Rm(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Td(e,t,n){return n=Fa(n),n.tag=3,n.payload={element:null},n.callback=function(){Yo(e,t)},n}function tp(e){return e=Fa(e),e.tag=3,e}function np(e,t,n,a){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=a.value;e.payload=function(){return r(i)},e.callback=function(){Rm(t,n,a)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){Rm(t,n,a),typeof r!="function"&&(er===null?er=new Set([this]):er.add(this));var l=a.stack;this.componentDidCatch(a.value,{componentStack:l!==null?l:""})})}function HS(e,t,n,a,r){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&es(t,n,r,!0),n=Dn.current,n!==null){switch(n.tag){case 31:case 13:return Hn===null?Xo():n.alternate===null&&bt===0&&(bt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,a===$o?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),ju(e,a,r)),!1;case 22:return n.flags|=65536,a===$o?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),ju(e,a,r)),!1}throw Error(U(435,n.tag))}return ju(e,a,r),Xo(),!1}if(ze)return t=Dn.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,a!==fd&&(e=Error(U(422),{cause:a}),el(Bn(e,n)))):(a!==fd&&(t=Error(U(423),{cause:a}),el(Bn(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,a=Bn(a,n),r=Td(e.stateNode,a,r),hu(e,r),bt!==4&&(bt=2)),!1;var i=Error(U(520),{cause:a});if(i=Bn(i,n),Hs===null?Hs=[i]:Hs.push(i),bt!==4&&(bt=2),t===null)return!0;a=Bn(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=Td(n.stateNode,a,e),hu(n,e),!1;case 1:if(t=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(er===null||!er.has(i))))return n.flags|=65536,r&=-r,n.lanes|=r,r=tp(r),np(r,e,n,a),hu(n,r),!1}n=n.return}while(n!==null);return!1}var Pf=Error(U(461)),Rt=!1;function Jt(e,t,n,a){t.child=e===null?yv(t,null,n,a):Hr(t,e.child,n,a)}function Mm(e,t,n,a,r){n=n.render;var i=t.ref;if("ref"in a){var s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}else s=a;return Lr(t),a=Bf(e,t,n,s,i,r),l=Lf(),e!==null&&!Rt?(Hf(e,t,r),ja(e,t,r)):(ze&&l&&Af(t),t.flags|=1,Jt(e,t,a,r),t.child)}function km(e,t,n,a,r){if(e===null){var i=n.type;return typeof i=="function"&&!Nf(i)&&i.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=i,ap(e,t,i,a,r)):(e=yo(n.type,null,a,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!Zf(e,r)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Fs,n(s,a)&&e.ref===t.ref)return ja(e,t,r)}return t.flags|=1,e=_a(i,a),e.ref=t.ref,e.return=t,t.child=e}function ap(e,t,n,a,r){if(e!==null){var i=e.memoizedProps;if(Fs(i,a)&&e.ref===t.ref)if(Rt=!1,t.pendingProps=a=i,Zf(e,r))e.flags&131072&&(Rt=!0);else return t.lanes=e.lanes,ja(e,t,r)}return jd(e,t,n,a,r)}function rp(e,t,n,a){var r=a.children,i=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if(t.flags&128){if(i=i!==null?i.baseLanes|n:n,e!==null){for(a=t.child=e.child,r=0;a!==null;)r=r|a.lanes|a.childLanes,a=a.sibling;a=r&~i}else a=0,t.child=null;return Um(e,t,i,n,a)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&vo(t,i!==null?i.cachePool:null),i!==null?xm(t,i):bd(),bv(t);else return a=t.lanes=536870912,Um(e,t,i!==null?i.baseLanes|n:n,n,a)}else i!==null?(vo(t,i.cachePool),xm(t,i),qa(),t.memoizedState=null):(e!==null&&vo(t,null),bd(),qa());return Jt(e,t,r,n),t.child}function Ts(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Um(e,t,n,a,r){var i=Mf();return i=i===null?null:{parent:Ct._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},e!==null&&vo(t,null),bd(),bv(t),e!==null&&es(e,t,a,!0),t.childLanes=r,null}function _o(e,t){return t=Io({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function zm(e,t,n){return Hr(t,e.child,null,n),e=_o(t,t.pendingProps),e.flags|=2,pn(t),t.memoizedState=null,e}function qS(e,t,n){var a=t.pendingProps,r=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ze){if(a.mode==="hidden")return e=_o(t,a),t.lanes=536870912,Ts(null,e);if(_d(t),(e=ft)?(e=Pp(e,Ln),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ir!==null?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},n=cv(e),n.return=t,t.child=n,Pt=t,ft=null)):e=null,e===null)throw sr(t);return t.lanes=536870912,null}return _o(t,a)}var i=e.memoizedState;if(i!==null){var s=i.dehydrated;if(_d(t),r)if(t.flags&256)t.flags&=-257,t=zm(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(U(558));else if(Rt||es(e,t,n,!1),r=(n&e.childLanes)!==0,Rt||r){if(a=nt,a!==null&&(s=Uy(a,n),s!==0&&s!==i.retryLane))throw i.retryLane=s,Kr(e,s),dn(a,e,s),Pf;Xo(),t=zm(e,t,n)}else e=i.treeContext,ft=qn(s.nextSibling),Pt=t,ze=!0,Za=null,Ln=!1,e!==null&&dv(t,e),t=_o(t,a),t.flags|=4096;return t}return e=_a(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function wo(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function jd(e,t,n,a,r){return Lr(t),n=Bf(e,t,n,a,void 0,r),a=Lf(),e!==null&&!Rt?(Hf(e,t,r),ja(e,t,r)):(ze&&a&&Af(t),t.flags|=1,Jt(e,t,n,r),t.child)}function $m(e,t,n,a,r,i){return Lr(t),t.updateQueue=null,n=wv(t,a,n,r),_v(e),a=Lf(),e!==null&&!Rt?(Hf(e,t,i),ja(e,t,i)):(ze&&a&&Af(t),t.flags|=1,Jt(e,t,n,i),t.child)}function Bm(e,t,n,a,r){if(Lr(t),t.stateNode===null){var i=xi,s=n.contextType;typeof s=="object"&&s!==null&&(i=Zt(s)),i=new n(a,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ed,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=a,i.state=t.memoizedState,i.refs={},Uf(t),s=n.contextType,i.context=typeof s=="object"&&s!==null?Zt(s):xi,i.state=t.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(gu(t,n,s,a),i.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(s=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),s!==i.state&&Ed.enqueueReplaceState(i,i.state,null),zs(t,a,i,r),Us(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){i=t.stateNode;var l=t.memoizedProps,o=Yr(n,l);i.props=o;var u=i.context,f=n.contextType;s=xi,typeof f=="object"&&f!==null&&(s=Zt(f));var h=n.getDerivedStateFromProps;f=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l||u!==s)&&Cm(t,i,a,s),za=!1;var m=t.memoizedState;i.state=m,zs(t,a,i,r),Us(),u=t.memoizedState,l||m!==u||za?(typeof h=="function"&&(gu(t,n,h,a),u=t.memoizedState),(o=za||Am(t,n,o,a,m,u,s))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=u),i.props=a,i.state=u,i.context=s,a=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,vd(e,t),s=t.memoizedProps,f=Yr(n,s),i.props=f,h=t.pendingProps,m=i.context,u=n.contextType,o=xi,typeof u=="object"&&u!==null&&(o=Zt(u)),l=n.getDerivedStateFromProps,(u=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==h||m!==o)&&Cm(t,i,a,o),za=!1,m=t.memoizedState,i.state=m,zs(t,a,i,r),Us();var d=t.memoizedState;s!==h||m!==d||za||e!==null&&e.dependencies!==null&&zo(e.dependencies)?(typeof l=="function"&&(gu(t,n,l,a),d=t.memoizedState),(f=za||Am(t,n,f,a,m,d,o)||e!==null&&e.dependencies!==null&&zo(e.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,d,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,d,o)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=d),i.props=a,i.state=d,i.context=o,a=f):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return i=a,wo(e,t),a=(t.flags&128)!==0,i||a?(i=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&a?(t.child=Hr(t,e.child,null,r),t.child=Hr(t,null,n,r)):Jt(e,t,n,r),t.memoizedState=i.state,e=t.child):e=ja(e,t,r),e}function Lm(e,t,n,a){return Br(),t.flags|=256,Jt(e,t,n,a),t.child}var yu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vu(e){return{baseLanes:e,cachePool:hv()}}function pu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Sn),e}function ip(e,t,n){var a=t.pendingProps,r=!1,i=(t.flags&128)!==0,s;if((s=i)||(s=e!==null&&e.memoizedState===null?!1:(Et.current&2)!==0),s&&(r=!0,t.flags&=-129),s=(t.flags&32)!==0,t.flags&=-33,e===null){if(ze){if(r?Ha(t):qa(),(e=ft)?(e=Pp(e,Ln),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ir!==null?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},n=cv(e),n.return=t,t.child=n,Pt=t,ft=null)):e=null,e===null)throw sr(t);return Hd(e)?t.lanes=32:t.lanes=536870912,null}var l=a.children;return a=a.fallback,r?(qa(),r=t.mode,l=Io({mode:"hidden",children:l},r),a=Mr(a,r,n,null),l.return=t,a.return=t,l.sibling=a,t.child=l,a=t.child,a.memoizedState=vu(n),a.childLanes=pu(e,s,n),t.memoizedState=yu,Ts(null,a)):(Ha(t),Od(t,l))}var o=e.memoizedState;if(o!==null&&(l=o.dehydrated,l!==null)){if(i)t.flags&256?(Ha(t),t.flags&=-257,t=bu(e,t,n)):t.memoizedState!==null?(qa(),t.child=e.child,t.flags|=128,t=null):(qa(),l=a.fallback,r=t.mode,a=Io({mode:"visible",children:a.children},r),l=Mr(l,r,n,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,Hr(t,e.child,null,n),a=t.child,a.memoizedState=vu(n),a.childLanes=pu(e,s,n),t.memoizedState=yu,t=Ts(null,a));else if(Ha(t),Hd(l)){if(s=l.nextSibling&&l.nextSibling.dataset,s)var u=s.dgst;s=u,a=Error(U(419)),a.stack="",a.digest=s,el({value:a,source:null,stack:null}),t=bu(e,t,n)}else if(Rt||es(e,t,n,!1),s=(n&e.childLanes)!==0,Rt||s){if(s=nt,s!==null&&(a=Uy(s,n),a!==0&&a!==o.retryLane))throw o.retryLane=a,Kr(e,a),dn(s,e,a),Pf;Ld(l)||Xo(),t=bu(e,t,n)}else Ld(l)?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,ft=qn(l.nextSibling),Pt=t,ze=!0,Za=null,Ln=!1,e!==null&&dv(t,e),t=Od(t,a.children),t.flags|=4096);return t}return r?(qa(),l=a.fallback,r=t.mode,o=e.child,u=o.sibling,a=_a(o,{mode:"hidden",children:a.children}),a.subtreeFlags=o.subtreeFlags&65011712,u!==null?l=_a(u,l):(l=Mr(l,r,n,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,Ts(null,a),a=t.child,l=e.child.memoizedState,l===null?l=vu(n):(r=l.cachePool,r!==null?(o=Ct._currentValue,r=r.parent!==o?{parent:o,pool:o}:r):r=hv(),l={baseLanes:l.baseLanes|n,cachePool:r}),a.memoizedState=l,a.childLanes=pu(e,s,n),t.memoizedState=yu,Ts(e.child,a)):(Ha(t),n=e.child,e=n.sibling,n=_a(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Od(e,t){return t=Io({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Io(e,t){return e=bn(22,e,null,t),e.lanes=0,e}function bu(e,t,n){return Hr(t,e.child,null,n),e=Od(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Hm(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),md(e.return,t,n)}function _u(e,t,n,a,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r,treeForkCount:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=a,s.tail=n,s.tailMode=r,s.treeForkCount=i)}function sp(e,t,n){var a=t.pendingProps,r=a.revealOrder,i=a.tail;a=a.children;var s=Et.current,l=(s&2)!==0;if(l?(s=s&1|2,t.flags|=128):s&=1,ct(Et,s),Jt(e,t,a,n),a=ze?Ws:0,!l&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hm(e,n,t);else if(e.tag===19)Hm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Lo(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),_u(t,!1,r,n,i,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Lo(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}_u(t,!0,n,null,i,a);break;case"together":_u(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function ja(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),or|=t.lanes,!(n&t.childLanes))if(e!==null){if(es(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,n=_a(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=_a(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Zf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&zo(e)))}function YS(e,t,n){switch(t.tag){case 3:No(t,t.stateNode.containerInfo),La(t,Ct,e.memoizedState.cache),Br();break;case 27:case 5:td(t);break;case 4:No(t,t.stateNode.containerInfo);break;case 10:La(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,_d(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Ha(t),t.flags|=128,null):n&t.child.childLanes?ip(e,t,n):(Ha(t),e=ja(e,t,n),e!==null?e.sibling:null);Ha(t);break;case 19:var r=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(es(e,t,n,!1),a=(n&t.childLanes)!==0),r){if(a)return sp(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ct(Et,Et.current),a)break;return null;case 22:return t.lanes=0,rp(e,t,n,t.pendingProps);case 24:La(t,Ct,e.memoizedState.cache)}return ja(e,t,n)}function lp(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Rt=!0;else{if(!Zf(e,n)&&!(t.flags&128))return Rt=!1,YS(e,t,n);Rt=!!(e.flags&131072)}else Rt=!1,ze&&t.flags&1048576&&uv(t,Ws,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=Tr(t.elementType),t.type=e,typeof e=="function")Nf(e)?(a=Yr(e,a),t.tag=1,t=Bm(null,t,e,a,n)):(t.tag=0,t=jd(null,t,e,a,n));else{if(e!=null){var r=e.$$typeof;if(r===gf){t.tag=11,t=Mm(null,t,e,a,n);break e}else if(r===yf){t.tag=14,t=km(null,t,e,a,n);break e}}throw t=Wu(e)||e,Error(U(306,t,""))}}return t;case 0:return jd(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,r=Yr(a,t.pendingProps),Bm(e,t,a,r,n);case 3:e:{if(No(t,t.stateNode.containerInfo),e===null)throw Error(U(387));a=t.pendingProps;var i=t.memoizedState;r=i.element,vd(e,t),zs(t,a,null,n);var s=t.memoizedState;if(a=s.cache,La(t,Ct,a),a!==i.cache&&gd(t,[Ct],n,!0),Us(),a=s.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=Lm(e,t,a,n);break e}else if(a!==r){r=Bn(Error(U(424)),t),el(r),t=Lm(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ft=qn(e.firstChild),Pt=t,ze=!0,Za=null,Ln=!0,n=yv(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Br(),a===r){t=ja(e,t,n);break e}Jt(e,t,a,n)}t=t.child}return t;case 26:return wo(e,t),e===null?(n=sg(t.type,null,t.pendingProps,null))?t.memoizedState=n:ze||(n=t.type,e=t.pendingProps,a=Zo(Pa.current).createElement(n),a[Qt]=t,a[fn]=e,Ft(a,n,e),Yt(a),t.stateNode=a):t.memoizedState=sg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return td(t),e===null&&ze&&(a=t.stateNode=Zp(t.type,t.pendingProps,Pa.current),Pt=t,Ln=!0,r=ft,dr(t.type)?(qd=r,ft=qn(a.firstChild)):ft=r),Jt(e,t,t.pendingProps.children,n),wo(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ze&&((r=a=ft)&&(a=px(a,t.type,t.pendingProps,Ln),a!==null?(t.stateNode=a,Pt=t,ft=qn(a.firstChild),Ln=!1,r=!0):r=!1),r||sr(t)),td(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,$d(r,i)?a=null:s!==null&&$d(r,s)&&(t.flags|=32),t.memoizedState!==null&&(r=Bf(e,t,MS,null,null,n),sl._currentValue=r),wo(e,t),Jt(e,t,a,n),t.child;case 6:return e===null&&ze&&((e=n=ft)&&(n=bx(n,t.pendingProps,Ln),n!==null?(t.stateNode=n,Pt=t,ft=null,e=!0):e=!1),e||sr(t)),null;case 13:return ip(e,t,n);case 4:return No(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Hr(t,null,a,n):Jt(e,t,a,n),t.child;case 11:return Mm(e,t,t.type,t.pendingProps,n);case 7:return Jt(e,t,t.pendingProps,n),t.child;case 8:return Jt(e,t,t.pendingProps.children,n),t.child;case 12:return Jt(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,La(t,t.type,a.value),Jt(e,t,a.children,n),t.child;case 9:return r=t.type._context,a=t.pendingProps.children,Lr(t),r=Zt(r),a=a(r),t.flags|=1,Jt(e,t,a,n),t.child;case 14:return km(e,t,t.type,t.pendingProps,n);case 15:return ap(e,t,t.type,t.pendingProps,n);case 19:return sp(e,t,n);case 31:return qS(e,t,n);case 22:return rp(e,t,n,t.pendingProps);case 24:return Lr(t),a=Zt(Ct),e===null?(r=Mf(),r===null&&(r=nt,i=Rf(),r.pooledCache=i,i.refCount++,i!==null&&(r.pooledCacheLanes|=n),r=i),t.memoizedState={parent:a,cache:r},Uf(t),La(t,Ct,r)):(e.lanes&n&&(vd(e,t),zs(t,null,null,n),Us()),r=e.memoizedState,i=t.memoizedState,r.parent!==a?(r={parent:a,cache:a},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),La(t,Ct,a)):(a=i.cache,La(t,Ct,a),a!==r.cache&&gd(t,[Ct],n,!0))),Jt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(U(156,t.tag))}function ua(e){e.flags|=4}function wu(e,t,n,a,r){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(r&335544128)===r)if(e.stateNode.complete)e.flags|=8192;else if(Cp())e.flags|=8192;else throw Ur=$o,kf}else e.flags&=-16777217}function qm(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!e0(t))if(Cp())e.flags|=8192;else throw Ur=$o,kf}function Xl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ry():536870912,e.lanes|=t,Yi|=t)}function ps(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags&65011712,a|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function IS(e,t,n){var a=t.pendingProps;switch(Cf(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return dt(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),wa(Ct),zi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ni(t)?ua(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,fu())),dt(t),null;case 26:var r=t.type,i=t.memoizedState;return e===null?(ua(t),i!==null?(dt(t),qm(t,i)):(dt(t),wu(t,r,null,a,n))):i?i!==e.memoizedState?(ua(t),dt(t),qm(t,i)):(dt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&ua(t),dt(t),wu(t,r,e,a,n)),null;case 27:if(Ao(t),n=Pa.current,r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&ua(t);else{if(!a){if(t.stateNode===null)throw Error(U(166));return dt(t),null}e=aa.current,ni(t)?ym(t):(e=Zp(r,a,n),t.stateNode=e,ua(t))}return dt(t),null;case 5:if(Ao(t),r=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&ua(t);else{if(!a){if(t.stateNode===null)throw Error(U(166));return dt(t),null}if(i=aa.current,ni(t))ym(t);else{var s=Zo(Pa.current);switch(i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":i=s.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof a.is=="string"?s.createElement("select",{is:a.is}):s.createElement("select"),a.multiple?i.multiple=!0:a.size&&(i.size=a.size);break;default:i=typeof a.is=="string"?s.createElement(r,{is:a.is}):s.createElement(r)}}i[Qt]=t,i[fn]=a;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=i;e:switch(Ft(i,r,a),r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ua(t)}}return dt(t),wu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&ua(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(U(166));if(e=Pa.current,ni(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,r=Pt,r!==null)switch(r.tag){case 27:case 5:a=r.memoizedProps}e[Qt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Xp(e.nodeValue,n)),e||sr(t,!0)}else e=Zo(e).createTextNode(a),e[Qt]=t,t.stateNode=e}return dt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(a=ni(t),n!==null){if(e===null){if(!a)throw Error(U(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(557));e[Qt]=t}else Br(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),e=!1}else n=fu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(pn(t),t):(pn(t),null);if(t.flags&128)throw Error(U(558))}return dt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=ni(t),a!==null&&a.dehydrated!==null){if(e===null){if(!r)throw Error(U(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(U(317));r[Qt]=t}else Br(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),r=!1}else r=fu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(pn(t),t):(pn(t),null)}return pn(t),t.flags&128?(t.lanes=n,t):(n=a!==null,e=e!==null&&e.memoizedState!==null,n&&(a=t.child,r=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(r=a.alternate.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==r&&(a.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Xl(t,t.updateQueue),dt(t),null);case 4:return zi(),e===null&&rh(t.stateNode.containerInfo),dt(t),null;case 10:return wa(t.type),dt(t),null;case 19:if(It(Et),a=t.memoizedState,a===null)return dt(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)ps(a,!1);else{if(bt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Lo(e),i!==null){for(t.flags|=128,ps(a,!1),e=i.updateQueue,t.updateQueue=e,Xl(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)ov(n,e),n=n.sibling;return ct(Et,Et.current&1|2),ze&&ga(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&xn()>Go&&(t.flags|=128,r=!0,ps(a,!1),t.lanes=4194304)}else{if(!r)if(e=Lo(i),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Xl(t,e),ps(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!ze)return dt(t),null}else 2*xn()-a.renderingStartTime>Go&&n!==536870912&&(t.flags|=128,r=!0,ps(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(e=a.last,e!==null?e.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=xn(),e.sibling=null,n=Et.current,ct(Et,r?n&1|2:n&1),ze&&ga(t,a.treeForkCount),e):(dt(t),null);case 22:case 23:return pn(t),zf(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?n&536870912&&!(t.flags&128)&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),n=t.updateQueue,n!==null&&Xl(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&It(kr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wa(Ct),dt(t),null;case 25:return null;case 30:return null}throw Error(U(156,t.tag))}function VS(e,t){switch(Cf(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wa(Ct),zi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ao(t),null;case 31:if(t.memoizedState!==null){if(pn(t),t.alternate===null)throw Error(U(340));Br()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(pn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Br()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return It(Et),null;case 4:return zi(),null;case 10:return wa(t.type),null;case 22:case 23:return pn(t),zf(),e!==null&&It(kr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return wa(Ct),null;case 25:return null;default:return null}}function op(e,t){switch(Cf(t),t.tag){case 3:wa(Ct),zi();break;case 26:case 27:case 5:Ao(t);break;case 4:zi();break;case 31:t.memoizedState!==null&&pn(t);break;case 13:pn(t);break;case 19:It(Et);break;case 10:wa(t.type);break;case 22:case 23:pn(t),zf(),e!==null&&It(kr);break;case 24:wa(Ct)}}function Sl(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var r=a.next;n=r;do{if((n.tag&e)===e){a=void 0;var i=n.create,s=n.inst;a=i(),s.destroy=a}n=n.next}while(n!==r)}}catch(l){Pe(t,t.return,l)}}function lr(e,t,n){try{var a=t.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var i=r.next;a=i;do{if((a.tag&e)===e){var s=a.inst,l=s.destroy;if(l!==void 0){s.destroy=void 0,r=t;var o=n,u=l;try{u()}catch(f){Pe(r,o,f)}}}a=a.next}while(a!==i)}}catch(f){Pe(t,t.return,f)}}function cp(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{pv(t,n)}catch(a){Pe(e,e.return,a)}}}function up(e,t,n){n.props=Yr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Pe(e,t,a)}}function Bs(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(r){Pe(e,t,r)}}function na(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(r){Pe(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Pe(e,t,r)}else n.current=null}function dp(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(r){Pe(e,e.return,r)}}function Su(e,t,n){try{var a=e.stateNode;fx(a,e.type,n,t),a[fn]=t}catch(r){Pe(e,e.return,r)}}function fp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&dr(e.type)||e.tag===4}function xu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&dr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dd(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=pa));else if(a!==4&&(a===27&&dr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Dd(e,t,n),e=e.sibling;e!==null;)Dd(e,t,n),e=e.sibling}function Vo(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&dr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Vo(e,t,n),e=e.sibling;e!==null;)Vo(e,t,n),e=e.sibling}function hp(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ft(t,a,n),t[Qt]=e,t[fn]=n}catch(i){Pe(e,e.return,i)}}var ya=!1,At=!1,Eu=!1,Ym=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function GS(e,t){if(e=e.containerInfo,Ud=tc,e=ev(e),jf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var r=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,l=-1,o=-1,u=0,f=0,h=e,m=null;t:for(;;){for(var d;h!==n||r!==0&&h.nodeType!==3||(l=s+r),h!==i||a!==0&&h.nodeType!==3||(o=s+a),h.nodeType===3&&(s+=h.nodeValue.length),(d=h.firstChild)!==null;)m=h,h=d;for(;;){if(h===e)break t;if(m===n&&++u===r&&(l=s),m===i&&++f===a&&(o=s),(d=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=d}n=l===-1||o===-1?null:{start:l,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(zd={focusedElem:e,selectionRange:n},tc=!1,Ht=t;Ht!==null;)if(t=Ht,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ht=e;else for(;Ht!==null;){switch(t=Ht,i=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)r=e[n],r.ref.impl=r.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&i!==null){e=void 0,n=t,r=i.memoizedProps,i=i.memoizedState,a=n.stateNode;try{var p=Yr(n.type,r);e=a.getSnapshotBeforeUpdate(p,i),a.__reactInternalSnapshotBeforeUpdate=e}catch(b){Pe(n,n.return,b)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Bd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Bd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(U(163))}if(e=t.sibling,e!==null){e.return=t.return,Ht=e;break}Ht=t.return}}function mp(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:fa(e,n),a&4&&Sl(5,n);break;case 1:if(fa(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(s){Pe(n,n.return,s)}else{var r=Yr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){Pe(n,n.return,s)}}a&64&&cp(n),a&512&&Bs(n,n.return);break;case 3:if(fa(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{pv(e,t)}catch(s){Pe(n,n.return,s)}}break;case 27:t===null&&a&4&&hp(n);case 26:case 5:fa(e,n),t===null&&a&4&&dp(n),a&512&&Bs(n,n.return);break;case 12:fa(e,n);break;case 31:fa(e,n),a&4&&vp(e,n);break;case 13:fa(e,n),a&4&&pp(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=ex.bind(null,n),_x(e,n))));break;case 22:if(a=n.memoizedState!==null||ya,!a){t=t!==null&&t.memoizedState!==null||At,r=ya;var i=At;ya=a,(At=t)&&!i?ha(e,n,(n.subtreeFlags&8772)!==0):fa(e,n),ya=r,At=i}break;case 30:break;default:fa(e,n)}}function gp(e){var t=e.alternate;t!==null&&(e.alternate=null,gp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&_f(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var gt=null,cn=!1;function da(e,t,n){for(n=n.child;n!==null;)yp(e,t,n),n=n.sibling}function yp(e,t,n){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(gl,n)}catch{}switch(n.tag){case 26:At||na(n,t),da(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:At||na(n,t);var a=gt,r=cn;dr(n.type)&&(gt=n.stateNode,cn=!1),da(e,t,n),Ys(n.stateNode),gt=a,cn=r;break;case 5:At||na(n,t);case 6:if(a=gt,r=cn,gt=null,da(e,t,n),gt=a,cn=r,gt!==null)if(cn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(n.stateNode)}catch(i){Pe(n,t,i)}else try{gt.removeChild(n.stateNode)}catch(i){Pe(n,t,i)}break;case 18:gt!==null&&(cn?(e=gt,tg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Ki(e)):tg(gt,n.stateNode));break;case 4:a=gt,r=cn,gt=n.stateNode.containerInfo,cn=!0,da(e,t,n),gt=a,cn=r;break;case 0:case 11:case 14:case 15:lr(2,n,t),At||lr(4,n,t),da(e,t,n);break;case 1:At||(na(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&up(n,t,a)),da(e,t,n);break;case 21:da(e,t,n);break;case 22:At=(a=At)||n.memoizedState!==null,da(e,t,n),At=a;break;default:da(e,t,n)}}function vp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ki(e)}catch(n){Pe(t,t.return,n)}}}function pp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ki(e)}catch(n){Pe(t,t.return,n)}}function KS(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ym),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ym),t;default:throw Error(U(435,e.tag))}}function Jl(e,t){var n=KS(e);t.forEach(function(a){if(!n.has(a)){n.add(a);var r=tx.bind(null,e,a);a.then(r,r)}})}function ln(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var r=n[a],i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 27:if(dr(l.type)){gt=l.stateNode,cn=!1;break e}break;case 5:gt=l.stateNode,cn=!1;break e;case 3:case 4:gt=l.stateNode.containerInfo,cn=!0;break e}l=l.return}if(gt===null)throw Error(U(160));yp(i,s,r),gt=null,cn=!1,i=r.alternate,i!==null&&(i.return=null),r.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)bp(t,e),t=t.sibling}var Jn=null;function bp(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ln(t,e),on(e),a&4&&(lr(3,e,e.return),Sl(3,e),lr(5,e,e.return));break;case 1:ln(t,e),on(e),a&512&&(At||n===null||na(n,n.return)),a&64&&ya&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var r=Jn;if(ln(t,e),on(e),a&512&&(At||n===null||na(n,n.return)),a&4){var i=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(a){case"title":i=r.getElementsByTagName("title")[0],(!i||i[pl]||i[Qt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=r.createElement(a),r.head.insertBefore(i,r.querySelector("head > title"))),Ft(i,a,n),i[Qt]=e,Yt(i),a=i;break e;case"link":var s=og("link","href",r).get(a+(n.href||""));if(s){for(var l=0;l<s.length;l++)if(i=s[l],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(l,1);break t}}i=r.createElement(a),Ft(i,a,n),r.head.appendChild(i);break;case"meta":if(s=og("meta","content",r).get(a+(n.content||""))){for(l=0;l<s.length;l++)if(i=s[l],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(l,1);break t}}i=r.createElement(a),Ft(i,a,n),r.head.appendChild(i);break;default:throw Error(U(468,a))}i[Qt]=e,Yt(i),a=i}e.stateNode=a}else cg(r,e.type,e.stateNode);else e.stateNode=lg(r,a,e.memoizedProps);else i!==a?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,a===null?cg(r,e.type,e.stateNode):lg(r,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Su(e,e.memoizedProps,n.memoizedProps)}break;case 27:ln(t,e),on(e),a&512&&(At||n===null||na(n,n.return)),n!==null&&a&4&&Su(e,e.memoizedProps,n.memoizedProps);break;case 5:if(ln(t,e),on(e),a&512&&(At||n===null||na(n,n.return)),e.flags&32){r=e.stateNode;try{Bi(r,"")}catch(p){Pe(e,e.return,p)}}a&4&&e.stateNode!=null&&(r=e.memoizedProps,Su(e,r,n!==null?n.memoizedProps:r)),a&1024&&(Eu=!0);break;case 6:if(ln(t,e),on(e),a&4){if(e.stateNode===null)throw Error(U(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(p){Pe(e,e.return,p)}}break;case 3:if(Eo=null,r=Jn,Jn=Fo(t.containerInfo),ln(t,e),Jn=r,on(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Ki(t.containerInfo)}catch(p){Pe(e,e.return,p)}Eu&&(Eu=!1,_p(e));break;case 4:a=Jn,Jn=Fo(e.stateNode.containerInfo),ln(t,e),on(e),Jn=a;break;case 12:ln(t,e),on(e);break;case 31:ln(t,e),on(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Jl(e,a)));break;case 13:ln(t,e),on(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Cc=xn()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Jl(e,a)));break;case 22:r=e.memoizedState!==null;var o=n!==null&&n.memoizedState!==null,u=ya,f=At;if(ya=u||r,At=f||o,ln(t,e),At=f,ya=u,on(e),a&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||o||ya||At||jr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){o=n=t;try{if(i=o.stateNode,r)s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{l=o.stateNode;var h=o.memoizedProps.style,m=h!=null&&h.hasOwnProperty("display")?h.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(p){Pe(o,o.return,p)}}}else if(t.tag===6){if(n===null){o=t;try{o.stateNode.nodeValue=r?"":o.memoizedProps}catch(p){Pe(o,o.return,p)}}}else if(t.tag===18){if(n===null){o=t;try{var d=o.stateNode;r?ng(d,!0):ng(o.stateNode,!1)}catch(p){Pe(o,o.return,p)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Jl(e,n))));break;case 19:ln(t,e),on(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Jl(e,a)));break;case 30:break;case 21:break;default:ln(t,e),on(e)}}function on(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(fp(a)){n=a;break}a=a.return}if(n==null)throw Error(U(160));switch(n.tag){case 27:var r=n.stateNode,i=xu(e);Vo(e,i,r);break;case 5:var s=n.stateNode;n.flags&32&&(Bi(s,""),n.flags&=-33);var l=xu(e);Vo(e,l,s);break;case 3:case 4:var o=n.stateNode.containerInfo,u=xu(e);Dd(e,u,o);break;default:throw Error(U(161))}}catch(f){Pe(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _p(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;_p(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function fa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)mp(e,t.alternate,t),t=t.sibling}function jr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:lr(4,t,t.return),jr(t);break;case 1:na(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&up(t,t.return,n),jr(t);break;case 27:Ys(t.stateNode);case 26:case 5:na(t,t.return),jr(t);break;case 22:t.memoizedState===null&&jr(t);break;case 30:jr(t);break;default:jr(t)}e=e.sibling}}function ha(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,r=e,i=t,s=i.flags;switch(i.tag){case 0:case 11:case 15:ha(r,i,n),Sl(4,i);break;case 1:if(ha(r,i,n),a=i,r=a.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(u){Pe(a,a.return,u)}if(a=i,r=a.updateQueue,r!==null){var l=a.stateNode;try{var o=r.shared.hiddenCallbacks;if(o!==null)for(r.shared.hiddenCallbacks=null,r=0;r<o.length;r++)vv(o[r],l)}catch(u){Pe(a,a.return,u)}}n&&s&64&&cp(i),Bs(i,i.return);break;case 27:hp(i);case 26:case 5:ha(r,i,n),n&&a===null&&s&4&&dp(i),Bs(i,i.return);break;case 12:ha(r,i,n);break;case 31:ha(r,i,n),n&&s&4&&vp(r,i);break;case 13:ha(r,i,n),n&&s&4&&pp(r,i);break;case 22:i.memoizedState===null&&ha(r,i,n),Bs(i,i.return);break;case 30:break;default:ha(r,i,n)}t=t.sibling}}function Ff(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&_l(n))}function Wf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_l(e))}function In(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wp(e,t,n,a),t=t.sibling}function wp(e,t,n,a){var r=t.flags;switch(t.tag){case 0:case 11:case 15:In(e,t,n,a),r&2048&&Sl(9,t);break;case 1:In(e,t,n,a);break;case 3:In(e,t,n,a),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&_l(e)));break;case 12:if(r&2048){In(e,t,n,a),e=t.stateNode;try{var i=t.memoizedProps,s=i.id,l=i.onPostCommit;typeof l=="function"&&l(s,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(o){Pe(t,t.return,o)}}else In(e,t,n,a);break;case 31:In(e,t,n,a);break;case 13:In(e,t,n,a);break;case 23:break;case 22:i=t.stateNode,s=t.alternate,t.memoizedState!==null?i._visibility&2?In(e,t,n,a):Ls(e,t):i._visibility&2?In(e,t,n,a):(i._visibility|=2,ui(e,t,n,a,(t.subtreeFlags&10256)!==0||!1)),r&2048&&Ff(s,t);break;case 24:In(e,t,n,a),r&2048&&Wf(t.alternate,t);break;default:In(e,t,n,a)}}function ui(e,t,n,a,r){for(r=r&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var i=e,s=t,l=n,o=a,u=s.flags;switch(s.tag){case 0:case 11:case 15:ui(i,s,l,o,r),Sl(8,s);break;case 23:break;case 22:var f=s.stateNode;s.memoizedState!==null?f._visibility&2?ui(i,s,l,o,r):Ls(i,s):(f._visibility|=2,ui(i,s,l,o,r)),r&&u&2048&&Ff(s.alternate,s);break;case 24:ui(i,s,l,o,r),r&&u&2048&&Wf(s.alternate,s);break;default:ui(i,s,l,o,r)}t=t.sibling}}function Ls(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,r=a.flags;switch(a.tag){case 22:Ls(n,a),r&2048&&Ff(a.alternate,a);break;case 24:Ls(n,a),r&2048&&Wf(a.alternate,a);break;default:Ls(n,a)}t=t.sibling}}var js=8192;function ai(e,t,n){if(e.subtreeFlags&js)for(e=e.child;e!==null;)Sp(e,t,n),e=e.sibling}function Sp(e,t,n){switch(e.tag){case 26:ai(e,t,n),e.flags&js&&e.memoizedState!==null&&Rx(n,Jn,e.memoizedState,e.memoizedProps);break;case 5:ai(e,t,n);break;case 3:case 4:var a=Jn;Jn=Fo(e.stateNode.containerInfo),ai(e,t,n),Jn=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=js,js=16777216,ai(e,t,n),js=a):ai(e,t,n));break;default:ai(e,t,n)}}function xp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function bs(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Ht=a,Tp(a,e)}xp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ep(e),e=e.sibling}function Ep(e){switch(e.tag){case 0:case 11:case 15:bs(e),e.flags&2048&&lr(9,e,e.return);break;case 3:bs(e);break;case 12:bs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,So(e)):bs(e);break;default:bs(e)}}function So(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];Ht=a,Tp(a,e)}xp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:lr(8,t,t.return),So(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,So(t));break;default:So(t)}e=e.sibling}}function Tp(e,t){for(;Ht!==null;){var n=Ht;switch(n.tag){case 0:case 11:case 15:lr(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:_l(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,Ht=a;else e:for(n=e;Ht!==null;){a=Ht;var r=a.sibling,i=a.return;if(gp(a),a===n){Ht=null;break e}if(r!==null){r.return=i,Ht=r;break e}Ht=i}}}var XS={getCacheForType:function(e){var t=Zt(Ct),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Zt(Ct).controller.signal}},JS=typeof WeakMap=="function"?WeakMap:Map,Ge=0,nt=null,Re=null,Me=0,Qe=0,vn=null,Xa=!1,ns=!1,eh=!1,Oa=0,bt=0,or=0,zr=0,th=0,Sn=0,Yi=0,Hs=null,un=null,Nd=!1,Cc=0,jp=0,Go=1/0,Ko=null,er=null,zt=0,tr=null,Ii=null,Sa=0,Ad=0,Cd=null,Op=null,qs=0,Rd=null;function jn(){return Ge&2&&Me!==0?Me&-Me:ye.T!==null?ah():zy()}function Dp(){if(Sn===0)if(!(Me&536870912)||ze){var e=Hl;Hl<<=1,!(Hl&3932160)&&(Hl=262144),Sn=e}else Sn=536870912;return e=Dn.current,e!==null&&(e.flags|=32),Sn}function dn(e,t,n){(e===nt&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)&&(Vi(e,0),Ja(e,Me,Sn,!1)),vl(e,n),(!(Ge&2)||e!==nt)&&(e===nt&&(!(Ge&2)&&(zr|=n),bt===4&&Ja(e,Me,Sn,!1)),ia(e))}function Np(e,t,n){if(Ge&6)throw Error(U(327));var a=!n&&(t&127)===0&&(t&e.expiredLanes)===0||yl(e,t),r=a?ZS(e,t):Tu(e,t,!0),i=a;do{if(r===0){ns&&!a&&Ja(e,t,0,!1);break}else{if(n=e.current.alternate,i&&!QS(n)){r=Tu(e,t,!1),i=!1;continue}if(r===2){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=e.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){t=s;e:{var l=e;r=Hs;var o=l.current.memoizedState.isDehydrated;if(o&&(Vi(l,s).flags|=256),s=Tu(l,s,!1),s!==2){if(eh&&!o){l.errorRecoveryDisabledLanes|=i,zr|=i,r=4;break e}i=un,un=r,i!==null&&(un===null?un=i:un.push.apply(un,i))}r=s}if(i=!1,r!==2)continue}}if(r===1){Vi(e,0),Ja(e,t,0,!0);break}e:{switch(a=e,i=r,i){case 0:case 1:throw Error(U(345));case 4:if((t&4194048)!==t)break;case 6:Ja(a,t,Sn,!Xa);break e;case 2:un=null;break;case 3:case 5:break;default:throw Error(U(329))}if((t&62914560)===t&&(r=Cc+300-xn(),10<r)){if(Ja(a,t,Sn,!Xa),_c(a,0,!0)!==0)break e;Sa=t,a.timeoutHandle=Qp(Im.bind(null,a,n,un,Ko,Nd,t,Sn,zr,Yi,Xa,i,"Throttled",-0,0),r);break e}Im(a,n,un,Ko,Nd,t,Sn,zr,Yi,Xa,i,null,-0,0)}}break}while(!0);ia(e)}function Im(e,t,n,a,r,i,s,l,o,u,f,h,m,d){if(e.timeoutHandle=-1,h=t.subtreeFlags,h&8192||(h&16785408)===16785408){h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pa},Sp(t,i,h);var p=(i&62914560)===i?Cc-xn():(i&4194048)===i?jp-xn():0;if(p=Mx(h,p),p!==null){Sa=i,e.cancelPendingCommit=p(Gm.bind(null,e,t,i,n,a,r,s,l,o,f,h,null,m,d)),Ja(e,i,s,!u);return}}Gm(e,t,i,n,a,r,s,l,o)}function QS(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var r=n[a],i=r.getSnapshot;r=r.value;try{if(!On(i(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ja(e,t,n,a){t&=~th,t&=~zr,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var r=t;0<r;){var i=31-Tn(r),s=1<<i;a[i]=-1,r&=~s}n!==0&&My(e,n,t)}function Rc(){return Ge&6?!0:(xl(0),!1)}function nh(){if(Re!==null){if(Qe===0)var e=Re.return;else e=Re,ba=Xr=null,qf(e),Ci=null,tl=0,e=Re;for(;e!==null;)op(e.alternate,e),e=e.return;Re=null}}function Vi(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,gx(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Sa=0,nh(),nt=e,Re=n=_a(e.current,null),Me=t,Qe=0,vn=null,Xa=!1,ns=yl(e,t),eh=!1,Yi=Sn=th=zr=or=bt=0,un=Hs=null,Nd=!1,t&8&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var r=31-Tn(a),i=1<<r;t|=e[r],a&=~i}return Oa=t,Ec(),n}function Ap(e,t){xe=null,ye.H=al,t===ts||t===jc?(t=wm(),Qe=3):t===kf?(t=wm(),Qe=4):Qe=t===Pf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,vn=t,Re===null&&(bt=1,Yo(e,Bn(t,e.current)))}function Cp(){var e=Dn.current;return e===null?!0:(Me&4194048)===Me?Hn===null:(Me&62914560)===Me||Me&536870912?e===Hn:!1}function Rp(){var e=ye.H;return ye.H=al,e===null?al:e}function Mp(){var e=ye.A;return ye.A=XS,e}function Xo(){bt=4,Xa||(Me&4194048)!==Me&&Dn.current!==null||(ns=!0),!(or&134217727)&&!(zr&134217727)||nt===null||Ja(nt,Me,Sn,!1)}function Tu(e,t,n){var a=Ge;Ge|=2;var r=Rp(),i=Mp();(nt!==e||Me!==t)&&(Ko=null,Vi(e,t)),t=!1;var s=bt;e:do try{if(Qe!==0&&Re!==null){var l=Re,o=vn;switch(Qe){case 8:nh(),s=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(t=!0);var u=Qe;if(Qe=0,vn=null,ji(e,l,o,u),n&&ns){s=0;break e}break;default:u=Qe,Qe=0,vn=null,ji(e,l,o,u)}}PS(),s=bt;break}catch(f){Ap(e,f)}while(!0);return t&&e.shellSuspendCounter++,ba=Xr=null,Ge=a,ye.H=r,ye.A=i,Re===null&&(nt=null,Me=0,Ec()),s}function PS(){for(;Re!==null;)kp(Re)}function ZS(e,t){var n=Ge;Ge|=2;var a=Rp(),r=Mp();nt!==e||Me!==t?(Ko=null,Go=xn()+500,Vi(e,t)):ns=yl(e,t);e:do try{if(Qe!==0&&Re!==null){t=Re;var i=vn;t:switch(Qe){case 1:Qe=0,vn=null,ji(e,t,i,1);break;case 2:case 9:if(_m(i)){Qe=0,vn=null,Vm(t);break}t=function(){Qe!==2&&Qe!==9||nt!==e||(Qe=7),ia(e)},i.then(t,t);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:_m(i)?(Qe=0,vn=null,Vm(t)):(Qe=0,vn=null,ji(e,t,i,7));break;case 5:var s=null;switch(Re.tag){case 26:s=Re.memoizedState;case 5:case 27:var l=Re;if(s?e0(s):l.stateNode.complete){Qe=0,vn=null;var o=l.sibling;if(o!==null)Re=o;else{var u=l.return;u!==null?(Re=u,Mc(u)):Re=null}break t}}Qe=0,vn=null,ji(e,t,i,5);break;case 6:Qe=0,vn=null,ji(e,t,i,6);break;case 8:nh(),bt=6;break e;default:throw Error(U(462))}}FS();break}catch(f){Ap(e,f)}while(!0);return ba=Xr=null,ye.H=a,ye.A=r,Ge=n,Re!==null?0:(nt=null,Me=0,Ec(),bt)}function FS(){for(;Re!==null&&!ww();)kp(Re)}function kp(e){var t=lp(e.alternate,e,Oa);e.memoizedProps=e.pendingProps,t===null?Mc(e):Re=t}function Vm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=$m(n,t,t.pendingProps,t.type,void 0,Me);break;case 11:t=$m(n,t,t.pendingProps,t.type.render,t.ref,Me);break;case 5:qf(t);default:op(n,t),t=Re=ov(t,Oa),t=lp(n,t,Oa)}e.memoizedProps=e.pendingProps,t===null?Mc(e):Re=t}function ji(e,t,n,a){ba=Xr=null,qf(t),Ci=null,tl=0;var r=t.return;try{if(HS(e,r,t,n,Me)){bt=1,Yo(e,Bn(n,e.current)),Re=null;return}}catch(i){if(r!==null)throw Re=r,i;bt=1,Yo(e,Bn(n,e.current)),Re=null;return}t.flags&32768?(ze||a===1?e=!0:ns||Me&536870912?e=!1:(Xa=e=!0,(a===2||a===9||a===3||a===6)&&(a=Dn.current,a!==null&&a.tag===13&&(a.flags|=16384))),Up(t,e)):Mc(t)}function Mc(e){var t=e;do{if(t.flags&32768){Up(t,Xa);return}e=t.return;var n=IS(t.alternate,t,Oa);if(n!==null){Re=n;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);bt===0&&(bt=5)}function Up(e,t){do{var n=VS(e.alternate,e);if(n!==null){n.flags&=32767,Re=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Re=e;return}Re=e=n}while(e!==null);bt=6,Re=null}function Gm(e,t,n,a,r,i,s,l,o){e.cancelPendingCommit=null;do kc();while(zt!==0);if(Ge&6)throw Error(U(327));if(t!==null){if(t===e.current)throw Error(U(177));if(i=t.lanes|t.childLanes,i|=Of,Cw(e,n,i,s,l,o),e===nt&&(Re=nt=null,Me=0),Ii=t,tr=e,Sa=n,Ad=i,Cd=r,Op=a,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,nx(Co,function(){return Hp(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,t.subtreeFlags&13878||a){a=ye.T,ye.T=null,r=Ke.p,Ke.p=2,s=Ge,Ge|=4;try{GS(e,t,n)}finally{Ge=s,Ke.p=r,ye.T=a}}zt=1,zp(),$p(),Bp()}}function zp(){if(zt===1){zt=0;var e=tr,t=Ii,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=ye.T,ye.T=null;var a=Ke.p;Ke.p=2;var r=Ge;Ge|=4;try{bp(t,e);var i=zd,s=ev(e.containerInfo),l=i.focusedElem,o=i.selectionRange;if(s!==l&&l&&l.ownerDocument&&Wy(l.ownerDocument.documentElement,l)){if(o!==null&&jf(l)){var u=o.start,f=o.end;if(f===void 0&&(f=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(f,l.value.length);else{var h=l.ownerDocument||document,m=h&&h.defaultView||window;if(m.getSelection){var d=m.getSelection(),p=l.textContent.length,b=Math.min(o.start,p),x=o.end===void 0?b:Math.min(o.end,p);!d.extend&&b>x&&(s=x,x=b,b=s);var v=hm(l,b),g=hm(l,x);if(v&&g&&(d.rangeCount!==1||d.anchorNode!==v.node||d.anchorOffset!==v.offset||d.focusNode!==g.node||d.focusOffset!==g.offset)){var y=h.createRange();y.setStart(v.node,v.offset),d.removeAllRanges(),b>x?(d.addRange(y),d.extend(g.node,g.offset)):(y.setEnd(g.node,g.offset),d.addRange(y))}}}}for(h=[],d=l;d=d.parentNode;)d.nodeType===1&&h.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<h.length;l++){var w=h[l];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}tc=!!Ud,zd=Ud=null}finally{Ge=r,Ke.p=a,ye.T=n}}e.current=t,zt=2}}function $p(){if(zt===2){zt=0;var e=tr,t=Ii,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=ye.T,ye.T=null;var a=Ke.p;Ke.p=2;var r=Ge;Ge|=4;try{mp(e,t.alternate,t)}finally{Ge=r,Ke.p=a,ye.T=n}}zt=3}}function Bp(){if(zt===4||zt===3){zt=0,Sw();var e=tr,t=Ii,n=Sa,a=Op;t.subtreeFlags&10256||t.flags&10256?zt=5:(zt=0,Ii=tr=null,Lp(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(er=null),bf(n),t=t.stateNode,En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(gl,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=ye.T,r=Ke.p,Ke.p=2,ye.T=null;try{for(var i=e.onRecoverableError,s=0;s<a.length;s++){var l=a[s];i(l.value,{componentStack:l.stack})}}finally{ye.T=t,Ke.p=r}}Sa&3&&kc(),ia(e),r=e.pendingLanes,n&261930&&r&42?e===Rd?qs++:(qs=0,Rd=e):qs=0,xl(0)}}function Lp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,_l(t)))}function kc(){return zp(),$p(),Bp(),Hp()}function Hp(){if(zt!==5)return!1;var e=tr,t=Ad;Ad=0;var n=bf(Sa),a=ye.T,r=Ke.p;try{Ke.p=32>n?32:n,ye.T=null,n=Cd,Cd=null;var i=tr,s=Sa;if(zt=0,Ii=tr=null,Sa=0,Ge&6)throw Error(U(331));var l=Ge;if(Ge|=4,Ep(i.current),wp(i,i.current,s,n),Ge=l,xl(0,!1),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(gl,i)}catch{}return!0}finally{Ke.p=r,ye.T=a,Lp(e,t)}}function Km(e,t,n){t=Bn(n,t),t=Td(e.stateNode,t,2),e=Wa(e,t,2),e!==null&&(vl(e,2),ia(e))}function Pe(e,t,n){if(e.tag===3)Km(e,e,n);else for(;t!==null;){if(t.tag===3){Km(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(er===null||!er.has(a))){e=Bn(n,e),n=tp(2),a=Wa(t,n,2),a!==null&&(np(n,a,t,e),vl(a,2),ia(a));break}}t=t.return}}function ju(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new JS;var r=new Set;a.set(t,r)}else r=a.get(t),r===void 0&&(r=new Set,a.set(t,r));r.has(n)||(eh=!0,r.add(n),e=WS.bind(null,e,t,n),t.then(e,e))}function WS(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,nt===e&&(Me&n)===n&&(bt===4||bt===3&&(Me&62914560)===Me&&300>xn()-Cc?!(Ge&2)&&Vi(e,0):th|=n,Yi===Me&&(Yi=0)),ia(e)}function qp(e,t){t===0&&(t=Ry()),e=Kr(e,t),e!==null&&(vl(e,t),ia(e))}function ex(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),qp(e,n)}function tx(e,t){var n=0;switch(e.tag){case 31:case 13:var a=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(U(314))}a!==null&&a.delete(t),qp(e,n)}function nx(e,t){return vf(e,t)}var Jo=null,di=null,Md=!1,Qo=!1,Ou=!1,Qa=0;function ia(e){e!==di&&e.next===null&&(di===null?Jo=di=e:di=di.next=e),Qo=!0,Md||(Md=!0,rx())}function xl(e,t){if(!Ou&&Qo){Ou=!0;do for(var n=!1,a=Jo;a!==null;){if(e!==0){var r=a.pendingLanes;if(r===0)var i=0;else{var s=a.suspendedLanes,l=a.pingedLanes;i=(1<<31-Tn(42|e)+1)-1,i&=r&~(s&~l),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,Xm(a,i))}else i=Me,i=_c(a,a===nt?i:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),!(i&3)||yl(a,i)||(n=!0,Xm(a,i));a=a.next}while(n);Ou=!1}}function ax(){Yp()}function Yp(){Qo=Md=!1;var e=0;Qa!==0&&mx()&&(e=Qa);for(var t=xn(),n=null,a=Jo;a!==null;){var r=a.next,i=Ip(a,t);i===0?(a.next=null,n===null?Jo=r:n.next=r,r===null&&(di=n)):(n=a,(e!==0||i&3)&&(Qo=!0)),a=r}zt!==0&&zt!==5||xl(e),Qa!==0&&(Qa=0)}function Ip(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var s=31-Tn(i),l=1<<s,o=r[s];o===-1?(!(l&n)||l&a)&&(r[s]=Aw(l,t)):o<=t&&(e.expiredLanes|=l),i&=~l}if(t=nt,n=Me,n=_c(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&tu(a),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||yl(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&tu(a),bf(n)){case 2:case 8:n=Ay;break;case 32:n=Co;break;case 268435456:n=Cy;break;default:n=Co}return a=Vp.bind(null,e),n=vf(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&tu(a),e.callbackPriority=2,e.callbackNode=null,2}function Vp(e,t){if(zt!==0&&zt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var a=Me;return a=_c(e,e===nt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Np(e,a,t),Ip(e,xn()),e.callbackNode!=null&&e.callbackNode===n?Vp.bind(null,e):null)}function Xm(e,t){if(kc())return null;Np(e,t,!0)}function rx(){yx(function(){Ge&6?vf(Ny,ax):Yp()})}function ah(){if(Qa===0){var e=Li;e===0&&(e=Ll,Ll<<=1,!(Ll&261888)&&(Ll=256)),Qa=e}return Qa}function Jm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ho(""+e)}function Qm(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function ix(e,t,n,a,r){if(t==="submit"&&n&&n.stateNode===r){var i=Jm((r[fn]||null).action),s=a.submitter;s&&(t=(t=s[fn]||null)?Jm(t.formAction):s.getAttribute("formAction"),t!==null&&(i=t,s=null));var l=new wc("action","action",null,a,r);e.push({event:l,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Qa!==0){var o=s?Qm(r,s):new FormData(r);xd(n,{pending:!0,data:o,method:r.method,action:i},null,o)}}else typeof i=="function"&&(l.preventDefault(),o=s?Qm(r,s):new FormData(r),xd(n,{pending:!0,data:o,method:r.method,action:i},i,o))},currentTarget:r}]})}}for(var Du=0;Du<dd.length;Du++){var Nu=dd[Du],sx=Nu.toLowerCase(),lx=Nu[0].toUpperCase()+Nu.slice(1);Fn(sx,"on"+lx)}Fn(nv,"onAnimationEnd");Fn(av,"onAnimationIteration");Fn(rv,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(xS,"onTransitionRun");Fn(ES,"onTransitionStart");Fn(TS,"onTransitionCancel");Fn(iv,"onTransitionEnd");$i("onMouseEnter",["mouseout","mouseover"]);$i("onMouseLeave",["mouseout","mouseover"]);$i("onPointerEnter",["pointerout","pointerover"]);$i("onPointerLeave",["pointerout","pointerover"]);Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ox=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rl));function Gp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var s=a.length-1;0<=s;s--){var l=a[s],o=l.instance,u=l.currentTarget;if(l=l.listener,o!==i&&r.isPropagationStopped())break e;i=l,r.currentTarget=u;try{i(r)}catch(f){Mo(f)}r.currentTarget=null,i=o}else for(s=0;s<a.length;s++){if(l=a[s],o=l.instance,u=l.currentTarget,l=l.listener,o!==i&&r.isPropagationStopped())break e;i=l,r.currentTarget=u;try{i(r)}catch(f){Mo(f)}r.currentTarget=null,i=o}}}}function Ce(e,t){var n=t[ad];n===void 0&&(n=t[ad]=new Set);var a=e+"__bubble";n.has(a)||(Kp(t,e,2,!1),n.add(a))}function Au(e,t,n){var a=0;t&&(a|=4),Kp(n,e,a,t)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function rh(e){if(!e[Ql]){e[Ql]=!0,$y.forEach(function(n){n!=="selectionchange"&&(ox.has(n)||Au(n,!1,e),Au(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ql]||(t[Ql]=!0,Au("selectionchange",!1,t))}}function Kp(e,t,n,a){switch(i0(t)){case 2:var r=zx;break;case 8:r=$x;break;default:r=oh}n=r.bind(null,t,n,e),r=void 0,!od||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),a?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Cu(e,t,n,a,r){var i=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var s=a.tag;if(s===3||s===4){var l=a.stateNode.containerInfo;if(l===r)break;if(s===4)for(s=a.return;s!==null;){var o=s.tag;if((o===3||o===4)&&s.stateNode.containerInfo===r)return;s=s.return}for(;l!==null;){if(s=vi(l),s===null)return;if(o=s.tag,o===5||o===6||o===26||o===27){a=i=s;continue e}l=l.parentNode}}a=a.return}Gy(function(){var u=i,f=Sf(n),h=[];e:{var m=sv.get(e);if(m!==void 0){var d=wc,p=e;switch(e){case"keypress":if(go(n)===0)break e;case"keydown":case"keyup":d=tS;break;case"focusin":p="focus",d=su;break;case"focusout":p="blur",d=su;break;case"beforeblur":case"afterblur":d=su;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=am;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Iw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=rS;break;case nv:case av:case rv:d=Kw;break;case iv:d=sS;break;case"scroll":case"scrollend":d=qw;break;case"wheel":d=oS;break;case"copy":case"cut":case"paste":d=Jw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=im;break;case"toggle":case"beforetoggle":d=uS}var b=(t&4)!==0,x=!b&&(e==="scroll"||e==="scrollend"),v=b?m!==null?m+"Capture":null:m;b=[];for(var g=u,y;g!==null;){var w=g;if(y=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||y===null||v===null||(w=Ps(g,v),w!=null&&b.push(il(g,w,y))),x)break;g=g.return}0<b.length&&(m=new d(m,p,null,n,f),h.push({event:m,listeners:b}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",m&&n!==ld&&(p=n.relatedTarget||n.fromElement)&&(vi(p)||p[Fi]))break e;if((d||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=u,p=p?vi(p):null,p!==null&&(x=ml(p),b=p.tag,p!==x||b!==5&&b!==27&&b!==6)&&(p=null)):(d=null,p=u),d!==p)){if(b=am,w="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(b=im,w="onPointerLeave",v="onPointerEnter",g="pointer"),x=d==null?m:Es(d),y=p==null?m:Es(p),m=new b(w,g+"leave",d,n,f),m.target=x,m.relatedTarget=y,w=null,vi(f)===u&&(b=new b(v,g+"enter",p,n,f),b.target=y,b.relatedTarget=x,w=b),x=w,d&&p)t:{for(b=cx,v=d,g=p,y=0,w=v;w;w=b(w))y++;w=0;for(var T=g;T;T=b(T))w++;for(;0<y-w;)v=b(v),y--;for(;0<w-y;)g=b(g),w--;for(;y--;){if(v===g||g!==null&&v===g.alternate){b=v;break t}v=b(v),g=b(g)}b=null}else b=null;d!==null&&Pm(h,m,d,b,!1),p!==null&&x!==null&&Pm(h,x,p,b,!0)}}e:{if(m=u?Es(u):window,d=m.nodeName&&m.nodeName.toLowerCase(),d==="select"||d==="input"&&m.type==="file")var E=cm;else if(om(m))if(Zy)E=_S;else{E=pS;var S=vS}else d=m.nodeName,!d||d.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&wf(u.elementType)&&(E=cm):E=bS;if(E&&(E=E(e,u))){Py(h,E,n,f);break e}S&&S(e,m,u),e==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&sd(m,"number",m.value)}switch(S=u?Es(u):window,e){case"focusin":(om(S)||S.contentEditable==="true")&&(_i=S,cd=u,Rs=null);break;case"focusout":Rs=cd=_i=null;break;case"mousedown":ud=!0;break;case"contextmenu":case"mouseup":case"dragend":ud=!1,mm(h,n,f);break;case"selectionchange":if(SS)break;case"keydown":case"keyup":mm(h,n,f)}var j;if(Tf)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else bi?Jy(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Xy&&n.locale!=="ko"&&(bi||D!=="onCompositionStart"?D==="onCompositionEnd"&&bi&&(j=Ky()):(Ka=f,xf="value"in Ka?Ka.value:Ka.textContent,bi=!0)),S=Po(u,D),0<S.length&&(D=new rm(D,e,null,n,f),h.push({event:D,listeners:S}),j?D.data=j:(j=Qy(n),j!==null&&(D.data=j)))),(j=fS?hS(e,n):mS(e,n))&&(D=Po(u,"onBeforeInput"),0<D.length&&(S=new rm("onBeforeInput","beforeinput",null,n,f),h.push({event:S,listeners:D}),S.data=j)),ix(h,e,u,n,f)}Gp(h,t)})}function il(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Po(e,t){for(var n=t+"Capture",a=[];e!==null;){var r=e,i=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||i===null||(r=Ps(e,n),r!=null&&a.unshift(il(e,r,i)),r=Ps(e,t),r!=null&&a.push(il(e,r,i))),e.tag===3)return a;e=e.return}return[]}function cx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Pm(e,t,n,a,r){for(var i=t._reactName,s=[];n!==null&&n!==a;){var l=n,o=l.alternate,u=l.stateNode;if(l=l.tag,o!==null&&o===a)break;l!==5&&l!==26&&l!==27||u===null||(o=u,r?(u=Ps(n,i),u!=null&&s.unshift(il(n,u,o))):r||(u=Ps(n,i),u!=null&&s.push(il(n,u,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var ux=/\r\n?/g,dx=/\u0000|\uFFFD/g;function Zm(e){return(typeof e=="string"?e:""+e).replace(ux,`
`).replace(dx,"")}function Xp(e,t){return t=Zm(t),Zm(e)===t}function Fe(e,t,n,a,r,i){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Bi(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Bi(e,""+a);break;case"className":Yl(e,"class",a);break;case"tabIndex":Yl(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Yl(e,n,a);break;case"style":Vy(e,a,i);break;case"data":if(t!=="object"){Yl(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=ho(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(t!=="input"&&Fe(e,t,"name",r.name,r,null),Fe(e,t,"formEncType",r.formEncType,r,null),Fe(e,t,"formMethod",r.formMethod,r,null),Fe(e,t,"formTarget",r.formTarget,r,null)):(Fe(e,t,"encType",r.encType,r,null),Fe(e,t,"method",r.method,r,null),Fe(e,t,"target",r.target,r,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=ho(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=pa);break;case"onScroll":a!=null&&Ce("scroll",e);break;case"onScrollEnd":a!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(U(61));if(n=a.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=ho(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),fo(e,"popover",a);break;case"xlinkActuate":ca(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":ca(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":ca(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":ca(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":ca(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":ca(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":ca(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":ca(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":ca(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":fo(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Lw.get(n)||n,fo(e,n,a))}}function kd(e,t,n,a,r,i){switch(n){case"style":Vy(e,a,i);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(U(61));if(n=a.__html,n!=null){if(r.children!=null)throw Error(U(60));e.innerHTML=n}}break;case"children":typeof a=="string"?Bi(e,a):(typeof a=="number"||typeof a=="bigint")&&Bi(e,""+a);break;case"onScroll":a!=null&&Ce("scroll",e);break;case"onScrollEnd":a!=null&&Ce("scrollend",e);break;case"onClick":a!=null&&(e.onclick=pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!By.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),i=e[fn]||null,i=i!=null?i[n]:null,typeof i=="function"&&e.removeEventListener(t,i,r),typeof a=="function")){typeof i!="function"&&i!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,r);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):fo(e,n,a)}}}function Ft(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var a=!1,r=!1,i;for(i in n)if(n.hasOwnProperty(i)){var s=n[i];if(s!=null)switch(i){case"src":a=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:Fe(e,t,i,s,n,null)}}r&&Fe(e,t,"srcSet",n.srcSet,n,null),a&&Fe(e,t,"src",n.src,n,null);return;case"input":Ce("invalid",e);var l=i=s=r=null,o=null,u=null;for(a in n)if(n.hasOwnProperty(a)){var f=n[a];if(f!=null)switch(a){case"name":r=f;break;case"type":s=f;break;case"checked":o=f;break;case"defaultChecked":u=f;break;case"value":i=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(U(137,t));break;default:Fe(e,t,a,f,n,null)}}qy(e,i,l,o,u,s,r,!1);return;case"select":Ce("invalid",e),a=s=i=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":i=l;break;case"defaultValue":s=l;break;case"multiple":a=l;default:Fe(e,t,r,l,n,null)}t=i,n=s,e.multiple=!!a,t!=null?Di(e,!!a,t,!1):n!=null&&Di(e,!!a,n,!0);return;case"textarea":Ce("invalid",e),i=r=a=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":a=l;break;case"defaultValue":r=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:Fe(e,t,s,l,n,null)}Iy(e,a,r,i);return;case"option":for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Fe(e,t,o,a,n,null)}return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(a=0;a<rl.length;a++)Ce(rl[a],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(a=n[u],a!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,t));default:Fe(e,t,u,a,n,null)}return;default:if(wf(t)){for(f in n)n.hasOwnProperty(f)&&(a=n[f],a!==void 0&&kd(e,t,f,a,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(a=n[l],a!=null&&Fe(e,t,l,a,n,null))}function fx(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,i=null,s=null,l=null,o=null,u=null,f=null;for(d in n){var h=n[d];if(n.hasOwnProperty(d)&&h!=null)switch(d){case"checked":break;case"value":break;case"defaultValue":o=h;default:a.hasOwnProperty(d)||Fe(e,t,d,null,a,h)}}for(var m in a){var d=a[m];if(h=n[m],a.hasOwnProperty(m)&&(d!=null||h!=null))switch(m){case"type":i=d;break;case"name":r=d;break;case"checked":u=d;break;case"defaultChecked":f=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(U(137,t));break;default:d!==h&&Fe(e,t,m,d,a,h)}}id(e,s,l,o,u,f,i,r);return;case"select":d=s=l=m=null;for(i in n)if(o=n[i],n.hasOwnProperty(i)&&o!=null)switch(i){case"value":break;case"multiple":d=o;default:a.hasOwnProperty(i)||Fe(e,t,i,null,a,o)}for(r in a)if(i=a[r],o=n[r],a.hasOwnProperty(r)&&(i!=null||o!=null))switch(r){case"value":m=i;break;case"defaultValue":l=i;break;case"multiple":s=i;default:i!==o&&Fe(e,t,r,i,a,o)}t=l,n=s,a=d,m!=null?Di(e,!!n,m,!1):!!a!=!!n&&(t!=null?Di(e,!!n,t,!0):Di(e,!!n,n?[]:"",!1));return;case"textarea":d=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!a.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Fe(e,t,l,null,a,r)}for(s in a)if(r=a[s],i=n[s],a.hasOwnProperty(s)&&(r!=null||i!=null))switch(s){case"value":m=r;break;case"defaultValue":d=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(U(91));break;default:r!==i&&Fe(e,t,s,r,a,i)}Yy(e,m,d);return;case"option":for(var p in n)if(m=n[p],n.hasOwnProperty(p)&&m!=null&&!a.hasOwnProperty(p))switch(p){case"selected":e.selected=!1;break;default:Fe(e,t,p,null,a,m)}for(o in a)if(m=a[o],d=n[o],a.hasOwnProperty(o)&&m!==d&&(m!=null||d!=null))switch(o){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Fe(e,t,o,m,a,d)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!=null&&!a.hasOwnProperty(b)&&Fe(e,t,b,null,a,m);for(u in a)if(m=a[u],d=n[u],a.hasOwnProperty(u)&&m!==d&&(m!=null||d!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,t));break;default:Fe(e,t,u,m,a,d)}return;default:if(wf(t)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!==void 0&&!a.hasOwnProperty(x)&&kd(e,t,x,void 0,a,m);for(f in a)m=a[f],d=n[f],!a.hasOwnProperty(f)||m===d||m===void 0&&d===void 0||kd(e,t,f,m,a,d);return}}for(var v in n)m=n[v],n.hasOwnProperty(v)&&m!=null&&!a.hasOwnProperty(v)&&Fe(e,t,v,null,a,m);for(h in a)m=a[h],d=n[h],!a.hasOwnProperty(h)||m===d||m==null&&d==null||Fe(e,t,h,m,a,d)}function Fm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function hx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var r=n[a],i=r.transferSize,s=r.initiatorType,l=r.duration;if(i&&l&&Fm(s)){for(s=0,l=r.responseEnd,a+=1;a<n.length;a++){var o=n[a],u=o.startTime;if(u>l)break;var f=o.transferSize,h=o.initiatorType;f&&Fm(h)&&(o=o.responseEnd,s+=f*(o<l?1:(l-u)/(o-u)))}if(--a,t+=8*(i+s)/(r.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ud=null,zd=null;function Zo(e){return e.nodeType===9?e:e.ownerDocument}function Wm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jp(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function $d(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ru=null;function mx(){var e=window.event;return e&&e.type==="popstate"?e===Ru?!1:(Ru=e,!0):(Ru=null,!1)}var Qp=typeof setTimeout=="function"?setTimeout:void 0,gx=typeof clearTimeout=="function"?clearTimeout:void 0,eg=typeof Promise=="function"?Promise:void 0,yx=typeof queueMicrotask=="function"?queueMicrotask:typeof eg<"u"?function(e){return eg.resolve(null).then(e).catch(vx)}:Qp;function vx(e){setTimeout(function(){throw e})}function dr(e){return e==="head"}function tg(e,t){var n=t,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"||n==="/&"){if(a===0){e.removeChild(r),Ki(t);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")Ys(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Ys(n);for(var i=n.firstChild;i;){var s=i.nextSibling,l=i.nodeName;i[pl]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=s}}else n==="body"&&Ys(e.ownerDocument.body);n=r}while(n);Ki(t)}function ng(e,t){var n=e;e=0;do{var a=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=a}while(n)}function Bd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Bd(n),_f(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function px(e,t,n,a){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[pl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=qn(e.nextSibling),e===null)break}return null}function bx(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=qn(e.nextSibling),e===null))return null;return e}function Pp(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=qn(e.nextSibling),e===null))return null;return e}function Ld(e){return e.data==="$?"||e.data==="$~"}function Hd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function _x(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function qn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var qd=null;function ag(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return qn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function rg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function Zp(e,t,n){switch(t=Zo(n),e){case"html":if(e=t.documentElement,!e)throw Error(U(452));return e;case"head":if(e=t.head,!e)throw Error(U(453));return e;case"body":if(e=t.body,!e)throw Error(U(454));return e;default:throw Error(U(451))}}function Ys(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);_f(e)}var Yn=new Map,ig=new Set;function Fo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Da=Ke.d;Ke.d={f:wx,r:Sx,D:xx,C:Ex,L:Tx,m:jx,X:Dx,S:Ox,M:Nx};function wx(){var e=Da.f(),t=Rc();return e||t}function Sx(e){var t=Wi(e);t!==null&&t.tag===5&&t.type==="form"?Vv(t):Da.r(e)}var as=typeof document>"u"?null:document;function Fp(e,t,n){var a=as;if(a&&typeof t=="string"&&t){var r=$n(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),ig.has(r)||(ig.add(r),e={rel:e,crossOrigin:n,href:t},a.querySelector(r)===null&&(t=a.createElement("link"),Ft(t,"link",e),Yt(t),a.head.appendChild(t)))}}function xx(e){Da.D(e),Fp("dns-prefetch",e,null)}function Ex(e,t){Da.C(e,t),Fp("preconnect",e,t)}function Tx(e,t,n){Da.L(e,t,n);var a=as;if(a&&e&&t){var r='link[rel="preload"][as="'+$n(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+$n(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+$n(n.imageSizes)+'"]')):r+='[href="'+$n(e)+'"]';var i=r;switch(t){case"style":i=Gi(e);break;case"script":i=rs(e)}Yn.has(i)||(e=mt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Yn.set(i,e),a.querySelector(r)!==null||t==="style"&&a.querySelector(El(i))||t==="script"&&a.querySelector(Tl(i))||(t=a.createElement("link"),Ft(t,"link",e),Yt(t),a.head.appendChild(t)))}}function jx(e,t){Da.m(e,t);var n=as;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+$n(a)+'"][href="'+$n(e)+'"]',i=r;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=rs(e)}if(!Yn.has(i)&&(e=mt({rel:"modulepreload",href:e},t),Yn.set(i,e),n.querySelector(r)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Tl(i)))return}a=n.createElement("link"),Ft(a,"link",e),Yt(a),n.head.appendChild(a)}}}function Ox(e,t,n){Da.S(e,t,n);var a=as;if(a&&e){var r=Oi(a).hoistableStyles,i=Gi(e);t=t||"default";var s=r.get(i);if(!s){var l={loading:0,preload:null};if(s=a.querySelector(El(i)))l.loading=5;else{e=mt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Yn.get(i))&&ih(e,n);var o=s=a.createElement("link");Yt(o),Ft(o,"link",e),o._p=new Promise(function(u,f){o.onload=u,o.onerror=f}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,xo(s,t,a)}s={type:"stylesheet",instance:s,count:1,state:l},r.set(i,s)}}}function Dx(e,t){Da.X(e,t);var n=as;if(n&&e){var a=Oi(n).hoistableScripts,r=rs(e),i=a.get(r);i||(i=n.querySelector(Tl(r)),i||(e=mt({src:e,async:!0},t),(t=Yn.get(r))&&sh(e,t),i=n.createElement("script"),Yt(i),Ft(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},a.set(r,i))}}function Nx(e,t){Da.M(e,t);var n=as;if(n&&e){var a=Oi(n).hoistableScripts,r=rs(e),i=a.get(r);i||(i=n.querySelector(Tl(r)),i||(e=mt({src:e,async:!0,type:"module"},t),(t=Yn.get(r))&&sh(e,t),i=n.createElement("script"),Yt(i),Ft(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},a.set(r,i))}}function sg(e,t,n,a){var r=(r=Pa.current)?Fo(r):null;if(!r)throw Error(U(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Gi(n.href),n=Oi(r).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Gi(n.href);var i=Oi(r).hoistableStyles,s=i.get(e);if(s||(r=r.ownerDocument||r,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,s),(i=r.querySelector(El(e)))&&!i._p&&(s.instance=i,s.state.loading=5),Yn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Yn.set(e,n),i||Ax(r,e,n,s.state))),t&&a===null)throw Error(U(528,""));return s}if(t&&a!==null)throw Error(U(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=rs(n),n=Oi(r).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,e))}}function Gi(e){return'href="'+$n(e)+'"'}function El(e){return'link[rel="stylesheet"]['+e+"]"}function Wp(e){return mt({},e,{"data-precedence":e.precedence,precedence:null})}function Ax(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Ft(t,"link",n),Yt(t),e.head.appendChild(t))}function rs(e){return'[src="'+$n(e)+'"]'}function Tl(e){return"script[async]"+e}function lg(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+$n(n.href)+'"]');if(a)return t.instance=a,Yt(a),a;var r=mt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Yt(a),Ft(a,"style",r),xo(a,n.precedence,e),t.instance=a;case"stylesheet":r=Gi(n.href);var i=e.querySelector(El(r));if(i)return t.state.loading|=4,t.instance=i,Yt(i),i;a=Wp(n),(r=Yn.get(r))&&ih(a,r),i=(e.ownerDocument||e).createElement("link"),Yt(i);var s=i;return s._p=new Promise(function(l,o){s.onload=l,s.onerror=o}),Ft(i,"link",a),t.state.loading|=4,xo(i,n.precedence,e),t.instance=i;case"script":return i=rs(n.src),(r=e.querySelector(Tl(i)))?(t.instance=r,Yt(r),r):(a=n,(r=Yn.get(i))&&(a=mt({},n),sh(a,r)),e=e.ownerDocument||e,r=e.createElement("script"),Yt(r),Ft(r,"link",a),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(U(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(a=t.instance,t.state.loading|=4,xo(a,n.precedence,e));return t.instance}function xo(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=a.length?a[a.length-1]:null,i=r,s=0;s<a.length;s++){var l=a[s];if(l.dataset.precedence===t)i=l;else if(i!==r)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function ih(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function sh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Eo=null;function og(e,t,n){if(Eo===null){var a=new Map,r=Eo=new Map;r.set(n,a)}else r=Eo,a=r.get(n),a||(a=new Map,r.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var i=n[r];if(!(i[pl]||i[Qt]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var s=i.getAttribute(t)||"";s=e+s;var l=a.get(s);l?l.push(i):a.set(s,[i])}}return a}function cg(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Cx(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function e0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function Rx(e,t,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var r=Gi(a.href),i=t.querySelector(El(r));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Wo.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,Yt(i);return}i=t.ownerDocument||t,a=Wp(a),(r=Yn.get(r))&&ih(a,r),i=i.createElement("link"),Yt(i);var s=i;s._p=new Promise(function(l,o){s.onload=l,s.onerror=o}),Ft(i,"link",a),n.instance=i}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Wo.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Mu=0;function Mx(e,t){return e.stylesheets&&e.count===0&&To(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var a=setTimeout(function(){if(e.stylesheets&&To(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4+t);0<e.imgBytes&&Mu===0&&(Mu=62500*hx());var r=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&To(e,e.stylesheets),e.unsuspend)){var i=e.unsuspend;e.unsuspend=null,i()}},(e.imgBytes>Mu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(r)}}:null}function Wo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)To(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ec=null;function To(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ec=new Map,t.forEach(kx,e),ec=null,Wo.call(e))}function kx(e,t){if(!(t.state.loading&4)){var n=ec.get(e);if(n)var a=n.get(null);else{n=new Map,ec.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<r.length;i++){var s=r[i];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),a=s)}a&&n.set(null,a)}r=t.instance,s=r.getAttribute("data-precedence"),i=n.get(s)||a,i===a&&n.set(null,r),n.set(s,r),this.count++,a=Wo.bind(this),r.addEventListener("load",a),r.addEventListener("error",a),i?i.parentNode.insertBefore(r,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var sl={$$typeof:va,Provider:null,Consumer:null,_currentValue:Rr,_currentValue2:Rr,_threadCount:0};function Ux(e,t,n,a,r,i,s,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.hiddenUpdates=nu(null),this.identifierPrefix=a,this.onUncaughtError=r,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function t0(e,t,n,a,r,i,s,l,o,u,f,h){return e=new Ux(e,t,n,s,o,u,f,h,l),t=1,i===!0&&(t|=24),i=bn(3,null,null,t),e.current=i,i.stateNode=e,t=Rf(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:a,isDehydrated:n,cache:t},Uf(i),e}function n0(e){return e?(e=xi,e):xi}function a0(e,t,n,a,r,i){r=n0(r),a.context===null?a.context=r:a.pendingContext=r,a=Fa(t),a.payload={element:n},i=i===void 0?null:i,i!==null&&(a.callback=i),n=Wa(e,a,t),n!==null&&(dn(n,e,t),ks(n,e,t))}function ug(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lh(e,t){ug(e,t),(e=e.alternate)&&ug(e,t)}function r0(e){if(e.tag===13||e.tag===31){var t=Kr(e,67108864);t!==null&&dn(t,e,67108864),lh(e,67108864)}}function dg(e){if(e.tag===13||e.tag===31){var t=jn();t=pf(t);var n=Kr(e,t);n!==null&&dn(n,e,t),lh(e,t)}}var tc=!0;function zx(e,t,n,a){var r=ye.T;ye.T=null;var i=Ke.p;try{Ke.p=2,oh(e,t,n,a)}finally{Ke.p=i,ye.T=r}}function $x(e,t,n,a){var r=ye.T;ye.T=null;var i=Ke.p;try{Ke.p=8,oh(e,t,n,a)}finally{Ke.p=i,ye.T=r}}function oh(e,t,n,a){if(tc){var r=Yd(a);if(r===null)Cu(e,t,a,nc,n),fg(e,a);else if(Lx(r,e,t,n,a))a.stopPropagation();else if(fg(e,a),t&4&&-1<Bx.indexOf(e)){for(;r!==null;){var i=Wi(r);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var s=Er(i.pendingLanes);if(s!==0){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;s;){var o=1<<31-Tn(s);l.entanglements[1]|=o,s&=~o}ia(i),!(Ge&6)&&(Go=xn()+500,xl(0))}}break;case 31:case 13:l=Kr(i,2),l!==null&&dn(l,i,2),Rc(),lh(i,2)}if(i=Yd(a),i===null&&Cu(e,t,a,nc,n),i===r)break;r=i}r!==null&&a.stopPropagation()}else Cu(e,t,a,null,n)}}function Yd(e){return e=Sf(e),ch(e)}var nc=null;function ch(e){if(nc=null,e=vi(e),e!==null){var t=ml(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=Ey(t),e!==null)return e;e=null}else if(n===31){if(e=Ty(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return nc=e,null}function i0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xw()){case Ny:return 2;case Ay:return 8;case Co:case Ew:return 32;case Cy:return 268435456;default:return 32}default:return 32}}var Id=!1,nr=null,ar=null,rr=null,ll=new Map,ol=new Map,Ya=[],Bx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fg(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":ll.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(t.pointerId)}}function _s(e,t,n,a,r,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:i,targetContainers:[r]},t!==null&&(t=Wi(t),t!==null&&r0(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function Lx(e,t,n,a,r){switch(t){case"focusin":return nr=_s(nr,e,t,n,a,r),!0;case"dragenter":return ar=_s(ar,e,t,n,a,r),!0;case"mouseover":return rr=_s(rr,e,t,n,a,r),!0;case"pointerover":var i=r.pointerId;return ll.set(i,_s(ll.get(i)||null,e,t,n,a,r)),!0;case"gotpointercapture":return i=r.pointerId,ol.set(i,_s(ol.get(i)||null,e,t,n,a,r)),!0}return!1}function s0(e){var t=vi(e.target);if(t!==null){var n=ml(t);if(n!==null){if(t=n.tag,t===13){if(t=Ey(n),t!==null){e.blockedOn=t,Ph(e.priority,function(){dg(n)});return}}else if(t===31){if(t=Ty(n),t!==null){e.blockedOn=t,Ph(e.priority,function(){dg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yd(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);ld=a,n.target.dispatchEvent(a),ld=null}else return t=Wi(n),t!==null&&r0(t),e.blockedOn=n,!1;t.shift()}return!0}function hg(e,t,n){jo(e)&&n.delete(t)}function Hx(){Id=!1,nr!==null&&jo(nr)&&(nr=null),ar!==null&&jo(ar)&&(ar=null),rr!==null&&jo(rr)&&(rr=null),ll.forEach(hg),ol.forEach(hg)}function Pl(e,t){e.blockedOn===t&&(e.blockedOn=null,Id||(Id=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,Hx)))}var Zl=null;function mg(e){Zl!==e&&(Zl=e,$t.unstable_scheduleCallback($t.unstable_NormalPriority,function(){Zl===e&&(Zl=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],r=e[t+2];if(typeof a!="function"){if(ch(a||n)===null)continue;break}var i=Wi(n);i!==null&&(e.splice(t,3),t-=3,xd(i,{pending:!0,data:r,method:n.method,action:a},a,r))}}))}function Ki(e){function t(o){return Pl(o,e)}nr!==null&&Pl(nr,e),ar!==null&&Pl(ar,e),rr!==null&&Pl(rr,e),ll.forEach(t),ol.forEach(t);for(var n=0;n<Ya.length;n++){var a=Ya[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<Ya.length&&(n=Ya[0],n.blockedOn===null);)s0(n),n.blockedOn===null&&Ya.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var r=n[a],i=n[a+1],s=r[fn]||null;if(typeof i=="function")s||mg(n);else if(s){var l=null;if(i&&i.hasAttribute("formAction")){if(r=i,s=i[fn]||null)l=s.formAction;else if(ch(r)!==null)continue}else l=s.action;typeof l=="function"?n[a+1]=l:(n.splice(a,3),a-=3),mg(n)}}}function l0(){function e(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(s){return r=s})},focusReset:"manual",scroll:"manual"})}function t(){r!==null&&(r(),r=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,r=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),r!==null&&(r(),r=null)}}}function uh(e){this._internalRoot=e}Uc.prototype.render=uh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));var n=t.current,a=jn();a0(n,a,e,t,null,null)};Uc.prototype.unmount=uh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;a0(e.current,2,null,e,null,null),Rc(),t[Fi]=null}};function Uc(e){this._internalRoot=e}Uc.prototype.unstable_scheduleHydration=function(e){if(e){var t=zy();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ya.length&&t!==0&&t<Ya[n].priority;n++);Ya.splice(n,0,e),n===0&&s0(e)}};var gg=Sy.version;if(gg!=="19.2.0")throw Error(U(527,gg,"19.2.0"));Ke.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=yw(t),e=e!==null?jy(e):null,e=e===null?null:e.stateNode,e};var qx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ye,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{gl=Fl.inject(qx),En=Fl}catch{}}pc.createRoot=function(e,t){if(!xy(e))throw Error(U(299));var n=!1,a="",r=Fv,i=Wv,s=ep;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=t0(e,1,!1,null,null,n,a,null,r,i,s,l0),e[Fi]=t.current,rh(e),new uh(t)};pc.hydrateRoot=function(e,t,n){if(!xy(e))throw Error(U(299));var a=!1,r="",i=Fv,s=Wv,l=ep,o=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(o=n.formState)),t=t0(e,1,!0,t,n??null,a,r,o,i,s,l,l0),t.context=n0(null),n=t.current,a=jn(),a=pf(a),r=Fa(a),r.callback=null,Wa(n,r,a),n=a,t.current.lanes=n,vl(t,n),ia(t),e[Fi]=t.current,rh(e),new Uc(t)};pc.version="19.2.0";function o0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o0)}catch(e){console.error(e)}}o0(),yy.exports=pc;var Yx=yy.exports,Vd=function(e,t){return Vd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(n[r]=a[r])},Vd(e,t)};function c0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Vd(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ac=function(){return ac=Object.assign||function(t){for(var n,a=1,r=arguments.length;a<r;a++){n=arguments[a];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ac.apply(this,arguments)};function is(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n}function u0(e,t,n,a){var r=arguments.length,i=r<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,n):a,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(r<3?s(i):r>3?s(t,n,i):s(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i}function d0(e,t){return function(n,a){t(n,a,e)}}function f0(e,t,n,a,r,i){function s(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var l=a.kind,o=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?a.static?e:e.prototype:null,f=t||(u?Object.getOwnPropertyDescriptor(u,a.name):{}),h,m=!1,d=n.length-1;d>=0;d--){var p={};for(var b in a)p[b]=b==="access"?{}:a[b];for(var b in a.access)p.access[b]=a.access[b];p.addInitializer=function(v){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(v||null))};var x=(0,n[d])(l==="accessor"?{get:f.get,set:f.set}:f[o],p);if(l==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(f.get=h),(h=s(x.set))&&(f.set=h),(h=s(x.init))&&r.unshift(h)}else(h=s(x))&&(l==="field"?r.unshift(h):f[o]=h)}u&&Object.defineProperty(u,a.name,f),m=!0}function h0(e,t,n){for(var a=arguments.length>2,r=0;r<t.length;r++)n=a?t[r].call(e,n):t[r].call(e);return a?n:void 0}function m0(e){return typeof e=="symbol"?e:"".concat(e)}function g0(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function y0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function se(e,t,n,a){function r(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function l(f){try{u(a.next(f))}catch(h){s(h)}}function o(f){try{u(a.throw(f))}catch(h){s(h)}}function u(f){f.done?i(f.value):r(f.value).then(l,o)}u((a=a.apply(e,t||[])).next())})}function v0(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,r,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(u){return function(f){return o([u,f])}}function o(u){if(a)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(a=1,r&&(i=u[0]&2?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,r=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(f){u=[6,f],r=0}finally{a=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var zc=Object.create?function(e,t,n,a){a===void 0&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){a===void 0&&(a=n),e[a]=t[n]};function p0(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&zc(t,e,n)}function rc(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function dh(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,i=[],s;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(l){s={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}return i}function b0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(dh(arguments[t]));return e}function _0(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var a=Array(e),r=0,t=0;t<n;t++)for(var i=arguments[t],s=0,l=i.length;s<l;s++,r++)a[r]=i[s];return a}function w0(e,t,n){if(n||arguments.length===2)for(var a=0,r=t.length,i;a<r;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}function Xi(e){return this instanceof Xi?(this.v=e,this):new Xi(e)}function S0(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n.apply(e,t||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(d){return function(p){return Promise.resolve(p).then(d,h)}}function l(d,p){a[d]&&(r[d]=function(b){return new Promise(function(x,v){i.push([d,b,x,v])>1||o(d,b)})},p&&(r[d]=p(r[d])))}function o(d,p){try{u(a[d](p))}catch(b){m(i[0][3],b)}}function u(d){d.value instanceof Xi?Promise.resolve(d.value.v).then(f,h):m(i[0][2],d)}function f(d){o("next",d)}function h(d){o("throw",d)}function m(d,p){d(p),i.shift(),i.length&&o(i[0][0],i[0][1])}}function x0(e){var t,n;return t={},a("next"),a("throw",function(r){throw r}),a("return"),t[Symbol.iterator]=function(){return this},t;function a(r,i){t[r]=e[r]?function(s){return(n=!n)?{value:Xi(e[r](s)),done:!1}:i?i(s):s}:i}}function E0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof rc=="function"?rc(e):e[Symbol.iterator](),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(i){n[i]=e[i]&&function(s){return new Promise(function(l,o){s=e[i](s),r(l,o,s.done,s.value)})}}function r(i,s,l,o){Promise.resolve(o).then(function(u){i({value:u,done:l})},s)}}function T0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Ix=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Gd=function(e){return Gd=Object.getOwnPropertyNames||function(t){var n=[];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[n.length]=a);return n},Gd(e)};function j0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Gd(e),a=0;a<n.length;a++)n[a]!=="default"&&zc(t,e,n[a]);return Ix(t,e),t}function O0(e){return e&&e.__esModule?e:{default:e}}function D0(e,t,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(e):a?a.value:t.get(e)}function N0(e,t,n,a,r){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n}function A0(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function C0(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var a,r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");a=t[Symbol.asyncDispose]}if(a===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");a=t[Symbol.dispose],n&&(r=a)}if(typeof a!="function")throw new TypeError("Object not disposable.");r&&(a=function(){try{r.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:a,async:n})}else n&&e.stack.push({async:!0});return t}var Vx=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var a=new Error(n);return a.name="SuppressedError",a.error=e,a.suppressed=t,a};function R0(e){function t(i){e.error=e.hasError?new Vx(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var n,a=0;function r(){for(;n=e.stack.pop();)try{if(!n.async&&a===1)return a=0,e.stack.push(n),Promise.resolve().then(r);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return a|=2,Promise.resolve(i).then(r,function(s){return t(s),r()})}else a|=1}catch(s){t(s)}if(a===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return r()}function M0(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,a,r,i,s){return a?t?".jsx":".js":r&&(!i||!s)?n:r+i+"."+s.toLowerCase()+"js"}):e}const Gx={__extends:c0,__assign:ac,__rest:is,__decorate:u0,__param:d0,__esDecorate:f0,__runInitializers:h0,__propKey:m0,__setFunctionName:g0,__metadata:y0,__awaiter:se,__generator:v0,__createBinding:zc,__exportStar:p0,__values:rc,__read:dh,__spread:b0,__spreadArrays:_0,__spreadArray:w0,__await:Xi,__asyncGenerator:S0,__asyncDelegator:x0,__asyncValues:E0,__makeTemplateObject:T0,__importStar:j0,__importDefault:O0,__classPrivateFieldGet:D0,__classPrivateFieldSet:N0,__classPrivateFieldIn:A0,__addDisposableResource:C0,__disposeResources:R0,__rewriteRelativeImportExtension:M0},Kx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:C0,get __assign(){return ac},__asyncDelegator:x0,__asyncGenerator:S0,__asyncValues:E0,__await:Xi,__awaiter:se,__classPrivateFieldGet:D0,__classPrivateFieldIn:A0,__classPrivateFieldSet:N0,__createBinding:zc,__decorate:u0,__disposeResources:R0,__esDecorate:f0,__exportStar:p0,__extends:c0,__generator:v0,__importDefault:O0,__importStar:j0,__makeTemplateObject:T0,__metadata:y0,__param:d0,__propKey:m0,__read:dh,__rest:is,__rewriteRelativeImportExtension:M0,__runInitializers:h0,__setFunctionName:g0,__spread:b0,__spreadArray:w0,__spreadArrays:_0,__values:rc,default:Gx},Symbol.toStringTag,{value:"Module"})),Xx="modulepreload",Jx=function(e){return"/todo-note/"+e},yg={},ss=function(t,n,a){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.allSettled(n.map(o=>{if(o=Jx(o),o in yg)return;yg[o]=!0;const u=o.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Xx,u||(h.as="script"),h.crossOrigin="",h.href=o,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,d)=>{h.addEventListener("load",m),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})}))}function i(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return r.then(s=>{for(const l of s||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Qx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ss(async()=>{const{default:a}=await Promise.resolve().then(()=>Jr);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)};class fh extends Error{constructor(t,n="FunctionsError",a){super(t),this.name=n,this.context=a}}class vg extends fh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class pg extends fh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class bg extends fh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Kd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Kd||(Kd={}));class Px{constructor(t,{headers:n={},customFetch:a,region:r=Kd.Any}={}){this.url=t,this.headers=n,this.region=r,this.fetch=Qx(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return se(this,arguments,void 0,function*(n,a={}){var r;try{const{headers:i,method:s,body:l,signal:o}=a;let u={},{region:f}=a;f||(f=this.region);const h=new URL(`${this.url}/${n}`);f&&f!=="any"&&(u["x-region"]=f,h.searchParams.set("forceFunctionRegion",f));let m;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;const d=yield this.fetch(h.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:m,signal:o}).catch(v=>{throw v.name==="AbortError"?v:new vg(v)}),p=d.headers.get("x-relay-error");if(p&&p==="true")throw new pg(d);if(!d.ok)throw new bg(d);let b=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),x;return b==="application/json"?x=yield d.json():b==="application/octet-stream"||b==="application/pdf"?x=yield d.blob():b==="text/event-stream"?x=d:b==="multipart/form-data"?x=yield d.formData():x=yield d.text(),{data:x,error:null,response:d}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new vg(i)}:{data:null,error:i,response:i instanceof bg||i instanceof pg?i.context:void 0}}})}}var nn={};const ls=sy(Kx);var Wl={},eo={},to={},no={},ao={},Zx=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ji=Zx();const Fx=Ji.fetch,k0=Ji.fetch.bind(Ji),U0=Ji.Headers,Wx=Ji.Request,e1=Ji.Response,Jr=Object.freeze(Object.defineProperty({__proto__:null,Headers:U0,Request:Wx,Response:e1,default:k0,fetch:Fx},Symbol.toStringTag,{value:"Module"})),t1=sy(Jr);var ro={},_g;function z0(){if(_g)return ro;_g=1,Object.defineProperty(ro,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return ro.default=e,ro}var wg;function $0(){if(wg)return ao;wg=1,Object.defineProperty(ao,"__esModule",{value:!0});const e=ls,t=e.__importDefault(t1),n=e.__importDefault(z0());class a{constructor(i){var s,l;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(l=i.isMaybeSingle)!==null&&l!==void 0?l:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var f,h,m,d;let p=null,b=null,x=null,v=u.status,g=u.statusText;if(u.ok){if(this.method!=="HEAD"){const E=await u.text();E===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?b=E:b=JSON.parse(E))}const w=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),T=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");w&&T&&T.length>1&&(x=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(p={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,x=null,v=406,g="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const w=await u.text();try{p=JSON.parse(w),Array.isArray(p)&&u.status===404&&(b=[],p=null,v=200,g="OK")}catch{u.status===404&&w===""?(v=204,g="No Content"):p={message:w}}if(p&&this.isMaybeSingle&&(!((d=p==null?void 0:p.details)===null||d===void 0)&&d.includes("0 rows"))&&(p=null,v=200,g="OK"),p&&this.shouldThrowOnError)throw new n.default(p)}return{error:p,data:b,count:x,status:v,statusText:g}});return this.shouldThrowOnError||(o=o.catch(u=>{var f,h,m;return{error:{message:`${(f=u==null?void 0:u.name)!==null&&f!==void 0?f:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),o.then(i,s)}returns(){return this}overrideTypes(){return this}}return ao.default=a,ao}var Sg;function B0(){if(Sg)return no;Sg=1,Object.defineProperty(no,"__esModule",{value:!0});const t=ls.__importDefault($0());class n extends t.default{select(r){let i=!1;const s=(r??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:i=!0,nullsFirst:s,foreignTable:l,referencedTable:o=l}={}){const u=o?`${o}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${r}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:i,referencedTable:s=i}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${r}`),this}range(r,i,{foreignTable:s,referencedTable:l=s}={}){const o=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${r}`),this.url.searchParams.set(u,`${i-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:i=!1,settings:s=!1,buffers:l=!1,wal:o=!1,format:u="text"}={}){var f;const h=[r?"analyze":null,i?"verbose":null,s?"settings":null,l?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}}return no.default=n,no}var xg;function hh(){if(xg)return to;xg=1,Object.defineProperty(to,"__esModule",{value:!0});const t=ls.__importDefault(B0()),n=new RegExp("[,()]");class a extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const l=Array.from(new Set(s)).map(o=>typeof o=="string"&&n.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:l,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${f}.${s}`),this}match(i){return Object.entries(i).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(i,s,l){return this.url.searchParams.append(i,`not.${s}.${l}`),this}or(i,{foreignTable:s,referencedTable:l=s}={}){const o=l?`${l}.or`:"or";return this.url.searchParams.append(o,`(${i})`),this}filter(i,s,l){return this.url.searchParams.append(i,`${s}.${l}`),this}}return to.default=a,to}var Eg;function L0(){if(Eg)return eo;Eg=1,Object.defineProperty(eo,"__esModule",{value:!0});const t=ls.__importDefault(hh());class n{constructor(r,{headers:i={},schema:s,fetch:l}){this.url=r,this.headers=new Headers(i),this.schema=s,this.fetch=l}select(r,i){const{head:s=!1,count:l}=i??{},o=s?"HEAD":"GET";let u=!1;const f=(r??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",f),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:i,defaultToNull:s=!0}={}){var l;const o="POST";if(i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const u=r.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(u.length>0){const f=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(r,{onConflict:i,ignoreDuplicates:s=!1,count:l,defaultToNull:o=!0}={}){var u;const f="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const h=r.reduce((m,d)=>m.concat(Object.keys(d)),[]);if(h.length>0){const m=[...new Set(h)].map(d=>`"${d}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(r,{count:i}={}){var s;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:r}={}){var i;const s="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return eo.default=n,eo}var Tg;function n1(){if(Tg)return Wl;Tg=1,Object.defineProperty(Wl,"__esModule",{value:!0});const e=ls,t=e.__importDefault(L0()),n=e.__importDefault(hh());class a{constructor(i,{headers:s={},schema:l,fetch:o}={}){this.url=i,this.headers=new Headers(s),this.schemaName=l,this.fetch=o}from(i){const s=new URL(`${this.url}/${i}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new a(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,s={},{head:l=!1,get:o=!1,count:u}={}){var f;let h;const m=new URL(`${this.url}/rpc/${i}`);let d;l||o?(h=l?"HEAD":"GET",Object.entries(s).filter(([b,x])=>x!==void 0).map(([b,x])=>[b,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([b,x])=>{m.searchParams.append(b,x)})):(h="POST",d=s);const p=new Headers(this.headers);return u&&p.set("Prefer",`count=${u}`),new n.default({method:h,url:m,headers:p,schema:this.schemaName,body:d,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Wl.default=a,Wl}Object.defineProperty(nn,"__esModule",{value:!0});var H0=nn.PostgrestError=P0=nn.PostgrestBuilder=J0=nn.PostgrestTransformBuilder=K0=nn.PostgrestFilterBuilder=V0=nn.PostgrestQueryBuilder=Y0=nn.PostgrestClient=void 0;const os=ls,q0=os.__importDefault(n1());var Y0=nn.PostgrestClient=q0.default;const I0=os.__importDefault(L0());var V0=nn.PostgrestQueryBuilder=I0.default;const G0=os.__importDefault(hh());var K0=nn.PostgrestFilterBuilder=G0.default;const X0=os.__importDefault(B0());var J0=nn.PostgrestTransformBuilder=X0.default;const Q0=os.__importDefault($0());var P0=nn.PostgrestBuilder=Q0.default;const Z0=os.__importDefault(z0());H0=nn.PostgrestError=Z0.default;var F0=nn.default={PostgrestClient:q0.default,PostgrestQueryBuilder:I0.default,PostgrestFilterBuilder:G0.default,PostgrestTransformBuilder:X0.default,PostgrestBuilder:Q0.default,PostgrestError:Z0.default};const a1=G_({__proto__:null,get PostgrestBuilder(){return P0},get PostgrestClient(){return Y0},get PostgrestError(){return H0},get PostgrestFilterBuilder(){return K0},get PostgrestQueryBuilder(){return V0},get PostgrestTransformBuilder(){return J0},default:F0},[nn]),{PostgrestClient:r1,PostgrestQueryBuilder:YO,PostgrestFilterBuilder:IO,PostgrestTransformBuilder:VO,PostgrestBuilder:GO,PostgrestError:KO}=F0||a1;class i1{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const a=n.node,r=parseInt(a.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const a=this.getWebSocketConstructor();return new a(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const s1="2.78.0",l1=`realtime-js/${s1}`,o1="1.0.0",Xd=1e4,c1=1e3,u1=100;var Is;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Is||(Is={}));var kt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(kt||(kt={}));var Qn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Qn||(Qn={}));var Jd;(function(e){e.websocket="websocket"})(Jd||(Jd={}));var Dr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Dr||(Dr={}));class d1{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,n,a)}_decodeBroadcast(t,n,a){const r=n.getUint8(1),i=n.getUint8(2);let s=this.HEADER_LENGTH+2;const l=a.decode(t.slice(s,s+r));s=s+r;const o=a.decode(t.slice(s,s+i));s=s+i;const u=JSON.parse(a.decode(t.slice(s,t.byteLength)));return{ref:null,topic:l,event:o,payload:u}}}class W0{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var lt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(lt||(lt={}));const jg=(e,t,n={})=>{var a;const r=(a=n.skipTypes)!==null&&a!==void 0?a:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=f1(s,e,t,r),i),{}):{}},f1=(e,t,n,a)=>{const r=t.find(l=>l.name===e),i=r==null?void 0:r.type,s=n[e];return i&&!a.includes(i)?eb(i,s):Qd(s)},eb=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return y1(t,n)}switch(e){case lt.bool:return h1(t);case lt.float4:case lt.float8:case lt.int2:case lt.int4:case lt.int8:case lt.numeric:case lt.oid:return m1(t);case lt.json:case lt.jsonb:return g1(t);case lt.timestamp:return v1(t);case lt.abstime:case lt.date:case lt.daterange:case lt.int4range:case lt.int8range:case lt.money:case lt.reltime:case lt.text:case lt.time:case lt.timestamptz:case lt.timetz:case lt.tsrange:case lt.tstzrange:return Qd(t);default:return Qd(t)}},Qd=e=>e,h1=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},m1=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},g1=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},y1=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,a=e[n];if(e[0]==="{"&&a==="}"){let i;const s=e.slice(1,n);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(l=>eb(t,l))}return e},v1=e=>typeof e=="string"?e.replace(" ","T"):e,tb=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ku{constructor(t,n,a={},r=Xd){this.channel=t,this.event=n,this.payload=a,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var a;return this._hasReceived(t)&&n((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Og;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Og||(Og={}));class Vs{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},r=>{const{onJoin:i,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vs.syncState(this.state,r,i,s),this.pendingDiffs.forEach(o=>{this.state=Vs.syncDiff(this.state,o,i,s)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},r=>{const{onJoin:i,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Vs.syncDiff(this.state,r,i,s),l())}),this.onJoin((r,i,s)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:s})}),this.onLeave((r,i,s)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,a,r){const i=this.cloneDeep(t),s=this.transformState(n),l={},o={};return this.map(i,(u,f)=>{s[u]||(o[u]=f)}),this.map(s,(u,f)=>{const h=i[u];if(h){const m=f.map(x=>x.presence_ref),d=h.map(x=>x.presence_ref),p=f.filter(x=>d.indexOf(x.presence_ref)<0),b=h.filter(x=>m.indexOf(x.presence_ref)<0);p.length>0&&(l[u]=p),b.length>0&&(o[u]=b)}else l[u]=f}),this.syncDiff(i,{joins:l,leaves:o},a,r)}static syncDiff(t,n,a,r){const{joins:i,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return a||(a=()=>{}),r||(r=()=>{}),this.map(i,(l,o)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(o),f.length>0){const h=t[l].map(d=>d.presence_ref),m=f.filter(d=>h.indexOf(d.presence_ref)<0);t[l].unshift(...m)}a(l,f,o)}),this.map(s,(l,o)=>{let u=t[l];if(!u)return;const f=o.map(h=>h.presence_ref);u=u.filter(h=>f.indexOf(h.presence_ref)<0),t[l]=u,r(l,u,o),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(a=>n(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,a)=>{const r=t[a];return"metas"in r?n[a]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[a]=r,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Dg||(Dg={}));var Gs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Gs||(Gs={}));var ma;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ma||(ma={}));class mh{constructor(t,n={config:{}},a){var r,i;if(this.topic=t,this.params=n,this.socket=a,this.bindings={},this.state=kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ku(this,Qn.join,this.params,this.timeout),this.rejoinTimer=new W0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qn.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new Vs(this),this.broadcastEndpointURL=tb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var a,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==kt.closed){const{config:{broadcast:s,presence:l,private:o}}=this.params,u=(r=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(d=>d.filter))!==null&&r!==void 0?r:[],f=!!this.bindings[Gs.PRESENCE]&&this.bindings[Gs.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:s,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:u,private:o};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(d=>t==null?void 0:t(ma.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(ma.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var p;if(this.socket.setAuth(),d===void 0){t==null||t(ma.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,x=(p=b==null?void 0:b.length)!==null&&p!==void 0?p:0,v=[];for(let g=0;g<x;g++){const y=b[g],{filter:{event:w,schema:T,table:E,filter:S}}=y,j=d&&d[g];if(j&&j.event===w&&j.schema===T&&j.table===E&&j.filter===S)v.push(Object.assign(Object.assign({},y),{id:j.id}));else{this.unsubscribe(),this.state=kt.errored,t==null||t(ma.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(ma.SUBSCRIBED);return}}).receive("error",d=>{this.state=kt.errored,t==null||t(ma.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ma.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,a){return this.state===kt.joined&&t===Gs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,a)}async httpSend(t,n,a={}){var r;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(r=a.timeout)!==null&&r!==void 0?r:this.timeout);if(l.status===202)return{success:!0};let o=l.statusText;try{const u=await l.json();o=u.error||u.message||o}catch{}return Promise.reject(new Error(o))}async send(t,n={}){var a,r;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=t,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,l,o;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((o=(l=(s=this.params)===null||s===void 0?void 0:s.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=kt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qn.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(r=>{a=new ku(this,Qn.leave,{},t),a.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=kt.closed,this.bindings={}}async _fetchWithTimeout(t,n,a){const r=new AbortController,i=setTimeout(()=>r.abort(),a),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(i),s}_push(t,n,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ku(this,t,n,a);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>u1){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,a){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,a){var r,i;const s=t.toLocaleLowerCase(),{close:l,error:o,leave:u,join:f}=Qn;if(a&&[l,o,u,f].indexOf(s)>=0&&a!==this._joinRef())return;let m=this._onMessage(s,n,a);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(d=>{var p,b,x;return((p=d.filter)===null||p===void 0?void 0:p.event)==="*"||((x=(b=d.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(d=>d.callback(m,a)):(i=this.bindings[s])===null||i===void 0||i.filter(d=>{var p,b,x,v,g,y;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in d){const w=d.id,T=(p=d.filter)===null||p===void 0?void 0:p.event;return w&&((b=n.ids)===null||b===void 0?void 0:b.includes(w))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const w=(g=(v=d==null?void 0:d.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return w==="*"||w===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return d.type.toLocaleLowerCase()===s}).map(d=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:b,table:x,commit_timestamp:v,type:g,errors:y}=p;m=Object.assign(Object.assign({},{schema:b,table:x,commit_timestamp:v,eventType:g,new:{},old:{},errors:y}),this._getPayloadRecords(p))}d.callback(m,a)})}_isClosed(){return this.state===kt.closed}_isJoined(){return this.state===kt.joined}_isJoining(){return this.state===kt.joining}_isLeaving(){return this.state===kt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,a){const r=t.toLocaleLowerCase(),i={type:r,filter:n,callback:a};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(t,n){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&mh.isEqual(r.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const a in t)if(t[a]!==n[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Qn.close,{},t)}_onError(t){this._on(Qn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=jg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=jg(t.columns,t.old_record)),n}}const Uu=()=>{},io={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},p1=[1e3,2e3,5e3,1e4],b1=1e4,_1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class w1{constructor(t,n){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xd,this.transport=null,this.heartbeatIntervalMs=io.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Uu,this.ref=0,this.reconnectTimer=null,this.logger=Uu,this.conn=null,this.sendBuffer=[],this.serializer=new d1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...s)=>ss(async()=>{const{default:l}=await Promise.resolve().then(()=>Jr);return{default:l}},void 0).then(({default:l})=>l(...s)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...s)=>i(...s)},!(!((a=n==null?void 0:n.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Jd.websocket}`,this.httpEndpoint=tb(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=i1.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:o1}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,a){this.logger(t,n,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Is.connecting:return Dr.Connecting;case Is.open:return Dr.Open;case Is.closing:return Dr.Closing;default:return Dr.Closed}}isConnected(){return this.connectionState()===Dr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const a=`realtime:${t}`,r=this.getChannels().find(i=>i.topic===a);if(r)return r;{const i=new mh(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:a,payload:r,ref:i}=t,s=()=>{this.encode(t,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${n} ${a} (${i})`,r),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(c1,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},io.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:r,payload:i,ref:s}=n,l=s?`(${s})`:"",o=i.status||"";this.log("receive",`${o} ${a} ${r} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(a)).forEach(u=>u._trigger(r,i,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Qn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const a=t.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${t}${a}${r}`}_workerObjectUrl(t){let n;if(t)n=t;else{const a=new Blob([_1],{type:"application/javascript"});n=URL.createObjectURL(a)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const r={access_token:n,version:l1};n&&a.updateJoinPayload(r),a.joinedOnce&&a._isJoined()&&a._push(Qn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(n)}catch(r){this.log("error",`error in ${t} callback`,r)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new W0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},io.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,a,r,i,s,l,o,u,f;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(a=t==null?void 0:t.timeout)!==null&&a!==void 0?a:Xd,this.heartbeatIntervalMs=(r=t==null?void 0:t.heartbeatIntervalMs)!==null&&r!==void 0?r:io.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Uu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=t==null?void 0:t.reconnectAfterMs)!==null&&o!==void 0?o:h=>p1[h-1]||b1,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class gh extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function yt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class S1 extends gh{constructor(t,n,a){super(t),this.name="StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pd extends gh{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const yh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ss(async()=>{const{default:a}=await Promise.resolve().then(()=>Jr);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)},x1=()=>se(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ss(()=>Promise.resolve().then(()=>Jr),void 0)).Response:Response}),Zd=e=>{if(Array.isArray(e))return e.map(n=>Zd(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,a])=>{const r=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[r]=Zd(a)}),t},E1=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},zu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},T1=(e,t,n)=>se(void 0,void 0,void 0,function*(){const a=yield x1();e instanceof a&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const i=e.status||500,s=(r==null?void 0:r.statusCode)||i+"";t(new S1(zu(r),i,s))}).catch(r=>{t(new Pd(zu(r),r))}):t(new Pd(zu(e),e))}),j1=(e,t,n,a)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!a?r:(E1(a)?(r.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r.body=JSON.stringify(a)):r.body=a,t!=null&&t.duplex&&(r.duplex=t.duplex),Object.assign(Object.assign({},r),n))};function jl(e,t,n,a,r,i){return se(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(n,j1(t,a,r,i)).then(o=>{if(!o.ok)throw o;return a!=null&&a.noResolveJson?o:o.json()}).then(o=>s(o)).catch(o=>T1(o,l,a))})})}function cl(e,t,n,a){return se(this,void 0,void 0,function*(){return jl(e,"GET",t,n,a)})}function Xn(e,t,n,a,r){return se(this,void 0,void 0,function*(){return jl(e,"POST",t,a,r,n)})}function Fd(e,t,n,a,r){return se(this,void 0,void 0,function*(){return jl(e,"PUT",t,a,r,n)})}function O1(e,t,n,a){return se(this,void 0,void 0,function*(){return jl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),a)})}function vh(e,t,n,a,r){return se(this,void 0,void 0,function*(){return jl(e,"DELETE",t,a,r,n)})}class D1{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return se(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yt(t))return{data:null,error:t};throw t}})}}var nb;class N1{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[nb]="BlobDownloadBuilder",this.promise=null}asStream(){return new D1(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return se(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yt(t))return{data:null,error:t};throw t}})}}nb=Symbol.toStringTag;const A1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ng={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class C1{constructor(t,n={},a,r){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=a,this.fetch=yh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,a,r){return se(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},Ng),r);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const o=s.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o))):(i=a,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,o&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),h=yield(t=="PUT"?Fd:Xn)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:l},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(yt(i))return{data:null,error:i};throw i}})}upload(t,n,a){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,a)})}uploadToSignedUrl(t,n,a,r){return se(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",n);try{let o;const u=Object.assign({upsert:Ng.upsert},r),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&a instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),o.append("",a)):typeof FormData<"u"&&a instanceof FormData?(o=a,o.append("cacheControl",u.cacheControl)):(o=a,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const h=yield Fd(this.fetch,l.toString(),o,{headers:f});return{data:{path:i,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(yt(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(t,n){return se(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const r=Object.assign({},this.headers);n!=null&&n.upsert&&(r["x-upsert"]="true");const i=yield Xn(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:r}),s=new URL(this.url+i.url),l=s.searchParams.get("token");if(!l)throw new gh("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:l},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}update(t,n,a){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,a)})}move(t,n,a){return se(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}copy(t,n,a){return se(this,void 0,void 0,function*(){try{return{data:{path:(yield Xn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}createSignedUrl(t,n,a){return se(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),i=yield Xn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const s=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}createSignedUrls(t,n,a){return se(this,void 0,void 0,function*(){try{const r=yield Xn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:r.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}download(t,n){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=i?`?${i}`:"",l=this._getFinalPath(t),o=()=>cl(this.fetch,`${this.url}/${r}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new N1(o,this.shouldThrowOnError)}info(t){return se(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const a=yield cl(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Zd(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}exists(t){return se(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield O1(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a)&&a instanceof Pd){const r=a.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,n){const a=this._getFinalPath(t),r=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&r.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&r.push(o);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${u}`)}}}remove(t){return se(this,void 0,void 0,function*(){try{return{data:yield vh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}list(t,n,a){return se(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},A1),n),{prefix:t||""});return{data:yield Xn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},a),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}listV2(t,n){return se(this,void 0,void 0,function*(){try{const a=Object.assign({},t);return{data:yield Xn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const ab="2.78.0",rb={"X-Client-Info":`storage-js/${ab}`};class R1{constructor(t,n={},a,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},rb),n),this.fetch=yh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return se(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield cl(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}getBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield cl(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}createBucket(t){return se(this,arguments,void 0,function*(n,a={public:!1}){try{return{data:yield Xn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return se(this,void 0,void 0,function*(){try{return{data:yield Fd(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}emptyBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield vh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class M1{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},rb),n),this.fetch=yh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield Xn(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}listBuckets(t){return se(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const a=n.toString(),r=a?`${this.url}/bucket?${a}`:`${this.url}/bucket`;return{data:yield cl(this.fetch,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield vh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}}const ph={"X-Client-Info":`storage-js/${ab}`,"Content-Type":"application/json"};class ib extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function _n(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class $u extends ib{constructor(t,n,a){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class k1 extends ib{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var Ag;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ag||(Ag={}));const bh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ss(async()=>{const{default:a}=await Promise.resolve().then(()=>Jr);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)},U1=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Cg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),z1=(e,t,n)=>se(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const l=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||r+"";t(new $u(Cg(s),r,l))}).catch(()=>{const s=r+"",l=i.statusText||`HTTP ${r} error`;t(new $u(l,r,s))});else{const s=r+"",l=i.statusText||`HTTP ${r} error`;t(new $u(l,r,s))}}else t(new k1(Cg(e),e))}),$1=(e,t,n,a)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return a?(U1(a)?(r.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r.body=JSON.stringify(a)):r.body=a,Object.assign(Object.assign({},r),n)):r};function B1(e,t,n,a,r,i){return se(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(n,$1(t,a,r,i)).then(o=>{if(!o.ok)throw o;if(a!=null&&a.noResolveJson)return o;const u=o.headers.get("content-type");return!u||!u.includes("application/json")?{}:o.json()}).then(o=>s(o)).catch(o=>z1(o,l,a))})})}function wn(e,t,n,a,r){return se(this,void 0,void 0,function*(){return B1(e,"POST",t,a,r,n)})}class L1{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ph),n),this.fetch=bh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return se(this,void 0,void 0,function*(){try{return{data:(yield wn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}getIndex(t,n){return se(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_n(a))return{data:null,error:a};throw a}})}listIndexes(t){return se(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return se(this,void 0,void 0,function*(){try{return{data:(yield wn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_n(a))return{data:null,error:a};throw a}})}}class H1{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ph),n),this.fetch=bh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return se(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield wn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}getVectors(t){return se(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}listVectors(t){return se(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield wn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}queryVectors(t){return se(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}deleteVectors(t){return se(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield wn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}}class q1{constructor(t,n={},a){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ph),n),this.fetch=bh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return se(this,void 0,void 0,function*(){try{return{data:(yield wn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}getBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}listBuckets(){return se(this,arguments,void 0,function*(t={}){try{return{data:yield wn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}deleteBucket(t){return se(this,void 0,void 0,function*(){try{return{data:(yield wn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_n(n))return{data:null,error:n};throw n}})}}class Y1 extends q1{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new I1(this.url,this.headers,t,this.fetch)}}class I1 extends L1{constructor(t,n,a,r){super(t,n,r),this.vectorBucketName=a}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return se(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return se(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return se(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return se(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new V1(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class V1 extends H1{constructor(t,n,a,r,i){super(t,n,i),this.vectorBucketName=a,this.indexName=r}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return se(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return se(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return se(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return se(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return se(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class G1 extends R1{constructor(t,n={},a,r){super(t,n,a,r)}from(t){return new C1(this.url,this.headers,t,this.fetch)}get vectors(){return new Y1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new M1(this.url+"/iceberg",this.headers,this.fetch)}}const K1="2.78.0";let Os="";typeof Deno<"u"?Os="deno":typeof document<"u"?Os="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Os="react-native":Os="node";const X1={"X-Client-Info":`supabase-js-${Os}/${K1}`},J1={headers:X1},Q1={schema:"public"},P1={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Z1={},F1=e=>{let t;return e?t=e:typeof fetch>"u"?t=k0:t=fetch,(...n)=>t(...n)},W1=()=>typeof Headers>"u"?U0:Headers,eE=(e,t,n)=>{const a=F1(n),r=W1();return async(i,s)=>{var l;const o=(l=await t())!==null&&l!==void 0?l:e;let u=new r(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${o}`),a(i,Object.assign(Object.assign({},s),{headers:u}))}};function tE(e){return e.endsWith("/")?e:e+"/"}function nE(e,t){var n,a;const{db:r,auth:i,realtime:s,global:l}=e,{db:o,auth:u,realtime:f,global:h}=t,m={db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},f),s),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(a=l==null?void 0:l.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function aE(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tE(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const sb="2.78.0",fi=30*1e3,Wd=3,Bu=Wd*fi,rE="http://localhost:9999",iE="supabase.auth.token",sE={"X-Client-Info":`gotrue-js/${sb}`},ef="X-Supabase-Api-Version",lb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oE=10*60*1e3;class ul extends Error{constructor(t,n,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=a}}function ue(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class cE extends ul{constructor(t,n,a){super(t,n,a),this.name="AuthApiError",this.status=n,this.code=a}}function uE(e){return ue(e)&&e.name==="AuthApiError"}class Nr extends ul{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class fr extends ul{constructor(t,n,a,r){super(t,a,r),this.name=n,this.status=a}}class Vn extends fr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function dE(e){return ue(e)&&e.name==="AuthSessionMissingError"}class ri extends fr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class so extends fr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class lo extends fr{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fE(e){return ue(e)&&e.name==="AuthImplicitGrantRedirectError"}class Rg extends fr{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tf extends fr{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Lu(e){return ue(e)&&e.name==="AuthRetryableFetchError"}class Mg extends fr{constructor(t,n,a){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=a}}class nf extends fr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ic="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kg=` 	
\r=`.split(""),hE=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<kg.length;t+=1)e[kg[t].charCodeAt(0)]=-2;for(let t=0;t<ic.length;t+=1)e[ic[t].charCodeAt(0)]=t;return e})();function Ug(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;n(ic[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;n(ic[a]),t.queuedBits-=6}}function ob(e,t,n){const a=hE[e];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function zg(e){const t=[],n=s=>{t.push(String.fromCodePoint(s))},a={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=s=>{yE(s,a,n)};for(let s=0;s<e.length;s+=1)ob(e.charCodeAt(s),r,i);return t.join("")}function mE(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function gE(e,t){for(let n=0;n<e.length;n+=1){let a=e.charCodeAt(n);if(a>55295&&a<=56319){const r=(a-55296)*1024&65535;a=(e.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}mE(a,t)}}function yE(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let a=1;a<6;a+=1)if(!(e>>7-a&1)){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function ki(e){const t=[],n={queue:0,queuedBits:0},a=r=>{t.push(r)};for(let r=0;r<e.length;r+=1)ob(e.charCodeAt(r),n,a);return new Uint8Array(t)}function vE(e){const t=[];return gE(e,n=>t.push(n)),new Uint8Array(t)}function Cr(e){const t=[],n={queue:0,queuedBits:0},a=r=>{t.push(r)};return e.forEach(r=>Ug(r,n,a)),Ug(null,n,a),t.join("")}function pE(e){return Math.round(Date.now()/1e3)+e}function bE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const en=()=>typeof window<"u"&&typeof document<"u",wr={tested:!1,writable:!1},cb=()=>{if(!en())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wr.tested)return wr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),wr.tested=!0,wr.writable=!0}catch{wr.tested=!0,wr.writable=!1}return wr.writable};function _E(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,i)=>{t[i]=r})}catch{}return n.searchParams.forEach((a,r)=>{t[r]=a}),t}const ub=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ss(async()=>{const{default:a}=await Promise.resolve().then(()=>Jr);return{default:a}},void 0).then(({default:a})=>a(...n)):t=fetch,(...n)=>t(...n)},wE=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",hi=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Sr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ma=async(e,t)=>{await e.removeItem(t)};class $c{constructor(){this.promise=new $c.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}$c.promiseConstructor=Promise;function Hu(e){const t=e.split(".");if(t.length!==3)throw new nf("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!lE.test(t[a]))throw new nf("JWT not in base64url format");return{header:JSON.parse(zg(t[0])),payload:JSON.parse(zg(t[1])),signature:ki(t[2]),raw:{header:t[0],payload:t[1]}}}async function SE(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function xE(e,t){return new Promise((a,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){a(s);return}}catch(s){if(!t(i,s)){r(s);return}}})()})}function EE(e){return("0"+e.toString(16)).substr(-2)}function TE(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=n.length;let r="";for(let i=0;i<56;i++)r+=n.charAt(Math.floor(Math.random()*a));return r}return crypto.getRandomValues(t),Array.from(t,EE).join("")}async function jE(e){const n=new TextEncoder().encode(e),a=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(a);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function OE(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await jE(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ii(e,t,n=!1){const a=TE();let r=a;n&&(r+="/PASSWORD_RECOVERY"),await hi(e,`${t}-code-verifier`,r);const i=await OE(a);return[i,a===i?"plain":"s256"]}const DE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function NE(e){const t=e.headers.get(ef);if(!t||!t.match(DE))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function AE(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function CE(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const RE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function si(e){if(!RE.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qu(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ME(e,t){return new Proxy(e,{get:(n,a,r)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const i=a.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,a,r)}return!t.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,a,r)}})}function $g(e){return JSON.parse(JSON.stringify(e))}const Or=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),kE=[502,503,504];async function Bg(e){var t;if(!wE(e))throw new tf(Or(e),0);if(kE.includes(e.status))throw new tf(Or(e),e.status);let n;try{n=await e.json()}catch(i){throw new Nr(Or(i),i)}let a;const r=NE(e);if(r&&r.getTime()>=lb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?a=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(a=n.error_code),a){if(a==="weak_password")throw new Mg(Or(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new Vn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new Mg(Or(n),e.status,n.weak_password.reasons);throw new cE(Or(n),e.status||500,a)}const UE=(e,t,n,a)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(a),Object.assign(Object.assign({},r),n))};async function ge(e,t,n,a){var r;const i=Object.assign({},a==null?void 0:a.headers);i[ef]||(i[ef]=lb["2024-01-01"].name),a!=null&&a.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const s=(r=a==null?void 0:a.query)!==null&&r!==void 0?r:{};a!=null&&a.redirectTo&&(s.redirect_to=a.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",o=await zE(e,t,n+l,{headers:i,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(o):{data:Object.assign({},o),error:null}}async function zE(e,t,n,a,r,i){const s=UE(t,a,r,i);let l;try{l=await e(n,Object.assign({},s))}catch(o){throw console.error(o),new tf(Or(o),0)}if(l.ok||await Bg(l),a!=null&&a.noResolveJson)return l;try{return await l.json()}catch(o){await Bg(o)}}function Gn(e){var t;let n=null;LE(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=pE(e.expires_in)));const a=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:a},error:null}}function Lg(e){const t=Gn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ia(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function $E(e){return{data:e,error:null}}function BE(e){const{action_link:t,email_otp:n,hashed_token:a,redirect_to:r,verification_type:i}=e,s=is(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:a,redirect_to:r,verification_type:i},o=Object.assign({},s);return{data:{properties:l,user:o},error:null}}function Hg(e){return e}function LE(e){return e.access_token&&e.refresh_token&&e.expires_in}const Yu=["global","local","others"];class HE{constructor({url:t="",headers:n={},fetch:a}){this.url=t,this.headers=n,this.fetch=ub(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Yu[0]){if(Yu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Yu.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(ue(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,n={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ia})}catch(a){if(ue(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:n}=t,a=is(t,["options"]),r=Object.assign(Object.assign({},a),n);return"newEmail"in a&&(r.new_email=a==null?void 0:a.newEmail,delete r.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:BE,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ia})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,a,r,i,s,l,o;try{const u={nextPage:null,lastPage:0,total:0},f=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(i=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Hg});if(f.error)throw f.error;const h=await f.json(),m=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,d=(o=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return d.length>0&&(d.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);u[`${x}Page`]=b}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ue(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){si(t);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ia})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){si(t);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ia})}catch(a){if(ue(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,n=!1){si(t);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ia})}catch(a){if(ue(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){si(t.userId);try{const{data:n,error:a}=await ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:a}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _deleteFactor(t){si(t.userId),si(t.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,a,r,i,s,l,o;try{const u={nextPage:null,lastPage:0,total:0},f=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(i=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Hg});if(f.error)throw f.error;const h=await f.json(),m=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,d=(o=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return d.length>0&&(d.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);u[`${x}Page`]=b}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ue(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(ue(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(t){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}}function qg(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const li={debug:!!(globalThis&&cb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class db extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class qE extends db{}async function YE(e,t,n){li.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),li.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async r=>{if(r){li.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{li.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(t===0)throw li.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new qE(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(li.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function IE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function fb(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function VE(e){return parseInt(e,16)}function GE(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}function KE(e){var t;const{chainId:n,domain:a,expirationTime:r,issuedAt:i=new Date,nonce:s,notBefore:l,requestId:o,resources:u,scheme:f,uri:h,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const d=fb(e.address),p=f?`${f}://${a}`:a,b=e.statement?`${e.statement}
`:"",x=`${p} wants you to sign in with your Ethereum account:
${d}

${b}`;let v=`URI: ${h}
Version: ${m}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(r&&(v+=`
Expiration Time: ${r.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),o&&(v+=`
Request ID: ${o}`),u){let g=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);g+=`
- ${y}`}v+=g}return`${x}
${v}`}class Dt extends Error{constructor({message:t,code:n,cause:a,name:r}){var i;super(t,{cause:a}),this.__isWebAuthnError=!0,this.name=(i=r??(a instanceof Error?a.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class sc extends Dt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function XE({error:e,options:t}){var n,a,r;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Dt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Dt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Dt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Dt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Dt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Dt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Dt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Dt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(hb(s)){if(i.rp.id!==s)return new Dt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Dt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Dt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function JE({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Dt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Dt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const a=window.location.hostname;if(hb(a)){if(n.rpId!==a)return new Dt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Dt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class QE{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const PE=new QE;function ZE(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:a}=e,r=is(e,["challenge","user","excludeCredentials"]),i=ki(t).buffer,s=Object.assign(Object.assign({},n),{id:ki(n.id).buffer}),l=Object.assign(Object.assign({},r),{challenge:i,user:s});if(a&&a.length>0){l.excludeCredentials=new Array(a.length);for(let o=0;o<a.length;o++){const u=a[o];l.excludeCredentials[o]=Object.assign(Object.assign({},u),{id:ki(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function FE(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,a=is(e,["challenge","allowCredentials"]),r=ki(t).buffer,i=Object.assign(Object.assign({},a),{challenge:r});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const l=n[s];i.allowCredentials[s]=Object.assign(Object.assign({},l),{id:ki(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function WE(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Cr(new Uint8Array(e.response.attestationObject)),clientDataJSON:Cr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function eT(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,a=e.getClientExtensionResults(),r=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Cr(new Uint8Array(r.authenticatorData)),clientDataJSON:Cr(new Uint8Array(r.clientDataJSON)),signature:Cr(new Uint8Array(r.signature)),userHandle:r.userHandle?Cr(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function hb(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Yg(){var e,t;return!!(en()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function tT(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sc("Browser returned unexpected credential type",t)}:{data:null,error:new sc("Empty credential response",t)}}catch(t){return{data:null,error:XE({error:t,options:e})}}}async function nT(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sc("Browser returned unexpected credential type",t)}:{data:null,error:new sc("Empty credential response",t)}}catch(t){return{data:null,error:JE({error:t,options:e})}}}const aT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},rT={userVerification:"preferred",hints:["security-key"]};function lc(...e){const t=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),a={};for(const r of e)if(r)for(const i in r){const s=r[i];if(s!==void 0)if(Array.isArray(s))a[i]=s;else if(n(s))a[i]=s;else if(t(s)){const l=a[i];t(l)?a[i]=lc(l,s):a[i]=lc(s)}else a[i]=s}return a}function iT(e,t){return lc(aT,e,t||{})}function sT(e,t){return lc(rT,e,t||{})}class lT{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:a,signal:r},i){try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!s)return{data:null,error:l};const o=r??PE.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${a}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=iT(s.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:h}=await tT({publicKey:u,signal:o});return f?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}case"request":{const u=sT(s.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:h}=await nT(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:o}));return f?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}}}catch(s){return ue(s)?{data:null,error:s}:{data:null,error:new Nr("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:n,webauthn:a}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:a})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:r}},i){if(!n)return{data:null,error:new ul("rpId is required for WebAuthn authentication")};try{if(!Yg())return{data:null,error:new Nr("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:a},signal:r},{request:i});if(!s)return{data:null,error:l};const{webauthn:o}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:o.type,rpId:n,rpOrigins:a,credential_response:o.credential_response}})}catch(s){return ue(s)?{data:null,error:s}:{data:null,error:new Nr("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:r},i){if(!n)return{data:null,error:new ul("rpId is required for WebAuthn registration")};try{if(!Yg())return{data:null,error:new Nr("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(f=>{var h;return(h=f.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:l};const{data:o,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:a},signal:r},{create:i});return o?this._verify({factorId:s.id,challengeId:o.challengeId,webauthn:{rpId:n,rpOrigins:a,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:u}}catch(s){return ue(s)?{data:null,error:s}:{data:null,error:new Nr("Unexpected error in register",s)}}}}IE();const oT={url:rE,storageKey:iE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ig(e,t,n){return await n()}const oi={};class dl{get jwks(){var t,n;return(n=(t=oi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){oi[this.storageKey]=Object.assign(Object.assign({},oi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=oi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){oi[this.storageKey]=Object.assign(Object.assign({},oi[this.storageKey]),{cachedAt:t})}constructor(t){var n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dl.nextInstanceID,dl.nextInstanceID+=1,this.instanceID>0&&en()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},oT),t);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new HE({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=ub(r.fetch),this.lock=r.lock||Ig,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:en()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=YE:this.lock=Ig,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new lT(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:cb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qg(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=qg(this.memoryStorage)),en()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${sb}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=_E(window.location.href);let a="none";if(this._isImplicitGrantCallback(n)?a="implicit":await this._isPKCECallback(n)&&(a="pkce"),en()&&this.detectSessionInUrl&&a!=="none"){const{data:r,error:i}=await this._getSessionFromURL(n,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),fE(i)){const o=(t=i.details)===null||t===void 0?void 0:t.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",s,"redirect type",l),await this._saveSession(s),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ue(n)?{error:n}:{error:new Nr("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,a,r;try{const i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:Gn}),{data:s,error:l}=i;if(l||!s)return{data:{user:null,session:null},error:l};const o=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,a,r;try{let i;if("email"in t){const{email:f,password:h,options:m}=t;let d=null,p=null;this.flowType==="pkce"&&([d,p]=await ii(this.storage,this.storageKey)),i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:f,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:d,code_challenge_method:p},xform:Gn})}else if("phone"in t){const{phone:f,password:h,options:m}=t;i=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:h,data:(a=m==null?void 0:m.data)!==null&&a!==void 0?a:{},channel:(r=m==null?void 0:m.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Gn})}else throw new so("You must provide either an email or phone number and a password");const{data:s,error:l}=i;if(l||!s)return{data:{user:null,session:null},error:l};const o=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:s,options:l}=t;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Lg})}else if("phone"in t){const{phone:i,password:s,options:l}=t;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Lg})}else throw new so("You must provide either an email or phone number and a password");const{data:a,error:r}=n;return r?{data:{user:null,session:null},error:r}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new ri}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:r})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,a,r,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,a,r,i,s,l,o,u,f,h,m;let d,p;if("message"in t)d=t.message,p=t.signature;else{const{chain:b,wallet:x,statement:v,options:g}=t;let y;if(en())if(typeof x=="object")y=x;else{const D=window;if("ethereum"in D&&typeof D.ethereum=="object"&&"request"in D.ethereum&&typeof D.ethereum.request=="function")y=D.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=x}const w=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),T=await y.request({method:"eth_requestAccounts"}).then(D=>D).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=fb(T[0]);let S=(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!S){const D=await y.request({method:"eth_chainId"});S=VE(D)}const j={domain:w.host,address:E,statement:v,uri:w.href,version:"1",chainId:S,nonce:(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(s=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=g==null?void 0:g.signInWithEthereum)===null||f===void 0?void 0:f.resources};d=KE(j),p=await y.request({method:"personal_sign",params:[GE(d),E]})}try{const{data:b,error:x}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:d,signature:p},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Gn});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new ri}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(ue(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(t){var n,a,r,i,s,l,o,u,f,h,m,d;let p,b;if("message"in t)p=t.message,b=t.signature;else{const{chain:x,wallet:v,statement:g,options:y}=t;let w;if(en())if(typeof v=="object")w=v;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))w=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const T=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const E=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),g?{statement:g}:null));let S;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")S=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)S=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),b=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${T.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(r=(a=y==null?void 0:y.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((s=y==null?void 0:y.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(f=y==null?void 0:y.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const E=await w.signMessage(new TextEncoder().encode(p),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=E}}try{const{data:x,error:v}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Cr(b)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(d=t.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:Gn});if(v)throw v;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new ri}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:v})}catch(x){if(ue(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await Sr(this.storage,`${this.storageKey}-code-verifier`),[a,r]=(n??"").split("/");try{const{data:i,error:s}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:Gn});if(await Ma(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ri}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:s})}catch(i){if(ue(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:a,token:r,access_token:i,nonce:s}=t,l=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:r,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Gn}),{data:o,error:u}=l;return u?{data:{user:null,session:null},error:u}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new ri}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:u})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,a,r,i,s;try{if("email"in t){const{email:l,options:o}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await ii(this.storage,this.storageKey));const{error:h}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(a=o==null?void 0:o.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:o}=t,{data:u,error:f}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=o==null?void 0:o.data)!==null&&r!==void 0?r:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(s=o==null?void 0:o.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new so("You must provide either an email or phone number.")}catch(l){if(ue(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,a;try{let r,i;"options"in t&&(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:s,error:l}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Gn});if(l)throw l;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,u=s.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(t){var n,a,r;try{let i=null,s=null;return this.flowType==="pkce"&&([i,s]=await ii(this.storage,this.storageKey)),await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&a!==void 0?a:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:$E})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:a}=t;if(a)throw a;if(!n)throw new Vn;const{error:r}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(t){if(ue(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:a,type:r,options:i}=t,{error:s}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{email:a,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in t){const{phone:a,type:r,options:i}=t,{data:s,error:l}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:a,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:l}}throw new so("You must provide either an email or phone number and a type")}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await a,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=n();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Sr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<Bu:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const s=await Sr(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=qu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=ME(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:r,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ia}):await this._useSession(async n=>{var a,r,i;const{data:s,error:l}=n;if(l)throw l;return!(!((a=s.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vn}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Ia})})}catch(n){if(ue(n))return dE(n)&&(await this._removeSession(),await Ma(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async a=>{const{data:r,error:i}=a;if(i)throw i;if(!r.session)throw new Vn;const s=r.session;let l=null,o=null;this.flowType==="pkce"&&t.email!=null&&([l,o]=await ii(this.storage,this.storageKey));const{data:u,error:f}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:o}),jwt:s.access_token,xform:Ia});if(f)throw f;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(a){if(ue(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Vn;const n=Date.now()/1e3;let a=n,r=!0,i=null;const{payload:s}=Hu(t.access_token);if(s.exp&&(a=s.exp,r=a<=n),r){const{data:l,error:o}=await this._callRefreshToken(t.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:o}=await this._getUser(t.access_token);if(o)throw o;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-n,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(ue(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var a;if(!t){const{data:s,error:l}=n;if(l)throw l;t=(a=s.session)!==null&&a!==void 0?a:void 0}if(!(t!=null&&t.refresh_token))throw new Vn;const{data:r,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!en())throw new lo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new lo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Rg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new lo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Rg("No code detected.");const{data:g,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:r,access_token:i,refresh_token:s,expires_in:l,expires_at:o,token_type:u}=t;if(!i||!l||!s||!u)throw new lo("No session defined in URL");const f=Math.round(Date.now()/1e3),h=parseInt(l);let m=f+h;o&&(m=parseInt(o));const d=m-f;d*1e3<=fi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${h}s`);const p=m-h;f-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,f):f-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,m,f);const{data:b,error:x}=await this._getUser(i);if(x)throw x;const v={provider_token:a,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:m,refresh_token:s,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(a){if(ue(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Sr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var a;const{data:r,error:i}=n;if(i)return{error:i};const s=(a=r.session)===null||a===void 0?void 0:a.access_token;if(s){const{error:l}=await this.admin.signOut(s,t);if(l&&!(uE(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ma(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=bE(),a={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async n=>{var a,r;try{const{data:{session:i},error:s}=n;if(s)throw s;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let a=null,r=null;this.flowType==="pkce"&&([a,r]=await ii(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(ue(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:a,error:r}=await this._useSession(async i=>{var s,l,o,u,f;const{data:h,error:m}=i;if(m)throw m;const d=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",d,{headers:this.headers,jwt:(f=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(r)throw r;return en()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:t.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(ue(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var a;try{const{error:r,data:{session:i}}=n;if(r)throw r;const{options:s,provider:l,token:o,access_token:u,nonce:f}=t,h=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=i==null?void 0:i.access_token)!==null&&a!==void 0?a:void 0,body:{provider:l,id_token:o,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Gn}),{data:m,error:d}=h;return d?{data:{user:null,session:null},error:d}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new ri}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),{data:m,error:d})}catch(r){if(ue(r))return{data:{user:null,session:null},error:r};throw r}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var a,r;const{data:i,error:s}=n;if(s)throw s;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const a=Date.now();return await xE(async r=>(r>0&&await SE(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Gn})),(r,i)=>{const s=200*Math.pow(2,r);return i&&Lu(i)&&Date.now()+s-a<fi})}catch(a){if(this._debug(n,"error",a),ue(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",a),en()&&!n.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,n;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const r=await Sr(this.storage,this.storageKey);if(r&&this.userStorage){let s=await Sr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:r.user},await hi(this.userStorage,this.storageKey+"-user",s)),r.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:qu()}else if(r&&!r.user&&!r.user){const s=await Sr(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(r.user=s.user,await Ma(this.storage,this.storageKey+"-user"),await hi(this.storage,this.storageKey,r)):r.user=qu()}if(this._debug(a,"session from storage",r),!this._isValidSession(r)){this._debug(a,"session is not valid"),r!==null&&await this._removeSession();return}const i=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Bu;if(this._debug(a,`session has${i?"":" not"} expired with margin of ${Bu}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),Lu(s)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:l}=await this._getUser(r.access_token);!l&&(s!=null&&s.user)?(r.user=s.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(a,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(a,"error",r),console.error(r);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var n,a;if(!t)throw new Vn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new $c;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new Vn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),ue(i)){const s={data:null,error:i};return Lu(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,n,a=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",n,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(o){i.push(o)}});if(await Promise.all(s),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),a=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&n.user&&await hi(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const i=$g(r);await hi(this.storage,this.storageKey,i)}else{const r=$g(n);await hi(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Ma(this.storage,this.storageKey),await Ma(this.storage,this.storageKey+"-code-verifier"),await Ma(this.storage,this.storageKey+"-user"),this.userStorage&&await Ma(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&en()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),fi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:a}}=n;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((a.expires_at*1e3-t)/fi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${fi}ms, refresh threshold is ${Wd} ticks`),r<=Wd&&await this._callRefreshToken(a.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof db)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!en()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,a){const r=[`provider=${encodeURIComponent(n)}`];if(a!=null&&a.redirectTo&&r.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&r.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,s]=await ii(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});r.push(l.toString())}if(a!=null&&a.queryParams){const i=new URLSearchParams(a.queryParams);r.push(i.toString())}return a!=null&&a.skipBrowserRedirect&&r.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var a;const{data:r,error:i}=n;return i?{data:null,error:i}:await ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=r==null?void 0:r.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var a,r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:o,error:u}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=i==null?void 0:i.session)===null||a===void 0?void 0:a.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&o.type==="totp"&&(!((r=o==null?void 0:o.totp)===null||r===void 0)&&r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:r,error:i}=n;if(i)return{data:null,error:i};const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?WE(t.webauthn.credential_response):eT(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:o}=await ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(a=r==null?void 0:r.session)===null||a===void 0?void 0:a.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(n){if(ue(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var a;const{data:r,error:i}=n;if(i)return{data:null,error:i};const s=await ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(a=r==null?void 0:r.session)===null||a===void 0?void 0:a.access_token});if(s.error)return s;const{data:l}=s;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:ZE(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:FE(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ue(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:a}=await this.getUser();if(a)return{data:null,error:a};const r={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])r.all.push(i),i.status==="verified"&&r[i.factor_type].push(i);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:a},error:r}=await this.getSession();if(r)return{data:null,error:r};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Hu(a.access_token);let s=null;i.aal&&(s=i.aal);let l=s;((n=(t=a.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:a},error:r}=n;return r?{data:null,error:r}:a?await ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:a.access_token,xform:i=>({data:i,error:null})}):{data:null,error:new Vn}})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async a=>{const{data:{session:r},error:i}=a;if(i)return{data:null,error:i};if(!r)return{data:null,error:new Vn};const s=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&en()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(a){if(ue(a))return{data:null,error:a};throw a}}async _denyAuthorization(t,n){try{return await this._useSession(async a=>{const{data:{session:r},error:i}=a;if(i)return{data:null,error:i};if(!r)return{data:null,error:new Vn};const s=await ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&en()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(a){if(ue(a))return{data:null,error:a};throw a}}async fetchJwk(t,n={keys:[]}){let a=n.keys.find(l=>l.kid===t);if(a)return a;const r=Date.now();if(a=this.jwks.keys.find(l=>l.kid===t),a&&this.jwks_cached_at+oE>r)return a;const{data:i,error:s}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,a=i.keys.find(l=>l.kid===t),!a)?null:a}async getClaims(t,n={}){try{let a=t;if(!a){const{data:d,error:p}=await this.getSession();if(p||!d.session)return{data:null,error:p};a=d.session.access_token}const{header:r,payload:i,signature:s,raw:{header:l,payload:o}}=Hu(a);n!=null&&n.allowExpired||AE(i.exp);const u=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:d}=await this.getUser(a);if(d)throw d;return{data:{claims:i,header:r,signature:s},error:null}}const f=CE(r.alg),h=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,h,s,vE(`${l}.${o}`)))throw new nf("Invalid JWT signature");return{data:{claims:i,header:r,signature:s},error:null}}catch(a){if(ue(a))return{data:null,error:a};throw a}}}dl.nextInstanceID=0;const cT=dl;class uT extends cT{constructor(t){super(t)}}class dT{constructor(t,n,a){var r,i,s;this.supabaseUrl=t,this.supabaseKey=n;const l=aE(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const o=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Q1,realtime:Z1,auth:Object.assign(Object.assign({},P1),{storageKey:o}),global:J1},f=nE(a??{},u);this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=f.auth)!==null&&s!==void 0?s:{},this.headers,f.global.fetch),this.fetch=eE(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new r1(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new G1(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new Px(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,a)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:a}=await this.auth.getSession();return(n=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:a,storage:r,userStorage:i,storageKey:s,flowType:l,lock:o,debug:u},f,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uT({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:a,storage:r,userStorage:i,flowType:l,lock:o,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(d=>d.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new w1(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,a)=>{this._handleTokenChanged(n,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(t,n,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fT=(e,t,n)=>new dT(e,t,n);function hT(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}hT()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mT="https://vqpubtahhvtkftafdlrp.supabase.co",gT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZxcHVidGFoaHZ0a2Z0YWZkbHJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMjQ2NjUsImV4cCI6MjA3NzgwMDY2NX0.o2905IF2CWRJ-krYtA6MnL7_KALlNiwD211Sw-of7mI",de=fT(mT,gT);function yT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _.useMemo(()=>a=>{t.forEach(r=>r(a))},t)}const Bc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function cs(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function _h(e){return"nodeType"in e}function sn(e){var t,n;return e?cs(e)?e:_h(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function wh(e){const{Document:t}=sn(e);return e instanceof t}function Ol(e){return cs(e)?!1:e instanceof sn(e).HTMLElement}function mb(e){return e instanceof sn(e).SVGElement}function us(e){return e?cs(e)?e.document:_h(e)?wh(e)?e:Ol(e)||mb(e)?e.ownerDocument:document:document:document}const Pn=Bc?_.useLayoutEffect:_.useEffect;function Lc(e){const t=_.useRef(e);return Pn(()=>{t.current=e}),_.useCallback(function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t.current==null?void 0:t.current(...a)},[])}function vT(){const e=_.useRef(null),t=_.useCallback((a,r)=>{e.current=setInterval(a,r)},[]),n=_.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function fl(e,t){t===void 0&&(t=[e]);const n=_.useRef(e);return Pn(()=>{n.current!==e&&(n.current=e)},t),n}function Dl(e,t){const n=_.useRef();return _.useMemo(()=>{const a=e(n.current);return n.current=a,a},[...t])}function oc(e){const t=Lc(e),n=_.useRef(null),a=_.useCallback(r=>{r!==n.current&&(t==null||t(r,n.current)),n.current=r},[]);return[n,a]}function cc(e){const t=_.useRef();return _.useEffect(()=>{t.current=e},[e]),t.current}let Iu={};function Nl(e,t){return _.useMemo(()=>{if(t)return t;const n=Iu[e]==null?0:Iu[e]+1;return Iu[e]=n,e+"-"+n},[e,t])}function gb(e){return function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.reduce((i,s)=>{const l=Object.entries(s);for(const[o,u]of l){const f=i[o];f!=null&&(i[o]=f+e*u)}return i},{...t})}}const Ui=gb(1),hl=gb(-1);function pT(e){return"clientX"in e&&"clientY"in e}function Hc(e){if(!e)return!1;const{KeyboardEvent:t}=sn(e.target);return t&&e instanceof t}function bT(e){if(!e)return!1;const{TouchEvent:t}=sn(e.target);return t&&e instanceof t}function uc(e){if(bT(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return pT(e)?{x:e.clientX,y:e.clientY}:null}const cr=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[cr.Translate.toString(e),cr.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:a}=e;return t+" "+n+"ms "+a}}}),Vg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function _T(e){return e.matches(Vg)?e:e.querySelector(Vg)}const wT={display:"none"};function ST(e){let{id:t,value:n}=e;return ot.createElement("div",{id:t,style:wT},n)}function xT(e){let{id:t,announcement:n,ariaLiveType:a="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ot.createElement("div",{id:t,style:r,role:"status","aria-live":a,"aria-atomic":!0},n)}function ET(){const[e,t]=_.useState("");return{announce:_.useCallback(a=>{a!=null&&t(a)},[]),announcement:e}}const yb=_.createContext(null);function TT(e){const t=_.useContext(yb);_.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function jT(){const[e]=_.useState(()=>new Set),t=_.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[_.useCallback(a=>{let{type:r,event:i}=a;e.forEach(s=>{var l;return(l=s[r])==null?void 0:l.call(s,i)})},[e]),t]}const OT={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},DT={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function NT(e){let{announcements:t=DT,container:n,hiddenTextDescribedById:a,screenReaderInstructions:r=OT}=e;const{announce:i,announcement:s}=ET(),l=Nl("DndLiveRegion"),[o,u]=_.useState(!1);if(_.useEffect(()=>{u(!0)},[]),TT(_.useMemo(()=>({onDragStart(h){let{active:m}=h;i(t.onDragStart({active:m}))},onDragMove(h){let{active:m,over:d}=h;t.onDragMove&&i(t.onDragMove({active:m,over:d}))},onDragOver(h){let{active:m,over:d}=h;i(t.onDragOver({active:m,over:d}))},onDragEnd(h){let{active:m,over:d}=h;i(t.onDragEnd({active:m,over:d}))},onDragCancel(h){let{active:m,over:d}=h;i(t.onDragCancel({active:m,over:d}))}}),[i,t])),!o)return null;const f=ot.createElement(ot.Fragment,null,ot.createElement(ST,{id:a,value:r.draggable}),ot.createElement(xT,{id:l,announcement:s}));return n?mi.createPortal(f,n):f}var Ut;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ut||(Ut={}));function dc(){}function Va(e,t){return _.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function fc(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _.useMemo(()=>[...t].filter(a=>a!=null),[...t])}const Zn=Object.freeze({x:0,y:0});function vb(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function AT(e,t){const n=uc(e);if(!n)return"0 0";const a={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}function pb(e,t){let{data:{value:n}}=e,{data:{value:a}}=t;return n-a}function CT(e,t){let{data:{value:n}}=e,{data:{value:a}}=t;return a-n}function Gg(e){let{left:t,top:n,height:a,width:r}=e;return[{x:t,y:n},{x:t+r,y:n},{x:t,y:n+a},{x:t+r,y:n+a}]}function bb(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Kg(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const hc=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const r=Kg(t,t.left,t.top),i=[];for(const s of a){const{id:l}=s,o=n.get(l);if(o){const u=vb(Kg(o),r);i.push({id:l,data:{droppableContainer:s,value:u}})}}return i.sort(pb)},RT=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const r=Gg(t),i=[];for(const s of a){const{id:l}=s,o=n.get(l);if(o){const u=Gg(o),f=r.reduce((m,d,p)=>m+vb(u[p],d),0),h=Number((f/4).toFixed(4));i.push({id:l,data:{droppableContainer:s,value:h}})}}return i.sort(pb)};function MT(e,t){const n=Math.max(t.top,e.top),a=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=r-a,l=i-n;if(a<r&&n<i){const o=t.width*t.height,u=e.width*e.height,f=s*l,h=f/(o+u-f);return Number(h.toFixed(4))}return 0}const kT=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const r=[];for(const i of a){const{id:s}=i,l=n.get(s);if(l){const o=MT(l,t);o>0&&r.push({id:s,data:{droppableContainer:i,value:o}})}}return r.sort(CT)};function UT(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function _b(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Zn}function zT(e){return function(n){for(var a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];return r.reduce((s,l)=>({...s,top:s.top+e*l.y,bottom:s.bottom+e*l.y,left:s.left+e*l.x,right:s.right+e*l.x}),{...n})}}const $T=zT(1);function wb(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function BT(e,t,n){const a=wb(t);if(!a)return e;const{scaleX:r,scaleY:i,x:s,y:l}=a,o=e.left-s-(1-r)*parseFloat(n),u=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=r?e.width/r:e.width,h=i?e.height/i:e.height;return{width:f,height:h,top:u,right:o+f,bottom:u+h,left:o}}const LT={ignoreTransform:!1};function ds(e,t){t===void 0&&(t=LT);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=sn(e).getComputedStyle(e);u&&(n=BT(n,u,f))}const{top:a,left:r,width:i,height:s,bottom:l,right:o}=n;return{top:a,left:r,width:i,height:s,bottom:l,right:o}}function Xg(e){return ds(e,{ignoreTransform:!0})}function HT(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function qT(e,t){return t===void 0&&(t=sn(e).getComputedStyle(e)),t.position==="fixed"}function YT(e,t){t===void 0&&(t=sn(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const i=t[r];return typeof i=="string"?n.test(i):!1})}function qc(e,t){const n=[];function a(r){if(t!=null&&n.length>=t||!r)return n;if(wh(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!Ol(r)||mb(r)||n.includes(r))return n;const i=sn(e).getComputedStyle(r);return r!==e&&YT(r,i)&&n.push(r),qT(r,i)?n:a(r.parentNode)}return e?a(e):n}function Sb(e){const[t]=qc(e,1);return t??null}function Vu(e){return!Bc||!e?null:cs(e)?e:_h(e)?wh(e)||e===us(e).scrollingElement?window:Ol(e)?e:null:null}function xb(e){return cs(e)?e.scrollX:e.scrollLeft}function Eb(e){return cs(e)?e.scrollY:e.scrollTop}function af(e){return{x:xb(e),y:Eb(e)}}var qt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(qt||(qt={}));function Tb(e){return!Bc||!e?!1:e===document.scrollingElement}function jb(e){const t={x:0,y:0},n=Tb(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},r=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=a.y,l=e.scrollLeft>=a.x;return{isTop:r,isLeft:i,isBottom:s,isRight:l,maxScroll:a,minScroll:t}}const IT={x:.2,y:.2};function VT(e,t,n,a,r){let{top:i,left:s,right:l,bottom:o}=n;a===void 0&&(a=10),r===void 0&&(r=IT);const{isTop:u,isBottom:f,isLeft:h,isRight:m}=jb(e),d={x:0,y:0},p={x:0,y:0},b={height:t.height*r.y,width:t.width*r.x};return!u&&i<=t.top+b.height?(d.y=qt.Backward,p.y=a*Math.abs((t.top+b.height-i)/b.height)):!f&&o>=t.bottom-b.height&&(d.y=qt.Forward,p.y=a*Math.abs((t.bottom-b.height-o)/b.height)),!m&&l>=t.right-b.width?(d.x=qt.Forward,p.x=a*Math.abs((t.right-b.width-l)/b.width)):!h&&s<=t.left+b.width&&(d.x=qt.Backward,p.x=a*Math.abs((t.left+b.width-s)/b.width)),{direction:d,speed:p}}function GT(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:a,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:a,bottom:r,width:e.clientWidth,height:e.clientHeight}}function Ob(e){return e.reduce((t,n)=>Ui(t,af(n)),Zn)}function KT(e){return e.reduce((t,n)=>t+xb(n),0)}function XT(e){return e.reduce((t,n)=>t+Eb(n),0)}function Db(e,t){if(t===void 0&&(t=ds),!e)return;const{top:n,left:a,bottom:r,right:i}=t(e);Sb(e)&&(r<=0||i<=0||n>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const JT=[["x",["left","right"],KT],["y",["top","bottom"],XT]];class Sh{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=qc(n),r=Ob(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,l]of JT)for(const o of s)Object.defineProperty(this,o,{get:()=>{const u=l(a),f=r[i]-u;return this.rect[o]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ks{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...n)})},this.target=t}add(t,n,a){var r;(r=this.target)==null||r.addEventListener(t,n,a),this.listeners.push([t,n,a])}}function QT(e){const{EventTarget:t}=sn(e);return e instanceof t?e:us(e)}function Gu(e,t){const n=Math.abs(e.x),a=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+a**2)>t:"x"in t&&"y"in t?n>t.x&&a>t.y:"x"in t?n>t.x:"y"in t?a>t.y:!1}var Mn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Mn||(Mn={}));function Jg(e){e.preventDefault()}function PT(e){e.stopPropagation()}var Ue;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ue||(Ue={}));const Nb={start:[Ue.Space,Ue.Enter],cancel:[Ue.Esc],end:[Ue.Space,Ue.Enter,Ue.Tab]},ZT=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Ue.Right:return{...n,x:n.x+25};case Ue.Left:return{...n,x:n.x-25};case Ue.Down:return{...n,y:n.y+25};case Ue.Up:return{...n,y:n.y-25}}};class Yc{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ks(us(n)),this.windowListeners=new Ks(sn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Mn.Resize,this.handleCancel),this.windowListeners.add(Mn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Mn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,a=t.node.current;a&&Db(a),n(Zn)}handleKeyDown(t){if(Hc(t)){const{active:n,context:a,options:r}=this.props,{keyboardCodes:i=Nb,coordinateGetter:s=ZT,scrollBehavior:l="smooth"}=r,{code:o}=t;if(i.end.includes(o)){this.handleEnd(t);return}if(i.cancel.includes(o)){this.handleCancel(t);return}const{collisionRect:u}=a.current,f=u?{x:u.left,y:u.top}:Zn;this.referenceCoordinates||(this.referenceCoordinates=f);const h=s(t,{active:n,context:a.current,currentCoordinates:f});if(h){const m=hl(h,f),d={x:0,y:0},{scrollableAncestors:p}=a.current;for(const b of p){const x=t.code,{isTop:v,isRight:g,isLeft:y,isBottom:w,maxScroll:T,minScroll:E}=jb(b),S=GT(b),j={x:Math.min(x===Ue.Right?S.right-S.width/2:S.right,Math.max(x===Ue.Right?S.left:S.left+S.width/2,h.x)),y:Math.min(x===Ue.Down?S.bottom-S.height/2:S.bottom,Math.max(x===Ue.Down?S.top:S.top+S.height/2,h.y))},D=x===Ue.Right&&!g||x===Ue.Left&&!y,O=x===Ue.Down&&!w||x===Ue.Up&&!v;if(D&&j.x!==h.x){const R=b.scrollLeft+m.x,K=x===Ue.Right&&R<=T.x||x===Ue.Left&&R>=E.x;if(K&&!m.y){b.scrollTo({left:R,behavior:l});return}K?d.x=b.scrollLeft-R:d.x=x===Ue.Right?b.scrollLeft-T.x:b.scrollLeft-E.x,d.x&&b.scrollBy({left:-d.x,behavior:l});break}else if(O&&j.y!==h.y){const R=b.scrollTop+m.y,K=x===Ue.Down&&R<=T.y||x===Ue.Up&&R>=E.y;if(K&&!m.x){b.scrollTo({top:R,behavior:l});return}K?d.y=b.scrollTop-R:d.y=x===Ue.Down?b.scrollTop-T.y:b.scrollTop-E.y,d.y&&b.scrollBy({top:-d.y,behavior:l});break}}this.handleMove(t,Ui(hl(h,this.referenceCoordinates),d))}}}handleMove(t,n){const{onMove:a}=this.props;t.preventDefault(),a(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Yc.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:a=Nb,onActivation:r}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(a.start.includes(s)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),r==null||r({event:e.nativeEvent}),!0)}return!1}}];function Qg(e){return!!(e&&"distance"in e)}function Pg(e){return!!(e&&"delay"in e)}class xh{constructor(t,n,a){var r;a===void 0&&(a=QT(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=us(s),this.documentListeners=new Ks(this.document),this.listeners=new Ks(a),this.windowListeners=new Ks(sn(s)),this.initialCoordinates=(r=uc(i))!=null?r:Zn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Mn.Resize,this.handleCancel),this.windowListeners.add(Mn.DragStart,Jg),this.windowListeners.add(Mn.VisibilityChange,this.handleCancel),this.windowListeners.add(Mn.ContextMenu,Jg),this.documentListeners.add(Mn.Keydown,this.handleKeydown),n){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Pg(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Qg(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:a,onPending:r}=this.props;r(a,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Mn.Click,PT,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Mn.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:a,initialCoordinates:r,props:i}=this,{onMove:s,options:{activationConstraint:l}}=i;if(!r)return;const o=(n=uc(t))!=null?n:Zn,u=hl(r,o);if(!a&&l){if(Qg(l)){if(l.tolerance!=null&&Gu(u,l.tolerance))return this.handleCancel();if(Gu(u,l.distance))return this.handleStart()}if(Pg(l)&&Gu(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),s(o)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Ue.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const FT={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Qi extends xh{constructor(t){const{event:n}=t,a=us(n.target);super(t,FT,a)}}Qi.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;return!n.isPrimary||n.button!==0?!1:(a==null||a({event:n}),!0)}}];const WT={move:{name:"mousemove"},end:{name:"mouseup"}};var rf;(function(e){e[e.RightClick=2]="RightClick"})(rf||(rf={}));class ej extends xh{constructor(t){super(t,WT,us(t.event.target))}}ej.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;return n.button===rf.RightClick?!1:(a==null||a({event:n}),!0)}}];const Ku={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class sf extends xh{constructor(t){super(t,Ku)}static setup(){return window.addEventListener(Ku.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ku.move.name,t)};function t(){}}}sf.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;const{touches:r}=n;return r.length>1?!1:(a==null||a({event:n}),!0)}}];var Xs;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Xs||(Xs={}));var mc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(mc||(mc={}));function tj(e){let{acceleration:t,activator:n=Xs.Pointer,canScroll:a,draggingRect:r,enabled:i,interval:s=5,order:l=mc.TreeOrder,pointerCoordinates:o,scrollableAncestors:u,scrollableAncestorRects:f,delta:h,threshold:m}=e;const d=aj({delta:h,disabled:!i}),[p,b]=vT(),x=_.useRef({x:0,y:0}),v=_.useRef({x:0,y:0}),g=_.useMemo(()=>{switch(n){case Xs.Pointer:return o?{top:o.y,bottom:o.y,left:o.x,right:o.x}:null;case Xs.DraggableRect:return r}},[n,r,o]),y=_.useRef(null),w=_.useCallback(()=>{const E=y.current;if(!E)return;const S=x.current.x*v.current.x,j=x.current.y*v.current.y;E.scrollBy(S,j)},[]),T=_.useMemo(()=>l===mc.TreeOrder?[...u].reverse():u,[l,u]);_.useEffect(()=>{if(!i||!u.length||!g){b();return}for(const E of T){if((a==null?void 0:a(E))===!1)continue;const S=u.indexOf(E),j=f[S];if(!j)continue;const{direction:D,speed:O}=VT(E,j,g,t,m);for(const R of["x","y"])d[R][D[R]]||(O[R]=0,D[R]=0);if(O.x>0||O.y>0){b(),y.current=E,p(w,s),x.current=O,v.current=D;return}}x.current={x:0,y:0},v.current={x:0,y:0},b()},[t,w,a,b,i,s,JSON.stringify(g),JSON.stringify(d),p,u,T,f,JSON.stringify(m)])}const nj={x:{[qt.Backward]:!1,[qt.Forward]:!1},y:{[qt.Backward]:!1,[qt.Forward]:!1}};function aj(e){let{delta:t,disabled:n}=e;const a=cc(t);return Dl(r=>{if(n||!a||!r)return nj;const i={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[qt.Backward]:r.x[qt.Backward]||i.x===-1,[qt.Forward]:r.x[qt.Forward]||i.x===1},y:{[qt.Backward]:r.y[qt.Backward]||i.y===-1,[qt.Forward]:r.y[qt.Forward]||i.y===1}}},[n,t,a])}function rj(e,t){const n=t!=null?e.get(t):void 0,a=n?n.node.current:null;return Dl(r=>{var i;return t==null?null:(i=a??r)!=null?i:null},[a,t])}function ij(e,t){return _.useMemo(()=>e.reduce((n,a)=>{const{sensor:r}=a,i=r.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,a)}));return[...n,...i]},[]),[e,t])}var Pi;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Pi||(Pi={}));var lf;(function(e){e.Optimized="optimized"})(lf||(lf={}));const Zg=new Map;function sj(e,t){let{dragging:n,dependencies:a,config:r}=t;const[i,s]=_.useState(null),{frequency:l,measure:o,strategy:u}=r,f=_.useRef(e),h=x(),m=fl(h),d=_.useCallback(function(v){v===void 0&&(v=[]),!m.current&&s(g=>g===null?v:g.concat(v.filter(y=>!g.includes(y))))},[m]),p=_.useRef(null),b=Dl(v=>{if(h&&!n)return Zg;if(!v||v===Zg||f.current!==e||i!=null){const g=new Map;for(let y of e){if(!y)continue;if(i&&i.length>0&&!i.includes(y.id)&&y.rect.current){g.set(y.id,y.rect.current);continue}const w=y.node.current,T=w?new Sh(o(w),w):null;y.rect.current=T,T&&g.set(y.id,T)}return g}return v},[e,i,n,h,o]);return _.useEffect(()=>{f.current=e},[e]),_.useEffect(()=>{h||d()},[n,h]),_.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),_.useEffect(()=>{h||typeof l!="number"||p.current!==null||(p.current=setTimeout(()=>{d(),p.current=null},l))},[l,h,d,...a]),{droppableRects:b,measureDroppableContainers:d,measuringScheduled:i!=null};function x(){switch(u){case Pi.Always:return!1;case Pi.BeforeDragging:return n;default:return!n}}}function Eh(e,t){return Dl(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function lj(e,t){return Eh(e,t)}function oj(e){let{callback:t,disabled:n}=e;const a=Lc(t),r=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(a)},[a,n]);return _.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function Ic(e){let{callback:t,disabled:n}=e;const a=Lc(t),r=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(a)},[n]);return _.useEffect(()=>()=>r==null?void 0:r.disconnect(),[r]),r}function cj(e){return new Sh(ds(e),e)}function Fg(e,t,n){t===void 0&&(t=cj);const[a,r]=_.useState(null);function i(){r(o=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=o??n)!=null?u:null}const f=t(e);return JSON.stringify(o)===JSON.stringify(f)?o:f})}const s=oj({callback(o){if(e)for(const u of o){const{type:f,target:h}=u;if(f==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),l=Ic({callback:i});return Pn(()=>{i(),e?(l==null||l.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),s==null||s.disconnect())},[e]),a}function uj(e){const t=Eh(e);return _b(e,t)}const Wg=[];function dj(e){const t=_.useRef(e),n=Dl(a=>e?a&&a!==Wg&&e&&t.current&&e.parentNode===t.current.parentNode?a:qc(e):Wg,[e]);return _.useEffect(()=>{t.current=e},[e]),n}function fj(e){const[t,n]=_.useState(null),a=_.useRef(e),r=_.useCallback(i=>{const s=Vu(i.target);s&&n(l=>l?(l.set(s,af(s)),new Map(l)):null)},[]);return _.useEffect(()=>{const i=a.current;if(e!==i){s(i);const l=e.map(o=>{const u=Vu(o);return u?(u.addEventListener("scroll",r,{passive:!0}),[u,af(u)]):null}).filter(o=>o!=null);n(l.length?new Map(l):null),a.current=e}return()=>{s(e),s(i)};function s(l){l.forEach(o=>{const u=Vu(o);u==null||u.removeEventListener("scroll",r)})}},[r,e]),_.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>Ui(i,s),Zn):Ob(e):Zn,[e,t])}function ey(e,t){t===void 0&&(t=[]);const n=_.useRef(null);return _.useEffect(()=>{n.current=null},t),_.useEffect(()=>{const a=e!==Zn;a&&!n.current&&(n.current=e),!a&&n.current&&(n.current=null)},[e]),n.current?hl(e,n.current):Zn}function hj(e){_.useEffect(()=>{if(!Bc)return;const t=e.map(n=>{let{sensor:a}=n;return a.setup==null?void 0:a.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function mj(e,t){return _.useMemo(()=>e.reduce((n,a)=>{let{eventName:r,handler:i}=a;return n[r]=s=>{i(s,t)},n},{}),[e,t])}function Ab(e){return _.useMemo(()=>e?HT(e):null,[e])}const ty=[];function gj(e,t){t===void 0&&(t=ds);const[n]=e,a=Ab(n?sn(n):null),[r,i]=_.useState(ty);function s(){i(()=>e.length?e.map(o=>Tb(o)?a:new Sh(t(o),o)):ty)}const l=Ic({callback:s});return Pn(()=>{l==null||l.disconnect(),s(),e.forEach(o=>l==null?void 0:l.observe(o))},[e]),r}function Cb(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ol(t)?t:e}function yj(e){let{measure:t}=e;const[n,a]=_.useState(null),r=_.useCallback(u=>{for(const{target:f}of u)if(Ol(f)){a(h=>{const m=t(f);return h?{...h,width:m.width,height:m.height}:m});break}},[t]),i=Ic({callback:r}),s=_.useCallback(u=>{const f=Cb(u);i==null||i.disconnect(),f&&(i==null||i.observe(f)),a(f?t(f):null)},[t,i]),[l,o]=oc(s);return _.useMemo(()=>({nodeRef:l,rect:n,setRef:o}),[n,l,o])}const vj=[{sensor:Qi,options:{}},{sensor:Yc,options:{}}],pj={current:{}},Oo={draggable:{measure:Xg},droppable:{measure:Xg,strategy:Pi.WhileDragging,frequency:lf.Optimized},dragOverlay:{measure:ds}};class Js extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,a;return(n=(a=this.get(t))==null?void 0:a.node.current)!=null?n:void 0}}const bj={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Js,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:dc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Oo,measureDroppableContainers:dc,windowRect:null,measuringScheduled:!1},Rb={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:dc,draggableNodes:new Map,over:null,measureDroppableContainers:dc},Al=_.createContext(Rb),Mb=_.createContext(bj);function _j(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Js}}}function wj(e,t){switch(t.type){case Ut.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ut.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ut.DragEnd:case Ut.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ut.RegisterDroppable:{const{element:n}=t,{id:a}=n,r=new Js(e.droppable.containers);return r.set(a,n),{...e,droppable:{...e.droppable,containers:r}}}case Ut.SetDroppableDisabled:{const{id:n,key:a,disabled:r}=t,i=e.droppable.containers.get(n);if(!i||a!==i.key)return e;const s=new Js(e.droppable.containers);return s.set(n,{...i,disabled:r}),{...e,droppable:{...e.droppable,containers:s}}}case Ut.UnregisterDroppable:{const{id:n,key:a}=t,r=e.droppable.containers.get(n);if(!r||a!==r.key)return e;const i=new Js(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Sj(e){let{disabled:t}=e;const{active:n,activatorEvent:a,draggableNodes:r}=_.useContext(Al),i=cc(a),s=cc(n==null?void 0:n.id);return _.useEffect(()=>{if(!t&&!a&&i&&s!=null){if(!Hc(i)||document.activeElement===i.target)return;const l=r.get(s);if(!l)return;const{activatorNode:o,node:u}=l;if(!o.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[o.current,u.current]){if(!f)continue;const h=_T(f);if(h){h.focus();break}}})}},[a,t,r,s,i]),null}function kb(e,t){let{transform:n,...a}=t;return e!=null&&e.length?e.reduce((r,i)=>i({transform:r,...a}),n):n}function xj(e){return _.useMemo(()=>({draggable:{...Oo.draggable,...e==null?void 0:e.draggable},droppable:{...Oo.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Oo.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Ej(e){let{activeNode:t,measure:n,initialRect:a,config:r=!0}=e;const i=_.useRef(!1),{x:s,y:l}=typeof r=="boolean"?{x:r,y:r}:r;Pn(()=>{if(!s&&!l||!t){i.current=!1;return}if(i.current||!a)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),h=_b(f,a);if(s||(h.x=0),l||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=Sb(u);m&&m.scrollBy({top:h.y,left:h.x})}},[t,s,l,a,n])}const Vc=_.createContext({...Zn,scaleX:1,scaleY:1});var $a;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})($a||($a={}));const gc=_.memo(function(t){var n,a,r,i;let{id:s,accessibility:l,autoScroll:o=!0,children:u,sensors:f=vj,collisionDetection:h=kT,measuring:m,modifiers:d,...p}=t;const b=_.useReducer(wj,void 0,_j),[x,v]=b,[g,y]=jT(),[w,T]=_.useState($a.Uninitialized),E=w===$a.Initialized,{draggable:{active:S,nodes:j,translate:D},droppable:{containers:O}}=x,R=S!=null?j.get(S):null,K=_.useRef({initial:null,translated:null}),ee=_.useMemo(()=>{var Ze;return S!=null?{id:S,data:(Ze=R==null?void 0:R.data)!=null?Ze:pj,rect:K}:null},[S,R]),ae=_.useRef(null),[oe,C]=_.useState(null),[$,F]=_.useState(null),me=fl(p,Object.values(p)),Te=Nl("DndDescribedBy",s),vt=_.useMemo(()=>O.getEnabled(),[O]),pe=xj(m),{droppableRects:He,measureDroppableContainers:Oe,measuringScheduled:Ne}=sj(vt,{dragging:E,dependencies:[D.x,D.y],config:pe.droppable}),Ae=rj(j,S),I=_.useMemo(()=>$?uc($):null,[$]),B=jt(),H=lj(Ae,pe.draggable.measure);Ej({activeNode:S!=null?j.get(S):null,config:B.layoutShiftCompensation,initialRect:H,measure:pe.draggable.measure});const N=Fg(Ae,pe.draggable.measure,H),L=Fg(Ae?Ae.parentElement:null),z=_.useRef({activatorEvent:null,active:null,activeNode:Ae,collisionRect:null,collisions:null,droppableRects:He,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),X=O.getNodeFor((n=z.current.over)==null?void 0:n.id),M=yj({measure:pe.dragOverlay.measure}),W=(a=M.nodeRef.current)!=null?a:Ae,te=E?(r=M.rect)!=null?r:N:null,ce=!!(M.nodeRef.current&&M.rect),Se=uj(ce?null:N),De=Ab(W?sn(W):null),je=dj(E?X??Ae:null),Xe=gj(je),qe=kb(d,{transform:{x:D.x-Se.x,y:D.y-Se.y,scaleX:1,scaleY:1},activatorEvent:$,active:ee,activeNodeRect:N,containerNodeRect:L,draggingNodeRect:te,over:z.current.over,overlayNodeRect:M.rect,scrollableAncestors:je,scrollableAncestorRects:Xe,windowRect:De}),Bt=I?Ui(I,D):null,Lt=fj(je),Nn=ey(Lt),Qr=ey(Lt,[N]),mn=Ui(qe,Nn),An=te?$T(te,qe):null,Wt=ee&&An?h({active:ee,collisionRect:An,droppableRects:He,droppableContainers:vt,pointerCoordinates:Bt}):null,hr=bb(Wt,"id"),[Y,V]=_.useState(null),J=ce?qe:Ui(qe,Qr),he=UT(J,(i=Y==null?void 0:Y.rect)!=null?i:null,N),le=_.useRef(null),be=_.useCallback((Ze,Ye)=>{let{sensor:et,options:Ie}=Ye;if(ae.current==null)return;const _t=j.get(ae.current);if(!_t)return;const Mt=Ze.nativeEvent,Vt=new et({active:ae.current,activeNode:_t,event:Mt,options:Ie,context:z,onAbort(wt){if(!j.get(wt))return;const{onDragAbort:Kt}=me.current,Xt={id:wt};Kt==null||Kt(Xt),g({type:"onDragAbort",event:Xt})},onPending(wt,gn,Kt,Xt){if(!j.get(wt))return;const{onDragPending:la}=me.current,Cn={id:wt,constraint:gn,initialCoordinates:Kt,offset:Xt};la==null||la(Cn),g({type:"onDragPending",event:Cn})},onStart(wt){const gn=ae.current;if(gn==null)return;const Kt=j.get(gn);if(!Kt)return;const{onDragStart:Xt}=me.current,sa={activatorEvent:Mt,active:{id:gn,data:Kt.data,rect:K}};mi.unstable_batchedUpdates(()=>{Xt==null||Xt(sa),T($a.Initializing),v({type:Ut.DragStart,initialCoordinates:wt,active:gn}),g({type:"onDragStart",event:sa}),C(le.current),F(Mt)})},onMove(wt){v({type:Ut.DragMove,coordinates:wt})},onEnd:Gt(Ut.DragEnd),onCancel:Gt(Ut.DragCancel)});le.current=Vt;function Gt(wt){return async function(){const{active:Kt,collisions:Xt,over:sa,scrollAdjustedTranslate:la}=z.current;let Cn=null;if(Kt&&la){const{cancelDrop:Wn}=me.current;Cn={activatorEvent:Mt,active:Kt,collisions:Xt,delta:la,over:sa},wt===Ut.DragEnd&&typeof Wn=="function"&&await Promise.resolve(Wn(Cn))&&(wt=Ut.DragCancel)}ae.current=null,mi.unstable_batchedUpdates(()=>{v({type:wt}),T($a.Uninitialized),V(null),C(null),F(null),le.current=null;const Wn=wt===Ut.DragEnd?"onDragEnd":"onDragCancel";if(Cn){const Na=me.current[Wn];Na==null||Na(Cn),g({type:Wn,event:Cn})}})}}},[j]),ut=_.useCallback((Ze,Ye)=>(et,Ie)=>{const _t=et.nativeEvent,Mt=j.get(Ie);if(ae.current!==null||!Mt||_t.dndKit||_t.defaultPrevented)return;const Vt={active:Mt};Ze(et,Ye.options,Vt)===!0&&(_t.dndKit={capturedBy:Ye.sensor},ae.current=Ie,be(et,Ye))},[j,be]),at=ij(f,ut);hj(f),Pn(()=>{N&&w===$a.Initializing&&T($a.Initialized)},[N,w]),_.useEffect(()=>{const{onDragMove:Ze}=me.current,{active:Ye,activatorEvent:et,collisions:Ie,over:_t}=z.current;if(!Ye||!et)return;const Mt={active:Ye,activatorEvent:et,collisions:Ie,delta:{x:mn.x,y:mn.y},over:_t};mi.unstable_batchedUpdates(()=>{Ze==null||Ze(Mt),g({type:"onDragMove",event:Mt})})},[mn.x,mn.y]),_.useEffect(()=>{const{active:Ze,activatorEvent:Ye,collisions:et,droppableContainers:Ie,scrollAdjustedTranslate:_t}=z.current;if(!Ze||ae.current==null||!Ye||!_t)return;const{onDragOver:Mt}=me.current,Vt=Ie.get(hr),Gt=Vt&&Vt.rect.current?{id:Vt.id,rect:Vt.rect.current,data:Vt.data,disabled:Vt.disabled}:null,wt={active:Ze,activatorEvent:Ye,collisions:et,delta:{x:_t.x,y:_t.y},over:Gt};mi.unstable_batchedUpdates(()=>{V(Gt),Mt==null||Mt(wt),g({type:"onDragOver",event:wt})})},[hr]),Pn(()=>{z.current={activatorEvent:$,active:ee,activeNode:Ae,collisionRect:An,collisions:Wt,droppableRects:He,draggableNodes:j,draggingNode:W,draggingNodeRect:te,droppableContainers:O,over:Y,scrollableAncestors:je,scrollAdjustedTranslate:mn},K.current={initial:te,translated:An}},[ee,Ae,Wt,An,j,W,te,He,O,Y,je,mn]),tj({...B,delta:D,draggingRect:An,pointerCoordinates:Bt,scrollableAncestors:je,scrollableAncestorRects:Xe});const rt=_.useMemo(()=>({active:ee,activeNode:Ae,activeNodeRect:N,activatorEvent:$,collisions:Wt,containerNodeRect:L,dragOverlay:M,draggableNodes:j,droppableContainers:O,droppableRects:He,over:Y,measureDroppableContainers:Oe,scrollableAncestors:je,scrollableAncestorRects:Xe,measuringConfiguration:pe,measuringScheduled:Ne,windowRect:De}),[ee,Ae,N,$,Wt,L,M,j,O,He,Y,Oe,je,Xe,pe,Ne,De]),Ee=_.useMemo(()=>({activatorEvent:$,activators:at,active:ee,activeNodeRect:N,ariaDescribedById:{draggable:Te},dispatch:v,draggableNodes:j,over:Y,measureDroppableContainers:Oe}),[$,at,ee,N,v,Te,j,Y,Oe]);return ot.createElement(yb.Provider,{value:y},ot.createElement(Al.Provider,{value:Ee},ot.createElement(Mb.Provider,{value:rt},ot.createElement(Vc.Provider,{value:he},u)),ot.createElement(Sj,{disabled:(l==null?void 0:l.restoreFocus)===!1})),ot.createElement(NT,{...l,hiddenTextDescribedById:Te}));function jt(){const Ze=(oe==null?void 0:oe.autoScrollEnabled)===!1,Ye=typeof o=="object"?o.enabled===!1:o===!1,et=E&&!Ze&&!Ye;return typeof o=="object"?{...o,enabled:et}:{enabled:et}}}),Tj=_.createContext(null),ny="button",jj="Draggable";function Oj(e){let{id:t,data:n,disabled:a=!1,attributes:r}=e;const i=Nl(jj),{activators:s,activatorEvent:l,active:o,activeNodeRect:u,ariaDescribedById:f,draggableNodes:h,over:m}=_.useContext(Al),{role:d=ny,roleDescription:p="draggable",tabIndex:b=0}=r??{},x=(o==null?void 0:o.id)===t,v=_.useContext(x?Vc:Tj),[g,y]=oc(),[w,T]=oc(),E=mj(s,t),S=fl(n);Pn(()=>(h.set(t,{id:t,key:i,node:g,activatorNode:w,data:S}),()=>{const D=h.get(t);D&&D.key===i&&h.delete(t)}),[h,t]);const j=_.useMemo(()=>({role:d,tabIndex:b,"aria-disabled":a,"aria-pressed":x&&d===ny?!0:void 0,"aria-roledescription":p,"aria-describedby":f.draggable}),[a,d,b,x,p,f.draggable]);return{active:o,activatorEvent:l,activeNodeRect:u,attributes:j,isDragging:x,listeners:a?void 0:E,node:g,over:m,setNodeRef:y,setActivatorNodeRef:T,transform:v}}function Ub(){return _.useContext(Mb)}const Dj="Droppable",Nj={timeout:25};function Aj(e){let{data:t,disabled:n=!1,id:a,resizeObserverConfig:r}=e;const i=Nl(Dj),{active:s,dispatch:l,over:o,measureDroppableContainers:u}=_.useContext(Al),f=_.useRef({disabled:n}),h=_.useRef(!1),m=_.useRef(null),d=_.useRef(null),{disabled:p,updateMeasurementsFor:b,timeout:x}={...Nj,...r},v=fl(b??a),g=_.useCallback(()=>{if(!h.current){h.current=!0;return}d.current!=null&&clearTimeout(d.current),d.current=setTimeout(()=>{u(Array.isArray(v.current)?v.current:[v.current]),d.current=null},x)},[x]),y=Ic({callback:g,disabled:p||!s}),w=_.useCallback((j,D)=>{y&&(D&&(y.unobserve(D),h.current=!1),j&&y.observe(j))},[y]),[T,E]=oc(w),S=fl(t);return _.useEffect(()=>{!y||!T.current||(y.disconnect(),h.current=!1,y.observe(T.current))},[T,y]),_.useEffect(()=>(l({type:Ut.RegisterDroppable,element:{id:a,key:i,disabled:n,node:T,rect:m,data:S}}),()=>l({type:Ut.UnregisterDroppable,key:i,id:a})),[a]),_.useEffect(()=>{n!==f.current.disabled&&(l({type:Ut.SetDroppableDisabled,id:a,key:i,disabled:n}),f.current.disabled=n)},[a,i,n,l]),{active:s,rect:m,isOver:(o==null?void 0:o.id)===a,node:T,over:o,setNodeRef:E}}function Cj(e){let{animation:t,children:n}=e;const[a,r]=_.useState(null),[i,s]=_.useState(null),l=cc(n);return!n&&!a&&l&&r(l),Pn(()=>{if(!i)return;const o=a==null?void 0:a.key,u=a==null?void 0:a.props.id;if(o==null||u==null){r(null);return}Promise.resolve(t(u,i)).then(()=>{r(null)})},[t,a,i]),ot.createElement(ot.Fragment,null,n,a?_.cloneElement(a,{ref:s}):null)}const Rj={x:0,y:0,scaleX:1,scaleY:1};function Mj(e){let{children:t}=e;return ot.createElement(Al.Provider,{value:Rb},ot.createElement(Vc.Provider,{value:Rj},t))}const kj={position:"fixed",touchAction:"none"},Uj=e=>Hc(e)?"transform 250ms ease":void 0,zj=_.forwardRef((e,t)=>{let{as:n,activatorEvent:a,adjustScale:r,children:i,className:s,rect:l,style:o,transform:u,transition:f=Uj}=e;if(!l)return null;const h=r?u:{...u,scaleX:1,scaleY:1},m={...kj,width:l.width,height:l.height,top:l.top,left:l.left,transform:cr.Transform.toString(h),transformOrigin:r&&a?AT(a,l):void 0,transition:typeof f=="function"?f(a):f,...o};return ot.createElement(n,{className:s,style:m,ref:t},i)}),$j=e=>t=>{let{active:n,dragOverlay:a}=t;const r={},{styles:i,className:s}=e;if(i!=null&&i.active)for(const[l,o]of Object.entries(i.active))o!==void 0&&(r[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,o));if(i!=null&&i.dragOverlay)for(const[l,o]of Object.entries(i.dragOverlay))o!==void 0&&a.node.style.setProperty(l,o);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&a.node.classList.add(s.dragOverlay),function(){for(const[o,u]of Object.entries(r))n.node.style.setProperty(o,u);s!=null&&s.active&&n.node.classList.remove(s.active)}},Bj=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:cr.Transform.toString(t)},{transform:cr.Transform.toString(n)}]},Lj={duration:250,easing:"ease",keyframes:Bj,sideEffects:$j({styles:{active:{opacity:"0"}}})};function Hj(e){let{config:t,draggableNodes:n,droppableContainers:a,measuringConfiguration:r}=e;return Lc((i,s)=>{if(t===null)return;const l=n.get(i);if(!l)return;const o=l.node.current;if(!o)return;const u=Cb(s);if(!u)return;const{transform:f}=sn(s).getComputedStyle(s),h=wb(f);if(!h)return;const m=typeof t=="function"?t:qj(t);return Db(o,r.draggable.measure),m({active:{id:i,data:l.data,node:o,rect:r.draggable.measure(o)},draggableNodes:n,dragOverlay:{node:s,rect:r.dragOverlay.measure(u)},droppableContainers:a,measuringConfiguration:r,transform:h})})}function qj(e){const{duration:t,easing:n,sideEffects:a,keyframes:r}={...Lj,...e};return i=>{let{active:s,dragOverlay:l,transform:o,...u}=i;if(!t)return;const f={x:l.rect.left-s.rect.left,y:l.rect.top-s.rect.top},h={scaleX:o.scaleX!==1?s.rect.width*o.scaleX/l.rect.width:1,scaleY:o.scaleY!==1?s.rect.height*o.scaleY/l.rect.height:1},m={x:o.x-f.x,y:o.y-f.y,...h},d=r({...u,active:s,dragOverlay:l,transform:{initial:o,final:m}}),[p]=d,b=d[d.length-1];if(JSON.stringify(p)===JSON.stringify(b))return;const x=a==null?void 0:a({active:s,dragOverlay:l,...u}),v=l.node.animate(d,{duration:t,easing:n,fill:"forwards"});return new Promise(g=>{v.onfinish=()=>{x==null||x(),g()}})}}let ay=0;function Yj(e){return _.useMemo(()=>{if(e!=null)return ay++,ay},[e])}const zb=ot.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:a,style:r,transition:i,modifiers:s,wrapperElement:l="div",className:o,zIndex:u=999}=e;const{activatorEvent:f,active:h,activeNodeRect:m,containerNodeRect:d,draggableNodes:p,droppableContainers:b,dragOverlay:x,over:v,measuringConfiguration:g,scrollableAncestors:y,scrollableAncestorRects:w,windowRect:T}=Ub(),E=_.useContext(Vc),S=Yj(h==null?void 0:h.id),j=kb(s,{activatorEvent:f,active:h,activeNodeRect:m,containerNodeRect:d,draggingNodeRect:x.rect,over:v,overlayNodeRect:x.rect,scrollableAncestors:y,scrollableAncestorRects:w,transform:E,windowRect:T}),D=Eh(m),O=Hj({config:a,draggableNodes:p,droppableContainers:b,measuringConfiguration:g}),R=D?x.setRef:void 0;return ot.createElement(Mj,null,ot.createElement(Cj,{animation:O},h&&S?ot.createElement(zj,{key:S,id:h.id,ref:R,as:l,activatorEvent:f,adjustScale:t,className:o,transition:i,rect:D,style:{zIndex:u,...r},transform:j},n):null))});function Th(e,t,n){const a=e.slice();return a.splice(n<0?a.length+n:n,0,a.splice(t,1)[0]),a}function Ij(e,t){return e.reduce((n,a,r)=>{const i=t.get(a);return i&&(n[r]=i),n},Array(e.length))}function oo(e){return e!==null&&e>=0}function Vj(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Gj(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const co={scaleX:1,scaleY:1},Kj=e=>{var t;let{rects:n,activeNodeRect:a,activeIndex:r,overIndex:i,index:s}=e;const l=(t=n[r])!=null?t:a;if(!l)return null;const o=Xj(n,s,r);if(s===r){const u=n[i];return u?{x:r<i?u.left+u.width-(l.left+l.width):u.left-l.left,y:0,...co}:null}return s>r&&s<=i?{x:-l.width-o,y:0,...co}:s<r&&s>=i?{x:l.width+o,y:0,...co}:{x:0,y:0,...co}};function Xj(e,t,n){const a=e[t],r=e[t-1],i=e[t+1];return!a||!r&&!i?0:n<t?r?a.left-(r.left+r.width):i.left-(a.left+a.width):i?i.left-(a.left+a.width):a.left-(r.left+r.width)}const $b=e=>{let{rects:t,activeIndex:n,overIndex:a,index:r}=e;const i=Th(t,a,n),s=t[r],l=i[r];return!l||!s?null:{x:l.left-s.left,y:l.top-s.top,scaleX:l.width/s.width,scaleY:l.height/s.height}},uo={scaleX:1,scaleY:1},Ar=e=>{var t;let{activeIndex:n,activeNodeRect:a,index:r,rects:i,overIndex:s}=e;const l=(t=i[n])!=null?t:a;if(!l)return null;if(r===n){const u=i[s];return u?{x:0,y:n<s?u.top+u.height-(l.top+l.height):u.top-l.top,...uo}:null}const o=Jj(i,r,n);return r>n&&r<=s?{x:0,y:-l.height-o,...uo}:r<n&&r>=s?{x:0,y:l.height+o,...uo}:{x:0,y:0,...uo}};function Jj(e,t,n){const a=e[t],r=e[t-1],i=e[t+1];return a?n<t?r?a.top-(r.top+r.height):i?i.top-(a.top+a.height):0:i?i.top-(a.top+a.height):r?a.top-(r.top+r.height):0:0}const Bb="Sortable",Lb=ot.createContext({activeIndex:-1,containerId:Bb,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:$b,disabled:{draggable:!1,droppable:!1}});function Ba(e){let{children:t,id:n,items:a,strategy:r=$b,disabled:i=!1}=e;const{active:s,dragOverlay:l,droppableRects:o,over:u,measureDroppableContainers:f}=Ub(),h=Nl(Bb,n),m=l.rect!==null,d=_.useMemo(()=>a.map(E=>typeof E=="object"&&"id"in E?E.id:E),[a]),p=s!=null,b=s?d.indexOf(s.id):-1,x=u?d.indexOf(u.id):-1,v=_.useRef(d),g=!Vj(d,v.current),y=x!==-1&&b===-1||g,w=Gj(i);Pn(()=>{g&&p&&f(d)},[g,d,p,f]),_.useEffect(()=>{v.current=d},[d]);const T=_.useMemo(()=>({activeIndex:b,containerId:h,disabled:w,disableTransforms:y,items:d,overIndex:x,useDragOverlay:m,sortedRects:Ij(d,o),strategy:r}),[b,h,w.draggable,w.droppable,y,d,x,o,m,r]);return ot.createElement(Lb.Provider,{value:T},t)}const Qj=e=>{let{id:t,items:n,activeIndex:a,overIndex:r}=e;return Th(n,a,r).indexOf(t)},Pj=e=>{let{containerId:t,isSorting:n,wasDragging:a,index:r,items:i,newIndex:s,previousItems:l,previousContainerId:o,transition:u}=e;return!u||!a||l!==i&&r===s?!1:n?!0:s!==r&&t===o},Zj={duration:200,easing:"ease"},Hb="transform",Fj=cr.Transition.toString({property:Hb,duration:0,easing:"linear"}),Wj={roleDescription:"sortable"};function eO(e){let{disabled:t,index:n,node:a,rect:r}=e;const[i,s]=_.useState(null),l=_.useRef(n);return Pn(()=>{if(!t&&n!==l.current&&a.current){const o=r.current;if(o){const u=ds(a.current,{ignoreTransform:!0}),f={x:o.left-u.left,y:o.top-u.top,scaleX:o.width/u.width,scaleY:o.height/u.height};(f.x||f.y)&&s(f)}}n!==l.current&&(l.current=n)},[t,n,a,r]),_.useEffect(()=>{i&&s(null)},[i]),i}function Gc(e){let{animateLayoutChanges:t=Pj,attributes:n,disabled:a,data:r,getNewIndex:i=Qj,id:s,strategy:l,resizeObserverConfig:o,transition:u=Zj}=e;const{items:f,containerId:h,activeIndex:m,disabled:d,disableTransforms:p,sortedRects:b,overIndex:x,useDragOverlay:v,strategy:g}=_.useContext(Lb),y=tO(a,d),w=f.indexOf(s),T=_.useMemo(()=>({sortable:{containerId:h,index:w,items:f},...r}),[h,r,w,f]),E=_.useMemo(()=>f.slice(f.indexOf(s)),[f,s]),{rect:S,node:j,isOver:D,setNodeRef:O}=Aj({id:s,data:T,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...o}}),{active:R,activatorEvent:K,activeNodeRect:ee,attributes:ae,setNodeRef:oe,listeners:C,isDragging:$,over:F,setActivatorNodeRef:me,transform:Te}=Oj({id:s,data:T,attributes:{...Wj,...n},disabled:y.draggable}),vt=yT(O,oe),pe=!!R,He=pe&&!p&&oo(m)&&oo(x),Oe=!v&&$,Ne=Oe&&He?Te:null,I=He?Ne??(l??g)({rects:b,activeNodeRect:ee,activeIndex:m,overIndex:x,index:w}):null,B=oo(m)&&oo(x)?i({id:s,items:f,activeIndex:m,overIndex:x}):w,H=R==null?void 0:R.id,N=_.useRef({activeId:H,items:f,newIndex:B,containerId:h}),L=f!==N.current.items,z=t({active:R,containerId:h,isDragging:$,isSorting:pe,id:s,index:w,items:f,newIndex:N.current.newIndex,previousItems:N.current.items,previousContainerId:N.current.containerId,transition:u,wasDragging:N.current.activeId!=null}),X=eO({disabled:!z,index:w,node:j,rect:S});return _.useEffect(()=>{pe&&N.current.newIndex!==B&&(N.current.newIndex=B),h!==N.current.containerId&&(N.current.containerId=h),f!==N.current.items&&(N.current.items=f)},[pe,B,h,f]),_.useEffect(()=>{if(H===N.current.activeId)return;if(H!=null&&N.current.activeId==null){N.current.activeId=H;return}const W=setTimeout(()=>{N.current.activeId=H},50);return()=>clearTimeout(W)},[H]),{active:R,activeIndex:m,attributes:ae,data:T,rect:S,index:w,newIndex:B,items:f,isOver:D,isSorting:pe,isDragging:$,listeners:C,node:j,overIndex:x,over:F,setNodeRef:vt,setActivatorNodeRef:me,setDroppableNodeRef:O,setDraggableNodeRef:oe,transform:X??I,transition:M()};function M(){if(X||L&&N.current.newIndex===w)return Fj;if(!(Oe&&!Hc(K)||!u)&&(pe||z))return cr.Transition.toString({...u,property:Hb})}}function tO(e,t){var n,a;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(a=e==null?void 0:e.droppable)!=null?a:t.droppable}}function yc(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const nO=[Ue.Down,Ue.Right,Ue.Up,Ue.Left],qb=(e,t)=>{let{context:{active:n,collisionRect:a,droppableRects:r,droppableContainers:i,over:s,scrollableAncestors:l}}=t;if(nO.includes(e.code)){if(e.preventDefault(),!n||!a)return;const o=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const m=r.get(h.id);if(m)switch(e.code){case Ue.Down:a.top<m.top&&o.push(h);break;case Ue.Up:a.top>m.top&&o.push(h);break;case Ue.Left:a.left>m.left&&o.push(h);break;case Ue.Right:a.left<m.left&&o.push(h);break}});const u=RT({collisionRect:a,droppableRects:r,droppableContainers:o});let f=bb(u,"id");if(f===(s==null?void 0:s.id)&&u.length>1&&(f=u[1].id),f!=null){const h=i.get(n.id),m=i.get(f),d=m?r.get(m.id):null,p=m==null?void 0:m.node.current;if(p&&d&&h&&m){const x=qc(p).some((E,S)=>l[S]!==E),v=Yb(h,m),g=aO(h,m),y=x||!v?{x:0,y:0}:{x:g?a.width-d.width:0,y:g?a.height-d.height:0},w={x:d.left,y:d.top};return y.x&&y.y?w:hl(w,y)}}}};function Yb(e,t){return!yc(e)||!yc(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function aO(e,t){return!yc(e)||!yc(t)||!Yb(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const $r=[{key:"mon",label:""},{key:"tue",label:""},{key:"wed",label:""},{key:"thu",label:""},{key:"fri",label:""},{key:"sat",label:""},{key:"sun",label:""}],rO="09",iO="00",Le=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${a}`},Kn=e=>{const t=String(e.getFullYear()).slice(2),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),i=["","","","","","",""][e.getDay()];return`${t}.${n}.${a}(${i})`},ka=e=>{const t=new Date(e),n=String(t.getFullYear()).slice(2),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),o=["","","","","","",""][t.getDay()];return`${n}.${a}.${r}(${o}) ${i}:${s}`},sO=e=>{const t=new Date;return Le(e)===Le(t)},lO=()=>{const[e,t]=_.useState(null),[n,a]=_.useState(!0);return _.useEffect(()=>{de.auth.getSession().then(({data:{session:l}})=>{t(l),a(!1)});const{data:{subscription:s}}=de.auth.onAuthStateChange((l,o)=>{t(o)});return()=>s.unsubscribe()},[]),{session:e,authLoading:n,handleGoogleLogin:async()=>{try{const{error:s}=await de.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/todo-note/"}});if(s)throw s}catch(s){alert(" : "+s.message)}},handleLogout:async()=>{try{const{error:s}=await de.auth.signOut();if(s)throw s}catch(s){alert(" : "+s.message)}}}};function jh({value:e,onChange:t}){const n=_.useRef(null),a=_.useRef(null),r=_.useRef(e),i=_.useRef(!1),[s,l]=_.useState(()=>e&&e.includes(":")?e.split(":")[0]:rO),[o,u]=_.useState(()=>e&&e.includes(":")?e.split(":")[1]:iO);_.useEffect(()=>{if(e&&e.includes(":")&&e!==r.current){const[g,y]=e.split(":");r.current=e,l(g),u(y)}},[e]),_.useEffect(()=>{if(!i.current){i.current=!0;return}const g=`${s}:${o}`;r.current=g,t&&t(g)},[s,o]);const f=(g,y,w)=>{if(!g.current)return;const T=g.current.scrollTop,S=Math.round(T/40),j=String(S).padStart(2,"0");y(j)},h=(g,y)=>{if(!g.current)return;const w=40,T=parseInt(y,10);g.current.scrollTop=T*w};_.useEffect(()=>{h(n,s)},[]),_.useEffect(()=>{h(a,o)},[]);const m=Array.from({length:24},(g,y)=>String(y).padStart(2,"0")),d=Array.from({length:60},(g,y)=>String(y).padStart(2,"0")),p=()=>{const g=(parseInt(s,10)+1)%24,y=String(g).padStart(2,"0");l(y),h(n,y)},b=()=>{const g=(parseInt(s,10)-1+24)%24,y=String(g).padStart(2,"0");l(y),h(n,y)},x=()=>{const g=(parseInt(o,10)+1)%60,y=String(g).padStart(2,"0");u(y),h(a,y)},v=()=>{const g=(parseInt(o,10)-1+60)%60,y=String(g).padStart(2,"0");u(y),h(a,y)};return c.jsxs("div",{className:"apple-time-picker",children:[c.jsxs("div",{className:"picker-arrows-top",children:[c.jsx("button",{className:"picker-arrow-button",onClick:p,children:""}),c.jsx("div",{style:{width:"20px"}}),c.jsx("button",{className:"picker-arrow-button",onClick:x,children:""})]}),c.jsxs("div",{className:"picker-container",children:[c.jsxs("div",{className:"picker-column",ref:n,onScroll:()=>f(n,l),children:[c.jsx("div",{className:"picker-spacer"}),m.map(g=>c.jsx("div",{className:`picker-item ${g===s?"selected":""}`,onClick:()=>{l(g),h(n,g)},children:g},g)),c.jsx("div",{className:"picker-spacer"})]}),c.jsx("div",{className:"picker-separator",children:":"}),c.jsxs("div",{className:"picker-column",ref:a,onScroll:()=>f(a,u),children:[c.jsx("div",{className:"picker-spacer"}),d.map(g=>c.jsx("div",{className:`picker-item ${g===o?"selected":""}`,onClick:()=>{u(g),h(a,g)},children:g},g)),c.jsx("div",{className:"picker-spacer"})]})]}),c.jsxs("div",{className:"picker-arrows-bottom",children:[c.jsx("button",{className:"picker-arrow-button",onClick:b,children:""}),c.jsx("div",{style:{width:"20px"}}),c.jsx("button",{className:"picker-arrow-button",onClick:v,children:""})]}),c.jsx("div",{className:"picker-selection-indicator"})]})}function ry({message:e,onUndo:t,variant:n="default"}){const a=n==="success"?"undo-toast success-toast":"undo-toast";return c.jsxs("div",{className:a,children:[c.jsx("span",{children:e}),t&&c.jsx("button",{onClick:t,className:"undo-button",children:""})]})}function oO({showSidebar:e,setShowSidebar:t,session:n,viewMode:a,setViewMode:r,isReorderMode:i,setIsReorderMode:s,onOpenTrash:l,onOpenRoutine:o,onOpenMemo:u,onScrollToKeyThoughts:f,onOpenGanttChart:h,onOpenEncouragementModal:m,onOpenDummyModal:d,onOpenAddSection:p,onLogout:b}){var x,v;return c.jsxs(c.Fragment,{children:[e&&c.jsx("div",{className:"sidebar-overlay",onClick:()=>t(!1)}),c.jsxs("div",{className:`sidebar ${e?"open":""}`,children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsx("h2",{children:""}),c.jsx("button",{className:"sidebar-close",onClick:()=>t(!1),children:""})]}),n&&n.user&&c.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[((x=n.user.user_metadata)==null?void 0:x.avatar_url)&&c.jsx("img",{src:n.user.user_metadata.avatar_url,alt:"",style:{width:"40px",height:"40px",borderRadius:"50%"}}),c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((v=n.user.user_metadata)==null?void 0:v.full_name)||n.user.email}),c.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.user.email})]})]}),c.jsxs("div",{className:"sidebar-content",children:[c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{const g=a==="vertical"?"horizontal":"vertical";r(g),localStorage.setItem("viewMode",g),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:a==="vertical"?"":""}),c.jsx("span",{children:a==="vertical"?" ":" "})]}),c.jsxs("button",{className:`sidebar-menu-item ${i?"active":""}`,onClick:()=>{s(!i),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:i?"  ":" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{p(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{l(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{o(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{u(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{f(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{h(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{m(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:"  "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{d(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:"  "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{confirm(" ?")&&b()},style:{marginTop:"auto",borderTop:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 100, 100, 0.9)"},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:""})]})]})]})]})}function cO({selectedDate:e,onDateChange:t,onPrevDay:n,onNextDay:a}){return c.jsxs("div",{className:"date-nav-section",children:[c.jsxs("div",{className:"date-display-wrapper",children:[c.jsx("span",{className:"date-display",children:Kn(e)}),c.jsx("input",{type:"date",value:Le(e),onChange:t,className:"date-picker-input"})]}),c.jsx("button",{onClick:n,className:"date-nav-button",children:""}),c.jsx("button",{onClick:a,className:"date-nav-button",children:""})]})}function uO({showSidebar:e,setShowSidebar:t,selectedDate:n,setSelectedDate:a,onDateChange:r,onPrevDay:i,onNextDay:s,showEncouragementEmoji:l,currentEncouragementMessage:o,onEncouragementClick:u,isReorderMode:f,setIsReorderMode:h}){return c.jsx("div",{className:"header-fixed",children:c.jsxs("div",{className:"settings-bar",children:[c.jsx("button",{className:"hamburger-menu",onClick:()=>t(!e),title:"",children:c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{x:"2",y:"4",width:"16",height:"2",rx:"1",fill:"currentColor"}),c.jsx("rect",{x:"2",y:"9",width:"16",height:"2",rx:"1",fill:"currentColor"}),c.jsx("rect",{x:"2",y:"14",width:"16",height:"2",rx:"1",fill:"currentColor"})]})}),c.jsx(cO,{selectedDate:n,onDateChange:r,onPrevDay:i,onNextDay:s}),c.jsx("div",{className:"encouragement-section",children:sO(n)?c.jsx("div",{className:"encouragement-message",onClick:u,title:"    !",children:l?c.jsx("span",{className:"encouragement-emoji",children:"  "}):o||"!"}):c.jsx("button",{onClick:()=>a(new Date),className:"today-link",title:" ",children:"  "})}),f&&c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",fontSize:"0.9rem",color:"#60a5fa"},children:[c.jsx("span",{children:"    "}),c.jsx("button",{onClick:()=>h(!1),style:{padding:"0.25rem 0.75rem",background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa",border:"1px solid rgba(59, 130, 246, 0.4)",borderRadius:"6px",cursor:"pointer",fontSize:"0.85rem",fontWeight:"500"},children:""})]})]})})}function dO({viewMode:e,currentSectionIndex:t,sectionsContainerRef:n}){return e!=="horizontal"?null:c.jsx("div",{className:"section-pagination-dots",onTouchStart:a=>{const r=a.touches[0];a.currentTarget.dataset.touchStartX=r.clientX,a.currentTarget.dataset.touchStartTime=Date.now()},onTouchMove:a=>{a.currentTarget.dataset.touchMoved="true"},onTouchEnd:a=>{const r=parseFloat(a.currentTarget.dataset.touchStartX||"0"),i=parseInt(a.currentTarget.dataset.touchStartTime||"0"),s=a.currentTarget.dataset.touchMoved==="true",l=a.changedTouches[0].clientX,o=Date.now()-i;if(delete a.currentTarget.dataset.touchStartX,delete a.currentTarget.dataset.touchStartTime,delete a.currentTarget.dataset.touchMoved,s&&o<500){const u=r-l,f=n.current;if(!f)return;const h=f.querySelectorAll(".section-block");Math.abs(u)>50&&(u>0&&t<h.length-1?h[t+1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}):u<0&&t>0&&h[t-1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}))}},children:[0,1,2].map(a=>c.jsx("button",{className:`pagination-dot ${t===a?"active":""}`,onClick:()=>{const r=n.current;if(!r)return;const i=r.querySelectorAll(".section-block");i[a]&&i[a].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},a))})}function Xu({title:e,className:t,inputValue:n,setInputValue:a,onAddTodo:r,isAdding:i,placeholder:s,children:l,editable:o=!1,onTitleChange:u,headerActions:f}){const[h,m]=_.useState(!1),[d,p]=_.useState(e),b=()=>{o&&(m(!0),p(e))},x=()=>{m(!1),d.trim()&&d!==e?u==null||u(d.trim()):p(e)},v=g=>{g.key==="Enter"?(g.preventDefault(),x()):g.key==="Escape"&&(m(!1),p(e))};return c.jsxs("div",{className:t,children:[c.jsxs("div",{className:"section-header",children:[h?c.jsx("input",{type:"text",className:"section-title-edit",value:d,onChange:g=>p(g.target.value),onBlur:x,onKeyDown:v,autoFocus:!0}):c.jsx("h3",{className:`section-title ${o?"editable":""}`,onClick:b,children:e}),f&&c.jsx("div",{className:"section-header-actions",children:f})]}),c.jsxs("div",{className:"section-input",children:[c.jsx("input",{type:"text",value:n,onChange:g=>a(g.target.value),onKeyDown:g=>{g.key==="Enter"&&r()},placeholder:s,className:"todo-input",disabled:i}),c.jsx("button",{onClick:r,className:"add-button",disabled:i,children:""})]}),l]})}function Ds({todo:e,index:t,onToggle:n,onDelete:a,onEdit:r,formatDate:i,formatDateOnly:s,isFocused:l,onFocus:o,onAddSubTodo:u,subtodos:f,level:h=0,onCreateRoutine:m,routines:d,onShowRoutineHistory:p,onOpenRoutineSetupModal:b,onOpenHistoryModal:x,currentPageDate:v,isPendingRoutine:g=!1,onRemoveFromUI:y,showSuccessMessage:w}){const[T,E]=_.useState(!1),[S,j]=_.useState(!1),[D,O]=_.useState(e.text),[R,K]=_.useState(!1),[ee,ae]=_.useState(!1),[oe,C]=_.useState(!1),[$,F]=_.useState(""),[me,Te]=_.useState(!1),[vt,pe]=_.useState([]),[He,Oe]=_.useState(!1),[Ne,Ae]=_.useState(!1),[I,B]=_.useState([]),[H,N]=_.useState([]),[L,z]=_.useState([]),[X,M]=_.useState(null),[W,te]=_.useState(!1),[ce,Se]=_.useState(null),[De,je]=_.useState(!1),[Xe,qe]=_.useState([]),[Bt,Lt]=_.useState(""),[Nn,Qr]=_.useState({}),[mn,An]=_.useState(!1),[Wt,hr]=_.useState(null),[Y,V]=_.useState([]),J=e.routine_id?d.find(k=>k.id===e.routine_id):null,[he,le]=_.useState(0),[be,ut]=_.useState(0),[at,rt]=_.useState(0),[Ee,jt]=_.useState(!1),[Ze,Ye]=_.useState(!1),{attributes:et,listeners:Ie,setNodeRef:_t,transform:Mt,transition:Vt,isDragging:Gt}=Gc({id:e.id}),wt={transform:cr.Transform.toString(Mt),transition:Vt,cursor:Gt?"grabbing":"grab"},gn=e.text.length>30,Kt=()=>{j(!0),O(e.text)},Xt=async()=>{D.trim()&&D!==e.text&&await r(e.id,D.trim()),j(!1)},sa=async k=>{k.key==="Enter"?(k.preventDefault(),await Xt()):k.key==="Escape"&&(j(!1),O(e.text))},la=k=>{qe(G=>G.includes(k)?G.filter(ke=>ke!==k):[...G,k])},Cn=k=>["sun","mon","tue","wed","thu","fri","sat"][k],Wn=async k=>{try{const G=typeof v=="string"?v:Le(v),$e=[...k.hidden_dates||[],G],_e=k.routine_id!==null&&k.routine_id!==void 0;let Be={hidden_dates:$e};_e||(Be.deleted=!0,Be.deleted_date=new Date().toISOString());const{error:Je}=await de.from("todos").update(Be).eq("id",k.id);if(Je)throw Je;y&&y(k.id);const it=k.routine_id!==null&&k.routine_id!==void 0;w(it?"  ":"   ",{type:"hideOnDate",todoId:k.id,hiddenDate:G,wasDeleted:!_e})}catch(G){console.error("  :",G.message),alert("   .")}},Na=async k=>{try{const{error:G}=await de.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",k.id);if(G)throw G;y&&y(k.id)}catch(G){console.error(" :",G.message),alert(" .")}},Kc=async k=>{try{if(!k.routine_id){alert("  .");return}const{error:G}=await de.from("routines").update({deleted:!0}).eq("id",k.routine_id);if(G)throw G;const ke=typeof v=="string"?v:Le(v),_e=[...k.hidden_dates||[],ke],{error:Be}=await de.from("todos").update({hidden_dates:_e}).eq("id",k.id);if(Be)throw Be;y&&y(k.id),w("   ",{type:"stopRoutineFromToday",todoId:k.id,routineId:k.routine_id,hiddenDate:ke})}catch(G){console.error("  :",G.message),alert("   .")}},Cl=async k=>{try{if(!k.routine_id){alert("  .");return}const{error:G}=await de.from("routines").update({deleted:!0}).eq("id",k.routine_id);if(G)throw G;const{error:ke}=await de.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",k.id);if(ke)throw ke;y&&y(k.id),w("   ",{type:"deleteRoutineCompletely",todoId:k.id,routineId:k.routine_id})}catch(G){console.error("   :",G.message),alert("   .")}};_.useEffect(()=>{ce==="history"&&!Nn[e.id]&&!mn&&(async()=>{An(!0);try{const{data:G,error:ke}=await de.from("todo_history").select("*").eq("todo_id",e.id).order("changed_at",{ascending:!1});if(ke)throw ke;Qr($e=>({...$e,[e.id]:G||[]}))}catch(G){console.error("Error fetching history:",G)}finally{An(!1)}})()},[ce,e.id,Nn,mn]),_.useEffect(()=>{ce==="routine-stats"&&J&&(!Wt||Wt.id!==J.id)&&(async()=>{try{const{data:G,error:ke}=await de.from("todos").select("*").eq("routine_id",J.id).eq("deleted",!1).maybeSingle();if(ke)throw ke;if(G&&G.visible_dates){const $e=G.visible_dates.sort().map(_e=>{var Be;return{id:`${G.id}-${_e}`,date:_e,text:G.text,completed:((Be=G.completed_dates)==null?void 0:Be.includes(_e))||!1}});V($e),hr(J)}}catch(G){console.error("Error fetching routine history:",G)}})()},[ce,J,Wt]);const Rl=k=>{if(S||Gt)return;const G=k.type.includes("touch")?k.touches[0].clientX:k.clientX,ke=k.type.includes("touch")?k.touches[0].clientY:k.clientY;ut(G),rt(ke),jt(!1),Ye(!0)},Ml=k=>{if(S||Gt||!Ze)return;const G=k.type.includes("touch")?k.touches[0].clientX:k.clientX,ke=k.type.includes("touch")?k.touches[0].clientY:k.clientY,$e=be-G,_e=Math.abs(at-ke);if(!Ee){const Be=Math.abs($e)+_e;if(Be>10){if(Math.abs($e)>Be*.8)jt(!0),k.type.includes("touch")&&k.preventDefault();else if(_e>Math.abs($e)){Ye(!1);return}}}if(Ee){if(k.type.includes("touch")&&k.preventDefault(),$e>0&&$e<=100)le($e);else if($e<0&&he>0){const Be=he+$e;le(Math.max(0,Be)),ut(G)}}},Aa=()=>{Ye(!1),Ee&&(jt(!1),le(he>40?80:0))},Pr=()=>{a(e.id)},Zr=k=>{N(G=>G.includes(k)?G.filter(ke=>ke!==k):[...G,k])};return c.jsxs("div",{ref:_t,style:wt,className:`todo-item-container ${l?"focused":""}`,children:[c.jsxs("span",{className:"todo-number",onClick:()=>o(e.id),children:[l&&c.jsx("span",{className:"focus-icon",children:""}),t+1]}),c.jsxs("div",{className:"todo-item-wrapper",children:[c.jsx("div",{className:"swipe-background",children:c.jsx("button",{onClick:Pr,className:"swipe-delete-button",title:"",children:""})}),c.jsxs("div",{...et,...Ie,className:`todo-item ${e.completed?"completed":""} ${T?"expanded":""} ${Gt?"drag-mode":""}`,style:{transform:`translateX(-${he}px)`,transition:Ee||Gt?"none":"transform 0.3s ease"},onMouseDown:Rl,onMouseMove:Ml,onMouseUp:Aa,onMouseLeave:Aa,onTouchStart:Rl,onTouchMove:Ml,onTouchEnd:Aa,onContextMenu:k=>k.preventDefault(),children:[c.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>n(e.id),className:"todo-checkbox"}),c.jsx("div",{className:"todo-content",onClick:()=>!S&&gn&&E(!T),onDoubleClick:Kt,style:{cursor:S?"text":gn?"pointer":"default"},children:S?c.jsx("input",{type:"text",value:D,onChange:k=>O(k.target.value),onBlur:Xt,onKeyDown:sa,className:"todo-edit-input",autoFocus:!0}):c.jsx("span",{className:`todo-text ${T?"expanded":""}`,children:e.text})}),(()=>{const k=e.completed&&e.completed_at&&new Date(e.completed_at).toISOString().split("T")[0]!==e.date,G=e.routine_id&&J,ke=g||e.is_pending_routine;return(f.length>0||k||G||ke)&&c.jsxs("div",{className:"todo-badges",children:[k&&(()=>{const $e=new Date(e.completed_at).toISOString().split("T")[0],_e=new Date(e.completed_at).getDate();return c.jsxs("span",{className:"completed-date-badge",title:`${$e} `,children:[_e,""]})})(),G&&(()=>{const $e=v||e.date,_e=new Date($e+"T00:00:00"),Be=_e.getMonth()+1,Je=_e.getDate(),yn=["","","","","","",""][_e.getDay()],Fr=`${Be}/${Je}(${yn})`;return c.jsxs("span",{className:"routine-date-badge",title:`${J.text} `,children:["for ",Fr]})})(),ke&&c.jsx("span",{className:"pending-routine-badge",title:"  ",children:""}),f.length>0&&c.jsx("span",{className:"todo-badge clickable",title:" ",onClick:$e=>{$e.stopPropagation(),ee?(K(!1),ae(!1),C(!1)):(K(!0),ae(!0),C(!1),Te(!1),Ae(!1))},children:""})]})})(),!S&&!e.parent_id&&c.jsx("button",{className:"todo-more-button",onClick:k=>{k.stopPropagation(),te(!0),Se(null),je(!1),qe([]),Lt("")},title:"",children:""}),ee&&!e.parent_id&&c.jsxs("div",{className:"subtodos-in-item",children:[f&&f.length>0&&f.map((k,G)=>c.jsx(Ds,{todo:k,index:G,onToggle:n,onDelete:a,onEdit:r,formatDate:i,formatDateOnly:s,isFocused:l,onFocus:o,onAddSubTodo:u,subtodos:[],level:h+1,routines:d,onShowRoutineHistory:p,showSuccessMessage:w,onOpenRoutineSetupModal:b,onOpenHistoryModal:x,currentPageDate:v},k.id)),oe&&c.jsxs("div",{className:"subtodo-input-section",children:[c.jsx("input",{type:"text",value:$,onChange:k=>F(k.target.value),onKeyDown:k=>{k.key==="Enter"&&$.trim()&&(u(e.id,$.trim()),F(""))},placeholder:" ...",className:"subtodo-input",autoFocus:!0}),c.jsx("button",{onClick:()=>{$.trim()&&(u(e.id,$.trim()),F(""))},className:"subtodo-add-button",children:""}),c.jsx("button",{onClick:()=>{F("")},className:"subtodo-cancel-button",children:""})]})]})]})]}),W&&c.jsx("div",{className:"modal-overlay",onClick:()=>te(!1),children:c.jsxs("div",{className:"actions-modal-content",onClick:k=>k.stopPropagation(),children:[c.jsxs("div",{className:"actions-modal-header",children:[c.jsx("h3",{children:" "}),c.jsx("button",{onClick:()=>te(!1),className:"modal-close-button",children:""})]}),c.jsx("div",{className:"todo-edit-section",children:c.jsx("textarea",{value:D,onChange:k=>O(k.target.value),onBlur:()=>{D.trim()!==""&&D!==e.text?r(e.id,D):D.trim()===""&&O(e.text)},className:"todo-edit-textarea",placeholder:"  ...",rows:3})}),c.jsxs("div",{className:"actions-modal-body",children:[c.jsxs("div",{className:"actions-menu",children:[c.jsxs("button",{className:`action-menu-item ${ce==="nanotodo"?"active":""}`,onClick:()=>Se("nanotodo"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item ${ce==="routine"?"active":""}`,onClick:()=>{Se("routine");const k=d.find(G=>G.id===e.routine_id);k?(qe(k.days||[]),Lt(k.time_slot||""),je(!1)):(qe([]),Lt(""),je(!0))},children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item ${ce==="history"?"active":""}`,onClick:()=>Se("history"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),e.routine_id&&J&&c.jsxs("button",{className:`action-menu-item ${ce==="routine-stats"?"active":""}`,onClick:()=>Se("routine-stats"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item delete ${ce==="delete"?"active":""}`,onClick:()=>Se("delete"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]})]}),c.jsxs("div",{className:"actions-detail",children:[!ce&&c.jsx("div",{className:"actions-detail-empty",children:c.jsx("p",{children:"  "})}),ce==="nanotodo"&&c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:" "}),c.jsxs("div",{className:"nanotodo-section-in-modal",children:[f&&f.length>0&&c.jsx("div",{className:"subtodo-list-in-modal",children:f.map(k=>c.jsxs("div",{className:"subtodo-item-in-modal",children:[c.jsx("input",{type:"checkbox",checked:k.completed,onChange:()=>n(k.id),className:"subtodo-checkbox-modal"}),c.jsx("span",{className:`subtodo-text-modal ${k.completed?"completed":""}`,children:k.text}),c.jsx("button",{onClick:()=>a(k.id),className:"subtodo-delete-modal",title:"",children:""})]},k.id))}),c.jsxs("div",{className:"subtodo-input-section-modal",children:[c.jsx("input",{type:"text",value:$,onChange:k=>F(k.target.value),onKeyDown:k=>{k.key==="Enter"&&$.trim()&&(u(e.id,$.trim()),F(""))},placeholder:" ...",className:"subtodo-input-modal"}),c.jsx("button",{onClick:()=>{$.trim()&&(u(e.id,$.trim()),F(""))},className:"subtodo-add-button-modal",children:""})]})]})]}),ce==="routine"&&(()=>{const k=d.find(G=>G.id===e.routine_id);return c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsx("div",{className:"routine-setup-inline",children:k&&!De?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-current-info",children:[c.jsx("div",{className:"routine-info-title",children:" :"}),c.jsx("div",{className:"routine-days-display",children:$r.filter(G=>k.days.includes(G.key)).map(G=>c.jsx("span",{className:"routine-day-badge",children:G.label},G.key))}),k.time_slot&&c.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",k.time_slot]})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:G=>{G.stopPropagation(),k&&(qe(k.days),Lt(k.time_slot||""),je(!0))},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:async G=>{G.stopPropagation(),k&&e&&(await m(e.id,e.text,[],null,!0),te(!1))},className:"routine-remove-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"routine-setup-title",children:De?" :":"  :"}),c.jsx("div",{className:"day-selector-inline",children:$r.map(G=>c.jsx("button",{onClick:ke=>{ke.stopPropagation(),la(G.key)},className:`day-button-inline ${Xe.includes(G.key)?"selected":""}`,children:G.label},G.key))}),c.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[c.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),c.jsx(jh,{value:Bt,onChange:G=>Lt(G)})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:async G=>{G.stopPropagation(),e&&(De&&k?await m(e.id,e.text,Xe,k.id,!1,Bt):await m(e.id,e.text,Xe,null,!1,Bt),je(!1),te(!1))},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:G=>{G.stopPropagation(),je(!1),qe([]),Lt("")},className:"routine-cancel-button",children:""})]})]})})]})})(),ce==="history"&&(()=>{const k=e.visible_dates&&e.visible_dates.length>0?e.visible_dates:[e.date],G=k[0],ke=k.map(_e=>({id:`${e.id}-${_e}`,date:_e})),$e=Nn[e.id]||[];return mn?c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:" ..."})]}):c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsxs("div",{className:"todo-history",children:[c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:":"}),c.jsx("span",{className:"history-value",children:i(e.created_at)})]}),c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:s(G?new Date(G+"T00:00:00"):new Date(e.date+"T00:00:00"))})]}),ke.length>0&&c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:ke.map((_e,Be)=>{const Je=_e.date===e.date,it=s(new Date(_e.date+"T00:00:00"));return c.jsxs("span",{children:[Be>0&&"  ",c.jsxs("span",{style:Je?{fontWeight:"bold",color:"#4CAF50"}:{},children:[it.split("(")[0],Je?"()":""]})]},_e.id)})})]}),(()=>{const _e=new Date(e.created_at).toISOString().split("T")[0],Be=e.date;return _e!==Be&&ke.length===0?c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:s(new Date(e.date+"T00:00:00"))})]}):null})(),$e.length>0&&c.jsxs("div",{className:"history-changes-list",children:[c.jsxs("div",{className:"history-changes-header",children:["  (",$e.length,")"]}),$e.map(_e=>c.jsxs("div",{className:"history-record-compact",children:[c.jsxs("div",{className:"history-record-summary",children:[c.jsxs("div",{className:"history-change-time",children:[i(_e.changed_at),_e.changed_on_date&&c.jsxs("span",{className:"history-page-info",children:[" (: ",s(new Date(_e.changed_on_date+"T00:00:00")),")"]})]}),c.jsx("button",{className:"history-detail-button",onClick:Be=>{Be.stopPropagation(),Zr(_e.id)},children:H.includes(_e.id)?"":""})]}),H.includes(_e.id)&&c.jsxs("div",{className:"history-change",children:[c.jsxs("div",{className:"history-change-item history-before",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:_e.previous_text})]}),c.jsx("div",{className:"history-change-arrow",children:""}),c.jsxs("div",{className:"history-change-item history-after",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:_e.new_text})]})]})]},_e.id))]})]})]})})(),ce==="routine-stats"&&J&&(()=>{if(!Wt||Wt.id!==J.id||Y.length===0)return c.jsxs("div",{className:"actions-detail-content",children:[c.jsxs("h4",{children:[" ",J.text," "]}),c.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:!Wt||Wt.id!==J.id?" ...":" ."})]});const k=Y[0],G=new Date(k.date),ke=new Date,$e={};Y.forEach(Je=>{$e[Je.date]=Je.completed});const _e=[];let Be=new Date(G);for(;Be<=ke;){const Je=Be.getFullYear(),it=Be.getMonth(),yn=`${Je}-${it+1}`;_e.find(fs=>fs.key===yn)||_e.push({key:yn,year:Je,month:it,days:[]});const Fr=_e.find(fs=>fs.key===yn),mr=Le(Be),Wr=Be.getDay(),gr=Cn(Wr),Xc=J.days.includes(gr);Fr.days.push({date:new Date(Be),dateStr:mr,day:Be.getDate(),dayOfWeek:Wr,isCompleted:$e[mr]===!0,isRoutineDay:Xc,hasTodo:$e[mr]!==void 0}),Be.setDate(Be.getDate()+1)}return c.jsxs("div",{className:"actions-detail-content",children:[c.jsxs("h4",{children:[" ",J.text," "]}),c.jsxs("div",{className:"routine-history-content",children:[c.jsx("div",{className:"routine-history-calendar",children:_e.map(Je=>c.jsxs("div",{className:"history-month",children:[c.jsxs("h3",{className:"history-month-title",children:[Je.year," ",Je.month+1,""]}),c.jsxs("div",{className:"history-calendar-grid",children:[c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),Je.days.length>0&&Array(Je.days[0].dayOfWeek).fill(null).map((it,yn)=>c.jsx("div",{className:"history-day-cell empty"},`empty-${yn}`)),Je.days.map((it,yn)=>{if(yn>0&&it.day===1){const mr=6-Je.days[yn-1].dayOfWeek;return c.jsxs(ot.Fragment,{children:[Array(mr).fill(null).map((Wr,gr)=>c.jsx("div",{className:"history-day-cell empty"},`empty-end-${yn}-${gr}`)),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsxs("div",{className:`history-day-cell ${it.isCompleted?"completed":""} ${it.isRoutineDay?"":"not-routine-day"}`,children:[c.jsx("span",{className:"day-number",children:it.day}),it.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]})]},it.dateStr)}return c.jsxs("div",{className:`history-day-cell ${it.isCompleted?"completed":""} ${it.isRoutineDay?"":"not-routine-day"}`,title:`${it.dateStr}${it.isRoutineDay?"":" (  )"}${it.isCompleted?" - ":it.hasTodo?" - ":""}`,children:[c.jsx("span",{className:"day-number",children:it.day}),it.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]},it.dateStr)})]})]},Je.key))}),c.jsxs("div",{className:"routine-history-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:" :"}),c.jsxs("span",{className:"stat-value",children:[Y.length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value completed",children:[Y.filter(Je=>Je.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value incomplete",children:[Y.filter(Je=>!Je.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value",children:[Y.length>0?Math.round(Y.filter(Je=>Je.completed).length/Y.length*100):0,"%"]})]})]})]})]})})(),ce==="delete"&&c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:" "}),c.jsx("p",{className:"delete-confirm-text",children:c.jsx("strong",{children:e.text})}),(()=>{var $e;const k=(($e=e.visible_dates)==null?void 0:$e.length)>0?e.visible_dates:[e.date||e.created_date],G=e.original_todo_id!==null&&e.original_todo_id!==void 0;return e.routine_id!==null&&e.routine_id!==void 0?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"delete-confirm-description",children:"   ?"}),c.jsxs("div",{className:"delete-options-simple",children:[c.jsxs("button",{className:"delete-option-button-simple option-hide",onClick:async()=>{window.confirm(` ?
   .`)&&(await Wn(e),te(!1))},children:[c.jsx("span",{className:"option-icon",children:""}),c.jsxs("div",{className:"option-content",children:[c.jsx("span",{className:"option-title",children:" "}),c.jsx("span",{className:"option-desc",children:"   "})]})]}),c.jsxs("button",{className:"delete-option-button-simple option-future",onClick:async()=>{window.confirm(`  ?
  .`)&&(await Kc(e),te(!1))},children:[c.jsx("span",{className:"option-icon",children:""}),c.jsxs("div",{className:"option-content",children:[c.jsx("span",{className:"option-title",children:" "}),c.jsx("span",{className:"option-desc",children:"    ( )"})]})]}),c.jsxs("button",{className:"delete-option-button-simple option-delete",onClick:async()=>{window.confirm(`    ?
  .`)&&(await Cl(e),te(!1))},children:[c.jsx("span",{className:"option-icon",children:""}),c.jsxs("div",{className:"option-content",children:[c.jsx("span",{className:"option-title",children:" "}),c.jsx("span",{className:"option-desc",children:"++  "})]})]})]})]}):k.length>1||G?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"delete-confirm-description",children:"    .  ?"}),c.jsxs("div",{className:"delete-options-simple",children:[c.jsxs("button",{className:"delete-option-button-simple option-hide",onClick:async()=>{window.confirm(`  ?
   .`)&&(await Wn(e),te(!1))},children:[c.jsx("span",{className:"option-icon",children:""}),c.jsxs("div",{className:"option-content",children:[c.jsx("span",{className:"option-title",children:"  "}),c.jsx("span",{className:"option-desc",children:"   "})]})]}),c.jsxs("button",{className:"delete-option-button-simple option-delete",onClick:async()=>{await Na(e),te(!1)},children:[c.jsx("span",{className:"option-icon",children:""}),c.jsxs("div",{className:"option-content",children:[c.jsx("span",{className:"option-title",children:" "}),c.jsx("span",{className:"option-desc",children:"   ( )"})]})]})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"delete-confirm-description",children:"   ?"}),c.jsx("div",{className:"delete-options-simple",children:c.jsxs("button",{className:"delete-option-button-simple option-delete",onClick:async()=>{await Na(e),te(!1)},children:[c.jsx("span",{className:"option-icon",children:""}),c.jsxs("div",{className:"option-content",children:[c.jsx("span",{className:"option-title",children:" "}),c.jsx("span",{className:"option-desc",children:" "})]})]})})]})})()]})]})]})]})})]})}function fO({showRoutineModal:e,onClose:t,routineInput:n,setRoutineInput:a,isAddingRoutine:r,selectedDays:i,onToggleDay:s,selectedTimeSlot:l,setSelectedTimeSlot:o,onAddRoutine:u,routines:f,editingRoutineId:h,editingRoutineText:m,setEditingRoutineText:d,editingRoutineDays:p,onToggleEditDay:b,onStartEdit:x,onSaveEdit:v,onCancelEdit:g,onDelete:y,onShowHistory:w}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content routine-modal",onClick:T=>T.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-add-section",children:[c.jsx("input",{type:"text",value:n,onChange:T=>a(T.target.value),placeholder:"  ...",className:"routine-input",disabled:r}),c.jsx("div",{className:"day-selector",children:$r.map(T=>c.jsx("button",{onClick:()=>s(T.key),className:`day-button ${i.includes(T.key)?"selected":""}`,disabled:r,children:T.label},T.key))}),c.jsxs("div",{className:"time-slot-selector",children:[c.jsx("label",{className:"time-slot-label",children:"  ()"}),c.jsx(jh,{value:l,onChange:T=>o(T)})]}),c.jsx("button",{onClick:u,className:"add-routine-button",disabled:r||n.trim()==="",children:" "})]}),c.jsx("div",{className:"routine-list",children:f.length===0?c.jsx("p",{className:"empty-message",children:"  ."}):f.map(T=>c.jsx("div",{className:"routine-item",children:h===T.id?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-edit-content",children:[c.jsx("input",{type:"text",value:m,onChange:E=>d(E.target.value),className:"routine-edit-input",placeholder:" "}),c.jsx("div",{className:"day-selector-inline",children:$r.map(E=>c.jsx("button",{onClick:()=>b(E.key),className:`day-button-inline ${p.includes(E.key)?"selected":""}`,children:E.label},E.key))})]}),c.jsxs("div",{className:"routine-item-actions",children:[c.jsx("button",{onClick:v,className:"routine-save-button",disabled:m.trim()===""||p.length===0,children:""}),c.jsx("button",{onClick:g,className:"routine-cancel-edit-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-item-content",children:[c.jsx("span",{className:"routine-text",children:T.text}),c.jsxs("div",{className:"routine-meta",children:[c.jsx("div",{className:"routine-days",children:$r.filter(E=>T.days.includes(E.key)).map(E=>c.jsx("span",{className:"routine-day-badge",children:E.label},E.key))}),T.time_slot&&c.jsx("span",{className:"routine-time-slot",children:T.time_slot})]})]}),c.jsxs("div",{className:"routine-item-actions",children:[c.jsx("button",{onClick:()=>w(T),className:"routine-history-button",title:" ",children:""}),c.jsx("button",{onClick:()=>x(T),className:"routine-edit-button",title:"",children:""}),c.jsx("button",{onClick:()=>y(T.id),className:"routine-delete-button",title:"",children:""})]})]})},T.id))})]})}):null}const hO=e=>["sun","mon","tue","wed","thu","fri","sat"][e];function mO({showRoutineHistory:e,onClose:t,selectedRoutine:n,routineHistoryData:a}){return!e||!n?null:c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content routine-history-modal",onClick:r=>r.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:[" ",n.text," "]}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-history-content",children:[(()=>{if(a.length===0)return c.jsx("p",{className:"empty-message",children:"   ."});const r=a[0],i=new Date(r.date),s=new Date,l={};a.forEach(f=>{l[f.date]=f.completed});const o=[];let u=new Date(i);for(;u<=s;){const f=u.getFullYear(),h=u.getMonth(),m=`${f}-${h+1}`;o.find(g=>g.key===m)||o.push({key:m,year:f,month:h,days:[]});const d=o.find(g=>g.key===m),p=Le(u),b=u.getDay(),x=hO(b),v=n.days.includes(x);d.days.push({date:new Date(u),dateStr:p,day:u.getDate(),dayOfWeek:b,isCompleted:l[p]===!0,isRoutineDay:v,hasTodo:l[p]!==void 0}),u.setDate(u.getDate()+1)}return c.jsx("div",{className:"routine-history-calendar",children:o.map(f=>c.jsxs("div",{className:"history-month",children:[c.jsxs("h3",{className:"history-month-title",children:[f.year," ",f.month+1,""]}),c.jsxs("div",{className:"history-calendar-grid",children:[c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),f.days.length>0&&Array(f.days[0].dayOfWeek).fill(null).map((h,m)=>c.jsx("div",{className:"history-day-cell empty"},`empty-${m}`)),f.days.map((h,m)=>{if(m>0&&h.day===1){const p=6-f.days[m-1].dayOfWeek;return c.jsxs(c.Fragment,{children:[Array(p).fill(null).map((b,x)=>c.jsx("div",{className:"history-day-cell empty"},`empty-end-${m}-${x}`)),c.jsx("div",{className:"history-day-header",children:""},h.dateStr),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsxs("div",{className:`history-day-cell ${h.isCompleted?"completed":""} ${h.isRoutineDay?"":"not-routine-day"}`,children:[c.jsx("span",{className:"day-number",children:h.day}),h.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]})]})}return c.jsxs("div",{className:`history-day-cell ${h.isCompleted?"completed":""} ${h.isRoutineDay?"":"not-routine-day"}`,title:`${h.dateStr}${h.isRoutineDay?"":" (  )"}${h.isCompleted?" - ":h.hasTodo?" - ":""}`,children:[c.jsx("span",{className:"day-number",children:h.day}),h.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]},h.dateStr)})]})]},f.key))})})(),c.jsxs("div",{className:"routine-history-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:" :"}),c.jsxs("span",{className:"stat-value",children:[a.length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value completed",children:[a.filter(r=>r.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value incomplete",children:[a.filter(r=>!r.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value",children:[a.length>0?Math.round(a.filter(r=>r.completed).length/a.length*100):0,"%"]})]})]})]})]})})}function gO({title:e,className:t,content:n,setContent:a,isEditing:r,isSaving:i,textareaRef:s,onStartEdit:l,onSave:o,onCancel:u,onKeyDown:f,placeholder:h,emptyMessage:m,children:d}){return c.jsxs("div",{className:t,children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{className:"section-title",children:e}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[!r&&c.jsx("button",{onClick:l,className:"section-action-button",title:" ",children:" "}),r&&c.jsxs("div",{className:"memo-edit-actions",children:[c.jsx("button",{onClick:o,className:"memo-save-button",disabled:i,children:" "}),c.jsx("button",{onClick:u,className:"memo-cancel-button",disabled:i,children:" "})]})]})]}),r?c.jsx("textarea",{ref:s,value:n,onChange:p=>a(p.target.value),onKeyDown:f,className:"memo-textarea",placeholder:h}):c.jsx("div",{className:"memo-preview",onClick:l,children:n?c.jsx("div",{className:"memo-preview-content",children:n.split(`
`).map((p,b)=>c.jsx("div",{className:"memo-preview-line",children:p||""},b))}):c.jsx("div",{className:"memo-empty",children:m})}),d]})}function Ib({block:e,blocks:t,setBlocks:n,focusedBlockId:a,setFocusedBlockId:r,parentBlock:i,rootSetBlocks:s,draggingChildIds:l=[],activeId:o,overId:u}){const{attributes:f,listeners:h,setNodeRef:m,transform:d,transition:p,isDragging:b}=Gc({id:e.id}),x=e.id===o,v=e.id===u&&o&&o!==u,g={cursor:"grab",opacity:x?.4:1,borderTop:v?"2px solid rgba(99, 102, 241, 0.8)":"2px solid transparent"};return c.jsx("div",{ref:m,style:g,children:c.jsx(Vb,{block:e,blocks:t,setBlocks:n,focusedBlockId:a,setFocusedBlockId:r,dragHandleProps:{...f,...h},parentBlock:i,rootSetBlocks:s,draggingChildIds:l,activeId:o,overId:u})})}function Vb({block:e,blocks:t,setBlocks:n,focusedBlockId:a,setFocusedBlockId:r,dragHandleProps:i,parentBlock:s,rootSetBlocks:l,draggingChildIds:o=[],activeId:u,overId:f}){const h=_.useRef(null),m=_.useRef(!1);_.useEffect(()=>{if(a===e.id&&h.current){h.current.focus();const T=h.current.value.length;h.current.setSelectionRange(T,T)}},[a,e.id]),_.useEffect(()=>{h.current&&(h.current.style.height="auto",h.current.style.height=h.current.scrollHeight+"px")},[e.content]);const d=(T,E,S)=>T.map(j=>{if(j.id===E){const D=S(j);return{...D,children:Array.isArray(D.children)?D.children:[]}}return Array.isArray(j.children)&&j.children.length>0?{...j,children:d(j.children,E,S)}:j}),p=T=>{n(E=>d(E,e.id,S=>({...S,content:T})))},b=T=>{n(E=>d(E,e.id,S=>({...S,children:typeof T=="function"?T(S.children):T})))},x=()=>{n(T=>d(T,e.id,E=>{const S=!E.isOpen;if(S&&(!Array.isArray(E.children)||E.children.length===0)){const j={id:Date.now()+Math.random(),type:"toggle",content:"",children:[],isOpen:!0};return{...E,isOpen:S,children:[j]}}return{...E,isOpen:S,children:Array.isArray(E.children)?E.children:[]}}))},v=()=>{const T=t.findIndex(S=>S.id===e.id);if(T<=0)return;const E=t[T-1];n(S=>{const j=[...S];j.splice(T,1);const D={...E,children:[...Array.isArray(E.children)?E.children:[],e],isOpen:!0};return j[T-1]=D,j})},g=()=>{!s||!l||l(T=>{const E=(D,O,R)=>{const K=[];for(let ee=0;ee<D.length;ee++){const ae=D[ee];if(ae.id===O){const oe=ae.children.filter($=>$.id!==R.id),C={...ae,children:oe};K.push(C),K.push(R)}else if(Array.isArray(ae.children)&&ae.children.length>0){const oe=E(ae.children,O,R);oe!==ae.children?K.push({...ae,children:oe}):K.push(ae)}else K.push(ae)}return K},S=D=>D.map(O=>{const R=Array.isArray(O.children)&&O.children.length>0;return!R&&O.isOpen?{...O,isOpen:!1}:R?{...O,children:S(O.children)}:O}),j=E(T,s.id,e);return S(j)})},y=T=>{const E=[],S=j=>{for(const D of j)E.push(D),D.isOpen&&Array.isArray(D.children)&&D.children.length>0&&S(D.children)};return S(T),E},w=T=>{if(T.key==="Enter"){if(T.shiftKey)return;{if(m.current){T.preventDefault(),T.stopPropagation();return}T.preventDefault(),T.stopPropagation(),m.current=!0;const E=T.target.selectionStart,S={id:Date.now()+Math.random(),type:"toggle",content:"",children:[],isOpen:!0};E===0?(n(j=>{const D=j.findIndex(R=>R.id===e.id);if(D===-1)return j;const O=[...j];return O.splice(D,0,S),O}),setTimeout(()=>{r(e.id),setTimeout(()=>{m.current=!1},100)},0)):(n(j=>{const D=j.findIndex(R=>R.id===e.id);if(D===-1)return j;const O=[...j];return O.splice(D+1,0,S),O}),setTimeout(()=>{r(S.id),setTimeout(()=>{m.current=!1},100)},0))}}else if(T.key==="Tab"&&T.shiftKey)T.preventDefault(),T.stopPropagation(),s&&l&&g();else if(T.key==="Tab"&&!T.shiftKey)T.preventDefault(),T.stopPropagation(),v();else if(T.key==="Backspace"){const E=T.target.selectionStart;if(e.content===""||E===0){const O=(()=>{if(l){let ee=[];return l(ae=>(ee=ae,ae)),ee}return t})(),R=y(O),K=R.findIndex(ee=>ee.id===e.id);if(K>0){T.preventDefault(),T.stopPropagation();const ee=R[K-1],ae=(C,$)=>C.filter(F=>F.id!==$).map(F=>Array.isArray(F.children)&&F.children.length>0?{...F,children:ae(F.children,$)}:F),oe=C=>C.map($=>{const F=Array.isArray($.children)&&$.children.length>0;return!F&&$.isOpen?{...$,isOpen:!1}:F?{...$,children:oe($.children)}:$});l?l(C=>{const $=ae(C,e.id);return oe($)}):n(C=>{const $=ae(C,e.id);return oe($)}),setTimeout(()=>{r(ee.id)},0)}}}else if(T.key==="ArrowUp"&&!T.shiftKey){T.preventDefault(),T.stopPropagation();const S=(()=>{if(l){let O=[];return l(R=>(O=R,R)),O}return t})(),j=y(S),D=j.findIndex(O=>O.id===e.id);D>0&&r(j[D-1].id)}else if(T.key==="ArrowDown"&&!T.shiftKey){T.preventDefault(),T.stopPropagation();const S=(()=>{if(l){let O=[];return l(R=>(O=R,R)),O}return t})(),j=y(S),D=j.findIndex(O=>O.id===e.id);D<j.length-1&&r(j[D+1].id)}};return c.jsxs("div",{className:"notion-block",children:[i&&c.jsx("div",{className:"notion-drag-handle",...i,title:" ",children:""}),c.jsx("div",{className:"notion-block-controls",children:c.jsx("button",{className:"block-type-button",onClick:x,title:": /",style:{transform:e.isOpen?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""})}),c.jsx("div",{className:"notion-block-content",children:c.jsx("textarea",{ref:h,value:e.content,onChange:T=>p(T.target.value),onKeyDown:w,onFocus:()=>r(e.id),placeholder:"",className:"notion-block-input",rows:1})}),e.isOpen&&Array.isArray(e.children)&&e.children.length>0&&c.jsx("div",{className:"notion-block-children",children:e.children.map(T=>c.jsx(Ib,{block:T,blocks:e.children,setBlocks:b,focusedBlockId:a,setFocusedBlockId:r,parentBlock:e,rootSetBlocks:l||n,draggingChildIds:o,activeId:u,overId:f},T.id))})]})}function yO({blocks:e,setBlocks:t,focusedBlockId:n,setFocusedBlockId:a,onShowHistory:r,onOpenViewer:i}){const[s,l]=_.useState(null),[o,u]=_.useState(null),f=fc(Va(Qi,{activationConstraint:{distance:3}}),Va(Yc,{coordinateGetter:qb})),h=E=>E.map(S=>{const j=Array.isArray(S.children)&&S.children.length>0;return!j&&S.isOpen?{...S,isOpen:!1}:j?{...S,children:h(S.children)}:S});_.useEffect(()=>{const E=h(e);JSON.stringify(E)!==JSON.stringify(e)&&t(E)},[e]);const m=E=>{const S=[],j=D=>{for(const O of D)S.push(O),O.isOpen&&Array.isArray(O.children)&&O.children.length>0&&j(O.children)};return j(E),S},d=E=>{const S=[],j=D=>{if(Array.isArray(D.children)&&D.children.length>0)for(const O of D.children)S.push(O.id),j(O)};return j(E),S},p=E=>{const{active:S}=E,D=m(e).find(O=>O.id===S.id);l(D)},b=E=>{const{over:S}=E;u((S==null?void 0:S.id)||null)},x=ot.useMemo(()=>s?d(s):[],[s]),v=E=>{const{active:S,over:j}=E;if(l(null),u(null),!j||S.id===j.id)return;const D=m(e),O=D.find(pe=>pe.id===S.id),R=D.find(pe=>pe.id===j.id);if(!O||!R||d(O).includes(j.id))return;const ee=JSON.parse(JSON.stringify(O)),ae=(pe,He)=>pe.filter(Oe=>Oe.id!==He).map(Oe=>({...Oe,children:Array.isArray(Oe.children)?ae(Oe.children,He):[]})),oe=(pe,He,Oe)=>{let Ne=!1;const Ae=[];for(const I of pe)if(Ae.push(I),I.id===He&&(Ae.push(Oe),Ne=!0),Array.isArray(I.children)&&I.children.length>0){const{newChildren:B,wasInserted:H}=C(I.children,He,Oe);H&&(Ae[Ae.length-1]={...I,children:B},Ne=!0)}return{newTree:Ae,inserted:Ne}},C=(pe,He,Oe)=>{let Ne=!1;const Ae=[];for(const I of pe)if(Ae.push(I),I.id===He&&(Ae.push(Oe),Ne=!0),Array.isArray(I.children)&&I.children.length>0){const{newChildren:B,wasInserted:H}=C(I.children,He,Oe);H&&(Ae[Ae.length-1]={...I,children:B},Ne=!0)}return{newChildren:Ae,wasInserted:Ne}};let $=ae(e,O.id);const F=$.length>0&&$[0].id===R.id;let me,Te=!1;if(F)me=[ee,...$],Te=!0;else{const pe=oe($,R.id,ee);me=pe.newTree,Te=pe.inserted}if(!Te){console.warn("Failed to insert block, keeping original state");return}const vt=h(me);t(vt)},g=m(e).filter(E=>!x.includes(E.id)).map(E=>E.id),y=E=>{const S=j=>j.map(D=>({...D,isOpen:E,children:Array.isArray(D.children)?S(D.children):[]}));t(S(e))},w=E=>{for(const S of E)if(!S.isOpen&&Array.isArray(S.children)&&S.children.length>0||Array.isArray(S.children)&&S.children.length>0&&!w(S.children))return!1;return!0},T=w(e);return c.jsxs("div",{className:"key-thoughts-section section-block",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{className:"section-title",children:"  "}),c.jsxs("div",{style:{display:"flex",gap:"8px"},children:[c.jsx("button",{className:"section-action-button",onClick:()=>i&&i(),title:"  ",children:" "}),c.jsx("button",{className:"section-action-button",onClick:()=>r&&r(),title:"  ",children:" "}),c.jsx("button",{className:"section-action-button",onClick:()=>y(!T),title:T?" ":" ",children:T?" ":" "})]})]}),c.jsx("div",{className:"key-thoughts-content notion-editor",children:c.jsxs(gc,{sensors:f,collisionDetection:hc,onDragStart:p,onDragOver:b,onDragEnd:v,measuring:{droppable:{strategy:Pi.Always}},children:[c.jsx(Ba,{items:g,strategy:Ar,children:e.map(E=>c.jsx(Ib,{block:E,blocks:e,setBlocks:t,focusedBlockId:n,setFocusedBlockId:a,rootSetBlocks:t,draggingChildIds:x,activeId:s==null?void 0:s.id,overId:o},E.id))}),c.jsx(zb,{children:s?c.jsx("div",{className:"drag-overlay-block",children:c.jsx(Vb,{block:s,blocks:e,setBlocks:()=>{},focusedBlockId:null,setFocusedBlockId:()=>{},dragHandleProps:{},parentBlock:null,rootSetBlocks:()=>{},draggingChildIds:[]})}):null})]})})]})}function vO({block:e,depth:t,isSelected:n,isCurrent:a,isOver:r,dropPosition:i,activeId:s,hasChildren:l,text:o,onClick:u,showBottomLine:f,isEditing:h,editingText:m,onDoubleClick:d,onEditChange:p,onSaveEdit:b,onCancelEdit:x,onAddChildBlock:v,onDeleteBlock:g,onToggleTodo:y,onToggleMemo:w}){const{attributes:T,listeners:E,setNodeRef:S}=Gc({id:e.id}),j=_.useRef(null),D=_.useRef(!1);_.useEffect(()=>{h&&j.current&&(j.current.style.height="auto",j.current.style.height=j.current.scrollHeight+"px")},[h,m]);const O=e.id===s,R=r&&i==="top"&&s&&s!==e.id,K=r&&i==="bottom"&&s&&s!==e.id||f,ee=r&&i==="center"&&s&&s!==e.id,ae={cursor:h?"text":"grab",opacity:O?.4:1},oe=h?{}:{...T,...E};return c.jsxs("div",{ref:S,style:ae,"data-block-id":e.id,"data-drop-zone":r?i:"",className:`viewer-block ${n?"selected":""} ${a?"current-selected":""} ${l?"has-children":""} ${R?"show-drop-line-top":""} ${K?"show-drop-line-bottom":""} ${ee?"show-as-child-target":""} ${h?"editing":""}`,onClick:h?void 0:u,onDoubleClick:h?void 0:d,...oe,children:[c.jsx("div",{className:"block-content-area",children:h?c.jsx("textarea",{ref:j,className:"block-edit-input",value:m,onChange:C=>p(C.target.value),onKeyDown:C=>{C.key==="Enter"&&!C.shiftKey?(C.preventDefault(),C.stopPropagation(),D.current=!0,b(),j.current&&j.current.blur()):C.key==="Escape"&&(C.preventDefault(),C.stopPropagation(),D.current=!0,x(),j.current&&j.current.blur())},onBlur:()=>{D.current||b(),D.current=!1},autoFocus:!0,rows:1}):c.jsx("div",{className:"block-text",children:o||" "})}),c.jsx("div",{className:"block-actions-area",children:h?c.jsxs("div",{className:"block-edit-buttons",children:[c.jsx("button",{className:`todo-button ${e.isTodo?"active":""}`,onMouseDown:C=>C.preventDefault(),onClick:C=>{C.stopPropagation(),y(e.id)},title:"TODO  ",children:e.isTodo?"":""}),c.jsx("button",{className:`memo-button ${e.memo?"has-memo":""}`,onMouseDown:C=>C.preventDefault(),onClick:C=>{C.stopPropagation(),w(e.id)},title:"",children:""}),c.jsx("button",{className:"add-child-button",onMouseDown:C=>C.preventDefault(),onClick:C=>{C.stopPropagation(),b(),v(e.id)},title:"  ",children:""}),c.jsx("button",{className:"delete-block-button",onMouseDown:C=>C.preventDefault(),onClick:C=>{C.stopPropagation(),window.confirm("  ?")&&g(e.id)},title:" ",children:""})]}):l&&c.jsx("div",{className:"block-arrow",children:n?"":""})})]})}function pO({blocks:e=[],setBlocks:t,onSave:n,onClose:a}){const[r,i]=_.useState(!0),[s,l]=_.useState([]),[o,u]=_.useState(null),[f,h]=_.useState(null),[m,d]=_.useState(null),[p,b]=_.useState(null),[x,v]=_.useState(""),g=_.useRef({x:0,y:0}),y=_.useRef(null),w=_.useRef(null),T=fc(Va(Qi,{activationConstraint:{delay:500,tolerance:8}}));_.useEffect(()=>{if(s.length===0)return;const I=s.length-1,B=s[I];B&&setTimeout(()=>{let H=null;if(B==="ADD_BUTTON"){const N=document.querySelectorAll(".viewer-column");N[I]&&(H=N[I].querySelector(".add-block-button"))}else H=document.querySelector(`[data-block-id="${B}"]`);H&&H.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},50)},[s]),_.useEffect(()=>{const I=B=>{if(p)return;const H=s.length>0?s.length-1:0,N=s[H],L=N==="ADD_BUTTON",z=S(H),X=z.findIndex(M=>M.id===N);switch(B.key){case"Enter":{if(B.preventDefault(),L)C(H);else if(N){const M=E(e,N);M&&(b(N),v(Ne(M)))}break}case"ArrowUp":{if(B.preventDefault(),L){if(z.length>0){const M=z[z.length-1].id,W=s.slice(0,H);W[H]=M,l(W)}}else if(X>0){const M=z[X-1].id,W=s.slice(0,H);W[H]=M,l(W)}break}case"ArrowDown":{if(B.preventDefault(),X===z.length-1){const M=s.slice(0,H);M[H]="ADD_BUTTON",l(M)}else if(X<z.length-1&&!L){const M=z[X+1].id,W=s.slice(0,H);W[H]=M,l(W)}break}case"ArrowLeft":{B.preventDefault(),s.length>0&&l(s.slice(0,-1));break}case"ArrowRight":{if(B.preventDefault(),N&&N!=="ADD_BUTTON"){const M=E(e,N);if(M)if(M.children&&M.children.length>0){const W=[...s,M.children[0].id];l(W)}else{const W=[...s,"ADD_BUTTON"];l(W)}}else z.length>0&&l([z[0].id]);break}case"Tab":{if(B.preventDefault(),N&&N!=="ADD_BUTTON"){const M=E(e,N);if(M)if(M.children&&M.children.length>0){const W=[...s,M.children[0].id];l(W)}else{const W=[...s,"ADD_BUTTON"];l(W)}}else z.length>0&&l([z[0].id]);break}}B.key==="Tab"&&B.shiftKey&&(B.preventDefault(),s.length>0&&l(s.slice(0,-1)))};return window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)}},[s,p,e]);const E=(I,B)=>{for(const H of I){if(H.id===B)return H;if(H.children){const N=E(H.children,B);if(N)return N}}return null},S=I=>{if(I===0)return e||[];let B=e;for(let H=0;H<I;H++){const N=s[H];if(!N)return[];const L=B.find(z=>z.id===N);if(!L||!L.children||L.children.length===0)return[];B=L.children}return B},j=(I,B,H)=>{if(p||o)return;const N=s.slice(0,I);N[I]=B,l(N)},D=(I,B)=>{B.stopPropagation();const H=E(e,I);H&&(b(I),v(Ne(H)))},O=()=>{if(!p||!t)return;const I=JSON.parse(JSON.stringify(e)),B=(H,N,L)=>{for(let z=0;z<H.length;z++){if(H[z].id===N)return Array.isArray(H[z].content)?H[z].content=[{text:L}]:H[z].content=L,!0;if(H[z].children&&B(H[z].children,N,L))return!0}return!1};B(I,p,x),t(I),b(null),v(""),n&&setTimeout(()=>{n()},100)},R=()=>{b(null),v("")},K=I=>{if(!t)return;const B=JSON.parse(JSON.stringify(e)),H=(L,z)=>{for(let X=0;X<L.length;X++){if(L[X].id===z){const M=`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,W={id:M,content:"",children:[]};return L[X].children||(L[X].children=[]),L[X].children.push(W),M}if(L[X].children){const M=H(L[X].children,z);if(M)return M}}return null};if(H(B,I)){t(B),b(null),v("");const L=$(B,I);if(L!==-1){const z=s.slice(0,L);z[L]=I,l(z)}n&&setTimeout(()=>{n()},100)}},ee=I=>{if(!t)return;const B=JSON.parse(JSON.stringify(e)),H=(N,L)=>{for(let z=0;z<N.length;z++){if(N[z].id===L)return N.splice(z,1),!0;if(N[z].children&&H(N[z].children,L))return!0}return!1};if(H(B,I)){t(B),b(null),v("");const N=s.filter(L=>L!==I);l(N),n&&setTimeout(()=>{n()},100)}},ae=I=>{if(!t)return;const B=JSON.parse(JSON.stringify(e)),H=(N,L)=>{for(let z=0;z<N.length;z++){if(N[z].id===L)return N[z].isTodo=!N[z].isTodo,N[z].isTodo||(N[z].isCompleted=!1),!0;if(N[z].children&&H(N[z].children,L))return!0}return!1};H(B,I)&&(t(B),n&&setTimeout(()=>{n()},100))},oe=I=>{if(!t)return;const B=E(e,I);if(!B)return;const H=B.memo||"",N=prompt(" :",H);if(N===null)return;const L=JSON.parse(JSON.stringify(e)),z=(X,M,W)=>{for(let te=0;te<X.length;te++){if(X[te].id===M)return X[te].memo=W,!0;if(X[te].children&&z(X[te].children,M,W))return!0}return!1};z(L,I,N)&&(t(L),n&&setTimeout(()=>{n()},100))},C=I=>{if(!t)return;const B=JSON.parse(JSON.stringify(e)),H=`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,N={id:H,content:"",children:[]};if(I===0)B.push(N);else{const L=s[I-1];if(!L)return;const z=X=>{for(let M=0;M<X.length;M++){if(X[M].id===L)return X[M].children||(X[M].children=[]),X[M].children.push(N),!0;if(X[M].children&&z(X[M].children))return!0}return!1};z(B)}t(B),setTimeout(()=>{b(H),v("")},50),n&&setTimeout(()=>{n()},100)},$=(I,B,H=0)=>{for(const N of I){if(N.id===B)return H;if(N.children){const L=$(N.children,B,H+1);if(L!==-1)return L}}return-1},F=(I,B)=>{if(!I||B===0)return null;const H=document.querySelector(`[data-block-id="${I}"]`);if(!H)return"top";const N=H.getBoundingClientRect(),z=(B-N.top)/N.height;let X;if(z<0?X="top":z>1?X="bottom":z<.25?X="top":z>.75?X="bottom":X="center",X==="center"&&E(e,I)){const W=$(e,I);if(W!==-1){const te=s.slice(0,W);te[W]=I,JSON.stringify(te)!==JSON.stringify(s)&&l(te)}}return X},me=(I,B,H)=>{if(!t)return;const N=JSON.parse(JSON.stringify(e));let L=null;const z=(M,W)=>{for(let te=0;te<M.length;te++){if(M[te].id===W)return L=M.splice(te,1)[0],!0;if(M[te].children&&z(M[te].children,W))return!0}return!1};if(z(N,I),!L)return;const X=(M,W,te,ce)=>{for(let Se=0;Se<M.length;Se++){if(M[Se].id===W){const De=ce==="bottom"?Se+1:Se;return M.splice(De,0,te),!0}if(M[Se].children&&X(M[Se].children,W,te,ce))return!0}return!1};X(N,B,L,H)&&t(N)},Te=(I,B)=>{if(!t)return;const H=JSON.parse(JSON.stringify(e));let N=null;const L=(M,W)=>{for(let te=0;te<M.length;te++){if(M[te].id===W)return N=M.splice(te,1)[0],!0;if(M[te].children&&L(M[te].children,W))return!0}return!1};if(L(H,I),!N)return;const z=(M,W,te)=>{for(let ce=0;ce<M.length;ce++){if(M[ce].id===W)return M[ce].children||(M[ce].children=[]),M[ce].children.push(te),!0;if(M[ce].children&&z(M[ce].children,W,te))return!0}return!1};if(!z(H,B,N))return;if(t(H),E(H,B)){const M=(te,ce,Se=0)=>{for(const De of te){if(De.id===ce)return Se;if(De.children){const je=M(De.children,ce,Se+1);if(je!==-1)return je}}return-1},W=M(H,B);if(W!==-1){const te=s.slice(0,W);te[W]=B,l(te)}}},vt=I=>{const{active:B,activatorEvent:H}=I,N=E(e,B.id);u(N),w.current=B.id,document.body.classList.add("dragging"),H&&H.clientY!==void 0&&(g.current={x:H.clientX||0,y:H.clientY});const L=X=>{g.current={x:X.clientX,y:X.clientY};const M=y.current||w.current;if(M){const W=F(M,X.clientY);W&&d(W)}},z=X=>{if(X.touches[0]){g.current={x:X.touches[0].clientX,y:X.touches[0].clientY};const M=y.current||w.current;if(M){const W=F(M,X.touches[0].clientY);W&&d(W)}}};window.addEventListener("mousemove",L),window.addEventListener("touchmove",z),window._dragMoveCleanup=()=>{window.removeEventListener("mousemove",L),window.removeEventListener("touchmove",z)}},pe=I=>{const{over:B}=I;if(!B){h(null),d(null),y.current=null;return}y.current=B.id,h(B.id);const H=g.current.y,N=F(B.id,H);N&&d(N)},He=async I=>{const{active:B,over:H}=I;let N=!1;H&&B.id!==H.id&&(m==="center"?(Te(B.id,H.id),N=!0):(me(B.id,H.id,m),N=!0)),u(null),h(null),d(null),y.current=null,w.current=null,document.body.classList.remove("dragging"),window._dragMoveCleanup&&(window._dragMoveCleanup(),window._dragMoveCleanup=null),N&&n&&setTimeout(()=>{n()},100)},Oe=()=>{u(null),h(null),d(null),y.current=null,w.current=null,document.body.classList.remove("dragging"),window._dragMoveCleanup&&(window._dragMoveCleanup(),window._dragMoveCleanup=null)},Ne=I=>typeof I.content=="string"?I.content:Array.isArray(I.content)?I.content.map(B=>B.text||"").join(""):"",Ae=Math.min(s.length+1,10);return c.jsx(gc,{sensors:T,collisionDetection:hc,onDragStart:vt,onDragOver:pe,onDragEnd:He,onDragCancel:Oe,children:c.jsxs("div",{className:`key-thoughts-viewer-page ${r?"dark-mode":""}`,children:[c.jsxs("header",{className:"viewer-header",children:[c.jsx("button",{className:"viewer-close-button",onClick:a,"aria-label":" ",children:""}),c.jsx("h2",{className:"viewer-title",children:" "}),c.jsx("button",{className:"dark-mode-toggle",onClick:()=>i(!r),"aria-label":r?"  ":"  ",children:r?"Light":"Dark"})]}),c.jsx("main",{className:"viewer-content",children:c.jsx("div",{className:"columns-container",children:Array.from({length:Ae}).map((I,B)=>{const H=S(B),N=s[B];if(H.length===0&&B>0&&!s[B-1])return null;const L=H.map(M=>M.id),z=f?$(e,f):-1,X=z!==-1&&z+1===B&&m==="center"&&o;return c.jsxs("div",{className:"viewer-column",children:[c.jsx("div",{className:"column-header",children:B===0?"A":B===1?"B":B===2?"C":String.fromCharCode(65+B)}),c.jsx(Ba,{items:L,strategy:Ar,children:c.jsxs("div",{className:"column-blocks",children:[H.length===0&&X?c.jsx("div",{className:"empty-column-drop-line"}):H.map((M,W)=>{const te=M.id===N,ce=M.id===f,Se=M.children&&M.children.length>0,De=Ne(M),Xe=W===H.length-1&&X,qe=s.length>0&&s[s.length-1]===M.id;return c.jsx(vO,{block:M,depth:B,isSelected:te,isCurrent:qe,isOver:ce,dropPosition:m,activeId:o==null?void 0:o.id,hasChildren:Se,text:De,onClick:()=>j(B,M.id),showBottomLine:Xe,isEditing:p===M.id,editingText:x,onDoubleClick:Bt=>D(M.id,Bt),onEditChange:v,onSaveEdit:O,onCancelEdit:R,onAddChildBlock:K,onDeleteBlock:ee,onToggleTodo:ae,onToggleMemo:oe},M.id)}),(B===0||s[B-1]!=="ADD_BUTTON")&&c.jsx("button",{className:`add-block-button ${N==="ADD_BUTTON"?"selected":""}`,onClick:()=>C(B),children:"+  "})]})})]},B)})})}),c.jsx(zb,{children:o?c.jsxs("div",{className:"viewer-block dragging-overlay",children:[c.jsx("div",{className:"block-content-area",children:c.jsx("div",{className:"block-text",children:Ne(o)||" "})}),c.jsx("div",{className:"block-actions-area",children:o.children&&o.children.length>0&&c.jsx("div",{className:"block-arrow",children:""})})]}):null})]})})}function bO({showTrashModal:e,onClose:t,trashedItems:n,onEmptyTrash:a,onRestoreFromTrash:r,onPermanentDelete:i,formatDate:s}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content trash-modal",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:" "}),c.jsxs("div",{className:"modal-header-actions",children:[n.length>0&&c.jsx("button",{onClick:a,className:"empty-trash-button",title:" ",children:" "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]})]}),c.jsx("div",{className:"trash-list",children:n.length===0?c.jsx("p",{className:"empty-message",children:" ."}):n.map(l=>{const o=l.visible_dates||(l.date?[l.date]:[]),u=o.length>1||l.original_todo_id,f=l.original_todo_id!==null&&l.original_todo_id!==void 0,h=l.hidden_dates&&l.hidden_dates.length>0;let m="  ";return f?m="   ( )":h?m="  ":l.deleted===!0&&(m=o.length>1?"  ":""),c.jsxs("div",{className:"trash-item",children:[c.jsxs("div",{className:"trash-item-content",children:[c.jsx("span",{className:`trash-text ${l.completed?"completed":""}`,children:l.text}),c.jsxs("div",{className:"trash-metadata",children:[c.jsxs("span",{className:"trash-date",children:[": ",s(l.created_at)]}),l.deleted_date&&c.jsxs("span",{className:"trash-deleted-date",children:[": ",l.deleted_date]}),c.jsx("span",{className:`trash-delete-type ${f?"old-style":h?"partial":"complete"}`,children:m})]}),u&&c.jsxs("div",{className:"trash-carryover-info",children:[c.jsx("div",{className:"carryover-label",children:"  :"}),c.jsx("div",{className:"carryover-dates",children:o.length>0?o.map((d,p)=>c.jsx("span",{className:"carryover-date-badge",children:d},p)):l.original_todo_id?c.jsxs("span",{className:"carryover-note",children:["    (original_id: ",l.original_todo_id,")"]}):null}),h&&c.jsxs("div",{className:"hidden-dates-info",children:[c.jsx("span",{className:"hidden-label",children:"  :"}),l.hidden_dates.map((d,p)=>c.jsx("span",{className:"hidden-date-badge",children:d},p))]})]})]}),c.jsxs("div",{className:"trash-actions",children:[c.jsx("button",{onClick:()=>r(l.id),className:"restore-button",title:"",children:""}),c.jsx("button",{onClick:()=>i(l.id),className:"permanent-delete-button",title:" ",children:" "})]})]},l.id)})})]})}):null}function _O({showDummyModal:e,onClose:t,onCreateDummyData:n,onRemoveDuplicates:a,dummySessions:r,onDeleteDummySession:i,onDeleteAllDummies:s,formatDate:l}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content routine-modal",onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-add-section",children:[c.jsx("h3",{children:"  "}),c.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:"14~18    20    ."}),c.jsx("button",{onClick:n,className:"add-routine-button",style:{width:"100%"},children:"    (20)"})]}),c.jsxs("div",{className:"routine-add-section",children:[c.jsx("h3",{children:"  "}),c.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:"         ."}),c.jsx("button",{onClick:a,className:"add-routine-button",style:{width:"100%",background:"#ff6b6b"},children:"   "})]}),c.jsxs("div",{className:"routine-list",style:{marginTop:"20px"},children:[c.jsx("h3",{children:"  "}),r.length===0?c.jsx("p",{className:"empty-message",children:"   ."}):c.jsxs(c.Fragment,{children:[r.map((o,u)=>c.jsxs("div",{className:"routine-item",children:[c.jsxs("div",{className:"routine-item-content",children:[c.jsxs("span",{className:"routine-text",children:[" #",u+1,": ",o.sessionId]}),c.jsxs("div",{className:"routine-days",children:[c.jsxs("span",{className:"routine-day-badge",children:[" ",o.count,""]}),o.historyCount>0&&c.jsxs("span",{className:"routine-day-badge",children:[" ",o.historyCount,""]}),c.jsx("span",{className:"routine-day-badge",style:{fontSize:"11px"},children:l(o.createdAt)})]})]}),c.jsx("div",{className:"routine-item-actions",children:c.jsx("button",{onClick:()=>{window.confirm(` #${u+1} ?`)&&i(o.sessionId)},className:"routine-delete-button",title:"  ",children:""})})]},o.sessionId)),c.jsx("button",{onClick:()=>{window.confirm("   ?")&&s()},className:"routine-delete-button",style:{width:"100%",marginTop:"15px",padding:"12px"},children:"    "})]})]})]})}):null}function wO({showGanttChart:e,onClose:t,ganttData:n,ganttPeriod:a,setGanttPeriod:r,formatDateOnly:i}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content gantt-modal",onClick:s=>s.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  -  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"gantt-filter",children:c.jsx("div",{className:"gantt-period-buttons",children:[{value:"1week",label:" 1"},{value:"2weeks",label:" 2"},{value:"1month",label:" 1"},{value:"3months",label:" 3"},{value:"6months",label:" 6"},{value:"all",label:""}].map(s=>c.jsx("button",{className:`period-button ${a===s.value?"active":""}`,onClick:()=>r(s.value),children:s.label},s.value))})}),c.jsx("div",{className:"gantt-content",children:n.length===0?c.jsx("p",{className:"empty-message",children:" ."}):c.jsx("div",{className:"gantt-chart",children:(()=>{const s=n.flatMap(h=>h.dates),l=[...new Set(s)].sort((h,m)=>new Date(h)-new Date(m));if(l.length===0)return c.jsx("p",{className:"empty-message",children:"  ."});const o=new Date(l[0]),u=new Date(l[l.length-1]),f=[];for(let h=new Date(o);h<=u;h.setDate(h.getDate()+1))f.push(new Date(h).toISOString().split("T")[0]);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"gantt-header",children:[c.jsx("div",{className:"gantt-task-column",children:" "}),c.jsx("div",{className:"gantt-timeline",children:f.map(h=>c.jsx("div",{className:"gantt-date-cell",children:i(new Date(h+"T00:00:00")).split("(")[0]},h))})]}),n.map((h,m)=>{const d=new Set(h.dates);return c.jsxs("div",{className:"gantt-row",children:[c.jsx("div",{className:"gantt-task-column",title:h.text,children:c.jsx("span",{className:h.completed?"completed-task":"",children:h.text})}),c.jsx("div",{className:"gantt-timeline",children:f.map(p=>{if(!d.has(p))return c.jsx("div",{className:"gantt-date-cell"},p);const x=p===h.startDate,v=p===h.completedDate;let g="gantt-date-cell has-task";return x?g+=" start-date":v?g+=" completed-date":g+=" middle-date",c.jsx("div",{className:g,children:v?c.jsx("span",{className:"completed-circle",children:""}):""},p)})})]},h.originalId)})]})})()})})]})}):null}function SO({showEncouragementModal:e,onClose:t,encouragementMessages:n,newEncouragementMessage:a,setNewEncouragementMessage:r,onAddEncouragementMessage:i,editingEncouragementId:s,editingEncouragementText:l,setEditingEncouragementId:o,setEditingEncouragementText:u,onUpdateEncouragementMessage:f,onDeleteEncouragementMessage:h}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content encouragement-modal",onClick:m=>m.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"encouragement-add-section",children:[c.jsx("input",{type:"text",value:a,onChange:m=>r(m.target.value),placeholder:"   ...",className:"encouragement-input",onKeyDown:async m=>{m.key==="Enter"&&a.trim()!==""&&(await i(a.trim()),r(""))}}),c.jsx("button",{onClick:async()=>{a.trim()!==""&&(await i(a.trim()),r(""))},className:"add-encouragement-button",disabled:a.trim()==="",children:""})]}),c.jsx("div",{className:"encouragement-list",children:n.length===0?c.jsx("p",{className:"empty-message",children:"   ."}):n.map((m,d)=>c.jsx("div",{className:"encouragement-item",children:s===d?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"text",value:l,onChange:p=>u(p.target.value),className:"encouragement-edit-input",placeholder:" "}),c.jsxs("div",{className:"encouragement-item-actions",children:[c.jsx("button",{onClick:async()=>{l.trim()!==""&&(await f(d,l.trim()),o(null),u(""))},className:"encouragement-save-button",disabled:l.trim()==="",children:""}),c.jsx("button",{onClick:()=>{o(null),u("")},className:"encouragement-cancel-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"encouragement-text",children:m}),c.jsxs("div",{className:"encouragement-item-actions",children:[c.jsx("button",{onClick:()=>{o(d),u(m)},className:"encouragement-edit-button",title:"",children:""}),c.jsx("button",{onClick:async()=>{window.confirm("   ?")&&await h(d)},className:"encouragement-delete-button",title:"",children:""})]})]})},d))})]})}):null}function xO({showKeyThoughtsHistory:e,onClose:t,keyThoughtsHistory:n,onRestoreVersion:a}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content",onClick:r=>r.stopPropagation(),style:{maxWidth:"800px",maxHeight:"80vh"},children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"    "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:n.length===0?c.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"  ."}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:n.map(r=>c.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"16px",backgroundColor:"#f9f9f9"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"bold",fontSize:"14px"},children:new Date(r.created_at).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}),r.description&&c.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:r.description})]}),c.jsx("button",{onClick:()=>a(r.id),style:{padding:"6px 12px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:""})]}),c.jsx("div",{style:{fontSize:"12px",color:"#666",maxHeight:"100px",overflowY:"auto",backgroundColor:"white",padding:"8px",borderRadius:"4px",whiteSpace:"pre-wrap"},children:Array.isArray(r.content)?r.content.map((i,s)=>c.jsxs("div",{style:{marginBottom:"4px"},children:[i.type==="toggle"?" ":"",i.content||"( )"]},s)):"( )"})]},r.id))})})]})}):null}function EO({isOpen:e,onClose:t,onAddSection:n}){const[a,r]=_.useState(""),[i,s]=_.useState(""),l=["","","","","","","","","","","",""],o=u=>{u.preventDefault(),a.trim()&&(n({name:a.trim(),icon:i}),r(""),s(""),t())};return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content add-section-modal",onClick:u=>u.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{className:"modal-close-button",onClick:t,children:""})]}),c.jsxs("form",{onSubmit:o,className:"add-section-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" "}),c.jsx("input",{type:"text",value:a,onChange:u=>r(u.target.value),placeholder:": ,  , ...",className:"section-name-input",autoFocus:!0,maxLength:20})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" "}),c.jsx("div",{className:"emoji-grid",children:l.map(u=>c.jsx("button",{type:"button",className:`emoji-button ${i===u?"selected":""}`,onClick:()=>s(u),children:u},u))}),c.jsx("div",{className:"custom-emoji-input",children:c.jsx("input",{type:"text",value:i,onChange:u=>s(u.target.value.slice(0,2)),placeholder:" ",className:"emoji-input",maxLength:2})})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:""}),c.jsxs("div",{className:"section-preview",children:[i," ",a||" "]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{type:"button",onClick:t,className:"cancel-button",children:""}),c.jsx("button",{type:"submit",className:"submit-button",disabled:!a.trim(),children:""})]})]})]})}):null}function TO({authLoading:e,session:t,handleGoogleLogin:n}){return e?c.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),c.jsx("div",{children:" ..."})]})}):t?null:c.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:c.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",maxWidth:"400px"},children:[c.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"1rem"},children:" Todo Note"}),c.jsx("p",{style:{fontSize:"1.1rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"2rem"},children:"     "}),c.jsxs("button",{onClick:n,style:{padding:"1rem 2rem",fontSize:"1.1rem",background:"#646cff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 auto"},children:[c.jsx("span",{children:""}),"Google "]})]})})}function jO(e){const[t,n]=_.useState(["memo","routine","normal","key-thoughts"]),[a,r]=_.useState(!1),i=async()=>{var h;if((h=e==null?void 0:e.user)!=null&&h.id)try{const{data:m,error:d}=await de.from("user_settings").select("setting_value").eq("setting_key","section_order").maybeSingle();if(d){console.error("   :",d.message);return}if(m&&m.setting_value){const p=JSON.parse(m.setting_value);n(p)}}catch(m){console.error("   :",m.message)}},s=async h=>{var m;if((m=e==null?void 0:e.user)!=null&&m.id)try{const{data:d,error:p}=await de.from("user_settings").select("id").eq("setting_key","section_order").maybeSingle();if(p){console.error("   :",p.message);return}d?await de.from("user_settings").update({setting_value:JSON.stringify(h),updated_at:new Date().toISOString()}).eq("setting_key","section_order"):await de.from("user_settings").insert([{setting_key:"section_order",setting_value:JSON.stringify(h),user_id:e.user.id}])}catch(d){console.error("   :",d.message)}};return{sectionOrder:t,setSectionOrder:n,isReorderMode:a,setIsReorderMode:r,fetchSectionOrder:i,saveSectionOrder:s,moveSectionLeft:h=>{n(m=>{const d=m.indexOf(h);if(d<=0)return m;const p=[...m];return[p[d-1],p[d]]=[p[d],p[d-1]],s(p),p})},moveSectionRight:h=>{n(m=>{const d=m.indexOf(h);if(d===-1||d>=m.length-1)return m;const p=[...m];return[p[d],p[d+1]]=[p[d+1],p[d]],s(p),p})},handleSectionDragEnd:h=>{const{active:m,over:d}=h;m.id!==(d==null?void 0:d.id)&&n(p=>{const b=p.indexOf(m.id),x=p.indexOf(d.id),v=Th(p,b,x);return s(v),v})},handleSectionsContainerDoubleClick:h=>{a&&h.target===h.currentTarget&&r(!1)}}}function OO(e){const[t,n]=_.useState(""),[a,r]=_.useState(!1),[i,s]=_.useState(!1),[l,o]=_.useState(""),u=_.useRef(null),f=async()=>{try{const{data:b,error:x}=await de.from("spec_memos").select("content").order("created_at",{ascending:!1}).limit(1);if(x)throw x;const v=b&&b.length>0?b[0].content:"";n(v),o(v)}catch(b){console.error("   :",b.message),n(""),o("")}},h=()=>{r(!0),o(t),setTimeout(()=>{u.current&&u.current.focus()},0)},m=async()=>{var b;if(!i)try{s(!0);const{data:x}=await de.from("spec_memos").select("id").order("created_at",{ascending:!1}).limit(1);x&&x.length>0?await de.from("spec_memos").update({content:t,updated_at:new Date().toISOString()}).eq("id",x[0].id):await de.from("spec_memos").insert([{content:t,user_id:(b=e==null?void 0:e.user)==null?void 0:b.id}]),o(t),r(!1)}catch(x){console.error("  :",x.message),alert("  .")}finally{s(!1)}},d=()=>{n(l),r(!1)};return{memoContent:t,setMemoContent:n,isEditingMemoInline:a,setIsEditingMemoInline:r,isSavingMemo:i,memoOriginalContent:l,memoTextareaRef:u,fetchMemoContent:f,handleStartEditMemoInline:h,handleSaveMemoInline:m,handleCancelEditMemoInline:d,handleMemoKeyDown:b=>{(b.metaKey||b.ctrlKey)&&b.key==="s"&&(b.preventDefault(),m()),b.key==="Escape"&&(b.preventDefault(),d())}}}function DO(e){if(!Array.isArray(e)||e.length===0)return[];const t=new Map;e.forEach(r=>{t.set(r.block_id,{id:r.block_id,type:r.type||"toggle",content:r.content||"",isOpen:r.is_open!==void 0?r.is_open:!0,isTodo:r.is_todo||!1,isCompleted:r.is_completed||!1,memo:r.memo||"",children:[],_dbId:r.id,_parentId:r.parent_id,_position:r.position,_depth:r.depth,_createdAt:r.created_at,_updatedAt:r.updated_at})});const n=[];e.forEach(r=>{const i=t.get(r.block_id);if(r.parent_id===null||r.parent_id===void 0)n.push(i);else{const s=t.get(r.parent_id);s?s.children.push(i):(console.warn(`Parent not found for block ${r.block_id}, moving to root`),n.push(i))}});const a=r=>{r.sort((i,s)=>(i._position||0)-(s._position||0)),r.forEach(i=>{i.children.length>0&&a(i.children)})};return a(n),n}function of(e,t=null,n=0){if(!Array.isArray(e))return[];let a=[];return e.forEach((r,i)=>{const{children:s,_dbId:l,_parentId:o,_position:u,_depth:f,_createdAt:h,_updatedAt:m,...d}=r,p={block_id:d.id||r.id,content:d.content||"",type:d.type||"toggle",parent_id:t,position:i,depth:n,is_open:d.isOpen!==void 0?d.isOpen:!0,is_todo:d.isTodo||!1,is_completed:d.isCompleted||!1,memo:d.memo||""};if(a.push(p),s&&s.length>0){const b=of(s,d.id||r.id,n+1);a=a.concat(b)}}),a}function iy(){return`${Date.now()}.${Math.random().toString(36).substring(2,9)}`}function cf(e){return Array.isArray(e)?e.map(t=>({...t,children:Array.isArray(t.children)?cf(t.children):[]})):[]}function NO(e){const[t,n]=_.useState([{id:iy(),type:"toggle",content:"",children:[],isOpen:!0}]),[a,r]=_.useState(!1),[i,s]=_.useState(!1),l=_.useRef(null),o=_.useRef(null),[u,f]=_.useState(null),[h,m]=_.useState([]),[d,p]=_.useState(!1),b=async()=>{var O;if((O=e==null?void 0:e.user)!=null&&O.id){r(!0);try{const{data:R,error:K}=await de.from("key_thought_blocks").select("*").eq("user_id",e.user.id).order("position",{ascending:!0});if(K){console.error("  :",K.message);return}if(R&&R.length>0){const ee=DO(R);n(ee),l.current=JSON.parse(JSON.stringify(ee))}}catch(R){console.error("  :",R.message)}finally{r(!1)}}},x=async O=>{var R;if(!((R=e==null?void 0:e.user)!=null&&R.id))return null;try{const K=O.id||iy(),{data:ee,error:ae}=await de.from("key_thought_blocks").insert([{user_id:e.user.id,block_id:K,content:O.content||"",type:O.type||"toggle",parent_id:O.parent_id||null,position:O.position||0,depth:O.depth||0,is_open:O.isOpen!==void 0?O.isOpen:!0}]).select().single();return ae?(console.error("  :",ae.message),null):ee}catch(K){return console.error("  :",K.message),null}},v=async(O,R)=>{var K;if(!((K=e==null?void 0:e.user)!=null&&K.id))return!1;try{const ee={};R.content!==void 0&&(ee.content=R.content),R.type!==void 0&&(ee.type=R.type),R.isOpen!==void 0&&(ee.is_open=R.isOpen),R.position!==void 0&&(ee.position=R.position),R.parent_id!==void 0&&(ee.parent_id=R.parent_id),R.depth!==void 0&&(ee.depth=R.depth),ee.updated_at=new Date().toISOString();const{error:ae}=await de.from("key_thought_blocks").update(ee).eq("user_id",e.user.id).eq("block_id",O);return ae?(console.error("  :",ae.message),!1):!0}catch(ee){return console.error("  :",ee.message),!1}},g=async O=>{var R;if(!((R=e==null?void 0:e.user)!=null&&R.id))return!1;try{const{error:K}=await de.from("key_thought_blocks").delete().eq("user_id",e.user.id).eq("block_id",O);return K?(console.error("  :",K.message),!1):!0}catch(K){return console.error("  :",K.message),!1}},y=async(O,R,K,ee)=>{var ae;if(!((ae=e==null?void 0:e.user)!=null&&ae.id))return!1;try{const{error:oe}=await de.from("key_thought_blocks").update({parent_id:R,position:K,depth:ee,updated_at:new Date().toISOString()}).eq("user_id",e.user.id).eq("block_id",O);return oe?(console.error("  :",oe.message),!1):!0}catch(oe){return console.error("  :",oe.message),!1}},w=async()=>{var O;if(!((O=e==null?void 0:e.user)!=null&&O.id))return!1;s(!0);try{await de.from("key_thought_blocks").delete().eq("user_id",e.user.id);const R=of(t);if(R.length>0){const{error:K}=await de.from("key_thought_blocks").insert(R.map(ee=>({...ee,user_id:e.user.id})));if(K)return console.error("  :",K.message),!1}return await E(t),l.current=JSON.parse(JSON.stringify(t)),!0}catch(R){return console.error("  :",R.message),!1}finally{s(!1)}},T=(O,R)=>{if(!O||O.length===0||O.length!==R.length)return!0;const K=(ee,ae)=>{for(let oe=0;oe<ee.length;oe++){const C=ee[oe],$=ae[oe];if(C.type!==$.type)return!0;const F=C.children?C.children.length:0,me=$.children?$.children.length:0;if(F!==me)return!0;const Te=C.content||"",vt=$.content||"";if(Math.abs(Te.length-vt.length)>=20||me>0&&K(C.children,$.children))return!0}return!1};return K(O,R)},E=async O=>{var R;if((R=e==null?void 0:e.user)!=null&&R.id)try{if(!T(l.current,O))return;const{error:K}=await de.from("key_thoughts_history").insert([{content:O,description:" ",user_id:e.user.id}]);K&&console.error("   :",K.message)}catch(K){console.error("   :",K.message)}},S=async()=>{try{const O=new Date().toDateString();if(o.current===O)return;const R=new Date;R.setDate(R.getDate()-30);const{error:K}=await de.from("key_thoughts_history").delete().lt("created_at",R.toISOString());K?console.error("   :",K.message):(o.current=O,console.log("   "))}catch(O){console.error("   :",O.message)}},j=async()=>{try{const{data:O,error:R}=await de.from("key_thoughts_history").select("*").order("created_at",{ascending:!1}).limit(50);if(R){console.error("   :",R.message);return}m(O||[])}catch(O){console.error("   :",O.message)}};return{blocks:t,setBlocks:n,loading:a,isSaving:i,setIsSaving:s,lastSavedBlocksRef:l,focusedBlockId:u,setFocusedBlockId:f,keyThoughtsHistory:h,setKeyThoughtsHistory:m,showKeyThoughtsHistory:d,setShowKeyThoughtsHistory:p,fetchBlocks:b,createBlock:x,updateBlock:v,deleteBlock:g,moveBlock:y,saveAllBlocks:w,fetchKeyThoughtsHistory:j,restoreKeyThoughtsVersion:async O=>{try{const R=h.find(ae=>ae.id===O);if(!R){alert("    .");return}if(!window.confirm(`  ?
    .`))return;T(l.current,t)&&await de.from("key_thoughts_history").insert([{content:t,description:"   ",user_id:e.user.id}]);const K=cf(R.content);n(K),await de.from("key_thought_blocks").delete().eq("user_id",e.user.id);const ee=of(K);ee.length>0&&await de.from("key_thought_blocks").insert(ee.map(ae=>({...ae,user_id:e.user.id}))),await de.from("key_thoughts_history").insert([{content:K,description:`  (${new Date(R.created_at).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})`,user_id:e.user.id}]),l.current=JSON.parse(JSON.stringify(K)),alert("  !"),p(!1),await j()}catch(R){console.error("  :",R.message),alert("    : "+R.message)}},cleanupOldHistory:S,normalizeBlocks:cf}}const AO=e=>["sun","mon","tue","wed","thu","fri","sat"][e],CO=({session:e,supabase:t,selectedDate:n,setTodos:a,setSuccessToastMessage:r,setShowSuccessToast:i})=>{const[s,l]=_.useState([]),[o,u]=_.useState(""),[f,h]=_.useState([]),[m,d]=_.useState(""),[p,b]=_.useState(!1),[x,v]=_.useState(!1),[g,y]=_.useState(null),[w,T]=_.useState(""),[E,S]=_.useState([]),[j,D]=_.useState(!1),[O,R]=_.useState(null),[K,ee]=_.useState([]),ae=_.useRef(new Set),oe=async()=>{var N;if((N=e==null?void 0:e.user)!=null&&N.id)try{const{data:L,error:z}=await t.from("routines").select("*").eq("deleted",!1).order("created_at",{ascending:!1});if(z)throw z;l(L||[])}catch(L){console.error("  :",L.message)}},C=async()=>{var N;if(!(o.trim()===""||p))try{b(!0);const L={text:o,days:f,start_date:Le(n),user_id:(N=e==null?void 0:e.user)==null?void 0:N.id};m&&(L.time_slot=m);const{data:z,error:X}=await t.from("routines").insert([L]).select();if(X)throw X;l([z[0],...s]),u(""),h([]),d("")}catch(L){console.error("  :",L.message)}finally{b(!1)}},$=async(N,L,z,X=null,M=!1,W="",te=null)=>{var ce;try{if(M){const{error:Se}=await t.from("todos").update({routine_id:null}).eq("id",N);if(Se)throw Se;a(De=>De.map(je=>je.id===N?{...je,routine_id:null}:je));return}if(X){const{error:Se}=await t.from("routines").update({days:z,time_slot:W}).eq("id",X);if(Se)throw Se;const{error:De}=await t.from("todos").update({is_pending_routine:z.length===0}).eq("id",N);if(De)throw De;l(je=>je.map(Xe=>Xe.id===X?{...Xe,days:z,time_slot:W}:Xe)),a(je=>je.map(Xe=>Xe.id===N?{...Xe,is_pending_routine:z.length===0}:Xe))}else{const Se={text:L,days:z,time_slot:W,start_date:te||Le(n),user_id:(ce=e==null?void 0:e.user)==null?void 0:ce.id},{data:De,error:je}=await t.from("routines").insert([Se]).select();if(je)throw je;const{error:Xe}=await t.from("todos").update({routine_id:De[0].id,is_pending_routine:z.length===0}).eq("id",N);if(Xe)throw Xe;a(qe=>qe.map(Bt=>Bt.id===N?{...Bt,routine_id:De[0].id,is_pending_routine:z.length===0}:Bt)),l(qe=>[De[0],...qe])}}catch(Se){console.error("  :",Se.message)}},F=N=>{y(N.id),T(N.text),S(N.days)},me=()=>{y(null),T(""),S([])},Te=async()=>{if(!(!g||w.trim()===""||E.length===0))try{const{error:N}=await t.from("routines").update({text:w.trim(),days:E}).eq("id",g);if(N)throw N;l(s.map(L=>L.id===g?{...L,text:w.trim(),days:E}:L)),me()}catch(N){console.error("  :",N.message)}},vt=N=>{S(L=>L.includes(N)?L.filter(z=>z!==N):[...L,N])},pe=async N=>{const L=s.find(M=>M.id===N),z=L?L.text:" ";if(window.confirm(`  "${z}"() ?

    ,     .
(   )`))try{const{error:M}=await t.from("routines").update({deleted:!0}).eq("id",N);if(M)throw M;const{error:W}=await t.from("todos").update({routine_id:null}).eq("routine_id",N);W&&console.error("  ID  :",W.message),l(s.filter(te=>te.id!==N)),a(te=>te.map(ce=>ce.routine_id===N?{...ce,routine_id:null}:ce))}catch(M){console.error("  :",M.message)}},He=async N=>{var L;if(!ae.current.has(N))try{ae.current.add(N);const z=new Date(N),X=AO(z.getDay()),{data:M,error:W}=await t.from("routines").select("*").eq("deleted",!1);if(W)throw W;const te=M.filter(ce=>{const Se=ce.days||[],De=Se.length===0||Se.includes(X);if(ce.start_date){const je=new Date(ce.start_date),Xe=z>=je;return De&&Xe}return De});if(te.length===0)return;for(const ce of te){const Se=ce.text,{data:De,error:je}=await t.from("todos").select("*").eq("routine_id",ce.id).eq("deleted",!1);if(je)throw je;if(De&&De.length>1){console.warn(` ${ce.id}    (${De.length}).     .`);for(let qe=1;qe<De.length;qe++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",De[qe].id)}const Xe=De&&De.length>0?De[0]:null;if(Xe){const qe=Xe.visible_dates||[];if(qe.includes(N))continue;const Bt=[...qe,N].sort(),{error:Lt}=await t.from("todos").update({visible_dates:Bt}).eq("id",Xe.id);Lt&&console.error("    :",Lt.message)}else{const{error:qe}=await t.from("todos").insert([{text:Se,completed:!1,date:N,visible_dates:[N],hidden_dates:[],order_index:0,routine_id:ce.id,user_id:(L=e==null?void 0:e.user)==null?void 0:L.id}]);qe&&console.error("   :",qe.message)}}}catch(z){console.error("   :",z.message)}finally{setTimeout(()=>{ae.current.delete(N)},1e3)}},Oe=async()=>{const L=Le(new Date);await He(L)},Ne=async N=>{try{const{data:L,error:z}=await t.from("todos").select("*").eq("routine_id",N.id).eq("deleted",!1);if(z)throw z;const X=L&&L.length>0?L[0]:null;if(X&&X.visible_dates){const M=X.visible_dates.sort().map(W=>({id:`${X.id}-${W}`,date:W,text:X.text,completed:X.completed,routine_id:X.routine_id}));ee(M)}else ee([]);R(N),D(!0)}catch(L){console.error("   :",L.message),alert("   : "+L.message)}},Ae=()=>{D(!1),R(null),ee([])},I=()=>{v(!0),oe()},B=()=>{v(!1),u(""),h([])},H=N=>{h(L=>L.includes(N)?L.filter(z=>z!==N):[...L,N])};return _.useEffect(()=>{e&&oe()},[e]),{routines:s,setRoutines:l,routineInput:o,selectedDays:f,selectedTimeSlot:m,isAddingRoutine:p,showRoutineModal:x,editingRoutineId:g,editingRoutineText:w,editingRoutineDays:E,showRoutineHistory:j,selectedRoutineForHistory:O,routineHistoryData:K,routineCreationInProgress:ae,setRoutineInput:u,setSelectedTimeSlot:d,fetchRoutines:oe,handleAddRoutine:C,handleDeleteRoutine:pe,handleStartEditRoutine:F,handleSaveEditRoutine:Te,handleCancelEditRoutine:me,handleToggleEditDay:vt,handleCreateRoutineFromTodo:$,createRoutineTodosForDate:He,createRoutineTodos:Oe,fetchRoutineHistory:Ne,handleCloseRoutineHistory:Ae,handleOpenRoutine:I,handleCloseRoutine:B,handleToggleDay:H}},RO=(e,t,n,a,r,i,s,l,o)=>{const[u,f]=_.useState(""),[h,m]=_.useState(""),[d,p]=_.useState(""),[b,x]=_.useState(!0),[v,g]=_.useState(!1),[y,w]=_.useState(!1),[T,E]=_.useState(null),[S,j]=_.useState(!1),[D,O]=_.useState(!1),[R,K]=_.useState(""),[ee,ae]=_.useState(null),[oe,C]=_.useState(!1),[$,F]=_.useState([]),[me,Te]=_.useState(null),[vt,pe]=_.useState(!1),[He,Oe]=_.useState(null),Ne=_.useRef(new Set),Ae=_.useRef(new Set),I=Y=>["sun","mon","tue","wed","thu","fri","sat"][Y],B=async Y=>{var V;if(!Ne.current.has(Y))try{Ne.current.add(Y);const J=new Date(Y),he=I(J.getDay()),{data:le,error:be}=await t.from("routines").select("*").eq("deleted",!1);if(be)throw be;const ut=le.filter(at=>{const rt=at.days||[],Ee=rt.length===0||rt.includes(he);if(at.start_date){const jt=new Date(at.start_date),Ze=J>=jt;return Ee&&Ze}return Ee});if(ut.length===0)return;for(const at of ut){const rt=at.text,{data:Ee,error:jt}=await t.from("todos").select("*").eq("routine_id",at.id).eq("deleted",!1);if(jt)throw jt;if(Ee&&Ee.length>1){console.warn(` ${at.id}    (${Ee.length}).     .`);for(let Ye=1;Ye<Ee.length;Ye++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",Ee[Ye].id)}const Ze=Ee&&Ee.length>0?Ee[0]:null;if(Ze){const Ye=Ze.visible_dates||[];if(Ye.includes(Y))continue;const et=[...Ye,Y].sort(),{error:Ie}=await t.from("todos").update({visible_dates:et}).eq("id",Ze.id);Ie&&console.error("    :",Ie.message)}else{const{error:Ye}=await t.from("todos").insert([{text:rt,completed:!1,date:Y,visible_dates:[Y],hidden_dates:[],order_index:0,routine_id:at.id,user_id:(V=e==null?void 0:e.user)==null?void 0:V.id}]);Ye&&console.error("   :",Ye.message)}}}catch(J){console.error("   :",J.message)}finally{setTimeout(()=>{Ne.current.delete(Y)},1e3)}},H=async()=>{var Y;if(!((Y=e==null?void 0:e.user)!=null&&Y.id)){x(!1);return}try{x(!0);const V=Le(n);await B(V);const{data:J,error:he}=await t.from("todos").select("*").eq("deleted",!1).order("order_index",{ascending:!0});if(he)throw he;const le=(J||[]).filter(be=>be.hidden_dates&&Array.isArray(be.hidden_dates)&&be.hidden_dates.includes(V)?!1:be.visible_dates&&Array.isArray(be.visible_dates)&&be.visible_dates.length>0?be.visible_dates.includes(V):be.date===V);r(le)}catch(V){console.error("   :",V.message)}finally{x(!1)}},N=async()=>{try{const{data:Y,error:V}=await t.from("todos").select("*").eq("deleted",!0).order("deleted_date",{ascending:!1});if(V)throw V;F(Y||[])}catch(Y){console.error("  :",Y.message)}},L=async()=>{var Y;if(!(u.trim()===""||y))try{w(!0);const V=a.length>0?Math.max(...a.map(be=>be.order_index))+1:1,J=Le(n),{data:he,error:le}=await t.from("todos").insert([{text:u,completed:!1,order_index:V,date:J,visible_dates:[J],hidden_dates:[],user_id:(Y=e==null?void 0:e.user)==null?void 0:Y.id}]).select();if(le)throw le;r([...a,he[0]]),f("")}catch(V){console.error("   :",V.message)}finally{w(!1)}},z=async()=>{var Y,V;if(!(h.trim()===""||y))try{w(!0);const J=Le(n),{data:he,error:le}=await t.from("routines").insert([{text:h,days:[],start_date:J,user_id:(Y=e==null?void 0:e.user)==null?void 0:Y.id}]).select();if(le)throw le;const be=he[0],ut=a.filter(jt=>!jt.parent_id&&jt.is_pending_routine),at=ut.length>0?Math.max(...ut.map(jt=>jt.order_index))+1:1,{data:rt,error:Ee}=await t.from("todos").insert([{text:h,completed:!1,order_index:at,date:J,visible_dates:[J],hidden_dates:[],routine_id:be.id,is_pending_routine:!0,user_id:(V=e==null?void 0:e.user)==null?void 0:V.id}]).select();if(Ee)throw Ee;s([be,...i]),r([...a,rt[0]]),m("")}catch(J){console.error("   :",J.message)}finally{w(!1)}},X=async()=>{var Y;if(!(d.trim()===""||y))try{w(!0);const V=a.filter(ut=>!ut.parent_id&&ut.routine_id===null),J=V.length>0?Math.max(...V.map(ut=>ut.order_index))+1:1,he=Le(n),{data:le,error:be}=await t.from("todos").insert([{text:d,completed:!1,order_index:J,date:he,visible_dates:[he],hidden_dates:[],user_id:(Y=e==null?void 0:e.user)==null?void 0:Y.id}]).select();if(be)throw be;r([...a,le[0]]),p("")}catch(V){console.error("   :",V.message)}finally{w(!1)}},M=async Y=>{const V=a.find(J=>J.id===Y);if(V)try{const J=!V.completed,he=J?new Date().toISOString():null,{error:le}=await t.from("todos").update({completed:J,completed_at:he}).eq("id",Y);if(le)throw le;r(a.map(be=>be.id===Y?{...be,completed:J,completed_at:he}:be))}catch(J){console.error("   :",J.message)}},W=Y=>{r(a.filter(V=>V.id!==Y))},te=async Y=>{var le;const V=a.find(be=>be.id===Y);if(!V)return;const J=((le=V.visible_dates)==null?void 0:le.length)>0?V.visible_dates:[V.date||V.created_date],he=V.original_todo_id!==null&&V.original_todo_id!==void 0;J.length>1||he?(Oe(V),pe(!0)):await ce(Y)},ce=async Y=>{try{const V=a.find(le=>le.id===Y);if(!V)return;E(V);const J=Le(n),{error:he}=await t.from("todos").update({deleted:!0,deleted_date:J}).eq("id",Y);if(he)throw he;r(a.filter(le=>le.id!==Y)),j(!0),setTimeout(()=>{j(!1),E(null)},5e3)}catch(V){console.error("   :",V.message)}};return{inputValue:u,setInputValue:f,routineInputValue:h,setRoutineInputValue:m,normalInputValue:d,setNormalInputValue:p,loading:b,isDraggingAny:v,isAdding:y,deletedTodo:T,showUndoToast:S,showSuccessToast:D,successToastMessage:R,lastDeleteAction:ee,showTrashModal:oe,trashedItems:$,focusedTodoId:me,setFocusedTodoId:Te,selectedTodoForModal:l,showDeleteConfirmModal:vt,setShowDeleteConfirmModal:pe,todoToDelete:He,setTodoToDelete:Oe,fetchTodos:H,handleAddTodo:L,handleAddRoutineTodo:z,handleAddNormalTodo:X,handleToggleTodo:M,handleDeleteTodo:te,executeSimpleDelete:ce,hideOnThisDateOnly:async Y=>{try{const V=Le(n),he=[...Y.hidden_dates||[],V],{error:le}=await t.from("todos").update({hidden_dates:he}).eq("id",Y.id);if(le)throw le;r(a.filter(be=>be.id!==Y.id)),pe(!1),Oe(null)}catch(V){console.error(" :",V.message)}},deleteCompletely:async Y=>{try{const V=Le(n),{error:J}=await t.from("todos").update({deleted:!0,deleted_date:V}).eq("id",Y.id);if(J)throw J;r(a.filter(he=>he.id!==Y.id)),pe(!1),Oe(null)}catch(V){console.error(" :",V.message)}},handleUndoDelete:async()=>{if(T)try{const{error:Y}=await t.from("todos").update({deleted:!1,deleted_date:null}).eq("id",T.id);if(Y)throw Y;r(V=>{const J={...T,deleted:!1,deleted_date:null};return[...V,J].sort((le,be)=>le.order_index-be.order_index)}),j(!1),E(null)}catch(Y){console.error("  :",Y.message)}},handleRestoreFromTrash:async Y=>{if(window.confirm(`  ?

      .`))try{const{error:J}=await t.from("todos").update({deleted:!1,deleted_date:null,hidden_dates:[]}).eq("id",Y);if(J)throw J;F($.filter(he=>he.id!==Y)),alert(" !")}catch(J){console.error(" :",J.message),alert("  : "+J.message)}},handlePermanentDelete:async Y=>{if(window.confirm(`     ?

    .`))try{const{error:J}=await t.from("todos").delete().eq("id",Y);if(J)throw J;F($.filter(he=>he.id!==Y)),alert("  .")}catch(J){console.error("  :",J.message),alert("   : "+J.message)}},handleEditTodo:async(Y,V)=>{var J,he;try{let le=null;Ae.current.add(Y);const be=new Date().toISOString();if(r(rt=>(le=rt.find(Ee=>Ee.id===Y),!le||le.text===V?(Ae.current.delete(Y),rt):rt.map(Ee=>Ee.id===Y?{...Ee,text:V,updated_at:be}:Ee))),!le||le.text===V)return;const{error:ut}=await t.from("todo_history").insert([{todo_id:Y,previous_text:le.text,new_text:V,changed_on_date:le.date,user_id:(J=e==null?void 0:e.user)==null?void 0:J.id}]);if(ut&&console.error("  :",ut.message),le.original_todo_id){const{data:rt,error:Ee}=await t.from("todos").select("text, date").eq("id",le.original_todo_id).single();!Ee&&rt&&await t.from("todo_history").insert([{todo_id:le.original_todo_id,previous_text:le.text,new_text:V,changed_on_date:le.date,user_id:(he=e==null?void 0:e.user)==null?void 0:he.id}])}const{error:at}=await t.from("todos").update({text:V}).eq("id",Y);at?(console.error("   :",at.message),r(rt=>rt.map(Ee=>Ee.id===Y?le:Ee)),Ae.current.delete(Y)):setTimeout(()=>{Ae.current.delete(Y)},5e3)}catch(le){console.error("   :",le.message),Ae.current.delete(Y)}},handleAddSubTodo:async(Y,V)=>{var J;if(!(!V||V.trim()===""))try{const le=a.filter(rt=>rt.parent_id===Y).length+1,be=Le(n),{data:ut,error:at}=await t.from("todos").insert([{text:V.trim(),completed:!1,order_index:le,date:be,parent_id:Y,user_id:(J=e==null?void 0:e.user)==null?void 0:J.id}]).select();if(at)throw at;r([...a,ut[0]])}catch(he){console.error("    :",he.message)}},handleDragEnd:async(Y,V)=>{g(!1);const{active:J,over:he}=Y;if(!he||J.id===he.id)return;const le=a.find(Ie=>Ie.id===J.id),be=a.find(Ie=>Ie.id===he.id);if(!le||!be)return;const ut=le.section_id||null,at=le.routine_id||null,rt=be.section_id||null,Ee=be.routine_id||null,jt=ut!==rt||at!==Ee,Ze=a.findIndex(Ie=>Ie.id===J.id),Ye=a.findIndex(Ie=>Ie.id===he.id);let et=V(a,Ze,Ye);jt&&(et=et.map(Ie=>Ie.id===J.id?{...Ie,section_id:rt,routine_id:Ee}:Ie)),r(et);try{jt&&await t.from("todos").update({section_id:rt,routine_id:Ee}).eq("id",J.id);const Ie=et.map((_t,Mt)=>({id:_t.id,order_index:Mt+1}));for(const _t of Ie)await t.from("todos").update({order_index:_t.order_index}).eq("id",_t.id)}catch(Ie){console.error("  :",Ie.message)}},fetchTrash:N,handleEmptyTrash:async()=>{if(!($.length===0||!window.confirm(`   ?

${$.length}   .
    .`)))try{const V=$.map(he=>he.id),{error:J}=await t.from("todos").delete().in("id",V);if(J)throw J;F([]),alert(` ${V.length}   .`)}catch(V){console.error("  :",V.message),alert("   : "+V.message)}},handleRemoveTodoFromUI:W,handleOpenTrash:()=>{C(!0),N()},handleCloseTrash:()=>{C(!1)},handleDragStart:()=>{g(!0)},handleDragCancel:()=>{g(!1)}}},MO=({session:e,supabase:t,selectedTodoForModal:n,setSelectedTodoForModal:a})=>{const[r,i]=_.useState(!1),[s,l]=_.useState({}),[o,u]=_.useState([]);return{showTodoHistoryModal:r,todoHistory:s,expandedHistoryIds:o,handleOpenTodoHistoryModal:async d=>{a(d);try{const{data:p,error:b}=await t.from("todo_history").select("*").eq("todo_id",d.id).order("changed_at",{ascending:!1});if(b)throw b;l(x=>({...x,[d.id]:p||[]}))}catch(p){console.error("Error fetching history:",p)}i(!0)},handleCloseTodoHistoryModal:()=>{i(!1),a(null),u([])},toggleHistoryDetail:d=>{u(p=>p.includes(d)?p.filter(b=>b!==d):[...p,d])}}},kO=({selectedTodoForModal:e,setSelectedTodoForModal:t,routines:n})=>{const[a,r]=_.useState(!1),[i,s]=_.useState([]),[l,o]=_.useState(!1),[u,f]=_.useState("");return{showTodoRoutineSetupModal:a,routineDaysForModal:i,setRoutineDaysForModal:s,isEditingRoutineInModal:l,setIsEditingRoutineInModal:o,routineTimeSlotForModal:u,setRoutineTimeSlotForModal:f,handleOpenTodoRoutineSetupModal:d=>{t(d);const p=n.find(b=>b.id===d.routine_id);p?(s(p.days||[]),f(p.time_slot||""),o(!1)):(s([]),f(""),o(!0)),r(!0)},handleCloseTodoRoutineSetupModal:()=>{r(!1),t(null),s([]),f(""),o(!1)}}},UO=({session:e,supabase:t,selectedDate:n})=>{const a=_.useRef(!1);return{carryOverInProgress:a,carryOverIncompleteTodos:async s=>{if(!a.current)try{a.current=!0;const{data:l,error:o}=await t.from("todos").select("*").eq("deleted",!1).eq("completed",!1);if(o)throw o;if(!l||l.length===0)return;const u=l.filter(f=>(f.hidden_dates||[]).includes(s)?!1:f.visible_dates&&Array.isArray(f.visible_dates)&&f.visible_dates.length>0?f.visible_dates.includes(s)?!1:f.visible_dates.some(d=>d<s):!!(f.date&&f.date<s));if(u.length===0)return;for(const f of u){let h=[];f.visible_dates&&Array.isArray(f.visible_dates)&&f.visible_dates.length>0?h=[...f.visible_dates,s]:h=f.date?[f.date,s]:[s];const{error:m}=await t.from("todos").update({visible_dates:h}).eq("id",f.id);m&&console.error(` ${f.id}  :`,m.message)}}catch(l){console.error("  :",l.message)}finally{a.current=!1}},movePastIncompleteTodosToToday:async()=>{if(!a.current)try{a.current=!0;const s=new Date,l=Le(s),{data:o,error:u}=await t.from("todos").select("date").lt("date",l).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("date",{ascending:!0}).limit(1);if(u)throw u;if(!o||o.length===0)return;const f=new Date(o[0].date+"T00:00:00");let h=new Date(f);const m=new Date(s);m.setDate(m.getDate()-1);let d=0;for(;h<=m;){const p=Le(h),b=new Date(h);b.setDate(b.getDate()+1);const x=Le(b),{data:v,error:g}=await t.from("todos").select("*").eq("date",p).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("order_index",{ascending:!0});if(g)throw g;if(v&&v.length>0){const{data:y,error:w}=await t.from("todos").select("*").eq("date",x).eq("deleted",!1).order("order_index",{ascending:!0});if(w)throw w;const T=new Set;y==null||y.forEach(S=>{S.original_todo_id!==null&&T.add(S.original_todo_id)});const E=v.filter(S=>{const j=S.original_todo_id||S.id;return!T.has(j)});if(E.length>0){const S=E.map(oe=>oe.original_todo_id||oe.id).filter((oe,C,$)=>$.indexOf(oe)===C),{data:j,error:D}=await t.from("todos").select("id, created_at").in("id",S);if(D)throw D;const O={};j==null||j.forEach(oe=>{O[oe.id]=oe.created_at});const K=(y?y.length:0)+1,ee=E.map((oe,C)=>{const $=oe.original_todo_id||oe.id;return{text:oe.text,completed:!1,date:x,created_at:O[$]||oe.created_at,order_index:K+C,original_todo_id:$,parent_id:null,routine_id:null}}),{error:ae}=await t.from("todos").insert(ee);if(ae)throw ae;d+=E.length}}h.setDate(h.getDate()+1)}d>0}catch(s){console.error("    :",s.message)}finally{a.current=!1}}}};function zO(e,t,n){const[a,r]=_.useState([]),[i,s]=_.useState(!1),[l,o]=_.useState(!1);return{dummySessions:a,showDummyModal:i,setShowDummyModal:s,showDummySQL:l,setShowDummySQL:o,handleCreateDummyData:async()=>{try{const d=`DUMMY-${Date.now()}`,p=new Date(2025,10,16),b=[],x=[],v="2025-11-14";b.push({text:`[${d}] : 14--`,date:v,completed:!1,created_at:"2025-11-14T09:00:00Z",order_index:1001},{text:`[${d}] : 14-14`,date:v,completed:!0,created_at:"2025-11-14T09:10:00Z",order_index:1002},{text:`[${d}] : 14-15`,date:v,completed:!0,created_at:"2025-11-14T09:20:00Z",order_index:1003},{text:`[${d}] : 14-16`,date:v,completed:!0,created_at:"2025-11-14T09:30:00Z",order_index:1004});const g="2025-11-15";b.push({text:`[${d}] : 15--`,date:g,completed:!1,created_at:"2025-11-15T10:00:00Z",order_index:1005},{text:`[${d}] : 15-15`,date:g,completed:!0,created_at:"2025-11-15T10:10:00Z",order_index:1006},{text:`[${d}] : 15-16`,date:g,completed:!0,created_at:"2025-11-15T10:20:00Z",order_index:1007});const y="2025-11-16";b.push({text:`[${d}] : 16-`,date:y,completed:!1,created_at:"2025-11-16T11:00:00Z",order_index:1008},{text:`[${d}] : 16-16`,date:y,completed:!0,created_at:"2025-11-16T11:10:00Z",order_index:1009}),b.push({text:`[${d}] : 14-15-`,date:g,completed:!1,created_at:"2025-11-14T14:00:00Z",order_index:1010},{text:`[${d}] : 14-15-15`,date:g,completed:!0,created_at:"2025-11-14T14:10:00Z",order_index:1011}),b.push({text:`[${d}] : 15-16-`,date:y,completed:!1,created_at:"2025-11-15T15:00:00Z",order_index:1012},{text:`[${d}] : 15-16-16`,date:y,completed:!0,created_at:"2025-11-15T15:10:00Z",order_index:1013},{text:`[${d}] : 14-16-`,date:y,completed:!1,created_at:"2025-11-14T15:00:00Z",order_index:1014},{text:`[${d}] : 14-16-16`,date:y,completed:!0,created_at:"2025-11-14T15:10:00Z",order_index:1015});const w="2025-11-17";b.push({text:`[${d}] : 16-17-`,date:w,completed:!1,created_at:"2025-11-16T16:00:00Z",order_index:1016},{text:`[${d}] : 15-17-`,date:w,completed:!1,created_at:"2025-11-15T16:00:00Z",order_index:1017},{text:`[${d}] : 14-17-`,date:w,completed:!1,created_at:"2025-11-14T16:00:00Z",order_index:1018});const T="2025-11-18";b.push({text:`[${d}] : 16-18-`,date:T,completed:!1,created_at:"2025-11-16T17:00:00Z",order_index:1019},{text:`[${d}] : 15-18-`,date:T,completed:!1,created_at:"2025-11-15T17:00:00Z",order_index:1020});const{data:E,error:S}=await t.from("todos").insert(b).select();if(S)throw S;const j=E.find(O=>O.text.includes("14--"));j&&x.push({todo_id:j.id,previous_text:`[${d}] : 14--1`,new_text:`[${d}] : 14--2`,changed_at:"2025-11-15T12:00:00Z",changed_on_date:g},{todo_id:j.id,previous_text:`[${d}] : 14--2`,new_text:`[${d}] : 14--`,changed_at:"2025-11-16T12:00:00Z",changed_on_date:y});const D=E.find(O=>O.text.includes("15--"));if(D&&x.push({todo_id:D.id,previous_text:`[${d}] : 15--1`,new_text:`[${d}] : 15--`,changed_at:"2025-11-16T13:00:00Z",changed_on_date:y}),x.length>0){const{error:O}=await t.from("todo_history").insert(x);O&&console.error("  :",O.message)}r(O=>[...O,{sessionId:d,createdAt:new Date().toISOString(),count:b.length,historyCount:x.length}]),alert(`    !
: ${b.length}
: ${x.length}
 ID: ${d}`),n()}catch(d){console.error("   :",d.message),alert("    : "+d.message)}},handleDeleteDummySession:async d=>{if(window.confirm(`   "${d}"   ?

      ,     .`))try{const{data:b,error:x}=await t.from("todos").select("id").like("text",`[${d}]%`);if(x)throw x;if(b&&b.length>0){const g=b.map(w=>w.id),{error:y}=await t.from("todo_history").delete().in("todo_id",g);y&&console.error("  :",y.message)}const{error:v}=await t.from("todos").delete().like("text",`[${d}]%`);if(v)throw v;r(g=>g.filter(y=>y.sessionId!==d)),alert(`  ${d}  !`),n()}catch(b){console.error("   :",b.message),alert("    : "+b.message)}},handleDeleteAllDummies:async()=>{if(window.confirm(`     ?

      ,     .`))try{const{data:p,error:b}=await t.from("todos").select("id").like("text","[DUMMY-%");if(b)throw b;if(p&&p.length>0){const v=p.map(y=>y.id),{error:g}=await t.from("todo_history").delete().in("todo_id",v);g&&console.error("  :",g.message)}const{error:x}=await t.from("todos").delete().like("text","[DUMMY-%");if(x)throw x;r([]),alert("     !"),n()}catch(p){console.error("    :",p.message),alert("     : "+p.message)}},handleRemoveDuplicates:async()=>{try{const{data:d,error:p}=await t.from("todos").select("*").eq("deleted",!1).order("created_at",{ascending:!0});if(p)throw p;if(!d||d.length===0){alert(" .");return}const b={};d.forEach(S=>{b[S.text]||(b[S.text]=[]),b[S.text].push(S)});const x=Object.entries(b).filter(([S,j])=>j.length>1);if(x.length===0){alert("  .");return}let v=`  :

`,g=[];if(x.forEach(([S,j])=>{v+=`"${S}" - ${j.length}
`;const D=j.slice(1);g.push(...D),D.forEach(K=>{const ee=new Date(K.created_at).toLocaleString("ko-KR");v+=`    : ${ee}
`});const O=j[0],R=new Date(O.created_at).toLocaleString("ko-KR");v+=`   : ${R}

`}),v+=`
 ${g.length}   .`,!window.confirm(v+`

     ,     .

?`))return;const w=g.map(S=>S.id),{error:T}=await t.from("todo_history").delete().in("todo_id",w);T&&console.error("  :",T.message);const{error:E}=await t.from("todos").delete().in("id",w);if(E)throw E;alert(` ${g.length}   .`),n()}catch(d){console.error("   :",d.message),alert("    : "+d.message)}}}}function $O(e,t){const[n,a]=_.useState([]),[r,i]=_.useState(!1),[s,l]=_.useState(""),[o,u]=_.useState(null),[f,h]=_.useState(""),[m,d]=_.useState(!1),[p,b]=_.useState(""),x=()=>{if(n.length===0)return"";const E=Math.floor(Math.random()*n.length);return n[E]},v=()=>{let E=0;d(!0),setTimeout(()=>{let S=x();for(;S===p&&n.length>1&&E<10;)S=x(),E++;d(!1),b(S)},300)},g=async()=>{try{const{data:E,error:S}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(S)throw S;if(E&&E.length>0){const j=E.map(D=>D.message);a(j),p||b(j[0])}}catch(E){console.error("   :",E.message)}},y=async E=>{var S;try{const{data:j}=await t.from("encouragement_messages").select("order_index").order("order_index",{ascending:!1}).limit(1),D=j&&j.length>0?j[0].order_index:0,{error:O}=await t.from("encouragement_messages").insert([{message:E,order_index:D+1,user_id:(S=e==null?void 0:e.user)==null?void 0:S.id}]);if(O)throw O;await g()}catch(j){console.error("   :",j.message),alert("   .")}},w=async(E,S)=>{try{const{data:j}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!j||E>=j.length)throw new Error("   .");const D=j[E],{error:O}=await t.from("encouragement_messages").update({message:S}).eq("id",D.id);if(O)throw O;await g()}catch(j){console.error("   :",j.message),alert("   .")}},T=async E=>{try{const{data:S}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!S||E>=S.length)throw new Error("   .");const j=S[E],{error:D}=await t.from("encouragement_messages").delete().eq("id",j.id);if(D)throw D;await g()}catch(S){console.error("   :",S.message),alert("   .")}};return _.useEffect(()=>{n.length>0&&!p&&b(x())},[n]),{encouragementMessages:n,showEncouragementModal:r,setShowEncouragementModal:i,newEncouragementMessage:s,setNewEncouragementMessage:l,editingEncouragementId:o,setEditingEncouragementId:u,editingEncouragementText:f,setEditingEncouragementText:h,showEncouragementEmoji:m,currentEncouragementMessage:p,handleEncouragementClick:v,fetchEncouragementMessages:g,addEncouragementMessage:y,updateEncouragementMessage:w,deleteEncouragementMessage:T}}function BO(e){const[t,n]=_.useState(!1),[a,r]=_.useState([]),[i,s]=_.useState("1week"),l=async()=>{try{const f=new Date,h=Le(f);let m=null;if(i!=="all")switch(m=new Date(f),i){case"1week":m.setDate(f.getDate()-7);break;case"2weeks":m.setDate(f.getDate()-14);break;case"1month":m.setMonth(f.getMonth()-1);break;case"3months":m.setMonth(f.getMonth()-3);break;case"6months":m.setMonth(f.getMonth()-6);break}let d=e.from("todos").select("*").eq("deleted",!1).is("routine_id",null).order("created_at",{ascending:!0});m&&(d=d.gte("date",Le(m)));const{data:p,error:b}=await d;if(b)throw b;const x={};for(const g of p||[]){const y=g.original_todo_id||g.id;x[y]||(x[y]=[]),x[y].push(g)}const v=Object.entries(x).map(([g,y])=>{const w=y.sort((D,O)=>new Date(D.date)-new Date(O.date)),T=w[0],E=w.map(D=>D.date);let S=null;for(const D of w)if(D.completed&&D.completed_at){const O=new Date(D.completed_at);S=Le(O);break}const j=w.find(D=>D.date===h);return{text:T.text,originalId:parseInt(g),createdAt:T.created_at,startDate:E[0],endDate:E[E.length-1],dates:E,completed:(j==null?void 0:j.completed)||!1,completedDate:S}}).sort((g,y)=>new Date(g.createdAt)-new Date(y.createdAt));r(v)}catch(f){console.error("   :",f.message)}};return{showGanttChart:t,ganttData:a,ganttPeriod:i,setGanttPeriod:s,handleOpenGanttChart:async()=>{n(!0),await l()},handleCloseGanttChart:()=>{n(!1),r([])},fetchGanttData:l}}function ws({id:e,children:t,disabled:n,onLongPress:a}){const{attributes:r,listeners:i,setNodeRef:s,transform:l,transition:o,isDragging:u}=Gc({id:e,disabled:n}),f=_.useRef(null),[h,m]=_.useState(!1),d=T=>{if(n&&a){if(!T.target.closest(".section-header"))return;m(!0),f.current=setTimeout(()=>{a(),m(!1)},500)}},p=()=>{f.current&&(clearTimeout(f.current),f.current=null,m(!1))},b=()=>{f.current&&(clearTimeout(f.current),f.current=null),m(!1)},x=()=>{f.current&&(clearTimeout(f.current),f.current=null),m(!1)},g={transform:l?`translate3d(${Math.round(l.x)}px, ${Math.round(l.y)}px, 0)`:void 0,transition:o},y=n?{onPointerDown:d,onPointerMove:p,onPointerUp:b,onPointerCancel:x,onPointerLeave:x}:{...r,...i},w=[!n&&"reorder-mode",u&&"dragging"].filter(Boolean).join(" ");return c.jsx("div",{ref:s,style:g,className:w,...y,children:t})}function LO(){const{session:e,authLoading:t,handleGoogleLogin:n,handleLogout:a}=lO(),[r,i]=_.useState(new Date),[s,l]=_.useState(!1),[o,u]=_.useState("home"),f=_.useRef(new Set),h=fc(Va(Qi,{activationConstraint:{distance:8}}),Va(sf,{activationConstraint:{delay:200,tolerance:8}}),Va(Yc,{coordinateGetter:qb})),m=fc(Va(Qi,{activationConstraint:{distance:8}}),Va(sf,{activationConstraint:{delay:200,tolerance:8}})),[d,p]=_.useState([]),[b,x]=_.useState(null),{showTodoHistoryModal:v,todoHistory:g,expandedHistoryIds:y,handleOpenTodoHistoryModal:w,handleCloseTodoHistoryModal:T,toggleHistoryDetail:E}=MO({session:e,supabase:de,selectedTodoForModal:b,setSelectedTodoForModal:x}),{showRoutineModal:S,routines:j,setRoutines:D,routineInput:O,setRoutineInput:R,selectedDays:K,selectedTimeSlot:ee,setSelectedTimeSlot:ae,isAddingRoutine:oe,editingRoutineId:C,editingRoutineText:$,setEditingRoutineText:F,showRoutineHistory:me,selectedRoutineForHistory:Te,routineHistoryData:vt,editingRoutineDays:pe,fetchRoutines:He,handleAddRoutine:Oe,handleCreateRoutineFromTodo:Ne,handleStartEditRoutine:Ae,handleCancelEditRoutine:I,handleSaveEditRoutine:B,handleToggleEditDay:H,handleDeleteRoutine:N,fetchRoutineHistory:L,handleCloseRoutineHistory:z,handleOpenRoutine:X,handleCloseRoutine:M,handleToggleDay:W,createRoutineTodos:te}=CO({session:e,supabase:de,selectedDate:r,setTodos:p,setSuccessToastMessage:()=>{},setShowSuccessToast:()=>{}}),{showTodoRoutineSetupModal:ce,routineDaysForModal:Se,setRoutineDaysForModal:De,isEditingRoutineInModal:je,setIsEditingRoutineInModal:Xe,routineTimeSlotForModal:qe,setRoutineTimeSlotForModal:Bt,handleOpenTodoRoutineSetupModal:Lt,handleCloseTodoRoutineSetupModal:Nn}=kO({selectedTodoForModal:b,setSelectedTodoForModal:x,routines:j}),{carryOverIncompleteTodos:Qr}=UO({session:e,supabase:de,selectedDate:r}),{routineInputValue:mn,setRoutineInputValue:An,normalInputValue:Wt,setNormalInputValue:hr,loading:Y,isDraggingAny:V,isAdding:J,showUndoToast:he,showSuccessToast:le,successToastMessage:be,lastDeleteAction:ut,showTrashModal:at,trashedItems:rt,focusedTodoId:Ee,setFocusedTodoId:jt,showDeleteConfirmModal:Ze,setShowDeleteConfirmModal:Ye,todoToDelete:et,fetchTodos:Ie,handleAddRoutineTodo:_t,handleAddNormalTodo:Mt,handleToggleTodo:Vt,handleDeleteTodo:Gt,handleRestoreFromTrash:wt,handlePermanentDelete:gn,handleAddSubTodo:Kt,handleEditTodo:Xt,handleDragStart:sa,handleDragCancel:la,handleDragEnd:Cn,handleOpenTrash:Wn,handleCloseTrash:Na,handleEmptyTrash:Kc,handleUndoDelete:Cl,hideOnThisDateOnly:Rl,deleteCompletely:Ml,handleRemoveTodoFromUI:Aa}=RO(e,de,r,d,p,j,D,b),Pr=A=>{jt(A)},Zr=A=>{console.log("Success:",A)},k=()=>{Cl()},G=()=>{const A=document.querySelector(".memo-section");A&&A.scrollIntoView({behavior:"smooth",block:"start"})},{showGanttChart:ke,ganttData:$e,ganttPeriod:_e,setGanttPeriod:Be,handleOpenGanttChart:Je,handleCloseGanttChart:it,fetchGanttData:yn}=BO(de),{dummySessions:Fr,showDummyModal:mr,setShowDummyModal:Wr,showDummySQL:gr,setShowDummySQL:Xc,handleCreateDummyData:fs,handleDeleteDummySession:Gb,handleDeleteAllDummies:Kb,handleRemoveDuplicates:Xb}=zO(e,de,Ie),[HO,qO]=_.useState(!1),{memoContent:Jb,setMemoContent:Qb,isSavingMemo:Pb,isEditingMemoInline:Jc,memoTextareaRef:Zb,fetchMemoContent:Fb,handleStartEditMemoInline:Wb,handleSaveMemoInline:e_,handleCancelEditMemoInline:t_,handleMemoKeyDown:n_}=OO(e),{blocks:Oh,setBlocks:Dh,focusedBlockId:a_,setFocusedBlockId:r_,keyThoughtsHistory:i_,showKeyThoughtsHistory:s_,setShowKeyThoughtsHistory:Nh,fetchBlocks:l_,saveAllBlocks:o_,fetchKeyThoughtsHistory:c_,restoreKeyThoughtsVersion:u_}=NO(e),{encouragementMessages:d_,showEncouragementModal:f_,setShowEncouragementModal:Ah,newEncouragementMessage:h_,setNewEncouragementMessage:m_,editingEncouragementId:g_,setEditingEncouragementId:y_,editingEncouragementText:v_,setEditingEncouragementText:p_,showEncouragementEmoji:b_,currentEncouragementMessage:__,handleEncouragementClick:w_,fetchEncouragementMessages:S_,addEncouragementMessage:x_,updateEncouragementMessage:E_,deleteEncouragementMessage:T_}=$O(e,de),[Ca,j_]=_.useState(()=>localStorage.getItem("viewMode")||"horizontal"),[Ch,Rh]=_.useState({normal:"  ",routine:"  ",memo:" ","key-thoughts":"  "}),[hs,kl]=_.useState([]),[O_,Mh]=_.useState(!1),[kh,Uh]=_.useState(!1),[zh,$h]=_.useState({}),D_=jO(e),{sectionOrder:Ul,setSectionOrder:Bh,isReorderMode:yr,setIsReorderMode:vr,fetchSectionOrder:N_,saveSectionOrder:Lh,handleSectionDragEnd:A_,handleSectionsContainerDoubleClick:C_}=D_,ei=_.useRef(null),[R_,M_]=_.useState(0),Qc=_.useRef(null),k_=()=>{const A=new Date(r);A.setDate(A.getDate()-1),i(A)},U_=()=>{const A=new Date(r);A.setDate(A.getDate()+1),i(A)},z_=A=>{const Q=new Date(A.target.value+"T00:00:00");i(Q)},$_=async()=>{var A;if((A=e==null?void 0:e.user)!=null&&A.id)try{const{data:Q,error:P}=await de.from("user_settings").select("setting_value").eq("setting_key","section_titles").maybeSingle();if(P){console.error("   :",P.message);return}if(Q&&Q.setting_value){const ie=JSON.parse(Q.setting_value);Rh(Z=>({...Z,...ie}))}}catch(Q){console.error("   :",Q.message)}},B_=async(A,Q)=>{var ie;if(!((ie=e==null?void 0:e.user)!=null&&ie.id))return;const P={...Ch,[A]:Q};Rh(P);try{const{data:Z,error:q}=await de.from("user_settings").select("id").eq("setting_key","section_titles").maybeSingle();if(q){console.error("   :",q.message);return}Z?await de.from("user_settings").update({setting_value:JSON.stringify(P),updated_at:new Date().toISOString()}).eq("setting_key","section_titles"):await de.from("user_settings").insert([{setting_key:"section_titles",setting_value:JSON.stringify(P),user_id:e.user.id}])}catch(Z){console.error("   :",Z.message)}},L_=async()=>{var A;if((A=e==null?void 0:e.user)!=null&&A.id)try{const{data:Q,error:P}=await de.from("user_settings").select("setting_value").eq("setting_key","custom_sections").maybeSingle();if(P){console.error("    :",P.message);return}if(Q&&Q.setting_value){const ie=JSON.parse(Q.setting_value);kl(ie)}}catch(Q){console.error("    :",Q.message)}},Pc=async A=>{var Q;if((Q=e==null?void 0:e.user)!=null&&Q.id)try{const{data:P,error:ie}=await de.from("user_settings").select("id").eq("setting_key","custom_sections").maybeSingle();if(ie){console.error("    :",ie.message);return}P?await de.from("user_settings").update({setting_value:JSON.stringify(A),updated_at:new Date().toISOString()}).eq("setting_key","custom_sections"):await de.from("user_settings").insert([{setting_key:"custom_sections",setting_value:JSON.stringify(A),user_id:e.user.id}])}catch(P){console.error("    :",P.message)}},H_=({name:A,icon:Q})=>{const P={id:`custom-${Date.now()}`,name:A,icon:Q},ie=[...hs,P];kl(ie),Pc(ie);const Z=[...Ul,P.id];Bh(Z),Lh(Z)},q_=async A=>{const Q=zh[A]||"";if(!(!Q.trim()||kh)){if(!e){alert(" ");return}Uh(!0);try{const P=d.filter(re=>!re.parent_id&&re.section_id===A),ie=P.length>0?Math.max(...P.map(re=>re.order_index))+1:1,Z=Le(r),q={text:Q.trim(),completed:!1,order_index:ie,date:Z,visible_dates:[Z],hidden_dates:[],user_id:e.user.id,section_id:A},{data:fe,error:ne}=await de.from("todos").insert([q]).select();if(ne)throw ne;fe&&fe.length>0&&(p(re=>[...re,fe[0]]),$h(re=>({...re,[A]:""})))}catch(P){console.error("  :",P.message)}finally{Uh(!1)}}},Y_=async A=>{if(!confirm("  ?      ."))return;try{const{error:ie}=await de.from("todos").delete().eq("section_id",A);if(ie){console.error("   :",ie.message);return}}catch(ie){console.error("   :",ie.message);return}const Q=hs.filter(ie=>ie.id!==A);kl(Q),Pc(Q);const P=Ul.filter(ie=>ie!==A);Bh(P),Lh(P),p(ie=>ie.filter(Z=>Z.section_id!==A))},I_=async(A,Q)=>{try{const P=Le(A),ie=Le(Q),{data:Z,error:q}=await de.from("todos").select("*").eq("deleted",!1).eq("completed",!1).is("routine_id",null);if(q)throw q;const fe=(Z||[]).filter(ne=>ne.hidden_dates&&Array.isArray(ne.hidden_dates)&&ne.hidden_dates.includes(P)?!1:ne.visible_dates&&Array.isArray(ne.visible_dates)&&ne.visible_dates.length>0?ne.visible_dates.includes(P):ne.date===P);if(fe.length===0)return;for(const ne of fe){let re=ne.visible_dates||[ne.date];if(re.includes(ie))continue;const ve=[...re,ie].sort(),{error:Ve}=await de.from("todos").update({visible_dates:ve}).eq("id",ne.id);Ve&&console.error(` ${ne.id}  :`,Ve.message)}}catch(P){console.error("   :",P.message)}};_.useEffect(()=>{let A=null;const Q=()=>{document.body.classList.add("is-scrolling"),A&&clearTimeout(A),A=setTimeout(()=>{document.body.classList.remove("is-scrolling")},1e3)};return window.addEventListener("scroll",Q),()=>{window.removeEventListener("scroll",Q),A&&clearTimeout(A)}},[]),_.useEffect(()=>{e&&(S_(),Fb(),l_(),He(),N_(),$_(),L_())},[e]),_.useEffect(()=>{if(!ei.current)return;const A=ei.current,Q=Ca==="horizontal";let P=!1,ie=0,Z=0,q=0;const fe=tt=>tt.type.includes("touch")?Q?tt.touches[0].pageX:tt.touches[0].pageY:Q?tt.pageX:tt.pageY,ne=tt=>{tt.target.closest(".section-block")||(P=!0,ie=fe(tt),Z=Q?A.scrollLeft:A.scrollTop,A.style.transition="none",A.style.transform=Q?"translateX(0)":"translateY(0)",q=0)},re=()=>{P&&q!==0&&(A.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",A.style.transform=Q?"translateX(0)":"translateY(0)",setTimeout(()=>{A.style.transition="none",q=0},300)),P=!1},ve=()=>{q!==0&&(A.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",A.style.transform=Q?"translateX(0)":"translateY(0)",setTimeout(()=>{A.style.transition="none",q=0},300)),P=!1},Ve=tt=>{if(!P)return;tt.preventDefault();const St=(fe(tt)-ie)*1.5,xt=Z-St,Ot=Q?A.scrollWidth-A.clientWidth:A.scrollHeight-A.clientHeight;if(xt<0){const pr=-xt;q=Math.min(pr*.3,100),Q?(A.scrollLeft=0,A.style.transform=`translateX(${q}px)`):(A.scrollTop=0,A.style.transform=`translateY(${q}px)`)}else if(xt>Ot){const pr=xt-Ot;q=-Math.min(pr*.3,100),Q?(A.scrollLeft=Ot,A.style.transform=`translateX(${q}px)`):(A.scrollTop=Ot,A.style.transform=`translateY(${q}px)`)}else q=0,A.style.transform=Q?"translateX(0)":"translateY(0)",Q?A.scrollLeft=xt:A.scrollTop=xt},st=tt=>{Q&&tt.target.closest(".section-block")&&tt.deltaX!==0&&tt.preventDefault()};return A.addEventListener("mousedown",ne),document.addEventListener("mouseup",ve),document.addEventListener("mouseleave",re),A.addEventListener("mousemove",Ve),A.addEventListener("touchstart",ne,{passive:!0}),A.addEventListener("touchmove",Ve,{passive:!1}),A.addEventListener("touchend",ve),A.addEventListener("touchcancel",ve),A.addEventListener("wheel",st,{passive:!1}),()=>{A.removeEventListener("mousedown",ne),document.removeEventListener("mouseup",ve),document.removeEventListener("mouseleave",re),A.removeEventListener("mousemove",Ve),A.removeEventListener("touchstart",ne),A.removeEventListener("touchmove",Ve),A.removeEventListener("touchend",ve),A.removeEventListener("touchcancel",ve),A.removeEventListener("wheel",st)}},[Ca,d,j]),_.useEffect(()=>{if(Ca!=="horizontal"||!ei.current)return;const A=ei.current,Q=()=>{const P=A.querySelectorAll(".section-block");if(P.length===0)return;const ie=A.getBoundingClientRect(),Z=ie.left+ie.width/2;let q=0,fe=1/0;P.forEach((ne,re)=>{const ve=ne.getBoundingClientRect(),Ve=ve.left+ve.width/2,st=Math.abs(Ve-Z);st<fe&&(fe=st,q=re)}),M_(q)};return A.addEventListener("scroll",Q),Q(),()=>A.removeEventListener("scroll",Q)},[Ca,d,j]),_.useEffect(()=>{if(!Qc.current)return;const A=Qc.current;let Q=!1,P=0,ie=0,Z=0;const q=ve=>{ve.target.closest(".section-block")||(Q=!0,P=ve.pageY,ie=A.scrollTop,A.style.transition="none",A.style.transform="translateY(0)",Z=0)},fe=()=>{Q&&Z!==0&&(A.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",A.style.transform="translateY(0)",setTimeout(()=>{A.style.transition="none",Z=0},300)),Q=!1},ne=()=>{Z!==0&&(A.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",A.style.transform="translateY(0)",setTimeout(()=>{A.style.transition="none",Z=0},300)),Q=!1},re=ve=>{if(!Q)return;ve.preventDefault();const st=(ve.pageY-P)*1.5,tt=ie-st,oa=A.scrollHeight-A.clientHeight;if(tt<0){const St=-tt;Z=Math.min(St*.3,100),A.scrollTop=0,A.style.transform=`translateY(${Z}px)`}else if(tt>oa){const St=tt-oa;Z=-Math.min(St*.3,100),A.scrollTop=oa,A.style.transform=`translateY(${Z}px)`}else Z=0,A.style.transform="translateY(0)",A.scrollTop=tt};return A.addEventListener("mousedown",q),document.addEventListener("mouseup",ne),document.addEventListener("mouseleave",fe),A.addEventListener("mousemove",re),()=>{A.removeEventListener("mousedown",q),document.removeEventListener("mouseup",ne),document.removeEventListener("mouseleave",fe),A.removeEventListener("mousemove",re)}},[d,j]),_.useEffect(()=>{ke&&yn()},[_e]),_.useEffect(()=>{const A=async()=>{const P=new Date,ie=new Date(P);ie.setHours(24,0,0,0);const Z=ie.getTime()-P.getTime();return setTimeout(async()=>{const fe=new Date(P),ne=new Date(P);ne.setDate(ne.getDate()+1),await I_(fe,ne),await te(),i(new Date),A()},Z)},Q=A();return()=>clearTimeout(Q)},[]),_.useEffect(()=>{(async()=>{var ne;const ie=Le(r),q=Le(new Date);ie===q&&((ne=e==null?void 0:e.user)!=null&&ne.id)&&await Qr(ie),await Ie()})();const Q=Le(r),P=de.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"todos",filter:`date=eq.${Q}`},ie=>{ie.eventType==="INSERT"?p(Z=>Z.some(fe=>fe.id===ie.new.id)?Z:[...Z,ie.new].sort((fe,ne)=>fe.order_index-ne.order_index)):ie.eventType==="UPDATE"?p(Z=>f.current.has(ie.new.id)?Z:Z.map(q=>q.id===ie.new.id?ie.new:q).sort((q,fe)=>q.order_index-fe.order_index)):ie.eventType==="DELETE"&&p(Z=>Z.filter(q=>q.id!==ie.old.id))}).subscribe(ie=>{});return()=>{de.removeChannel(P)}},[r,e]),_.useEffect(()=>{if(V){const A=window.scrollY,Q=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${A}px`,document.body.style.left="0",document.body.style.right="0",Q>0&&(document.body.style.paddingRight=`${Q}px`),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.paddingRight="",window.scrollTo(0,A)}}},[V]);const Hh=TO({authLoading:t,session:e,handleGoogleLogin:n});return Hh||(o==="keyThoughtsViewer"?c.jsx(pO,{blocks:Oh,setBlocks:Dh,onSave:o_,onClose:()=>u("home")}):c.jsxs("div",{className:`app ${V?"dragging-active":""}`,children:[c.jsx(oO,{showSidebar:s,setShowSidebar:l,session:e,viewMode:Ca,setViewMode:j_,isReorderMode:yr,setIsReorderMode:vr,onOpenTrash:Wn,onOpenRoutine:X,onOpenMemo:G,onScrollToKeyThoughts:()=>{const A=document.querySelector(".key-thoughts-section");A&&A.scrollIntoView({behavior:"smooth",block:"start"})},onOpenGanttChart:Je,onOpenEncouragementModal:()=>Ah(!0),onOpenDummyModal:()=>Wr(!0),onOpenAddSection:()=>Mh(!0),onLogout:a}),c.jsxs("div",{className:`container ${Ca==="horizontal"?"container-wide":""}`,children:[c.jsx(uO,{showSidebar:s,setShowSidebar:l,selectedDate:r,onDateChange:z_,onPrevDay:k_,onNextDay:U_,showEncouragementEmoji:b_,currentEncouragementMessage:__,onEncouragementClick:w_,isReorderMode:yr,setIsReorderMode:vr,setSelectedDate:i}),c.jsxs("div",{className:"content-scrollable",ref:Qc,children:[c.jsx(gc,{sensors:h,collisionDetection:hc,onDragStart:sa,onDragEnd:Cn,onDragCancel:la,children:c.jsx("div",{className:"todo-list",children:Y?c.jsx("p",{className:"empty-message",children:" ..."}):(()=>{const A=d.filter(Z=>!Z.parent_id&&Z.routine_id!==null&&!Z.is_pending_routine),Q=d.filter(Z=>!Z.parent_id&&Z.is_pending_routine),P=d.filter(Z=>!Z.parent_id&&Z.routine_id===null&&!Z.is_pending_routine&&!Z.section_id),ie=[...A.map(Z=>Z.id),...Q.map(Z=>Z.id),...P.map(Z=>Z.id),...hs.flatMap(Z=>d.filter(q=>!q.parent_id&&q.section_id===Z.id).map(q=>q.id))];return c.jsx(Ba,{items:ie,strategy:Ar,children:c.jsx(gc,{sensors:m,collisionDetection:hc,onDragEnd:A_,children:c.jsx(Ba,{items:Ul,strategy:Kj,children:c.jsx("div",{ref:ei,className:`sections-container ${Ca==="horizontal"?"horizontal-layout":"vertical-layout"}`,onDoubleClick:C_,children:Ul.map(Z=>{if(Z==="memo")return c.jsx(ws,{id:"memo",disabled:!yr,onLongPress:()=>vr(!0),children:c.jsxs(gO,{title:"  ",className:"memo-section section-block",content:Jb,setContent:Qb,isEditing:Jc,isSaving:Pb,textareaRef:Zb,onStartEdit:Wb,onSave:e_,onCancel:t_,onKeyDown:n_,placeholder:" ...",emptyMessage:" ",children:[!Jc&&c.jsx("div",{style:{marginTop:"1rem"},children:c.jsxs("button",{onClick:()=>Xc(!gr),style:{width:"100%",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(255, 255, 255, 0.05)",color:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.12)",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:q=>{q.currentTarget.style.background="rgba(255, 255, 255, 0.1)",q.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)"},onMouseLeave:q=>{q.currentTarget.style.background="rgba(255, 255, 255, 0.05)",q.currentTarget.style.borderColor="rgba(255, 255, 255, 0.12)"},title:"  SQL /",children:[c.jsx("span",{children:" SQL  "}),c.jsx("span",{children:gr?"":""})]})}),gr&&!Jc&&c.jsxs("div",{className:"dummy-sql-content",style:{marginTop:"1rem"},children:[c.jsxs("div",{className:"sql-block",children:[c.jsxs("div",{className:"sql-header",children:[c.jsx("span",{children:" SQL"}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("button",{onClick:()=>{window.open("https://raw.githubusercontent.com/jaehwan-lee-benja/todo-note/main/create-dummy-data-v2.sql","_blank")},className:"link-button",title:"GitHub  ",children:""}),c.jsx("button",{onClick:()=>{const q=new Date,fe=zl=>{const br=new Date(q);return br.setDate(br.getDate()+zl),br.toISOString().split("T")[0]},ne=zl=>{const br=new Date(q);return br.setDate(br.getDate()+zl),br.getDate()},re=Date.now(),ve=ne(-2),Ve=ne(-1),st=ne(0),tt=ne(1),oa=ne(2),St=fe(-2),xt=fe(-1),Ot=fe(0),pr=fe(1),qh=fe(2),V_=`--         (${Ot} )
INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${re}] : ${ve}--', '${St}', false, '${St}T09:00:00+09:00', 1001),
  ('[DUMMY-${re}] : ${ve}-${ve}', '${St}', true, '${St}T09:10:00+09:00', 1002),
  ('[DUMMY-${re}] : ${ve}-${Ve}', '${St}', true, '${St}T09:20:00+09:00', 1003),
  ('[DUMMY-${re}] : ${ve}-${st}', '${St}', true, '${St}T09:30:00+09:00', 1004);

INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${re}] : ${Ve}--', '${xt}', false, '${xt}T10:00:00+09:00', 1005),
  ('[DUMMY-${re}] : ${Ve}-${Ve}', '${xt}', true, '${xt}T10:10:00+09:00', 1006),
  ('[DUMMY-${re}] : ${Ve}-${st}', '${xt}', true, '${xt}T10:20:00+09:00', 1007);

INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${re}] : ${st}-', '${Ot}', false, '${Ot}T11:00:00+09:00', 1008),
  ('[DUMMY-${re}] : ${st}-${st}', '${Ot}', true, '${Ot}T11:10:00+09:00', 1009);

INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${re}] : ${ve}-${Ve}-', '${xt}', false, '${St}T14:00:00+09:00', 1010),
  ('[DUMMY-${re}] : ${ve}-${Ve}-${Ve}', '${xt}', true, '${St}T14:10:00+09:00', 1011);

INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${re}] : ${Ve}-${st}-', '${Ot}', false, '${xt}T15:00:00+09:00', 1012),
  ('[DUMMY-${re}] : ${Ve}-${st}-${st}', '${Ot}', true, '${xt}T15:10:00+09:00', 1013),
  ('[DUMMY-${re}] : ${ve}-${st}-', '${Ot}', false, '${St}T15:00:00+09:00', 1014),
  ('[DUMMY-${re}] : ${ve}-${st}-${st}', '${Ot}', true, '${St}T15:10:00+09:00', 1015);

INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${re}] : ${st}-${tt}-', '${pr}', false, '${Ot}T16:00:00+09:00', 1016),
  ('[DUMMY-${re}] : ${Ve}-${tt}-', '${pr}', false, '${xt}T16:00:00+09:00', 1017),
  ('[DUMMY-${re}] : ${ve}-${tt}-', '${pr}', false, '${St}T16:00:00+09:00', 1018);

INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${re}] : ${st}-${oa}-', '${qh}', false, '${Ot}T17:00:00+09:00', 1019),
  ('[DUMMY-${re}] : ${Ve}-${oa}-', '${qh}', false, '${xt}T17:00:00+09:00', 1020);

INSERT INTO todo_history (todo_id, previous_text, new_text, changed_at, changed_on_date)
SELECT id, '[DUMMY-${re}] : ${ve}--1', '[DUMMY-${re}] : ${ve}--2', '${xt}T12:00:00+09:00', '${xt}'
FROM todos WHERE text = '[DUMMY-${re}] : ${ve}--' LIMIT 1;

INSERT INTO todo_history (todo_id, previous_text, new_text, changed_at, changed_on_date)
SELECT id, '[DUMMY-${re}] : ${ve}--2', '[DUMMY-${re}] : ${ve}--', '${Ot}T12:00:00+09:00', '${Ot}'
FROM todos WHERE text = '[DUMMY-${re}] : ${ve}--' LIMIT 1;

INSERT INTO todo_history (todo_id, previous_text, new_text, changed_at, changed_on_date)
SELECT id, '[DUMMY-${re}] : ${Ve}--1', '[DUMMY-${re}] : ${Ve}--', '${Ot}T13:00:00+09:00', '${Ot}'
FROM todos WHERE text = '[DUMMY-${re}] : ${Ve}--' LIMIT 1;`,ti=document.createElement("textarea");ti.value=V_,ti.style.position="fixed",ti.style.opacity="0",document.body.appendChild(ti),ti.select();try{document.execCommand("copy"),alert(" SQL  !")}catch{alert(" .")}document.body.removeChild(ti)},className:"copy-button",children:" "})]})]}),c.jsx("pre",{className:"sql-code",children:`--  :         
--   (      )

-- DO   (PostgreSQL/Supabase)
DO $$
DECLARE
  day_m2 date := CURRENT_DATE - INTERVAL '2 days';
  day_m1 date := CURRENT_DATE - INTERVAL '1 day';
  day_0 date := CURRENT_DATE;
  day_p1 date := CURRENT_DATE + INTERVAL '1 day';
  day_p2 date := CURRENT_DATE + INTERVAL '2 days';
  d_m2 text := EXTRACT(DAY FROM CURRENT_DATE - INTERVAL '2 days')::text;
  d_m1 text := EXTRACT(DAY FROM CURRENT_DATE - INTERVAL '1 day')::text;
  d_0 text := EXTRACT(DAY FROM CURRENT_DATE)::text;
  d_p1 text := EXTRACT(DAY FROM CURRENT_DATE + INTERVAL '1 day')::text;
  d_p2 text := EXTRACT(DAY FROM CURRENT_DATE + INTERVAL '2 days')::text;
  session_id text := EXTRACT(EPOCH FROM NOW())::bigint::text;
BEGIN
  -- -2   (4)
  INSERT INTO todos (text, date, completed, created_at, order_index)
  VALUES
    ('[DUMMY-' || session_id || '] : ' || d_m2 || '--', day_m2, false, (day_m2 + TIME '09:00:00') AT TIME ZONE 'Asia/Seoul', 1001),
    ...

  --  20  3  
  --   GitHub  
END $$;`})]}),c.jsxs("div",{className:"sql-block",children:[c.jsxs("div",{className:"sql-header",children:[c.jsx("span",{children:" SQL"}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("button",{onClick:()=>{window.open("https://raw.githubusercontent.com/jaehwan-lee-benja/todo-note/main/delete-dummy-data-v2.sql","_blank")},className:"link-button",title:"GitHub  ",children:""}),c.jsx("button",{onClick:()=>{const q=`DELETE FROM todo_history
WHERE todo_id IN (
  SELECT id FROM todos WHERE text LIKE '[DUMMY-%'
);

DELETE FROM todos
WHERE text LIKE '[DUMMY-%';`,fe=document.createElement("textarea");fe.value=q,fe.style.position="fixed",fe.style.opacity="0",document.body.appendChild(fe),fe.select();try{document.execCommand("copy"),alert(" SQL  !")}catch{alert(" .")}document.body.removeChild(fe)},className:"copy-button",children:" "})]})]}),c.jsx("pre",{className:"sql-code",children:`DELETE FROM todo_history
WHERE todo_id IN (
  SELECT id FROM todos WHERE text LIKE '[DUMMY-%'
);

DELETE FROM todos
WHERE text LIKE '[DUMMY-%';`})]})]})]})},"memo");if(Z==="routine")return c.jsx(ws,{id:"routine",disabled:!yr,onLongPress:()=>vr(!0),children:c.jsxs(Xu,{title:" ",className:"routine-section section-block",inputValue:mn,setInputValue:An,onAddTodo:_t,isAdding:J,placeholder:"   ...",children:[A.length>0&&c.jsx(Ba,{items:A.map(q=>q.id),strategy:Ar,children:A.map((q,fe)=>{const ne=d.filter(re=>re.parent_id===q.id);return c.jsx(Ds,{todo:q,index:fe,onToggle:Vt,onDelete:Gt,onEdit:Xt,formatDate:ka,formatDateOnly:Kn,isFocused:Ee===q.id,onFocus:Pr,onAddSubTodo:Kt,subtodos:ne,level:0,onCreateRoutine:Ne,routines:j,onShowRoutineHistory:L,onOpenRoutineSetupModal:Lt,onOpenHistoryModal:w,currentPageDate:Le(r),onRemoveFromUI:Aa,showSuccessMessage:Zr},q.id)})}),A.length>0&&Q.length>0&&c.jsx("div",{style:{margin:"1rem 0",padding:"0 1rem"},children:c.jsx("div",{className:"separator-line"})}),Q.length>0&&c.jsx(Ba,{items:Q.map(q=>q.id),strategy:Ar,children:Q.map((q,fe)=>{const ne=d.filter(re=>re.parent_id===q.id);return c.jsx(Ds,{todo:q,index:fe,onToggle:Vt,onDelete:Gt,onEdit:Xt,formatDate:ka,formatDateOnly:Kn,isFocused:Ee===q.id,onFocus:Pr,onAddSubTodo:Kt,subtodos:ne,level:0,onCreateRoutine:Ne,routines:j,onShowRoutineHistory:L,onOpenRoutineSetupModal:Lt,onOpenHistoryModal:w,currentPageDate:Le(r),isPendingRoutine:!0,onRemoveFromUI:Aa,showSuccessMessage:Zr},q.id)})})]})},"routine");if(Z==="normal")return c.jsx(ws,{id:"normal",disabled:!yr,onLongPress:()=>vr(!0),children:c.jsx(Xu,{title:Ch.normal,className:"normal-section section-block",inputValue:Wt,setInputValue:hr,onAddTodo:Mt,isAdding:J,placeholder:"   ...",editable:!0,onTitleChange:q=>B_("normal",q),children:P.length>0&&c.jsx(Ba,{items:P.map(q=>q.id),strategy:Ar,children:P.map((q,fe,ne)=>{const re=d.filter(St=>St.parent_id===q.id),ve=Le(r),Ve=q.created_at?q.created_at.split("T")[0]:q.date,st=ne[fe+1],tt=st?st.created_at?st.created_at.split("T")[0]:st.date:null,oa=Ve<ve&&tt>=ve;return c.jsxs(ot.Fragment,{children:[c.jsx(Ds,{todo:q,index:fe,onToggle:Vt,onDelete:Gt,onEdit:Xt,formatDate:ka,formatDateOnly:Kn,isFocused:Ee===q.id,onFocus:Pr,onAddSubTodo:Kt,subtodos:re,level:0,onCreateRoutine:Ne,routines:j,onShowRoutineHistory:L,onOpenRoutineSetupModal:Lt,onOpenHistoryModal:w,currentPageDate:ve,onRemoveFromUI:Aa,showSuccessMessage:Zr}),oa&&c.jsxs("div",{className:"todo-date-separator",children:[c.jsx("div",{className:"separator-line"}),c.jsx("div",{className:"separator-text",children:" "}),c.jsx("div",{className:"separator-line"})]})]},q.id)})})})},"normal");if(Z==="key-thoughts")return c.jsx(ws,{id:"key-thoughts",disabled:!yr,onLongPress:()=>vr(!0),children:c.jsx(yO,{blocks:Oh,setBlocks:Dh,focusedBlockId:a_,setFocusedBlockId:r_,onOpenViewer:()=>u("keyThoughtsViewer"),onShowHistory:()=>{c_(),Nh(!0)}})},"key-thoughts");{const q=hs.find(ne=>ne.id===Z);if(!q)return null;const fe=d.filter(ne=>!ne.parent_id&&ne.section_id===Z);return c.jsx(ws,{id:Z,disabled:!yr,onLongPress:()=>vr(!0),children:c.jsx(Xu,{title:`${q.icon} ${q.name}`,className:"custom-section section-block",inputValue:zh[Z]||"",setInputValue:ne=>$h(re=>({...re,[Z]:ne})),onAddTodo:()=>q_(Z),isAdding:kh,placeholder:`${q.name}   ...`,editable:!0,onTitleChange:ne=>{const re=hs.map(ve=>ve.id===Z?{...ve,name:ne}:ve);kl(re),Pc(re)},headerActions:c.jsx("button",{className:"delete-section-button",onClick:()=>Y_(Z),title:" ",children:" "}),children:fe.length>0&&c.jsx(Ba,{items:fe.map(ne=>ne.id),strategy:Ar,children:fe.map((ne,re)=>{const ve=d.filter(Ve=>Ve.parent_id===ne.id);return c.jsx(Ds,{todo:ne,index:re,onToggle:Vt,onDelete:Gt,onEdit:Xt,formatDate:ka,formatDateOnly:Kn,isFocused:Ee===ne.id,onFocus:Pr,onAddSubTodo:Kt,subtodos:ve,level:0,onCreateRoutine:Ne,routines:j,onShowRoutineHistory:L,onOpenRoutineSetupModal:Lt,onOpenHistoryModal:w,currentPageDate:Le(r),onRemoveFromUI:Aa,showSuccessMessage:Zr},ne.id)})})})},Z)}})})})})})})()})}),c.jsx(dO,{viewMode:Ca,currentSectionIndex:R_,sectionsContainerRef:ei})]}),he&&c.jsx(ry,{message:"",onUndo:Cl}),le&&c.jsx(ry,{message:be,onUndo:ut?k:null,variant:"success"}),Ze&&et&&c.jsx("div",{className:"modal-overlay",onClick:()=>Ye(!1),children:c.jsxs("div",{className:"modal-content delete-confirm-modal",onClick:A=>A.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:()=>Ye(!1),className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"delete-confirm-content",children:[c.jsx("p",{className:"delete-confirm-text",children:c.jsx("strong",{children:et.text})}),c.jsx("p",{className:"delete-confirm-description",children:"    .  ?"}),c.jsxs("div",{className:"delete-options-simple",children:[c.jsxs("button",{className:"delete-option-button-simple option-hide",onClick:()=>Rl(et),children:[c.jsx("span",{className:"option-icon",children:""}),c.jsx("span",{className:"option-title",children:"  "}),c.jsx("span",{className:"option-desc",children:"   "})]}),c.jsxs("button",{className:"delete-option-button-simple option-delete",onClick:()=>Ml(et),children:[c.jsx("span",{className:"option-icon",children:""}),c.jsx("span",{className:"option-title",children:" "}),c.jsx("span",{className:"option-desc",children:"   ( )"})]})]})]})]})}),v&&b&&(()=>{const A=b,Q=A.visible_dates&&A.visible_dates.length>0?A.visible_dates:[A.date],P=Q[0],ie=Q.map(q=>({id:`${A.id}-${q}`,date:q})),Z=g[A.id]||[];return c.jsx("div",{className:"modal-overlay",onClick:T,children:c.jsxs("div",{className:"modal-content",onClick:q=>q.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:T,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsxs("div",{className:"todo-history",children:[c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:":"}),c.jsx("span",{className:"history-value",children:ka(A.created_at)})]}),c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:Kn(P?new Date(P+"T00:00:00"):new Date(A.date+"T00:00:00"))})]}),ie.length>0&&c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:ie.map((q,fe)=>{const ne=q.date===A.date,re=Kn(new Date(q.date+"T00:00:00"));return c.jsxs("span",{children:[fe>0&&"  ",c.jsxs("span",{style:ne?{fontWeight:"bold",color:"#4CAF50"}:{},children:[re.split("(")[0],ne?"()":""]})]},q.id)})})]}),(()=>{const q=new Date(A.created_at).toISOString().split("T")[0],fe=A.date;return q!==fe&&ie.length===0?c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:Kn(new Date(A.date+"T00:00:00"))})]}):null})(),Z.length>0&&c.jsxs("div",{className:"history-changes-list",children:[c.jsxs("div",{className:"history-changes-header",children:["  (",Z.length,")"]}),Z.map(q=>c.jsxs("div",{className:"history-record-compact",children:[c.jsxs("div",{className:"history-record-summary",children:[c.jsxs("div",{className:"history-change-time",children:[ka(q.changed_at),q.changed_on_date&&c.jsxs("span",{className:"history-page-info",children:[" (: ",Kn(new Date(q.changed_on_date+"T00:00:00")),")"]})]}),c.jsx("button",{className:"history-detail-button",onClick:fe=>{fe.stopPropagation(),E(q.id)},children:y.includes(q.id)?"":""})]}),y.includes(q.id)&&c.jsxs("div",{className:"history-change",children:[c.jsxs("div",{className:"history-change-item history-before",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:q.previous_text})]}),c.jsx("div",{className:"history-change-arrow",children:""}),c.jsxs("div",{className:"history-change-item history-after",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:q.new_text})]})]})]},q.id))]})]})})]})})})(),ce&&b&&(()=>{const A=b,Q=j.find(P=>P.id===A.routine_id);return c.jsx("div",{className:"modal-overlay",onClick:Nn,children:c.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:Nn,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("div",{className:"routine-setup-inline",children:Q&&!je?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-current-info",children:[c.jsx("div",{className:"routine-info-title",children:" :"}),c.jsx("div",{className:"routine-days-display",children:$r.filter(P=>Q.days.includes(P.key)).map(P=>c.jsx("span",{className:"routine-day-badge",children:P.label},P.key))}),Q.time_slot&&c.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",Q.time_slot]})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:P=>{P.stopPropagation(),Q&&(De(Q.days),Bt(Q.time_slot||""),Xe(!0))},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:async P=>{P.stopPropagation(),Q&&A&&(await Ne(A.id,A.text,[],null,!0),Nn())},className:"routine-remove-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"routine-setup-title",children:je?" :":"  :"}),c.jsx("div",{className:"day-selector-inline",children:$r.map(P=>c.jsx("button",{onClick:ie=>{ie.stopPropagation(),handleToggleRoutineDayInModal(P.key)},className:`day-button-inline ${Se.includes(P.key)?"selected":""}`,children:P.label},P.key))}),c.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[c.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),c.jsx(jh,{value:qe,onChange:P=>Bt(P)})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:async P=>{P.stopPropagation(),A&&(je&&Q?await Ne(A.id,A.text,Se,Q.id,!1,qe):await Ne(A.id,A.text,Se,null,!1,qe),Nn())},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:P=>{P.stopPropagation(),Nn()},className:"routine-cancel-button",children:""})]})]})})})]})})})(),c.jsx(fO,{showRoutineModal:S,onClose:M,routineInput:O,setRoutineInput:R,isAddingRoutine:oe,selectedDays:K,onToggleDay:W,selectedTimeSlot:ee,setSelectedTimeSlot:ae,onAddRoutine:Oe,routines:j,editingRoutineId:C,editingRoutineText:$,setEditingRoutineText:F,editingRoutineDays:pe,onToggleEditDay:H,onStartEdit:Ae,onSaveEdit:B,onCancelEdit:I,onDelete:N,onShowHistory:L}),c.jsx(mO,{showRoutineHistory:me,onClose:z,selectedRoutine:Te,routineHistoryData:vt}),c.jsx(bO,{showTrashModal:at,onClose:Na,trashedItems:rt,onEmptyTrash:Kc,onRestoreFromTrash:wt,onPermanentDelete:gn,formatDate:ka}),c.jsx(_O,{showDummyModal:mr,onClose:()=>Wr(!1),onCreateDummyData:fs,onRemoveDuplicates:Xb,dummySessions:Fr,onDeleteDummySession:Gb,onDeleteAllDummies:Kb,formatDate:ka}),c.jsx(wO,{showGanttChart:ke,onClose:it,ganttData:$e,ganttPeriod:_e,setGanttPeriod:Be,formatDateOnly:Kn}),c.jsx(SO,{showEncouragementModal:f_,onClose:()=>Ah(!1),encouragementMessages:d_,newEncouragementMessage:h_,setNewEncouragementMessage:m_,onAddEncouragementMessage:x_,editingEncouragementId:g_,editingEncouragementText:v_,setEditingEncouragementId:y_,setEditingEncouragementText:p_,onUpdateEncouragementMessage:E_,onDeleteEncouragementMessage:T_}),c.jsx(EO,{isOpen:O_,onClose:()=>Mh(!1),onAddSection:H_}),c.jsx(xO,{showKeyThoughtsHistory:s_,onClose:()=>Nh(!1),keyThoughtsHistory:i_,onRestoreVersion:u_})]})]}))}Yx.createRoot(document.getElementById("root")).render(c.jsx(_.StrictMode,{children:c.jsx(LO,{})}));

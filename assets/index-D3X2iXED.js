function dw(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function my(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function gy(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var yy={exports:{}},lc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw=Symbol.for("react.transitional.element"),hw=Symbol.for("react.fragment");function vy(e,t,n){var r=null;if(n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),"key"in t){n={};for(var a in t)a!=="key"&&(n[a]=t[a])}else n=t;return t=n.ref,{$$typeof:fw,type:e,key:r,ref:t!==void 0?t:null,props:n}}lc.Fragment=hw;lc.jsx=vy;lc.jsxs=vy;yy.exports=lc;var c=yy.exports,py={exports:{}},Se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var af=Symbol.for("react.transitional.element"),mw=Symbol.for("react.portal"),gw=Symbol.for("react.fragment"),yw=Symbol.for("react.strict_mode"),vw=Symbol.for("react.profiler"),pw=Symbol.for("react.consumer"),bw=Symbol.for("react.context"),_w=Symbol.for("react.forward_ref"),ww=Symbol.for("react.suspense"),Sw=Symbol.for("react.memo"),by=Symbol.for("react.lazy"),xw=Symbol.for("react.activity"),Jh=Symbol.iterator;function Ew(e){return e===null||typeof e!="object"?null:(e=Jh&&e[Jh]||e["@@iterator"],typeof e=="function"?e:null)}var _y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wy=Object.assign,Sy={};function Qi(e,t,n){this.props=e,this.context=t,this.refs=Sy,this.updater=n||_y}Qi.prototype.isReactComponent={};Qi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xy(){}xy.prototype=Qi.prototype;function sf(e,t,n){this.props=e,this.context=t,this.refs=Sy,this.updater=n||_y}var lf=sf.prototype=new xy;lf.constructor=sf;wy(lf,Qi.prototype);lf.isPureReactComponent=!0;var Ph=Array.isArray;function Vu(){}var ht={H:null,A:null,T:null,S:null},Ey=Object.prototype.hasOwnProperty;function of(e,t,n){var r=n.ref;return{$$typeof:af,type:e,key:t,ref:r!==void 0?r:null,props:n}}function Tw(e,t){return of(e.type,t,e.props)}function cf(e){return typeof e=="object"&&e!==null&&e.$$typeof===af}function jw(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Zh=/\/+/g;function Kc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jw(""+e.key):t.toString(36)}function Ow(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Vu,Vu):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function li(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"bigint":case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case af:case mw:s=!0;break;case by:return s=e._init,li(s(e._payload),t,n,r,a)}}if(s)return a=a(e),s=r===""?"."+Kc(e,0):r,Ph(a)?(n="",s!=null&&(n=s.replace(Zh,"$&/")+"/"),li(a,t,n,"",function(u){return u})):a!=null&&(cf(a)&&(a=Tw(a,n+(a.key==null||e&&e.key===a.key?"":(""+a.key).replace(Zh,"$&/")+"/")+s)),t.push(a)),1;s=0;var l=r===""?".":r+":";if(Ph(e))for(var o=0;o<e.length;o++)r=e[o],i=l+Kc(r,o),s+=li(r,t,n,i,a);else if(o=Ew(e),typeof o=="function")for(e=o.call(e),o=0;!(r=e.next()).done;)r=r.value,i=l+Kc(r,o++),s+=li(r,t,n,i,a);else if(i==="object"){if(typeof e.then=="function")return li(Ow(e),t,n,r,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return s}function Cl(e,t,n){if(e==null)return e;var r=[],a=0;return li(e,r,"","",function(i){return t.call(n,i,a++)}),r}function Dw(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Fh=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Aw={map:Cl,forEach:function(e,t,n){Cl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Cl(e,function(){t++}),t},toArray:function(e){return Cl(e,function(t){return t})||[]},only:function(e){if(!cf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Activity=xw;Se.Children=Aw;Se.Component=Qi;Se.Fragment=gw;Se.Profiler=vw;Se.PureComponent=sf;Se.StrictMode=yw;Se.Suspense=ww;Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ht;Se.__COMPILER_RUNTIME={__proto__:null,c:function(e){return ht.H.useMemoCache(e)}};Se.cache=function(e){return function(){return e.apply(null,arguments)}};Se.cacheSignal=function(){return null};Se.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var r=wy({},e.props),a=e.key;if(t!=null)for(i in t.key!==void 0&&(a=""+t.key),t)!Ey.call(t,i)||i==="key"||i==="__self"||i==="__source"||i==="ref"&&t.ref===void 0||(r[i]=t[i]);var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){for(var s=Array(i),l=0;l<i;l++)s[l]=arguments[l+2];r.children=s}return of(e.type,a,r)};Se.createContext=function(e){return e={$$typeof:bw,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:pw,_context:e},e};Se.createElement=function(e,t,n){var r,a={},i=null;if(t!=null)for(r in t.key!==void 0&&(i=""+t.key),t)Ey.call(t,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(a[r]=t[r]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var l=Array(s),o=0;o<s;o++)l[o]=arguments[o+2];a.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return of(e,i,a)};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:_w,render:e}};Se.isValidElement=cf;Se.lazy=function(e){return{$$typeof:by,_payload:{_status:-1,_result:e},_init:Dw}};Se.memo=function(e,t){return{$$typeof:Sw,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=ht.T,n={};ht.T=n;try{var r=e(),a=ht.S;a!==null&&a(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(Vu,Fh)}catch(i){Fh(i)}finally{t!==null&&n.types!==null&&(t.types=n.types),ht.T=t}};Se.unstable_useCacheRefresh=function(){return ht.H.useCacheRefresh()};Se.use=function(e){return ht.H.use(e)};Se.useActionState=function(e,t,n){return ht.H.useActionState(e,t,n)};Se.useCallback=function(e,t){return ht.H.useCallback(e,t)};Se.useContext=function(e){return ht.H.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e,t){return ht.H.useDeferredValue(e,t)};Se.useEffect=function(e,t){return ht.H.useEffect(e,t)};Se.useEffectEvent=function(e){return ht.H.useEffectEvent(e)};Se.useId=function(){return ht.H.useId()};Se.useImperativeHandle=function(e,t,n){return ht.H.useImperativeHandle(e,t,n)};Se.useInsertionEffect=function(e,t){return ht.H.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return ht.H.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return ht.H.useMemo(e,t)};Se.useOptimistic=function(e,t){return ht.H.useOptimistic(e,t)};Se.useReducer=function(e,t,n){return ht.H.useReducer(e,t,n)};Se.useRef=function(e){return ht.H.useRef(e)};Se.useState=function(e){return ht.H.useState(e)};Se.useSyncExternalStore=function(e,t,n){return ht.H.useSyncExternalStore(e,t,n)};Se.useTransition=function(){return ht.H.useTransition()};Se.version="19.2.0";py.exports=Se;var _=py.exports;const ft=my(_);var Ty={exports:{}},oc={},jy={exports:{}},Oy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,B){var Q=C.length;C.push(B);e:for(;0<Q;){var fe=Q-1>>>1,ve=C[fe];if(0<a(ve,B))C[fe]=B,C[Q]=ve,Q=fe;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var B=C[0],Q=C.pop();if(Q!==B){C[0]=Q;e:for(var fe=0,ve=C.length,gt=ve>>>1;fe<gt;){var Ue=2*(fe+1)-1,ze=C[Ue],Ce=Ue+1,Re=C[Ce];if(0>a(ze,Q))Ce<ve&&0>a(Re,ze)?(C[fe]=Re,C[Ce]=Q,fe=Ce):(C[fe]=ze,C[Ue]=Q,fe=Ue);else if(Ce<ve&&0>a(Re,Q))C[fe]=Re,C[Ce]=Q,fe=Ce;else break e}}return B}function a(C,B){var Q=C.sortIndex-B.sortIndex;return Q!==0?Q:C.id-B.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var o=[],u=[],f=1,d=null,m=3,h=!1,p=!1,b=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function w(C){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=C)r(u),B.sortIndex=B.expirationTime,t(o,B);else break;B=n(u)}}function E(C){if(b=!1,w(C),!p)if(n(o)!==null)p=!0,j||(j=!0,V());else{var B=n(u);B!==null&&oe(E,B.startTime-C)}}var j=!1,S=-1,T=5,A=-1;function O(){return x?!0:!(e.unstable_now()-A<T)}function N(){if(x=!1,j){var C=e.unstable_now();A=C;var B=!0;try{e:{p=!1,b&&(b=!1,g(S),S=-1),h=!0;var Q=m;try{t:{for(w(C),d=n(o);d!==null&&!(d.expirationTime>C&&O());){var fe=d.callback;if(typeof fe=="function"){d.callback=null,m=d.priorityLevel;var ve=fe(d.expirationTime<=C);if(C=e.unstable_now(),typeof ve=="function"){d.callback=ve,w(C),B=!0;break t}d===n(o)&&r(o),w(C)}else r(o);d=n(o)}if(d!==null)B=!0;else{var gt=n(u);gt!==null&&oe(E,gt.startTime-C),B=!1}}break e}finally{d=null,m=Q,h=!1}B=void 0}}finally{B?V():j=!1}}}var V;if(typeof y=="function")V=function(){y(N)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,ne=Z.port2;Z.port1.onmessage=N,V=function(){ne.postMessage(null)}}else V=function(){v(N,0)};function oe(C,B){S=v(function(){C(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(C){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var Q=m;m=B;try{return C()}finally{m=Q}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(C,B){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var Q=m;m=C;try{return B()}finally{m=Q}},e.unstable_scheduleCallback=function(C,B,Q){var fe=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?fe+Q:fe):Q=fe,C){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Q+ve,C={id:f++,callback:B,priorityLevel:C,startTime:Q,expirationTime:ve,sortIndex:-1},Q>fe?(C.sortIndex=Q,t(u,C),n(o)===null&&C===n(u)&&(b?(g(S),S=-1):b=!0,oe(E,Q-fe))):(C.sortIndex=ve,t(o,C),p||h||(p=!0,j||(j=!0,V()))),C},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(C){var B=m;return function(){var Q=m;m=B;try{return C.apply(this,arguments)}finally{m=Q}}}})(Oy);jy.exports=Oy;var Nw=jy.exports,Dy={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw=_;function Ay(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Br(){}var on={d:{f:Br,r:function(){throw Error(Ay(522))},D:Br,C:Br,L:Br,m:Br,X:Br,S:Br,M:Br},p:0,findDOMNode:null},Rw=Symbol.for("react.portal");function Mw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rw,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}var Ts=Cw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function cc(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=on;cn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(Ay(299));return Mw(e,t,null,n)};cn.flushSync=function(e){var t=Ts.T,n=on.p;try{if(Ts.T=null,on.p=2,e)return e()}finally{Ts.T=t,on.p=n,on.d.f()}};cn.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,on.d.C(e,t))};cn.prefetchDNS=function(e){typeof e=="string"&&on.d.D(e)};cn.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,r=cc(n,t.crossOrigin),a=typeof t.integrity=="string"?t.integrity:void 0,i=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?on.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:i}):n==="script"&&on.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:i,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};cn.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=cc(t.as,t.crossOrigin);on.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&on.d.M(e)};cn.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,r=cc(n,t.crossOrigin);on.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};cn.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=cc(t.as,t.crossOrigin);on.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else on.d.m(e)};cn.requestFormReset=function(e){on.d.r(e)};cn.unstable_batchedUpdates=function(e,t){return e(t)};cn.useFormState=function(e,t,n){return Ts.H.useFormState(e,t,n)};cn.useFormStatus=function(){return Ts.H.useHostTransitionStatus()};cn.version="19.2.0";function Ny(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ny)}catch(e){console.error(e)}}Ny(),Dy.exports=cn;var Aa=Dy.exports;const Cy=my(Aa);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt=Nw,Ry=_,kw=Aa;function k(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function My(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ul(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ky(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Uy(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wh(e){if(ul(e)!==e)throw Error(k(188))}function Uw(e){var t=e.alternate;if(!t){if(t=ul(e),t===null)throw Error(k(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Wh(a),e;if(i===r)return Wh(a),t;i=i.sibling}throw Error(k(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s)throw Error(k(189))}}if(n.alternate!==r)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?e:t}function zy(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=zy(e),t!==null)return t;e=e.sibling}return null}var mt=Object.assign,zw=Symbol.for("react.element"),Rl=Symbol.for("react.transitional.element"),bs=Symbol.for("react.portal"),hi=Symbol.for("react.fragment"),$y=Symbol.for("react.strict_mode"),Gu=Symbol.for("react.profiler"),By=Symbol.for("react.consumer"),Er=Symbol.for("react.context"),uf=Symbol.for("react.forward_ref"),Ku=Symbol.for("react.suspense"),Xu=Symbol.for("react.suspense_list"),df=Symbol.for("react.memo"),qr=Symbol.for("react.lazy"),Qu=Symbol.for("react.activity"),$w=Symbol.for("react.memo_cache_sentinel"),em=Symbol.iterator;function fs(e){return e===null||typeof e!="object"?null:(e=em&&e[em]||e["@@iterator"],typeof e=="function"?e:null)}var Bw=Symbol.for("react.client.reference");function Ju(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Bw?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hi:return"Fragment";case Gu:return"Profiler";case $y:return"StrictMode";case Ku:return"Suspense";case Xu:return"SuspenseList";case Qu:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case bs:return"Portal";case Er:return e.displayName||"Context";case By:return(e._context.displayName||"Context")+".Consumer";case uf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case df:return t=e.displayName||null,t!==null?t:Ju(e.type)||"Memo";case qr:t=e._payload,e=e._init;try{return Ju(e(t))}catch{}}return null}var _s=Array.isArray,be=Ry.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge=kw.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ca={pending:!1,data:null,method:null,action:null},Pu=[],mi=-1;function hr(e){return{current:e}}function Qt(e){0>mi||(e.current=Pu[mi],Pu[mi]=null,mi--)}function st(e,t){mi++,Pu[mi]=e.current,e.current=t}var fr=hr(null),Gs=hr(null),ea=hr(null),wo=hr(null);function So(e,t){switch(st(ea,t),st(Gs,e),st(fr,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=sg(t),e=a0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Qt(fr),st(fr,e)}function Ui(){Qt(fr),Qt(Gs),Qt(ea)}function Zu(e){e.memoizedState!==null&&st(wo,e);var t=fr.current,n=a0(t,e.type);t!==n&&(st(Gs,e),st(fr,n))}function xo(e){Gs.current===e&&(Qt(fr),Qt(Gs)),wo.current===e&&(Qt(wo),nl._currentValue=Ca)}var Xc,tm;function _a(e){if(Xc===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xc=t&&t[1]||"",tm=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xc+e+tm}var Qc=!1;function Jc(e,t){if(!e||Qc)return"";Qc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(h){var m=h}Reflect.construct(e,[],d)}else{try{d.call()}catch(h){m=h}e.call(d.prototype)}}else{try{throw Error()}catch(h){m=h}(d=e())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(h){if(h&&m&&typeof h.stack=="string")return[h.stack,m.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),s=i[0],l=i[1];if(s&&l){var o=s.split(`
`),u=l.split(`
`);for(a=r=0;r<o.length&&!o[r].includes("DetermineComponentFrameRoot");)r++;for(;a<u.length&&!u[a].includes("DetermineComponentFrameRoot");)a++;if(r===o.length||a===u.length)for(r=o.length-1,a=u.length-1;1<=r&&0<=a&&o[r]!==u[a];)a--;for(;1<=r&&0<=a;r--,a--)if(o[r]!==u[a]){if(r!==1||a!==1)do if(r--,a--,0>a||o[r]!==u[a]){var f=`
`+o[r].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=r&&0<=a);break}}}finally{Qc=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?_a(n):""}function Lw(e,t){switch(e.tag){case 26:case 27:case 5:return _a(e.type);case 16:return _a("Lazy");case 13:return e.child!==t&&t!==null?_a("Suspense Fallback"):_a("Suspense");case 19:return _a("SuspenseList");case 0:case 15:return Jc(e.type,!1);case 11:return Jc(e.type.render,!1);case 1:return Jc(e.type,!0);case 31:return _a("Activity");default:return""}}function nm(e){try{var t="",n=null;do t+=Lw(e,n),n=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Fu=Object.prototype.hasOwnProperty,ff=qt.unstable_scheduleCallback,Pc=qt.unstable_cancelCallback,Hw=qt.unstable_shouldYield,qw=qt.unstable_requestPaint,Rn=qt.unstable_now,Iw=qt.unstable_getCurrentPriorityLevel,Ly=qt.unstable_ImmediatePriority,Hy=qt.unstable_UserBlockingPriority,Eo=qt.unstable_NormalPriority,Yw=qt.unstable_LowPriority,qy=qt.unstable_IdlePriority,Vw=qt.log,Gw=qt.unstable_setDisableYieldValue,dl=null,Mn=null;function Jr(e){if(typeof Vw=="function"&&Gw(e),Mn&&typeof Mn.setStrictMode=="function")try{Mn.setStrictMode(dl,e)}catch{}}var kn=Math.clz32?Math.clz32:Qw,Kw=Math.log,Xw=Math.LN2;function Qw(e){return e>>>=0,e===0?32:31-(Kw(e)/Xw|0)|0}var Ml=256,kl=262144,Ul=4194304;function wa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function uc(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var a=0,i=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var l=r&134217727;return l!==0?(r=l&~i,r!==0?a=wa(r):(s&=l,s!==0?a=wa(s):n||(n=l&~e,n!==0&&(a=wa(n))))):(l=r&~i,l!==0?a=wa(l):s!==0?a=wa(s):n||(n=r&~e,n!==0&&(a=wa(n)))),a===0?0:t!==0&&t!==a&&!(t&i)&&(i=a&-a,n=t&-t,i>=n||i===32&&(n&4194048)!==0)?t:a}function fl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Jw(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iy(){var e=Ul;return Ul<<=1,!(Ul&62914560)&&(Ul=4194304),e}function Zc(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function hl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pw(e,t,n,r,a,i){var s=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,u=e.hiddenUpdates;for(n=s&~n;0<n;){var f=31-kn(n),d=1<<f;l[f]=0,o[f]=-1;var m=u[f];if(m!==null)for(u[f]=null,f=0;f<m.length;f++){var h=m[f];h!==null&&(h.lane&=-536870913)}n&=~d}r!==0&&Yy(e,r,0),i!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=i&~(s&~t))}function Yy(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-kn(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function Vy(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-kn(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}function Gy(e,t){var n=t&-t;return n=n&42?1:hf(n),n&(e.suspendedLanes|t)?0:n}function hf(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function mf(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function Ky(){var e=Ge.p;return e!==0?e:(e=window.event,e===void 0?32:g0(e.type))}function rm(e,t){var n=Ge.p;try{return Ge.p=e,t()}finally{Ge.p=n}}var ha=Math.random().toString(36).slice(2),Zt="__reactFiber$"+ha,_n="__reactProps$"+ha,Ji="__reactContainer$"+ha,Wu="__reactEvents$"+ha,Zw="__reactListeners$"+ha,Fw="__reactHandles$"+ha,am="__reactResources$"+ha,ml="__reactMarker$"+ha;function gf(e){delete e[Zt],delete e[_n],delete e[Wu],delete e[Zw],delete e[Fw]}function gi(e){var t=e[Zt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ji]||n[Zt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=dg(e);e!==null;){if(n=e[Zt])return n;e=dg(e)}return t}e=n,n=e.parentNode}return null}function Pi(e){if(e=e[Zt]||e[Ji]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ws(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(k(33))}function Ti(e){var t=e[am];return t||(t=e[am]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Xt(e){e[ml]=!0}var Xy=new Set,Qy={};function Va(e,t){zi(e,t),zi(e+"Capture",t)}function zi(e,t){for(Qy[e]=t,e=0;e<t.length;e++)Xy.add(t[e])}var Ww=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),im={},sm={};function eS(e){return Fu.call(sm,e)?!0:Fu.call(im,e)?!1:Ww.test(e)?sm[e]=!0:(im[e]=!0,!1)}function ao(e,t,n){if(eS(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function zl(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function yr(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}function Yn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tS(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ed(e){if(!e._valueTracker){var t=Jy(e)?"checked":"value";e._valueTracker=tS(e,t,""+e[t])}}function Py(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Jy(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function To(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var nS=/[\n"\\]/g;function Kn(e){return e.replace(nS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function td(e,t,n,r,a,i,s,l){e.name="",s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?e.type=s:e.removeAttribute("type"),t!=null?s==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Yn(t)):e.value!==""+Yn(t)&&(e.value=""+Yn(t)):s!=="submit"&&s!=="reset"||e.removeAttribute("value"),t!=null?nd(e,s,Yn(t)):n!=null?nd(e,s,Yn(n)):r!=null&&e.removeAttribute("value"),a==null&&i!=null&&(e.defaultChecked=!!i),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?e.name=""+Yn(l):e.removeAttribute("name")}function Zy(e,t,n,r,a,i,s,l){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||n!=null){if(!(i!=="submit"&&i!=="reset"||t!=null)){ed(e);return}n=n!=null?""+Yn(n):"",t=t!=null?""+Yn(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}r=r??a,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=l?e.checked:!!r,e.defaultChecked=!!r,s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(e.name=s),ed(e)}function nd(e,t,n){t==="number"&&To(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function ji(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Yn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Fy(e,t,n){if(t!=null&&(t=""+Yn(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Yn(n):""}function Wy(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(k(92));if(_s(r)){if(1<r.length)throw Error(k(93));r=r[0]}n=r}n==null&&(n=""),t=n}n=Yn(t),e.defaultValue=n,r=e.textContent,r===n&&r!==""&&r!==null&&(e.value=r),ed(e)}function $i(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var rS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lm(e,t,n){var r=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,n):typeof n!="number"||n===0||rS.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function ev(e,t,n){if(t!=null&&typeof t!="object")throw Error(k(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&lm(e,a,r)}else for(var i in t)t.hasOwnProperty(i)&&lm(e,i,t[i])}function yf(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),iS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function io(e){return iS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Tr(){}var rd=null;function vf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yi=null,Oi=null;function om(e){var t=Pi(e);if(t&&(e=t.stateNode)){var n=e[_n]||null;e:switch(e=t.stateNode,t.type){case"input":if(td(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Kn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[_n]||null;if(!a)throw Error(k(90));td(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Py(r)}break e;case"textarea":Fy(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&ji(e,!!n.multiple,t,!1)}}}var Fc=!1;function tv(e,t,n){if(Fc)return e(t,n);Fc=!0;try{var r=e(t);return r}finally{if(Fc=!1,(yi!==null||Oi!==null)&&(Sc(),yi&&(t=yi,e=Oi,Oi=yi=null,om(t),e)))for(t=0;t<e.length;t++)om(e[t])}}function Ks(e,t){var n=e.stateNode;if(n===null)return null;var r=n[_n]||null;if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(k(231,t,typeof n));return n}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ad=!1;if(Nr)try{var hs={};Object.defineProperty(hs,"passive",{get:function(){ad=!0}}),window.addEventListener("test",hs,hs),window.removeEventListener("test",hs,hs)}catch{ad=!1}var Pr=null,pf=null,so=null;function nv(){if(so)return so;var e,t=pf,n=t.length,r,a="value"in Pr?Pr.value:Pr.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===a[i-r];r++);return so=a.slice(e,1<r?1-r:void 0)}function lo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $l(){return!0}function cm(){return!1}function wn(e){function t(n,r,a,i,s){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$l:cm,this.isPropagationStopped=cm,this}return mt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$l)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$l)},persist:function(){},isPersistent:$l}),t}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dc=wn(Ga),gl=mt({},Ga,{view:0,detail:0}),sS=wn(gl),Wc,eu,ms,fc=mt({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ms&&(ms&&e.type==="mousemove"?(Wc=e.screenX-ms.screenX,eu=e.screenY-ms.screenY):eu=Wc=0,ms=e),Wc)},movementY:function(e){return"movementY"in e?e.movementY:eu}}),um=wn(fc),lS=mt({},fc,{dataTransfer:0}),oS=wn(lS),cS=mt({},gl,{relatedTarget:0}),tu=wn(cS),uS=mt({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),dS=wn(uS),fS=mt({},Ga,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hS=wn(fS),mS=mt({},Ga,{data:0}),dm=wn(mS),gS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=vS[e])?!!t[e]:!1}function bf(){return pS}var bS=mt({},gl,{key:function(e){if(e.key){var t=gS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=lo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bf,charCode:function(e){return e.type==="keypress"?lo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?lo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_S=wn(bS),wS=mt({},fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fm=wn(wS),SS=mt({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bf}),xS=wn(SS),ES=mt({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),TS=wn(ES),jS=mt({},fc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),OS=wn(jS),DS=mt({},Ga,{newState:0,oldState:0}),AS=wn(DS),NS=[9,13,27,32],_f=Nr&&"CompositionEvent"in window,js=null;Nr&&"documentMode"in document&&(js=document.documentMode);var CS=Nr&&"TextEvent"in window&&!js,rv=Nr&&(!_f||js&&8<js&&11>=js),hm=" ",mm=!1;function av(e,t){switch(e){case"keyup":return NS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vi=!1;function RS(e,t){switch(e){case"compositionend":return iv(t);case"keypress":return t.which!==32?null:(mm=!0,hm);case"textInput":return e=t.data,e===hm&&mm?null:e;default:return null}}function MS(e,t){if(vi)return e==="compositionend"||!_f&&av(e,t)?(e=nv(),so=pf=Pr=null,vi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rv&&t.locale!=="ko"?null:t.data;default:return null}}var kS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kS[e.type]:t==="textarea"}function sv(e,t,n,r){yi?Oi?Oi.push(r):Oi=[r]:yi=r,t=Yo(t,"onChange"),0<t.length&&(n=new dc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Os=null,Xs=null;function US(e){t0(e,0)}function hc(e){var t=ws(e);if(Py(t))return e}function ym(e,t){if(e==="change")return t}var lv=!1;if(Nr){var nu;if(Nr){var ru="oninput"in document;if(!ru){var vm=document.createElement("div");vm.setAttribute("oninput","return;"),ru=typeof vm.oninput=="function"}nu=ru}else nu=!1;lv=nu&&(!document.documentMode||9<document.documentMode)}function pm(){Os&&(Os.detachEvent("onpropertychange",ov),Xs=Os=null)}function ov(e){if(e.propertyName==="value"&&hc(Xs)){var t=[];sv(t,Xs,e,vf(e)),tv(US,t)}}function zS(e,t,n){e==="focusin"?(pm(),Os=t,Xs=n,Os.attachEvent("onpropertychange",ov)):e==="focusout"&&pm()}function $S(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hc(Xs)}function BS(e,t){if(e==="click")return hc(t)}function LS(e,t){if(e==="input"||e==="change")return hc(t)}function HS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zn=typeof Object.is=="function"?Object.is:HS;function Qs(e,t){if(zn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Fu.call(t,a)||!zn(e[a],t[a]))return!1}return!0}function bm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _m(e,t){var n=bm(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bm(n)}}function cv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uv(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=To(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=To(e.document)}return t}function wf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var qS=Nr&&"documentMode"in document&&11>=document.documentMode,pi=null,id=null,Ds=null,sd=!1;function wm(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sd||pi==null||pi!==To(r)||(r=pi,"selectionStart"in r&&wf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ds&&Qs(Ds,r)||(Ds=r,r=Yo(id,"onSelect"),0<r.length&&(t=new dc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pi)))}function va(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bi={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionrun:va("Transition","TransitionRun"),transitionstart:va("Transition","TransitionStart"),transitioncancel:va("Transition","TransitionCancel"),transitionend:va("Transition","TransitionEnd")},au={},dv={};Nr&&(dv=document.createElement("div").style,"AnimationEvent"in window||(delete bi.animationend.animation,delete bi.animationiteration.animation,delete bi.animationstart.animation),"TransitionEvent"in window||delete bi.transitionend.transition);function Ka(e){if(au[e])return au[e];if(!bi[e])return e;var t=bi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in dv)return au[e]=t[n];return e}var fv=Ka("animationend"),hv=Ka("animationiteration"),mv=Ka("animationstart"),IS=Ka("transitionrun"),YS=Ka("transitionstart"),VS=Ka("transitioncancel"),gv=Ka("transitionend"),yv=new Map,ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ld.push("scrollEnd");function sr(e,t){yv.set(e,t),Va(t,[e])}var jo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},qn=[],_i=0,Sf=0;function mc(){for(var e=_i,t=Sf=_i=0;t<e;){var n=qn[t];qn[t++]=null;var r=qn[t];qn[t++]=null;var a=qn[t];qn[t++]=null;var i=qn[t];if(qn[t++]=null,r!==null&&a!==null){var s=r.pending;s===null?a.next=a:(a.next=s.next,s.next=a),r.pending=a}i!==0&&vv(n,a,i)}}function gc(e,t,n,r){qn[_i++]=e,qn[_i++]=t,qn[_i++]=n,qn[_i++]=r,Sf|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function xf(e,t,n,r){return gc(e,t,n,r),Oo(e)}function Xa(e,t){return gc(e,null,null,t),Oo(e)}function vv(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var a=!1,i=e.return;i!==null;)i.childLanes|=n,r=i.alternate,r!==null&&(r.childLanes|=n),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(a=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,a&&t!==null&&(a=31-kn(n),e=i.hiddenUpdates,r=e[a],r===null?e[a]=[t]:r.push(t),t.lane=n|536870912),i):null}function Oo(e){if(50<$s)throw $s=0,Dd=null,Error(k(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var wi={};function GS(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(e,t,n,r){return new GS(e,t,n,r)}function Ef(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Or(e,t){var n=e.alternate;return n===null?(n=Dn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function pv(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function oo(e,t,n,r,a,i){var s=0;if(r=e,typeof e=="function")Ef(e)&&(s=1);else if(typeof e=="string")s=Px(e,n,fr.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Qu:return e=Dn(31,n,t,a),e.elementType=Qu,e.lanes=i,e;case hi:return Ra(n.children,a,i,t);case $y:s=8,a|=24;break;case Gu:return e=Dn(12,n,t,a|2),e.elementType=Gu,e.lanes=i,e;case Ku:return e=Dn(13,n,t,a),e.elementType=Ku,e.lanes=i,e;case Xu:return e=Dn(19,n,t,a),e.elementType=Xu,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Er:s=10;break e;case By:s=9;break e;case uf:s=11;break e;case df:s=14;break e;case qr:s=16,r=null;break e}s=29,n=Error(k(130,e===null?"null":typeof e,"")),r=null}return t=Dn(s,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function Ra(e,t,n,r){return e=Dn(7,e,r,t),e.lanes=n,e}function iu(e,t,n){return e=Dn(6,e,null,t),e.lanes=n,e}function bv(e){var t=Dn(18,null,null,0);return t.stateNode=e,t}function su(e,t,n){return t=Dn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Sm=new WeakMap;function Xn(e,t){if(typeof e=="object"&&e!==null){var n=Sm.get(e);return n!==void 0?n:(t={value:e,source:t,stack:nm(t)},Sm.set(e,t),t)}return{value:e,source:t,stack:nm(t)}}var Si=[],xi=0,Do=null,Js=0,Vn=[],Gn=0,ca=null,cr=1,ur="";function Sr(e,t){Si[xi++]=Js,Si[xi++]=Do,Do=e,Js=t}function _v(e,t,n){Vn[Gn++]=cr,Vn[Gn++]=ur,Vn[Gn++]=ca,ca=e;var r=cr;e=ur;var a=32-kn(r)-1;r&=~(1<<a),n+=1;var i=32-kn(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,cr=1<<32-kn(t)+a|n<<a|r,ur=i+e}else cr=1<<i|n<<a|r,ur=e}function Tf(e){e.return!==null&&(Sr(e,1),_v(e,1,0))}function jf(e){for(;e===Do;)Do=Si[--xi],Si[xi]=null,Js=Si[--xi],Si[xi]=null;for(;e===ca;)ca=Vn[--Gn],Vn[Gn]=null,ur=Vn[--Gn],Vn[Gn]=null,cr=Vn[--Gn],Vn[Gn]=null}function wv(e,t){Vn[Gn++]=cr,Vn[Gn++]=ur,Vn[Gn++]=ca,cr=t.id,ur=t.overflow,ca=e}var Ft=null,dt=null,Le=!1,ta=null,Qn=!1,od=Error(k(519));function ua(e){var t=Error(k(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ps(Xn(t,e)),od}function xm(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Zt]=e,t[_n]=r,n){case"dialog":Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":case"embed":Ae("load",t);break;case"video":case"audio":for(n=0;n<el.length;n++)Ae(el[n],t);break;case"source":Ae("error",t);break;case"img":case"image":case"link":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"input":Ae("invalid",t),Zy(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Ae("invalid",t);break;case"textarea":Ae("invalid",t),Wy(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||r.suppressHydrationWarning===!0||r0(t.textContent,n)?(r.popover!=null&&(Ae("beforetoggle",t),Ae("toggle",t)),r.onScroll!=null&&Ae("scroll",t),r.onScrollEnd!=null&&Ae("scrollend",t),r.onClick!=null&&(t.onclick=Tr),t=!0):t=!1,t||ua(e,!0)}function Em(e){for(Ft=e.return;Ft;)switch(Ft.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Ft=Ft.return}}function ei(e){if(e!==Ft)return!1;if(!Le)return Em(e),Le=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Md(e.type,e.memoizedProps)),n=!n),n&&dt&&ua(e),Em(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(k(317));dt=ug(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(k(317));dt=ug(e)}else t===27?(t=dt,ma(e.type)?(e=$d,$d=null,dt=e):dt=t):dt=Ft?Pn(e.stateNode.nextSibling):null;return!0}function $a(){dt=Ft=null,Le=!1}function lu(){var e=ta;return e!==null&&(pn===null?pn=e:pn.push.apply(pn,e),ta=null),e}function Ps(e){ta===null?ta=[e]:ta.push(e)}var cd=hr(null),Qa=null,jr=null;function Vr(e,t,n){st(cd,t._currentValue),t._currentValue=n}function Dr(e){e._currentValue=cd.current,Qt(cd)}function ud(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function dd(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var i=a.dependencies;if(i!==null){var s=a.child;i=i.firstContext;e:for(;i!==null;){var l=i;i=a;for(var o=0;o<t.length;o++)if(l.context===t[o]){i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),ud(i.return,n,e),r||(s=null);break e}i=l.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(k(341));s.lanes|=n,i=s.alternate,i!==null&&(i.lanes|=n),ud(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function Zi(e,t,n,r){e=null;for(var a=t,i=!1;a!==null;){if(!i){if(a.flags&524288)i=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(k(387));if(s=s.memoizedProps,s!==null){var l=a.type;zn(a.pendingProps.value,s.value)||(e!==null?e.push(l):e=[l])}}else if(a===wo.current){if(s=a.alternate,s===null)throw Error(k(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(nl):e=[nl])}a=a.return}e!==null&&dd(t,e,n,r),t.flags|=262144}function Ao(e){for(e=e.firstContext;e!==null;){if(!zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ba(e){Qa=e,jr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Wt(e){return Sv(Qa,e)}function Bl(e,t){return Qa===null&&Ba(e),Sv(e,t)}function Sv(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},jr===null){if(e===null)throw Error(k(308));jr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else jr=jr.next=t;return n}var KS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},XS=qt.unstable_scheduleCallback,QS=qt.unstable_NormalPriority,Mt={$$typeof:Er,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Of(){return{controller:new KS,data:new Map,refCount:0}}function yl(e){e.refCount--,e.refCount===0&&XS(QS,function(){e.controller.abort()})}var As=null,fd=0,Bi=0,Di=null;function JS(e,t){if(As===null){var n=As=[];fd=0,Bi=Ff(),Di={status:"pending",value:void 0,then:function(r){n.push(r)}}}return fd++,t.then(Tm,Tm),t}function Tm(){if(--fd===0&&As!==null){Di!==null&&(Di.status="fulfilled");var e=As;As=null,Bi=0,Di=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function PS(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(a){n.push(a)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var a=0;a<n.length;a++)(0,n[a])(t)},function(a){for(r.status="rejected",r.reason=a,a=0;a<n.length;a++)(0,n[a])(void 0)}),r}var jm=be.S;be.S=function(e,t){zp=Rn(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&JS(e,t),jm!==null&&jm(e,t)};var Ma=hr(null);function Df(){var e=Ma.current;return e!==null?e:et.pooledCache}function co(e,t){t===null?st(Ma,Ma.current):st(Ma,t.pool)}function xv(){var e=Df();return e===null?null:{parent:Mt._currentValue,pool:e}}var Fi=Error(k(460)),Af=Error(k(474)),yc=Error(k(542)),No={then:function(){}};function Om(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ev(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Tr,Tr),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Am(e),e;default:if(typeof t.status=="string")t.then(Tr,Tr);else{if(e=et,e!==null&&100<e.shellSuspendCounter)throw Error(k(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=r}},function(r){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Am(e),e}throw ka=t,Fi}}function Sa(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(ka=n,Fi):n}}var ka=null;function Dm(){if(ka===null)throw Error(k(459));var e=ka;return ka=null,e}function Am(e){if(e===Fi||e===yc)throw Error(k(483))}var Ai=null,Zs=0;function Ll(e){var t=Zs;return Zs+=1,Ai===null&&(Ai=[]),Ev(Ai,e,t)}function gs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Hl(e,t){throw t.$$typeof===zw?Error(k(525)):(e=Object.prototype.toString.call(t),Error(k(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Tv(e){function t(v,g){if(e){var y=v.deletions;y===null?(v.deletions=[g],v.flags|=16):y.push(g)}}function n(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function r(v){for(var g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function a(v,g){return v=Or(v,g),v.index=0,v.sibling=null,v}function i(v,g,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<g?(v.flags|=67108866,g):y):(v.flags|=67108866,g)):(v.flags|=1048576,g)}function s(v){return e&&v.alternate===null&&(v.flags|=67108866),v}function l(v,g,y,w){return g===null||g.tag!==6?(g=iu(y,v.mode,w),g.return=v,g):(g=a(g,y),g.return=v,g)}function o(v,g,y,w){var E=y.type;return E===hi?f(v,g,y.props.children,w,y.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===qr&&Sa(E)===g.type)?(g=a(g,y.props),gs(g,y),g.return=v,g):(g=oo(y.type,y.key,y.props,null,v.mode,w),gs(g,y),g.return=v,g)}function u(v,g,y,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=su(y,v.mode,w),g.return=v,g):(g=a(g,y.children||[]),g.return=v,g)}function f(v,g,y,w,E){return g===null||g.tag!==7?(g=Ra(y,v.mode,w,E),g.return=v,g):(g=a(g,y),g.return=v,g)}function d(v,g,y){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=iu(""+g,v.mode,y),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Rl:return y=oo(g.type,g.key,g.props,null,v.mode,y),gs(y,g),y.return=v,y;case bs:return g=su(g,v.mode,y),g.return=v,g;case qr:return g=Sa(g),d(v,g,y)}if(_s(g)||fs(g))return g=Ra(g,v.mode,y,null),g.return=v,g;if(typeof g.then=="function")return d(v,Ll(g),y);if(g.$$typeof===Er)return d(v,Bl(v,g),y);Hl(v,g)}return null}function m(v,g,y,w){var E=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return E!==null?null:l(v,g,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Rl:return y.key===E?o(v,g,y,w):null;case bs:return y.key===E?u(v,g,y,w):null;case qr:return y=Sa(y),m(v,g,y,w)}if(_s(y)||fs(y))return E!==null?null:f(v,g,y,w,null);if(typeof y.then=="function")return m(v,g,Ll(y),w);if(y.$$typeof===Er)return m(v,g,Bl(v,y),w);Hl(v,y)}return null}function h(v,g,y,w,E){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return v=v.get(y)||null,l(g,v,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rl:return v=v.get(w.key===null?y:w.key)||null,o(g,v,w,E);case bs:return v=v.get(w.key===null?y:w.key)||null,u(g,v,w,E);case qr:return w=Sa(w),h(v,g,y,w,E)}if(_s(w)||fs(w))return v=v.get(y)||null,f(g,v,w,E,null);if(typeof w.then=="function")return h(v,g,y,Ll(w),E);if(w.$$typeof===Er)return h(v,g,y,Bl(g,w),E);Hl(g,w)}return null}function p(v,g,y,w){for(var E=null,j=null,S=g,T=g=0,A=null;S!==null&&T<y.length;T++){S.index>T?(A=S,S=null):A=S.sibling;var O=m(v,S,y[T],w);if(O===null){S===null&&(S=A);break}e&&S&&O.alternate===null&&t(v,S),g=i(O,g,T),j===null?E=O:j.sibling=O,j=O,S=A}if(T===y.length)return n(v,S),Le&&Sr(v,T),E;if(S===null){for(;T<y.length;T++)S=d(v,y[T],w),S!==null&&(g=i(S,g,T),j===null?E=S:j.sibling=S,j=S);return Le&&Sr(v,T),E}for(S=r(S);T<y.length;T++)A=h(S,v,T,y[T],w),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?T:A.key),g=i(A,g,T),j===null?E=A:j.sibling=A,j=A);return e&&S.forEach(function(N){return t(v,N)}),Le&&Sr(v,T),E}function b(v,g,y,w){if(y==null)throw Error(k(151));for(var E=null,j=null,S=g,T=g=0,A=null,O=y.next();S!==null&&!O.done;T++,O=y.next()){S.index>T?(A=S,S=null):A=S.sibling;var N=m(v,S,O.value,w);if(N===null){S===null&&(S=A);break}e&&S&&N.alternate===null&&t(v,S),g=i(N,g,T),j===null?E=N:j.sibling=N,j=N,S=A}if(O.done)return n(v,S),Le&&Sr(v,T),E;if(S===null){for(;!O.done;T++,O=y.next())O=d(v,O.value,w),O!==null&&(g=i(O,g,T),j===null?E=O:j.sibling=O,j=O);return Le&&Sr(v,T),E}for(S=r(S);!O.done;T++,O=y.next())O=h(S,v,T,O.value,w),O!==null&&(e&&O.alternate!==null&&S.delete(O.key===null?T:O.key),g=i(O,g,T),j===null?E=O:j.sibling=O,j=O);return e&&S.forEach(function(V){return t(v,V)}),Le&&Sr(v,T),E}function x(v,g,y,w){if(typeof y=="object"&&y!==null&&y.type===hi&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Rl:e:{for(var E=y.key;g!==null;){if(g.key===E){if(E=y.type,E===hi){if(g.tag===7){n(v,g.sibling),w=a(g,y.props.children),w.return=v,v=w;break e}}else if(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===qr&&Sa(E)===g.type){n(v,g.sibling),w=a(g,y.props),gs(w,y),w.return=v,v=w;break e}n(v,g);break}else t(v,g);g=g.sibling}y.type===hi?(w=Ra(y.props.children,v.mode,w,y.key),w.return=v,v=w):(w=oo(y.type,y.key,y.props,null,v.mode,w),gs(w,y),w.return=v,v=w)}return s(v);case bs:e:{for(E=y.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(v,g.sibling),w=a(g,y.children||[]),w.return=v,v=w;break e}else{n(v,g);break}else t(v,g);g=g.sibling}w=su(y,v.mode,w),w.return=v,v=w}return s(v);case qr:return y=Sa(y),x(v,g,y,w)}if(_s(y))return p(v,g,y,w);if(fs(y)){if(E=fs(y),typeof E!="function")throw Error(k(150));return y=E.call(y),b(v,g,y,w)}if(typeof y.then=="function")return x(v,g,Ll(y),w);if(y.$$typeof===Er)return x(v,g,Bl(v,y),w);Hl(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,g!==null&&g.tag===6?(n(v,g.sibling),w=a(g,y),w.return=v,v=w):(n(v,g),w=iu(y,v.mode,w),w.return=v,v=w),s(v)):n(v,g)}return function(v,g,y,w){try{Zs=0;var E=x(v,g,y,w);return Ai=null,E}catch(S){if(S===Fi||S===yc)throw S;var j=Dn(29,S,null,v.mode);return j.lanes=w,j.return=v,j}finally{}}}var La=Tv(!0),jv=Tv(!1),Ir=!1;function Nf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ra(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ve&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,t=Oo(e),vv(e,null,n),t}return gc(e,r,t,n),Oo(e)}function Ns(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Vy(e,n)}}function ou(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};i===null?a=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var md=!1;function Cs(){if(md){var e=Di;if(e!==null)throw e}}function Rs(e,t,n,r){md=!1;var a=e.updateQueue;Ir=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var o=l,u=o.next;o.next=null,s===null?i=u:s.next=u,s=o;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=o))}if(i!==null){var d=a.baseState;s=0,f=u=o=null,l=i;do{var m=l.lane&-536870913,h=m!==l.lane;if(h?(ke&m)===m:(r&m)===m){m!==0&&m===Bi&&(md=!0),f!==null&&(f=f.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var p=e,b=l;m=t;var x=n;switch(b.tag){case 1:if(p=b.payload,typeof p=="function"){d=p.call(x,d,m);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=b.payload,m=typeof p=="function"?p.call(x,d,m):p,m==null)break e;d=mt({},d,m);break e;case 2:Ir=!0}}m=l.callback,m!==null&&(e.flags|=64,h&&(e.flags|=8192),h=a.callbacks,h===null?a.callbacks=[m]:h.push(m))}else h={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=h,o=d):f=f.next=h,s|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);f===null&&(o=d),a.baseState=o,a.firstBaseUpdate=u,a.lastBaseUpdate=f,i===null&&(a.shared.lanes=0),fa|=s,e.lanes=s,e.memoizedState=d}}function Ov(e,t){if(typeof e!="function")throw Error(k(191,e));e.call(t)}function Dv(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Ov(n[e],t)}var Li=hr(null),Co=hr(0);function Nm(e,t){e=kr,st(Co,e),st(Li,t),kr=e|t.baseLanes}function gd(){st(Co,kr),st(Li,Li.current)}function Cf(){kr=Co.current,Qt(Li),Qt(Co)}var $n=hr(null),Jn=null;function Gr(e){var t=e.alternate;st(Dt,Dt.current&1),st($n,e),Jn===null&&(t===null||Li.current!==null||t.memoizedState!==null)&&(Jn=e)}function yd(e){st(Dt,Dt.current),st($n,e),Jn===null&&(Jn=e)}function Av(e){e.tag===22?(st(Dt,Dt.current),st($n,e),Jn===null&&(Jn=e)):Kr()}function Kr(){st(Dt,Dt.current),st($n,$n.current)}function On(e){Qt($n),Jn===e&&(Jn=null),Qt(Dt)}var Dt=hr(0);function Ro(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Ud(n)||zd(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cr=0,xe=null,We=null,Ct=null,Mo=!1,Ni=!1,Ha=!1,ko=0,Fs=0,Ci=null,ZS=0;function Tt(){throw Error(k(321))}function Rf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zn(e[n],t[n]))return!1;return!0}function Mf(e,t,n,r,a,i){return Cr=i,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,be.H=e===null||e.memoizedState===null?sp:Vf,Ha=!1,i=n(r,a),Ha=!1,Ni&&(i=Cv(t,n,r,a)),Nv(e),i}function Nv(e){be.H=Ws;var t=We!==null&&We.next!==null;if(Cr=0,Ct=We=xe=null,Mo=!1,Fs=0,Ci=null,t)throw Error(k(300));e===null||kt||(e=e.dependencies,e!==null&&Ao(e)&&(kt=!0))}function Cv(e,t,n,r){xe=e;var a=0;do{if(Ni&&(Ci=null),Fs=0,Ni=!1,25<=a)throw Error(k(301));if(a+=1,Ct=We=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}be.H=lp,i=t(n,r)}while(Ni);return i}function FS(){var e=be.H,t=e.useState()[0];return t=typeof t.then=="function"?vl(t):t,e=e.useState()[0],(We!==null?We.memoizedState:null)!==e&&(xe.flags|=1024),t}function kf(){var e=ko!==0;return ko=0,e}function Uf(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function zf(e){if(Mo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Mo=!1}Cr=0,Ct=We=xe=null,Ni=!1,Fs=ko=0,Ci=null}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?xe.memoizedState=Ct=e:Ct=Ct.next=e,Ct}function At(){if(We===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=We.next;var t=Ct===null?xe.memoizedState:Ct.next;if(t!==null)Ct=t,We=e;else{if(e===null)throw xe.alternate===null?Error(k(467)):Error(k(310));We=e,e={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ct===null?xe.memoizedState=Ct=e:Ct=Ct.next=e}return Ct}function vc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vl(e){var t=Fs;return Fs+=1,Ci===null&&(Ci=[]),e=Ev(Ci,e,t),t=xe,(Ct===null?t.memoizedState:Ct.next)===null&&(t=t.alternate,be.H=t===null||t.memoizedState===null?sp:Vf),e}function pc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return vl(e);if(e.$$typeof===Er)return Wt(e)}throw Error(k(438,String(e)))}function $f(e){var t=null,n=xe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=xe.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=vc(),xe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=$w;return t.index++,n}function Rr(e,t){return typeof t=="function"?t(e):t}function uo(e){var t=At();return Bf(t,We,e)}function Bf(e,t,n){var r=e.queue;if(r===null)throw Error(k(311));r.lastRenderedReducer=n;var a=e.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}t.baseQueue=a=i,r.pending=null}if(i=e.baseState,a===null)e.memoizedState=i;else{t=a.next;var l=s=null,o=null,u=t,f=!1;do{var d=u.lane&-536870913;if(d!==u.lane?(ke&d)===d:(Cr&d)===d){var m=u.revertLane;if(m===0)o!==null&&(o=o.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Bi&&(f=!0);else if((Cr&m)===m){u=u.next,m===Bi&&(f=!0);continue}else d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(l=o=d,s=i):o=o.next=d,xe.lanes|=m,fa|=m;d=u.action,Ha&&n(i,d),i=u.hasEagerState?u.eagerState:n(i,d)}else m={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},o===null?(l=o=m,s=i):o=o.next=m,xe.lanes|=d,fa|=d;u=u.next}while(u!==null&&u!==t);if(o===null?s=i:o.next=l,!zn(i,e.memoizedState)&&(kt=!0,f&&(n=Di,n!==null)))throw n;e.memoizedState=i,e.baseState=s,e.baseQueue=o,r.lastRenderedState=i}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function cu(e){var t=At(),n=t.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);zn(i,t.memoizedState)||(kt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Rv(e,t,n){var r=xe,a=At(),i=Le;if(i){if(n===void 0)throw Error(k(407));n=n()}else n=t();var s=!zn((We||a).memoizedState,n);if(s&&(a.memoizedState=n,kt=!0),a=a.queue,Lf(Uv.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||Ct!==null&&Ct.memoizedState.tag&1){if(r.flags|=2048,Hi(9,{destroy:void 0},kv.bind(null,r,a,n,t),null),et===null)throw Error(k(349));i||Cr&127||Mv(r,t,n)}return n}function Mv(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xe.updateQueue,t===null?(t=vc(),xe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function kv(e,t,n,r){t.value=n,t.getSnapshot=r,zv(t)&&$v(e)}function Uv(e,t,n){return n(function(){zv(t)&&$v(e)})}function zv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zn(e,n)}catch{return!0}}function $v(e){var t=Xa(e,2);t!==null&&bn(t,e,2)}function vd(e){var t=sn();if(typeof e=="function"){var n=e;if(e=n(),Ha){Jr(!0);try{n()}finally{Jr(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:e},t}function Bv(e,t,n,r){return e.baseState=n,Bf(e,We,typeof r=="function"?r:Rr)}function WS(e,t,n,r,a){if(_c(e))throw Error(k(485));if(e=t.action,e!==null){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(s){i.listeners.push(s)}};be.T!==null?n(!0):i.isTransition=!1,r(i),n=t.pending,n===null?(i.next=t.pending=i,Lv(t,i)):(i.next=n.next,t.pending=n.next=i)}}function Lv(e,t){var n=t.action,r=t.payload,a=e.state;if(t.isTransition){var i=be.T,s={};be.T=s;try{var l=n(a,r),o=be.S;o!==null&&o(s,l),Cm(e,t,l)}catch(u){pd(e,t,u)}finally{i!==null&&s.types!==null&&(i.types=s.types),be.T=i}}else try{i=n(a,r),Cm(e,t,i)}catch(u){pd(e,t,u)}}function Cm(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){Rm(e,t,r)},function(r){return pd(e,t,r)}):Rm(e,t,n)}function Rm(e,t,n){t.status="fulfilled",t.value=n,Hv(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Lv(e,n)))}function pd(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=n,Hv(t),t=t.next;while(t!==r)}e.action=null}function Hv(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function qv(e,t){return t}function Mm(e,t){if(Le){var n=et.formState;if(n!==null){e:{var r=xe;if(Le){if(dt){t:{for(var a=dt,i=Qn;a.nodeType!==8;){if(!i){a=null;break t}if(a=Pn(a.nextSibling),a===null){a=null;break t}}i=a.data,a=i==="F!"||i==="F"?a:null}if(a){dt=Pn(a.nextSibling),r=a.data==="F!";break e}}ua(r)}r=!1}r&&(t=n[0])}}return n=sn(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qv,lastRenderedState:t},n.queue=r,n=rp.bind(null,xe,r),r.dispatch=n,r=vd(!1),i=Yf.bind(null,xe,!1,r.queue),r=sn(),a={state:t,dispatch:null,action:e,pending:null},r.queue=a,n=WS.bind(null,xe,a,i,n),a.dispatch=n,r.memoizedState=e,[t,n,!1]}function km(e){var t=At();return Iv(t,We,e)}function Iv(e,t,n){if(t=Bf(e,t,qv)[0],e=uo(Rr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=vl(t)}catch(s){throw s===Fi?yc:s}else r=t;t=At();var a=t.queue,i=a.dispatch;return n!==t.memoizedState&&(xe.flags|=2048,Hi(9,{destroy:void 0},ex.bind(null,a,n),null)),[r,i,e]}function ex(e,t){e.action=t}function Um(e){var t=At(),n=We;if(n!==null)return Iv(t,n,e);At(),t=t.memoizedState,n=At();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Hi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=xe.updateQueue,t===null&&(t=vc(),xe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Yv(){return At().memoizedState}function fo(e,t,n,r){var a=sn();xe.flags|=e,a.memoizedState=Hi(1|t,{destroy:void 0},n,r===void 0?null:r)}function bc(e,t,n,r){var a=At();r=r===void 0?null:r;var i=a.memoizedState.inst;We!==null&&r!==null&&Rf(r,We.memoizedState.deps)?a.memoizedState=Hi(t,i,n,r):(xe.flags|=e,a.memoizedState=Hi(1|t,i,n,r))}function zm(e,t){fo(8390656,8,e,t)}function Lf(e,t){bc(2048,8,e,t)}function tx(e){xe.flags|=4;var t=xe.updateQueue;if(t===null)t=vc(),xe.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Vv(e){var t=At().memoizedState;return tx({ref:t,nextImpl:e}),function(){if(Ve&2)throw Error(k(440));return t.impl.apply(void 0,arguments)}}function Gv(e,t){return bc(4,2,e,t)}function Kv(e,t){return bc(4,4,e,t)}function Xv(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qv(e,t,n){n=n!=null?n.concat([e]):null,bc(4,4,Xv.bind(null,t,e),n)}function Hf(){}function Jv(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Rf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pv(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Rf(t,r[1]))return r[0];if(r=e(),Ha){Jr(!0);try{e()}finally{Jr(!1)}}return n.memoizedState=[r,t],r}function qf(e,t,n){return n===void 0||Cr&1073741824&&!(ke&261930)?e.memoizedState=t:(e.memoizedState=n,e=Bp(),xe.lanes|=e,fa|=e,n)}function Zv(e,t,n,r){return zn(n,t)?n:Li.current!==null?(e=qf(e,n,r),zn(e,t)||(kt=!0),e):!(Cr&42)||Cr&1073741824&&!(ke&261930)?(kt=!0,e.memoizedState=n):(e=Bp(),xe.lanes|=e,fa|=e,t)}function Fv(e,t,n,r,a){var i=Ge.p;Ge.p=i!==0&&8>i?i:8;var s=be.T,l={};be.T=l,Yf(e,!1,t,n);try{var o=a(),u=be.S;if(u!==null&&u(l,o),o!==null&&typeof o=="object"&&typeof o.then=="function"){var f=PS(o,r);Ms(e,t,f,Un(e))}else Ms(e,t,r,Un(e))}catch(d){Ms(e,t,{then:function(){},status:"rejected",reason:d},Un())}finally{Ge.p=i,s!==null&&l.types!==null&&(s.types=l.types),be.T=s}}function nx(){}function bd(e,t,n,r){if(e.tag!==5)throw Error(k(476));var a=Wv(e).queue;Fv(e,a,t,Ca,n===null?nx:function(){return ep(e),n(r)})}function Wv(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Ca,baseState:Ca,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:Ca},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rr,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ep(e){var t=Wv(e);t.next===null&&(t=e.alternate.memoizedState),Ms(e,t.next.queue,{},Un())}function If(){return Wt(nl)}function tp(){return At().memoizedState}function np(){return At().memoizedState}function rx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Un();e=na(n);var r=ra(t,e,n);r!==null&&(bn(r,t,n),Ns(r,t,n)),t={cache:Of()},e.payload=t;return}t=t.return}}function ax(e,t,n){var r=Un();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},_c(e)?ap(t,n):(n=xf(e,t,n,r),n!==null&&(bn(n,e,r),ip(n,t,r)))}function rp(e,t,n){var r=Un();Ms(e,t,n,r)}function Ms(e,t,n,r){var a={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(_c(e))ap(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,l=i(s,n);if(a.hasEagerState=!0,a.eagerState=l,zn(l,s))return gc(e,t,a,0),et===null&&mc(),!1}catch{}finally{}if(n=xf(e,t,a,r),n!==null)return bn(n,e,r),ip(n,t,r),!0}return!1}function Yf(e,t,n,r){if(r={lane:2,revertLane:Ff(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},_c(e)){if(t)throw Error(k(479))}else t=xf(e,n,r,2),t!==null&&bn(t,e,2)}function _c(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function ap(e,t){Ni=Mo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ip(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Vy(e,n)}}var Ws={readContext:Wt,use:pc,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};Ws.useEffectEvent=Tt;var sp={readContext:Wt,use:pc,useCallback:function(e,t){return sn().memoizedState=[e,t===void 0?null:t],e},useContext:Wt,useEffect:zm,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,fo(4194308,4,Xv.bind(null,t,e),n)},useLayoutEffect:function(e,t){return fo(4194308,4,e,t)},useInsertionEffect:function(e,t){fo(4,2,e,t)},useMemo:function(e,t){var n=sn();t=t===void 0?null:t;var r=e();if(Ha){Jr(!0);try{e()}finally{Jr(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=sn();if(n!==void 0){var a=n(t);if(Ha){Jr(!0);try{n(t)}finally{Jr(!1)}}}else a=t;return r.memoizedState=r.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},r.queue=e,e=e.dispatch=ax.bind(null,xe,e),[r.memoizedState,e]},useRef:function(e){var t=sn();return e={current:e},t.memoizedState=e},useState:function(e){e=vd(e);var t=e.queue,n=rp.bind(null,xe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Hf,useDeferredValue:function(e,t){var n=sn();return qf(n,e,t)},useTransition:function(){var e=vd(!1);return e=Fv.bind(null,xe,e.queue,!0,!1),sn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=xe,a=sn();if(Le){if(n===void 0)throw Error(k(407));n=n()}else{if(n=t(),et===null)throw Error(k(349));ke&127||Mv(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,zm(Uv.bind(null,r,i,e),[e]),r.flags|=2048,Hi(9,{destroy:void 0},kv.bind(null,r,i,n,t),null),n},useId:function(){var e=sn(),t=et.identifierPrefix;if(Le){var n=ur,r=cr;n=(r&~(1<<32-kn(r)-1)).toString(32)+n,t="_"+t+"R_"+n,n=ko++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=ZS++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:If,useFormState:Mm,useActionState:Mm,useOptimistic:function(e){var t=sn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Yf.bind(null,xe,!0,n),n.dispatch=t,[e,t]},useMemoCache:$f,useCacheRefresh:function(){return sn().memoizedState=rx.bind(null,xe)},useEffectEvent:function(e){var t=sn(),n={impl:e};return t.memoizedState=n,function(){if(Ve&2)throw Error(k(440));return n.impl.apply(void 0,arguments)}}},Vf={readContext:Wt,use:pc,useCallback:Jv,useContext:Wt,useEffect:Lf,useImperativeHandle:Qv,useInsertionEffect:Gv,useLayoutEffect:Kv,useMemo:Pv,useReducer:uo,useRef:Yv,useState:function(){return uo(Rr)},useDebugValue:Hf,useDeferredValue:function(e,t){var n=At();return Zv(n,We.memoizedState,e,t)},useTransition:function(){var e=uo(Rr)[0],t=At().memoizedState;return[typeof e=="boolean"?e:vl(e),t]},useSyncExternalStore:Rv,useId:tp,useHostTransitionStatus:If,useFormState:km,useActionState:km,useOptimistic:function(e,t){var n=At();return Bv(n,We,e,t)},useMemoCache:$f,useCacheRefresh:np};Vf.useEffectEvent=Vv;var lp={readContext:Wt,use:pc,useCallback:Jv,useContext:Wt,useEffect:Lf,useImperativeHandle:Qv,useInsertionEffect:Gv,useLayoutEffect:Kv,useMemo:Pv,useReducer:cu,useRef:Yv,useState:function(){return cu(Rr)},useDebugValue:Hf,useDeferredValue:function(e,t){var n=At();return We===null?qf(n,e,t):Zv(n,We.memoizedState,e,t)},useTransition:function(){var e=cu(Rr)[0],t=At().memoizedState;return[typeof e=="boolean"?e:vl(e),t]},useSyncExternalStore:Rv,useId:tp,useHostTransitionStatus:If,useFormState:Um,useActionState:Um,useOptimistic:function(e,t){var n=At();return We!==null?Bv(n,We,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:$f,useCacheRefresh:np};lp.useEffectEvent=Vv;function uu(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:mt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var _d={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Un(),a=na(r);a.payload=t,n!=null&&(a.callback=n),t=ra(e,a,r),t!==null&&(bn(t,e,r),Ns(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Un(),a=na(r);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=ra(e,a,r),t!==null&&(bn(t,e,r),Ns(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Un(),r=na(n);r.tag=2,t!=null&&(r.callback=t),t=ra(e,r,n),t!==null&&(bn(t,e,n),Ns(t,e,n))}};function $m(e,t,n,r,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,s):t.prototype&&t.prototype.isPureReactComponent?!Qs(n,r)||!Qs(a,i):!0}function Bm(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_d.enqueueReplaceState(t,t.state,null)}function qa(e,t){var n=t;if("ref"in t){n={};for(var r in t)r!=="ref"&&(n[r]=t[r])}if(e=e.defaultProps){n===t&&(n=mt({},n));for(var a in e)n[a]===void 0&&(n[a]=e[a])}return n}function op(e){jo(e)}function cp(e){console.error(e)}function up(e){jo(e)}function Uo(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Lm(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function wd(e,t,n){return n=na(n),n.tag=3,n.payload={element:null},n.callback=function(){Uo(e,t)},n}function dp(e){return e=na(e),e.tag=3,e}function fp(e,t,n,r){var a=n.type.getDerivedStateFromError;if(typeof a=="function"){var i=r.value;e.payload=function(){return a(i)},e.callback=function(){Lm(t,n,r)}}var s=n.stateNode;s!==null&&typeof s.componentDidCatch=="function"&&(e.callback=function(){Lm(t,n,r),typeof a!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var l=r.stack;this.componentDidCatch(r.value,{componentStack:l!==null?l:""})})}function ix(e,t,n,r,a){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=n.alternate,t!==null&&Zi(t,n,a,!0),n=$n.current,n!==null){switch(n.tag){case 31:case 13:return Jn===null?Ho():n.alternate===null&&jt===0&&(jt=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===No?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),wu(e,r,a)),!1;case 22:return n.flags|=65536,r===No?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),wu(e,r,a)),!1}throw Error(k(435,n.tag))}return wu(e,r,a),Ho(),!1}if(Le)return t=$n.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==od&&(e=Error(k(422),{cause:r}),Ps(Xn(e,n)))):(r!==od&&(t=Error(k(423),{cause:r}),Ps(Xn(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=Xn(r,n),a=wd(e.stateNode,r,a),ou(e,a),jt!==4&&(jt=2)),!1;var i=Error(k(520),{cause:r});if(i=Xn(i,n),zs===null?zs=[i]:zs.push(i),jt!==4&&(jt=2),t===null)return!0;r=Xn(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=wd(n.stateNode,r,e),ou(n,e),!1;case 1:if(t=n.type,i=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(aa===null||!aa.has(i))))return n.flags|=65536,a&=-a,n.lanes|=a,a=dp(a),fp(a,e,n,r),ou(n,a),!1}n=n.return}while(n!==null);return!1}var Gf=Error(k(461)),kt=!1;function Pt(e,t,n,r){t.child=e===null?jv(t,null,n,r):La(t,e.child,n,r)}function Hm(e,t,n,r,a){n=n.render;var i=t.ref;if("ref"in r){var s={};for(var l in r)l!=="ref"&&(s[l]=r[l])}else s=r;return Ba(t),r=Mf(e,t,n,s,i,a),l=kf(),e!==null&&!kt?(Uf(e,t,a),Mr(e,t,a)):(Le&&l&&Tf(t),t.flags|=1,Pt(e,t,r,a),t.child)}function qm(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!Ef(i)&&i.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=i,hp(e,t,i,r,a)):(e=oo(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!Kf(e,a)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qs,n(s,r)&&e.ref===t.ref)return Mr(e,t,a)}return t.flags|=1,e=Or(i,r),e.ref=t.ref,e.return=t,t.child=e}function hp(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Qs(i,r)&&e.ref===t.ref)if(kt=!1,t.pendingProps=r=i,Kf(e,a))e.flags&131072&&(kt=!0);else return t.lanes=e.lanes,Mr(e,t,a)}return Sd(e,t,n,r,a)}function mp(e,t,n,r){var a=r.children,i=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if(t.flags&128){if(i=i!==null?i.baseLanes|n:n,e!==null){for(r=t.child=e.child,a=0;r!==null;)a=a|r.lanes|r.childLanes,r=r.sibling;r=a&~i}else r=0,t.child=null;return Im(e,t,i,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&co(t,i!==null?i.cachePool:null),i!==null?Nm(t,i):gd(),Av(t);else return r=t.lanes=536870912,Im(e,t,i!==null?i.baseLanes|n:n,n,r)}else i!==null?(co(t,i.cachePool),Nm(t,i),Kr(),t.memoizedState=null):(e!==null&&co(t,null),gd(),Kr());return Pt(e,t,a,n),t.child}function Ss(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Im(e,t,n,r,a){var i=Df();return i=i===null?null:{parent:Mt._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},e!==null&&co(t,null),gd(),Av(t),e!==null&&Zi(e,t,r,!0),t.childLanes=a,null}function ho(e,t){return t=zo({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ym(e,t,n){return La(t,e.child,null,n),e=ho(t,t.pendingProps),e.flags|=2,On(t),t.memoizedState=null,e}function sx(e,t,n){var r=t.pendingProps,a=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Le){if(r.mode==="hidden")return e=ho(t,r),t.lanes=536870912,Ss(null,e);if(yd(t),(e=dt)?(e=s0(e,Qn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ca!==null?{id:cr,overflow:ur}:null,retryLane:536870912,hydrationErrors:null},n=bv(e),n.return=t,t.child=n,Ft=t,dt=null)):e=null,e===null)throw ua(t);return t.lanes=536870912,null}return ho(t,r)}var i=e.memoizedState;if(i!==null){var s=i.dehydrated;if(yd(t),a)if(t.flags&256)t.flags&=-257,t=Ym(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(k(558));else if(kt||Zi(e,t,n,!1),a=(n&e.childLanes)!==0,kt||a){if(r=et,r!==null&&(s=Gy(r,n),s!==0&&s!==i.retryLane))throw i.retryLane=s,Xa(e,s),bn(r,e,s),Gf;Ho(),t=Ym(e,t,n)}else e=i.treeContext,dt=Pn(s.nextSibling),Ft=t,Le=!0,ta=null,Qn=!1,e!==null&&wv(t,e),t=ho(t,r),t.flags|=4096;return t}return e=Or(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function mo(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(k(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Sd(e,t,n,r,a){return Ba(t),n=Mf(e,t,n,r,void 0,a),r=kf(),e!==null&&!kt?(Uf(e,t,a),Mr(e,t,a)):(Le&&r&&Tf(t),t.flags|=1,Pt(e,t,n,a),t.child)}function Vm(e,t,n,r,a,i){return Ba(t),t.updateQueue=null,n=Cv(t,r,n,a),Nv(e),r=kf(),e!==null&&!kt?(Uf(e,t,i),Mr(e,t,i)):(Le&&r&&Tf(t),t.flags|=1,Pt(e,t,n,i),t.child)}function Gm(e,t,n,r,a){if(Ba(t),t.stateNode===null){var i=wi,s=n.contextType;typeof s=="object"&&s!==null&&(i=Wt(s)),i=new n(r,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=_d,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=r,i.state=t.memoizedState,i.refs={},Nf(t),s=n.contextType,i.context=typeof s=="object"&&s!==null?Wt(s):wi,i.state=t.memoizedState,s=n.getDerivedStateFromProps,typeof s=="function"&&(uu(t,n,s,r),i.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(s=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),s!==i.state&&_d.enqueueReplaceState(i,i.state,null),Rs(t,r,i,a),Cs(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){i=t.stateNode;var l=t.memoizedProps,o=qa(n,l);i.props=o;var u=i.context,f=n.contextType;s=wi,typeof f=="object"&&f!==null&&(s=Wt(f));var d=n.getDerivedStateFromProps;f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function",l=t.pendingProps!==l,f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l||u!==s)&&Bm(t,i,r,s),Ir=!1;var m=t.memoizedState;i.state=m,Rs(t,r,i,a),Cs(),u=t.memoizedState,l||m!==u||Ir?(typeof d=="function"&&(uu(t,n,d,r),u=t.memoizedState),(o=Ir||$m(t,n,o,r,m,u,s))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=s,r=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,hd(e,t),s=t.memoizedProps,f=qa(n,s),i.props=f,d=t.pendingProps,m=i.context,u=n.contextType,o=wi,typeof u=="object"&&u!==null&&(o=Wt(u)),l=n.getDerivedStateFromProps,(u=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==d||m!==o)&&Bm(t,i,r,o),Ir=!1,m=t.memoizedState,i.state=m,Rs(t,r,i,a),Cs();var h=t.memoizedState;s!==d||m!==h||Ir||e!==null&&e.dependencies!==null&&Ao(e.dependencies)?(typeof l=="function"&&(uu(t,n,l,r),h=t.memoizedState),(f=Ir||$m(t,n,f,r,m,h,o)||e!==null&&e.dependencies!==null&&Ao(e.dependencies))?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,h,o),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,h,o)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),i.props=r,i.state=h,i.context=o,r=f):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,mo(e,t),r=(t.flags&128)!==0,i||r?(i=t.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&r?(t.child=La(t,e.child,null,a),t.child=La(t,null,n,a)):Pt(e,t,n,a),t.memoizedState=i.state,e=t.child):e=Mr(e,t,a),e}function Km(e,t,n,r){return $a(),t.flags|=256,Pt(e,t,n,r),t.child}var du={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fu(e){return{baseLanes:e,cachePool:xv()}}function hu(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=Cn),e}function gp(e,t,n){var r=t.pendingProps,a=!1,i=(t.flags&128)!==0,s;if((s=i)||(s=e!==null&&e.memoizedState===null?!1:(Dt.current&2)!==0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!==0,t.flags&=-33,e===null){if(Le){if(a?Gr(t):Kr(),(e=dt)?(e=s0(e,Qn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ca!==null?{id:cr,overflow:ur}:null,retryLane:536870912,hydrationErrors:null},n=bv(e),n.return=t,t.child=n,Ft=t,dt=null)):e=null,e===null)throw ua(t);return zd(e)?t.lanes=32:t.lanes=536870912,null}var l=r.children;return r=r.fallback,a?(Kr(),a=t.mode,l=zo({mode:"hidden",children:l},a),r=Ra(r,a,n,null),l.return=t,r.return=t,l.sibling=r,t.child=l,r=t.child,r.memoizedState=fu(n),r.childLanes=hu(e,s,n),t.memoizedState=du,Ss(null,r)):(Gr(t),xd(t,l))}var o=e.memoizedState;if(o!==null&&(l=o.dehydrated,l!==null)){if(i)t.flags&256?(Gr(t),t.flags&=-257,t=mu(e,t,n)):t.memoizedState!==null?(Kr(),t.child=e.child,t.flags|=128,t=null):(Kr(),l=r.fallback,a=t.mode,r=zo({mode:"visible",children:r.children},a),l=Ra(l,a,n,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,La(t,e.child,null,n),r=t.child,r.memoizedState=fu(n),r.childLanes=hu(e,s,n),t.memoizedState=du,t=Ss(null,r));else if(Gr(t),zd(l)){if(s=l.nextSibling&&l.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(k(419)),r.stack="",r.digest=s,Ps({value:r,source:null,stack:null}),t=mu(e,t,n)}else if(kt||Zi(e,t,n,!1),s=(n&e.childLanes)!==0,kt||s){if(s=et,s!==null&&(r=Gy(s,n),r!==0&&r!==o.retryLane))throw o.retryLane=r,Xa(e,r),bn(s,e,r),Gf;Ud(l)||Ho(),t=mu(e,t,n)}else Ud(l)?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,dt=Pn(l.nextSibling),Ft=t,Le=!0,ta=null,Qn=!1,e!==null&&wv(t,e),t=xd(t,r.children),t.flags|=4096);return t}return a?(Kr(),l=r.fallback,a=t.mode,o=e.child,u=o.sibling,r=Or(o,{mode:"hidden",children:r.children}),r.subtreeFlags=o.subtreeFlags&65011712,u!==null?l=Or(u,l):(l=Ra(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,Ss(null,r),r=t.child,l=e.child.memoizedState,l===null?l=fu(n):(a=l.cachePool,a!==null?(o=Mt._currentValue,a=a.parent!==o?{parent:o,pool:o}:a):a=xv(),l={baseLanes:l.baseLanes|n,cachePool:a}),r.memoizedState=l,r.childLanes=hu(e,s,n),t.memoizedState=du,Ss(e.child,r)):(Gr(t),n=e.child,e=n.sibling,n=Or(n,{mode:"visible",children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function xd(e,t){return t=zo({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function zo(e,t){return e=Dn(22,e,null,t),e.lanes=0,e}function mu(e,t,n){return La(t,e.child,null,n),e=xd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xm(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ud(e.return,t,n)}function gu(e,t,n,r,a,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,treeForkCount:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a,s.treeForkCount=i)}function yp(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;r=r.children;var s=Dt.current,l=(s&2)!==0;if(l?(s=s&1|2,t.flags|=128):s&=1,st(Dt,s),Pt(e,t,r,n),r=Le?Js:0,!l&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xm(e,n,t);else if(e.tag===19)Xm(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ro(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),gu(t,!1,a,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ro(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}gu(t,!0,n,null,i,r);break;case"together":gu(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Mr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fa|=t.lanes,!(n&t.childLanes))if(e!==null){if(Zi(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(k(153));if(t.child!==null){for(e=t.child,n=Or(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Or(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Kf(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Ao(e)))}function lx(e,t,n){switch(t.tag){case 3:So(t,t.stateNode.containerInfo),Vr(t,Mt,e.memoizedState.cache),$a();break;case 27:case 5:Zu(t);break;case 4:So(t,t.stateNode.containerInfo);break;case 10:Vr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,yd(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Gr(t),t.flags|=128,null):n&t.child.childLanes?gp(e,t,n):(Gr(t),e=Mr(e,t,n),e!==null?e.sibling:null);Gr(t);break;case 19:var a=(e.flags&128)!==0;if(r=(n&t.childLanes)!==0,r||(Zi(e,t,n,!1),r=(n&t.childLanes)!==0),a){if(r)return yp(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),st(Dt,Dt.current),r)break;return null;case 22:return t.lanes=0,mp(e,t,n,t.pendingProps);case 24:Vr(t,Mt,e.memoizedState.cache)}return Mr(e,t,n)}function vp(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)kt=!0;else{if(!Kf(e,n)&&!(t.flags&128))return kt=!1,lx(e,t,n);kt=!!(e.flags&131072)}else kt=!1,Le&&t.flags&1048576&&_v(t,Js,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=Sa(t.elementType),t.type=e,typeof e=="function")Ef(e)?(r=qa(e,r),t.tag=1,t=Gm(null,t,e,r,n)):(t.tag=0,t=Sd(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===uf){t.tag=11,t=Hm(null,t,e,r,n);break e}else if(a===df){t.tag=14,t=qm(null,t,e,r,n);break e}}throw t=Ju(e)||e,Error(k(306,t,""))}}return t;case 0:return Sd(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=qa(r,t.pendingProps),Gm(e,t,r,a,n);case 3:e:{if(So(t,t.stateNode.containerInfo),e===null)throw Error(k(387));r=t.pendingProps;var i=t.memoizedState;a=i.element,hd(e,t),Rs(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Vr(t,Mt,r),r!==i.cache&&dd(t,[Mt],n,!0),Cs(),r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=Km(e,t,r,n);break e}else if(r!==a){a=Xn(Error(k(424)),t),Ps(a),t=Km(e,t,r,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(dt=Pn(e.firstChild),Ft=t,Le=!0,ta=null,Qn=!0,n=jv(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if($a(),r===a){t=Mr(e,t,n);break e}Pt(e,t,r,n)}t=t.child}return t;case 26:return mo(e,t),e===null?(n=hg(t.type,null,t.pendingProps,null))?t.memoizedState=n:Le||(n=t.type,e=t.pendingProps,r=Vo(ea.current).createElement(n),r[Zt]=t,r[_n]=e,en(r,n,e),Xt(r),t.stateNode=r):t.memoizedState=hg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Zu(t),e===null&&Le&&(r=t.stateNode=l0(t.type,t.pendingProps,ea.current),Ft=t,Qn=!0,a=dt,ma(t.type)?($d=a,dt=Pn(r.firstChild)):dt=a),Pt(e,t,t.pendingProps.children,n),mo(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Le&&((a=r=dt)&&(r=$x(r,t.type,t.pendingProps,Qn),r!==null?(t.stateNode=r,Ft=t,dt=Pn(r.firstChild),Qn=!1,a=!0):a=!1),a||ua(t)),Zu(t),a=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,r=i.children,Md(a,i)?r=null:s!==null&&Md(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=Mf(e,t,FS,null,null,n),nl._currentValue=a),mo(e,t),Pt(e,t,r,n),t.child;case 6:return e===null&&Le&&((e=n=dt)&&(n=Bx(n,t.pendingProps,Qn),n!==null?(t.stateNode=n,Ft=t,dt=null,e=!0):e=!1),e||ua(t)),null;case 13:return gp(e,t,n);case 4:return So(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=La(t,null,r,n):Pt(e,t,r,n),t.child;case 11:return Hm(e,t,t.type,t.pendingProps,n);case 7:return Pt(e,t,t.pendingProps,n),t.child;case 8:return Pt(e,t,t.pendingProps.children,n),t.child;case 12:return Pt(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Vr(t,t.type,r.value),Pt(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,Ba(t),a=Wt(a),r=r(a),t.flags|=1,Pt(e,t,r,n),t.child;case 14:return qm(e,t,t.type,t.pendingProps,n);case 15:return hp(e,t,t.type,t.pendingProps,n);case 19:return yp(e,t,n);case 31:return sx(e,t,n);case 22:return mp(e,t,n,t.pendingProps);case 24:return Ba(t),r=Wt(Mt),e===null?(a=Df(),a===null&&(a=et,i=Of(),a.pooledCache=i,i.refCount++,i!==null&&(a.pooledCacheLanes|=n),a=i),t.memoizedState={parent:r,cache:a},Nf(t),Vr(t,Mt,a)):(e.lanes&n&&(hd(e,t),Rs(t,null,null,n),Cs()),a=e.memoizedState,i=t.memoizedState,a.parent!==r?(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),Vr(t,Mt,r)):(r=i.cache,Vr(t,Mt,r),r!==a.cache&&dd(t,[Mt],n,!0))),Pt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(k(156,t.tag))}function vr(e){e.flags|=4}function yu(e,t,n,r,a){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(a&335544128)===a)if(e.stateNode.complete)e.flags|=8192;else if(qp())e.flags|=8192;else throw ka=No,Af}else e.flags&=-16777217}function Qm(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!u0(t))if(qp())e.flags|=8192;else throw ka=No,Af}function ql(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Iy():536870912,e.lanes|=t,qi|=t)}function ys(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&65011712,r|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ox(e,t,n){var r=t.pendingProps;switch(jf(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return ut(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Dr(Mt),Ui(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ei(t)?vr(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,lu())),ut(t),null;case 26:var a=t.type,i=t.memoizedState;return e===null?(vr(t),i!==null?(ut(t),Qm(t,i)):(ut(t),yu(t,a,null,r,n))):i?i!==e.memoizedState?(vr(t),ut(t),Qm(t,i)):(ut(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&vr(t),ut(t),yu(t,a,e,r,n)),null;case 27:if(xo(t),n=ea.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&vr(t);else{if(!r){if(t.stateNode===null)throw Error(k(166));return ut(t),null}e=fr.current,ei(t)?xm(t):(e=l0(a,r,n),t.stateNode=e,vr(t))}return ut(t),null;case 5:if(xo(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&vr(t);else{if(!r){if(t.stateNode===null)throw Error(k(166));return ut(t),null}if(i=fr.current,ei(t))xm(t);else{var s=Vo(ea.current);switch(i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=s.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof r.is=="string"?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i=typeof r.is=="string"?s.createElement(a,{is:r.is}):s.createElement(a)}}i[Zt]=t,i[_n]=r;e:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=i;e:switch(en(i,a,r),a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&vr(t)}}return ut(t),yu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&vr(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(k(166));if(e=ea.current,ei(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Ft,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[Zt]=t,e=!!(e.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||r0(e.nodeValue,n)),e||ua(t,!0)}else e=Vo(e).createTextNode(r),e[Zt]=t,t.stateNode=e}return ut(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=ei(t),n!==null){if(e===null){if(!r)throw Error(k(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(k(557));e[Zt]=t}else $a(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),e=!1}else n=lu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(On(t),t):(On(t),null);if(t.flags&128)throw Error(k(558))}return ut(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=ei(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(k(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(k(317));a[Zt]=t}else $a(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),a=!1}else a=lu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(On(t),t):(On(t),null)}return On(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ql(t,t.updateQueue),ut(t),null);case 4:return Ui(),e===null&&Wf(t.stateNode.containerInfo),ut(t),null;case 10:return Dr(t.type),ut(t),null;case 19:if(Qt(Dt),r=t.memoizedState,r===null)return ut(t),null;if(a=(t.flags&128)!==0,i=r.rendering,i===null)if(a)ys(r,!1);else{if(jt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Ro(e),i!==null){for(t.flags|=128,ys(r,!1),e=i.updateQueue,t.updateQueue=e,ql(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)pv(n,e),n=n.sibling;return st(Dt,Dt.current&1|2),Le&&Sr(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Rn()>Bo&&(t.flags|=128,a=!0,ys(r,!1),t.lanes=4194304)}else{if(!a)if(e=Ro(i),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,ql(t,e),ys(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!Le)return ut(t),null}else 2*Rn()-r.renderingStartTime>Bo&&n!==536870912&&(t.flags|=128,a=!0,ys(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(e=r.last,e!==null?e.sibling=i:t.child=i,r.last=i)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Rn(),e.sibling=null,n=Dt.current,st(Dt,a?n&1|2:n&1),Le&&Sr(t,r.treeForkCount),e):(ut(t),null);case 22:case 23:return On(t),Cf(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),n=t.updateQueue,n!==null&&ql(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&Qt(Ma),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Dr(Mt),ut(t),null;case 25:return null;case 30:return null}throw Error(k(156,t.tag))}function cx(e,t){switch(jf(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Dr(Mt),Ui(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return xo(t),null;case 31:if(t.memoizedState!==null){if(On(t),t.alternate===null)throw Error(k(340));$a()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(On(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(k(340));$a()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qt(Dt),null;case 4:return Ui(),null;case 10:return Dr(t.type),null;case 22:case 23:return On(t),Cf(),e!==null&&Qt(Ma),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Dr(Mt),null;case 25:return null;default:return null}}function pp(e,t){switch(jf(t),t.tag){case 3:Dr(Mt),Ui();break;case 26:case 27:case 5:xo(t);break;case 4:Ui();break;case 31:t.memoizedState!==null&&On(t);break;case 13:On(t);break;case 19:Qt(Dt);break;case 10:Dr(t.type);break;case 22:case 23:On(t),Cf(),e!==null&&Qt(Ma);break;case 24:Dr(Mt)}}function pl(e,t){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var a=r.next;n=a;do{if((n.tag&e)===e){r=void 0;var i=n.create,s=n.inst;r=i(),s.destroy=r}n=n.next}while(n!==a)}}catch(l){Je(t,t.return,l)}}function da(e,t,n){try{var r=t.updateQueue,a=r!==null?r.lastEffect:null;if(a!==null){var i=a.next;r=i;do{if((r.tag&e)===e){var s=r.inst,l=s.destroy;if(l!==void 0){s.destroy=void 0,a=t;var o=n,u=l;try{u()}catch(f){Je(a,o,f)}}}r=r.next}while(r!==i)}}catch(f){Je(t,t.return,f)}}function bp(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Dv(t,n)}catch(r){Je(e,e.return,r)}}}function _p(e,t,n){n.props=qa(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Je(e,t,r)}}function ks(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(a){Je(e,t,a)}}function dr(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(a){Je(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(a){Je(e,t,a)}else n.current=null}function wp(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(a){Je(e,e.return,a)}}function vu(e,t,n){try{var r=e.stateNode;Cx(r,e.type,n,t),r[_n]=t}catch(a){Je(e,e.return,a)}}function Sp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ma(e.type)||e.tag===4}function pu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ma(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ed(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Tr));else if(r!==4&&(r===27&&ma(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Ed(e,t,n),e=e.sibling;e!==null;)Ed(e,t,n),e=e.sibling}function $o(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&ma(e.type)&&(n=e.stateNode),e=e.child,e!==null))for($o(e,t,n),e=e.sibling;e!==null;)$o(e,t,n),e=e.sibling}function xp(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);en(t,r,n),t[Zt]=e,t[_n]=n}catch(i){Je(e,e.return,i)}}var xr=!1,Rt=!1,bu=!1,Jm=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function ux(e,t){if(e=e.containerInfo,Cd=Qo,e=uv(e),wf(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,l=-1,o=-1,u=0,f=0,d=e,m=null;t:for(;;){for(var h;d!==n||a!==0&&d.nodeType!==3||(l=s+a),d!==i||r!==0&&d.nodeType!==3||(o=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)m=d,d=h;for(;;){if(d===e)break t;if(m===n&&++u===a&&(l=s),m===i&&++f===r&&(o=s),(h=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=h}n=l===-1||o===-1?null:{start:l,end:o}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rd={focusedElem:e,selectionRange:n},Qo=!1,Gt=t;Gt!==null;)if(t=Gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Gt=e;else for(;Gt!==null;){switch(t=Gt,i=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&i!==null){e=void 0,n=t,a=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var p=qa(n.type,a);e=r.getSnapshotBeforeUpdate(p,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(b){Je(n,n.return,b)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)kd(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(k(163))}if(e=t.sibling,e!==null){e.return=t.return,Gt=e;break}Gt=t.return}}function Ep(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:br(e,n),r&4&&pl(5,n);break;case 1:if(br(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(s){Je(n,n.return,s)}else{var a=qa(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){Je(n,n.return,s)}}r&64&&bp(n),r&512&&ks(n,n.return);break;case 3:if(br(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Dv(e,t)}catch(s){Je(n,n.return,s)}}break;case 27:t===null&&r&4&&xp(n);case 26:case 5:br(e,n),t===null&&r&4&&wp(n),r&512&&ks(n,n.return);break;case 12:br(e,n);break;case 31:br(e,n),r&4&&Op(e,n);break;case 13:br(e,n),r&4&&Dp(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=bx.bind(null,n),Lx(e,n))));break;case 22:if(r=n.memoizedState!==null||xr,!r){t=t!==null&&t.memoizedState!==null||Rt,a=xr;var i=Rt;xr=r,(Rt=t)&&!i?_r(e,n,(n.subtreeFlags&8772)!==0):br(e,n),xr=a,Rt=i}break;case 30:break;default:br(e,n)}}function Tp(e){var t=e.alternate;t!==null&&(e.alternate=null,Tp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&gf(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var pt=null,vn=!1;function pr(e,t,n){for(n=n.child;n!==null;)jp(e,t,n),n=n.sibling}function jp(e,t,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(dl,n)}catch{}switch(n.tag){case 26:Rt||dr(n,t),pr(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Rt||dr(n,t);var r=pt,a=vn;ma(n.type)&&(pt=n.stateNode,vn=!1),pr(e,t,n),Bs(n.stateNode),pt=r,vn=a;break;case 5:Rt||dr(n,t);case 6:if(r=pt,a=vn,pt=null,pr(e,t,n),pt=r,vn=a,pt!==null)if(vn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(n.stateNode)}catch(i){Je(n,t,i)}else try{pt.removeChild(n.stateNode)}catch(i){Je(n,t,i)}break;case 18:pt!==null&&(vn?(e=pt,og(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Gi(e)):og(pt,n.stateNode));break;case 4:r=pt,a=vn,pt=n.stateNode.containerInfo,vn=!0,pr(e,t,n),pt=r,vn=a;break;case 0:case 11:case 14:case 15:da(2,n,t),Rt||da(4,n,t),pr(e,t,n);break;case 1:Rt||(dr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"&&_p(n,t,r)),pr(e,t,n);break;case 21:pr(e,t,n);break;case 22:Rt=(r=Rt)||n.memoizedState!==null,pr(e,t,n),Rt=r;break;default:pr(e,t,n)}}function Op(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Gi(e)}catch(n){Je(t,t.return,n)}}}function Dp(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Gi(e)}catch(n){Je(t,t.return,n)}}function dx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Jm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Jm),t;default:throw Error(k(435,e.tag))}}function Il(e,t){var n=dx(e);t.forEach(function(r){if(!n.has(r)){n.add(r);var a=_x.bind(null,e,r);r.then(a,a)}})}function gn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],i=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 27:if(ma(l.type)){pt=l.stateNode,vn=!1;break e}break;case 5:pt=l.stateNode,vn=!1;break e;case 3:case 4:pt=l.stateNode.containerInfo,vn=!0;break e}l=l.return}if(pt===null)throw Error(k(160));jp(i,s,a),pt=null,vn=!1,i=a.alternate,i!==null&&(i.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ap(t,e),t=t.sibling}var nr=null;function Ap(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:gn(t,e),yn(e),r&4&&(da(3,e,e.return),pl(3,e),da(5,e,e.return));break;case 1:gn(t,e),yn(e),r&512&&(Rt||n===null||dr(n,n.return)),r&64&&xr&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=nr;if(gn(t,e),yn(e),r&512&&(Rt||n===null||dr(n,n.return)),r&4){var i=n!==null?n.memoizedState:null;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){e:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;t:switch(r){case"title":i=a.getElementsByTagName("title")[0],(!i||i[ml]||i[Zt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=a.createElement(r),a.head.insertBefore(i,a.querySelector("head > title"))),en(i,r,n),i[Zt]=e,Xt(i),r=i;break e;case"link":var s=gg("link","href",a).get(r+(n.href||""));if(s){for(var l=0;l<s.length;l++)if(i=s[l],i.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&i.getAttribute("rel")===(n.rel==null?null:n.rel)&&i.getAttribute("title")===(n.title==null?null:n.title)&&i.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(l,1);break t}}i=a.createElement(r),en(i,r,n),a.head.appendChild(i);break;case"meta":if(s=gg("meta","content",a).get(r+(n.content||""))){for(l=0;l<s.length;l++)if(i=s[l],i.getAttribute("content")===(n.content==null?null:""+n.content)&&i.getAttribute("name")===(n.name==null?null:n.name)&&i.getAttribute("property")===(n.property==null?null:n.property)&&i.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&i.getAttribute("charset")===(n.charSet==null?null:n.charSet)){s.splice(l,1);break t}}i=a.createElement(r),en(i,r,n),a.head.appendChild(i);break;default:throw Error(k(468,r))}i[Zt]=e,Xt(i),r=i}e.stateNode=r}else yg(a,e.type,e.stateNode);else e.stateNode=mg(a,r,e.memoizedProps);else i!==r?(i===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):i.count--,r===null?yg(a,e.type,e.stateNode):mg(a,r,e.memoizedProps)):r===null&&e.stateNode!==null&&vu(e,e.memoizedProps,n.memoizedProps)}break;case 27:gn(t,e),yn(e),r&512&&(Rt||n===null||dr(n,n.return)),n!==null&&r&4&&vu(e,e.memoizedProps,n.memoizedProps);break;case 5:if(gn(t,e),yn(e),r&512&&(Rt||n===null||dr(n,n.return)),e.flags&32){a=e.stateNode;try{$i(a,"")}catch(p){Je(e,e.return,p)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,vu(e,a,n!==null?n.memoizedProps:a)),r&1024&&(bu=!0);break;case 6:if(gn(t,e),yn(e),r&4){if(e.stateNode===null)throw Error(k(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){Je(e,e.return,p)}}break;case 3:if(vo=null,a=nr,nr=Go(t.containerInfo),gn(t,e),nr=a,yn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gi(t.containerInfo)}catch(p){Je(e,e.return,p)}bu&&(bu=!1,Np(e));break;case 4:r=nr,nr=Go(e.stateNode.containerInfo),gn(t,e),yn(e),nr=r;break;case 12:gn(t,e),yn(e);break;case 31:gn(t,e),yn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Il(e,r)));break;case 13:gn(t,e),yn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(wc=Rn()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Il(e,r)));break;case 22:a=e.memoizedState!==null;var o=n!==null&&n.memoizedState!==null,u=xr,f=Rt;if(xr=u||a,Rt=f||o,gn(t,e),Rt=f,xr=u,yn(e),r&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||o||xr||Rt||xa(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){o=n=t;try{if(i=o.stateNode,a)s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{l=o.stateNode;var d=o.memoizedProps.style,m=d!=null&&d.hasOwnProperty("display")?d.display:null;l.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(p){Je(o,o.return,p)}}}else if(t.tag===6){if(n===null){o=t;try{o.stateNode.nodeValue=a?"":o.memoizedProps}catch(p){Je(o,o.return,p)}}}else if(t.tag===18){if(n===null){o=t;try{var h=o.stateNode;a?cg(h,!0):cg(o.stateNode,!1)}catch(p){Je(o,o.return,p)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Il(e,n))));break;case 19:gn(t,e),yn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Il(e,r)));break;case 30:break;case 21:break;default:gn(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Sp(r)){n=r;break}r=r.return}if(n==null)throw Error(k(160));switch(n.tag){case 27:var a=n.stateNode,i=pu(e);$o(e,i,a);break;case 5:var s=n.stateNode;n.flags&32&&($i(s,""),n.flags&=-33);var l=pu(e);$o(e,l,s);break;case 3:case 4:var o=n.stateNode.containerInfo,u=pu(e);Ed(e,u,o);break;default:throw Error(k(161))}}catch(f){Je(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Np(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Np(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function br(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ep(e,t.alternate,t),t=t.sibling}function xa(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:da(4,t,t.return),xa(t);break;case 1:dr(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&_p(t,t.return,n),xa(t);break;case 27:Bs(t.stateNode);case 26:case 5:dr(t,t.return),xa(t);break;case 22:t.memoizedState===null&&xa(t);break;case 30:xa(t);break;default:xa(t)}e=e.sibling}}function _r(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,a=e,i=t,s=i.flags;switch(i.tag){case 0:case 11:case 15:_r(a,i,n),pl(4,i);break;case 1:if(_r(a,i,n),r=i,a=r.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(u){Je(r,r.return,u)}if(r=i,a=r.updateQueue,a!==null){var l=r.stateNode;try{var o=a.shared.hiddenCallbacks;if(o!==null)for(a.shared.hiddenCallbacks=null,a=0;a<o.length;a++)Ov(o[a],l)}catch(u){Je(r,r.return,u)}}n&&s&64&&bp(i),ks(i,i.return);break;case 27:xp(i);case 26:case 5:_r(a,i,n),n&&r===null&&s&4&&wp(i),ks(i,i.return);break;case 12:_r(a,i,n);break;case 31:_r(a,i,n),n&&s&4&&Op(a,i);break;case 13:_r(a,i,n),n&&s&4&&Dp(a,i);break;case 22:i.memoizedState===null&&_r(a,i,n),ks(i,i.return);break;case 30:break;default:_r(a,i,n)}t=t.sibling}}function Xf(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&yl(n))}function Qf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&yl(e))}function Fn(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Cp(e,t,n,r),t=t.sibling}function Cp(e,t,n,r){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Fn(e,t,n,r),a&2048&&pl(9,t);break;case 1:Fn(e,t,n,r);break;case 3:Fn(e,t,n,r),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&yl(e)));break;case 12:if(a&2048){Fn(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,s=i.id,l=i.onPostCommit;typeof l=="function"&&l(s,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(o){Je(t,t.return,o)}}else Fn(e,t,n,r);break;case 31:Fn(e,t,n,r);break;case 13:Fn(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,s=t.alternate,t.memoizedState!==null?i._visibility&2?Fn(e,t,n,r):Us(e,t):i._visibility&2?Fn(e,t,n,r):(i._visibility|=2,oi(e,t,n,r,(t.subtreeFlags&10256)!==0||!1)),a&2048&&Xf(s,t);break;case 24:Fn(e,t,n,r),a&2048&&Qf(t.alternate,t);break;default:Fn(e,t,n,r)}}function oi(e,t,n,r,a){for(a=a&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var i=e,s=t,l=n,o=r,u=s.flags;switch(s.tag){case 0:case 11:case 15:oi(i,s,l,o,a),pl(8,s);break;case 23:break;case 22:var f=s.stateNode;s.memoizedState!==null?f._visibility&2?oi(i,s,l,o,a):Us(i,s):(f._visibility|=2,oi(i,s,l,o,a)),a&&u&2048&&Xf(s.alternate,s);break;case 24:oi(i,s,l,o,a),a&&u&2048&&Qf(s.alternate,s);break;default:oi(i,s,l,o,a)}t=t.sibling}}function Us(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,a=r.flags;switch(r.tag){case 22:Us(n,r),a&2048&&Xf(r.alternate,r);break;case 24:Us(n,r),a&2048&&Qf(r.alternate,r);break;default:Us(n,r)}t=t.sibling}}var xs=8192;function ti(e,t,n){if(e.subtreeFlags&xs)for(e=e.child;e!==null;)Rp(e,t,n),e=e.sibling}function Rp(e,t,n){switch(e.tag){case 26:ti(e,t,n),e.flags&xs&&e.memoizedState!==null&&Zx(n,nr,e.memoizedState,e.memoizedProps);break;case 5:ti(e,t,n);break;case 3:case 4:var r=nr;nr=Go(e.stateNode.containerInfo),ti(e,t,n),nr=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=xs,xs=16777216,ti(e,t,n),xs=r):ti(e,t,n));break;default:ti(e,t,n)}}function Mp(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function vs(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Gt=r,Up(r,e)}Mp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)kp(e),e=e.sibling}function kp(e){switch(e.tag){case 0:case 11:case 15:vs(e),e.flags&2048&&da(9,e,e.return);break;case 3:vs(e);break;case 12:vs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,go(e)):vs(e);break;default:vs(e)}}function go(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Gt=r,Up(r,e)}Mp(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:da(8,t,t.return),go(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,go(t));break;default:go(t)}e=e.sibling}}function Up(e,t){for(;Gt!==null;){var n=Gt;switch(n.tag){case 0:case 11:case 15:da(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:yl(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Gt=r;else e:for(n=e;Gt!==null;){r=Gt;var a=r.sibling,i=r.return;if(Tp(r),r===n){Gt=null;break e}if(a!==null){a.return=i,Gt=a;break e}Gt=i}}}var fx={getCacheForType:function(e){var t=Wt(Mt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Wt(Mt).controller.signal}},hx=typeof WeakMap=="function"?WeakMap:Map,Ve=0,et=null,Ne=null,ke=0,Qe=0,jn=null,Zr=!1,Wi=!1,Jf=!1,kr=0,jt=0,fa=0,Ua=0,Pf=0,Cn=0,qi=0,zs=null,pn=null,Td=!1,wc=0,zp=0,Bo=1/0,Lo=null,aa=null,Ht=0,ia=null,Ii=null,Ar=0,jd=0,Od=null,$p=null,$s=0,Dd=null;function Un(){return Ve&2&&ke!==0?ke&-ke:be.T!==null?Ff():Ky()}function Bp(){if(Cn===0)if(!(ke&536870912)||Le){var e=kl;kl<<=1,!(kl&3932160)&&(kl=262144),Cn=e}else Cn=536870912;return e=$n.current,e!==null&&(e.flags|=32),Cn}function bn(e,t,n){(e===et&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)&&(Yi(e,0),Fr(e,ke,Cn,!1)),hl(e,n),(!(Ve&2)||e!==et)&&(e===et&&(!(Ve&2)&&(Ua|=n),jt===4&&Fr(e,ke,Cn,!1)),mr(e))}function Lp(e,t,n){if(Ve&6)throw Error(k(327));var r=!n&&(t&127)===0&&(t&e.expiredLanes)===0||fl(e,t),a=r?yx(e,t):_u(e,t,!0),i=r;do{if(a===0){Wi&&!r&&Fr(e,t,0,!1);break}else{if(n=e.current.alternate,i&&!mx(n)){a=_u(e,t,!1),i=!1;continue}if(a===2){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=e.pendingLanes&-536870913,s=s!==0?s:s&536870912?536870912:0;if(s!==0){t=s;e:{var l=e;a=zs;var o=l.current.memoizedState.isDehydrated;if(o&&(Yi(l,s).flags|=256),s=_u(l,s,!1),s!==2){if(Jf&&!o){l.errorRecoveryDisabledLanes|=i,Ua|=i,a=4;break e}i=pn,pn=a,i!==null&&(pn===null?pn=i:pn.push.apply(pn,i))}a=s}if(i=!1,a!==2)continue}}if(a===1){Yi(e,0),Fr(e,t,0,!0);break}e:{switch(r=e,i=a,i){case 0:case 1:throw Error(k(345));case 4:if((t&4194048)!==t)break;case 6:Fr(r,t,Cn,!Zr);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(k(329))}if((t&62914560)===t&&(a=wc+300-Rn(),10<a)){if(Fr(r,t,Cn,!Zr),uc(r,0,!0)!==0)break e;Ar=t,r.timeoutHandle=i0(Pm.bind(null,r,n,pn,Lo,Td,t,Cn,Ua,qi,Zr,i,"Throttled",-0,0),a);break e}Pm(r,n,pn,Lo,Td,t,Cn,Ua,qi,Zr,i,null,-0,0)}}break}while(!0);mr(e)}function Pm(e,t,n,r,a,i,s,l,o,u,f,d,m,h){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Tr},Rp(t,i,d);var p=(i&62914560)===i?wc-Rn():(i&4194048)===i?zp-Rn():0;if(p=Fx(d,p),p!==null){Ar=i,e.cancelPendingCommit=p(Fm.bind(null,e,t,i,n,r,a,s,l,o,f,d,null,m,h)),Fr(e,i,s,!u);return}}Fm(e,t,i,n,r,a,s,l,o)}function mx(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!zn(i(),a))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fr(e,t,n,r){t&=~Pf,t&=~Ua,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var a=t;0<a;){var i=31-kn(a),s=1<<i;r[i]=-1,a&=~s}n!==0&&Yy(e,n,t)}function Sc(){return Ve&6?!0:(bl(0),!1)}function Zf(){if(Ne!==null){if(Qe===0)var e=Ne.return;else e=Ne,jr=Qa=null,zf(e),Ai=null,Zs=0,e=Ne;for(;e!==null;)pp(e.alternate,e),e=e.return;Ne=null}}function Yi(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,kx(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Ar=0,Zf(),et=e,Ne=n=Or(e.current,null),ke=t,Qe=0,jn=null,Zr=!1,Wi=fl(e,t),Jf=!1,qi=Cn=Pf=Ua=fa=jt=0,pn=zs=null,Td=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var a=31-kn(r),i=1<<a;t|=e[a],r&=~i}return kr=t,mc(),n}function Hp(e,t){xe=null,be.H=Ws,t===Fi||t===yc?(t=Dm(),Qe=3):t===Af?(t=Dm(),Qe=4):Qe=t===Gf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,jn=t,Ne===null&&(jt=1,Uo(e,Xn(t,e.current)))}function qp(){var e=$n.current;return e===null?!0:(ke&4194048)===ke?Jn===null:(ke&62914560)===ke||ke&536870912?e===Jn:!1}function Ip(){var e=be.H;return be.H=Ws,e===null?Ws:e}function Yp(){var e=be.A;return be.A=fx,e}function Ho(){jt=4,Zr||(ke&4194048)!==ke&&$n.current!==null||(Wi=!0),!(fa&134217727)&&!(Ua&134217727)||et===null||Fr(et,ke,Cn,!1)}function _u(e,t,n){var r=Ve;Ve|=2;var a=Ip(),i=Yp();(et!==e||ke!==t)&&(Lo=null,Yi(e,t)),t=!1;var s=jt;e:do try{if(Qe!==0&&Ne!==null){var l=Ne,o=jn;switch(Qe){case 8:Zf(),s=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(t=!0);var u=Qe;if(Qe=0,jn=null,Ei(e,l,o,u),n&&Wi){s=0;break e}break;default:u=Qe,Qe=0,jn=null,Ei(e,l,o,u)}}gx(),s=jt;break}catch(f){Hp(e,f)}while(!0);return t&&e.shellSuspendCounter++,jr=Qa=null,Ve=r,be.H=a,be.A=i,Ne===null&&(et=null,ke=0,mc()),s}function gx(){for(;Ne!==null;)Vp(Ne)}function yx(e,t){var n=Ve;Ve|=2;var r=Ip(),a=Yp();et!==e||ke!==t?(Lo=null,Bo=Rn()+500,Yi(e,t)):Wi=fl(e,t);e:do try{if(Qe!==0&&Ne!==null){t=Ne;var i=jn;t:switch(Qe){case 1:Qe=0,jn=null,Ei(e,t,i,1);break;case 2:case 9:if(Om(i)){Qe=0,jn=null,Zm(t);break}t=function(){Qe!==2&&Qe!==9||et!==e||(Qe=7),mr(e)},i.then(t,t);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:Om(i)?(Qe=0,jn=null,Zm(t)):(Qe=0,jn=null,Ei(e,t,i,7));break;case 5:var s=null;switch(Ne.tag){case 26:s=Ne.memoizedState;case 5:case 27:var l=Ne;if(s?u0(s):l.stateNode.complete){Qe=0,jn=null;var o=l.sibling;if(o!==null)Ne=o;else{var u=l.return;u!==null?(Ne=u,xc(u)):Ne=null}break t}}Qe=0,jn=null,Ei(e,t,i,5);break;case 6:Qe=0,jn=null,Ei(e,t,i,6);break;case 8:Zf(),jt=6;break e;default:throw Error(k(462))}}vx();break}catch(f){Hp(e,f)}while(!0);return jr=Qa=null,be.H=r,be.A=a,Ve=n,Ne!==null?0:(et=null,ke=0,mc(),jt)}function vx(){for(;Ne!==null&&!Hw();)Vp(Ne)}function Vp(e){var t=vp(e.alternate,e,kr);e.memoizedProps=e.pendingProps,t===null?xc(e):Ne=t}function Zm(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Vm(n,t,t.pendingProps,t.type,void 0,ke);break;case 11:t=Vm(n,t,t.pendingProps,t.type.render,t.ref,ke);break;case 5:zf(t);default:pp(n,t),t=Ne=pv(t,kr),t=vp(n,t,kr)}e.memoizedProps=e.pendingProps,t===null?xc(e):Ne=t}function Ei(e,t,n,r){jr=Qa=null,zf(t),Ai=null,Zs=0;var a=t.return;try{if(ix(e,a,t,n,ke)){jt=1,Uo(e,Xn(n,e.current)),Ne=null;return}}catch(i){if(a!==null)throw Ne=a,i;jt=1,Uo(e,Xn(n,e.current)),Ne=null;return}t.flags&32768?(Le||r===1?e=!0:Wi||ke&536870912?e=!1:(Zr=e=!0,(r===2||r===9||r===3||r===6)&&(r=$n.current,r!==null&&r.tag===13&&(r.flags|=16384))),Gp(t,e)):xc(t)}function xc(e){var t=e;do{if(t.flags&32768){Gp(t,Zr);return}e=t.return;var n=ox(t.alternate,t,kr);if(n!==null){Ne=n;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);jt===0&&(jt=5)}function Gp(e,t){do{var n=cx(e.alternate,e);if(n!==null){n.flags&=32767,Ne=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ne=e;return}Ne=e=n}while(e!==null);jt=6,Ne=null}function Fm(e,t,n,r,a,i,s,l,o){e.cancelPendingCommit=null;do Ec();while(Ht!==0);if(Ve&6)throw Error(k(327));if(t!==null){if(t===e.current)throw Error(k(177));if(i=t.lanes|t.childLanes,i|=Sf,Pw(e,n,i,s,l,o),e===et&&(Ne=et=null,ke=0),Ii=t,ia=e,Ar=n,jd=i,Od=a,$p=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,wx(Eo,function(){return Pp(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,t.subtreeFlags&13878||r){r=be.T,be.T=null,a=Ge.p,Ge.p=2,s=Ve,Ve|=4;try{ux(e,t,n)}finally{Ve=s,Ge.p=a,be.T=r}}Ht=1,Kp(),Xp(),Qp()}}function Kp(){if(Ht===1){Ht=0;var e=ia,t=Ii,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=be.T,be.T=null;var r=Ge.p;Ge.p=2;var a=Ve;Ve|=4;try{Ap(t,e);var i=Rd,s=uv(e.containerInfo),l=i.focusedElem,o=i.selectionRange;if(s!==l&&l&&l.ownerDocument&&cv(l.ownerDocument.documentElement,l)){if(o!==null&&wf(l)){var u=o.start,f=o.end;if(f===void 0&&(f=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(f,l.value.length);else{var d=l.ownerDocument||document,m=d&&d.defaultView||window;if(m.getSelection){var h=m.getSelection(),p=l.textContent.length,b=Math.min(o.start,p),x=o.end===void 0?b:Math.min(o.end,p);!h.extend&&b>x&&(s=x,x=b,b=s);var v=_m(l,b),g=_m(l,x);if(v&&g&&(h.rangeCount!==1||h.anchorNode!==v.node||h.anchorOffset!==v.offset||h.focusNode!==g.node||h.focusOffset!==g.offset)){var y=d.createRange();y.setStart(v.node,v.offset),h.removeAllRanges(),b>x?(h.addRange(y),h.extend(g.node,g.offset)):(y.setEnd(g.node,g.offset),h.addRange(y))}}}}for(d=[],h=l;h=h.parentNode;)h.nodeType===1&&d.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<d.length;l++){var w=d[l];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}Qo=!!Cd,Rd=Cd=null}finally{Ve=a,Ge.p=r,be.T=n}}e.current=t,Ht=2}}function Xp(){if(Ht===2){Ht=0;var e=ia,t=Ii,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=be.T,be.T=null;var r=Ge.p;Ge.p=2;var a=Ve;Ve|=4;try{Ep(e,t.alternate,t)}finally{Ve=a,Ge.p=r,be.T=n}}Ht=3}}function Qp(){if(Ht===4||Ht===3){Ht=0,qw();var e=ia,t=Ii,n=Ar,r=$p;t.subtreeFlags&10256||t.flags&10256?Ht=5:(Ht=0,Ii=ia=null,Jp(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(aa=null),mf(n),t=t.stateNode,Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(dl,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=be.T,a=Ge.p,Ge.p=2,be.T=null;try{for(var i=e.onRecoverableError,s=0;s<r.length;s++){var l=r[s];i(l.value,{componentStack:l.stack})}}finally{be.T=t,Ge.p=a}}Ar&3&&Ec(),mr(e),a=e.pendingLanes,n&261930&&a&42?e===Dd?$s++:($s=0,Dd=e):$s=0,bl(0)}}function Jp(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,yl(t)))}function Ec(){return Kp(),Xp(),Qp(),Pp()}function Pp(){if(Ht!==5)return!1;var e=ia,t=jd;jd=0;var n=mf(Ar),r=be.T,a=Ge.p;try{Ge.p=32>n?32:n,be.T=null,n=Od,Od=null;var i=ia,s=Ar;if(Ht=0,Ii=ia=null,Ar=0,Ve&6)throw Error(k(331));var l=Ve;if(Ve|=4,kp(i.current),Cp(i,i.current,s,n),Ve=l,bl(0,!1),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(dl,i)}catch{}return!0}finally{Ge.p=a,be.T=r,Jp(e,t)}}function Wm(e,t,n){t=Xn(n,t),t=wd(e.stateNode,t,2),e=ra(e,t,2),e!==null&&(hl(e,2),mr(e))}function Je(e,t,n){if(e.tag===3)Wm(e,e,n);else for(;t!==null;){if(t.tag===3){Wm(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(aa===null||!aa.has(r))){e=Xn(n,e),n=dp(2),r=ra(t,n,2),r!==null&&(fp(n,r,t,e),hl(r,2),mr(r));break}}t=t.return}}function wu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new hx;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(Jf=!0,a.add(n),e=px.bind(null,e,t,n),t.then(e,e))}function px(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,et===e&&(ke&n)===n&&(jt===4||jt===3&&(ke&62914560)===ke&&300>Rn()-wc?!(Ve&2)&&Yi(e,0):Pf|=n,qi===ke&&(qi=0)),mr(e)}function Zp(e,t){t===0&&(t=Iy()),e=Xa(e,t),e!==null&&(hl(e,t),mr(e))}function bx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zp(e,n)}function _x(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(k(314))}r!==null&&r.delete(t),Zp(e,n)}function wx(e,t){return ff(e,t)}var qo=null,ci=null,Ad=!1,Io=!1,Su=!1,Wr=0;function mr(e){e!==ci&&e.next===null&&(ci===null?qo=ci=e:ci=ci.next=e),Io=!0,Ad||(Ad=!0,xx())}function bl(e,t){if(!Su&&Io){Su=!0;do for(var n=!1,r=qo;r!==null;){if(e!==0){var a=r.pendingLanes;if(a===0)var i=0;else{var s=r.suspendedLanes,l=r.pingedLanes;i=(1<<31-kn(42|e)+1)-1,i&=a&~(s&~l),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(n=!0,eg(r,i))}else i=ke,i=uc(r,r===et?i:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(i&3)||fl(r,i)||(n=!0,eg(r,i));r=r.next}while(n);Su=!1}}function Sx(){Fp()}function Fp(){Io=Ad=!1;var e=0;Wr!==0&&Mx()&&(e=Wr);for(var t=Rn(),n=null,r=qo;r!==null;){var a=r.next,i=Wp(r,t);i===0?(r.next=null,n===null?qo=a:n.next=a,a===null&&(ci=n)):(n=r,(e!==0||i&3)&&(Io=!0)),r=a}Ht!==0&&Ht!==5||bl(e),Wr!==0&&(Wr=0)}function Wp(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var s=31-kn(i),l=1<<s,o=a[s];o===-1?(!(l&n)||l&r)&&(a[s]=Jw(l,t)):o<=t&&(e.expiredLanes|=l),i&=~l}if(t=et,n=ke,n=uc(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(Qe===2||Qe===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Pc(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||fl(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Pc(r),mf(n)){case 2:case 8:n=Hy;break;case 32:n=Eo;break;case 268435456:n=qy;break;default:n=Eo}return r=e0.bind(null,e),n=ff(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Pc(r),e.callbackPriority=2,e.callbackNode=null,2}function e0(e,t){if(Ht!==0&&Ht!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ke;return r=uc(e,e===et?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(Lp(e,r,t),Wp(e,Rn()),e.callbackNode!=null&&e.callbackNode===n?e0.bind(null,e):null)}function eg(e,t){if(Ec())return null;Lp(e,t,!0)}function xx(){Ux(function(){Ve&6?ff(Ly,Sx):Fp()})}function Ff(){if(Wr===0){var e=Bi;e===0&&(e=Ml,Ml<<=1,!(Ml&261888)&&(Ml=256)),Wr=e}return Wr}function tg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:io(""+e)}function ng(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Ex(e,t,n,r,a){if(t==="submit"&&n&&n.stateNode===a){var i=tg((a[_n]||null).action),s=r.submitter;s&&(t=(t=s[_n]||null)?tg(t.formAction):s.getAttribute("formAction"),t!==null&&(i=t,s=null));var l=new dc("action","action",null,r,a);e.push({event:l,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Wr!==0){var o=s?ng(a,s):new FormData(a);bd(n,{pending:!0,data:o,method:a.method,action:i},null,o)}}else typeof i=="function"&&(l.preventDefault(),o=s?ng(a,s):new FormData(a),bd(n,{pending:!0,data:o,method:a.method,action:i},i,o))},currentTarget:a}]})}}for(var xu=0;xu<ld.length;xu++){var Eu=ld[xu],Tx=Eu.toLowerCase(),jx=Eu[0].toUpperCase()+Eu.slice(1);sr(Tx,"on"+jx)}sr(fv,"onAnimationEnd");sr(hv,"onAnimationIteration");sr(mv,"onAnimationStart");sr("dblclick","onDoubleClick");sr("focusin","onFocus");sr("focusout","onBlur");sr(IS,"onTransitionRun");sr(YS,"onTransitionStart");sr(VS,"onTransitionCancel");sr(gv,"onTransitionEnd");zi("onMouseEnter",["mouseout","mouseover"]);zi("onMouseLeave",["mouseout","mouseover"]);zi("onPointerEnter",["pointerout","pointerover"]);zi("onPointerLeave",["pointerout","pointerover"]);Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Va("onBeforeInput",["compositionend","keypress","textInput","paste"]);Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ox=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(el));function t0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var l=r[s],o=l.instance,u=l.currentTarget;if(l=l.listener,o!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=u;try{i(a)}catch(f){jo(f)}a.currentTarget=null,i=o}else for(s=0;s<r.length;s++){if(l=r[s],o=l.instance,u=l.currentTarget,l=l.listener,o!==i&&a.isPropagationStopped())break e;i=l,a.currentTarget=u;try{i(a)}catch(f){jo(f)}a.currentTarget=null,i=o}}}}function Ae(e,t){var n=t[Wu];n===void 0&&(n=t[Wu]=new Set);var r=e+"__bubble";n.has(r)||(n0(t,e,2,!1),n.add(r))}function Tu(e,t,n){var r=0;t&&(r|=4),n0(n,e,r,t)}var Yl="_reactListening"+Math.random().toString(36).slice(2);function Wf(e){if(!e[Yl]){e[Yl]=!0,Xy.forEach(function(n){n!=="selectionchange"&&(Ox.has(n)||Tu(n,!1,e),Tu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yl]||(t[Yl]=!0,Tu("selectionchange",!1,t))}}function n0(e,t,n,r){switch(g0(t)){case 2:var a=t1;break;case 8:a=n1;break;default:a=rh}n=a.bind(null,t,n,e),a=void 0,!ad||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ju(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===a)break;if(s===4)for(s=r.return;s!==null;){var o=s.tag;if((o===3||o===4)&&s.stateNode.containerInfo===a)return;s=s.return}for(;l!==null;){if(s=gi(l),s===null)return;if(o=s.tag,o===5||o===6||o===26||o===27){r=i=s;continue e}l=l.parentNode}}r=r.return}tv(function(){var u=i,f=vf(n),d=[];e:{var m=yv.get(e);if(m!==void 0){var h=dc,p=e;switch(e){case"keypress":if(lo(n)===0)break e;case"keydown":case"keyup":h=_S;break;case"focusin":p="focus",h=tu;break;case"focusout":p="blur",h=tu;break;case"beforeblur":case"afterblur":h=tu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=oS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=xS;break;case fv:case hv:case mv:h=dS;break;case gv:h=TS;break;case"scroll":case"scrollend":h=sS;break;case"wheel":h=OS;break;case"copy":case"cut":case"paste":h=hS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=fm;break;case"toggle":case"beforetoggle":h=AS}var b=(t&4)!==0,x=!b&&(e==="scroll"||e==="scrollend"),v=b?m!==null?m+"Capture":null:m;b=[];for(var g=u,y;g!==null;){var w=g;if(y=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||y===null||v===null||(w=Ks(g,v),w!=null&&b.push(tl(g,w,y))),x)break;g=g.return}0<b.length&&(m=new h(m,p,null,n,f),d.push({event:m,listeners:b}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",m&&n!==rd&&(p=n.relatedTarget||n.fromElement)&&(gi(p)||p[Ji]))break e;if((h||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?gi(p):null,p!==null&&(x=ul(p),b=p.tag,p!==x||b!==5&&b!==27&&b!==6)&&(p=null)):(h=null,p=u),h!==p)){if(b=um,w="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(b=fm,w="onPointerLeave",v="onPointerEnter",g="pointer"),x=h==null?m:ws(h),y=p==null?m:ws(p),m=new b(w,g+"leave",h,n,f),m.target=x,m.relatedTarget=y,w=null,gi(f)===u&&(b=new b(v,g+"enter",p,n,f),b.target=y,b.relatedTarget=x,w=b),x=w,h&&p)t:{for(b=Dx,v=h,g=p,y=0,w=v;w;w=b(w))y++;w=0;for(var E=g;E;E=b(E))w++;for(;0<y-w;)v=b(v),y--;for(;0<w-y;)g=b(g),w--;for(;y--;){if(v===g||g!==null&&v===g.alternate){b=v;break t}v=b(v),g=b(g)}b=null}else b=null;h!==null&&rg(d,m,h,b,!1),p!==null&&x!==null&&rg(d,x,p,b,!0)}}e:{if(m=u?ws(u):window,h=m.nodeName&&m.nodeName.toLowerCase(),h==="select"||h==="input"&&m.type==="file")var j=ym;else if(gm(m))if(lv)j=LS;else{j=$S;var S=zS}else h=m.nodeName,!h||h.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&yf(u.elementType)&&(j=ym):j=BS;if(j&&(j=j(e,u))){sv(d,j,n,f);break e}S&&S(e,m,u),e==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&nd(m,"number",m.value)}switch(S=u?ws(u):window,e){case"focusin":(gm(S)||S.contentEditable==="true")&&(pi=S,id=u,Ds=null);break;case"focusout":Ds=id=pi=null;break;case"mousedown":sd=!0;break;case"contextmenu":case"mouseup":case"dragend":sd=!1,wm(d,n,f);break;case"selectionchange":if(qS)break;case"keydown":case"keyup":wm(d,n,f)}var T;if(_f)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else vi?av(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(rv&&n.locale!=="ko"&&(vi||A!=="onCompositionStart"?A==="onCompositionEnd"&&vi&&(T=nv()):(Pr=f,pf="value"in Pr?Pr.value:Pr.textContent,vi=!0)),S=Yo(u,A),0<S.length&&(A=new dm(A,e,null,n,f),d.push({event:A,listeners:S}),T?A.data=T:(T=iv(n),T!==null&&(A.data=T)))),(T=CS?RS(e,n):MS(e,n))&&(A=Yo(u,"onBeforeInput"),0<A.length&&(S=new dm("onBeforeInput","beforeinput",null,n,f),d.push({event:S,listeners:A}),S.data=T)),Ex(d,e,u,n,f)}t0(d,t)})}function tl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yo(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||i===null||(a=Ks(e,n),a!=null&&r.unshift(tl(e,a,i)),a=Ks(e,t),a!=null&&r.push(tl(e,a,i))),e.tag===3)return r;e=e.return}return[]}function Dx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function rg(e,t,n,r,a){for(var i=t._reactName,s=[];n!==null&&n!==r;){var l=n,o=l.alternate,u=l.stateNode;if(l=l.tag,o!==null&&o===r)break;l!==5&&l!==26&&l!==27||u===null||(o=u,a?(u=Ks(n,i),u!=null&&s.unshift(tl(n,u,o))):a||(u=Ks(n,i),u!=null&&s.push(tl(n,u,o)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var Ax=/\r\n?/g,Nx=/\u0000|\uFFFD/g;function ag(e){return(typeof e=="string"?e:""+e).replace(Ax,`
`).replace(Nx,"")}function r0(e,t){return t=ag(t),ag(e)===t}function Fe(e,t,n,r,a,i){switch(n){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||$i(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&$i(e,""+r);break;case"className":zl(e,"class",r);break;case"tabIndex":zl(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":zl(e,n,r);break;case"style":ev(e,r,i);break;case"data":if(t!=="object"){zl(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=io(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(n==="formAction"?(t!=="input"&&Fe(e,t,"name",a.name,a,null),Fe(e,t,"formEncType",a.formEncType,a,null),Fe(e,t,"formMethod",a.formMethod,a,null),Fe(e,t,"formTarget",a.formTarget,a,null)):(Fe(e,t,"encType",a.encType,a,null),Fe(e,t,"method",a.method,a,null),Fe(e,t,"target",a.target,a,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=io(""+r),e.setAttribute(n,r);break;case"onClick":r!=null&&(e.onclick=Tr);break;case"onScroll":r!=null&&Ae("scroll",e);break;case"onScrollEnd":r!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(k(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(k(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}n=io(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":r===!0?e.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),ao(e,"popover",r);break;case"xlinkActuate":yr(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":yr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":yr(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":yr(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":yr(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":yr(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":yr(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":yr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":yr(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":ao(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=aS.get(n)||n,ao(e,n,r))}}function Nd(e,t,n,r,a,i){switch(n){case"style":ev(e,r,i);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(k(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(k(60));e.innerHTML=n}}break;case"children":typeof r=="string"?$i(e,r):(typeof r=="number"||typeof r=="bigint")&&$i(e,""+r);break;case"onScroll":r!=null&&Ae("scroll",e);break;case"onScrollEnd":r!=null&&Ae("scrollend",e);break;case"onClick":r!=null&&(e.onclick=Tr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qy.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(a=n.endsWith("Capture"),t=n.slice(2,a?n.length-7:void 0),i=e[_n]||null,i=i!=null?i[n]:null,typeof i=="function"&&e.removeEventListener(t,i,a),typeof r=="function")){typeof i!="function"&&i!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break e}n in e?e[n]=r:r===!0?e.setAttribute(n,""):ao(e,n,r)}}}function en(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var r=!1,a=!1,i;for(i in n)if(n.hasOwnProperty(i)){var s=n[i];if(s!=null)switch(i){case"src":r=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(k(137,t));default:Fe(e,t,i,s,n,null)}}a&&Fe(e,t,"srcSet",n.srcSet,n,null),r&&Fe(e,t,"src",n.src,n,null);return;case"input":Ae("invalid",e);var l=i=s=a=null,o=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var f=n[r];if(f!=null)switch(r){case"name":a=f;break;case"type":s=f;break;case"checked":o=f;break;case"defaultChecked":u=f;break;case"value":i=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(k(137,t));break;default:Fe(e,t,r,f,n,null)}}Zy(e,i,l,o,u,s,a,!1);return;case"select":Ae("invalid",e),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"multiple":r=l;default:Fe(e,t,a,l,n,null)}t=i,n=s,e.multiple=!!r,t!=null?ji(e,!!r,t,!1):n!=null&&ji(e,!!r,n,!0);return;case"textarea":Ae("invalid",e),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(k(91));break;default:Fe(e,t,s,l,n,null)}Wy(e,r,a,i);return;case"option":for(o in n)if(n.hasOwnProperty(o)&&(r=n[o],r!=null))switch(o){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Fe(e,t,o,r,n,null)}return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(r=0;r<el.length;r++)Ae(el[r],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(k(137,t));default:Fe(e,t,u,r,n,null)}return;default:if(yf(t)){for(f in n)n.hasOwnProperty(f)&&(r=n[f],r!==void 0&&Nd(e,t,f,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(r=n[l],r!=null&&Fe(e,t,l,r,n,null))}function Cx(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,s=null,l=null,o=null,u=null,f=null;for(h in n){var d=n[h];if(n.hasOwnProperty(h)&&d!=null)switch(h){case"checked":break;case"value":break;case"defaultValue":o=d;default:r.hasOwnProperty(h)||Fe(e,t,h,null,r,d)}}for(var m in r){var h=r[m];if(d=n[m],r.hasOwnProperty(m)&&(h!=null||d!=null))switch(m){case"type":i=h;break;case"name":a=h;break;case"checked":u=h;break;case"defaultChecked":f=h;break;case"value":s=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(k(137,t));break;default:h!==d&&Fe(e,t,m,h,r,d)}}td(e,s,l,o,u,f,i,a);return;case"select":h=s=l=m=null;for(i in n)if(o=n[i],n.hasOwnProperty(i)&&o!=null)switch(i){case"value":break;case"multiple":h=o;default:r.hasOwnProperty(i)||Fe(e,t,i,null,r,o)}for(a in r)if(i=r[a],o=n[a],r.hasOwnProperty(a)&&(i!=null||o!=null))switch(a){case"value":m=i;break;case"defaultValue":l=i;break;case"multiple":s=i;default:i!==o&&Fe(e,t,a,i,r,o)}t=l,n=s,r=h,m!=null?ji(e,!!n,m,!1):!!r!=!!n&&(t!=null?ji(e,!!n,t,!0):ji(e,!!n,n?[]:"",!1));return;case"textarea":h=m=null;for(l in n)if(a=n[l],n.hasOwnProperty(l)&&a!=null&&!r.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:Fe(e,t,l,null,r,a)}for(s in r)if(a=r[s],i=n[s],r.hasOwnProperty(s)&&(a!=null||i!=null))switch(s){case"value":m=a;break;case"defaultValue":h=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(k(91));break;default:a!==i&&Fe(e,t,s,a,r,i)}Fy(e,m,h);return;case"option":for(var p in n)if(m=n[p],n.hasOwnProperty(p)&&m!=null&&!r.hasOwnProperty(p))switch(p){case"selected":e.selected=!1;break;default:Fe(e,t,p,null,r,m)}for(o in r)if(m=r[o],h=n[o],r.hasOwnProperty(o)&&m!==h&&(m!=null||h!=null))switch(o){case"selected":e.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Fe(e,t,o,m,r,h)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!=null&&!r.hasOwnProperty(b)&&Fe(e,t,b,null,r,m);for(u in r)if(m=r[u],h=n[u],r.hasOwnProperty(u)&&m!==h&&(m!=null||h!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(k(137,t));break;default:Fe(e,t,u,m,r,h)}return;default:if(yf(t)){for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!==void 0&&!r.hasOwnProperty(x)&&Nd(e,t,x,void 0,r,m);for(f in r)m=r[f],h=n[f],!r.hasOwnProperty(f)||m===h||m===void 0&&h===void 0||Nd(e,t,f,m,r,h);return}}for(var v in n)m=n[v],n.hasOwnProperty(v)&&m!=null&&!r.hasOwnProperty(v)&&Fe(e,t,v,null,r,m);for(d in r)m=r[d],h=n[d],!r.hasOwnProperty(d)||m===h||m==null&&h==null||Fe(e,t,d,m,r,h)}function ig(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var a=n[r],i=a.transferSize,s=a.initiatorType,l=a.duration;if(i&&l&&ig(s)){for(s=0,l=a.responseEnd,r+=1;r<n.length;r++){var o=n[r],u=o.startTime;if(u>l)break;var f=o.transferSize,d=o.initiatorType;f&&ig(d)&&(o=o.responseEnd,s+=f*(o<l?1:(l-u)/(o-u)))}if(--r,t+=8*(i+s)/(a.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Cd=null,Rd=null;function Vo(e){return e.nodeType===9?e:e.ownerDocument}function sg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Md(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ou=null;function Mx(){var e=window.event;return e&&e.type==="popstate"?e===Ou?!1:(Ou=e,!0):(Ou=null,!1)}var i0=typeof setTimeout=="function"?setTimeout:void 0,kx=typeof clearTimeout=="function"?clearTimeout:void 0,lg=typeof Promise=="function"?Promise:void 0,Ux=typeof queueMicrotask=="function"?queueMicrotask:typeof lg<"u"?function(e){return lg.resolve(null).then(e).catch(zx)}:i0;function zx(e){setTimeout(function(){throw e})}function ma(e){return e==="head"}function og(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"||n==="/&"){if(r===0){e.removeChild(a),Gi(t);return}r--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")r++;else if(n==="html")Bs(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Bs(n);for(var i=n.firstChild;i;){var s=i.nextSibling,l=i.nodeName;i[ml]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&i.rel.toLowerCase()==="stylesheet"||n.removeChild(i),i=s}}else n==="body"&&Bs(e.ownerDocument.body);n=a}while(n);Gi(t)}function cg(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=r}while(n)}function kd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":kd(n),gf(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function $x(e,t,n,r){for(;e.nodeType===1;){var a=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[ml])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=Pn(e.nextSibling),e===null)break}return null}function Bx(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Pn(e.nextSibling),e===null))return null;return e}function s0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Pn(e.nextSibling),e===null))return null;return e}function Ud(e){return e.data==="$?"||e.data==="$~"}function zd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Lx(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var $d=null;function ug(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Pn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function dg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function l0(e,t,n){switch(t=Vo(n),e){case"html":if(e=t.documentElement,!e)throw Error(k(452));return e;case"head":if(e=t.head,!e)throw Error(k(453));return e;case"body":if(e=t.body,!e)throw Error(k(454));return e;default:throw Error(k(451))}}function Bs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);gf(e)}var Zn=new Map,fg=new Set;function Go(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ur=Ge.d;Ge.d={f:Hx,r:qx,D:Ix,C:Yx,L:Vx,m:Gx,X:Xx,S:Kx,M:Qx};function Hx(){var e=Ur.f(),t=Sc();return e||t}function qx(e){var t=Pi(e);t!==null&&t.tag===5&&t.type==="form"?ep(t):Ur.r(e)}var es=typeof document>"u"?null:document;function o0(e,t,n){var r=es;if(r&&typeof t=="string"&&t){var a=Kn(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof n=="string"&&(a+='[crossorigin="'+n+'"]'),fg.has(a)||(fg.add(a),e={rel:e,crossOrigin:n,href:t},r.querySelector(a)===null&&(t=r.createElement("link"),en(t,"link",e),Xt(t),r.head.appendChild(t)))}}function Ix(e){Ur.D(e),o0("dns-prefetch",e,null)}function Yx(e,t){Ur.C(e,t),o0("preconnect",e,t)}function Vx(e,t,n){Ur.L(e,t,n);var r=es;if(r&&e&&t){var a='link[rel="preload"][as="'+Kn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(a+='[imagesrcset="'+Kn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(a+='[imagesizes="'+Kn(n.imageSizes)+'"]')):a+='[href="'+Kn(e)+'"]';var i=a;switch(t){case"style":i=Vi(e);break;case"script":i=ts(e)}Zn.has(i)||(e=mt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Zn.set(i,e),r.querySelector(a)!==null||t==="style"&&r.querySelector(_l(i))||t==="script"&&r.querySelector(wl(i))||(t=r.createElement("link"),en(t,"link",e),Xt(t),r.head.appendChild(t)))}}function Gx(e,t){Ur.m(e,t);var n=es;if(n&&e){var r=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+Kn(r)+'"][href="'+Kn(e)+'"]',i=a;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=ts(e)}if(!Zn.has(i)&&(e=mt({rel:"modulepreload",href:e},t),Zn.set(i,e),n.querySelector(a)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(wl(i)))return}r=n.createElement("link"),en(r,"link",e),Xt(r),n.head.appendChild(r)}}}function Kx(e,t,n){Ur.S(e,t,n);var r=es;if(r&&e){var a=Ti(r).hoistableStyles,i=Vi(e);t=t||"default";var s=a.get(i);if(!s){var l={loading:0,preload:null};if(s=r.querySelector(_l(i)))l.loading=5;else{e=mt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Zn.get(i))&&eh(e,n);var o=s=r.createElement("link");Xt(o),en(o,"link",e),o._p=new Promise(function(u,f){o.onload=u,o.onerror=f}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,yo(s,t,r)}s={type:"stylesheet",instance:s,count:1,state:l},a.set(i,s)}}}function Xx(e,t){Ur.X(e,t);var n=es;if(n&&e){var r=Ti(n).hoistableScripts,a=ts(e),i=r.get(a);i||(i=n.querySelector(wl(a)),i||(e=mt({src:e,async:!0},t),(t=Zn.get(a))&&th(e,t),i=n.createElement("script"),Xt(i),en(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}function Qx(e,t){Ur.M(e,t);var n=es;if(n&&e){var r=Ti(n).hoistableScripts,a=ts(e),i=r.get(a);i||(i=n.querySelector(wl(a)),i||(e=mt({src:e,async:!0,type:"module"},t),(t=Zn.get(a))&&th(e,t),i=n.createElement("script"),Xt(i),en(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(a,i))}}function hg(e,t,n,r){var a=(a=ea.current)?Go(a):null;if(!a)throw Error(k(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Vi(n.href),n=Ti(a).hoistableStyles,r=n.get(t),r||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Vi(n.href);var i=Ti(a).hoistableStyles,s=i.get(e);if(s||(a=a.ownerDocument||a,s={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,s),(i=a.querySelector(_l(e)))&&!i._p&&(s.instance=i,s.state.loading=5),Zn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Zn.set(e,n),i||Jx(a,e,n,s.state))),t&&r===null)throw Error(k(528,""));return s}if(t&&r!==null)throw Error(k(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ts(n),n=Ti(a).hoistableScripts,r=n.get(t),r||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(k(444,e))}}function Vi(e){return'href="'+Kn(e)+'"'}function _l(e){return'link[rel="stylesheet"]['+e+"]"}function c0(e){return mt({},e,{"data-precedence":e.precedence,precedence:null})}function Jx(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),en(t,"link",n),Xt(t),e.head.appendChild(t))}function ts(e){return'[src="'+Kn(e)+'"]'}function wl(e){return"script[async]"+e}function mg(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Kn(n.href)+'"]');if(r)return t.instance=r,Xt(r),r;var a=mt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),Xt(r),en(r,"style",a),yo(r,n.precedence,e),t.instance=r;case"stylesheet":a=Vi(n.href);var i=e.querySelector(_l(a));if(i)return t.state.loading|=4,t.instance=i,Xt(i),i;r=c0(n),(a=Zn.get(a))&&eh(r,a),i=(e.ownerDocument||e).createElement("link"),Xt(i);var s=i;return s._p=new Promise(function(l,o){s.onload=l,s.onerror=o}),en(i,"link",r),t.state.loading|=4,yo(i,n.precedence,e),t.instance=i;case"script":return i=ts(n.src),(a=e.querySelector(wl(i)))?(t.instance=a,Xt(a),a):(r=n,(a=Zn.get(i))&&(r=mt({},n),th(r,a)),e=e.ownerDocument||e,a=e.createElement("script"),Xt(a),en(a,"link",r),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(k(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,yo(r,n.precedence,e));return t.instance}function yo(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=r.length?r[r.length-1]:null,i=a,s=0;s<r.length;s++){var l=r[s];if(l.dataset.precedence===t)i=l;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function eh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function th(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var vo=null;function gg(e,t,n){if(vo===null){var r=new Map,a=vo=new Map;a.set(n,r)}else a=vo,r=a.get(n),r||(r=new Map,a.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),a=0;a<n.length;a++){var i=n[a];if(!(i[ml]||i[Zt]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var s=i.getAttribute(t)||"";s=e+s;var l=r.get(s);l?l.push(i):r.set(s,[i])}}return r}function yg(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Px(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function u0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function Zx(e,t,n,r){if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var a=Vi(r.href),i=t.querySelector(_l(a));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ko.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,Xt(i);return}i=t.ownerDocument||t,r=c0(r),(a=Zn.get(a))&&eh(r,a),i=i.createElement("link"),Xt(i);var s=i;s._p=new Promise(function(l,o){s.onload=l,s.onerror=o}),en(i,"link",r),n.instance=i}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Ko.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Du=0;function Fx(e,t){return e.stylesheets&&e.count===0&&po(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&po(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4+t);0<e.imgBytes&&Du===0&&(Du=62500*Rx());var a=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&po(e,e.stylesheets),e.unsuspend)){var i=e.unsuspend;e.unsuspend=null,i()}},(e.imgBytes>Du?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(a)}}:null}function Ko(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)po(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Xo=null;function po(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Xo=new Map,t.forEach(Wx,e),Xo=null,Ko.call(e))}function Wx(e,t){if(!(t.state.loading&4)){var n=Xo.get(e);if(n)var r=n.get(null);else{n=new Map,Xo.set(e,n);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var s=a[i];(s.nodeName==="LINK"||s.getAttribute("media")!=="not all")&&(n.set(s.dataset.precedence,s),r=s)}r&&n.set(null,r)}a=t.instance,s=a.getAttribute("data-precedence"),i=n.get(s)||r,i===r&&n.set(null,a),n.set(s,a),this.count++,r=Ko.bind(this),a.addEventListener("load",r),a.addEventListener("error",r),i?i.parentNode.insertBefore(a,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var nl={$$typeof:Er,Provider:null,Consumer:null,_currentValue:Ca,_currentValue2:Ca,_threadCount:0};function e1(e,t,n,r,a,i,s,l,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.hiddenUpdates=Zc(null),this.identifierPrefix=r,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function d0(e,t,n,r,a,i,s,l,o,u,f,d){return e=new e1(e,t,n,s,o,u,f,d,l),t=1,i===!0&&(t|=24),i=Dn(3,null,null,t),e.current=i,i.stateNode=e,t=Of(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},Nf(i),e}function f0(e){return e?(e=wi,e):wi}function h0(e,t,n,r,a,i){a=f0(a),r.context===null?r.context=a:r.pendingContext=a,r=na(t),r.payload={element:n},i=i===void 0?null:i,i!==null&&(r.callback=i),n=ra(e,r,t),n!==null&&(bn(n,e,t),Ns(n,e,t))}function vg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function nh(e,t){vg(e,t),(e=e.alternate)&&vg(e,t)}function m0(e){if(e.tag===13||e.tag===31){var t=Xa(e,67108864);t!==null&&bn(t,e,67108864),nh(e,67108864)}}function pg(e){if(e.tag===13||e.tag===31){var t=Un();t=hf(t);var n=Xa(e,t);n!==null&&bn(n,e,t),nh(e,t)}}var Qo=!0;function t1(e,t,n,r){var a=be.T;be.T=null;var i=Ge.p;try{Ge.p=2,rh(e,t,n,r)}finally{Ge.p=i,be.T=a}}function n1(e,t,n,r){var a=be.T;be.T=null;var i=Ge.p;try{Ge.p=8,rh(e,t,n,r)}finally{Ge.p=i,be.T=a}}function rh(e,t,n,r){if(Qo){var a=Bd(r);if(a===null)ju(e,t,r,Jo,n),bg(e,r);else if(a1(a,e,t,n,r))r.stopPropagation();else if(bg(e,r),t&4&&-1<r1.indexOf(e)){for(;a!==null;){var i=Pi(a);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var s=wa(i.pendingLanes);if(s!==0){var l=i;for(l.pendingLanes|=2,l.entangledLanes|=2;s;){var o=1<<31-kn(s);l.entanglements[1]|=o,s&=~o}mr(i),!(Ve&6)&&(Bo=Rn()+500,bl(0))}}break;case 31:case 13:l=Xa(i,2),l!==null&&bn(l,i,2),Sc(),nh(i,2)}if(i=Bd(r),i===null&&ju(e,t,r,Jo,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else ju(e,t,r,null,n)}}function Bd(e){return e=vf(e),ah(e)}var Jo=null;function ah(e){if(Jo=null,e=gi(e),e!==null){var t=ul(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=ky(t),e!==null)return e;e=null}else if(n===31){if(e=Uy(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Jo=e,null}function g0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Iw()){case Ly:return 2;case Hy:return 8;case Eo:case Yw:return 32;case qy:return 268435456;default:return 32}default:return 32}}var Ld=!1,sa=null,la=null,oa=null,rl=new Map,al=new Map,Xr=[],r1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bg(e,t){switch(e){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":oa=null;break;case"pointerover":case"pointerout":rl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":al.delete(t.pointerId)}}function ps(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Pi(t),t!==null&&m0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function a1(e,t,n,r,a){switch(t){case"focusin":return sa=ps(sa,e,t,n,r,a),!0;case"dragenter":return la=ps(la,e,t,n,r,a),!0;case"mouseover":return oa=ps(oa,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return rl.set(i,ps(rl.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,al.set(i,ps(al.get(i)||null,e,t,n,r,a)),!0}return!1}function y0(e){var t=gi(e.target);if(t!==null){var n=ul(t);if(n!==null){if(t=n.tag,t===13){if(t=ky(n),t!==null){e.blockedOn=t,rm(e.priority,function(){pg(n)});return}}else if(t===31){if(t=Uy(n),t!==null){e.blockedOn=t,rm(e.priority,function(){pg(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Bd(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);rd=r,n.target.dispatchEvent(r),rd=null}else return t=Pi(n),t!==null&&m0(t),e.blockedOn=n,!1;t.shift()}return!0}function _g(e,t,n){bo(e)&&n.delete(t)}function i1(){Ld=!1,sa!==null&&bo(sa)&&(sa=null),la!==null&&bo(la)&&(la=null),oa!==null&&bo(oa)&&(oa=null),rl.forEach(_g),al.forEach(_g)}function Vl(e,t){e.blockedOn===t&&(e.blockedOn=null,Ld||(Ld=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,i1)))}var Gl=null;function wg(e){Gl!==e&&(Gl=e,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,function(){Gl===e&&(Gl=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],a=e[t+2];if(typeof r!="function"){if(ah(r||n)===null)continue;break}var i=Pi(n);i!==null&&(e.splice(t,3),t-=3,bd(i,{pending:!0,data:a,method:n.method,action:r},r,a))}}))}function Gi(e){function t(o){return Vl(o,e)}sa!==null&&Vl(sa,e),la!==null&&Vl(la,e),oa!==null&&Vl(oa,e),rl.forEach(t),al.forEach(t);for(var n=0;n<Xr.length;n++){var r=Xr[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Xr.length&&(n=Xr[0],n.blockedOn===null);)y0(n),n.blockedOn===null&&Xr.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var a=n[r],i=n[r+1],s=a[_n]||null;if(typeof i=="function")s||wg(n);else if(s){var l=null;if(i&&i.hasAttribute("formAction")){if(a=i,s=i[_n]||null)l=s.formAction;else if(ah(a)!==null)continue}else l=s.action;typeof l=="function"?n[r+1]=l:(n.splice(r,3),r-=3),wg(n)}}}function v0(){function e(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(s){return a=s})},focusReset:"manual",scroll:"manual"})}function t(){a!==null&&(a(),a=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,a=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),a!==null&&(a(),a=null)}}}function ih(e){this._internalRoot=e}Tc.prototype.render=ih.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(k(409));var n=t.current,r=Un();h0(n,r,e,t,null,null)};Tc.prototype.unmount=ih.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;h0(e.current,2,null,e,null,null),Sc(),t[Ji]=null}};function Tc(e){this._internalRoot=e}Tc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ky();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xr.length&&t!==0&&t<Xr[n].priority;n++);Xr.splice(n,0,e),n===0&&y0(e)}};var Sg=Ry.version;if(Sg!=="19.2.0")throw Error(k(527,Sg,"19.2.0"));Ge.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(k(188)):(e=Object.keys(e).join(","),Error(k(268,e)));return e=Uw(t),e=e!==null?zy(e):null,e=e===null?null:e.stateNode,e};var s1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:be,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kl.isDisabled&&Kl.supportsFiber)try{dl=Kl.inject(s1),Mn=Kl}catch{}}oc.createRoot=function(e,t){if(!My(e))throw Error(k(299));var n=!1,r="",a=op,i=cp,s=up;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=d0(e,1,!1,null,null,n,r,null,a,i,s,v0),e[Ji]=t.current,Wf(e),new ih(t)};oc.hydrateRoot=function(e,t,n){if(!My(e))throw Error(k(299));var r=!1,a="",i=op,s=cp,l=up,o=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onUncaughtError!==void 0&&(i=n.onUncaughtError),n.onCaughtError!==void 0&&(s=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.formState!==void 0&&(o=n.formState)),t=d0(e,1,!0,t,n??null,r,a,o,i,s,l,v0),t.context=f0(null),n=t.current,r=Un(),r=hf(r),a=na(r),a.callback=null,ra(n,a,r),n=r,t.current.lanes=n,hl(t,n),mr(t),e[Ji]=t.current,Wf(e),new Tc(t)};oc.version="19.2.0";function p0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p0)}catch(e){console.error(e)}}p0(),Ty.exports=oc;var l1=Ty.exports,Hd=function(e,t){return Hd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])},Hd(e,t)};function b0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Hd(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Po=function(){return Po=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Po.apply(this,arguments)};function ns(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function _0(e,t,n,r){var a=arguments.length,i=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(i=(a<3?s(i):a>3?s(t,n,i):s(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function w0(e,t){return function(n,r){t(n,r,e)}}function S0(e,t,n,r,a,i){function s(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var l=r.kind,o=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,f=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),d,m=!1,h=n.length-1;h>=0;h--){var p={};for(var b in r)p[b]=b==="access"?{}:r[b];for(var b in r.access)p.access[b]=r.access[b];p.addInitializer=function(v){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(v||null))};var x=(0,n[h])(l==="accessor"?{get:f.get,set:f.set}:f[o],p);if(l==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(d=s(x.get))&&(f.get=d),(d=s(x.set))&&(f.set=d),(d=s(x.init))&&a.unshift(d)}else(d=s(x))&&(l==="field"?a.unshift(d):f[o]=d)}u&&Object.defineProperty(u,r.name,f),m=!0}function x0(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0}function E0(e){return typeof e=="symbol"?e:"".concat(e)}function T0(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function j0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function se(e,t,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function l(f){try{u(r.next(f))}catch(d){s(d)}}function o(f){try{u(r.throw(f))}catch(d){s(d)}}function u(f){f.done?i(f.value):a(f.value).then(l,o)}u((r=r.apply(e,t||[])).next())})}function O0(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(u){return function(f){return o([u,f])}}function o(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(r=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(f){u=[6,f],a=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var jc=Object.create?function(e,t,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function D0(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&jc(t,e,n)}function Zo(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function sh(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function A0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(sh(arguments[t]));return e}function N0(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;t<n;t++)for(var i=arguments[t],s=0,l=i.length;s<l;s++,a++)r[a]=i[s];return r}function C0(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function Ki(e){return this instanceof Ki?(this.v=e,this):new Ki(e)}function R0(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),a[Symbol.asyncIterator]=function(){return this},a;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function l(h,p){r[h]&&(a[h]=function(b){return new Promise(function(x,v){i.push([h,b,x,v])>1||o(h,b)})},p&&(a[h]=p(a[h])))}function o(h,p){try{u(r[h](p))}catch(b){m(i[0][3],b)}}function u(h){h.value instanceof Ki?Promise.resolve(h.value.v).then(f,d):m(i[0][2],h)}function f(h){o("next",h)}function d(h){o("throw",h)}function m(h,p){h(p),i.shift(),i.length&&o(i[0][0],i[0][1])}}function M0(e){var t,n;return t={},r("next"),r("throw",function(a){throw a}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(a,i){t[a]=e[a]?function(s){return(n=!n)?{value:Ki(e[a](s)),done:!1}:i?i(s):s}:i}}function k0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Zo=="function"?Zo(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(l,o){s=e[i](s),a(l,o,s.done,s.value)})}}function a(i,s,l,o){Promise.resolve(o).then(function(u){i({value:u,done:l})},s)}}function U0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var o1=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},qd=function(e){return qd=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},qd(e)};function z0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=qd(e),r=0;r<n.length;r++)n[r]!=="default"&&jc(t,e,n[r]);return o1(t,e),t}function $0(e){return e&&e.__esModule?e:{default:e}}function B0(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function L0(e,t,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(e,n):a?a.value=n:t.set(e,n),n}function H0(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function q0(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var c1=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function I0(e){function t(i){e.error=e.hasError?new c1(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var n,r=0;function a(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(a);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(a,function(s){return t(s),a()})}else r|=1}catch(s){t(s)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function Y0(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,a,i,s){return r?t?".jsx":".js":a&&(!i||!s)?n:a+i+"."+s.toLowerCase()+"js"}):e}const u1={__extends:b0,__assign:Po,__rest:ns,__decorate:_0,__param:w0,__esDecorate:S0,__runInitializers:x0,__propKey:E0,__setFunctionName:T0,__metadata:j0,__awaiter:se,__generator:O0,__createBinding:jc,__exportStar:D0,__values:Zo,__read:sh,__spread:A0,__spreadArrays:N0,__spreadArray:C0,__await:Ki,__asyncGenerator:R0,__asyncDelegator:M0,__asyncValues:k0,__makeTemplateObject:U0,__importStar:z0,__importDefault:$0,__classPrivateFieldGet:B0,__classPrivateFieldSet:L0,__classPrivateFieldIn:H0,__addDisposableResource:q0,__disposeResources:I0,__rewriteRelativeImportExtension:Y0},d1=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:q0,get __assign(){return Po},__asyncDelegator:M0,__asyncGenerator:R0,__asyncValues:k0,__await:Ki,__awaiter:se,__classPrivateFieldGet:B0,__classPrivateFieldIn:H0,__classPrivateFieldSet:L0,__createBinding:jc,__decorate:_0,__disposeResources:I0,__esDecorate:S0,__exportStar:D0,__extends:b0,__generator:O0,__importDefault:$0,__importStar:z0,__makeTemplateObject:U0,__metadata:j0,__param:w0,__propKey:E0,__read:sh,__rest:ns,__rewriteRelativeImportExtension:Y0,__runInitializers:x0,__setFunctionName:T0,__spread:A0,__spreadArray:C0,__spreadArrays:N0,__values:Zo,default:u1},Symbol.toStringTag,{value:"Module"})),f1="modulepreload",h1=function(e){return"/todo-note/"+e},xg={},rs=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));a=Promise.allSettled(n.map(o=>{if(o=h1(o),o in xg)return;xg[o]=!0;const u=o.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":f1,u||(d.as="script"),d.crossOrigin="",d.href=o,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((m,h)=>{d.addEventListener("load",m),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}function i(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return a.then(s=>{for(const l of s||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},m1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>rs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ja);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class lh extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class Eg extends lh{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Tg extends lh{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class jg extends lh{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Id;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Id||(Id={}));class g1{constructor(t,{headers:n={},customFetch:r,region:a=Id.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=m1(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return se(this,arguments,void 0,function*(n,r={}){var a;try{const{headers:i,method:s,body:l,signal:o}=r;let u={},{region:f}=r;f||(f=this.region);const d=new URL(`${this.url}/${n}`);f&&f!=="any"&&(u["x-region"]=f,d.searchParams.set("forceFunctionRegion",f));let m;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)):m=l;const h=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:m,signal:o}).catch(v=>{throw v.name==="AbortError"?v:new Eg(v)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new Tg(h);if(!h.ok)throw new jg(h);let b=((a=h.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),x;return b==="application/json"?x=yield h.json():b==="application/octet-stream"||b==="application/pdf"?x=yield h.blob():b==="text/event-stream"?x=h:b==="multipart/form-data"?x=yield h.formData():x=yield h.text(),{data:x,error:null,response:h}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Eg(i)}:{data:null,error:i,response:i instanceof jg||i instanceof Tg?i.context:void 0}}})}}var ln={};const as=gy(d1);var Xl={},Ql={},Jl={},Pl={},Zl={},y1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Xi=y1();const v1=Xi.fetch,V0=Xi.fetch.bind(Xi),G0=Xi.Headers,p1=Xi.Request,b1=Xi.Response,Ja=Object.freeze(Object.defineProperty({__proto__:null,Headers:G0,Request:p1,Response:b1,default:V0,fetch:v1},Symbol.toStringTag,{value:"Module"})),_1=gy(Ja);var Fl={},Og;function K0(){if(Og)return Fl;Og=1,Object.defineProperty(Fl,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Fl.default=e,Fl}var Dg;function X0(){if(Dg)return Zl;Dg=1,Object.defineProperty(Zl,"__esModule",{value:!0});const e=as,t=e.__importDefault(_1),n=e.__importDefault(K0());class r{constructor(i){var s,l;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(l=i.isMaybeSingle)!==null&&l!==void 0?l:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var f,d,m,h;let p=null,b=null,x=null,v=u.status,g=u.statusText;if(u.ok){if(this.method!=="HEAD"){const j=await u.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?b=j:b=JSON.parse(j))}const w=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),E=(m=u.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");w&&E&&E.length>1&&(x=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(p={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,x=null,v=406,g="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const w=await u.text();try{p=JSON.parse(w),Array.isArray(p)&&u.status===404&&(b=[],p=null,v=200,g="OK")}catch{u.status===404&&w===""?(v=204,g="No Content"):p={message:w}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,v=200,g="OK"),p&&this.shouldThrowOnError)throw new n.default(p)}return{error:p,data:b,count:x,status:v,statusText:g}});return this.shouldThrowOnError||(o=o.catch(u=>{var f,d,m;return{error:{message:`${(f=u==null?void 0:u.name)!==null&&f!==void 0?f:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(d=u==null?void 0:u.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),o.then(i,s)}returns(){return this}overrideTypes(){return this}}return Zl.default=r,Zl}var Ag;function Q0(){if(Ag)return Pl;Ag=1,Object.defineProperty(Pl,"__esModule",{value:!0});const t=as.__importDefault(X0());class n extends t.default{select(a){let i=!1;const s=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:s,foreignTable:l,referencedTable:o=l}={}){const u=o?`${o}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${a}.${i?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:s=i}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:s,referencedTable:l=s}={}){const o=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:s=!1,buffers:l=!1,wal:o=!1,format:u="text"}={}){var f;const d=[a?"analyze":null,i?"verbose":null,s?"settings":null,l?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Pl.default=n,Pl}var Ng;function oh(){if(Ng)return Jl;Ng=1,Object.defineProperty(Jl,"__esModule",{value:!0});const t=as.__importDefault(Q0()),n=new RegExp("[,()]");class r extends t.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const l=Array.from(new Set(s)).map(o=>typeof o=="string"&&n.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:l,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${f}.${s}`),this}match(i){return Object.entries(i).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(i,s,l){return this.url.searchParams.append(i,`not.${s}.${l}`),this}or(i,{foreignTable:s,referencedTable:l=s}={}){const o=l?`${l}.or`:"or";return this.url.searchParams.append(o,`(${i})`),this}filter(i,s,l){return this.url.searchParams.append(i,`${s}.${l}`),this}}return Jl.default=r,Jl}var Cg;function J0(){if(Cg)return Ql;Cg=1,Object.defineProperty(Ql,"__esModule",{value:!0});const t=as.__importDefault(oh());class n{constructor(a,{headers:i={},schema:s,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=s,this.fetch=l}select(a,i){const{head:s=!1,count:l}=i??{},o=s?"HEAD":"GET";let u=!1;const f=(a??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",f),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:s=!0}={}){var l;const o="POST";if(i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(u.length>0){const f=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:s=!1,count:l,defaultToNull:o=!0}={}){var u;const f="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const d=a.reduce((m,h)=>m.concat(Object.keys(h)),[]);if(d.length>0){const m=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var s;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:a}={}){var i;const s="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Ql.default=n,Ql}var Rg;function w1(){if(Rg)return Xl;Rg=1,Object.defineProperty(Xl,"__esModule",{value:!0});const e=as,t=e.__importDefault(J0()),n=e.__importDefault(oh());class r{constructor(i,{headers:s={},schema:l,fetch:o}={}){this.url=i,this.headers=new Headers(s),this.schemaName=l,this.fetch=o}from(i){const s=new URL(`${this.url}/${i}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,s={},{head:l=!1,get:o=!1,count:u}={}){var f;let d;const m=new URL(`${this.url}/rpc/${i}`);let h;l||o?(d=l?"HEAD":"GET",Object.entries(s).filter(([b,x])=>x!==void 0).map(([b,x])=>[b,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([b,x])=>{m.searchParams.append(b,x)})):(d="POST",h=s);const p=new Headers(this.headers);return u&&p.set("Prefer",`count=${u}`),new n.default({method:d,url:m,headers:p,schema:this.schemaName,body:h,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Xl.default=r,Xl}Object.defineProperty(ln,"__esModule",{value:!0});var P0=ln.PostgrestError=sb=ln.PostgrestBuilder=ab=ln.PostgrestTransformBuilder=nb=ln.PostgrestFilterBuilder=eb=ln.PostgrestQueryBuilder=F0=ln.PostgrestClient=void 0;const is=as,Z0=is.__importDefault(w1());var F0=ln.PostgrestClient=Z0.default;const W0=is.__importDefault(J0());var eb=ln.PostgrestQueryBuilder=W0.default;const tb=is.__importDefault(oh());var nb=ln.PostgrestFilterBuilder=tb.default;const rb=is.__importDefault(Q0());var ab=ln.PostgrestTransformBuilder=rb.default;const ib=is.__importDefault(X0());var sb=ln.PostgrestBuilder=ib.default;const lb=is.__importDefault(K0());P0=ln.PostgrestError=lb.default;var ob=ln.default={PostgrestClient:Z0.default,PostgrestQueryBuilder:W0.default,PostgrestFilterBuilder:tb.default,PostgrestTransformBuilder:rb.default,PostgrestBuilder:ib.default,PostgrestError:lb.default};const S1=dw({__proto__:null,get PostgrestBuilder(){return sb},get PostgrestClient(){return F0},get PostgrestError(){return P0},get PostgrestFilterBuilder(){return nb},get PostgrestQueryBuilder(){return eb},get PostgrestTransformBuilder(){return ab},default:ob},[ln]),{PostgrestClient:x1,PostgrestQueryBuilder:iD,PostgrestFilterBuilder:sD,PostgrestTransformBuilder:lD,PostgrestBuilder:oD,PostgrestError:cD}=ob||S1;class E1{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const T1="2.78.0",j1=`realtime-js/${T1}`,O1="1.0.0",Yd=1e4,D1=1e3,A1=100;var Ls;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ls||(Ls={}));var Bt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Bt||(Bt={}));var rr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(rr||(rr={}));var Vd;(function(e){e.websocket="websocket"})(Vd||(Vd={}));var Ta;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ta||(Ta={}));class N1{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),i=n.getUint8(2);let s=this.HEADER_LENGTH+2;const l=r.decode(t.slice(s,s+a));s=s+a;const o=r.decode(t.slice(s,s+i));s=s+i;const u=JSON.parse(r.decode(t.slice(s,t.byteLength)));return{ref:null,topic:l,event:o,payload:u}}}class cb{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(it||(it={}));const Mg=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,s)=>(i[s]=C1(s,e,t,a),i),{}):{}},C1=(e,t,n,r)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,s=n[e];return i&&!r.includes(i)?ub(i,s):Gd(s)},ub=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return U1(t,n)}switch(e){case it.bool:return R1(t);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return M1(t);case it.json:case it.jsonb:return k1(t);case it.timestamp:return z1(t);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return Gd(t);default:return Gd(t)}},Gd=e=>e,R1=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},M1=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},k1=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},U1=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const s=e.slice(1,n);try{i=JSON.parse("["+s+"]")}catch{i=s?s.split(","):[]}return i.map(l=>ub(t,l))}return e},z1=e=>typeof e=="string"?e.replace(" ","T"):e,db=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Au{constructor(t,n,r={},a=Yd){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var kg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(kg||(kg={}));class Hs{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hs.syncState(this.state,a,i,s),this.pendingDiffs.forEach(o=>{this.state=Hs.syncDiff(this.state,o,i,s)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Hs.syncDiff(this.state,a,i,s),l())}),this.onJoin((a,i,s)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:s})}),this.onLeave((a,i,s)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const i=this.cloneDeep(t),s=this.transformState(n),l={},o={};return this.map(i,(u,f)=>{s[u]||(o[u]=f)}),this.map(s,(u,f)=>{const d=i[u];if(d){const m=f.map(x=>x.presence_ref),h=d.map(x=>x.presence_ref),p=f.filter(x=>h.indexOf(x.presence_ref)<0),b=d.filter(x=>m.indexOf(x.presence_ref)<0);p.length>0&&(l[u]=p),b.length>0&&(o[u]=b)}else l[u]=f}),this.syncDiff(i,{joins:l,leaves:o},r,a)}static syncDiff(t,n,r,a){const{joins:i,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,o)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(o),f.length>0){const d=t[l].map(h=>h.presence_ref),m=f.filter(h=>d.indexOf(h.presence_ref)<0);t[l].unshift(...m)}r(l,f,o)}),this.map(s,(l,o)=>{let u=t[l];if(!u)return;const f=o.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[l]=u,a(l,u,o),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ug;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Ug||(Ug={}));var qs;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(qs||(qs={}));var wr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(wr||(wr={}));class ch{constructor(t,n={config:{}},r){var a,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Au(this,rr.join,this.params,this.timeout),this.rejoinTimer=new cb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rr.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new Hs(this),this.broadcastEndpointURL=db(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:s,presence:l,private:o}}=this.params,u=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&a!==void 0?a:[],f=!!this.bindings[qs.PRESENCE]&&this.bindings[qs.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},m={broadcast:s,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:u,private:o};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(wr.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(wr.CLOSED)),this.updateJoinPayload(Object.assign({config:m},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){t==null||t(wr.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,x=(p=b==null?void 0:b.length)!==null&&p!==void 0?p:0,v=[];for(let g=0;g<x;g++){const y=b[g],{filter:{event:w,schema:E,table:j,filter:S}}=y,T=h&&h[g];if(T&&T.event===w&&T.schema===E&&T.table===j&&T.filter===S)v.push(Object.assign(Object.assign({},y),{id:T.id}));else{this.unsubscribe(),this.state=Bt.errored,t==null||t(wr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(wr.SUBSCRIBED);return}}).receive("error",h=>{this.state=Bt.errored,t==null||t(wr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(wr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Bt.joined&&t===qs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let o=l.statusText;try{const u=await l.json();o=u.error||u.message||o}catch{}return Promise.reject(new Error(o))}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:s}=t,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var s,l,o;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((o=(l=(s=this.params)===null||s===void 0?void 0:s.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Bt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new Au(this,rr.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),s}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Au(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>A1){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,i;const s=t.toLocaleLowerCase(),{close:l,error:o,leave:u,join:f}=rr;if(r&&[l,o,u,f].indexOf(s)>=0&&r!==this._joinRef())return;let m=this._onMessage(s,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(h=>{var p,b,x;return((p=h.filter)===null||p===void 0?void 0:p.event)==="*"||((x=(b=h.filter)===null||b===void 0?void 0:b.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===s}).map(h=>h.callback(m,r)):(i=this.bindings[s])===null||i===void 0||i.filter(h=>{var p,b,x,v,g,y;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in h){const w=h.id,E=(p=h.filter)===null||p===void 0?void 0:p.event;return w&&((b=n.ids)===null||b===void 0?void 0:b.includes(w))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const w=(g=(v=h==null?void 0:h.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return w==="*"||w===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===s}).map(h=>{if(typeof m=="object"&&"ids"in m){const p=m.data,{schema:b,table:x,commit_timestamp:v,type:g,errors:y}=p;m=Object.assign(Object.assign({},{schema:b,table:x,commit_timestamp:v,eventType:g,new:{},old:{},errors:y}),this._getPayloadRecords(p))}h.callback(m,r)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ch.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(rr.close,{},t)}_onError(t){this._on(rr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Mg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Mg(t.columns,t.old_record)),n}}const Nu=()=>{},Wl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$1=[1e3,2e3,5e3,1e4],B1=1e4,L1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class H1{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yd,this.transport=null,this.heartbeatIntervalMs=Wl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Nu,this.ref=0,this.reconnectTimer=null,this.logger=Nu,this.conn=null,this.sendBuffer=[],this.serializer=new N1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...s)=>rs(async()=>{const{default:l}=await Promise.resolve().then(()=>Ja);return{default:l}},void 0).then(({default:l})=>l(...s)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...s)=>i(...s)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Vd.websocket}`,this.httpEndpoint=db(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=E1.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:O1}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ls.connecting:return Ta.Connecting;case Ls.open:return Ta.Open;case Ls.closing:return Ta.Closing;default:return Ta.Closed}}isConnected(){return this.connectionState()===Ta.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new ch(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:a,ref:i}=t,s=()=>{this.encode(t,l=>{var o;(o=this.conn)===null||o===void 0||o.send(l)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(D1,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Wl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:s}=n,l=s?`(${s})`:"",o=i.status||"";this.log("receive",`${o} ${r} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,i,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(rr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([L1],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:j1};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(rr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new cb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,i,s,l,o,u,f;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Yd,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Wl.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Nu,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=t==null?void 0:t.reconnectAfterMs)!==null&&o!==void 0?o:d=>$1[d-1]||B1,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(d,m)=>m(JSON.stringify(d)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class uh extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function St(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class q1 extends uh{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Kd extends uh{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const dh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>rs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ja);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},I1=()=>se(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rs(()=>Promise.resolve().then(()=>Ja),void 0)).Response:Response}),Xd=e=>{if(Array.isArray(e))return e.map(n=>Xd(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Xd(r)}),t},Y1=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Cu=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},V1=(e,t,n)=>se(void 0,void 0,void 0,function*(){const r=yield I1();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const i=e.status||500,s=(a==null?void 0:a.statusCode)||i+"";t(new q1(Cu(a),i,s))}).catch(a=>{t(new Kd(Cu(a),a))}):t(new Kd(Cu(e),e))}),G1=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(Y1(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function Sl(e,t,n,r,a,i){return se(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(n,G1(t,r,a,i)).then(o=>{if(!o.ok)throw o;return r!=null&&r.noResolveJson?o:o.json()}).then(o=>s(o)).catch(o=>V1(o,l,r))})})}function il(e,t,n,r){return se(this,void 0,void 0,function*(){return Sl(e,"GET",t,n,r)})}function tr(e,t,n,r,a){return se(this,void 0,void 0,function*(){return Sl(e,"POST",t,r,a,n)})}function Qd(e,t,n,r,a){return se(this,void 0,void 0,function*(){return Sl(e,"PUT",t,r,a,n)})}function K1(e,t,n,r){return se(this,void 0,void 0,function*(){return Sl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function fh(e,t,n,r,a){return se(this,void 0,void 0,function*(){return Sl(e,"DELETE",t,r,a,n)})}class X1{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return se(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(St(t))return{data:null,error:t};throw t}})}}var fb;class Q1{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[fb]="BlobDownloadBuilder",this.promise=null}asStream(){return new X1(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return se(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(St(t))return{data:null,error:t};throw t}})}}fb=Symbol.toStringTag;const J1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class P1{constructor(t,n={},r,a){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=dh(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,a){return se(this,void 0,void 0,function*(){try{let i;const s=Object.assign(Object.assign({},zg),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const o=s.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",s.cacheControl),o&&i.append("metadata",this.encodeMetadata(o))):(i=r,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,o&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),d=yield(t=="PUT"?Qd:tr)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:l},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(St(i))return{data:null,error:i};throw i}})}upload(t,n,r){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return se(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),s=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",n);try{let o;const u=Object.assign({upsert:zg.upsert},a),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",u.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",u.cacheControl)):(o=r,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield Qd(this.fetch,l.toString(),o,{headers:f});return{data:{path:i,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(St(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(t,n){return se(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield tr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),s=new URL(this.url+i.url),l=s.searchParams.get("token");if(!l)throw new uh("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}update(t,n,r){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return se(this,void 0,void 0,function*(){try{return{data:yield tr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(St(a))return{data:null,error:a};throw a}})}copy(t,n,r){return se(this,void 0,void 0,function*(){try{return{data:{path:(yield tr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(St(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return se(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield tr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${s}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(St(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return se(this,void 0,void 0,function*(){try{const a=yield tr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(St(a))return{data:null,error:a};throw a}})}download(t,n){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=i?`?${i}`:"",l=this._getFinalPath(t),o=()=>il(this.fetch,`${this.url}/${a}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new Q1(o,this.shouldThrowOnError)}info(t){return se(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield il(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Xd(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}exists(t){return se(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield K1(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r)&&r instanceof Kd){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&a.push(o);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return se(this,void 0,void 0,function*(){try{return{data:yield fh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}list(t,n,r){return se(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},J1),n),{prefix:t||""});return{data:yield tr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(St(a))return{data:null,error:a};throw a}})}listV2(t,n){return se(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield tr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const hb="2.78.0",mb={"X-Client-Info":`storage-js/${hb}`};class Z1{constructor(t,n={},r,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mb),n),this.fetch=dh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return se(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(t);return{data:yield il(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}getBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield il(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}createBucket(t){return se(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield tr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(St(a))return{data:null,error:a};throw a}})}updateBucket(t,n){return se(this,void 0,void 0,function*(){try{return{data:yield Qd(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(St(r))return{data:null,error:r};throw r}})}emptyBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield tr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}deleteBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield fh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class F1{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},mb),n),this.fetch=dh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield tr(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}listBuckets(t){return se(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),a=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield il(this.fetch,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}deleteBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield fh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(St(n))return{data:null,error:n};throw n}})}}const hh={"X-Client-Info":`storage-js/${hb}`,"Content-Type":"application/json"};class gb extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function An(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Ru extends gb{constructor(t,n,r){super(t),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class W1 extends gb{constructor(t,n){super(t),this.name="StorageVectorsUnknownError",this.originalError=n}}var $g;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})($g||($g={}));const mh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>rs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ja);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},eE=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Bg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tE=(e,t,n)=>se(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(s=>{const l=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||a+"";t(new Ru(Bg(s),a,l))}).catch(()=>{const s=a+"",l=i.statusText||`HTTP ${a} error`;t(new Ru(l,a,s))});else{const s=a+"",l=i.statusText||`HTTP ${a} error`;t(new Ru(l,a,s))}}else t(new W1(Bg(e),e))}),nE=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(eE(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,Object.assign(Object.assign({},a),n)):a};function rE(e,t,n,r,a,i){return se(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(n,nE(t,r,a,i)).then(o=>{if(!o.ok)throw o;if(r!=null&&r.noResolveJson)return o;const u=o.headers.get("content-type");return!u||!u.includes("application/json")?{}:o.json()}).then(o=>s(o)).catch(o=>tE(o,l,r))})})}function Nn(e,t,n,r,a){return se(this,void 0,void 0,function*(){return rE(e,"POST",t,r,a,n)})}class aE{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hh),n),this.fetch=mh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return se(this,void 0,void 0,function*(){try{return{data:(yield Nn(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}getIndex(t,n){return se(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}listIndexes(t){return se(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}deleteIndex(t,n){return se(this,void 0,void 0,function*(){try{return{data:(yield Nn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(An(r))return{data:null,error:r};throw r}})}}class iE{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hh),n),this.fetch=mh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return se(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Nn(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}getVectors(t){return se(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}listVectors(t){return se(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Nn(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}queryVectors(t){return se(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}deleteVectors(t){return se(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Nn(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}}class sE{constructor(t,n={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hh),n),this.fetch=mh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return se(this,void 0,void 0,function*(){try{return{data:(yield Nn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}getBucket(t){return se(this,void 0,void 0,function*(){try{return{data:yield Nn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}listBuckets(){return se(this,arguments,void 0,function*(t={}){try{return{data:yield Nn(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}deleteBucket(t){return se(this,void 0,void 0,function*(){try{return{data:(yield Nn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}}class lE extends sE{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new oE(this.url,this.headers,t,this.fetch)}}class oE extends aE{constructor(t,n,r,a){super(t,n,a),this.vectorBucketName=r}createIndex(t){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return se(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return se(this,arguments,void 0,function*(n={}){return t.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return se(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return se(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new cE(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class cE extends iE{constructor(t,n,r,a,i){super(t,n,i),this.vectorBucketName=r,this.indexName=a}putVectors(t){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return se(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return se(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return se(this,arguments,void 0,function*(n={}){return t.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return se(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return se(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class uE extends Z1{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new P1(this.url,this.headers,t,this.fetch)}get vectors(){return new lE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new F1(this.url+"/iceberg",this.headers,this.fetch)}}const dE="2.78.0";let Es="";typeof Deno<"u"?Es="deno":typeof document<"u"?Es="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Es="react-native":Es="node";const fE={"X-Client-Info":`supabase-js-${Es}/${dE}`},hE={headers:fE},mE={schema:"public"},gE={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yE={},vE=e=>{let t;return e?t=e:typeof fetch>"u"?t=V0:t=fetch,(...n)=>t(...n)},pE=()=>typeof Headers>"u"?G0:Headers,bE=(e,t,n)=>{const r=vE(n),a=pE();return async(i,s)=>{var l;const o=(l=await t())!==null&&l!==void 0?l:e;let u=new a(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${o}`),r(i,Object.assign(Object.assign({},s),{headers:u}))}};function _E(e){return e.endsWith("/")?e:e+"/"}function wE(e,t){var n,r;const{db:a,auth:i,realtime:s,global:l}=e,{db:o,auth:u,realtime:f,global:d}=t,m={db:Object.assign(Object.assign({},o),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},f),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function SE(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_E(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const yb="2.78.0",ui=30*1e3,Jd=3,Mu=Jd*ui,xE="http://localhost:9999",EE="supabase.auth.token",TE={"X-Client-Info":`gotrue-js/${yb}`},Pd="X-Supabase-Api-Version",vb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},jE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,OE=10*60*1e3;class sl extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function de(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class DE extends sl{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function AE(e){return de(e)&&e.name==="AuthApiError"}class ja extends sl{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ga extends sl{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Wn extends ga{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function NE(e){return de(e)&&e.name==="AuthSessionMissingError"}class ni extends ga{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class eo extends ga{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class to extends ga{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function CE(e){return de(e)&&e.name==="AuthImplicitGrantRedirectError"}class Lg extends ga{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Zd extends ga{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function ku(e){return de(e)&&e.name==="AuthRetryableFetchError"}class Hg extends ga{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Fd extends ga{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Fo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qg=` 	
\r=`.split(""),RE=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<qg.length;t+=1)e[qg[t].charCodeAt(0)]=-2;for(let t=0;t<Fo.length;t+=1)e[Fo[t].charCodeAt(0)]=t;return e})();function Ig(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Fo[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Fo[r]),t.queuedBits-=6}}function pb(e,t,n){const r=RE[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Yg(e){const t=[],n=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=s=>{UE(s,r,n)};for(let s=0;s<e.length;s+=1)pb(e.charCodeAt(s),a,i);return t.join("")}function ME(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function kE(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}ME(r,t)}}function UE(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ri(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)pb(e.charCodeAt(a),n,r);return new Uint8Array(t)}function zE(e){const t=[];return kE(e,n=>t.push(n)),new Uint8Array(t)}function Na(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>Ig(a,n,r)),Ig(null,n,r),t.join("")}function $E(e){return Math.round(Date.now()/1e3)+e}function BE(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const an=()=>typeof window<"u"&&typeof document<"u",pa={tested:!1,writable:!1},bb=()=>{if(!an())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pa.tested)return pa.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),pa.tested=!0,pa.writable=!0}catch{pa.tested=!0,pa.writable=!1}return pa.writable};function LE(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const _b=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>rs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ja);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},HE=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",di=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ba=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Lr=async(e,t)=>{await e.removeItem(t)};class Oc{constructor(){this.promise=new Oc.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Oc.promiseConstructor=Promise;function Uu(e){const t=e.split(".");if(t.length!==3)throw new Fd("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!jE.test(t[r]))throw new Fd("JWT not in base64url format");return{header:JSON.parse(Yg(t[0])),payload:JSON.parse(Yg(t[1])),signature:Ri(t[2]),raw:{header:t[0],payload:t[1]}}}async function qE(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function IE(e,t){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const s=await e(i);if(!t(i,null,s)){r(s);return}}catch(s){if(!t(i,s)){a(s);return}}})()})}function YE(e){return("0"+e.toString(16)).substr(-2)}function VE(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,YE).join("")}async function GE(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function KE(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await GE(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ri(e,t,n=!1){const r=VE();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await di(e,`${t}-code-verifier`,a);const i=await KE(r);return[i,r===i?"plain":"s256"]}const XE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function QE(e){const t=e.headers.get(Pd);if(!t||!t.match(XE))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function JE(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function PE(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ZE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ai(e){if(!ZE.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function zu(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function FE(e,t){return new Proxy(e,{get:(n,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,a)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,a)}})}function Vg(e){return JSON.parse(JSON.stringify(e))}const Ea=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),WE=[502,503,504];async function Gg(e){var t;if(!HE(e))throw new Zd(Ea(e),0);if(WE.includes(e.status))throw new Zd(Ea(e),e.status);let n;try{n=await e.json()}catch(i){throw new ja(Ea(i),i)}let r;const a=QE(e);if(a&&a.getTime()>=vb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Hg(Ea(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Wn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,s)=>i&&typeof s=="string",!0))throw new Hg(Ea(n),e.status,n.weak_password.reasons);throw new DE(Ea(n),e.status||500,r)}const eT=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function pe(e,t,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[Pd]||(i[Pd]=vb["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const s=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(s.redirect_to=r.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",o=await tT(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(o):{data:Object.assign({},o),error:null}}async function tT(e,t,n,r,a,i){const s=eT(t,r,a,i);let l;try{l=await e(n,Object.assign({},s))}catch(o){throw console.error(o),new Zd(Ea(o),0)}if(l.ok||await Gg(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(o){await Gg(o)}}function er(e){var t;let n=null;aT(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=$E(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Kg(e){const t=er(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Qr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function nT(e){return{data:e,error:null}}function rT(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=e,s=ns(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},o=Object.assign({},s);return{data:{properties:l,user:o},error:null}}function Xg(e){return e}function aT(e){return e.access_token&&e.refresh_token&&e.expires_in}const $u=["global","local","others"];class iT{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=_b(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=$u[0]){if($u.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$u.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Qr})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=ns(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:rT,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(de(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Qr})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,i,s,l,o;try{const u={nextPage:null,lastPage:0,total:0},f=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Xg});if(f.error)throw f.error;const d=await f.json(),m=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(o=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return h.length>0&&(h.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);u[`${x}Page`]=b}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(de(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ai(t);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Qr})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ai(t);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Qr})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){ai(t);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Qr})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){ai(t.userId);try{const{data:n,error:r}=await pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ai(t.userId),ai(t.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,a,i,s,l,o;try{const u={nextPage:null,lastPage:0,total:0},f=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Xg});if(f.error)throw f.error;const d=await f.json(),m=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,h=(o=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&o!==void 0?o:[];return h.length>0&&(h.forEach(p=>{const b=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);u[`${x}Page`]=b}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(de(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}}function Qg(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ii={debug:!!(globalThis&&bb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wb extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class sT extends wb{}async function lT(e,t,n){ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ii.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new sT(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ii.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function oT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Sb(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function cT(e){return parseInt(e,16)}function uT(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function dT(e){var t;const{chainId:n,domain:r,expirationTime:a,issuedAt:i=new Date,nonce:s,notBefore:l,requestId:o,resources:u,scheme:f,uri:d,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const h=Sb(e.address),p=f?`${f}://${r}`:r,b=e.statement?`${e.statement}
`:"",x=`${p} wants you to sign in with your Ethereum account:
${h}

${b}`;let v=`URI: ${d}
Version: ${m}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${i.toISOString()}`;if(a&&(v+=`
Expiration Time: ${a.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),o&&(v+=`
Request ID: ${o}`),u){let g=`
Resources:`;for(const y of u){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);g+=`
- ${y}`}v+=g}return`${x}
${v}`}class Nt extends Error{constructor({message:t,code:n,cause:r,name:a}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=a??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Wo extends Nt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function fT({error:e,options:t}){var n,r,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Nt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Nt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Nt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Nt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Nt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Nt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Nt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Nt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(xb(s)){if(i.rp.id!==s)return new Nt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Nt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function hT({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Nt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Nt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(xb(r)){if(n.rpId!==r)return new Nt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Nt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Nt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Nt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class mT{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const gT=new mT;function yT(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,a=ns(e,["challenge","user","excludeCredentials"]),i=Ri(t).buffer,s=Object.assign(Object.assign({},n),{id:Ri(n.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:s});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const u=r[o];l.excludeCredentials[o]=Object.assign(Object.assign({},u),{id:Ri(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function vT(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=ns(e,["challenge","allowCredentials"]),a=Ri(t).buffer,i=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const l=n[s];i.allowCredentials[s]=Object.assign(Object.assign({},l),{id:Ri(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function pT(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Na(new Uint8Array(e.response.attestationObject)),clientDataJSON:Na(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bT(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Na(new Uint8Array(a.authenticatorData)),clientDataJSON:Na(new Uint8Array(a.clientDataJSON)),signature:Na(new Uint8Array(a.signature)),userHandle:a.userHandle?Na(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function xb(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Jg(){var e,t;return!!(an()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function _T(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wo("Browser returned unexpected credential type",t)}:{data:null,error:new Wo("Empty credential response",t)}}catch(t){return{data:null,error:fT({error:t,options:e})}}}async function wT(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wo("Browser returned unexpected credential type",t)}:{data:null,error:new Wo("Empty credential response",t)}}catch(t){return{data:null,error:hT({error:t,options:e})}}}const ST={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},xT={userVerification:"preferred",hints:["security-key"]};function ec(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of e)if(a)for(const i in a){const s=a[i];if(s!==void 0)if(Array.isArray(s))r[i]=s;else if(n(s))r[i]=s;else if(t(s)){const l=r[i];t(l)?r[i]=ec(l,s):r[i]=ec(s)}else r[i]=s}return r}function ET(e,t){return ec(ST,e,t||{})}function TT(e,t){return ec(xT,e,t||{})}class jT{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:a},i){try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!s)return{data:null,error:l};const o=a??gT.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=ET(s.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:d}=await _T({publicKey:u,signal:o});return f?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}case"request":{const u=TT(s.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:d}=await wT(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:o}));return f?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}}}catch(s){return de(s)?{data:null,error:s}:{data:null,error:new ja("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}},i){if(!n)return{data:null,error:new sl("rpId is required for WebAuthn authentication")};try{if(!Jg())return{data:null,error:new ja("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:a},{request:i});if(!s)return{data:null,error:l};const{webauthn:o}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:o.type,rpId:n,rpOrigins:r,credential_response:o.credential_response}})}catch(s){return de(s)?{data:null,error:s}:{data:null,error:new ja("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a},i){if(!n)return{data:null,error:new sl("rpId is required for WebAuthn registration")};try{if(!Jg())return{data:null,error:new ja("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(f=>{var d;return(d=f.data)===null||d===void 0?void 0:d.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:l};const{data:o,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:a},{create:i});return o?this._verify({factorId:s.id,challengeId:o.challengeId,webauthn:{rpId:n,rpOrigins:r,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:u}}catch(s){return de(s)?{data:null,error:s}:{data:null,error:new ja("Unexpected error in register",s)}}}}oT();const OT={url:xE,storageKey:EE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:TE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Pg(e,t,n){return await n()}const si={};class ll{get jwks(){var t,n;return(n=(t=si[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){si[this.storageKey]=Object.assign(Object.assign({},si[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=si[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){si[this.storageKey]=Object.assign(Object.assign({},si[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ll.nextInstanceID,ll.nextInstanceID+=1,this.instanceID>0&&an()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},OT),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new iT({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=_b(a.fetch),this.lock=a.lock||Pg,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:an()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=lT:this.lock=Pg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new jT(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:bb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qg(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Qg(this.memoryStorage)),an()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yb}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=LE(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),an()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),CE(i)){const o=(t=i.details)===null||t===void 0?void 0:t.code;if(o==="identity_already_exists"||o==="identity_not_found"||o==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:s,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",l),await this._saveSession(s),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return de(n)?{error:n}:{error:new ja("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:er}),{data:s,error:l}=i;if(l||!s)return{data:{user:null,session:null},error:l};const o=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(i){if(de(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,a;try{let i;if("email"in t){const{email:f,password:d,options:m}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await ri(this.storage,this.storageKey)),i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:f,password:d,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:h,code_challenge_method:p},xform:er})}else if("phone"in t){const{phone:f,password:d,options:m}=t;i=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:er})}else throw new eo("You must provide either an email or phone number and a password");const{data:s,error:l}=i;if(l||!s)return{data:{user:null,session:null},error:l};const o=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(i){if(de(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:s,options:l}=t;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Kg})}else if("phone"in t){const{phone:i,password:s,options:l}=t;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Kg})}else throw new eo("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ni}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,a,i,s,l,o,u,f,d,m;let h,p;if("message"in t)h=t.message,p=t.signature;else{const{chain:b,wallet:x,statement:v,options:g}=t;let y;if(an())if(typeof x=="object")y=x;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")y=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=x}const w=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),E=await y.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Sb(E[0]);let S=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!S){const A=await y.request({method:"eth_chainId"});S=cT(A)}const T={domain:w.host,address:j,statement:v,uri:w.href,version:"1",chainId:S,nonce:(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=g==null?void 0:g.signInWithEthereum)===null||f===void 0?void 0:f.resources};h=dT(T),p=await y.request({method:"personal_sign",params:[uT(h),j]})}try{const{data:b,error:x}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:p},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:er});if(x)throw x;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new ni}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:x})}catch(b){if(de(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(t){var n,r,a,i,s,l,o,u,f,d,m,h;let p,b;if("message"in t)p=t.message,b=t.signature;else{const{chain:x,wallet:v,statement:g,options:y}=t;let w;if(an())if(typeof v=="object")w=v;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))w=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const E=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const j=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),g?{statement:g}:null));let S;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")S=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)S=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),b=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${E.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(a=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((s=y==null?void 0:y.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((d=(f=y==null?void 0:y.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...y.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const j=await w.signMessage(new TextEncoder().encode(p),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=j}}try{const{data:x,error:v}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Na(b)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:er});if(v)throw v;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new ni}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:v})}catch(x){if(de(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await ba(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:i,error:s}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:er});if(await Lr(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ni}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:s})}catch(i){if(de(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:i,nonce:s}=t,l=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:er}),{data:o,error:u}=l;return u?{data:{user:null,session:null},error:u}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new ni}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:u})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,i,s;try{if("email"in t){const{email:l,options:o}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await ri(this.storage,this.storageKey));const{error:d}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=o==null?void 0:o.data)!==null&&n!==void 0?n:{},create_user:(r=o==null?void 0:o.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:o}=t,{data:u,error:f}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=o==null?void 0:o.data)!==null&&a!==void 0?a:{},create_user:(i=o==null?void 0:o.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken},channel:(s=o==null?void 0:o.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new eo("You must provide either an email or phone number.")}catch(l){if(de(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,i;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:l}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:er});if(l)throw l;if(!s)throw new Error("An error occurred on token verification.");const o=s.session,u=s.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:u,session:o},error:null}}catch(a){if(de(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let i=null,s=null;return this.flowType==="pkce"&&([i,s]=await ri(this.storage,this.storageKey)),await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:s}),headers:this.headers,xform:nT})}catch(i){if(de(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Wn;const{error:a}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(de(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:i}=t,{error:s}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in t){const{phone:r,type:a,options:i}=t,{data:s,error:l}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:l}}throw new eo("You must provide either an email or phone number and a type")}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ba(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Mu:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const s=await ba(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=zu()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=FE(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Qr}):await this._useSession(async n=>{var r,a,i;const{data:s,error:l}=n;if(l)throw l;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wn}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Qr})})}catch(n){if(de(n))return NE(n)&&(await this._removeSession(),await Lr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Wn;const s=a.session;let l=null,o=null;this.flowType==="pkce"&&t.email!=null&&([l,o]=await ri(this.storage,this.storageKey));const{data:u,error:f}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:o}),jwt:s.access_token,xform:Qr});if(f)throw f;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Wn;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:s}=Uu(t.access_token);if(s.exp&&(r=s.exp,a=r<=n),a){const{data:l,error:o}=await this._callRefreshToken(t.refresh_token);if(o)return{data:{user:null,session:null},error:o};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:o}=await this._getUser(t.access_token);if(o)throw o;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(de(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:s,error:l}=n;if(l)throw l;t=(r=s.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Wn;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!an())throw new to("No browser detected.");if(t.error||t.error_description||t.error_code)throw new to(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Lg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new to("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Lg("No code detected.");const{data:g,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:s,expires_in:l,expires_at:o,token_type:u}=t;if(!i||!l||!s||!u)throw new to("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let m=f+d;o&&(m=parseInt(o));const h=m-f;h*1e3<=ui&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const p=m-d;f-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,m,f):f-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,m,f);const{data:b,error:x}=await this._getUser(i);if(x)throw x;const v={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:d,expires_at:m,refresh_token:s,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(r){if(de(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ba(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{error:i};const s=(r=a.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:l}=await this.admin.signOut(s,t);if(l&&!(AE(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Lr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=BE(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await ri(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(de(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var s,l,o,u,f;const{data:d,error:m}=i;if(m)throw m;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",h,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(a)throw a;return an()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(de(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:a,data:{session:i}}=n;if(a)throw a;const{options:s,provider:l,token:o,access_token:u,nonce:f}=t,d=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:o,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:er}),{data:m,error:h}=d;return h?{data:{user:null,session:null},error:h}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new ni}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),{data:m,error:h})}catch(a){if(de(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:s}=n;if(s)throw s;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await IE(async a=>(a>0&&await qE(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:er})),(a,i)=>{const s=200*Math.pow(2,a);return i&&ku(i)&&Date.now()+s-r<ui})}catch(r){if(this._debug(n,"error",r),de(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),an()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await ba(this.storage,this.storageKey);if(a&&this.userStorage){let s=await ba(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},await di(this.userStorage,this.storageKey+"-user",s)),a.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:zu()}else if(a&&!a.user&&!a.user){const s=await ba(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(a.user=s.user,await Lr(this.storage,this.storageKey+"-user"),await di(this.storage,this.storageKey,a)):a.user=zu()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Mu;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Mu}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:s}=await this._callRefreshToken(a.refresh_token);s&&(console.error(s),ku(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:l}=await this._getUser(a.access_token);!l&&(s!=null&&s.user)?(a.user=s.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Wn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Oc;const{data:i,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new Wn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),de(i)){const s={data:null,error:i};return ku(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],s=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(o){i.push(o)}});if(await Promise.all(s),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await di(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=Vg(a);await di(this.storage,this.storageKey,i)}else{const a=Vg(n);await di(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Lr(this.storage,this.storageKey),await Lr(this.storage,this.storageKey+"-code-verifier"),await Lr(this.storage,this.storageKey+"-user"),this.userStorage&&await Lr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&an()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ui);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/ui);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ui}ms, refresh threshold is ${Jd} ticks`),a<=Jd&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof wb)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!an()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,s]=await ri(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await pe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:s}=n;if(s)return{data:null,error:s};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:o,error:u}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&o.type==="totp"&&(!((a=o==null?void 0:o.totp)===null||a===void 0)&&a.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?pT(t.webauthn.credential_response):bT(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:o}=await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:o})})}catch(n){if(de(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const s=await pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});if(s.error)return s;const{data:l}=s;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:yT(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:vT(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(de(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:a}=await this.getSession();if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Uu(r.access_token);let s=null;i.aal&&(s=i.aal);let l=s;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:a}=n;return a?{data:null,error:a}:r?await pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):{data:null,error:new Wn}})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:a},error:i}=r;if(i)return{data:null,error:i};if(!a)return{data:null,error:new Wn};const s=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&an()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(de(r))return{data:null,error:r};throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:a},error:i}=r;if(i)return{data:null,error:i};if(!a)return{data:null,error:new Wn};const s=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&an()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(de(r))return{data:null,error:r};throw r}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+OE>a)return r;const{data:i,error:s}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:h,error:p}=await this.getSession();if(p||!h.session)return{data:null,error:p};r=h.session.access_token}const{header:a,payload:i,signature:s,raw:{header:l,payload:o}}=Uu(r);n!=null&&n.allowExpired||JE(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:h}=await this.getUser(r);if(h)throw h;return{data:{claims:i,header:a,signature:s},error:null}}const f=PE(a.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,s,zE(`${l}.${o}`)))throw new Fd("Invalid JWT signature");return{data:{claims:i,header:a,signature:s},error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}}ll.nextInstanceID=0;const DT=ll;class AT extends DT{constructor(t){super(t)}}class NT{constructor(t,n,r){var a,i,s;this.supabaseUrl=t,this.supabaseKey=n;const l=SE(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const o=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:mE,realtime:yE,auth:Object.assign(Object.assign({},gE),{storageKey:o}),global:hE},f=wE(r??{},u);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(d,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=f.auth)!==null&&s!==void 0?s:{},this.headers,f.global.fetch),this.fetch=bE(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new x1(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new uE(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new g1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,storageKey:s,flowType:l,lock:o,debug:u},f,d){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new AT({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),f),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,flowType:l,lock:o,debug:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(h=>h.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new H1(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const CT=(e,t,n)=>new NT(e,t,n);function RT(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}RT()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const MT="https://vqpubtahhvtkftafdlrp.supabase.co",kT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZxcHVidGFoaHZ0a2Z0YWZkbHJwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMjQ2NjUsImV4cCI6MjA3NzgwMDY2NX0.o2905IF2CWRJ-krYtA6MnL7_KALlNiwD211Sw-of7mI",ge=CT(MT,kT);function UT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const Dc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ss(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function gh(e){return"nodeType"in e}function un(e){var t,n;return e?ss(e)?e:gh(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function yh(e){const{Document:t}=un(e);return e instanceof t}function xl(e){return ss(e)?!1:e instanceof un(e).HTMLElement}function Eb(e){return e instanceof un(e).SVGElement}function ls(e){return e?ss(e)?e.document:gh(e)?yh(e)?e:xl(e)||Eb(e)?e.ownerDocument:document:document:document}const ar=Dc?_.useLayoutEffect:_.useEffect;function Ac(e){const t=_.useRef(e);return ar(()=>{t.current=e}),_.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function zT(){const e=_.useRef(null),t=_.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=_.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function ol(e,t){t===void 0&&(t=[e]);const n=_.useRef(e);return ar(()=>{n.current!==e&&(n.current=e)},t),n}function El(e,t){const n=_.useRef();return _.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function tc(e){const t=Ac(e),n=_.useRef(null),r=_.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function nc(e){const t=_.useRef();return _.useEffect(()=>{t.current=e},[e]),t.current}let Bu={};function Tl(e,t){return _.useMemo(()=>{if(t)return t;const n=Bu[e]==null?0:Bu[e]+1;return Bu[e]=n,e+"-"+n},[e,t])}function Tb(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,s)=>{const l=Object.entries(s);for(const[o,u]of l){const f=i[o];f!=null&&(i[o]=f+e*u)}return i},{...t})}}const Mi=Tb(1),cl=Tb(-1);function $T(e){return"clientX"in e&&"clientY"in e}function Nc(e){if(!e)return!1;const{KeyboardEvent:t}=un(e.target);return t&&e instanceof t}function BT(e){if(!e)return!1;const{TouchEvent:t}=un(e.target);return t&&e instanceof t}function rc(e){if(BT(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return $T(e)?{x:e.clientX,y:e.clientY}:null}const Ia=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ia.Translate.toString(e),Ia.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Zg="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function LT(e){return e.matches(Zg)?e:e.querySelector(Zg)}const HT={display:"none"};function qT(e){let{id:t,value:n}=e;return ft.createElement("div",{id:t,style:HT},n)}function IT(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ft.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function YT(){const[e,t]=_.useState("");return{announce:_.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const jb=_.createContext(null);function VT(e){const t=_.useContext(jb);_.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function GT(){const[e]=_.useState(()=>new Set),t=_.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[_.useCallback(r=>{let{type:a,event:i}=r;e.forEach(s=>{var l;return(l=s[a])==null?void 0:l.call(s,i)})},[e]),t]}const KT={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},XT={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function QT(e){let{announcements:t=XT,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=KT}=e;const{announce:i,announcement:s}=YT(),l=Tl("DndLiveRegion"),[o,u]=_.useState(!1);if(_.useEffect(()=>{u(!0)},[]),VT(_.useMemo(()=>({onDragStart(d){let{active:m}=d;i(t.onDragStart({active:m}))},onDragMove(d){let{active:m,over:h}=d;t.onDragMove&&i(t.onDragMove({active:m,over:h}))},onDragOver(d){let{active:m,over:h}=d;i(t.onDragOver({active:m,over:h}))},onDragEnd(d){let{active:m,over:h}=d;i(t.onDragEnd({active:m,over:h}))},onDragCancel(d){let{active:m,over:h}=d;i(t.onDragCancel({active:m,over:h}))}}),[i,t])),!o)return null;const f=ft.createElement(ft.Fragment,null,ft.createElement(qT,{id:r,value:a.draggable}),ft.createElement(IT,{id:l,announcement:s}));return n?Aa.createPortal(f,n):f}var Lt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Lt||(Lt={}));function ac(){}function ki(e,t){return _.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function vh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ir=Object.freeze({x:0,y:0});function Ob(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function JT(e,t){const n=rc(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Db(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function PT(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Fg(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function Ab(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Wg(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const ph=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=Wg(t,t.left,t.top),i=[];for(const s of r){const{id:l}=s,o=n.get(l);if(o){const u=Ob(Wg(o),a);i.push({id:l,data:{droppableContainer:s,value:u}})}}return i.sort(Db)},ZT=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=Fg(t),i=[];for(const s of r){const{id:l}=s,o=n.get(l);if(o){const u=Fg(o),f=a.reduce((m,h,p)=>m+Ob(u[p],h),0),d=Number((f/4).toFixed(4));i.push({id:l,data:{droppableContainer:s,value:d}})}}return i.sort(Db)};function FT(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-r,l=i-n;if(r<a&&n<i){const o=t.width*t.height,u=e.width*e.height,f=s*l,d=f/(o+u-f);return Number(d.toFixed(4))}return 0}const WT=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:s}=i,l=n.get(s);if(l){const o=FT(l,t);o>0&&a.push({id:s,data:{droppableContainer:i,value:o}})}}return a.sort(PT)};function ej(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Nb(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ir}function tj(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((s,l)=>({...s,top:s.top+e*l.y,bottom:s.bottom+e*l.y,left:s.left+e*l.x,right:s.right+e*l.x}),{...n})}}const nj=tj(1);function Cb(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function rj(e,t,n){const r=Cb(t);if(!r)return e;const{scaleX:a,scaleY:i,x:s,y:l}=r,o=e.left-s-(1-a)*parseFloat(n),u=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=a?e.width/a:e.width,d=i?e.height/i:e.height;return{width:f,height:d,top:u,right:o+f,bottom:u+d,left:o}}const aj={ignoreTransform:!1};function os(e,t){t===void 0&&(t=aj);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=un(e).getComputedStyle(e);u&&(n=rj(n,u,f))}const{top:r,left:a,width:i,height:s,bottom:l,right:o}=n;return{top:r,left:a,width:i,height:s,bottom:l,right:o}}function ey(e){return os(e,{ignoreTransform:!0})}function ij(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function sj(e,t){return t===void 0&&(t=un(e).getComputedStyle(e)),t.position==="fixed"}function lj(e,t){t===void 0&&(t=un(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function Cc(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(yh(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!xl(a)||Eb(a)||n.includes(a))return n;const i=un(e).getComputedStyle(a);return a!==e&&lj(a,i)&&n.push(a),sj(a,i)?n:r(a.parentNode)}return e?r(e):n}function Rb(e){const[t]=Cc(e,1);return t??null}function Lu(e){return!Dc||!e?null:ss(e)?e:gh(e)?yh(e)||e===ls(e).scrollingElement?window:xl(e)?e:null:null}function Mb(e){return ss(e)?e.scrollX:e.scrollLeft}function kb(e){return ss(e)?e.scrollY:e.scrollTop}function Wd(e){return{x:Mb(e),y:kb(e)}}var Kt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Kt||(Kt={}));function Ub(e){return!Dc||!e?!1:e===document.scrollingElement}function zb(e){const t={x:0,y:0},n=Ub(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:s,isRight:l,maxScroll:r,minScroll:t}}const oj={x:.2,y:.2};function cj(e,t,n,r,a){let{top:i,left:s,right:l,bottom:o}=n;r===void 0&&(r=10),a===void 0&&(a=oj);const{isTop:u,isBottom:f,isLeft:d,isRight:m}=zb(e),h={x:0,y:0},p={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+b.height?(h.y=Kt.Backward,p.y=r*Math.abs((t.top+b.height-i)/b.height)):!f&&o>=t.bottom-b.height&&(h.y=Kt.Forward,p.y=r*Math.abs((t.bottom-b.height-o)/b.height)),!m&&l>=t.right-b.width?(h.x=Kt.Forward,p.x=r*Math.abs((t.right-b.width-l)/b.width)):!d&&s<=t.left+b.width&&(h.x=Kt.Backward,p.x=r*Math.abs((t.left+b.width-s)/b.width)),{direction:h,speed:p}}function uj(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function $b(e){return e.reduce((t,n)=>Mi(t,Wd(n)),ir)}function dj(e){return e.reduce((t,n)=>t+Mb(n),0)}function fj(e){return e.reduce((t,n)=>t+kb(n),0)}function Bb(e,t){if(t===void 0&&(t=os),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);Rb(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const hj=[["x",["left","right"],dj],["y",["top","bottom"],fj]];class bh{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Cc(n),a=$b(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,l]of hj)for(const o of s)Object.defineProperty(this,o,{get:()=>{const u=l(r),f=a[i]-u;return this.rect[o]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Is{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function mj(e){const{EventTarget:t}=un(e);return e instanceof t?e:ls(e)}function Hu(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var In;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(In||(In={}));function ty(e){e.preventDefault()}function gj(e){e.stopPropagation()}var Be;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Be||(Be={}));const Lb={start:[Be.Space,Be.Enter],cancel:[Be.Esc],end:[Be.Space,Be.Enter,Be.Tab]},yj=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Be.Right:return{...n,x:n.x+25};case Be.Left:return{...n,x:n.x-25};case Be.Down:return{...n,y:n.y+25};case Be.Up:return{...n,y:n.y-25}}};class Rc{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Is(ls(n)),this.windowListeners=new Is(un(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(In.Resize,this.handleCancel),this.windowListeners.add(In.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(In.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Bb(r),n(ir)}handleKeyDown(t){if(Nc(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=Lb,coordinateGetter:s=yj,scrollBehavior:l="smooth"}=a,{code:o}=t;if(i.end.includes(o)){this.handleEnd(t);return}if(i.cancel.includes(o)){this.handleCancel(t);return}const{collisionRect:u}=r.current,f=u?{x:u.left,y:u.top}:ir;this.referenceCoordinates||(this.referenceCoordinates=f);const d=s(t,{active:n,context:r.current,currentCoordinates:f});if(d){const m=cl(d,f),h={x:0,y:0},{scrollableAncestors:p}=r.current;for(const b of p){const x=t.code,{isTop:v,isRight:g,isLeft:y,isBottom:w,maxScroll:E,minScroll:j}=zb(b),S=uj(b),T={x:Math.min(x===Be.Right?S.right-S.width/2:S.right,Math.max(x===Be.Right?S.left:S.left+S.width/2,d.x)),y:Math.min(x===Be.Down?S.bottom-S.height/2:S.bottom,Math.max(x===Be.Down?S.top:S.top+S.height/2,d.y))},A=x===Be.Right&&!g||x===Be.Left&&!y,O=x===Be.Down&&!w||x===Be.Up&&!v;if(A&&T.x!==d.x){const N=b.scrollLeft+m.x,V=x===Be.Right&&N<=E.x||x===Be.Left&&N>=j.x;if(V&&!m.y){b.scrollTo({left:N,behavior:l});return}V?h.x=b.scrollLeft-N:h.x=x===Be.Right?b.scrollLeft-E.x:b.scrollLeft-j.x,h.x&&b.scrollBy({left:-h.x,behavior:l});break}else if(O&&T.y!==d.y){const N=b.scrollTop+m.y,V=x===Be.Down&&N<=E.y||x===Be.Up&&N>=j.y;if(V&&!m.x){b.scrollTo({top:N,behavior:l});return}V?h.y=b.scrollTop-N:h.y=x===Be.Down?b.scrollTop-E.y:b.scrollTop-j.y,h.y&&b.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(t,Mi(cl(d,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Rc.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Lb,onActivation:a}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function ny(e){return!!(e&&"distance"in e)}function ry(e){return!!(e&&"delay"in e)}class _h{constructor(t,n,r){var a;r===void 0&&(r=mj(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=ls(s),this.documentListeners=new Is(this.document),this.listeners=new Is(r),this.windowListeners=new Is(un(s)),this.initialCoordinates=(a=rc(i))!=null?a:ir,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(In.Resize,this.handleCancel),this.windowListeners.add(In.DragStart,ty),this.windowListeners.add(In.VisibilityChange,this.handleCancel),this.windowListeners.add(In.ContextMenu,ty),this.documentListeners.add(In.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ry(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(ny(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(In.Click,gj,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(In.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:l}}=i;if(!a)return;const o=(n=rc(t))!=null?n:ir,u=cl(a,o);if(!r&&l){if(ny(l)){if(l.tolerance!=null&&Hu(u,l.tolerance))return this.handleCancel();if(Hu(u,l.distance))return this.handleStart()}if(ry(l)&&Hu(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),s(o)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Be.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const vj={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class jl extends _h{constructor(t){const{event:n}=t,r=ls(n.target);super(t,vj,r)}}jl.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const pj={move:{name:"mousemove"},end:{name:"mouseup"}};var ef;(function(e){e[e.RightClick=2]="RightClick"})(ef||(ef={}));class bj extends _h{constructor(t){super(t,pj,ls(t.event.target))}}bj.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===ef.RightClick?!1:(r==null||r({event:n}),!0)}}];const qu={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Hb extends _h{constructor(t){super(t,qu)}static setup(){return window.addEventListener(qu.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(qu.move.name,t)};function t(){}}}Hb.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var Ys;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Ys||(Ys={}));var ic;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ic||(ic={}));function _j(e){let{acceleration:t,activator:n=Ys.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:s=5,order:l=ic.TreeOrder,pointerCoordinates:o,scrollableAncestors:u,scrollableAncestorRects:f,delta:d,threshold:m}=e;const h=Sj({delta:d,disabled:!i}),[p,b]=zT(),x=_.useRef({x:0,y:0}),v=_.useRef({x:0,y:0}),g=_.useMemo(()=>{switch(n){case Ys.Pointer:return o?{top:o.y,bottom:o.y,left:o.x,right:o.x}:null;case Ys.DraggableRect:return a}},[n,a,o]),y=_.useRef(null),w=_.useCallback(()=>{const j=y.current;if(!j)return;const S=x.current.x*v.current.x,T=x.current.y*v.current.y;j.scrollBy(S,T)},[]),E=_.useMemo(()=>l===ic.TreeOrder?[...u].reverse():u,[l,u]);_.useEffect(()=>{if(!i||!u.length||!g){b();return}for(const j of E){if((r==null?void 0:r(j))===!1)continue;const S=u.indexOf(j),T=f[S];if(!T)continue;const{direction:A,speed:O}=cj(j,T,g,t,m);for(const N of["x","y"])h[N][A[N]]||(O[N]=0,A[N]=0);if(O.x>0||O.y>0){b(),y.current=j,p(w,s),x.current=O,v.current=A;return}}x.current={x:0,y:0},v.current={x:0,y:0},b()},[t,w,r,b,i,s,JSON.stringify(g),JSON.stringify(h),p,u,E,f,JSON.stringify(m)])}const wj={x:{[Kt.Backward]:!1,[Kt.Forward]:!1},y:{[Kt.Backward]:!1,[Kt.Forward]:!1}};function Sj(e){let{delta:t,disabled:n}=e;const r=nc(t);return El(a=>{if(n||!r||!a)return wj;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Kt.Backward]:a.x[Kt.Backward]||i.x===-1,[Kt.Forward]:a.x[Kt.Forward]||i.x===1},y:{[Kt.Backward]:a.y[Kt.Backward]||i.y===-1,[Kt.Forward]:a.y[Kt.Forward]||i.y===1}}},[n,t,r])}function xj(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return El(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function Ej(e,t){return _.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...i]},[]),[e,t])}var Ya;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ya||(Ya={}));var tf;(function(e){e.Optimized="optimized"})(tf||(tf={}));const ay=new Map;function Tj(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,s]=_.useState(null),{frequency:l,measure:o,strategy:u}=a,f=_.useRef(e),d=x(),m=ol(d),h=_.useCallback(function(v){v===void 0&&(v=[]),!m.current&&s(g=>g===null?v:g.concat(v.filter(y=>!g.includes(y))))},[m]),p=_.useRef(null),b=El(v=>{if(d&&!n)return ay;if(!v||v===ay||f.current!==e||i!=null){const g=new Map;for(let y of e){if(!y)continue;if(i&&i.length>0&&!i.includes(y.id)&&y.rect.current){g.set(y.id,y.rect.current);continue}const w=y.node.current,E=w?new bh(o(w),w):null;y.rect.current=E,E&&g.set(y.id,E)}return g}return v},[e,i,n,d,o]);return _.useEffect(()=>{f.current=e},[e]),_.useEffect(()=>{d||h()},[n,d]),_.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),_.useEffect(()=>{d||typeof l!="number"||p.current!==null||(p.current=setTimeout(()=>{h(),p.current=null},l))},[l,d,h,...r]),{droppableRects:b,measureDroppableContainers:h,measuringScheduled:i!=null};function x(){switch(u){case Ya.Always:return!1;case Ya.BeforeDragging:return n;default:return!n}}}function wh(e,t){return El(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function jj(e,t){return wh(e,t)}function Oj(e){let{callback:t,disabled:n}=e;const r=Ac(t),a=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return _.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Mc(e){let{callback:t,disabled:n}=e;const r=Ac(t),a=_.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return _.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Dj(e){return new bh(os(e),e)}function iy(e,t,n){t===void 0&&(t=Dj);const[r,a]=_.useState(null);function i(){a(o=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=o??n)!=null?u:null}const f=t(e);return JSON.stringify(o)===JSON.stringify(f)?o:f})}const s=Oj({callback(o){if(e)for(const u of o){const{type:f,target:d}=u;if(f==="childList"&&d instanceof HTMLElement&&d.contains(e)){i();break}}}}),l=Mc({callback:i});return ar(()=>{i(),e?(l==null||l.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),s==null||s.disconnect())},[e]),r}function Aj(e){const t=wh(e);return Nb(e,t)}const sy=[];function Nj(e){const t=_.useRef(e),n=El(r=>e?r&&r!==sy&&e&&t.current&&e.parentNode===t.current.parentNode?r:Cc(e):sy,[e]);return _.useEffect(()=>{t.current=e},[e]),n}function Cj(e){const[t,n]=_.useState(null),r=_.useRef(e),a=_.useCallback(i=>{const s=Lu(i.target);s&&n(l=>l?(l.set(s,Wd(s)),new Map(l)):null)},[]);return _.useEffect(()=>{const i=r.current;if(e!==i){s(i);const l=e.map(o=>{const u=Lu(o);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,Wd(u)]):null}).filter(o=>o!=null);n(l.length?new Map(l):null),r.current=e}return()=>{s(e),s(i)};function s(l){l.forEach(o=>{const u=Lu(o);u==null||u.removeEventListener("scroll",a)})}},[a,e]),_.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>Mi(i,s),ir):$b(e):ir,[e,t])}function ly(e,t){t===void 0&&(t=[]);const n=_.useRef(null);return _.useEffect(()=>{n.current=null},t),_.useEffect(()=>{const r=e!==ir;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?cl(e,n.current):ir}function Rj(e){_.useEffect(()=>{if(!Dc)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Mj(e,t){return _.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=s=>{i(s,t)},n},{}),[e,t])}function qb(e){return _.useMemo(()=>e?ij(e):null,[e])}const oy=[];function kj(e,t){t===void 0&&(t=os);const[n]=e,r=qb(n?un(n):null),[a,i]=_.useState(oy);function s(){i(()=>e.length?e.map(o=>Ub(o)?r:new bh(t(o),o)):oy)}const l=Mc({callback:s});return ar(()=>{l==null||l.disconnect(),s(),e.forEach(o=>l==null?void 0:l.observe(o))},[e]),a}function Ib(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return xl(t)?t:e}function Uj(e){let{measure:t}=e;const[n,r]=_.useState(null),a=_.useCallback(u=>{for(const{target:f}of u)if(xl(f)){r(d=>{const m=t(f);return d?{...d,width:m.width,height:m.height}:m});break}},[t]),i=Mc({callback:a}),s=_.useCallback(u=>{const f=Ib(u);i==null||i.disconnect(),f&&(i==null||i.observe(f)),r(f?t(f):null)},[t,i]),[l,o]=tc(s);return _.useMemo(()=>({nodeRef:l,rect:n,setRef:o}),[n,l,o])}const zj=[{sensor:jl,options:{}},{sensor:Rc,options:{}}],$j={current:{}},_o={draggable:{measure:ey},droppable:{measure:ey,strategy:Ya.WhileDragging,frequency:tf.Optimized},dragOverlay:{measure:os}};class Vs extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Bj={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vs,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ac},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:_o,measureDroppableContainers:ac,windowRect:null,measuringScheduled:!1},Yb={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ac,draggableNodes:new Map,over:null,measureDroppableContainers:ac},Ol=_.createContext(Yb),Vb=_.createContext(Bj);function Lj(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vs}}}function Hj(e,t){switch(t.type){case Lt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Lt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Lt.DragEnd:case Lt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Lt.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new Vs(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case Lt.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Vs(e.droppable.containers);return s.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case Lt.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new Vs(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function qj(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=_.useContext(Ol),i=nc(r),s=nc(n==null?void 0:n.id);return _.useEffect(()=>{if(!t&&!r&&i&&s!=null){if(!Nc(i)||document.activeElement===i.target)return;const l=a.get(s);if(!l)return;const{activatorNode:o,node:u}=l;if(!o.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[o.current,u.current]){if(!f)continue;const d=LT(f);if(d){d.focus();break}}})}},[r,t,a,s,i]),null}function Gb(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function Ij(e){return _.useMemo(()=>({draggable:{..._o.draggable,...e==null?void 0:e.draggable},droppable:{..._o.droppable,...e==null?void 0:e.droppable},dragOverlay:{..._o.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Yj(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=_.useRef(!1),{x:s,y:l}=typeof a=="boolean"?{x:a,y:a}:a;ar(()=>{if(!s&&!l||!t){i.current=!1;return}if(i.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),d=Nb(f,r);if(s||(d.x=0),l||(d.y=0),i.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const m=Rb(u);m&&m.scrollBy({top:d.y,left:d.x})}},[t,s,l,r,n])}const kc=_.createContext({...ir,scaleX:1,scaleY:1});var Yr;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Yr||(Yr={}));const Sh=_.memo(function(t){var n,r,a,i;let{id:s,accessibility:l,autoScroll:o=!0,children:u,sensors:f=zj,collisionDetection:d=WT,measuring:m,modifiers:h,...p}=t;const b=_.useReducer(Hj,void 0,Lj),[x,v]=b,[g,y]=GT(),[w,E]=_.useState(Yr.Uninitialized),j=w===Yr.Initialized,{draggable:{active:S,nodes:T,translate:A},droppable:{containers:O}}=x,N=S!=null?T.get(S):null,V=_.useRef({initial:null,translated:null}),Z=_.useMemo(()=>{var Ze;return S!=null?{id:S,data:(Ze=N==null?void 0:N.data)!=null?Ze:$j,rect:V}:null},[S,N]),ne=_.useRef(null),[oe,C]=_.useState(null),[B,Q]=_.useState(null),fe=ol(p,Object.values(p)),ve=Tl("DndDescribedBy",s),gt=_.useMemo(()=>O.getEnabled(),[O]),Ue=Ij(m),{droppableRects:ze,measureDroppableContainers:Ce,measuringScheduled:Re}=Tj(gt,{dragging:j,dependencies:[A.x,A.y],config:Ue.droppable}),He=xj(T,S),I=_.useMemo(()=>B?rc(B):null,[B]),R=dn(),z=jj(He,Ue.draggable.measure);Yj({activeNode:S!=null?T.get(S):null,config:R.layoutShiftCompensation,initialRect:z,measure:Ue.draggable.measure});const M=iy(He,Ue.draggable.measure,z),ee=iy(He?He.parentElement:null),G=_.useRef({activatorEvent:null,active:null,activeNode:He,collisionRect:null,collisions:null,droppableRects:ze,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),re=O.getNodeFor((n=G.current.over)==null?void 0:n.id),U=Uj({measure:Ue.dragOverlay.measure}),ie=(r=U.nodeRef.current)!=null?r:He,he=j?(a=U.rect)!=null?a:M:null,F=!!(U.nodeRef.current&&U.rect),ae=Aj(F?null:M),le=qb(ie?un(ie):null),Ee=Nj(j?re??He:null),Ut=kj(Ee),tt=Gb(h,{transform:{x:A.x-ae.x,y:A.y-ae.y,scaleX:1,scaleY:1},activatorEvent:B,active:Z,activeNodeRect:M,containerNodeRect:ee,draggingNodeRect:he,over:G.current.over,overlayNodeRect:U.rect,scrollableAncestors:Ee,scrollableAncestorRects:Ut,windowRect:le}),It=I?Mi(I,A):null,yt=Cj(Ee),lt=ly(yt),L=ly(yt,[M]),q=Mi(tt,lt),X=he?nj(he,tt):null,te=Z&&X?d({active:Z,collisionRect:X,droppableRects:ze,droppableContainers:gt,pointerCoordinates:It}):null,ce=Ab(te,"id"),[ue,Ye]=_.useState(null),qe=F?tt:Mi(tt,L),ot=ej(qe,(i=ue==null?void 0:ue.rect)!=null?i:null,M),we=_.useRef(null),Ie=_.useCallback((Ze,me)=>{let{sensor:xt,options:nn}=me;if(ne.current==null)return;const Yt=T.get(ne.current);if(!Yt)return;const Vt=Ze.nativeEvent,zt=new xt({active:ne.current,activeNode:Yt,event:Vt,options:nn,context:G,onAbort(Et){if(!T.get(Et))return;const{onDragAbort:hn}=fe.current,tn={id:Et};hn==null||hn(tn),g({type:"onDragAbort",event:tn})},onPending(Et,Sn,hn,tn){if(!T.get(Et))return;const{onDragPending:Ln}=fe.current,K={id:Et,constraint:Sn,initialCoordinates:hn,offset:tn};Ln==null||Ln(K),g({type:"onDragPending",event:K})},onStart(Et){const Sn=ne.current;if(Sn==null)return;const hn=T.get(Sn);if(!hn)return;const{onDragStart:tn}=fe.current,Bn={activatorEvent:Vt,active:{id:Sn,data:hn.data,rect:V}};Aa.unstable_batchedUpdates(()=>{tn==null||tn(Bn),E(Yr.Initializing),v({type:Lt.DragStart,initialCoordinates:Et,active:Sn}),g({type:"onDragStart",event:Bn}),C(we.current),Q(Vt)})},onMove(Et){v({type:Lt.DragMove,coordinates:Et})},onEnd:fn(Lt.DragEnd),onCancel:fn(Lt.DragCancel)});we.current=zt;function fn(Et){return async function(){const{active:hn,collisions:tn,over:Bn,scrollAdjustedTranslate:Ln}=G.current;let K=null;if(hn&&Ln){const{cancelDrop:J}=fe.current;K={activatorEvent:Vt,active:hn,collisions:tn,delta:Ln,over:Bn},Et===Lt.DragEnd&&typeof J=="function"&&await Promise.resolve(J(K))&&(Et=Lt.DragCancel)}ne.current=null,Aa.unstable_batchedUpdates(()=>{v({type:Et}),E(Yr.Uninitialized),Ye(null),C(null),Q(null),we.current=null;const J=Et===Lt.DragEnd?"onDragEnd":"onDragCancel";if(K){const rt=fe.current[J];rt==null||rt(K),g({type:J,event:K})}})}}},[T]),nt=_.useCallback((Ze,me)=>(xt,nn)=>{const Yt=xt.nativeEvent,Vt=T.get(nn);if(ne.current!==null||!Vt||Yt.dndKit||Yt.defaultPrevented)return;const zt={active:Vt};Ze(xt,me.options,zt)===!0&&(Yt.dndKit={capturedBy:me.sensor},ne.current=nn,Ie(xt,me))},[T,Ie]),Pe=Ej(f,nt);Rj(f),ar(()=>{M&&w===Yr.Initializing&&E(Yr.Initialized)},[M,w]),_.useEffect(()=>{const{onDragMove:Ze}=fe.current,{active:me,activatorEvent:xt,collisions:nn,over:Yt}=G.current;if(!me||!xt)return;const Vt={active:me,activatorEvent:xt,collisions:nn,delta:{x:q.x,y:q.y},over:Yt};Aa.unstable_batchedUpdates(()=>{Ze==null||Ze(Vt),g({type:"onDragMove",event:Vt})})},[q.x,q.y]),_.useEffect(()=>{const{active:Ze,activatorEvent:me,collisions:xt,droppableContainers:nn,scrollAdjustedTranslate:Yt}=G.current;if(!Ze||ne.current==null||!me||!Yt)return;const{onDragOver:Vt}=fe.current,zt=nn.get(ce),fn=zt&&zt.rect.current?{id:zt.id,rect:zt.rect.current,data:zt.data,disabled:zt.disabled}:null,Et={active:Ze,activatorEvent:me,collisions:xt,delta:{x:Yt.x,y:Yt.y},over:fn};Aa.unstable_batchedUpdates(()=>{Ye(fn),Vt==null||Vt(Et),g({type:"onDragOver",event:Et})})},[ce]),ar(()=>{G.current={activatorEvent:B,active:Z,activeNode:He,collisionRect:X,collisions:te,droppableRects:ze,draggableNodes:T,draggingNode:ie,draggingNodeRect:he,droppableContainers:O,over:ue,scrollableAncestors:Ee,scrollAdjustedTranslate:q},V.current={initial:he,translated:X}},[Z,He,te,X,T,ie,he,ze,O,ue,Ee,q]),_j({...R,delta:A,draggingRect:X,pointerCoordinates:It,scrollableAncestors:Ee,scrollableAncestorRects:Ut});const bt=_.useMemo(()=>({active:Z,activeNode:He,activeNodeRect:M,activatorEvent:B,collisions:te,containerNodeRect:ee,dragOverlay:U,draggableNodes:T,droppableContainers:O,droppableRects:ze,over:ue,measureDroppableContainers:Ce,scrollableAncestors:Ee,scrollableAncestorRects:Ut,measuringConfiguration:Ue,measuringScheduled:Re,windowRect:le}),[Z,He,M,B,te,ee,U,T,O,ze,ue,Ce,Ee,Ut,Ue,Re,le]),lr=_.useMemo(()=>({activatorEvent:B,activators:Pe,active:Z,activeNodeRect:M,ariaDescribedById:{draggable:ve},dispatch:v,draggableNodes:T,over:ue,measureDroppableContainers:Ce}),[B,Pe,Z,M,v,ve,T,ue,Ce]);return ft.createElement(jb.Provider,{value:y},ft.createElement(Ol.Provider,{value:lr},ft.createElement(Vb.Provider,{value:bt},ft.createElement(kc.Provider,{value:ot},u)),ft.createElement(qj,{disabled:(l==null?void 0:l.restoreFocus)===!1})),ft.createElement(QT,{...l,hiddenTextDescribedById:ve}));function dn(){const Ze=(oe==null?void 0:oe.autoScrollEnabled)===!1,me=typeof o=="object"?o.enabled===!1:o===!1,xt=j&&!Ze&&!me;return typeof o=="object"?{...o,enabled:xt}:{enabled:xt}}}),Vj=_.createContext(null),cy="button",Gj="Draggable";function Kj(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=Tl(Gj),{activators:s,activatorEvent:l,active:o,activeNodeRect:u,ariaDescribedById:f,draggableNodes:d,over:m}=_.useContext(Ol),{role:h=cy,roleDescription:p="draggable",tabIndex:b=0}=a??{},x=(o==null?void 0:o.id)===t,v=_.useContext(x?kc:Vj),[g,y]=tc(),[w,E]=tc(),j=Mj(s,t),S=ol(n);ar(()=>(d.set(t,{id:t,key:i,node:g,activatorNode:w,data:S}),()=>{const A=d.get(t);A&&A.key===i&&d.delete(t)}),[d,t]);const T=_.useMemo(()=>({role:h,tabIndex:b,"aria-disabled":r,"aria-pressed":x&&h===cy?!0:void 0,"aria-roledescription":p,"aria-describedby":f.draggable}),[r,h,b,x,p,f.draggable]);return{active:o,activatorEvent:l,activeNodeRect:u,attributes:T,isDragging:x,listeners:r?void 0:j,node:g,over:m,setNodeRef:y,setActivatorNodeRef:E,transform:v}}function Kb(){return _.useContext(Vb)}const Xj="Droppable",Qj={timeout:25};function Jj(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=Tl(Xj),{active:s,dispatch:l,over:o,measureDroppableContainers:u}=_.useContext(Ol),f=_.useRef({disabled:n}),d=_.useRef(!1),m=_.useRef(null),h=_.useRef(null),{disabled:p,updateMeasurementsFor:b,timeout:x}={...Qj,...a},v=ol(b??r),g=_.useCallback(()=>{if(!d.current){d.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(v.current)?v.current:[v.current]),h.current=null},x)},[x]),y=Mc({callback:g,disabled:p||!s}),w=_.useCallback((T,A)=>{y&&(A&&(y.unobserve(A),d.current=!1),T&&y.observe(T))},[y]),[E,j]=tc(w),S=ol(t);return _.useEffect(()=>{!y||!E.current||(y.disconnect(),d.current=!1,y.observe(E.current))},[E,y]),_.useEffect(()=>(l({type:Lt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:E,rect:m,data:S}}),()=>l({type:Lt.UnregisterDroppable,key:i,id:r})),[r]),_.useEffect(()=>{n!==f.current.disabled&&(l({type:Lt.SetDroppableDisabled,id:r,key:i,disabled:n}),f.current.disabled=n)},[r,i,n,l]),{active:s,rect:m,isOver:(o==null?void 0:o.id)===r,node:E,over:o,setNodeRef:j}}function Pj(e){let{animation:t,children:n}=e;const[r,a]=_.useState(null),[i,s]=_.useState(null),l=nc(n);return!n&&!r&&l&&a(l),ar(()=>{if(!i)return;const o=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(o==null||u==null){a(null);return}Promise.resolve(t(u,i)).then(()=>{a(null)})},[t,r,i]),ft.createElement(ft.Fragment,null,n,r?_.cloneElement(r,{ref:s}):null)}const Zj={x:0,y:0,scaleX:1,scaleY:1};function Fj(e){let{children:t}=e;return ft.createElement(Ol.Provider,{value:Yb},ft.createElement(kc.Provider,{value:Zj},t))}const Wj={position:"fixed",touchAction:"none"},eO=e=>Nc(e)?"transform 250ms ease":void 0,tO=_.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:a,children:i,className:s,rect:l,style:o,transform:u,transition:f=eO}=e;if(!l)return null;const d=a?u:{...u,scaleX:1,scaleY:1},m={...Wj,width:l.width,height:l.height,top:l.top,left:l.left,transform:Ia.Transform.toString(d),transformOrigin:a&&r?JT(r,l):void 0,transition:typeof f=="function"?f(r):f,...o};return ft.createElement(n,{className:s,style:m,ref:t},i)}),nO=e=>t=>{let{active:n,dragOverlay:r}=t;const a={},{styles:i,className:s}=e;if(i!=null&&i.active)for(const[l,o]of Object.entries(i.active))o!==void 0&&(a[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,o));if(i!=null&&i.dragOverlay)for(const[l,o]of Object.entries(i.dragOverlay))o!==void 0&&r.node.style.setProperty(l,o);return s!=null&&s.active&&n.node.classList.add(s.active),s!=null&&s.dragOverlay&&r.node.classList.add(s.dragOverlay),function(){for(const[o,u]of Object.entries(a))n.node.style.setProperty(o,u);s!=null&&s.active&&n.node.classList.remove(s.active)}},rO=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Ia.Transform.toString(t)},{transform:Ia.Transform.toString(n)}]},aO={duration:250,easing:"ease",keyframes:rO,sideEffects:nO({styles:{active:{opacity:"0"}}})};function iO(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:a}=e;return Ac((i,s)=>{if(t===null)return;const l=n.get(i);if(!l)return;const o=l.node.current;if(!o)return;const u=Ib(s);if(!u)return;const{transform:f}=un(s).getComputedStyle(s),d=Cb(f);if(!d)return;const m=typeof t=="function"?t:sO(t);return Bb(o,a.draggable.measure),m({active:{id:i,data:l.data,node:o,rect:a.draggable.measure(o)},draggableNodes:n,dragOverlay:{node:s,rect:a.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:a,transform:d})})}function sO(e){const{duration:t,easing:n,sideEffects:r,keyframes:a}={...aO,...e};return i=>{let{active:s,dragOverlay:l,transform:o,...u}=i;if(!t)return;const f={x:l.rect.left-s.rect.left,y:l.rect.top-s.rect.top},d={scaleX:o.scaleX!==1?s.rect.width*o.scaleX/l.rect.width:1,scaleY:o.scaleY!==1?s.rect.height*o.scaleY/l.rect.height:1},m={x:o.x-f.x,y:o.y-f.y,...d},h=a({...u,active:s,dragOverlay:l,transform:{initial:o,final:m}}),[p]=h,b=h[h.length-1];if(JSON.stringify(p)===JSON.stringify(b))return;const x=r==null?void 0:r({active:s,dragOverlay:l,...u}),v=l.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(g=>{v.onfinish=()=>{x==null||x(),g()}})}}let uy=0;function lO(e){return _.useMemo(()=>{if(e!=null)return uy++,uy},[e])}const xh=ft.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:a,transition:i,modifiers:s,wrapperElement:l="div",className:o,zIndex:u=999}=e;const{activatorEvent:f,active:d,activeNodeRect:m,containerNodeRect:h,draggableNodes:p,droppableContainers:b,dragOverlay:x,over:v,measuringConfiguration:g,scrollableAncestors:y,scrollableAncestorRects:w,windowRect:E}=Kb(),j=_.useContext(kc),S=lO(d==null?void 0:d.id),T=Gb(s,{activatorEvent:f,active:d,activeNodeRect:m,containerNodeRect:h,draggingNodeRect:x.rect,over:v,overlayNodeRect:x.rect,scrollableAncestors:y,scrollableAncestorRects:w,transform:j,windowRect:E}),A=wh(m),O=iO({config:r,draggableNodes:p,droppableContainers:b,measuringConfiguration:g}),N=A?x.setRef:void 0;return ft.createElement(Fj,null,ft.createElement(Pj,{animation:O},d&&S?ft.createElement(tO,{key:S,id:d.id,ref:N,as:l,activatorEvent:f,adjustScale:t,className:o,transition:i,rect:A,style:{zIndex:u,...a},transform:T},n):null))});function Uc(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function oO(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function no(e){return e!==null&&e>=0}function cO(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function uO(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Xb=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=Uc(t,r,n),s=t[a],l=i[a];return!l||!s?null:{x:l.left-s.left,y:l.top-s.top,scaleX:l.width/s.width,scaleY:l.height/s.height}},ro={scaleX:1,scaleY:1},Oa=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:s}=e;const l=(t=i[n])!=null?t:r;if(!l)return null;if(a===n){const u=i[s];return u?{x:0,y:n<s?u.top+u.height-(l.top+l.height):u.top-l.top,...ro}:null}const o=dO(i,a,n);return a>n&&a<=s?{x:0,y:-l.height-o,...ro}:a<n&&a>=s?{x:0,y:l.height+o,...ro}:{x:0,y:0,...ro}};function dO(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const Qb="Sortable",Jb=ft.createContext({activeIndex:-1,containerId:Qb,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Xb,disabled:{draggable:!1,droppable:!1}});function Da(e){let{children:t,id:n,items:r,strategy:a=Xb,disabled:i=!1}=e;const{active:s,dragOverlay:l,droppableRects:o,over:u,measureDroppableContainers:f}=Kb(),d=Tl(Qb,n),m=l.rect!==null,h=_.useMemo(()=>r.map(j=>typeof j=="object"&&"id"in j?j.id:j),[r]),p=s!=null,b=s?h.indexOf(s.id):-1,x=u?h.indexOf(u.id):-1,v=_.useRef(h),g=!cO(h,v.current),y=x!==-1&&b===-1||g,w=uO(i);ar(()=>{g&&p&&f(h)},[g,h,p,f]),_.useEffect(()=>{v.current=h},[h]);const E=_.useMemo(()=>({activeIndex:b,containerId:d,disabled:w,disableTransforms:y,items:h,overIndex:x,useDragOverlay:m,sortedRects:oO(h,o),strategy:a}),[b,d,w.draggable,w.droppable,y,h,x,o,m,a]);return ft.createElement(Jb.Provider,{value:E},t)}const fO=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return Uc(n,r,a).indexOf(t)},hO=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:s,previousItems:l,previousContainerId:o,transition:u}=e;return!u||!r||l!==i&&a===s?!1:n?!0:s!==a&&t===o},mO={duration:200,easing:"ease"},Pb="transform",gO=Ia.Transition.toString({property:Pb,duration:0,easing:"linear"}),yO={roleDescription:"sortable"};function vO(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,s]=_.useState(null),l=_.useRef(n);return ar(()=>{if(!t&&n!==l.current&&r.current){const o=a.current;if(o){const u=os(r.current,{ignoreTransform:!0}),f={x:o.left-u.left,y:o.top-u.top,scaleX:o.width/u.width,scaleY:o.height/u.height};(f.x||f.y)&&s(f)}}n!==l.current&&(l.current=n)},[t,n,r,a]),_.useEffect(()=>{i&&s(null)},[i]),i}function Eh(e){let{animateLayoutChanges:t=hO,attributes:n,disabled:r,data:a,getNewIndex:i=fO,id:s,strategy:l,resizeObserverConfig:o,transition:u=mO}=e;const{items:f,containerId:d,activeIndex:m,disabled:h,disableTransforms:p,sortedRects:b,overIndex:x,useDragOverlay:v,strategy:g}=_.useContext(Jb),y=pO(r,h),w=f.indexOf(s),E=_.useMemo(()=>({sortable:{containerId:d,index:w,items:f},...a}),[d,a,w,f]),j=_.useMemo(()=>f.slice(f.indexOf(s)),[f,s]),{rect:S,node:T,isOver:A,setNodeRef:O}=Jj({id:s,data:E,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...o}}),{active:N,activatorEvent:V,activeNodeRect:Z,attributes:ne,setNodeRef:oe,listeners:C,isDragging:B,over:Q,setActivatorNodeRef:fe,transform:ve}=Kj({id:s,data:E,attributes:{...yO,...n},disabled:y.draggable}),gt=UT(O,oe),Ue=!!N,ze=Ue&&!p&&no(m)&&no(x),Ce=!v&&B,Re=Ce&&ze?ve:null,I=ze?Re??(l??g)({rects:b,activeNodeRect:Z,activeIndex:m,overIndex:x,index:w}):null,R=no(m)&&no(x)?i({id:s,items:f,activeIndex:m,overIndex:x}):w,z=N==null?void 0:N.id,M=_.useRef({activeId:z,items:f,newIndex:R,containerId:d}),ee=f!==M.current.items,G=t({active:N,containerId:d,isDragging:B,isSorting:Ue,id:s,index:w,items:f,newIndex:M.current.newIndex,previousItems:M.current.items,previousContainerId:M.current.containerId,transition:u,wasDragging:M.current.activeId!=null}),re=vO({disabled:!G,index:w,node:T,rect:S});return _.useEffect(()=>{Ue&&M.current.newIndex!==R&&(M.current.newIndex=R),d!==M.current.containerId&&(M.current.containerId=d),f!==M.current.items&&(M.current.items=f)},[Ue,R,d,f]),_.useEffect(()=>{if(z===M.current.activeId)return;if(z!=null&&M.current.activeId==null){M.current.activeId=z;return}const ie=setTimeout(()=>{M.current.activeId=z},50);return()=>clearTimeout(ie)},[z]),{active:N,activeIndex:m,attributes:ne,data:E,rect:S,index:w,newIndex:R,items:f,isOver:A,isSorting:Ue,isDragging:B,listeners:C,node:T,overIndex:x,over:Q,setNodeRef:gt,setActivatorNodeRef:fe,setDroppableNodeRef:O,setDraggableNodeRef:oe,transform:re??I,transition:U()};function U(){if(re||ee&&M.current.newIndex===w)return gO;if(!(Ce&&!Nc(V)||!u)&&(Ue||G))return Ia.Transition.toString({...u,property:Pb})}}function pO(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function sc(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const bO=[Be.Down,Be.Right,Be.Up,Be.Left],Zb=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:s,scrollableAncestors:l}}=t;if(bO.includes(e.code)){if(e.preventDefault(),!n||!r)return;const o=[];i.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const m=a.get(d.id);if(m)switch(e.code){case Be.Down:r.top<m.top&&o.push(d);break;case Be.Up:r.top>m.top&&o.push(d);break;case Be.Left:r.left>m.left&&o.push(d);break;case Be.Right:r.left<m.left&&o.push(d);break}});const u=ZT({collisionRect:r,droppableRects:a,droppableContainers:o});let f=Ab(u,"id");if(f===(s==null?void 0:s.id)&&u.length>1&&(f=u[1].id),f!=null){const d=i.get(n.id),m=i.get(f),h=m?a.get(m.id):null,p=m==null?void 0:m.node.current;if(p&&h&&d&&m){const x=Cc(p).some((j,S)=>l[S]!==j),v=Fb(d,m),g=_O(d,m),y=x||!v?{x:0,y:0}:{x:g?r.width-h.width:0,y:g?r.height-h.height:0},w={x:h.left,y:h.top};return y.x&&y.y?w:cl(w,y)}}}};function Fb(e,t){return!sc(e)||!sc(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function _O(e,t){return!sc(e)||!sc(t)||!Fb(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const za=[{key:"mon",label:""},{key:"tue",label:""},{key:"wed",label:""},{key:"thu",label:""},{key:"fri",label:""},{key:"sat",label:""},{key:"sun",label:""}],Iu={THIS_ONLY:"this-only",FROM_NOW:"from-now",ALL:"all"},wO="09",SO="00",Me=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`},Hn=e=>{const t=String(e.getFullYear()).slice(2),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),i=["","","","","","",""][e.getDay()];return`${t}.${n}.${r}(${i})`},Hr=e=>{const t=new Date(e),n=String(t.getFullYear()).slice(2),r=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),o=["","","","","","",""][t.getDay()];return`${n}.${r}.${a}(${o}) ${i}:${s}`},xO=e=>{const t=new Date;return Me(e)===Me(t)},EO=()=>{const[e,t]=_.useState(null),[n,r]=_.useState(!0);return _.useEffect(()=>{ge.auth.getSession().then(({data:{session:l}})=>{t(l),r(!1)});const{data:{subscription:s}}=ge.auth.onAuthStateChange((l,o)=>{t(o)});return()=>s.unsubscribe()},[]),{session:e,authLoading:n,handleGoogleLogin:async()=>{try{const{error:s}=await ge.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/todo-note/"}});if(s)throw s}catch(s){alert(" : "+s.message)}},handleLogout:async()=>{try{const{error:s}=await ge.auth.signOut();if(s)throw s}catch(s){alert(" : "+s.message)}}}};function Th({value:e,onChange:t}){const n=_.useRef(null),r=_.useRef(null),a=_.useRef(e),i=_.useRef(!1),[s,l]=_.useState(()=>e&&e.includes(":")?e.split(":")[0]:wO),[o,u]=_.useState(()=>e&&e.includes(":")?e.split(":")[1]:SO);_.useEffect(()=>{if(e&&e.includes(":")&&e!==a.current){const[g,y]=e.split(":");a.current=e,l(g),u(y)}},[e]),_.useEffect(()=>{if(!i.current){i.current=!0;return}const g=`${s}:${o}`;a.current=g,t&&t(g)},[s,o]);const f=(g,y,w)=>{if(!g.current)return;const E=g.current.scrollTop,S=Math.round(E/40),T=String(S).padStart(2,"0");y(T)},d=(g,y)=>{if(!g.current)return;const w=40,E=parseInt(y,10);g.current.scrollTop=E*w};_.useEffect(()=>{d(n,s)},[]),_.useEffect(()=>{d(r,o)},[]);const m=Array.from({length:24},(g,y)=>String(y).padStart(2,"0")),h=Array.from({length:60},(g,y)=>String(y).padStart(2,"0")),p=()=>{const g=(parseInt(s,10)+1)%24,y=String(g).padStart(2,"0");l(y),d(n,y)},b=()=>{const g=(parseInt(s,10)-1+24)%24,y=String(g).padStart(2,"0");l(y),d(n,y)},x=()=>{const g=(parseInt(o,10)+1)%60,y=String(g).padStart(2,"0");u(y),d(r,y)},v=()=>{const g=(parseInt(o,10)-1+60)%60,y=String(g).padStart(2,"0");u(y),d(r,y)};return c.jsxs("div",{className:"apple-time-picker",children:[c.jsxs("div",{className:"picker-arrows-top",children:[c.jsx("button",{className:"picker-arrow-button",onClick:p,children:""}),c.jsx("div",{style:{width:"20px"}}),c.jsx("button",{className:"picker-arrow-button",onClick:x,children:""})]}),c.jsxs("div",{className:"picker-container",children:[c.jsxs("div",{className:"picker-column",ref:n,onScroll:()=>f(n,l),children:[c.jsx("div",{className:"picker-spacer"}),m.map(g=>c.jsx("div",{className:`picker-item ${g===s?"selected":""}`,onClick:()=>{l(g),d(n,g)},children:g},g)),c.jsx("div",{className:"picker-spacer"})]}),c.jsx("div",{className:"picker-separator",children:":"}),c.jsxs("div",{className:"picker-column",ref:r,onScroll:()=>f(r,u),children:[c.jsx("div",{className:"picker-spacer"}),h.map(g=>c.jsx("div",{className:`picker-item ${g===o?"selected":""}`,onClick:()=>{u(g),d(r,g)},children:g},g)),c.jsx("div",{className:"picker-spacer"})]})]}),c.jsxs("div",{className:"picker-arrows-bottom",children:[c.jsx("button",{className:"picker-arrow-button",onClick:b,children:""}),c.jsx("div",{style:{width:"20px"}}),c.jsx("button",{className:"picker-arrow-button",onClick:v,children:""})]}),c.jsx("div",{className:"picker-selection-indicator"})]})}function dy({message:e,onUndo:t,variant:n="default"}){const r=n==="success"?"undo-toast success-toast":"undo-toast";return c.jsxs("div",{className:r,children:[c.jsx("span",{children:e}),t&&c.jsx("button",{onClick:t,className:"undo-button",children:""})]})}function jh({title:e,editable:t=!1,onTitleChange:n,showHideButton:r=!1,onHide:a,showDeleteButton:i=!1,onDelete:s,customActions:l,settingsMenuItems:o=[]}){var g,y;const[u,f]=_.useState(!1),[d,m]=_.useState(e),[h,p]=_.useState(!1),b=_.useRef(null),x=()=>{d.trim()&&d!==e&&(n==null||n(d.trim())),f(!1)},v=()=>{m(e),f(!1)};return _.useEffect(()=>{const w=E=>{if(h&&b.current&&!b.current.contains(E.target)){const j=document.querySelector(".section-settings-dropdown");j&&!j.contains(E.target)&&p(!1)}};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[h]),c.jsxs("div",{className:"section-header",children:[c.jsx("div",{className:"section-title-container",children:u?c.jsx("div",{className:"section-title-edit-wrapper",children:c.jsx("input",{type:"text",value:d,onChange:w=>m(w.target.value),onBlur:x,onKeyDown:w=>{w.key==="Enter"?x():w.key==="Escape"&&v()},className:"section-title-input",autoFocus:!0})}):c.jsx("h2",{className:`section-title ${t?"editable":""}`,onClick:()=>t&&f(!0),children:e})}),c.jsxs("div",{className:"section-actions",children:[l,o.length>0&&c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{ref:b,className:"section-action-button settings-button",onClick:()=>p(!h),title:"",children:""}),h&&Cy.createPortal(c.jsx("div",{className:"section-settings-dropdown",style:{position:"fixed",top:`${((g=b.current)==null?void 0:g.getBoundingClientRect().bottom)+5}px`,left:`${(y=b.current)==null?void 0:y.getBoundingClientRect().left}px`},children:o.map((w,E)=>c.jsxs("button",{className:"settings-menu-item",onClick:()=>{w.onClick(),p(!1)},children:[c.jsx("span",{children:w.icon}),c.jsx("span",{children:w.label})]},E))}),document.body)]})]})]})}function TO({showSidebar:e,setShowSidebar:t,session:n,viewMode:r,setViewMode:a,onOpenRoutine:i,onOpenMemo:s,onScrollToKeyThoughts:l,onOpenGanttChart:o,onOpenEncouragementModal:u,onOpenDummyModal:f,onOpenAddSection:d,onOpenHiddenSections:m,onLogout:h}){var p,b;return c.jsxs(c.Fragment,{children:[e&&c.jsx("div",{className:"sidebar-overlay",onClick:()=>t(!1)}),c.jsxs("div",{className:`sidebar ${e?"open":""}`,children:[c.jsxs("div",{className:"sidebar-header",children:[c.jsx("h2",{children:""}),c.jsx("button",{className:"sidebar-close",onClick:()=>t(!1),children:""})]}),n&&n.user&&c.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",gap:"0.75rem"},children:[((p=n.user.user_metadata)==null?void 0:p.avatar_url)&&c.jsx("img",{src:n.user.user_metadata.avatar_url,alt:"",style:{width:"40px",height:"40px",borderRadius:"50%"}}),c.jsxs("div",{style:{flex:1,minWidth:0},children:[c.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((b=n.user.user_metadata)==null?void 0:b.full_name)||n.user.email}),c.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.user.email})]})]}),c.jsxs("div",{className:"sidebar-content",children:[c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{const x=r==="vertical"?"horizontal":"vertical";a(x),localStorage.setItem("viewMode",x),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:r==="vertical"?"":""}),c.jsx("span",{children:r==="vertical"?" ":" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{d(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{m(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:"  "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{i(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{s(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{l(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{o(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:" "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{u(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:"  "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{f(),t(!1)},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:"  "})]}),c.jsxs("button",{className:"sidebar-menu-item",onClick:()=>{confirm(" ?")&&h()},style:{marginTop:"auto",borderTop:"1px solid rgba(255, 255, 255, 0.1)",color:"rgba(255, 100, 100, 0.9)"},children:[c.jsx("span",{className:"sidebar-icon",children:""}),c.jsx("span",{children:""})]})]})]})]})}function jO({selectedDate:e,onDateChange:t,onPrevDay:n,onNextDay:r}){return c.jsxs("div",{className:"date-nav-section",children:[c.jsxs("div",{className:"date-display-wrapper",children:[c.jsx("span",{className:"date-display",children:Hn(e)}),c.jsx("input",{type:"date",value:Me(e),onChange:t,className:"date-picker-input"})]}),c.jsx("button",{onClick:n,className:"date-nav-button",children:""}),c.jsx("button",{onClick:r,className:"date-nav-button",children:""})]})}function OO({showSidebar:e,setShowSidebar:t,selectedDate:n,setSelectedDate:r,onDateChange:a,onPrevDay:i,onNextDay:s,showEncouragementEmoji:l,currentEncouragementMessage:o,onEncouragementClick:u,onQuickAdd:f}){const[d,m]=_.useState(""),[h,p]=_.useState(!1),b=async x=>{if(x.key==="Enter"&&!x.shiftKey&&d.trim()){x.preventDefault(),p(!0);try{await f(d.trim()),m("")}catch(v){console.error("Quick add error:",v)}finally{p(!1)}}};return c.jsx("div",{className:"header-fixed",children:c.jsxs("div",{className:"settings-bar",children:[c.jsx("button",{className:"hamburger-menu",onClick:()=>t(!e),title:"",children:c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("rect",{x:"2",y:"4",width:"16",height:"2",rx:"1",fill:"currentColor"}),c.jsx("rect",{x:"2",y:"9",width:"16",height:"2",rx:"1",fill:"currentColor"}),c.jsx("rect",{x:"2",y:"14",width:"16",height:"2",rx:"1",fill:"currentColor"})]})}),c.jsx(jO,{selectedDate:n,onDateChange:a,onPrevDay:i,onNextDay:s}),c.jsx("div",{className:"encouragement-section",children:xO(n)?c.jsx("div",{className:"encouragement-message",onClick:u,title:"    !",children:l?c.jsx("span",{className:"encouragement-emoji",children:"  "}):o||"!"}):c.jsx("button",{onClick:()=>r(new Date),className:"today-link",title:" ",children:"  "})}),c.jsx("div",{className:"quick-input-wrapper",children:c.jsx("input",{type:"text",value:d,onChange:x=>m(x.target.value),onKeyDown:b,placeholder:" Quick   (Enter )",className:"quick-input",disabled:h})})]})})}function DO({viewMode:e,currentSectionIndex:t,sectionsContainerRef:n}){return e!=="horizontal"?null:c.jsx("div",{className:"section-pagination-dots",onTouchStart:r=>{const a=r.touches[0];r.currentTarget.dataset.touchStartX=a.clientX,r.currentTarget.dataset.touchStartTime=Date.now()},onTouchMove:r=>{r.currentTarget.dataset.touchMoved="true"},onTouchEnd:r=>{const a=parseFloat(r.currentTarget.dataset.touchStartX||"0"),i=parseInt(r.currentTarget.dataset.touchStartTime||"0"),s=r.currentTarget.dataset.touchMoved==="true",l=r.changedTouches[0].clientX,o=Date.now()-i;if(delete r.currentTarget.dataset.touchStartX,delete r.currentTarget.dataset.touchStartTime,delete r.currentTarget.dataset.touchMoved,s&&o<500){const u=a-l,f=n.current;if(!f)return;const d=f.querySelectorAll(".section-block");Math.abs(u)>50&&(u>0&&t<d.length-1?d[t+1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}):u<0&&t>0&&d[t-1].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}))}},children:[0,1,2].map(r=>c.jsx("button",{className:`pagination-dot ${t===r?"active":""}`,onClick:()=>{const a=n.current;if(!a)return;const i=a.querySelectorAll(".section-block");i[r]&&i[r].scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}},r))})}function Yu({title:e,className:t,inputValue:n,setInputValue:r,onAddTodo:a,isAdding:i,placeholder:s,children:l,editable:o=!1,onTitleChange:u,settingsMenuItems:f=[],headerActions:d}){return c.jsxs("div",{className:t,children:[c.jsx(jh,{title:e,editable:o,onTitleChange:u,settingsMenuItems:f,customActions:d}),c.jsxs("div",{className:"section-input",children:[c.jsx("input",{type:"text",value:n,onChange:m=>r(m.target.value),onKeyDown:m=>{m.key==="Enter"&&a()},placeholder:s,className:"todo-input",disabled:i}),c.jsx("button",{onClick:a,className:"add-button",disabled:i,children:""})]}),l]})}function fi({todo:e,index:t,onToggle:n,onDelete:r,onEdit:a,formatDate:i,formatDateOnly:s,isFocused:l,onFocus:o,onAddSubTodo:u,subtodos:f,level:d=0,onCreateRoutine:m,routines:h,onShowRoutineHistory:p,onOpenRoutineSetupModal:b,onOpenHistoryModal:x,currentPageDate:v,isPendingRoutine:g=!1,onRemoveFromUI:y,showSuccessMessage:w,activeId:E,overId:j}){const[S,T]=_.useState(!1),[A,O]=_.useState(!1),[N,V]=_.useState(e.text),[Z,ne]=_.useState(!1),[oe,C]=_.useState(!1),[B,Q]=_.useState(!1),[fe,ve]=_.useState(""),[gt,Ue]=_.useState(!1),[ze,Ce]=_.useState([]),[Re,He]=_.useState(!1),[I,R]=_.useState(!1),[z,M]=_.useState([]),[ee,G]=_.useState([]),[re,U]=_.useState([]),[ie,he]=_.useState(null),[F,ae]=_.useState(!1),[le,Ee]=_.useState(null),[Ut,tt]=_.useState(!1),[It,yt]=_.useState([]),[lt,L]=_.useState(""),[q,X]=_.useState({}),[te,ce]=_.useState(!1),[ue,Ye]=_.useState(null),[qe,ot]=_.useState([]),[we,Ie]=_.useState("this-only"),[nt,Pe]=_.useState(null),bt=e.routine_id?h.find(K=>K.id===e.routine_id):null,{attributes:lr,listeners:dn,setNodeRef:Ze,transform:me,transition:xt,isDragging:nn}=Eh({id:e.id}),Yt=e.id===E,Vt=e.id===j&&E&&E!==j,zt={cursor:"grab",opacity:Yt?.4:1},fn=e.text.length>30,Et=()=>{O(!0),V(e.text)},Sn=async()=>{N.trim()&&N!==e.text&&await a(e.id,N.trim()),O(!1)},hn=async K=>{K.key==="Enter"&&!K.shiftKey?(K.preventDefault(),await Sn()):K.key==="Escape"&&(O(!1),V(e.text))},tn=K=>{yt(J=>J.includes(K)?J.filter(rt=>rt!==K):[...J,K])},Bn=K=>["sun","mon","tue","wed","thu","fri","sat"][K];_.useEffect(()=>{le==="history"&&!q[e.id]&&!te&&(async()=>{ce(!0);try{const{data:J,error:rt}=await ge.from("todo_history").select("*").eq("todo_id",e.id).order("changed_at",{ascending:!1});if(rt)throw rt;X($t=>({...$t,[e.id]:J||[]}))}catch(J){console.error("Error fetching history:",J)}finally{ce(!1)}})()},[le,e.id,q,te]),_.useEffect(()=>{le==="routine-stats"&&bt&&(!ue||ue.id!==bt.id)&&(async()=>{try{const{data:J,error:rt}=await ge.from("todos").select("*").eq("routine_id",bt.id).eq("deleted",!1).maybeSingle();if(rt)throw rt;if(J&&J.visible_dates){const $t=J.visible_dates.sort().map($e=>{var _t;return{id:`${J.id}-${$e}`,date:$e,text:J.text,completed:((_t=J.completed_dates)==null?void 0:_t.includes($e))||!1}});ot($t),Ye(bt)}}catch(J){console.error("Error fetching routine history:",J)}})()},[le,bt,ue]);const Ln=K=>{G(J=>J.includes(K)?J.filter(rt=>rt!==K):[...J,K])};return c.jsxs("div",{ref:Ze,style:{...zt,borderTop:Vt?"2px solid rgba(99, 102, 241, 0.8)":"2px solid transparent"},className:`todo-item-container ${l?"focused":""}`,children:[c.jsxs("span",{className:"todo-number",onClick:()=>o(e.id),children:[l&&c.jsx("span",{className:"focus-icon",children:""}),t+1]}),c.jsx("div",{className:"todo-item-wrapper",children:c.jsxs("div",{...lr,...A?{}:dn,className:`todo-item ${e.completed?"completed":""} ${S?"expanded":""} ${nn?"drag-mode":""}`,children:[c.jsx("input",{type:"checkbox",checked:e.completed,onChange:()=>n(e.id),className:"todo-checkbox"}),c.jsx("div",{className:"todo-content",onClick:()=>!A&&fn&&T(!S),onDoubleClick:Et,style:{cursor:A?"text":fn?"pointer":"default"},children:A?c.jsx("textarea",{value:N,onChange:K=>V(K.target.value),onBlur:Sn,onKeyDown:hn,className:"todo-edit-input",autoFocus:!0,rows:1,style:{minHeight:"1.35em",resize:"vertical",overflow:"hidden"},onInput:K=>{K.target.style.height="auto",K.target.style.height=K.target.scrollHeight+"px"}}):c.jsx("span",{className:`todo-text ${S?"expanded":""}`,children:e.text})}),(()=>{const K=e.completed&&e.completed_at&&new Date(e.completed_at).toISOString().split("T")[0]!==e.date,J=e.routine_id&&bt,rt=g||e.is_pending_routine;return(f.length>0||K||J||rt)&&c.jsxs("div",{className:"todo-badges",children:[K&&(()=>{const $t=new Date(e.completed_at).toISOString().split("T")[0],$e=new Date(e.completed_at).getDate();return c.jsxs("span",{className:"completed-date-badge",title:`${$t} `,children:[$e,""]})})(),J&&(()=>{const $t=v||e.date,$e=new Date($t+"T00:00:00"),_t=$e.getMonth()+1,at=$e.getDate(),xn=["","","","","","",""][$e.getDay()],gr=`${_t}/${at}(${xn})`;return c.jsxs("span",{className:"routine-date-badge",title:`${bt.text} `,children:["for ",gr]})})(),rt&&c.jsx("span",{className:"pending-routine-badge",title:"  ",children:""}),f.length>0&&c.jsx("span",{className:"todo-badge clickable",title:" ",onClick:$t=>{$t.stopPropagation(),oe?(ne(!1),C(!1),Q(!1)):(ne(!0),C(!0),Q(!1),Ue(!1),R(!1))},children:""})]})})(),!A&&!e.parent_id&&c.jsx("button",{className:"todo-more-button",onClick:K=>{K.stopPropagation(),ae(!0),Ee(null),tt(!1),yt([]),L("")},title:"",children:""}),oe&&!e.parent_id&&c.jsxs("div",{className:"subtodos-in-item",children:[f&&f.length>0&&f.map((K,J)=>c.jsx(fi,{todo:K,index:J,onToggle:n,onDelete:r,onEdit:a,formatDate:i,formatDateOnly:s,isFocused:l,onFocus:o,onAddSubTodo:u,subtodos:[],level:d+1,routines:h,onShowRoutineHistory:p,showSuccessMessage:w,onOpenRoutineSetupModal:b,onOpenHistoryModal:x,currentPageDate:v},K.id)),B&&c.jsxs("div",{className:"subtodo-input-section",children:[c.jsx("input",{type:"text",value:fe,onChange:K=>ve(K.target.value),onKeyDown:K=>{K.key==="Enter"&&fe.trim()&&(u(e.id,fe.trim()),ve(""))},placeholder:" ...",className:"subtodo-input",autoFocus:!0}),c.jsx("button",{onClick:()=>{fe.trim()&&(u(e.id,fe.trim()),ve(""))},className:"subtodo-add-button",children:""}),c.jsx("button",{onClick:()=>{ve("")},className:"subtodo-cancel-button",children:""})]})]})]})}),F&&Cy.createPortal(c.jsx("div",{className:"modal-overlay",onClick:()=>ae(!1),children:c.jsxs("div",{className:"actions-modal-content",onClick:K=>K.stopPropagation(),children:[c.jsxs("div",{className:"actions-modal-header",children:[c.jsx("h3",{children:" "}),c.jsx("button",{onClick:()=>ae(!1),className:"modal-close-button",children:""})]}),c.jsx("div",{className:"todo-edit-section",children:c.jsx("textarea",{value:N,onChange:K=>V(K.target.value),onBlur:()=>{N.trim()!==""&&N!==e.text?a(e.id,N):N.trim()===""&&V(e.text)},className:"todo-edit-textarea",placeholder:"  ...",rows:3})}),c.jsxs("div",{className:"actions-modal-body",children:[c.jsxs("div",{className:"actions-menu",children:[c.jsxs("button",{className:`action-menu-item ${le==="nanotodo"?"active":""}`,onClick:()=>Ee("nanotodo"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item ${le==="routine"?"active":""}`,onClick:()=>{Ee("routine");const K=h.find(J=>J.id===e.routine_id);K?(yt(K.days||[]),L(K.time_slot||""),tt(!1)):(yt([]),L(""),tt(!0))},children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item ${le==="history"?"active":""}`,onClick:()=>Ee("history"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),e.routine_id&&bt&&c.jsxs("button",{className:`action-menu-item ${le==="routine-stats"?"active":""}`,onClick:()=>Ee("routine-stats"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]}),c.jsxs("button",{className:`action-menu-item delete ${le==="delete"?"active":""}`,onClick:()=>Ee("delete"),children:[c.jsx("span",{className:"action-icon",children:""}),c.jsx("span",{children:""})]})]}),c.jsxs("div",{className:"actions-detail",children:[!le&&c.jsx("div",{className:"actions-detail-empty",children:c.jsx("p",{children:"  "})}),le==="nanotodo"&&c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:" "}),c.jsxs("div",{className:"nanotodo-section-in-modal",children:[f&&f.length>0&&c.jsx("div",{className:"subtodo-list-in-modal",children:f.map(K=>c.jsxs("div",{className:"subtodo-item-in-modal",children:[c.jsx("input",{type:"checkbox",checked:K.completed,onChange:()=>n(K.id),className:"subtodo-checkbox-modal"}),c.jsx("span",{className:`subtodo-text-modal ${K.completed?"completed":""}`,children:K.text}),c.jsx("button",{onClick:()=>r(K.id),className:"subtodo-delete-modal",title:"",children:""})]},K.id))}),c.jsxs("div",{className:"subtodo-input-section-modal",children:[c.jsx("input",{type:"text",value:fe,onChange:K=>ve(K.target.value),onKeyDown:K=>{K.key==="Enter"&&fe.trim()&&(u(e.id,fe.trim()),ve(""))},placeholder:" ...",className:"subtodo-input-modal"}),c.jsx("button",{onClick:()=>{fe.trim()&&(u(e.id,fe.trim()),ve(""))},className:"subtodo-add-button-modal",children:""})]})]})]}),le==="routine"&&(()=>{const K=h.find(J=>J.id===e.routine_id);return c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsx("div",{className:"routine-setup-inline",children:K&&!Ut?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-current-info",children:[c.jsx("div",{className:"routine-info-title",children:" :"}),c.jsx("div",{className:"routine-days-display",children:za.filter(J=>K.days.includes(J.key)).map(J=>c.jsx("span",{className:"routine-day-badge",children:J.label},J.key))}),K.time_slot&&c.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",K.time_slot]})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:J=>{J.stopPropagation(),K&&(yt(K.days),L(K.time_slot||""),tt(!0))},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:async J=>{J.stopPropagation(),K&&e&&(await m(e.id,e.text,[],null,!0),ae(!1))},className:"routine-remove-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"routine-setup-title",children:Ut?" :":"  :"}),c.jsx("div",{className:"day-selector-inline",children:za.map(J=>c.jsx("button",{onClick:rt=>{rt.stopPropagation(),tn(J.key)},className:`day-button-inline ${It.includes(J.key)?"selected":""}`,children:J.label},J.key))}),c.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[c.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),c.jsx(Th,{value:lt,onChange:J=>L(J)})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:async J=>{J.stopPropagation(),e&&(Ut&&K?await m(e.id,e.text,It,K.id,!1,lt):await m(e.id,e.text,It,null,!1,lt),tt(!1),ae(!1))},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:J=>{J.stopPropagation(),tt(!1),yt([]),L("")},className:"routine-cancel-button",children:""})]})]})})]})})(),le==="history"&&(()=>{const K=e.visible_dates&&e.visible_dates.length>0?e.visible_dates:[e.date],J=K[0],rt=K.map($e=>({id:`${e.id}-${$e}`,date:$e})),$t=q[e.id]||[];return te?c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:" ..."})]}):c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"  "}),c.jsxs("div",{className:"todo-history",children:[c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:":"}),c.jsx("span",{className:"history-value",children:i(e.created_at)})]}),c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:s(J?new Date(J+"T00:00:00"):new Date(e.date+"T00:00:00"))})]}),rt.length>0&&c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:rt.map(($e,_t)=>{const at=$e.date===e.date,vt=s(new Date($e.date+"T00:00:00"));return c.jsxs("span",{children:[_t>0&&"  ",c.jsxs("span",{style:at?{fontWeight:"bold",color:"#4CAF50"}:{},children:[vt.split("(")[0],at?"()":""]})]},$e.id)})})]}),(()=>{const $e=new Date(e.created_at).toISOString().split("T")[0],_t=e.date;return $e!==_t&&rt.length===0?c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:s(new Date(e.date+"T00:00:00"))})]}):null})(),$t.length>0&&c.jsxs("div",{className:"history-changes-list",children:[c.jsxs("div",{className:"history-changes-header",children:["  (",$t.length,")"]}),$t.map($e=>c.jsxs("div",{className:"history-record-compact",children:[c.jsxs("div",{className:"history-record-summary",children:[c.jsxs("div",{className:"history-change-time",children:[i($e.changed_at),$e.changed_on_date&&c.jsxs("span",{className:"history-page-info",children:[" (: ",s(new Date($e.changed_on_date+"T00:00:00")),")"]})]}),c.jsx("button",{className:"history-detail-button",onClick:_t=>{_t.stopPropagation(),Ln($e.id)},children:ee.includes($e.id)?"":""})]}),ee.includes($e.id)&&c.jsxs("div",{className:"history-change",children:[c.jsxs("div",{className:"history-change-item history-before",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:$e.previous_text})]}),c.jsx("div",{className:"history-change-arrow",children:""}),c.jsxs("div",{className:"history-change-item history-after",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:$e.new_text})]})]})]},$e.id))]})]})]})})(),le==="routine-stats"&&bt&&(()=>{if(!ue||ue.id!==bt.id||qe.length===0)return c.jsxs("div",{className:"actions-detail-content",children:[c.jsxs("h4",{children:[" ",bt.text," "]}),c.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:!ue||ue.id!==bt.id?" ...":" ."})]});const K=qe[0],J=new Date(K.date),rt=new Date,$t={};qe.forEach(at=>{$t[at.date]=at.completed});const $e=[];let _t=new Date(J);for(;_t<=rt;){const at=_t.getFullYear(),vt=_t.getMonth(),xn=`${at}-${vt+1}`;$e.find(Pa=>Pa.key===xn)||$e.push({key:xn,year:at,month:vt,days:[]});const gr=$e.find(Pa=>Pa.key===xn),or=Me(_t),zr=_t.getDay(),cs=Bn(zr),zc=bt.days.includes(cs);gr.days.push({date:new Date(_t),dateStr:or,day:_t.getDate(),dayOfWeek:zr,isCompleted:$t[or]===!0,isRoutineDay:zc,hasTodo:$t[or]!==void 0}),_t.setDate(_t.getDate()+1)}return c.jsxs("div",{className:"actions-detail-content",children:[c.jsxs("h4",{children:[" ",bt.text," "]}),c.jsxs("div",{className:"routine-history-content",children:[c.jsx("div",{className:"routine-history-calendar",children:$e.map(at=>c.jsxs("div",{className:"history-month",children:[c.jsxs("h3",{className:"history-month-title",children:[at.year," ",at.month+1,""]}),c.jsxs("div",{className:"history-calendar-grid",children:[c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),at.days.length>0&&Array(at.days[0].dayOfWeek).fill(null).map((vt,xn)=>c.jsx("div",{className:"history-day-cell empty"},`empty-${xn}`)),at.days.map((vt,xn)=>{if(xn>0&&vt.day===1){const or=6-at.days[xn-1].dayOfWeek;return c.jsxs(ft.Fragment,{children:[Array(or).fill(null).map((zr,cs)=>c.jsx("div",{className:"history-day-cell empty"},`empty-end-${xn}-${cs}`)),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsxs("div",{className:`history-day-cell ${vt.isCompleted?"completed":""} ${vt.isRoutineDay?"":"not-routine-day"}`,children:[c.jsx("span",{className:"day-number",children:vt.day}),vt.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]})]},vt.dateStr)}return c.jsxs("div",{className:`history-day-cell ${vt.isCompleted?"completed":""} ${vt.isRoutineDay?"":"not-routine-day"}`,title:`${vt.dateStr}${vt.isRoutineDay?"":" (  )"}${vt.isCompleted?" - ":vt.hasTodo?" - ":""}`,children:[c.jsx("span",{className:"day-number",children:vt.day}),vt.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]},vt.dateStr)})]})]},at.key))}),c.jsxs("div",{className:"routine-history-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:" :"}),c.jsxs("span",{className:"stat-value",children:[qe.length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value completed",children:[qe.filter(at=>at.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value incomplete",children:[qe.filter(at=>!at.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value",children:[qe.length>0?Math.round(qe.filter(at=>at.completed).length/qe.length*100):0,"%"]})]})]})]})]})})(),le==="delete"&&(()=>{const K=async()=>{window.confirm(`  ?

  5    .`)&&(await r(e.id,we),ae(!1))};return c.jsxs("div",{className:"actions-detail-content",children:[c.jsx("h4",{children:"   "}),c.jsxs("p",{style:{fontSize:"0.9rem",color:"#9ca3af",marginBottom:"1rem",lineHeight:"1.6"},children:["    .",c.jsx("br",{}),"    ."]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:we==="this-only"?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"},onClick:()=>Ie("this-only"),children:[c.jsx("input",{type:"radio",name:"delete-option",value:"this-only",checked:we==="this-only",onChange:J=>Ie(J.target.value),style:{width:"16px",height:"16px",cursor:"pointer"}}),c.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[c.jsx("span",{style:{fontWeight:"600"},children:" "}),c.jsx("span",{style:{fontSize:"0.85rem",color:"#9ca3af"},children:" "})]})}),c.jsx("button",{onMouseEnter:()=>Pe("this-only"),onMouseLeave:()=>Pe(null),onClick:J=>{J.stopPropagation(),Pe(nt==="this-only"?null:"this-only")},style:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"?"}),nt==="this-only"&&c.jsx("div",{style:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"  ,  ,   "})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:we==="from-now"?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"},onClick:()=>Ie("from-now"),children:[c.jsx("input",{type:"radio",name:"delete-option",value:"from-now",checked:we==="from-now",onChange:J=>Ie(J.target.value),style:{width:"16px",height:"16px",cursor:"pointer"}}),c.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[c.jsx("span",{style:{fontWeight:"600"},children:"   "}),c.jsx("span",{style:{fontSize:"0.85rem",color:"#9ca3af"},children:" "})]})}),c.jsx("button",{onMouseEnter:()=>Pe("from-now"),onMouseLeave:()=>Pe(null),onClick:J=>{J.stopPropagation(),Pe(nt==="from-now"?null:"from-now")},style:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"?"}),nt==="from-now"&&c.jsx("div",{style:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"  ,  ,   "})]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"6px",background:we==="all"?"rgba(59, 130, 246, 0.1)":"transparent",cursor:"pointer",position:"relative"},onClick:()=>Ie("all"),children:[c.jsx("input",{type:"radio",name:"delete-option",value:"all",checked:we==="all",onChange:J=>Ie(J.target.value),style:{width:"16px",height:"16px",cursor:"pointer"}}),c.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[c.jsx("span",{style:{fontWeight:"600"},children:" "}),c.jsx("span",{style:{fontSize:"0.85rem",color:"#9ca3af"},children:" "})]})}),c.jsx("button",{onMouseEnter:()=>Pe("all"),onMouseLeave:()=>Pe(null),onClick:J=>{J.stopPropagation(),Pe(nt==="all"?null:"all")},style:{width:"20px",height:"20px",borderRadius:"50%",border:"1.5px solid #9ca3af",background:"transparent",color:"#9ca3af",cursor:"pointer",fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"?"}),nt==="all"&&c.jsx("div",{style:{position:"absolute",right:"2.5rem",top:"50%",transform:"translateY(-50%)",background:"#1f2937",color:"#e5e7eb",padding:"0.5rem 0.75rem",borderRadius:"6px",fontSize:"0.85rem",whiteSpace:"nowrap",zIndex:10,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:"  ,  ,   "})]})]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",marginTop:"1.5rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[c.jsx("button",{onClick:()=>ae(!1),style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#9ca3af",cursor:"pointer",fontSize:"0.9rem"},children:""}),c.jsx("button",{onClick:K,style:{padding:"0.5rem 1rem",borderRadius:"6px",background:"#ef4444",border:"none",color:"white",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600"},children:""})]})]})})()]})]})]})}),document.body)]})}function AO({showRoutineModal:e,onClose:t,routineInput:n,setRoutineInput:r,isAddingRoutine:a,selectedDays:i,onToggleDay:s,selectedTimeSlot:l,setSelectedTimeSlot:o,onAddRoutine:u,routines:f,editingRoutineId:d,editingRoutineText:m,setEditingRoutineText:h,editingRoutineDays:p,onToggleEditDay:b,onStartEdit:x,onSaveEdit:v,onCancelEdit:g,onDelete:y,onShowHistory:w}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content routine-modal",onClick:E=>E.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-add-section",children:[c.jsx("input",{type:"text",value:n,onChange:E=>r(E.target.value),placeholder:"  ...",className:"routine-input",disabled:a}),c.jsx("div",{className:"day-selector",children:za.map(E=>c.jsx("button",{onClick:()=>s(E.key),className:`day-button ${i.includes(E.key)?"selected":""}`,disabled:a,children:E.label},E.key))}),c.jsxs("div",{className:"time-slot-selector",children:[c.jsx("label",{className:"time-slot-label",children:"  ()"}),c.jsx(Th,{value:l,onChange:E=>o(E)})]}),c.jsx("button",{onClick:u,className:"add-routine-button",disabled:a||n.trim()==="",children:" "})]}),c.jsx("div",{className:"routine-list",children:f.length===0?c.jsx("p",{className:"empty-message",children:"  ."}):f.map(E=>c.jsx("div",{className:"routine-item",children:d===E.id?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-edit-content",children:[c.jsx("input",{type:"text",value:m,onChange:j=>h(j.target.value),className:"routine-edit-input",placeholder:" "}),c.jsx("div",{className:"day-selector-inline",children:za.map(j=>c.jsx("button",{onClick:()=>b(j.key),className:`day-button-inline ${p.includes(j.key)?"selected":""}`,children:j.label},j.key))})]}),c.jsxs("div",{className:"routine-item-actions",children:[c.jsx("button",{onClick:v,className:"routine-save-button",disabled:m.trim()===""||p.length===0,children:""}),c.jsx("button",{onClick:g,className:"routine-cancel-edit-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-item-content",children:[c.jsx("span",{className:"routine-text",children:E.text}),c.jsxs("div",{className:"routine-meta",children:[c.jsx("div",{className:"routine-days",children:za.filter(j=>E.days.includes(j.key)).map(j=>c.jsx("span",{className:"routine-day-badge",children:j.label},j.key))}),E.time_slot&&c.jsx("span",{className:"routine-time-slot",children:E.time_slot})]})]}),c.jsxs("div",{className:"routine-item-actions",children:[c.jsx("button",{onClick:()=>w(E),className:"routine-history-button",title:" ",children:""}),c.jsx("button",{onClick:()=>x(E),className:"routine-edit-button",title:"",children:""}),c.jsx("button",{onClick:()=>y(E.id),className:"routine-delete-button",title:"",children:""})]})]})},E.id))})]})}):null}const NO=e=>["sun","mon","tue","wed","thu","fri","sat"][e];function CO({showRoutineHistory:e,onClose:t,selectedRoutine:n,routineHistoryData:r}){return!e||!n?null:c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content routine-history-modal",onClick:a=>a.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:[" ",n.text," "]}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-history-content",children:[(()=>{if(r.length===0)return c.jsx("p",{className:"empty-message",children:"   ."});const a=r[0],i=new Date(a.date),s=new Date,l={};r.forEach(f=>{l[f.date]=f.completed});const o=[];let u=new Date(i);for(;u<=s;){const f=u.getFullYear(),d=u.getMonth(),m=`${f}-${d+1}`;o.find(g=>g.key===m)||o.push({key:m,year:f,month:d,days:[]});const h=o.find(g=>g.key===m),p=Me(u),b=u.getDay(),x=NO(b),v=n.days.includes(x);h.days.push({date:new Date(u),dateStr:p,day:u.getDate(),dayOfWeek:b,isCompleted:l[p]===!0,isRoutineDay:v,hasTodo:l[p]!==void 0}),u.setDate(u.getDate()+1)}return c.jsx("div",{className:"routine-history-calendar",children:o.map(f=>c.jsxs("div",{className:"history-month",children:[c.jsxs("h3",{className:"history-month-title",children:[f.year," ",f.month+1,""]}),c.jsxs("div",{className:"history-calendar-grid",children:[c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),f.days.length>0&&Array(f.days[0].dayOfWeek).fill(null).map((d,m)=>c.jsx("div",{className:"history-day-cell empty"},`empty-${m}`)),f.days.map((d,m)=>{if(m>0&&d.day===1){const p=6-f.days[m-1].dayOfWeek;return c.jsxs(c.Fragment,{children:[Array(p).fill(null).map((b,x)=>c.jsx("div",{className:"history-day-cell empty"},`empty-end-${m}-${x}`)),c.jsx("div",{className:"history-day-header",children:""},d.dateStr),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsx("div",{className:"history-day-header",children:""}),c.jsxs("div",{className:`history-day-cell ${d.isCompleted?"completed":""} ${d.isRoutineDay?"":"not-routine-day"}`,children:[c.jsx("span",{className:"day-number",children:d.day}),d.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]})]})}return c.jsxs("div",{className:`history-day-cell ${d.isCompleted?"completed":""} ${d.isRoutineDay?"":"not-routine-day"}`,title:`${d.dateStr}${d.isRoutineDay?"":" (  )"}${d.isCompleted?" - ":d.hasTodo?" - ":""}`,children:[c.jsx("span",{className:"day-number",children:d.day}),d.isCompleted&&c.jsx("span",{className:"check-mark",children:""})]},d.dateStr)})]})]},f.key))})})(),c.jsxs("div",{className:"routine-history-stats",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:" :"}),c.jsxs("span",{className:"stat-value",children:[r.length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value completed",children:[r.filter(a=>a.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value incomplete",children:[r.filter(a=>!a.completed).length,""]})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:":"}),c.jsxs("span",{className:"stat-value",children:[r.length>0?Math.round(r.filter(a=>a.completed).length/r.length*100):0,"%"]})]})]})]})]})})}function RO({title:e,className:t,content:n,setContent:r,isEditing:a,isSaving:i,textareaRef:s,onStartEdit:l,onSave:o,onCancel:u,onKeyDown:f,placeholder:d,emptyMessage:m,settingsMenuItems:h=[],children:p}){return c.jsxs("div",{className:t,children:[c.jsx(jh,{title:e,settingsMenuItems:h,customActions:a&&c.jsxs("div",{className:"memo-edit-actions",children:[c.jsx("button",{onClick:o,className:"memo-save-button",disabled:i,children:" "}),c.jsx("button",{onClick:u,className:"memo-cancel-button",disabled:i,children:" "})]})}),a?c.jsx("textarea",{ref:s,value:n,onChange:b=>r(b.target.value),onKeyDown:f,className:"memo-textarea",placeholder:d}):c.jsx("div",{className:"memo-preview",onClick:l,children:n?c.jsx("div",{className:"memo-preview-content",children:n.split(`
`).map((b,x)=>c.jsx("div",{className:"memo-preview-line",children:b||""},x))}):c.jsx("div",{className:"memo-empty",children:m})}),p]})}function Wb({block:e,blocks:t,setBlocks:n,focusedBlockId:r,setFocusedBlockId:a,parentBlock:i,rootSetBlocks:s,draggingChildIds:l=[],activeId:o,overId:u}){const{attributes:f,listeners:d,setNodeRef:m,transform:h,transition:p,isDragging:b}=Eh({id:e.id}),x=e.id===o,v=e.id===u&&o&&o!==u,g={cursor:"grab",opacity:x?.4:1,borderTop:v?"2px solid rgba(99, 102, 241, 0.8)":"2px solid transparent"};return c.jsx("div",{ref:m,style:g,children:c.jsx(e_,{block:e,blocks:t,setBlocks:n,focusedBlockId:r,setFocusedBlockId:a,dragHandleProps:{...f,...d},parentBlock:i,rootSetBlocks:s,draggingChildIds:l,activeId:o,overId:u})})}function e_({block:e,blocks:t,setBlocks:n,focusedBlockId:r,setFocusedBlockId:a,dragHandleProps:i,parentBlock:s,rootSetBlocks:l,draggingChildIds:o=[],activeId:u,overId:f}){const d=_.useRef(null),m=_.useRef(!1);_.useEffect(()=>{if(r===e.id&&d.current){d.current.focus();const E=d.current.value.length;d.current.setSelectionRange(E,E)}},[r,e.id]),_.useEffect(()=>{d.current&&(d.current.style.height="auto",d.current.style.height=d.current.scrollHeight+"px")},[e.content]);const h=(E,j,S)=>E.map(T=>{if(T.id===j){const A=S(T);return{...A,children:Array.isArray(A.children)?A.children:[]}}return Array.isArray(T.children)&&T.children.length>0?{...T,children:h(T.children,j,S)}:T}),p=E=>{n(j=>h(j,e.id,S=>({...S,content:E})))},b=E=>{n(j=>h(j,e.id,S=>({...S,children:typeof E=="function"?E(S.children):E})))},x=()=>{n(E=>h(E,e.id,j=>{const S=!j.isOpen;if(S&&(!Array.isArray(j.children)||j.children.length===0)){const T={id:Date.now()+Math.random(),type:"toggle",content:"",children:[],isOpen:!0};return{...j,isOpen:S,children:[T]}}return{...j,isOpen:S,children:Array.isArray(j.children)?j.children:[]}}))},v=()=>{const E=t.findIndex(S=>S.id===e.id);if(E<=0)return;const j=t[E-1];n(S=>{const T=[...S];T.splice(E,1);const A={...j,children:[...Array.isArray(j.children)?j.children:[],e],isOpen:!0};return T[E-1]=A,T})},g=()=>{!s||!l||l(E=>{const j=(A,O,N)=>{const V=[];for(let Z=0;Z<A.length;Z++){const ne=A[Z];if(ne.id===O){const oe=ne.children.filter(B=>B.id!==N.id),C={...ne,children:oe};V.push(C),V.push(N)}else if(Array.isArray(ne.children)&&ne.children.length>0){const oe=j(ne.children,O,N);oe!==ne.children?V.push({...ne,children:oe}):V.push(ne)}else V.push(ne)}return V},S=A=>A.map(O=>{const N=Array.isArray(O.children)&&O.children.length>0;return!N&&O.isOpen?{...O,isOpen:!1}:N?{...O,children:S(O.children)}:O}),T=j(E,s.id,e);return S(T)})},y=E=>{const j=[],S=T=>{for(const A of T)j.push(A),A.isOpen&&Array.isArray(A.children)&&A.children.length>0&&S(A.children)};return S(E),j},w=E=>{if(E.key==="Enter"){if(E.shiftKey)return;{if(m.current){E.preventDefault(),E.stopPropagation();return}E.preventDefault(),E.stopPropagation(),m.current=!0;const j=E.target.selectionStart,S={id:Date.now()+Math.random(),type:"toggle",content:"",children:[],isOpen:!0};j===0?(n(T=>{const A=T.findIndex(N=>N.id===e.id);if(A===-1)return T;const O=[...T];return O.splice(A,0,S),O}),setTimeout(()=>{a(e.id),setTimeout(()=>{m.current=!1},100)},0)):(n(T=>{const A=T.findIndex(N=>N.id===e.id);if(A===-1)return T;const O=[...T];return O.splice(A+1,0,S),O}),setTimeout(()=>{a(S.id),setTimeout(()=>{m.current=!1},100)},0))}}else if(E.key==="Tab"&&E.shiftKey)E.preventDefault(),E.stopPropagation(),s&&l&&g();else if(E.key==="Tab"&&!E.shiftKey)E.preventDefault(),E.stopPropagation(),v();else if(E.key==="Backspace"){const j=E.target.selectionStart;if(e.content===""||j===0){const O=(()=>{if(l){let Z=[];return l(ne=>(Z=ne,ne)),Z}return t})(),N=y(O),V=N.findIndex(Z=>Z.id===e.id);if(V>0){E.preventDefault(),E.stopPropagation();const Z=N[V-1],ne=(C,B)=>C.filter(Q=>Q.id!==B).map(Q=>Array.isArray(Q.children)&&Q.children.length>0?{...Q,children:ne(Q.children,B)}:Q),oe=C=>C.map(B=>{const Q=Array.isArray(B.children)&&B.children.length>0;return!Q&&B.isOpen?{...B,isOpen:!1}:Q?{...B,children:oe(B.children)}:B});l?l(C=>{const B=ne(C,e.id);return oe(B)}):n(C=>{const B=ne(C,e.id);return oe(B)}),setTimeout(()=>{a(Z.id)},0)}}}else if(E.key==="ArrowUp"&&!E.shiftKey){E.preventDefault(),E.stopPropagation();const S=(()=>{if(l){let O=[];return l(N=>(O=N,N)),O}return t})(),T=y(S),A=T.findIndex(O=>O.id===e.id);A>0&&a(T[A-1].id)}else if(E.key==="ArrowDown"&&!E.shiftKey){E.preventDefault(),E.stopPropagation();const S=(()=>{if(l){let O=[];return l(N=>(O=N,N)),O}return t})(),T=y(S),A=T.findIndex(O=>O.id===e.id);A<T.length-1&&a(T[A+1].id)}};return c.jsxs("div",{className:"notion-block",children:[i&&c.jsx("div",{className:"notion-drag-handle",...i,title:" ",children:""}),c.jsx("div",{className:"notion-block-controls",children:c.jsx("button",{className:"block-type-button",onClick:x,title:": /",style:{transform:e.isOpen?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""})}),c.jsx("div",{className:"notion-block-content",children:c.jsx("textarea",{ref:d,value:e.content,onChange:E=>p(E.target.value),onKeyDown:w,onFocus:()=>a(e.id),placeholder:"",className:"notion-block-input",rows:1})}),e.isOpen&&Array.isArray(e.children)&&e.children.length>0&&c.jsx("div",{className:"notion-block-children",children:e.children.map(E=>c.jsx(Wb,{block:E,blocks:e.children,setBlocks:b,focusedBlockId:r,setFocusedBlockId:a,parentBlock:e,rootSetBlocks:l||n,draggingChildIds:o,activeId:u,overId:f},E.id))})]})}function MO({blocks:e,setBlocks:t,focusedBlockId:n,setFocusedBlockId:r,onShowHistory:a,onOpenViewer:i,settingsMenuItems:s=[]}){const[l,o]=_.useState(null),[u,f]=_.useState(null),d=vh(ki(jl,{activationConstraint:{distance:3}}),ki(Rc,{coordinateGetter:Zb})),m=S=>S.map(T=>{const A=Array.isArray(T.children)&&T.children.length>0;return!A&&T.isOpen?{...T,isOpen:!1}:A?{...T,children:m(T.children)}:T});_.useEffect(()=>{const S=m(e);JSON.stringify(S)!==JSON.stringify(e)&&t(S)},[e]);const h=S=>{const T=[],A=O=>{for(const N of O)T.push(N),N.isOpen&&Array.isArray(N.children)&&N.children.length>0&&A(N.children)};return A(S),T},p=S=>{const T=[],A=O=>{if(Array.isArray(O.children)&&O.children.length>0)for(const N of O.children)T.push(N.id),A(N)};return A(S),T},b=S=>{const{active:T}=S,O=h(e).find(N=>N.id===T.id);o(O)},x=S=>{const{over:T}=S;f((T==null?void 0:T.id)||null)},v=ft.useMemo(()=>l?p(l):[],[l]),g=S=>{const{active:T,over:A}=S;if(o(null),f(null),!A||T.id===A.id)return;const O=h(e),N=O.find(ze=>ze.id===T.id),V=O.find(ze=>ze.id===A.id);if(!N||!V||p(N).includes(A.id))return;const ne=JSON.parse(JSON.stringify(N)),oe=(ze,Ce)=>ze.filter(Re=>Re.id!==Ce).map(Re=>({...Re,children:Array.isArray(Re.children)?oe(Re.children,Ce):[]})),C=(ze,Ce,Re)=>{let He=!1;const I=[];for(const R of ze)if(I.push(R),R.id===Ce&&(I.push(Re),He=!0),Array.isArray(R.children)&&R.children.length>0){const{newChildren:z,wasInserted:M}=B(R.children,Ce,Re);M&&(I[I.length-1]={...R,children:z},He=!0)}return{newTree:I,inserted:He}},B=(ze,Ce,Re)=>{let He=!1;const I=[];for(const R of ze)if(I.push(R),R.id===Ce&&(I.push(Re),He=!0),Array.isArray(R.children)&&R.children.length>0){const{newChildren:z,wasInserted:M}=B(R.children,Ce,Re);M&&(I[I.length-1]={...R,children:z},He=!0)}return{newChildren:I,wasInserted:He}};let Q=oe(e,N.id);const fe=Q.length>0&&Q[0].id===V.id;let ve,gt=!1;if(fe)ve=[ne,...Q],gt=!0;else{const ze=C(Q,V.id,ne);ve=ze.newTree,gt=ze.inserted}if(!gt){console.warn("Failed to insert block, keeping original state");return}const Ue=m(ve);t(Ue)},y=h(e).filter(S=>!v.includes(S.id)).map(S=>S.id),w=S=>{const T=A=>A.map(O=>({...O,isOpen:S,children:Array.isArray(O.children)?T(O.children):[]}));t(T(e))},E=S=>{for(const T of S)if(!T.isOpen&&Array.isArray(T.children)&&T.children.length>0||Array.isArray(T.children)&&T.children.length>0&&!E(T.children))return!1;return!0},j=E(e);return c.jsxs("div",{className:"key-thoughts-section section-block",children:[c.jsx(jh,{title:"  ",settingsMenuItems:s,customActions:c.jsx("button",{className:"section-action-button",onClick:()=>w(!j),title:j?" ":" ",children:j?" ":" "})}),c.jsx("div",{className:"key-thoughts-content notion-editor",children:c.jsxs(Sh,{sensors:d,collisionDetection:ph,onDragStart:b,onDragOver:x,onDragEnd:g,measuring:{droppable:{strategy:Ya.Always}},children:[c.jsx(Da,{items:y,strategy:Oa,children:e.map(S=>c.jsx(Wb,{block:S,blocks:e,setBlocks:t,focusedBlockId:n,setFocusedBlockId:r,rootSetBlocks:t,draggingChildIds:v,activeId:l==null?void 0:l.id,overId:u},S.id))}),c.jsx(xh,{children:l?c.jsx("div",{className:"drag-overlay-block",children:c.jsx(e_,{block:l,blocks:e,setBlocks:()=>{},focusedBlockId:null,setFocusedBlockId:()=>{},dragHandleProps:{},parentBlock:null,rootSetBlocks:()=>{},draggingChildIds:[]})}):null})]})})]})}function kO({block:e,depth:t,isSelected:n,isCurrent:r,isOver:a,dropPosition:i,activeId:s,hasChildren:l,text:o,onClick:u,showBottomLine:f,isEditing:d,editingText:m,onDoubleClick:h,onEditChange:p,onSaveEdit:b,onCancelEdit:x,onAddChildBlock:v,onDeleteBlock:g,onToggleTodo:y,onToggleMemo:w}){const{attributes:E,listeners:j,setNodeRef:S}=Eh({id:e.id}),T=_.useRef(null),A=_.useRef(!1);_.useEffect(()=>{d&&T.current&&(T.current.style.height="auto",T.current.style.height=T.current.scrollHeight+"px")},[d,m]);const O=e.id===s,N=a&&i==="top"&&s&&s!==e.id,V=a&&i==="bottom"&&s&&s!==e.id||f,Z=a&&i==="center"&&s&&s!==e.id,ne={cursor:d?"text":"grab",opacity:O?.4:1},oe=d?{}:{...E,...j};return c.jsxs("div",{ref:S,style:ne,"data-block-id":e.id,"data-drop-zone":a?i:"",className:`viewer-block ${n?"selected":""} ${r?"current-selected":""} ${l?"has-children":""} ${N?"show-drop-line-top":""} ${V?"show-drop-line-bottom":""} ${Z?"show-as-child-target":""} ${d?"editing":""}`,onClick:d?void 0:u,onDoubleClick:d?void 0:h,...oe,children:[c.jsx("div",{className:"block-content-area",children:d?c.jsx("textarea",{ref:T,className:"block-edit-input",value:m,onChange:C=>p(C.target.value),onKeyDown:C=>{C.key==="Enter"&&!C.shiftKey?(C.preventDefault(),C.stopPropagation(),A.current=!0,b(),T.current&&T.current.blur()):C.key==="Escape"&&(C.preventDefault(),C.stopPropagation(),A.current=!0,x(),T.current&&T.current.blur())},onBlur:()=>{A.current||b(),A.current=!1},autoFocus:!0,rows:1}):c.jsx("div",{className:"block-text",children:o||" "})}),c.jsx("div",{className:"block-actions-area",children:d?c.jsxs("div",{className:"block-edit-buttons",children:[c.jsx("button",{className:`todo-button ${e.isTodo?"active":""}`,onMouseDown:C=>C.preventDefault(),onClick:C=>{C.stopPropagation(),y(e.id)},title:"TODO  ",children:e.isTodo?"":""}),c.jsx("button",{className:`memo-button ${e.memo?"has-memo":""}`,onMouseDown:C=>C.preventDefault(),onClick:C=>{C.stopPropagation(),w(e.id)},title:"",children:""}),c.jsx("button",{className:"add-child-button",onMouseDown:C=>C.preventDefault(),onClick:C=>{C.stopPropagation(),b(),v(e.id)},title:"  ",children:""}),c.jsx("button",{className:"delete-block-button",onMouseDown:C=>C.preventDefault(),onClick:C=>{C.stopPropagation(),window.confirm("  ?")&&g(e.id)},title:" ",children:""})]}):l&&c.jsx("div",{className:"block-arrow",children:n?"":""})})]})}function UO({blocks:e=[],setBlocks:t,onSave:n,onClose:r}){const[a,i]=_.useState(!0),[s,l]=_.useState([]),[o,u]=_.useState(null),[f,d]=_.useState(null),[m,h]=_.useState(null),[p,b]=_.useState(null),[x,v]=_.useState(""),g=_.useRef({x:0,y:0}),y=_.useRef(null),w=_.useRef(null),E=vh(ki(jl,{activationConstraint:{delay:500,tolerance:8}}));_.useEffect(()=>{if(s.length===0)return;const I=s.length-1,R=s[I];R&&setTimeout(()=>{let z=null;if(R==="ADD_BUTTON"){const M=document.querySelectorAll(".viewer-column");M[I]&&(z=M[I].querySelector(".add-block-button"))}else z=document.querySelector(`[data-block-id="${R}"]`);z&&z.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},50)},[s]),_.useEffect(()=>{const I=R=>{if(p)return;const z=s.length>0?s.length-1:0,M=s[z],ee=M==="ADD_BUTTON",G=S(z),re=G.findIndex(U=>U.id===M);switch(R.key){case"Enter":{if(R.preventDefault(),ee)C(z);else if(M){const U=j(e,M);U&&(b(M),v(Re(U)))}break}case"ArrowUp":{if(R.preventDefault(),ee){if(G.length>0){const U=G[G.length-1].id,ie=s.slice(0,z);ie[z]=U,l(ie)}}else if(re>0){const U=G[re-1].id,ie=s.slice(0,z);ie[z]=U,l(ie)}break}case"ArrowDown":{if(R.preventDefault(),re===G.length-1){const U=s.slice(0,z);U[z]="ADD_BUTTON",l(U)}else if(re<G.length-1&&!ee){const U=G[re+1].id,ie=s.slice(0,z);ie[z]=U,l(ie)}break}case"ArrowLeft":{R.preventDefault(),s.length>0&&l(s.slice(0,-1));break}case"ArrowRight":{if(R.preventDefault(),M&&M!=="ADD_BUTTON"){const U=j(e,M);if(U)if(U.children&&U.children.length>0){const ie=[...s,U.children[0].id];l(ie)}else{const ie=[...s,"ADD_BUTTON"];l(ie)}}else G.length>0&&l([G[0].id]);break}case"Tab":{if(R.preventDefault(),M&&M!=="ADD_BUTTON"){const U=j(e,M);if(U)if(U.children&&U.children.length>0){const ie=[...s,U.children[0].id];l(ie)}else{const ie=[...s,"ADD_BUTTON"];l(ie)}}else G.length>0&&l([G[0].id]);break}}R.key==="Tab"&&R.shiftKey&&(R.preventDefault(),s.length>0&&l(s.slice(0,-1)))};return window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)}},[s,p,e]);const j=(I,R)=>{for(const z of I){if(z.id===R)return z;if(z.children){const M=j(z.children,R);if(M)return M}}return null},S=I=>{if(I===0)return e||[];let R=e;for(let z=0;z<I;z++){const M=s[z];if(!M)return[];const ee=R.find(G=>G.id===M);if(!ee||!ee.children||ee.children.length===0)return[];R=ee.children}return R},T=(I,R,z)=>{if(p||o)return;const M=s.slice(0,I);M[I]=R,l(M)},A=(I,R)=>{R.stopPropagation();const z=j(e,I);z&&(b(I),v(Re(z)))},O=()=>{if(!p||!t)return;const I=JSON.parse(JSON.stringify(e)),R=(z,M,ee)=>{for(let G=0;G<z.length;G++){if(z[G].id===M)return Array.isArray(z[G].content)?z[G].content=[{text:ee}]:z[G].content=ee,!0;if(z[G].children&&R(z[G].children,M,ee))return!0}return!1};R(I,p,x),t(I),b(null),v(""),n&&setTimeout(()=>{n()},100)},N=()=>{b(null),v("")},V=I=>{if(!t)return;const R=JSON.parse(JSON.stringify(e)),z=(ee,G)=>{for(let re=0;re<ee.length;re++){if(ee[re].id===G){const U=`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ie={id:U,content:"",children:[]};return ee[re].children||(ee[re].children=[]),ee[re].children.push(ie),U}if(ee[re].children){const U=z(ee[re].children,G);if(U)return U}}return null};if(z(R,I)){t(R),b(null),v("");const ee=B(R,I);if(ee!==-1){const G=s.slice(0,ee);G[ee]=I,l(G)}n&&setTimeout(()=>{n()},100)}},Z=I=>{if(!t)return;const R=JSON.parse(JSON.stringify(e)),z=(M,ee)=>{for(let G=0;G<M.length;G++){if(M[G].id===ee)return M.splice(G,1),!0;if(M[G].children&&z(M[G].children,ee))return!0}return!1};if(z(R,I)){t(R),b(null),v("");const M=s.filter(ee=>ee!==I);l(M),n&&setTimeout(()=>{n()},100)}},ne=I=>{if(!t)return;const R=JSON.parse(JSON.stringify(e)),z=(M,ee)=>{for(let G=0;G<M.length;G++){if(M[G].id===ee)return M[G].isTodo=!M[G].isTodo,M[G].isTodo||(M[G].isCompleted=!1),!0;if(M[G].children&&z(M[G].children,ee))return!0}return!1};z(R,I)&&(t(R),n&&setTimeout(()=>{n()},100))},oe=I=>{if(!t)return;const R=j(e,I);if(!R)return;const z=R.memo||"",M=prompt(" :",z);if(M===null)return;const ee=JSON.parse(JSON.stringify(e)),G=(re,U,ie)=>{for(let he=0;he<re.length;he++){if(re[he].id===U)return re[he].memo=ie,!0;if(re[he].children&&G(re[he].children,U,ie))return!0}return!1};G(ee,I,M)&&(t(ee),n&&setTimeout(()=>{n()},100))},C=I=>{if(!t)return;const R=JSON.parse(JSON.stringify(e)),z=`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,M={id:z,content:"",children:[]};if(I===0)R.push(M);else{const ee=s[I-1];if(!ee)return;const G=re=>{for(let U=0;U<re.length;U++){if(re[U].id===ee)return re[U].children||(re[U].children=[]),re[U].children.push(M),!0;if(re[U].children&&G(re[U].children))return!0}return!1};G(R)}t(R),setTimeout(()=>{b(z),v("")},50),n&&setTimeout(()=>{n()},100)},B=(I,R,z=0)=>{for(const M of I){if(M.id===R)return z;if(M.children){const ee=B(M.children,R,z+1);if(ee!==-1)return ee}}return-1},Q=(I,R)=>{if(!I||R===0)return null;const z=document.querySelector(`[data-block-id="${I}"]`);if(!z)return"top";const M=z.getBoundingClientRect(),G=(R-M.top)/M.height;let re;if(G<0?re="top":G>1?re="bottom":G<.25?re="top":G>.75?re="bottom":re="center",re==="center"&&j(e,I)){const ie=B(e,I);if(ie!==-1){const he=s.slice(0,ie);he[ie]=I,JSON.stringify(he)!==JSON.stringify(s)&&l(he)}}return re},fe=(I,R,z)=>{if(!t)return;const M=JSON.parse(JSON.stringify(e));let ee=null;const G=(U,ie)=>{for(let he=0;he<U.length;he++){if(U[he].id===ie)return ee=U.splice(he,1)[0],!0;if(U[he].children&&G(U[he].children,ie))return!0}return!1};if(G(M,I),!ee)return;const re=(U,ie,he,F)=>{for(let ae=0;ae<U.length;ae++){if(U[ae].id===ie){const le=F==="bottom"?ae+1:ae;return U.splice(le,0,he),!0}if(U[ae].children&&re(U[ae].children,ie,he,F))return!0}return!1};re(M,R,ee,z)&&t(M)},ve=(I,R)=>{if(!t)return;const z=JSON.parse(JSON.stringify(e));let M=null;const ee=(U,ie)=>{for(let he=0;he<U.length;he++){if(U[he].id===ie)return M=U.splice(he,1)[0],!0;if(U[he].children&&ee(U[he].children,ie))return!0}return!1};if(ee(z,I),!M)return;const G=(U,ie,he)=>{for(let F=0;F<U.length;F++){if(U[F].id===ie)return U[F].children||(U[F].children=[]),U[F].children.push(he),!0;if(U[F].children&&G(U[F].children,ie,he))return!0}return!1};if(!G(z,R,M))return;if(t(z),j(z,R)){const U=(he,F,ae=0)=>{for(const le of he){if(le.id===F)return ae;if(le.children){const Ee=U(le.children,F,ae+1);if(Ee!==-1)return Ee}}return-1},ie=U(z,R);if(ie!==-1){const he=s.slice(0,ie);he[ie]=R,l(he)}}},gt=I=>{const{active:R,activatorEvent:z}=I,M=j(e,R.id);u(M),w.current=R.id,document.body.classList.add("dragging"),z&&z.clientY!==void 0&&(g.current={x:z.clientX||0,y:z.clientY});const ee=re=>{g.current={x:re.clientX,y:re.clientY};const U=y.current||w.current;if(U){const ie=Q(U,re.clientY);ie&&h(ie)}},G=re=>{if(re.touches[0]){g.current={x:re.touches[0].clientX,y:re.touches[0].clientY};const U=y.current||w.current;if(U){const ie=Q(U,re.touches[0].clientY);ie&&h(ie)}}};window.addEventListener("mousemove",ee),window.addEventListener("touchmove",G),window._dragMoveCleanup=()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("touchmove",G)}},Ue=I=>{const{over:R}=I;if(!R){d(null),h(null),y.current=null;return}y.current=R.id,d(R.id);const z=g.current.y,M=Q(R.id,z);M&&h(M)},ze=async I=>{const{active:R,over:z}=I;let M=!1;z&&R.id!==z.id&&(m==="center"?(ve(R.id,z.id),M=!0):(fe(R.id,z.id,m),M=!0)),u(null),d(null),h(null),y.current=null,w.current=null,document.body.classList.remove("dragging"),window._dragMoveCleanup&&(window._dragMoveCleanup(),window._dragMoveCleanup=null),M&&n&&setTimeout(()=>{n()},100)},Ce=()=>{u(null),d(null),h(null),y.current=null,w.current=null,document.body.classList.remove("dragging"),window._dragMoveCleanup&&(window._dragMoveCleanup(),window._dragMoveCleanup=null)},Re=I=>typeof I.content=="string"?I.content:Array.isArray(I.content)?I.content.map(R=>R.text||"").join(""):"",He=Math.min(s.length+1,10);return c.jsx(Sh,{sensors:E,collisionDetection:ph,onDragStart:gt,onDragOver:Ue,onDragEnd:ze,onDragCancel:Ce,children:c.jsxs("div",{className:`key-thoughts-viewer-page ${a?"dark-mode":""}`,children:[c.jsxs("header",{className:"viewer-header",children:[c.jsx("button",{className:"viewer-close-button",onClick:r,"aria-label":" ",children:""}),c.jsx("h2",{className:"viewer-title",children:" "}),c.jsx("button",{className:"dark-mode-toggle",onClick:()=>i(!a),"aria-label":a?"  ":"  ",children:a?"Light":"Dark"})]}),c.jsx("main",{className:"viewer-content",children:c.jsx("div",{className:"columns-container",children:Array.from({length:He}).map((I,R)=>{const z=S(R),M=s[R];if(z.length===0&&R>0&&!s[R-1])return null;const ee=z.map(U=>U.id),G=f?B(e,f):-1,re=G!==-1&&G+1===R&&m==="center"&&o;return c.jsxs("div",{className:"viewer-column",children:[c.jsx("div",{className:"column-header",children:R===0?"A":R===1?"B":R===2?"C":String.fromCharCode(65+R)}),c.jsx(Da,{items:ee,strategy:Oa,children:c.jsxs("div",{className:"column-blocks",children:[z.length===0&&re?c.jsx("div",{className:"empty-column-drop-line"}):z.map((U,ie)=>{const he=U.id===M,F=U.id===f,ae=U.children&&U.children.length>0,le=Re(U),Ut=ie===z.length-1&&re,tt=s.length>0&&s[s.length-1]===U.id;return c.jsx(kO,{block:U,depth:R,isSelected:he,isCurrent:tt,isOver:F,dropPosition:m,activeId:o==null?void 0:o.id,hasChildren:ae,text:le,onClick:()=>T(R,U.id),showBottomLine:Ut,isEditing:p===U.id,editingText:x,onDoubleClick:It=>A(U.id,It),onEditChange:v,onSaveEdit:O,onCancelEdit:N,onAddChildBlock:V,onDeleteBlock:Z,onToggleTodo:ne,onToggleMemo:oe},U.id)}),(R===0||s[R-1]!=="ADD_BUTTON")&&c.jsx("button",{className:`add-block-button ${M==="ADD_BUTTON"?"selected":""}`,onClick:()=>C(R),children:"+  "})]})})]},R)})})}),c.jsx(xh,{children:o?c.jsxs("div",{className:"viewer-block dragging-overlay",children:[c.jsx("div",{className:"block-content-area",children:c.jsx("div",{className:"block-text",children:Re(o)||" "})}),c.jsx("div",{className:"block-actions-area",children:o.children&&o.children.length>0&&c.jsx("div",{className:"block-arrow",children:""})})]}):null})]})})}function zO({showDummyModal:e,onClose:t,onCreateDummyData:n,onRemoveDuplicates:r,dummySessions:a,onDeleteDummySession:i,onDeleteAllDummies:s,formatDate:l}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content routine-modal",onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"routine-add-section",children:[c.jsx("h3",{children:"  "}),c.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:"14~18    20    ."}),c.jsx("button",{onClick:n,className:"add-routine-button",style:{width:"100%"},children:"    (20)"})]}),c.jsxs("div",{className:"routine-add-section",children:[c.jsx("h3",{children:"  "}),c.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:"         ."}),c.jsx("button",{onClick:r,className:"add-routine-button",style:{width:"100%",background:"#ff6b6b"},children:"   "})]}),c.jsxs("div",{className:"routine-list",style:{marginTop:"20px"},children:[c.jsx("h3",{children:"  "}),a.length===0?c.jsx("p",{className:"empty-message",children:"   ."}):c.jsxs(c.Fragment,{children:[a.map((o,u)=>c.jsxs("div",{className:"routine-item",children:[c.jsxs("div",{className:"routine-item-content",children:[c.jsxs("span",{className:"routine-text",children:[" #",u+1,": ",o.sessionId]}),c.jsxs("div",{className:"routine-days",children:[c.jsxs("span",{className:"routine-day-badge",children:[" ",o.count,""]}),o.historyCount>0&&c.jsxs("span",{className:"routine-day-badge",children:[" ",o.historyCount,""]}),c.jsx("span",{className:"routine-day-badge",style:{fontSize:"11px"},children:l(o.createdAt)})]})]}),c.jsx("div",{className:"routine-item-actions",children:c.jsx("button",{onClick:()=>{window.confirm(` #${u+1} ?`)&&i(o.sessionId)},className:"routine-delete-button",title:"  ",children:""})})]},o.sessionId)),c.jsx("button",{onClick:()=>{window.confirm("   ?")&&s()},className:"routine-delete-button",style:{width:"100%",marginTop:"15px",padding:"12px"},children:"    "})]})]})]})}):null}function $O({showGanttChart:e,onClose:t,ganttData:n,ganttPeriod:r,setGanttPeriod:a,formatDateOnly:i}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content gantt-modal",onClick:s=>s.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  -  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"gantt-filter",children:c.jsx("div",{className:"gantt-period-buttons",children:[{value:"1week",label:" 1"},{value:"2weeks",label:" 2"},{value:"1month",label:" 1"},{value:"3months",label:" 3"},{value:"6months",label:" 6"},{value:"all",label:""}].map(s=>c.jsx("button",{className:`period-button ${r===s.value?"active":""}`,onClick:()=>a(s.value),children:s.label},s.value))})}),c.jsx("div",{className:"gantt-content",children:n.length===0?c.jsx("p",{className:"empty-message",children:" ."}):c.jsx("div",{className:"gantt-chart",children:(()=>{const s=n.flatMap(d=>d.dates),l=[...new Set(s)].sort((d,m)=>new Date(d)-new Date(m));if(l.length===0)return c.jsx("p",{className:"empty-message",children:"  ."});const o=new Date(l[0]),u=new Date(l[l.length-1]),f=[];for(let d=new Date(o);d<=u;d.setDate(d.getDate()+1))f.push(new Date(d).toISOString().split("T")[0]);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"gantt-header",children:[c.jsx("div",{className:"gantt-task-column",children:" "}),c.jsx("div",{className:"gantt-timeline",children:f.map(d=>c.jsx("div",{className:"gantt-date-cell",children:i(new Date(d+"T00:00:00")).split("(")[0]},d))})]}),n.map((d,m)=>{const h=new Set(d.dates);return c.jsxs("div",{className:"gantt-row",children:[c.jsx("div",{className:"gantt-task-column",title:d.text,children:c.jsx("span",{className:d.completed?"completed-task":"",children:d.text})}),c.jsx("div",{className:"gantt-timeline",children:f.map(p=>{if(!h.has(p))return c.jsx("div",{className:"gantt-date-cell"},p);const x=p===d.startDate,v=p===d.completedDate;let g="gantt-date-cell has-task";return x?g+=" start-date":v?g+=" completed-date":g+=" middle-date",c.jsx("div",{className:g,children:v?c.jsx("span",{className:"completed-circle",children:""}):""},p)})})]},d.originalId)})]})})()})})]})}):null}function BO({showEncouragementModal:e,onClose:t,encouragementMessages:n,newEncouragementMessage:r,setNewEncouragementMessage:a,onAddEncouragementMessage:i,editingEncouragementId:s,editingEncouragementText:l,setEditingEncouragementId:o,setEditingEncouragementText:u,onUpdateEncouragementMessage:f,onDeleteEncouragementMessage:d}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content encouragement-modal",onClick:m=>m.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"encouragement-add-section",children:[c.jsx("input",{type:"text",value:r,onChange:m=>a(m.target.value),placeholder:"   ...",className:"encouragement-input",onKeyDown:async m=>{m.key==="Enter"&&r.trim()!==""&&(await i(r.trim()),a(""))}}),c.jsx("button",{onClick:async()=>{r.trim()!==""&&(await i(r.trim()),a(""))},className:"add-encouragement-button",disabled:r.trim()==="",children:""})]}),c.jsx("div",{className:"encouragement-list",children:n.length===0?c.jsx("p",{className:"empty-message",children:"   ."}):n.map((m,h)=>c.jsx("div",{className:"encouragement-item",children:s===h?c.jsxs(c.Fragment,{children:[c.jsx("input",{type:"text",value:l,onChange:p=>u(p.target.value),className:"encouragement-edit-input",placeholder:" "}),c.jsxs("div",{className:"encouragement-item-actions",children:[c.jsx("button",{onClick:async()=>{l.trim()!==""&&(await f(h,l.trim()),o(null),u(""))},className:"encouragement-save-button",disabled:l.trim()==="",children:""}),c.jsx("button",{onClick:()=>{o(null),u("")},className:"encouragement-cancel-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"encouragement-text",children:m}),c.jsxs("div",{className:"encouragement-item-actions",children:[c.jsx("button",{onClick:()=>{o(h),u(m)},className:"encouragement-edit-button",title:"",children:""}),c.jsx("button",{onClick:async()=>{window.confirm("   ?")&&await d(h)},className:"encouragement-delete-button",title:"",children:""})]})]})},h))})]})}):null}function LO({showKeyThoughtsHistory:e,onClose:t,keyThoughtsHistory:n,onRestoreVersion:r}){return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),style:{maxWidth:"800px",maxHeight:"80vh"},children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"    "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",style:{maxHeight:"60vh",overflowY:"auto"},children:n.length===0?c.jsx("p",{style:{textAlign:"center",color:"#999",padding:"20px"},children:"  ."}):c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:n.map(a=>c.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"16px",backgroundColor:"#f9f9f9"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[c.jsxs("div",{children:[c.jsx("div",{style:{fontWeight:"bold",fontSize:"14px"},children:new Date(a.created_at).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}),a.description&&c.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:a.description})]}),c.jsx("button",{onClick:()=>r(a.id),style:{padding:"6px 12px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:""})]}),c.jsx("div",{style:{fontSize:"12px",color:"#666",maxHeight:"100px",overflowY:"auto",backgroundColor:"white",padding:"8px",borderRadius:"4px",whiteSpace:"pre-wrap"},children:Array.isArray(a.content)?a.content.map((i,s)=>c.jsxs("div",{style:{marginBottom:"4px"},children:[i.type==="toggle"?" ":"",i.content||"( )"]},s)):"( )"})]},a.id))})})]})}):null}function HO({isOpen:e,onClose:t,onAddSection:n}){const[r,a]=_.useState(""),[i,s]=_.useState(""),l=["","","","","","","","","","","",""],o=u=>{u.preventDefault(),r.trim()&&(n({name:r.trim(),icon:i}),a(""),s(""),t())};return e?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content add-section-modal",onClick:u=>u.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{className:"modal-close-button",onClick:t,children:""})]}),c.jsxs("form",{onSubmit:o,className:"add-section-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" "}),c.jsx("input",{type:"text",value:r,onChange:u=>a(u.target.value),placeholder:": ,  , ...",className:"section-name-input",autoFocus:!0,maxLength:20})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:" "}),c.jsx("div",{className:"emoji-grid",children:l.map(u=>c.jsx("button",{type:"button",className:`emoji-button ${i===u?"selected":""}`,onClick:()=>s(u),children:u},u))}),c.jsx("div",{className:"custom-emoji-input",children:c.jsx("input",{type:"text",value:i,onChange:u=>{const f=Array.from(u.target.value);s(f.slice(0,2).join(""))},placeholder:" ",className:"emoji-input"})})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:""}),c.jsxs("div",{className:"section-preview",children:[i," ",r||" "]})]}),c.jsxs("div",{className:"modal-actions",children:[c.jsx("button",{type:"button",onClick:t,className:"cancel-button",children:""}),c.jsx("button",{type:"submit",className:"submit-button",disabled:!r.trim(),children:""})]})]})]})}):null}function qO({show:e,onClose:t,hiddenSections:n,sectionOrder:r,sectionTitles:a,customSections:i,onShowSection:s}){if(!e)return null;const l=o=>{if(a[o])return a[o];const u=i.find(f=>f.id===o);return u?`${u.icon} ${u.name}`:o};return n.length===0?c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("p",{className:"empty-message",children:"  ."})})]})}):c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content hidden-sections-modal",onClick:o=>o.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"   "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("div",{className:"hidden-sections-list",children:n.map(o=>c.jsxs("div",{className:"hidden-section-item",children:[c.jsx("span",{className:"hidden-section-title",children:l(o)}),c.jsx("button",{className:"show-section-button",onClick:()=>{s(o)},title:" ",children:" "})]},o))})})]})})}function fy({todo:e,onClose:t,onDeleteThisOnly:n,onDeleteFromNow:r,onDeleteAll:a}){const[i,s]=_.useState("this-only"),[l,o]=_.useState(null),u=()=>{i==="this-only"?n(e):i==="from-now"?r(e):i==="all"&&a(e),t()},f=[{id:"this-only",label:" ",subtitle:" ",tooltip:"  ,  ,   "},{id:"from-now",label:"   ",subtitle:" ",tooltip:"  ,  ,   "},{id:"all",label:" ",subtitle:" ",tooltip:"  ,  ,   "}];return c.jsx("div",{className:"modal-overlay",onClick:t,children:c.jsxs("div",{className:"modal-content delete-confirm-modal-v2",onClick:d=>d.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:t,className:"modal-close-button",children:""})]}),c.jsxs("div",{className:"delete-confirm-content-v2",children:[c.jsxs("p",{className:"delete-info-text",children:["    .",c.jsx("br",{}),"    ."]}),c.jsx("div",{className:"delete-options-v2",children:f.map(d=>c.jsxs("div",{className:"delete-option-item",children:[c.jsxs("label",{className:"delete-option-label",children:[c.jsx("input",{type:"radio",name:"delete-option",value:d.id,checked:i===d.id,onChange:m=>s(m.target.value)}),c.jsxs("div",{className:"option-text",children:[c.jsx("span",{className:"option-main",children:d.label}),c.jsx("span",{className:"option-sub",children:d.subtitle})]})]}),c.jsx("button",{className:"option-help-btn",onMouseEnter:()=>o(d.id),onMouseLeave:()=>o(null),onClick:m=>{m.preventDefault(),o(l===d.id?null:d.id)},children:c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[c.jsx("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("text",{x:"8",y:"11.5",textAnchor:"middle",fontSize:"11",fill:"currentColor",fontWeight:"600",children:"?"})]})}),l===d.id&&c.jsx("div",{className:"option-tooltip",children:d.tooltip})]},d.id))}),c.jsxs("div",{className:"delete-modal-actions",children:[c.jsx("button",{className:"btn-cancel",onClick:t,children:""}),c.jsx("button",{className:"btn-confirm",onClick:u,children:""})]})]})]})})}function IO({authLoading:e,session:t,handleGoogleLogin:n}){return e?c.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:c.jsxs("div",{style:{textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),c.jsx("div",{children:" ..."})]})}):t?null:c.jsx("div",{className:"app",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:c.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",maxWidth:"400px"},children:[c.jsx("h1",{style:{fontSize:"2.5rem",marginBottom:"1rem"},children:" Todo Note"}),c.jsx("p",{style:{fontSize:"1.1rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"2rem"},children:"     "}),c.jsxs("button",{onClick:n,style:{padding:"1rem 2rem",fontSize:"1.1rem",background:"#646cff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 auto"},children:[c.jsx("span",{children:""}),"Google "]})]})})}function YO(e){const[t,n]=_.useState(["memo","routine","normal","key-thoughts"]),[r,a]=_.useState(!1),i=async()=>{var d;if((d=e==null?void 0:e.user)!=null&&d.id)try{const{data:m,error:h}=await ge.from("user_settings").select("setting_value").eq("setting_key","section_order").maybeSingle();if(h){console.error("   :",h.message);return}if(m&&m.setting_value){const p=JSON.parse(m.setting_value);n(p)}}catch(m){console.error("   :",m.message)}},s=async d=>{var m;if((m=e==null?void 0:e.user)!=null&&m.id)try{const{data:h,error:p}=await ge.from("user_settings").select("id").eq("setting_key","section_order").maybeSingle();if(p){console.error("   :",p.message);return}h?await ge.from("user_settings").update({setting_value:JSON.stringify(d),updated_at:new Date().toISOString()}).eq("setting_key","section_order"):await ge.from("user_settings").insert([{setting_key:"section_order",setting_value:JSON.stringify(d),user_id:e.user.id}])}catch(h){console.error("   :",h.message)}};return{sectionOrder:t,setSectionOrder:n,isReorderMode:r,setIsReorderMode:a,fetchSectionOrder:i,saveSectionOrder:s,moveSectionLeft:d=>{n(m=>{const h=m.indexOf(d);if(h<=0)return m;const p=[...m];return[p[h-1],p[h]]=[p[h],p[h-1]],s(p),p})},moveSectionRight:d=>{n(m=>{const h=m.indexOf(d);if(h===-1||h>=m.length-1)return m;const p=[...m];return[p[h],p[h+1]]=[p[h+1],p[h]],s(p),p})},handleSectionDragEnd:d=>{const{active:m,over:h}=d;r&&t.includes(m.id)&&h&&m.id!==(h==null?void 0:h.id)&&n(p=>{const b=p.indexOf(m.id),x=p.indexOf(h.id),v=Uc(p,b,x);return s(v),v})},handleSectionsContainerDoubleClick:d=>{r&&d.target===d.currentTarget&&a(!1)}}}function VO(e){const[t,n]=_.useState(""),[r,a]=_.useState(!1),[i,s]=_.useState(!1),[l,o]=_.useState(""),u=_.useRef(null),f=async()=>{try{const{data:b,error:x}=await ge.from("spec_memos").select("content").order("created_at",{ascending:!1}).limit(1);if(x)throw x;const v=b&&b.length>0?b[0].content:"";n(v),o(v)}catch(b){console.error("   :",b.message),n(""),o("")}},d=()=>{a(!0),o(t),setTimeout(()=>{u.current&&u.current.focus()},0)},m=async()=>{var b;if(!i)try{s(!0);const{data:x}=await ge.from("spec_memos").select("id").order("created_at",{ascending:!1}).limit(1);x&&x.length>0?await ge.from("spec_memos").update({content:t,updated_at:new Date().toISOString()}).eq("id",x[0].id):await ge.from("spec_memos").insert([{content:t,user_id:(b=e==null?void 0:e.user)==null?void 0:b.id}]),o(t),a(!1)}catch(x){console.error("  :",x.message),alert("  .")}finally{s(!1)}},h=()=>{n(l),a(!1)};return{memoContent:t,setMemoContent:n,isEditingMemoInline:r,setIsEditingMemoInline:a,isSavingMemo:i,memoOriginalContent:l,memoTextareaRef:u,fetchMemoContent:f,handleStartEditMemoInline:d,handleSaveMemoInline:m,handleCancelEditMemoInline:h,handleMemoKeyDown:b=>{(b.metaKey||b.ctrlKey)&&b.key==="s"&&(b.preventDefault(),m()),b.key==="Escape"&&(b.preventDefault(),h())}}}function GO(e){if(!Array.isArray(e)||e.length===0)return[];const t=new Map;e.forEach(a=>{t.set(a.block_id,{id:a.block_id,type:a.type||"toggle",content:a.content||"",isOpen:a.is_open!==void 0?a.is_open:!0,isTodo:a.is_todo||!1,isCompleted:a.is_completed||!1,memo:a.memo||"",children:[],_dbId:a.id,_parentId:a.parent_id,_position:a.position,_depth:a.depth,_createdAt:a.created_at,_updatedAt:a.updated_at})});const n=[];e.forEach(a=>{const i=t.get(a.block_id);if(a.parent_id===null||a.parent_id===void 0)n.push(i);else{const s=t.get(a.parent_id);s?s.children.push(i):(console.warn(`Parent not found for block ${a.block_id}, moving to root`),n.push(i))}});const r=a=>{a.sort((i,s)=>(i._position||0)-(s._position||0)),a.forEach(i=>{i.children.length>0&&r(i.children)})};return r(n),n}function nf(e,t=null,n=0){if(!Array.isArray(e))return[];let r=[];return e.forEach((a,i)=>{const{children:s,_dbId:l,_parentId:o,_position:u,_depth:f,_createdAt:d,_updatedAt:m,...h}=a,p={block_id:h.id||a.id,content:h.content||"",type:h.type||"toggle",parent_id:t,position:i,depth:n,is_open:h.isOpen!==void 0?h.isOpen:!0,is_todo:h.isTodo||!1,is_completed:h.isCompleted||!1,memo:h.memo||""};if(r.push(p),s&&s.length>0){const b=nf(s,h.id||a.id,n+1);r=r.concat(b)}}),r}function hy(){return`${Date.now()}.${Math.random().toString(36).substring(2,9)}`}function rf(e){return Array.isArray(e)?e.map(t=>({...t,children:Array.isArray(t.children)?rf(t.children):[]})):[]}function KO(e){const[t,n]=_.useState([{id:hy(),type:"toggle",content:"",children:[],isOpen:!0}]),[r,a]=_.useState(!1),[i,s]=_.useState(!1),l=_.useRef(null),o=_.useRef(null),[u,f]=_.useState(null),[d,m]=_.useState([]),[h,p]=_.useState(!1),b=async()=>{var O;if((O=e==null?void 0:e.user)!=null&&O.id){a(!0);try{const{data:N,error:V}=await ge.from("key_thought_blocks").select("*").eq("user_id",e.user.id).order("position",{ascending:!0});if(V){console.error("  :",V.message);return}if(N&&N.length>0){const Z=GO(N);n(Z),l.current=JSON.parse(JSON.stringify(Z))}}catch(N){console.error("  :",N.message)}finally{a(!1)}}},x=async O=>{var N;if(!((N=e==null?void 0:e.user)!=null&&N.id))return null;try{const V=O.id||hy(),{data:Z,error:ne}=await ge.from("key_thought_blocks").insert([{user_id:e.user.id,block_id:V,content:O.content||"",type:O.type||"toggle",parent_id:O.parent_id||null,position:O.position||0,depth:O.depth||0,is_open:O.isOpen!==void 0?O.isOpen:!0}]).select().single();return ne?(console.error("  :",ne.message),null):Z}catch(V){return console.error("  :",V.message),null}},v=async(O,N)=>{var V;if(!((V=e==null?void 0:e.user)!=null&&V.id))return!1;try{const Z={};N.content!==void 0&&(Z.content=N.content),N.type!==void 0&&(Z.type=N.type),N.isOpen!==void 0&&(Z.is_open=N.isOpen),N.position!==void 0&&(Z.position=N.position),N.parent_id!==void 0&&(Z.parent_id=N.parent_id),N.depth!==void 0&&(Z.depth=N.depth),Z.updated_at=new Date().toISOString();const{error:ne}=await ge.from("key_thought_blocks").update(Z).eq("user_id",e.user.id).eq("block_id",O);return ne?(console.error("  :",ne.message),!1):!0}catch(Z){return console.error("  :",Z.message),!1}},g=async O=>{var N;if(!((N=e==null?void 0:e.user)!=null&&N.id))return!1;try{const{error:V}=await ge.from("key_thought_blocks").delete().eq("user_id",e.user.id).eq("block_id",O);return V?(console.error("  :",V.message),!1):!0}catch(V){return console.error("  :",V.message),!1}},y=async(O,N,V,Z)=>{var ne;if(!((ne=e==null?void 0:e.user)!=null&&ne.id))return!1;try{const{error:oe}=await ge.from("key_thought_blocks").update({parent_id:N,position:V,depth:Z,updated_at:new Date().toISOString()}).eq("user_id",e.user.id).eq("block_id",O);return oe?(console.error("  :",oe.message),!1):!0}catch(oe){return console.error("  :",oe.message),!1}},w=async()=>{var O;if(!((O=e==null?void 0:e.user)!=null&&O.id))return!1;s(!0);try{await ge.from("key_thought_blocks").delete().eq("user_id",e.user.id);const N=nf(t);if(N.length>0){const{error:V}=await ge.from("key_thought_blocks").insert(N.map(Z=>({...Z,user_id:e.user.id})));if(V)return console.error("  :",V.message),!1}return await j(t),l.current=JSON.parse(JSON.stringify(t)),!0}catch(N){return console.error("  :",N.message),!1}finally{s(!1)}},E=(O,N)=>{if(!O||O.length===0||O.length!==N.length)return!0;const V=(Z,ne)=>{for(let oe=0;oe<Z.length;oe++){const C=Z[oe],B=ne[oe];if(C.type!==B.type)return!0;const Q=C.children?C.children.length:0,fe=B.children?B.children.length:0;if(Q!==fe)return!0;const ve=C.content||"",gt=B.content||"";if(Math.abs(ve.length-gt.length)>=20||fe>0&&V(C.children,B.children))return!0}return!1};return V(O,N)},j=async O=>{var N;if((N=e==null?void 0:e.user)!=null&&N.id)try{if(!E(l.current,O))return;const{error:V}=await ge.from("key_thoughts_history").insert([{content:O,description:" ",user_id:e.user.id}]);V&&console.error("   :",V.message)}catch(V){console.error("   :",V.message)}},S=async()=>{try{const O=new Date().toDateString();if(o.current===O)return;const N=new Date;N.setDate(N.getDate()-30);const{error:V}=await ge.from("key_thoughts_history").delete().lt("created_at",N.toISOString());V?console.error("   :",V.message):(o.current=O,console.log("   "))}catch(O){console.error("   :",O.message)}},T=async()=>{try{const{data:O,error:N}=await ge.from("key_thoughts_history").select("*").order("created_at",{ascending:!1}).limit(50);if(N){console.error("   :",N.message);return}m(O||[])}catch(O){console.error("   :",O.message)}};return{blocks:t,setBlocks:n,loading:r,isSaving:i,setIsSaving:s,lastSavedBlocksRef:l,focusedBlockId:u,setFocusedBlockId:f,keyThoughtsHistory:d,setKeyThoughtsHistory:m,showKeyThoughtsHistory:h,setShowKeyThoughtsHistory:p,fetchBlocks:b,createBlock:x,updateBlock:v,deleteBlock:g,moveBlock:y,saveAllBlocks:w,fetchKeyThoughtsHistory:T,restoreKeyThoughtsVersion:async O=>{try{const N=d.find(ne=>ne.id===O);if(!N){alert("    .");return}if(!window.confirm(`  ?
    .`))return;E(l.current,t)&&await ge.from("key_thoughts_history").insert([{content:t,description:"   ",user_id:e.user.id}]);const V=rf(N.content);n(V),await ge.from("key_thought_blocks").delete().eq("user_id",e.user.id);const Z=nf(V);Z.length>0&&await ge.from("key_thought_blocks").insert(Z.map(ne=>({...ne,user_id:e.user.id}))),await ge.from("key_thoughts_history").insert([{content:V,description:`  (${new Date(N.created_at).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})`,user_id:e.user.id}]),l.current=JSON.parse(JSON.stringify(V)),alert("  !"),p(!1),await T()}catch(N){console.error("  :",N.message),alert("    : "+N.message)}},cleanupOldHistory:S,normalizeBlocks:rf}}const t_=({type:e,supabase:t,selectedDate:n,onDeleteSuccess:r})=>({deleteThisOnly:async l=>{try{const o=Me(n),f=[...l.hidden_dates||[],o],d=e==="todo"?"todos":"routines",{error:m}=await t.from(d).update({hidden_dates:f}).eq("id",l.id);if(m)throw m;return r&&r(l.id,Iu.THIS_ONLY),{success:!0}}catch(o){return console.error(`${e}   (THIS_ONLY):`,o.message),{success:!1,error:o}}},deleteFromNow:async l=>{try{const o=Me(n),f=(l.visible_dates||[]).filter(h=>h<o),d=e==="todo"?"todos":"routines",{error:m}=await t.from(d).update({visible_dates:f,stop_carryover_from:o}).eq("id",l.id);if(m)throw m;return r&&r(l.id,Iu.FROM_NOW),{success:!0}}catch(o){return console.error(`${e}   (FROM_NOW):`,o.message),{success:!1,error:o}}},deleteAll:async l=>{try{const o=Me(n),u=e==="todo"?"todos":"routines",{error:f}=await t.from(u).update({deleted:!0,deleted_date:o}).eq("id",l.id);if(f)throw f;return e==="routine"&&await t.from("todos").update({routine_id:null}).eq("routine_id",l.id),r&&r(l.id,Iu.ALL),{success:!0}}catch(o){return console.error(`${e}   (ALL):`,o.message),{success:!1,error:o}}}}),XO=e=>["sun","mon","tue","wed","thu","fri","sat"][e],QO=({session:e,supabase:t,selectedDate:n,setTodos:r,setSuccessToastMessage:a,setShowSuccessToast:i})=>{const[s,l]=_.useState([]),[o,u]=_.useState(""),[f,d]=_.useState([]),[m,h]=_.useState(""),[p,b]=_.useState(!1),[x,v]=_.useState(!1),[g,y]=_.useState(null),[w,E]=_.useState(""),[j,S]=_.useState([]),[T,A]=_.useState(!1),[O,N]=_.useState(null),[V,Z]=_.useState([]),[ne,oe]=_.useState(!1),[C,B]=_.useState(null),Q=_.useRef(new Set),{deleteThisOnly:fe,deleteFromNow:ve,deleteAll:gt}=t_({type:"routine",supabase:t,selectedDate:n,onDeleteSuccess:(F,ae)=>{l(le=>le.filter(Ee=>Ee.id!==F)),a(" "),i(!0)}}),Ue=async()=>{var F;if((F=e==null?void 0:e.user)!=null&&F.id)try{const{data:ae,error:le}=await t.from("routines").select("*").eq("deleted",!1).order("created_at",{ascending:!1});if(le)throw le;l(ae||[])}catch(ae){console.error("  :",ae.message)}},ze=async()=>{var F;if(!(o.trim()===""||p))try{b(!0);const ae={text:o,days:f,start_date:Me(n),user_id:(F=e==null?void 0:e.user)==null?void 0:F.id};m&&(ae.time_slot=m);const{data:le,error:Ee}=await t.from("routines").insert([ae]).select();if(Ee)throw Ee;l([le[0],...s]),u(""),d([]),h("")}catch(ae){console.error("  :",ae.message)}finally{b(!1)}},Ce=async(F,ae,le,Ee=null,Ut=!1,tt="",It=null)=>{var yt;try{if(Ut){const{error:lt}=await t.from("todos").update({routine_id:null}).eq("id",F);if(lt)throw lt;r(L=>L.map(q=>q.id===F?{...q,routine_id:null}:q));return}if(Ee){const{error:lt}=await t.from("routines").update({days:le,time_slot:tt}).eq("id",Ee);if(lt)throw lt;const{error:L}=await t.from("todos").update({is_pending_routine:le.length===0}).eq("id",F);if(L)throw L;l(q=>q.map(X=>X.id===Ee?{...X,days:le,time_slot:tt}:X)),r(q=>q.map(X=>X.id===F?{...X,is_pending_routine:le.length===0}:X))}else{const lt={text:ae,days:le,time_slot:tt,start_date:It||Me(n),user_id:(yt=e==null?void 0:e.user)==null?void 0:yt.id},{data:L,error:q}=await t.from("routines").insert([lt]).select();if(q)throw q;const{error:X}=await t.from("todos").update({routine_id:L[0].id,is_pending_routine:le.length===0}).eq("id",F);if(X)throw X;r(te=>te.map(ce=>ce.id===F?{...ce,routine_id:L[0].id,is_pending_routine:le.length===0}:ce)),l(te=>[L[0],...te])}}catch(lt){console.error("  :",lt.message)}},Re=F=>{y(F.id),E(F.text),S(F.days)},He=()=>{y(null),E(""),S([])},I=async()=>{if(!(!g||w.trim()===""||j.length===0))try{const{error:F}=await t.from("routines").update({text:w.trim(),days:j}).eq("id",g);if(F)throw F;l(s.map(ae=>ae.id===g?{...ae,text:w.trim(),days:j}:ae)),He()}catch(F){console.error("  :",F.message)}},R=F=>{S(ae=>ae.includes(F)?ae.filter(le=>le!==F):[...ae,F])},z=async F=>{const ae=s.find(le=>le.id===F);ae&&(B(ae),oe(!0))},M=async F=>{var ae;if(!Q.current.has(F))try{Q.current.add(F);const le=new Date(F),Ee=XO(le.getDay()),{data:Ut,error:tt}=await t.from("routines").select("*").eq("deleted",!1);if(tt)throw tt;const It=Ut.filter(yt=>{const lt=yt.days||[],L=lt.length===0||lt.includes(Ee);if(yt.start_date){const q=new Date(yt.start_date),X=le>=q;return L&&X}return L});if(It.length===0)return;for(const yt of It){const lt=yt.text,{data:L,error:q}=await t.from("todos").select("*").eq("routine_id",yt.id).eq("deleted",!1);if(q)throw q;if(L&&L.length>1){console.warn(` ${yt.id}    (${L.length}).     .`);for(let te=1;te<L.length;te++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",L[te].id)}const X=L&&L.length>0?L[0]:null;if(X){const te=X.visible_dates||[];if(te.includes(F))continue;const ce=[...te,F].sort(),{error:ue}=await t.from("todos").update({visible_dates:ce}).eq("id",X.id);ue&&console.error("    :",ue.message)}else{const{error:te}=await t.from("todos").insert([{text:lt,completed:!1,date:F,visible_dates:[F],hidden_dates:[],order_index:0,routine_id:yt.id,user_id:(ae=e==null?void 0:e.user)==null?void 0:ae.id}]);te&&console.error("   :",te.message)}}}catch(le){console.error("   :",le.message)}finally{setTimeout(()=>{Q.current.delete(F)},1e3)}},ee=async()=>{const ae=Me(new Date);await M(ae)},G=async F=>{try{const{data:ae,error:le}=await t.from("todos").select("*").eq("routine_id",F.id).eq("deleted",!1);if(le)throw le;const Ee=ae&&ae.length>0?ae[0]:null;if(Ee&&Ee.visible_dates){const Ut=Ee.visible_dates.sort().map(tt=>({id:`${Ee.id}-${tt}`,date:tt,text:Ee.text,completed:Ee.completed,routine_id:Ee.routine_id}));Z(Ut)}else Z([]);N(F),A(!0)}catch(ae){console.error("   :",ae.message),alert("   : "+ae.message)}},re=()=>{A(!1),N(null),Z([])},U=()=>{v(!0),Ue()},ie=()=>{v(!1),u(""),d([])},he=F=>{d(ae=>ae.includes(F)?ae.filter(le=>le!==F):[...ae,F])};return _.useEffect(()=>{e&&Ue()},[e]),{routines:s,setRoutines:l,routineInput:o,selectedDays:f,selectedTimeSlot:m,isAddingRoutine:p,showRoutineModal:x,editingRoutineId:g,editingRoutineText:w,editingRoutineDays:j,showRoutineHistory:T,selectedRoutineForHistory:O,routineHistoryData:V,routineCreationInProgress:Q,showDeleteConfirmModal:ne,setShowDeleteConfirmModal:oe,routineToDelete:C,setRoutineToDelete:B,setRoutineInput:u,setSelectedTimeSlot:h,fetchRoutines:Ue,handleAddRoutine:ze,handleDeleteRoutine:z,deleteThisOnly:fe,deleteFromNow:ve,deleteAll:gt,handleStartEditRoutine:Re,handleSaveEditRoutine:I,handleCancelEditRoutine:He,handleToggleEditDay:R,handleCreateRoutineFromTodo:Ce,createRoutineTodosForDate:M,createRoutineTodos:ee,fetchRoutineHistory:G,handleCloseRoutineHistory:re,handleOpenRoutine:U,handleCloseRoutine:ie,handleToggleDay:he}},JO=(e,t,n,r,a,i,s,l,o)=>{const[u,f]=_.useState(""),[d,m]=_.useState(""),[h,p]=_.useState(""),[b,x]=_.useState(!0),[v,g]=_.useState(!1),[y,w]=_.useState(!1),[E,j]=_.useState(null),[S,T]=_.useState(!1),[A,O]=_.useState(!1),[N,V]=_.useState(""),[Z,ne]=_.useState(null),[oe,C]=_.useState(null),[B,Q]=_.useState(!1),[fe,ve]=_.useState(null),[gt,Ue]=_.useState(null),[ze,Ce]=_.useState(null),Re=_.useRef(new Set),He=_.useRef(new Set),{deleteThisOnly:I,deleteFromNow:R,deleteAll:z}=t_({type:"todo",supabase:t,selectedDate:n,onDeleteSuccess:(L,q)=>{const X=r.find(te=>te.id===L);X&&(j(X),ne({id:L,deleteType:q,item:X}),T(!0),setTimeout(()=>{T(!1),j(null),ne(null)},5e3)),a(te=>te.filter(ce=>ce.id!==L)),Q(!1),ve(null)}}),M=L=>["sun","mon","tue","wed","thu","fri","sat"][L],ee=async L=>{var q;if(!Re.current.has(L))try{Re.current.add(L);const X=new Date(L),te=M(X.getDay()),{data:ce,error:ue}=await t.from("routines").select("*").eq("deleted",!1);if(ue)throw ue;const Ye=ce.filter(qe=>{const ot=qe.days||[],we=ot.length===0||ot.includes(te);if(qe.start_date){const Ie=new Date(qe.start_date),nt=X>=Ie;return we&&nt}return we});if(Ye.length===0)return;for(const qe of Ye){const ot=qe.text,{data:we,error:Ie}=await t.from("todos").select("*").eq("routine_id",qe.id).eq("deleted",!1);if(Ie)throw Ie;if(we&&we.length>1){console.warn(` ${qe.id}    (${we.length}).     .`);for(let Pe=1;Pe<we.length;Pe++)await t.from("todos").update({deleted:!0,deleted_date:new Date().toISOString()}).eq("id",we[Pe].id)}const nt=we&&we.length>0?we[0]:null;if(nt){if((nt.hidden_dates||[]).includes(L)||nt.stop_carryover_from&&L>=nt.stop_carryover_from)continue;const bt=nt.visible_dates||[];if(bt.includes(L))continue;const lr=[...bt,L].sort(),{error:dn}=await t.from("todos").update({visible_dates:lr}).eq("id",nt.id);dn&&console.error("    :",dn.message)}else{const{error:Pe}=await t.from("todos").insert([{text:ot,completed:!1,date:L,visible_dates:[L],hidden_dates:[],order_index:0,routine_id:qe.id,section_type:"routine",user_id:(q=e==null?void 0:e.user)==null?void 0:q.id}]);Pe&&console.error("   :",Pe.message)}}}catch(X){console.error("   :",X.message)}finally{setTimeout(()=>{Re.current.delete(L)},1e3)}};return{inputValue:u,setInputValue:f,routineInputValue:d,setRoutineInputValue:m,normalInputValue:h,setNormalInputValue:p,loading:b,isDraggingAny:v,isAdding:y,deletedTodo:E,showUndoToast:S,showSuccessToast:A,successToastMessage:N,lastDeleteAction:Z,focusedTodoId:oe,setFocusedTodoId:C,selectedTodoForModal:l,showDeleteConfirmModal:B,setShowDeleteConfirmModal:Q,todoToDelete:fe,setTodoToDelete:ve,activeTodoId:gt,overId:ze,fetchTodos:async()=>{var L;if(!((L=e==null?void 0:e.user)!=null&&L.id)){x(!1);return}try{x(!0);const q=Me(n);await ee(q);const{data:X,error:te}=await t.from("todos").select("*").eq("deleted",!1);if(te)throw te;const ce=(X||[]).filter(ue=>ue.stop_carryover_from&&q>=ue.stop_carryover_from||ue.hidden_dates&&Array.isArray(ue.hidden_dates)&&ue.hidden_dates.includes(q)?!1:ue.visible_dates&&Array.isArray(ue.visible_dates)?ue.visible_dates.includes(q):ue.date===q);a(ce)}catch(q){console.error("   :",q.message)}finally{x(!1)}},handleAddTodo:async()=>{var L;if(!(u.trim()===""||y))try{w(!0);const q=r.filter(Ye=>!Ye.parent_id&&Ye.section_type==="normal"),X=q.length>0?Math.max(...q.map(Ye=>Ye.order_index))+1:1,te=Me(n),{data:ce,error:ue}=await t.from("todos").insert([{text:u,completed:!1,order_index:X,date:te,visible_dates:[te],hidden_dates:[],section_type:"normal",user_id:(L=e==null?void 0:e.user)==null?void 0:L.id}]).select();if(ue)throw ue;a([...r,ce[0]]),f("")}catch(q){console.error("   :",q.message)}finally{w(!1)}},handleAddRoutineTodo:async()=>{var L,q;if(!(d.trim()===""||y))try{w(!0);const X=Me(n),{data:te,error:ce}=await t.from("routines").insert([{text:d,days:[],start_date:X,user_id:(L=e==null?void 0:e.user)==null?void 0:L.id}]).select();if(ce)throw ce;const ue=te[0],Ye=r.filter(Ie=>!Ie.parent_id&&Ie.section_type==="pending_routine"),qe=Ye.length>0?Math.max(...Ye.map(Ie=>Ie.order_index))+1:1,{data:ot,error:we}=await t.from("todos").insert([{text:d,completed:!1,order_index:qe,date:X,visible_dates:[X],hidden_dates:[],routine_id:ue.id,is_pending_routine:!0,section_type:"pending_routine",user_id:(q=e==null?void 0:e.user)==null?void 0:q.id}]).select();if(we)throw we;s([ue,...i]),a([...r,ot[0]]),m("")}catch(X){console.error("   :",X.message)}finally{w(!1)}},handleAddNormalTodo:async()=>{var L;if(!(h.trim()===""||y))try{w(!0);const q=r.filter(Ye=>!Ye.parent_id&&Ye.section_type==="normal"),X=q.length>0?Math.max(...q.map(Ye=>Ye.order_index))+1:1,te=Me(n),{data:ce,error:ue}=await t.from("todos").insert([{text:h,completed:!1,order_index:X,date:te,visible_dates:[te],hidden_dates:[],section_type:"normal",user_id:(L=e==null?void 0:e.user)==null?void 0:L.id}]).select();if(ue)throw ue;a([...r,ce[0]]),p("")}catch(q){console.error("   :",q.message)}finally{w(!1)}},handleToggleTodo:async L=>{const q=r.find(X=>X.id===L);if(q)try{const X=!q.completed,te=X?new Date().toISOString():null,{error:ce}=await t.from("todos").update({completed:X,completed_at:te}).eq("id",L);if(ce)throw ce;a(r.map(ue=>ue.id===L?{...ue,completed:X,completed_at:te}:ue))}catch(X){console.error("   :",X.message)}},handleDeleteTodo:async(L,q)=>{const X=r.find(te=>te.id===L);X&&(q?q==="this-only"?await I(X):q==="from-now"?await R(X):q==="all"&&await z(X):(ve(X),Q(!0)))},deleteThisOnly:I,deleteFromNow:R,deleteAll:z,handleUndoDelete:async()=>{if(!(!E||!Z))try{const{deleteType:L}=Z,q=Me(n);if(L==="this-only"){const X=(E.hidden_dates||[]).filter(ce=>ce!==q),{error:te}=await t.from("todos").update({hidden_dates:X}).eq("id",E.id);if(te)throw te}else if(L==="from-now"){const{error:X}=await t.from("todos").update({visible_dates:E.visible_dates,stop_carryover_from:null}).eq("id",E.id);if(X)throw X}else if(L==="all"){const{error:X}=await t.from("todos").update({deleted:!1,deleted_date:null}).eq("id",E.id);if(X)throw X}a(X=>{const te={...E};return[...X,te].sort((ue,Ye)=>ue.order_index-Ye.order_index)}),T(!1),j(null),ne(null)}catch(L){console.error("  :",L.message)}},handleEditTodo:async(L,q)=>{var X,te;try{let ce=null;He.current.add(L);const ue=new Date().toISOString();if(a(ot=>(ce=ot.find(we=>we.id===L),!ce||ce.text===q?(He.current.delete(L),ot):ot.map(we=>we.id===L?{...we,text:q,updated_at:ue}:we))),!ce||ce.text===q)return;const{error:Ye}=await t.from("todo_history").insert([{todo_id:L,previous_text:ce.text,new_text:q,changed_on_date:ce.date,user_id:(X=e==null?void 0:e.user)==null?void 0:X.id}]);if(Ye&&console.error("  :",Ye.message),ce.original_todo_id){const{data:ot,error:we}=await t.from("todos").select("text, date").eq("id",ce.original_todo_id).single();!we&&ot&&await t.from("todo_history").insert([{todo_id:ce.original_todo_id,previous_text:ce.text,new_text:q,changed_on_date:ce.date,user_id:(te=e==null?void 0:e.user)==null?void 0:te.id}])}const{error:qe}=await t.from("todos").update({text:q}).eq("id",L);qe?(console.error("   :",qe.message),a(ot=>ot.map(we=>we.id===L?ce:we)),He.current.delete(L)):setTimeout(()=>{He.current.delete(L)},5e3)}catch(ce){console.error("   :",ce.message),He.current.delete(L)}},handleAddSubTodo:async(L,q)=>{var X;if(!(!q||q.trim()===""))try{const ce=r.filter(ot=>ot.parent_id===L).length+1,ue=Me(n),{data:Ye,error:qe}=await t.from("todos").insert([{text:q.trim(),completed:!1,order_index:ce,date:ue,parent_id:L,user_id:(X=e==null?void 0:e.user)==null?void 0:X.id}]).select();if(qe)throw qe;a([...r,Ye[0]])}catch(te){console.error("    :",te.message)}},handleDragEnd:async L=>{g(!1),Ue(null),Ce(null);const{active:q,over:X}=L;if(!X||q.id===X.id)return;const te=r.find(me=>me.id===q.id),ce=r.find(me=>me.id===X.id);if(!te||!ce)return;const ue=te.section_type,Ye=te.section_id||null,qe=ce.section_type,ot=ce.section_id||null,we=ue!==qe||ue==="custom"&&Ye!==ot,Ie=qe,nt=ot,Pe=r.filter(me=>!(me.parent_id||me.section_type!==Ie||Ie==="custom"&&me.section_id!==nt)).sort((me,xt)=>me.order_index-xt.order_index),bt=Pe.findIndex(me=>me.id===q.id),lr=Pe.findIndex(me=>me.id===X.id);let dn=[...Pe];we?dn.splice(lr,0,{...te,section_type:Ie,section_id:nt,routine_id:Ie==="routine"||Ie==="pending_routine"?te.routine_id:null}):dn=Uc(Pe,bt,lr);let Ze=[...r];if(dn.forEach((me,xt)=>{const nn=Ze.findIndex(Yt=>Yt.id===me.id);nn!==-1&&(Ze[nn]={...me,order_index:xt+1})}),we){const me=Ze.findIndex(xt=>xt.id===q.id);me!==-1&&(Ze[me]={...Ze[me],section_type:Ie,section_id:nt,routine_id:Ie==="routine"||Ie==="pending_routine"?Ze[me].routine_id:null})}a(Ze);try{if(we){const me={section_type:Ie,section_id:nt};Ie!=="routine"&&Ie!=="pending_routine"&&(me.routine_id=null,me.is_pending_routine=!1),await t.from("todos").update(me).eq("id",q.id)}for(let me=0;me<dn.length;me++)await t.from("todos").update({order_index:me+1}).eq("id",dn[me].id)}catch(me){console.error("  :",me.message),a(r)}},handleRemoveTodoFromUI:L=>{a(r.filter(q=>q.id!==L))},handleDragStart:L=>{const{active:q}=L;g(!0),Ue(q.id)},handleDragOver:L=>{const{over:q}=L;Ce((q==null?void 0:q.id)||null)},handleDragCancel:()=>{g(!1),Ue(null),Ce(null)}}},PO=({session:e,supabase:t,selectedTodoForModal:n,setSelectedTodoForModal:r})=>{const[a,i]=_.useState(!1),[s,l]=_.useState({}),[o,u]=_.useState([]);return{showTodoHistoryModal:a,todoHistory:s,expandedHistoryIds:o,handleOpenTodoHistoryModal:async h=>{r(h);try{const{data:p,error:b}=await t.from("todo_history").select("*").eq("todo_id",h.id).order("changed_at",{ascending:!1});if(b)throw b;l(x=>({...x,[h.id]:p||[]}))}catch(p){console.error("Error fetching history:",p)}i(!0)},handleCloseTodoHistoryModal:()=>{i(!1),r(null),u([])},toggleHistoryDetail:h=>{u(p=>p.includes(h)?p.filter(b=>b!==h):[...p,h])}}},ZO=({selectedTodoForModal:e,setSelectedTodoForModal:t,routines:n})=>{const[r,a]=_.useState(!1),[i,s]=_.useState([]),[l,o]=_.useState(!1),[u,f]=_.useState("");return{showTodoRoutineSetupModal:r,routineDaysForModal:i,setRoutineDaysForModal:s,isEditingRoutineInModal:l,setIsEditingRoutineInModal:o,routineTimeSlotForModal:u,setRoutineTimeSlotForModal:f,handleOpenTodoRoutineSetupModal:h=>{t(h);const p=n.find(b=>b.id===h.routine_id);p?(s(p.days||[]),f(p.time_slot||""),o(!1)):(s([]),f(""),o(!0)),a(!0)},handleCloseTodoRoutineSetupModal:()=>{a(!1),t(null),s([]),f(""),o(!1)}}},FO=({session:e,supabase:t,selectedDate:n})=>{const r=_.useRef(!1);return{carryOverInProgress:r,carryOverIncompleteTodos:async s=>{if(!r.current)try{r.current=!0;const{data:l,error:o}=await t.from("todos").select("*").eq("deleted",!1).eq("completed",!1);if(o)throw o;if(!l||l.length===0)return;const u=l.filter(f=>(f.hidden_dates||[]).includes(s)?!1:f.visible_dates&&Array.isArray(f.visible_dates)&&f.visible_dates.length>0?f.visible_dates.includes(s)?!1:f.visible_dates.some(h=>h<s):!!(f.date&&f.date<s));if(u.length===0)return;for(const f of u){let d=[];f.visible_dates&&Array.isArray(f.visible_dates)&&f.visible_dates.length>0?d=[...f.visible_dates,s]:d=f.date?[f.date,s]:[s];const{error:m}=await t.from("todos").update({visible_dates:d}).eq("id",f.id);m&&console.error(` ${f.id}  :`,m.message)}}catch(l){console.error("  :",l.message)}finally{r.current=!1}},movePastIncompleteTodosToToday:async()=>{if(!r.current)try{r.current=!0;const s=new Date,l=Me(s),{data:o,error:u}=await t.from("todos").select("date").lt("date",l).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("date",{ascending:!0}).limit(1);if(u)throw u;if(!o||o.length===0)return;const f=new Date(o[0].date+"T00:00:00");let d=new Date(f);const m=new Date(s);m.setDate(m.getDate()-1);let h=0;for(;d<=m;){const p=Me(d),b=new Date(d);b.setDate(b.getDate()+1);const x=Me(b),{data:v,error:g}=await t.from("todos").select("*").eq("date",p).eq("deleted",!1).eq("completed",!1).is("routine_id",null).order("order_index",{ascending:!0});if(g)throw g;if(v&&v.length>0){const{data:y,error:w}=await t.from("todos").select("*").eq("date",x).eq("deleted",!1).order("order_index",{ascending:!0});if(w)throw w;const E=new Set;y==null||y.forEach(S=>{S.original_todo_id!==null&&E.add(S.original_todo_id)});const j=v.filter(S=>{if(S.stop_carryover_from&&p>=S.stop_carryover_from)return!1;const T=S.original_todo_id||S.id;return!E.has(T)});if(j.length>0){const S=j.map(oe=>oe.original_todo_id||oe.id).filter((oe,C,B)=>B.indexOf(oe)===C),{data:T,error:A}=await t.from("todos").select("id, created_at").in("id",S);if(A)throw A;const O={};T==null||T.forEach(oe=>{O[oe.id]=oe.created_at});const V=(y?y.length:0)+1,Z=j.map((oe,C)=>{const B=oe.original_todo_id||oe.id;return{text:oe.text,completed:!1,date:x,created_at:O[B]||oe.created_at,order_index:V+C,original_todo_id:B,parent_id:null,routine_id:null}}),{error:ne}=await t.from("todos").insert(Z);if(ne)throw ne;h+=j.length}}d.setDate(d.getDate()+1)}h>0}catch(s){console.error("    :",s.message)}finally{r.current=!1}}}};function WO(e,t,n){const[r,a]=_.useState([]),[i,s]=_.useState(!1),[l,o]=_.useState(!1);return{dummySessions:r,showDummyModal:i,setShowDummyModal:s,showDummySQL:l,setShowDummySQL:o,handleCreateDummyData:async()=>{try{const h=`DUMMY-${Date.now()}`,p=new Date(2025,10,16),b=[],x=[],v="2025-11-14";b.push({text:`[${h}] : 14--`,date:v,completed:!1,created_at:"2025-11-14T09:00:00Z",order_index:1001},{text:`[${h}] : 14-14`,date:v,completed:!0,created_at:"2025-11-14T09:10:00Z",order_index:1002},{text:`[${h}] : 14-15`,date:v,completed:!0,created_at:"2025-11-14T09:20:00Z",order_index:1003},{text:`[${h}] : 14-16`,date:v,completed:!0,created_at:"2025-11-14T09:30:00Z",order_index:1004});const g="2025-11-15";b.push({text:`[${h}] : 15--`,date:g,completed:!1,created_at:"2025-11-15T10:00:00Z",order_index:1005},{text:`[${h}] : 15-15`,date:g,completed:!0,created_at:"2025-11-15T10:10:00Z",order_index:1006},{text:`[${h}] : 15-16`,date:g,completed:!0,created_at:"2025-11-15T10:20:00Z",order_index:1007});const y="2025-11-16";b.push({text:`[${h}] : 16-`,date:y,completed:!1,created_at:"2025-11-16T11:00:00Z",order_index:1008},{text:`[${h}] : 16-16`,date:y,completed:!0,created_at:"2025-11-16T11:10:00Z",order_index:1009}),b.push({text:`[${h}] : 14-15-`,date:g,completed:!1,created_at:"2025-11-14T14:00:00Z",order_index:1010},{text:`[${h}] : 14-15-15`,date:g,completed:!0,created_at:"2025-11-14T14:10:00Z",order_index:1011}),b.push({text:`[${h}] : 15-16-`,date:y,completed:!1,created_at:"2025-11-15T15:00:00Z",order_index:1012},{text:`[${h}] : 15-16-16`,date:y,completed:!0,created_at:"2025-11-15T15:10:00Z",order_index:1013},{text:`[${h}] : 14-16-`,date:y,completed:!1,created_at:"2025-11-14T15:00:00Z",order_index:1014},{text:`[${h}] : 14-16-16`,date:y,completed:!0,created_at:"2025-11-14T15:10:00Z",order_index:1015});const w="2025-11-17";b.push({text:`[${h}] : 16-17-`,date:w,completed:!1,created_at:"2025-11-16T16:00:00Z",order_index:1016},{text:`[${h}] : 15-17-`,date:w,completed:!1,created_at:"2025-11-15T16:00:00Z",order_index:1017},{text:`[${h}] : 14-17-`,date:w,completed:!1,created_at:"2025-11-14T16:00:00Z",order_index:1018});const E="2025-11-18";b.push({text:`[${h}] : 16-18-`,date:E,completed:!1,created_at:"2025-11-16T17:00:00Z",order_index:1019},{text:`[${h}] : 15-18-`,date:E,completed:!1,created_at:"2025-11-15T17:00:00Z",order_index:1020});const{data:j,error:S}=await t.from("todos").insert(b).select();if(S)throw S;const T=j.find(O=>O.text.includes("14--"));T&&x.push({todo_id:T.id,previous_text:`[${h}] : 14--1`,new_text:`[${h}] : 14--2`,changed_at:"2025-11-15T12:00:00Z",changed_on_date:g},{todo_id:T.id,previous_text:`[${h}] : 14--2`,new_text:`[${h}] : 14--`,changed_at:"2025-11-16T12:00:00Z",changed_on_date:y});const A=j.find(O=>O.text.includes("15--"));if(A&&x.push({todo_id:A.id,previous_text:`[${h}] : 15--1`,new_text:`[${h}] : 15--`,changed_at:"2025-11-16T13:00:00Z",changed_on_date:y}),x.length>0){const{error:O}=await t.from("todo_history").insert(x);O&&console.error("  :",O.message)}a(O=>[...O,{sessionId:h,createdAt:new Date().toISOString(),count:b.length,historyCount:x.length}]),alert(`    !
: ${b.length}
: ${x.length}
 ID: ${h}`),n()}catch(h){console.error("   :",h.message),alert("    : "+h.message)}},handleDeleteDummySession:async h=>{if(window.confirm(`   "${h}"   ?

      ,     .`))try{const{data:b,error:x}=await t.from("todos").select("id").like("text",`[${h}]%`);if(x)throw x;if(b&&b.length>0){const g=b.map(w=>w.id),{error:y}=await t.from("todo_history").delete().in("todo_id",g);y&&console.error("  :",y.message)}const{error:v}=await t.from("todos").delete().like("text",`[${h}]%`);if(v)throw v;a(g=>g.filter(y=>y.sessionId!==h)),alert(`  ${h}  !`),n()}catch(b){console.error("   :",b.message),alert("    : "+b.message)}},handleDeleteAllDummies:async()=>{if(window.confirm(`     ?

      ,     .`))try{const{data:p,error:b}=await t.from("todos").select("id").like("text","[DUMMY-%");if(b)throw b;if(p&&p.length>0){const v=p.map(y=>y.id),{error:g}=await t.from("todo_history").delete().in("todo_id",v);g&&console.error("  :",g.message)}const{error:x}=await t.from("todos").delete().like("text","[DUMMY-%");if(x)throw x;a([]),alert("     !"),n()}catch(p){console.error("    :",p.message),alert("     : "+p.message)}},handleRemoveDuplicates:async()=>{try{const{data:h,error:p}=await t.from("todos").select("*").eq("deleted",!1).order("created_at",{ascending:!0});if(p)throw p;if(!h||h.length===0){alert(" .");return}const b={};h.forEach(S=>{b[S.text]||(b[S.text]=[]),b[S.text].push(S)});const x=Object.entries(b).filter(([S,T])=>T.length>1);if(x.length===0){alert("  .");return}let v=`  :

`,g=[];if(x.forEach(([S,T])=>{v+=`"${S}" - ${T.length}
`;const A=T.slice(1);g.push(...A),A.forEach(V=>{const Z=new Date(V.created_at).toLocaleString("ko-KR");v+=`    : ${Z}
`});const O=T[0],N=new Date(O.created_at).toLocaleString("ko-KR");v+=`   : ${N}

`}),v+=`
 ${g.length}   .`,!window.confirm(v+`

     ,     .

?`))return;const w=g.map(S=>S.id),{error:E}=await t.from("todo_history").delete().in("todo_id",w);E&&console.error("  :",E.message);const{error:j}=await t.from("todos").delete().in("id",w);if(j)throw j;alert(` ${g.length}   .`),n()}catch(h){console.error("   :",h.message),alert("    : "+h.message)}}}}function eD(e,t){const[n,r]=_.useState([]),[a,i]=_.useState(!1),[s,l]=_.useState(""),[o,u]=_.useState(null),[f,d]=_.useState(""),[m,h]=_.useState(!1),[p,b]=_.useState(""),x=()=>{if(n.length===0)return"";const j=Math.floor(Math.random()*n.length);return n[j]},v=()=>{let j=0;h(!0),setTimeout(()=>{let S=x();for(;S===p&&n.length>1&&j<10;)S=x(),j++;h(!1),b(S)},300)},g=async()=>{try{const{data:j,error:S}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(S)throw S;if(j&&j.length>0){const T=j.map(A=>A.message);r(T),p||b(T[0])}}catch(j){console.error("   :",j.message)}},y=async j=>{var S;try{const{data:T}=await t.from("encouragement_messages").select("order_index").order("order_index",{ascending:!1}).limit(1),A=T&&T.length>0?T[0].order_index:0,{error:O}=await t.from("encouragement_messages").insert([{message:j,order_index:A+1,user_id:(S=e==null?void 0:e.user)==null?void 0:S.id}]);if(O)throw O;await g()}catch(T){console.error("   :",T.message),alert("   .")}},w=async(j,S)=>{try{const{data:T}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!T||j>=T.length)throw new Error("   .");const A=T[j],{error:O}=await t.from("encouragement_messages").update({message:S}).eq("id",A.id);if(O)throw O;await g()}catch(T){console.error("   :",T.message),alert("   .")}},E=async j=>{try{const{data:S}=await t.from("encouragement_messages").select("*").order("order_index",{ascending:!0});if(!S||j>=S.length)throw new Error("   .");const T=S[j],{error:A}=await t.from("encouragement_messages").delete().eq("id",T.id);if(A)throw A;await g()}catch(S){console.error("   :",S.message),alert("   .")}};return _.useEffect(()=>{n.length>0&&!p&&b(x())},[n]),{encouragementMessages:n,showEncouragementModal:a,setShowEncouragementModal:i,newEncouragementMessage:s,setNewEncouragementMessage:l,editingEncouragementId:o,setEditingEncouragementId:u,editingEncouragementText:f,setEditingEncouragementText:d,showEncouragementEmoji:m,currentEncouragementMessage:p,handleEncouragementClick:v,fetchEncouragementMessages:g,addEncouragementMessage:y,updateEncouragementMessage:w,deleteEncouragementMessage:E}}function tD(e){const[t,n]=_.useState(!1),[r,a]=_.useState([]),[i,s]=_.useState("1week"),l=async()=>{try{const f=new Date,d=Me(f);let m=null;if(i!=="all")switch(m=new Date(f),i){case"1week":m.setDate(f.getDate()-7);break;case"2weeks":m.setDate(f.getDate()-14);break;case"1month":m.setMonth(f.getMonth()-1);break;case"3months":m.setMonth(f.getMonth()-3);break;case"6months":m.setMonth(f.getMonth()-6);break}let h=e.from("todos").select("*").eq("deleted",!1).is("routine_id",null).order("created_at",{ascending:!0});m&&(h=h.gte("date",Me(m)));const{data:p,error:b}=await h;if(b)throw b;const x={};for(const g of p||[]){const y=g.original_todo_id||g.id;x[y]||(x[y]=[]),x[y].push(g)}const v=Object.entries(x).map(([g,y])=>{const w=y.sort((A,O)=>new Date(A.date)-new Date(O.date)),E=w[0],j=w.map(A=>A.date);let S=null;for(const A of w)if(A.completed&&A.completed_at){const O=new Date(A.completed_at);S=Me(O);break}const T=w.find(A=>A.date===d);return{text:E.text,originalId:parseInt(g),createdAt:E.created_at,startDate:j[0],endDate:j[j.length-1],dates:j,completed:(T==null?void 0:T.completed)||!1,completedDate:S}}).sort((g,y)=>new Date(g.createdAt)-new Date(y.createdAt));a(v)}catch(f){console.error("   :",f.message)}};return{showGanttChart:t,ganttData:r,ganttPeriod:i,setGanttPeriod:s,handleOpenGanttChart:async()=>{n(!0),await l()},handleCloseGanttChart:()=>{n(!1),a([])},fetchGanttData:l}}function nD(){const{session:e,authLoading:t,handleGoogleLogin:n,handleLogout:r}=EO(),[a,i]=_.useState(new Date),[s,l]=_.useState(!1),[o,u]=_.useState("home"),f=_.useRef(new Set),d=vh(ki(jl,{activationConstraint:{distance:3}}),ki(Hb,{activationConstraint:{delay:100,tolerance:5}}),ki(Rc,{coordinateGetter:Zb})),[m,h]=_.useState([]),[p,b]=_.useState(null),{showTodoHistoryModal:x,todoHistory:v,expandedHistoryIds:g,handleOpenTodoHistoryModal:y,handleCloseTodoHistoryModal:w,toggleHistoryDetail:E}=PO({session:e,supabase:ge,selectedTodoForModal:p,setSelectedTodoForModal:b}),{showRoutineModal:j,routines:S,setRoutines:T,routineInput:A,setRoutineInput:O,selectedDays:N,selectedTimeSlot:V,setSelectedTimeSlot:Z,isAddingRoutine:ne,editingRoutineId:oe,editingRoutineText:C,setEditingRoutineText:B,showRoutineHistory:Q,selectedRoutineForHistory:fe,routineHistoryData:ve,editingRoutineDays:gt,showDeleteConfirmModal:Ue,setShowDeleteConfirmModal:ze,routineToDelete:Ce,fetchRoutines:Re,handleAddRoutine:He,handleCreateRoutineFromTodo:I,handleStartEditRoutine:R,handleCancelEditRoutine:z,handleSaveEditRoutine:M,handleToggleEditDay:ee,handleDeleteRoutine:G,deleteThisOnly:re,deleteFromNow:U,deleteAll:ie,fetchRoutineHistory:he,handleCloseRoutineHistory:F,handleOpenRoutine:ae,handleCloseRoutine:le,handleToggleDay:Ee,createRoutineTodos:Ut}=QO({session:e,supabase:ge,selectedDate:a,setTodos:h,setSuccessToastMessage:()=>{},setShowSuccessToast:()=>{}}),{showTodoRoutineSetupModal:tt,routineDaysForModal:It,setRoutineDaysForModal:yt,isEditingRoutineInModal:lt,setIsEditingRoutineInModal:L,routineTimeSlotForModal:q,setRoutineTimeSlotForModal:X,handleOpenTodoRoutineSetupModal:te,handleCloseTodoRoutineSetupModal:ce}=ZO({selectedTodoForModal:p,setSelectedTodoForModal:b,routines:S}),{carryOverIncompleteTodos:ue}=FO({session:e,supabase:ge,selectedDate:a}),{routineInputValue:Ye,setRoutineInputValue:qe,normalInputValue:ot,setNormalInputValue:we,loading:Ie,isDraggingAny:nt,isAdding:Pe,showUndoToast:bt,showSuccessToast:lr,successToastMessage:dn,lastDeleteAction:Ze,focusedTodoId:me,setFocusedTodoId:xt,showDeleteConfirmModal:nn,setShowDeleteConfirmModal:Yt,todoToDelete:Vt,activeTodoId:zt,overId:fn,fetchTodos:Et,handleAddRoutineTodo:Sn,handleAddNormalTodo:hn,handleToggleTodo:tn,handleDeleteTodo:Bn,handleAddSubTodo:Ln,handleEditTodo:K,handleDragStart:J,handleDragOver:rt,handleDragCancel:$t,handleDragEnd:$e,handleUndoDelete:_t,deleteThisOnly:at,deleteFromNow:vt,deleteAll:xn,handleRemoveTodoFromUI:gr}=JO(e,ge,a,m,h,S,T,p),or=D=>{xt(D)},zr=D=>{console.log("Success:",D)},cs=()=>{_t()},zc=()=>{const D=document.querySelector(".memo-section");D&&D.scrollIntoView({behavior:"smooth",block:"start"})},{showGanttChart:Pa,ganttData:n_,ganttPeriod:Oh,setGanttPeriod:r_,handleOpenGanttChart:a_,handleCloseGanttChart:i_,fetchGanttData:s_}=tD(ge),{dummySessions:l_,showDummyModal:o_,setShowDummyModal:Dh,showDummySQL:$c,setShowDummySQL:c_,handleCreateDummyData:u_,handleDeleteDummySession:d_,handleDeleteAllDummies:f_,handleRemoveDuplicates:h_}=WO(e,ge,Et),[rD,aD]=_.useState(!1),{memoContent:m_,setMemoContent:g_,isSavingMemo:y_,isEditingMemoInline:Dl,memoTextareaRef:v_,fetchMemoContent:p_,handleStartEditMemoInline:Ah,handleSaveMemoInline:b_,handleCancelEditMemoInline:__,handleMemoKeyDown:w_}=VO(e),{blocks:Nh,setBlocks:Ch,focusedBlockId:S_,setFocusedBlockId:x_,keyThoughtsHistory:E_,showKeyThoughtsHistory:T_,setShowKeyThoughtsHistory:Bc,fetchBlocks:j_,saveAllBlocks:O_,fetchKeyThoughtsHistory:Rh,restoreKeyThoughtsVersion:D_}=KO(e),{encouragementMessages:A_,showEncouragementModal:N_,setShowEncouragementModal:Mh,newEncouragementMessage:C_,setNewEncouragementMessage:R_,editingEncouragementId:M_,setEditingEncouragementId:k_,editingEncouragementText:U_,setEditingEncouragementText:z_,showEncouragementEmoji:$_,currentEncouragementMessage:B_,handleEncouragementClick:L_,fetchEncouragementMessages:H_,addEncouragementMessage:q_,updateEncouragementMessage:I_,deleteEncouragementMessage:Y_}=eD(e,ge),V_=async D=>{var H,Y;try{const W=Me(a),$=m.filter(je=>!je.parent_id&&je.section_type==="normal"),P=$.length>0?Math.max(...$.map(je=>je.order_index))+1:1,Ke=`temp_${Date.now()}_${Math.random()}`,Te={id:Ke,text:D,completed:!1,order_index:P,date:W,visible_dates:[W],hidden_dates:[],section_type:"normal",user_id:(H=e==null?void 0:e.user)==null?void 0:H.id,_isOptimistic:!0};if(h(je=>[...je,Te]),(Y=e==null?void 0:e.user)!=null&&Y.id&&ge){const{data:je,error:wt}=await ge.from("todos").insert([{text:D,completed:!1,order_index:P,date:W,visible_dates:[W],hidden_dates:[],section_type:"normal",user_id:e.user.id}]).select();if(wt)throw wt;h(Jt=>Jt.map(Oe=>Oe.id===Ke?je[0]:Oe))}else{const je=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");je.push({text:D,dateStr:W,timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify(je))}}catch(W){console.error("Quick add error:",W);const $=JSON.parse(localStorage.getItem("pendingQuickTodos")||"[]");$.push({text:D,dateStr:Me(a),timestamp:Date.now()}),localStorage.setItem("pendingQuickTodos",JSON.stringify($))}},[$r,G_]=_.useState(()=>localStorage.getItem("viewMode")||"horizontal"),[Lc,kh]=_.useState({normal:"  ",routine:"  ",memo:" ","key-thoughts":"  "}),[Za,Al]=_.useState([]),[K_,Uh]=_.useState(!1),[zh,$h]=_.useState(!1),[Bh,Lh]=_.useState({}),X_=YO(e),{sectionOrder:us,setSectionOrder:Hh,fetchSectionOrder:Q_,saveSectionOrder:qh,moveSectionLeft:Ih,moveSectionRight:Yh}=X_,Fa=_.useRef(null),[J_,P_]=_.useState(0),Hc=_.useRef(null),[ds,qc]=_.useState([]),[Z_,Vh]=_.useState(!1),Gh=D=>{try{localStorage.setItem("hiddenSections",JSON.stringify(D))}catch(H){console.error("   :",H)}},F_=()=>{try{const D=localStorage.getItem("hiddenSections");D&&qc(JSON.parse(D))}catch(D){console.error("   :",D)}},Ic=D=>{const H=[...ds,D];qc(H),Gh(H)},W_=D=>{const H=ds.filter(Y=>Y!==D);qc(H),Gh(H)},ew=()=>{const D=new Date(a);D.setDate(D.getDate()-1),i(D)},tw=()=>{const D=new Date(a);D.setDate(D.getDate()+1),i(D)},nw=D=>{const H=new Date(D.target.value+"T00:00:00");i(H)},rw=async()=>{var D;if((D=e==null?void 0:e.user)!=null&&D.id)try{const{data:H,error:Y}=await ge.from("user_settings").select("setting_value").eq("setting_key","section_titles").maybeSingle();if(Y){console.error("   :",Y.message);return}if(H&&H.setting_value){const W=JSON.parse(H.setting_value);kh($=>({...$,...W}))}}catch(H){console.error("   :",H.message)}},aw=async(D,H)=>{var W;if(!((W=e==null?void 0:e.user)!=null&&W.id))return;const Y={...Lc,[D]:H};kh(Y);try{const{data:$,error:P}=await ge.from("user_settings").select("id").eq("setting_key","section_titles").maybeSingle();if(P){console.error("   :",P.message);return}$?await ge.from("user_settings").update({setting_value:JSON.stringify(Y),updated_at:new Date().toISOString()}).eq("setting_key","section_titles"):await ge.from("user_settings").insert([{setting_key:"section_titles",setting_value:JSON.stringify(Y),user_id:e.user.id}])}catch($){console.error("   :",$.message)}},iw=async()=>{var D;if((D=e==null?void 0:e.user)!=null&&D.id)try{const{data:H,error:Y}=await ge.from("user_settings").select("setting_value").eq("setting_key","custom_sections").maybeSingle();if(Y){console.error("    :",Y.message);return}if(H&&H.setting_value){const W=JSON.parse(H.setting_value);Al(W)}}catch(H){console.error("    :",H.message)}},Yc=async D=>{var H;if((H=e==null?void 0:e.user)!=null&&H.id)try{const{data:Y,error:W}=await ge.from("user_settings").select("id").eq("setting_key","custom_sections").maybeSingle();if(W){console.error("    :",W.message);return}Y?await ge.from("user_settings").update({setting_value:JSON.stringify(D),updated_at:new Date().toISOString()}).eq("setting_key","custom_sections"):await ge.from("user_settings").insert([{setting_key:"custom_sections",setting_value:JSON.stringify(D),user_id:e.user.id}])}catch(Y){console.error("    :",Y.message)}},sw=({name:D,icon:H})=>{const Y={id:`custom-${Date.now()}`,name:D,icon:H},W=[...Za,Y];Al(W),Yc(W);const $=[...us,Y.id];Hh($),qh($)},lw=async D=>{const H=Bh[D]||"";if(!(!H.trim()||zh)){if(!e){alert(" ");return}$h(!0);try{const Y=m.filter(je=>!je.parent_id&&je.section_type==="custom"&&je.section_id===D),W=Y.length>0?Math.max(...Y.map(je=>je.order_index))+1:1,$=Me(a),P={text:H.trim(),completed:!1,order_index:W,date:$,visible_dates:[$],hidden_dates:[],user_id:e.user.id,section_id:D,section_type:"custom"},{data:Ke,error:Te}=await ge.from("todos").insert([P]).select();if(Te)throw Te;Ke&&Ke.length>0&&(h(je=>[...je,Ke[0]]),Lh(je=>({...je,[D]:""})))}catch(Y){console.error("  :",Y.message)}finally{$h(!1)}}},ow=async D=>{if(!confirm("  ?      ."))return;try{const{error:W}=await ge.from("todos").delete().eq("section_id",D);if(W){console.error("   :",W.message);return}}catch(W){console.error("   :",W.message);return}const H=Za.filter(W=>W.id!==D);Al(H),Yc(H);const Y=us.filter(W=>W!==D);Hh(Y),qh(Y),h(W=>W.filter($=>$.section_id!==D))},cw=async(D,H)=>{try{const Y=Me(D),W=Me(H),{data:$,error:P}=await ge.from("todos").select("*").eq("deleted",!1).eq("completed",!1).is("routine_id",null);if(P)throw P;const Ke=($||[]).filter(Te=>Te.stop_carryover_from&&Y>=Te.stop_carryover_from?!1:Te.visible_dates&&Array.isArray(Te.visible_dates)&&Te.visible_dates.length>0?Te.visible_dates.includes(Y):Te.date===Y);if(Ke.length===0)return;for(const Te of Ke){let je=Te.visible_dates||[Te.date];if(je.includes(W))continue;const wt=[...je,W].sort(),{error:Jt}=await ge.from("todos").update({visible_dates:wt}).eq("id",Te.id);Jt&&console.error(` ${Te.id}  :`,Jt.message)}}catch(Y){console.error("   :",Y.message)}};_.useEffect(()=>{let D=null;const H=()=>{document.body.classList.add("is-scrolling"),D&&clearTimeout(D),D=setTimeout(()=>{document.body.classList.remove("is-scrolling")},1e3)};return window.addEventListener("scroll",H),()=>{window.removeEventListener("scroll",H),D&&clearTimeout(D)}},[]),_.useEffect(()=>{e&&(H_(),p_(),j_(),Re(),Q_(),rw(),iw(),F_())},[e]),_.useEffect(()=>{if(!Fa.current)return;const D=Fa.current,H=$r==="horizontal";let Y=!1,W=0,$=0,P=0;const Ke=ye=>ye.type.includes("touch")?H?ye.touches[0].pageX:ye.touches[0].pageY:H?ye.pageX:ye.pageY,Te=ye=>{ye.target.closest(".section-block")||(Y=!0,W=Ke(ye),$=H?D.scrollLeft:D.scrollTop,D.style.transition="none",D.style.transform=H?"translateX(0)":"translateY(0)",P=0)},je=()=>{Y&&P!==0&&(D.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",D.style.transform=H?"translateX(0)":"translateY(0)",setTimeout(()=>{D.style.transition="none",P=0},300)),Y=!1},wt=()=>{P!==0&&(D.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",D.style.transform=H?"translateX(0)":"translateY(0)",setTimeout(()=>{D.style.transition="none",P=0},300)),Y=!1},Jt=ye=>{if(!Y)return;ye.preventDefault();const De=(Ke(ye)-W)*1.5,_e=$-De,Xe=H?D.scrollWidth-D.clientWidth:D.scrollHeight-D.clientHeight;if(_e<0){const Ot=-_e;P=Math.min(Ot*.3,100),H?(D.scrollLeft=0,D.style.transform=`translateX(${P}px)`):(D.scrollTop=0,D.style.transform=`translateY(${P}px)`)}else if(_e>Xe){const Ot=_e-Xe;P=-Math.min(Ot*.3,100),H?(D.scrollLeft=Xe,D.style.transform=`translateX(${P}px)`):(D.scrollTop=Xe,D.style.transform=`translateY(${P}px)`)}else P=0,D.style.transform=H?"translateX(0)":"translateY(0)",H?D.scrollLeft=_e:D.scrollTop=_e},Oe=ye=>{H&&ye.target.closest(".section-block")&&ye.deltaX!==0&&ye.preventDefault()};return D.addEventListener("mousedown",Te),document.addEventListener("mouseup",wt),document.addEventListener("mouseleave",je),D.addEventListener("mousemove",Jt),D.addEventListener("touchstart",Te,{passive:!0}),D.addEventListener("touchmove",Jt,{passive:!1}),D.addEventListener("touchend",wt),D.addEventListener("touchcancel",wt),D.addEventListener("wheel",Oe,{passive:!1}),()=>{D.removeEventListener("mousedown",Te),document.removeEventListener("mouseup",wt),document.removeEventListener("mouseleave",je),D.removeEventListener("mousemove",Jt),D.removeEventListener("touchstart",Te),D.removeEventListener("touchmove",Jt),D.removeEventListener("touchend",wt),D.removeEventListener("touchcancel",wt),D.removeEventListener("wheel",Oe)}},[$r,m,S]),_.useEffect(()=>{if($r!=="horizontal"||!Fa.current)return;const D=Fa.current,H=()=>{const Y=D.querySelectorAll(".section-block");if(Y.length===0)return;const W=D.getBoundingClientRect(),$=W.left+W.width/2;let P=0,Ke=1/0;Y.forEach((Te,je)=>{const wt=Te.getBoundingClientRect(),Jt=wt.left+wt.width/2,Oe=Math.abs(Jt-$);Oe<Ke&&(Ke=Oe,P=je)}),P_(P)};return D.addEventListener("scroll",H),H(),()=>D.removeEventListener("scroll",H)},[$r,m,S]),_.useEffect(()=>{if(!Hc.current)return;const D=Hc.current;let H=!1,Y=0,W=0,$=0;const P=wt=>{wt.target.closest(".section-block")||(H=!0,Y=wt.pageY,W=D.scrollTop,D.style.transition="none",D.style.transform="translateY(0)",$=0)},Ke=()=>{H&&$!==0&&(D.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",D.style.transform="translateY(0)",setTimeout(()=>{D.style.transition="none",$=0},300)),H=!1},Te=()=>{$!==0&&(D.style.transition="transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)",D.style.transform="translateY(0)",setTimeout(()=>{D.style.transition="none",$=0},300)),H=!1},je=wt=>{if(!H)return;wt.preventDefault();const Oe=(wt.pageY-Y)*1.5,ye=W-Oe,ct=D.scrollHeight-D.clientHeight;if(ye<0){const De=-ye;$=Math.min(De*.3,100),D.scrollTop=0,D.style.transform=`translateY(${$}px)`}else if(ye>ct){const De=ye-ct;$=-Math.min(De*.3,100),D.scrollTop=ct,D.style.transform=`translateY(${$}px)`}else $=0,D.style.transform="translateY(0)",D.scrollTop=ye};return D.addEventListener("mousedown",P),document.addEventListener("mouseup",Te),document.addEventListener("mouseleave",Ke),D.addEventListener("mousemove",je),()=>{D.removeEventListener("mousedown",P),document.removeEventListener("mouseup",Te),document.removeEventListener("mouseleave",Ke),D.removeEventListener("mousemove",je)}},[m,S]),_.useEffect(()=>{Pa&&s_()},[Oh]),_.useEffect(()=>{const D=async()=>{const Y=new Date,W=new Date(Y);W.setHours(24,0,0,0);const $=W.getTime()-Y.getTime();return setTimeout(async()=>{const Ke=new Date(Y),Te=new Date(Y);Te.setDate(Te.getDate()+1),await cw(Ke,Te),await Ut(),i(new Date),D()},$)},H=D();return()=>clearTimeout(H)},[]),_.useEffect(()=>{(async()=>{var Te;const W=Me(a),P=Me(new Date);W===P&&((Te=e==null?void 0:e.user)!=null&&Te.id)&&await ue(W),await Et()})();const H=Me(a),Y=ge.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"todos",filter:`date=eq.${H}`},W=>{W.eventType==="INSERT"?h($=>$.some(P=>P.id===W.new.id)?$:[...$,W.new]):W.eventType==="UPDATE"?h($=>f.current.has(W.new.id)?$:$.map(P=>P.id===W.new.id?W.new:P)):W.eventType==="DELETE"&&h($=>$.filter(P=>P.id!==W.old.id))}).subscribe(W=>{});return()=>{ge.removeChannel(Y)}},[a,e]),_.useEffect(()=>{if(nt){const D=window.scrollY,H=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top=`-${D}px`,document.body.style.left="0",document.body.style.right="0",H>0&&(document.body.style.paddingRight=`${H}px`),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.paddingRight="",window.scrollTo(0,D)}}},[nt]);const Kh=IO({authLoading:t,session:e,handleGoogleLogin:n});return Kh||(o==="keyThoughtsViewer"?c.jsx(UO,{blocks:Nh,setBlocks:Ch,onSave:O_,onClose:()=>u("home")}):c.jsxs("div",{className:`app ${nt?"dragging-active":""}`,children:[c.jsx(TO,{showSidebar:s,setShowSidebar:l,session:e,viewMode:$r,setViewMode:G_,onOpenRoutine:ae,onOpenMemo:zc,onScrollToKeyThoughts:()=>{const D=document.querySelector(".key-thoughts-section");D&&D.scrollIntoView({behavior:"smooth",block:"start"})},onOpenGanttChart:a_,onOpenEncouragementModal:()=>Mh(!0),onOpenDummyModal:()=>Dh(!0),onOpenAddSection:()=>Uh(!0),onOpenHiddenSections:()=>Vh(!0),onLogout:r}),c.jsxs("div",{className:`container ${$r==="horizontal"?"container-wide":""}`,children:[c.jsx(OO,{showSidebar:s,setShowSidebar:l,selectedDate:a,onDateChange:nw,onPrevDay:ew,onNextDay:tw,showEncouragementEmoji:$_,currentEncouragementMessage:B_,onEncouragementClick:L_,setSelectedDate:i,onQuickAdd:V_}),c.jsxs("div",{className:"content-scrollable",ref:Hc,children:[c.jsxs(Sh,{sensors:d,collisionDetection:ph,onDragStart:J,onDragOver:rt,onDragEnd:$e,onDragCancel:$t,measuring:{droppable:{strategy:Ya.Always}},children:[c.jsx("div",{className:"todo-list",children:Ie?c.jsx("p",{className:"empty-message",children:" ..."}):(()=>{const D=m.filter($=>!$.parent_id&&$.section_type==="routine").sort(($,P)=>$.order_index-P.order_index),H=m.filter($=>!$.parent_id&&$.section_type==="pending_routine").sort(($,P)=>$.order_index-P.order_index),Y=m.filter($=>!$.parent_id&&$.section_type==="normal").sort(($,P)=>$.order_index-P.order_index),W=[...D.map($=>$.id),...H.map($=>$.id),...Y.map($=>$.id),...Za.flatMap($=>m.filter(P=>!P.parent_id&&P.section_type==="custom"&&P.section_id===$.id).map(P=>P.id))];return c.jsx(Da,{items:W,strategy:Oa,children:c.jsx("div",{ref:Fa,className:`sections-container ${$r==="horizontal"?"horizontal-layout":"vertical-layout"}`,children:us.filter($=>!ds.includes($)).map(($,P)=>{const Ke=us.filter(Oe=>!ds.includes(Oe)),Te=Ke.indexOf($),je=Te===0,wt=Te===Ke.length-1,Jt=[...je?[]:[{icon:"",label:" ",onClick:()=>Ih($)}],...wt?[]:[{icon:"",label:" ",onClick:()=>Yh($)}],{icon:"",label:"",onClick:()=>Ic($)}];if($==="memo"){const Oe=[...Jt,...Dl?[]:[{icon:"",label:"",onClick:Ah}]];return c.jsx("div",{children:c.jsxs(RO,{title:"  ",className:"memo-section section-block",content:m_,setContent:g_,isEditing:Dl,isSaving:y_,textareaRef:v_,onStartEdit:Ah,onSave:b_,onCancel:__,onKeyDown:w_,placeholder:" ...",emptyMessage:" ",settingsMenuItems:Oe,children:[!Dl&&c.jsx("div",{style:{marginTop:"1rem"},children:c.jsxs("button",{onClick:()=>c_(!$c),style:{width:"100%",padding:"0.75rem",display:"flex",justifyContent:"space-between",alignItems:"center",background:"rgba(255, 255, 255, 0.05)",color:"rgba(255, 255, 255, 0.7)",border:"1px solid rgba(255, 255, 255, 0.12)",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.2s ease"},onMouseEnter:ye=>{ye.currentTarget.style.background="rgba(255, 255, 255, 0.1)",ye.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)"},onMouseLeave:ye=>{ye.currentTarget.style.background="rgba(255, 255, 255, 0.05)",ye.currentTarget.style.borderColor="rgba(255, 255, 255, 0.12)"},title:"  SQL /",children:[c.jsx("span",{children:" SQL  "}),c.jsx("span",{children:$c?"":""})]})}),$c&&!Dl&&c.jsxs("div",{className:"dummy-sql-content",style:{marginTop:"1rem"},children:[c.jsxs("div",{className:"sql-block",children:[c.jsxs("div",{className:"sql-header",children:[c.jsx("span",{children:" SQL"}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("button",{onClick:()=>{window.open("https://raw.githubusercontent.com/jaehwan-lee-benja/todo-note/main/create-dummy-data-v2.sql","_blank")},className:"link-button",title:"GitHub  ",children:""}),c.jsx("button",{onClick:()=>{const ye=new Date,ct=Nl=>{const ya=new Date(ye);return ya.setDate(ya.getDate()+Nl),ya.toISOString().split("T")[0]},De=Nl=>{const ya=new Date(ye);return ya.setDate(ya.getDate()+Nl),ya.getDate()},_e=Date.now(),Xe=De(-2),Ot=De(-1),En=De(0),Vc=De(1),Xh=De(2),Tn=ct(-2),mn=ct(-1),rn=ct(0),Gc=ct(1),Qh=ct(2),uw=`--         (${rn} )
INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${_e}] : ${Xe}--', '${Tn}', false, '${Tn}T09:00:00+09:00', 1001),
  ('[DUMMY-${_e}] : ${Xe}-${Xe}', '${Tn}', true, '${Tn}T09:10:00+09:00', 1002),
  ('[DUMMY-${_e}] : ${Xe}-${Ot}', '${Tn}', true, '${Tn}T09:20:00+09:00', 1003),
  ('[DUMMY-${_e}] : ${Xe}-${En}', '${Tn}', true, '${Tn}T09:30:00+09:00', 1004);

INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${_e}] : ${Ot}--', '${mn}', false, '${mn}T10:00:00+09:00', 1005),
  ('[DUMMY-${_e}] : ${Ot}-${Ot}', '${mn}', true, '${mn}T10:10:00+09:00', 1006),
  ('[DUMMY-${_e}] : ${Ot}-${En}', '${mn}', true, '${mn}T10:20:00+09:00', 1007);

INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${_e}] : ${En}-', '${rn}', false, '${rn}T11:00:00+09:00', 1008),
  ('[DUMMY-${_e}] : ${En}-${En}', '${rn}', true, '${rn}T11:10:00+09:00', 1009);

INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${_e}] : ${Xe}-${Ot}-', '${mn}', false, '${Tn}T14:00:00+09:00', 1010),
  ('[DUMMY-${_e}] : ${Xe}-${Ot}-${Ot}', '${mn}', true, '${Tn}T14:10:00+09:00', 1011);

INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${_e}] : ${Ot}-${En}-', '${rn}', false, '${mn}T15:00:00+09:00', 1012),
  ('[DUMMY-${_e}] : ${Ot}-${En}-${En}', '${rn}', true, '${mn}T15:10:00+09:00', 1013),
  ('[DUMMY-${_e}] : ${Xe}-${En}-', '${rn}', false, '${Tn}T15:00:00+09:00', 1014),
  ('[DUMMY-${_e}] : ${Xe}-${En}-${En}', '${rn}', true, '${Tn}T15:10:00+09:00', 1015);

INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${_e}] : ${En}-${Vc}-', '${Gc}', false, '${rn}T16:00:00+09:00', 1016),
  ('[DUMMY-${_e}] : ${Ot}-${Vc}-', '${Gc}', false, '${mn}T16:00:00+09:00', 1017),
  ('[DUMMY-${_e}] : ${Xe}-${Vc}-', '${Gc}', false, '${Tn}T16:00:00+09:00', 1018);

INSERT INTO todos (text, date, completed, created_at, order_index)
VALUES
  ('[DUMMY-${_e}] : ${En}-${Xh}-', '${Qh}', false, '${rn}T17:00:00+09:00', 1019),
  ('[DUMMY-${_e}] : ${Ot}-${Xh}-', '${Qh}', false, '${mn}T17:00:00+09:00', 1020);

INSERT INTO todo_history (todo_id, previous_text, new_text, changed_at, changed_on_date)
SELECT id, '[DUMMY-${_e}] : ${Xe}--1', '[DUMMY-${_e}] : ${Xe}--2', '${mn}T12:00:00+09:00', '${mn}'
FROM todos WHERE text = '[DUMMY-${_e}] : ${Xe}--' LIMIT 1;

INSERT INTO todo_history (todo_id, previous_text, new_text, changed_at, changed_on_date)
SELECT id, '[DUMMY-${_e}] : ${Xe}--2', '[DUMMY-${_e}] : ${Xe}--', '${rn}T12:00:00+09:00', '${rn}'
FROM todos WHERE text = '[DUMMY-${_e}] : ${Xe}--' LIMIT 1;

INSERT INTO todo_history (todo_id, previous_text, new_text, changed_at, changed_on_date)
SELECT id, '[DUMMY-${_e}] : ${Ot}--1', '[DUMMY-${_e}] : ${Ot}--', '${rn}T13:00:00+09:00', '${rn}'
FROM todos WHERE text = '[DUMMY-${_e}] : ${Ot}--' LIMIT 1;`,Wa=document.createElement("textarea");Wa.value=uw,Wa.style.position="fixed",Wa.style.opacity="0",document.body.appendChild(Wa),Wa.select();try{document.execCommand("copy"),alert(" SQL  !")}catch{alert(" .")}document.body.removeChild(Wa)},className:"copy-button",children:" "})]})]}),c.jsx("pre",{className:"sql-code",children:`--  :         
--   (      )

-- DO   (PostgreSQL/Supabase)
DO $$
DECLARE
  day_m2 date := CURRENT_DATE - INTERVAL '2 days';
  day_m1 date := CURRENT_DATE - INTERVAL '1 day';
  day_0 date := CURRENT_DATE;
  day_p1 date := CURRENT_DATE + INTERVAL '1 day';
  day_p2 date := CURRENT_DATE + INTERVAL '2 days';
  d_m2 text := EXTRACT(DAY FROM CURRENT_DATE - INTERVAL '2 days')::text;
  d_m1 text := EXTRACT(DAY FROM CURRENT_DATE - INTERVAL '1 day')::text;
  d_0 text := EXTRACT(DAY FROM CURRENT_DATE)::text;
  d_p1 text := EXTRACT(DAY FROM CURRENT_DATE + INTERVAL '1 day')::text;
  d_p2 text := EXTRACT(DAY FROM CURRENT_DATE + INTERVAL '2 days')::text;
  session_id text := EXTRACT(EPOCH FROM NOW())::bigint::text;
BEGIN
  -- -2   (4)
  INSERT INTO todos (text, date, completed, created_at, order_index)
  VALUES
    ('[DUMMY-' || session_id || '] : ' || d_m2 || '--', day_m2, false, (day_m2 + TIME '09:00:00') AT TIME ZONE 'Asia/Seoul', 1001),
    ...

  --  20  3  
  --   GitHub  
END $$;`})]}),c.jsxs("div",{className:"sql-block",children:[c.jsxs("div",{className:"sql-header",children:[c.jsx("span",{children:" SQL"}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("button",{onClick:()=>{window.open("https://raw.githubusercontent.com/jaehwan-lee-benja/todo-note/main/delete-dummy-data-v2.sql","_blank")},className:"link-button",title:"GitHub  ",children:""}),c.jsx("button",{onClick:()=>{const ye=`DELETE FROM todo_history
WHERE todo_id IN (
  SELECT id FROM todos WHERE text LIKE '[DUMMY-%'
);

DELETE FROM todos
WHERE text LIKE '[DUMMY-%';`,ct=document.createElement("textarea");ct.value=ye,ct.style.position="fixed",ct.style.opacity="0",document.body.appendChild(ct),ct.select();try{document.execCommand("copy"),alert(" SQL  !")}catch{alert(" .")}document.body.removeChild(ct)},className:"copy-button",children:" "})]})]}),c.jsx("pre",{className:"sql-code",children:`DELETE FROM todo_history
WHERE todo_id IN (
  SELECT id FROM todos WHERE text LIKE '[DUMMY-%'
);

DELETE FROM todos
WHERE text LIKE '[DUMMY-%';`})]})]})]})},"memo")}else{if($==="routine")return c.jsx("div",{children:c.jsxs(Yu,{title:" ",className:"routine-section section-block",inputValue:Ye,setInputValue:qe,onAddTodo:Sn,isAdding:Pe,placeholder:"   ...",settingsMenuItems:Jt,children:[D.length>0&&c.jsx(Da,{items:D.map(Oe=>Oe.id),strategy:Oa,children:D.map((Oe,ye)=>{const ct=m.filter(De=>De.parent_id===Oe.id);return c.jsx(fi,{todo:Oe,index:ye,onToggle:tn,onDelete:Bn,onEdit:K,formatDate:Hr,formatDateOnly:Hn,isFocused:me===Oe.id,onFocus:or,onAddSubTodo:Ln,subtodos:ct,level:0,onCreateRoutine:I,routines:S,onShowRoutineHistory:he,onOpenRoutineSetupModal:te,onOpenHistoryModal:y,currentPageDate:Me(a),onRemoveFromUI:gr,showSuccessMessage:zr,activeId:zt,overId:fn},Oe.id)})}),D.length>0&&H.length>0&&c.jsx("div",{style:{margin:"1rem 0",padding:"0 1rem"},children:c.jsx("div",{className:"separator-line"})}),H.length>0&&c.jsx(Da,{items:H.map(Oe=>Oe.id),strategy:Oa,children:H.map((Oe,ye)=>{const ct=m.filter(De=>De.parent_id===Oe.id);return c.jsx(fi,{todo:Oe,index:ye,onToggle:tn,onDelete:Bn,onEdit:K,formatDate:Hr,formatDateOnly:Hn,isFocused:me===Oe.id,onFocus:or,onAddSubTodo:Ln,subtodos:ct,level:0,onCreateRoutine:I,routines:S,onShowRoutineHistory:he,onOpenRoutineSetupModal:te,onOpenHistoryModal:y,currentPageDate:Me(a),isPendingRoutine:!0,onRemoveFromUI:gr,showSuccessMessage:zr,activeId:zt,overId:fn},Oe.id)})})]})},"routine");if($==="normal"){const Oe=[...je?[]:[{icon:"",label:" ",onClick:()=>Ih($)}],...wt?[]:[{icon:"",label:" ",onClick:()=>Yh($)}],{icon:"",label:"",onClick:()=>{confirm(`    ?

      .`)&&Ic("normal")}},{icon:"",label:"",onClick:()=>{alert(`      .

   ""  .`)}}];return c.jsx("div",{children:c.jsx(Yu,{title:Lc.normal,className:"normal-section section-block",inputValue:ot,setInputValue:we,onAddTodo:hn,isAdding:Pe,placeholder:"   ...",editable:!0,onTitleChange:ye=>aw("normal",ye),settingsMenuItems:Oe,children:Y.length>0&&c.jsx(Da,{items:Y.map(ye=>ye.id),strategy:Oa,children:Y.map((ye,ct)=>{const De=m.filter(Xe=>Xe.parent_id===ye.id),_e=Me(a);return c.jsx(fi,{todo:ye,index:ct,onToggle:tn,onDelete:Bn,onEdit:K,formatDate:Hr,formatDateOnly:Hn,isFocused:me===ye.id,onFocus:or,onAddSubTodo:Ln,subtodos:De,level:0,onCreateRoutine:I,routines:S,onShowRoutineHistory:he,onOpenRoutineSetupModal:te,onOpenHistoryModal:y,currentPageDate:_e,onRemoveFromUI:gr,showSuccessMessage:zr,activeId:zt,overId:fn},ye.id)})})})},"normal")}else if($==="key-thoughts"){const Oe=[...Jt,{icon:"",label:"",onClick:()=>u("keyThoughtsViewer")},{icon:"",label:"",onClick:()=>{Rh(),Bc(!0)}}];return c.jsx("div",{children:c.jsx(MO,{blocks:Nh,setBlocks:Ch,focusedBlockId:S_,setFocusedBlockId:x_,onOpenViewer:()=>u("keyThoughtsViewer"),onShowHistory:()=>{Rh(),Bc(!0)},settingsMenuItems:Oe})},"key-thoughts")}else{const Oe=Za.find(De=>De.id===$);if(!Oe)return null;const ye=m.filter(De=>!De.parent_id&&De.section_type==="custom"&&De.section_id===$).sort((De,_e)=>De.order_index-_e.order_index),ct=[{icon:"",label:"",onClick:()=>Ic($)},{icon:"",label:"",onClick:()=>ow($)}];return c.jsx("div",{children:c.jsx(Yu,{title:`${Oe.icon} ${Oe.name}`,className:"custom-section section-block",inputValue:Bh[$]||"",setInputValue:De=>Lh(_e=>({..._e,[$]:De})),onAddTodo:()=>lw($),isAdding:zh,placeholder:`${Oe.name}   ...`,editable:!0,onTitleChange:De=>{const _e=Za.map(Xe=>Xe.id===$?{...Xe,name:De}:Xe);Al(_e),Yc(_e)},settingsMenuItems:ct,children:ye.length>0&&c.jsx(Da,{items:ye.map(De=>De.id),strategy:Oa,children:ye.map((De,_e)=>{const Xe=m.filter(Ot=>Ot.parent_id===De.id);return c.jsx(fi,{todo:De,index:_e,onToggle:tn,onDelete:Bn,onEdit:K,formatDate:Hr,formatDateOnly:Hn,isFocused:me===De.id,onFocus:or,onAddSubTodo:Ln,subtodos:Xe,level:0,onCreateRoutine:I,routines:S,onShowRoutineHistory:he,onOpenRoutineSetupModal:te,onOpenHistoryModal:y,currentPageDate:Me(a),onRemoveFromUI:gr,showSuccessMessage:zr,activeId:zt,overId:fn},De.id)})})})},$)}}})})})})()}),c.jsx(xh,{children:zt?(()=>{const D=m.find(Y=>Y.id===zt);if(!D)return null;const H=m.filter(Y=>Y.parent_id===D.id);return c.jsx("div",{className:"drag-overlay-todo",children:c.jsx(fi,{todo:D,index:0,onToggle:()=>{},onDelete:()=>{},onEdit:()=>{},formatDate:Hr,formatDateOnly:Hn,isFocused:!1,onFocus:()=>{},onAddSubTodo:()=>{},subtodos:H,level:0,onCreateRoutine:()=>{},routines:S,onShowRoutineHistory:()=>{},onOpenRoutineSetupModal:()=>{},onOpenHistoryModal:()=>{},currentPageDate:Me(a),onRemoveFromUI:()=>{},showSuccessMessage:()=>{}})})})():null})]}),c.jsx(DO,{viewMode:$r,currentSectionIndex:J_,sectionsContainerRef:Fa})]}),bt&&c.jsx(dy,{message:"",onUndo:_t}),lr&&c.jsx(dy,{message:dn,onUndo:Ze?cs:null,variant:"success"}),nn&&Vt&&c.jsx(fy,{todo:Vt,onClose:()=>Yt(!1),onDeleteThisOnly:at,onDeleteFromNow:vt,onDeleteAll:xn}),Ue&&Ce&&c.jsx(fy,{todo:Ce,onClose:()=>ze(!1),onDeleteThisOnly:re,onDeleteFromNow:U,onDeleteAll:ie}),x&&p&&(()=>{const D=p,H=D.visible_dates&&D.visible_dates.length>0?D.visible_dates:[D.date],Y=H[0],W=H.map(P=>({id:`${D.id}-${P}`,date:P})),$=v[D.id]||[];return c.jsx("div",{className:"modal-overlay",onClick:w,children:c.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:w,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsxs("div",{className:"todo-history",children:[c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:":"}),c.jsx("span",{className:"history-value",children:Hr(D.created_at)})]}),c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:Hn(Y?new Date(Y+"T00:00:00"):new Date(D.date+"T00:00:00"))})]}),W.length>0&&c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:W.map((P,Ke)=>{const Te=P.date===D.date,je=Hn(new Date(P.date+"T00:00:00"));return c.jsxs("span",{children:[Ke>0&&"  ",c.jsxs("span",{style:Te?{fontWeight:"bold",color:"#4CAF50"}:{},children:[je.split("(")[0],Te?"()":""]})]},P.id)})})]}),(()=>{const P=new Date(D.created_at).toISOString().split("T")[0],Ke=D.date;return P!==Ke&&W.length===0?c.jsxs("div",{className:"history-item",children:[c.jsx("span",{className:"history-label",children:" :"}),c.jsx("span",{className:"history-value",children:Hn(new Date(D.date+"T00:00:00"))})]}):null})(),$.length>0&&c.jsxs("div",{className:"history-changes-list",children:[c.jsxs("div",{className:"history-changes-header",children:["  (",$.length,")"]}),$.map(P=>c.jsxs("div",{className:"history-record-compact",children:[c.jsxs("div",{className:"history-record-summary",children:[c.jsxs("div",{className:"history-change-time",children:[Hr(P.changed_at),P.changed_on_date&&c.jsxs("span",{className:"history-page-info",children:[" (: ",Hn(new Date(P.changed_on_date+"T00:00:00")),")"]})]}),c.jsx("button",{className:"history-detail-button",onClick:Ke=>{Ke.stopPropagation(),E(P.id)},children:g.includes(P.id)?"":""})]}),g.includes(P.id)&&c.jsxs("div",{className:"history-change",children:[c.jsxs("div",{className:"history-change-item history-before",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:P.previous_text})]}),c.jsx("div",{className:"history-change-arrow",children:""}),c.jsxs("div",{className:"history-change-item history-after",children:[c.jsx("span",{className:"change-badge",children:""}),c.jsx("span",{className:"change-text",children:P.new_text})]})]})]},P.id))]})]})})]})})})(),tt&&p&&(()=>{const D=p,H=S.find(Y=>Y.id===D.routine_id);return c.jsx("div",{className:"modal-overlay",onClick:ce,children:c.jsxs("div",{className:"modal-content",onClick:Y=>Y.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"  "}),c.jsx("button",{onClick:ce,className:"modal-close-button",children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsx("div",{className:"routine-setup-inline",children:H&&!lt?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"routine-current-info",children:[c.jsx("div",{className:"routine-info-title",children:" :"}),c.jsx("div",{className:"routine-days-display",children:za.filter(Y=>H.days.includes(Y.key)).map(Y=>c.jsx("span",{className:"routine-day-badge",children:Y.label},Y.key))}),H.time_slot&&c.jsxs("div",{className:"routine-time-slot",style:{marginTop:"0.5rem",fontSize:"0.9rem"},children:[" ",H.time_slot]})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:Y=>{Y.stopPropagation(),H&&(yt(H.days),X(H.time_slot||""),L(!0))},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:async Y=>{Y.stopPropagation(),H&&D&&(await I(D.id,D.text,[],null,!0),ce())},className:"routine-remove-button",children:""})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"routine-setup-title",children:lt?" :":"  :"}),c.jsx("div",{className:"day-selector-inline",children:za.map(Y=>c.jsx("button",{onClick:W=>{W.stopPropagation(),handleToggleRoutineDayInModal(Y.key)},className:`day-button-inline ${It.includes(Y.key)?"selected":""}`,children:Y.label},Y.key))}),c.jsxs("div",{className:"time-slot-selector",style:{marginTop:"1rem"},children:[c.jsx("label",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.5rem",display:"block"},children:"  ()"}),c.jsx(Th,{value:q,onChange:Y=>X(Y)})]}),c.jsxs("div",{className:"routine-setup-actions",children:[c.jsx("button",{onClick:async Y=>{Y.stopPropagation(),D&&(lt&&H?await I(D.id,D.text,It,H.id,!1,q):await I(D.id,D.text,It,null,!1,q),ce())},className:"routine-confirm-button",children:""}),c.jsx("button",{onClick:Y=>{Y.stopPropagation(),ce()},className:"routine-cancel-button",children:""})]})]})})})]})})})(),c.jsx(AO,{showRoutineModal:j,onClose:le,routineInput:A,setRoutineInput:O,isAddingRoutine:ne,selectedDays:N,onToggleDay:Ee,selectedTimeSlot:V,setSelectedTimeSlot:Z,onAddRoutine:He,routines:S,editingRoutineId:oe,editingRoutineText:C,setEditingRoutineText:B,editingRoutineDays:gt,onToggleEditDay:ee,onStartEdit:R,onSaveEdit:M,onCancelEdit:z,onDelete:G,onShowHistory:he}),c.jsx(CO,{showRoutineHistory:Q,onClose:F,selectedRoutine:fe,routineHistoryData:ve}),c.jsx(zO,{showDummyModal:o_,onClose:()=>Dh(!1),onCreateDummyData:u_,onRemoveDuplicates:h_,dummySessions:l_,onDeleteDummySession:d_,onDeleteAllDummies:f_,formatDate:Hr}),c.jsx($O,{showGanttChart:Pa,onClose:i_,ganttData:n_,ganttPeriod:Oh,setGanttPeriod:r_,formatDateOnly:Hn}),c.jsx(BO,{showEncouragementModal:N_,onClose:()=>Mh(!1),encouragementMessages:A_,newEncouragementMessage:C_,setNewEncouragementMessage:R_,onAddEncouragementMessage:q_,editingEncouragementId:M_,editingEncouragementText:U_,setEditingEncouragementId:k_,setEditingEncouragementText:z_,onUpdateEncouragementMessage:I_,onDeleteEncouragementMessage:Y_}),c.jsx(HO,{isOpen:K_,onClose:()=>Uh(!1),onAddSection:sw}),c.jsx(qO,{show:Z_,onClose:()=>Vh(!1),hiddenSections:ds,sectionOrder:us,sectionTitles:Lc,customSections:Za,onShowSection:W_}),c.jsx(LO,{showKeyThoughtsHistory:T_,onClose:()=>Bc(!1),keyThoughtsHistory:E_,onRestoreVersion:D_})]})]}))}l1.createRoot(document.getElementById("root")).render(c.jsx(_.StrictMode,{children:c.jsx(nD,{})}));
